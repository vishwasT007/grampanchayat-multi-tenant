function r8(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in n)){const o=Object.getOwnPropertyDescriptor(r,a);o&&Object.defineProperty(n,a,o.get?o:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var j$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function s8(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Gb={exports:{}},Ym={};var HN;function a8(){if(HN)return Ym;HN=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:o}}return Ym.Fragment=e,Ym.jsx=t,Ym.jsxs=t,Ym}var $N;function i8(){return $N||($N=1,Gb.exports=a8()),Gb.exports}var s=i8(),Hb={exports:{}},fn={};var WN;function o8(){if(WN)return fn;WN=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),v=Symbol.iterator;function b(te){return te===null||typeof te!="object"?null:(te=v&&te[v]||te["@@iterator"],typeof te=="function"?te:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,j={};function S(te,q,Q){this.props=te,this.context=q,this.refs=j,this.updater=Q||T}S.prototype.isReactComponent={},S.prototype.setState=function(te,q){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,q,"setState")},S.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function D(){}D.prototype=S.prototype;function O(te,q,Q){this.props=te,this.context=q,this.refs=j,this.updater=Q||T}var B=O.prototype=new D;B.constructor=O,E(B,S.prototype),B.isPureReactComponent=!0;var re=Array.isArray;function ae(){}var G={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function k(te,q,Q){var ne=Q.ref;return{$$typeof:n,type:te,key:q,ref:ne!==void 0?ne:null,props:Q}}function L(te,q){return k(te.type,q,te.props)}function C(te){return typeof te=="object"&&te!==null&&te.$$typeof===n}function P(te){var q={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(Q){return q[Q]})}var V=/\/+/g;function oe(te,q){return typeof te=="object"&&te!==null&&te.key!=null?P(""+te.key):q.toString(36)}function Ne(te){switch(te.status){case"fulfilled":return te.value;case"rejected":throw te.reason;default:switch(typeof te.status=="string"?te.then(ae,ae):(te.status="pending",te.then(function(q){te.status==="pending"&&(te.status="fulfilled",te.value=q)},function(q){te.status==="pending"&&(te.status="rejected",te.reason=q)})),te.status){case"fulfilled":return te.value;case"rejected":throw te.reason}}throw te}function ue(te,q,Q,ne,he){var me=typeof te;(me==="undefined"||me==="boolean")&&(te=null);var be=!1;if(te===null)be=!0;else switch(me){case"bigint":case"string":case"number":be=!0;break;case"object":switch(te.$$typeof){case n:case e:be=!0;break;case g:return be=te._init,ue(be(te._payload),q,Q,ne,he)}}if(be)return he=he(te),be=ne===""?"."+oe(te,0):ne,re(he)?(Q="",be!=null&&(Q=be.replace(V,"$&/")+"/"),ue(he,q,Q,"",function(qe){return qe})):he!=null&&(C(he)&&(he=L(he,Q+(he.key==null||te&&te.key===he.key?"":(""+he.key).replace(V,"$&/")+"/")+be)),q.push(he)),1;be=0;var Le=ne===""?".":ne+":";if(re(te))for(var Re=0;Re<te.length;Re++)ne=te[Re],me=Le+oe(ne,Re),be+=ue(ne,q,Q,me,he);else if(Re=b(te),typeof Re=="function")for(te=Re.call(te),Re=0;!(ne=te.next()).done;)ne=ne.value,me=Le+oe(ne,Re++),be+=ue(ne,q,Q,me,he);else if(me==="object"){if(typeof te.then=="function")return ue(Ne(te),q,Q,ne,he);throw q=String(te),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return be}function pe(te,q,Q){if(te==null)return te;var ne=[],he=0;return ue(te,ne,"","",function(me){return q.call(Q,me,he++)}),ne}function de(te){if(te._status===-1){var q=te._result;q=q(),q.then(function(Q){(te._status===0||te._status===-1)&&(te._status=1,te._result=Q)},function(Q){(te._status===0||te._status===-1)&&(te._status=2,te._result=Q)}),te._status===-1&&(te._status=0,te._result=q)}if(te._status===1)return te._result.default;throw te._result}var Se=typeof reportError=="function"?reportError:function(te){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof te=="object"&&te!==null&&typeof te.message=="string"?String(te.message):String(te),error:te});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",te);return}console.error(te)},ze={map:pe,forEach:function(te,q,Q){pe(te,function(){q.apply(this,arguments)},Q)},count:function(te){var q=0;return pe(te,function(){q++}),q},toArray:function(te){return pe(te,function(q){return q})||[]},only:function(te){if(!C(te))throw Error("React.Children.only expected to receive a single React element child.");return te}};return fn.Activity=x,fn.Children=ze,fn.Component=S,fn.Fragment=t,fn.Profiler=a,fn.PureComponent=O,fn.StrictMode=r,fn.Suspense=h,fn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,fn.__COMPILER_RUNTIME={__proto__:null,c:function(te){return G.H.useMemoCache(te)}},fn.cache=function(te){return function(){return te.apply(null,arguments)}},fn.cacheSignal=function(){return null},fn.cloneElement=function(te,q,Q){if(te==null)throw Error("The argument must be a React element, but you passed "+te+".");var ne=E({},te.props),he=te.key;if(q!=null)for(me in q.key!==void 0&&(he=""+q.key),q)!M.call(q,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&q.ref===void 0||(ne[me]=q[me]);var me=arguments.length-2;if(me===1)ne.children=Q;else if(1<me){for(var be=Array(me),Le=0;Le<me;Le++)be[Le]=arguments[Le+2];ne.children=be}return k(te.type,he,ne)},fn.createContext=function(te){return te={$$typeof:c,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null},te.Provider=te,te.Consumer={$$typeof:o,_context:te},te},fn.createElement=function(te,q,Q){var ne,he={},me=null;if(q!=null)for(ne in q.key!==void 0&&(me=""+q.key),q)M.call(q,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(he[ne]=q[ne]);var be=arguments.length-2;if(be===1)he.children=Q;else if(1<be){for(var Le=Array(be),Re=0;Re<be;Re++)Le[Re]=arguments[Re+2];he.children=Le}if(te&&te.defaultProps)for(ne in be=te.defaultProps,be)he[ne]===void 0&&(he[ne]=be[ne]);return k(te,me,he)},fn.createRef=function(){return{current:null}},fn.forwardRef=function(te){return{$$typeof:u,render:te}},fn.isValidElement=C,fn.lazy=function(te){return{$$typeof:g,_payload:{_status:-1,_result:te},_init:de}},fn.memo=function(te,q){return{$$typeof:f,type:te,compare:q===void 0?null:q}},fn.startTransition=function(te){var q=G.T,Q={};G.T=Q;try{var ne=te(),he=G.S;he!==null&&he(Q,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(ae,Se)}catch(me){Se(me)}finally{q!==null&&Q.types!==null&&(q.types=Q.types),G.T=q}},fn.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},fn.use=function(te){return G.H.use(te)},fn.useActionState=function(te,q,Q){return G.H.useActionState(te,q,Q)},fn.useCallback=function(te,q){return G.H.useCallback(te,q)},fn.useContext=function(te){return G.H.useContext(te)},fn.useDebugValue=function(){},fn.useDeferredValue=function(te,q){return G.H.useDeferredValue(te,q)},fn.useEffect=function(te,q){return G.H.useEffect(te,q)},fn.useEffectEvent=function(te){return G.H.useEffectEvent(te)},fn.useId=function(){return G.H.useId()},fn.useImperativeHandle=function(te,q,Q){return G.H.useImperativeHandle(te,q,Q)},fn.useInsertionEffect=function(te,q){return G.H.useInsertionEffect(te,q)},fn.useLayoutEffect=function(te,q){return G.H.useLayoutEffect(te,q)},fn.useMemo=function(te,q){return G.H.useMemo(te,q)},fn.useOptimistic=function(te,q){return G.H.useOptimistic(te,q)},fn.useReducer=function(te,q,Q){return G.H.useReducer(te,q,Q)},fn.useRef=function(te){return G.H.useRef(te)},fn.useState=function(te){return G.H.useState(te)},fn.useSyncExternalStore=function(te,q,Q){return G.H.useSyncExternalStore(te,q,Q)},fn.useTransition=function(){return G.H.useTransition()},fn.version="19.2.0",fn}var KN;function Y2(){return KN||(KN=1,Hb.exports=o8()),Hb.exports}var W=Y2();const P0=s8(W),l8=r8({__proto__:null,default:P0},[W]);var $b={exports:{}},Xm={},Wb={exports:{}},Kb={};var YN;function c8(){return YN||(YN=1,(function(n){function e(ue,pe){var de=ue.length;ue.push(pe);e:for(;0<de;){var Se=de-1>>>1,ze=ue[Se];if(0<a(ze,pe))ue[Se]=pe,ue[de]=ze,de=Se;else break e}}function t(ue){return ue.length===0?null:ue[0]}function r(ue){if(ue.length===0)return null;var pe=ue[0],de=ue.pop();if(de!==pe){ue[0]=de;e:for(var Se=0,ze=ue.length,te=ze>>>1;Se<te;){var q=2*(Se+1)-1,Q=ue[q],ne=q+1,he=ue[ne];if(0>a(Q,de))ne<ze&&0>a(he,Q)?(ue[Se]=he,ue[ne]=de,Se=ne):(ue[Se]=Q,ue[q]=de,Se=q);else if(ne<ze&&0>a(he,de))ue[Se]=he,ue[ne]=de,Se=ne;else break e}}return pe}function a(ue,pe){var de=ue.sortIndex-pe.sortIndex;return de!==0?de:ue.id-pe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var h=[],f=[],g=1,x=null,v=3,b=!1,T=!1,E=!1,j=!1,S=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function B(ue){for(var pe=t(f);pe!==null;){if(pe.callback===null)r(f);else if(pe.startTime<=ue)r(f),pe.sortIndex=pe.expirationTime,e(h,pe);else break;pe=t(f)}}function re(ue){if(E=!1,B(ue),!T)if(t(h)!==null)T=!0,ae||(ae=!0,P());else{var pe=t(f);pe!==null&&Ne(re,pe.startTime-ue)}}var ae=!1,G=-1,M=5,k=-1;function L(){return j?!0:!(n.unstable_now()-k<M)}function C(){if(j=!1,ae){var ue=n.unstable_now();k=ue;var pe=!0;try{e:{T=!1,E&&(E=!1,D(G),G=-1),b=!0;var de=v;try{t:{for(B(ue),x=t(h);x!==null&&!(x.expirationTime>ue&&L());){var Se=x.callback;if(typeof Se=="function"){x.callback=null,v=x.priorityLevel;var ze=Se(x.expirationTime<=ue);if(ue=n.unstable_now(),typeof ze=="function"){x.callback=ze,B(ue),pe=!0;break t}x===t(h)&&r(h),B(ue)}else r(h);x=t(h)}if(x!==null)pe=!0;else{var te=t(f);te!==null&&Ne(re,te.startTime-ue),pe=!1}}break e}finally{x=null,v=de,b=!1}pe=void 0}}finally{pe?P():ae=!1}}}var P;if(typeof O=="function")P=function(){O(C)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,oe=V.port2;V.port1.onmessage=C,P=function(){oe.postMessage(null)}}else P=function(){S(C,0)};function Ne(ue,pe){G=S(function(){ue(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ue){ue.callback=null},n.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ue?Math.floor(1e3/ue):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(ue){switch(v){case 1:case 2:case 3:var pe=3;break;default:pe=v}var de=v;v=pe;try{return ue()}finally{v=de}},n.unstable_requestPaint=function(){j=!0},n.unstable_runWithPriority=function(ue,pe){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var de=v;v=ue;try{return pe()}finally{v=de}},n.unstable_scheduleCallback=function(ue,pe,de){var Se=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Se+de:Se):de=Se,ue){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=de+ze,ue={id:g++,callback:pe,priorityLevel:ue,startTime:de,expirationTime:ze,sortIndex:-1},de>Se?(ue.sortIndex=de,e(f,ue),t(h)===null&&ue===t(f)&&(E?(D(G),G=-1):E=!0,Ne(re,de-Se))):(ue.sortIndex=ze,e(h,ue),T||b||(T=!0,ae||(ae=!0,P()))),ue},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(ue){var pe=v;return function(){var de=v;v=pe;try{return ue.apply(this,arguments)}finally{v=de}}}})(Kb)),Kb}var XN;function u8(){return XN||(XN=1,Wb.exports=c8()),Wb.exports}var Yb={exports:{}},Ha={};var QN;function d8(){if(QN)return Ha;QN=1;var n=Y2();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(h,f,g){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:x==null?null:""+x,children:h,containerInfo:f,implementation:g}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ha.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ha.createPortal=function(h,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(h,f,null,g)},Ha.flushSync=function(h){var f=c.T,g=r.p;try{if(c.T=null,r.p=2,h)return h()}finally{c.T=f,r.p=g,r.d.f()}},Ha.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(h,f))},Ha.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Ha.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var g=f.as,x=u(g,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?r.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:x,integrity:v,fetchPriority:b}):g==="script"&&r.d.X(h,{crossOrigin:x,integrity:v,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ha.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);r.d.M(h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(h)},Ha.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,x=u(g,f.crossOrigin);r.d.L(h,g,{crossOrigin:x,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ha.preloadModule=function(h,f){if(typeof h=="string")if(f){var g=u(f.as,f.crossOrigin);r.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(h)},Ha.requestFormReset=function(h){r.d.r(h)},Ha.unstable_batchedUpdates=function(h,f){return h(f)},Ha.useFormState=function(h,f,g){return c.H.useFormState(h,f,g)},Ha.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ha.version="19.2.0",Ha}var JN;function u3(){if(JN)return Yb.exports;JN=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Yb.exports=d8(),Yb.exports}var ZN;function h8(){if(ZN)return Xm;ZN=1;var n=u8(),e=Y2(),t=u3();function r(i){var l="https://react.dev/errors/"+i;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var l=i,d=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(d=l.return),i=l.return;while(i)}return l.tag===3?d:null}function c(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function u(i){if(i.tag===31){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function h(i){if(o(i)!==i)throw Error(r(188))}function f(i){var l=i.alternate;if(!l){if(l=o(i),l===null)throw Error(r(188));return l!==i?null:i}for(var d=i,m=l;;){var w=d.return;if(w===null)break;var _=w.alternate;if(_===null){if(m=w.return,m!==null){d=m;continue}break}if(w.child===_.child){for(_=w.child;_;){if(_===d)return h(w),i;if(_===m)return h(w),l;_=_.sibling}throw Error(r(188))}if(d.return!==m.return)d=w,m=_;else{for(var U=!1,X=w.child;X;){if(X===d){U=!0,d=w,m=_;break}if(X===m){U=!0,m=w,d=_;break}X=X.sibling}if(!U){for(X=_.child;X;){if(X===d){U=!0,d=_,m=w;break}if(X===m){U=!0,m=_,d=w;break}X=X.sibling}if(!U)throw Error(r(189))}}if(d.alternate!==m)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?i:l}function g(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i;for(i=i.child;i!==null;){if(l=g(i),l!==null)return l;i=i.sibling}return null}var x=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),O=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function P(i){return i===null||typeof i!="object"?null:(i=C&&i[C]||i["@@iterator"],typeof i=="function"?i:null)}var V=Symbol.for("react.client.reference");function oe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===V?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case E:return"Fragment";case S:return"Profiler";case j:return"StrictMode";case re:return"Suspense";case ae:return"SuspenseList";case k:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case T:return"Portal";case O:return i.displayName||"Context";case D:return(i._context.displayName||"Context")+".Consumer";case B:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case G:return l=i.displayName||null,l!==null?l:oe(i.type)||"Memo";case M:l=i._payload,i=i._init;try{return oe(i(l))}catch{}}return null}var Ne=Array.isArray,ue=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Se=[],ze=-1;function te(i){return{current:i}}function q(i){0>ze||(i.current=Se[ze],Se[ze]=null,ze--)}function Q(i,l){ze++,Se[ze]=i.current,i.current=l}var ne=te(null),he=te(null),me=te(null),be=te(null);function Le(i,l){switch(Q(me,l),Q(he,i),Q(ne,null),l.nodeType){case 9:case 11:i=(i=l.documentElement)&&(i=i.namespaceURI)?mN(i):0;break;default:if(i=l.tagName,l=l.namespaceURI)l=mN(l),i=gN(l,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}q(ne),Q(ne,i)}function Re(){q(ne),q(he),q(me)}function qe(i){i.memoizedState!==null&&Q(be,i);var l=ne.current,d=gN(l,i.type);l!==d&&(Q(he,i),Q(ne,d))}function Je(i){he.current===i&&(q(ne),q(he)),be.current===i&&(q(be),Hm._currentValue=de)}var it,at;function ft(i){if(it===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);it=l&&l[1]||"",at=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+it+i+at}var se=!1;function st(i,l){if(!i||se)return"";se=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var We=function(){throw Error()};if(Object.defineProperty(We.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(We,[])}catch(Me){var De=Me}Reflect.construct(i,[],We)}else{try{We.call()}catch(Me){De=Me}i.call(We.prototype)}}else{try{throw Error()}catch(Me){De=Me}(We=i())&&typeof We.catch=="function"&&We.catch(function(){})}}catch(Me){if(Me&&De&&typeof Me.stack=="string")return[Me.stack,De.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=m.DetermineComponentFrameRoot(),U=_[0],X=_[1];if(U&&X){var fe=U.split(`
`),ke=X.split(`
`);for(w=m=0;m<fe.length&&!fe[m].includes("DetermineComponentFrameRoot");)m++;for(;w<ke.length&&!ke[w].includes("DetermineComponentFrameRoot");)w++;if(m===fe.length||w===ke.length)for(m=fe.length-1,w=ke.length-1;1<=m&&0<=w&&fe[m]!==ke[w];)w--;for(;1<=m&&0<=w;m--,w--)if(fe[m]!==ke[w]){if(m!==1||w!==1)do if(m--,w--,0>w||fe[m]!==ke[w]){var Be=`
`+fe[m].replace(" at new "," at ");return i.displayName&&Be.includes("<anonymous>")&&(Be=Be.replace("<anonymous>",i.displayName)),Be}while(1<=m&&0<=w);break}}}finally{se=!1,Error.prepareStackTrace=d}return(d=i?i.displayName||i.name:"")?ft(d):""}function rn(i,l){switch(i.tag){case 26:case 27:case 5:return ft(i.type);case 16:return ft("Lazy");case 13:return i.child!==l&&l!==null?ft("Suspense Fallback"):ft("Suspense");case 19:return ft("SuspenseList");case 0:case 15:return st(i.type,!1);case 11:return st(i.type.render,!1);case 1:return st(i.type,!0);case 31:return ft("Activity");default:return""}}function Pt(i){try{var l="",d=null;do l+=rn(i,d),d=i,i=i.return;while(i);return l}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var He=Object.prototype.hasOwnProperty,ct=n.unstable_scheduleCallback,lt=n.unstable_cancelCallback,Mt=n.unstable_shouldYield,Et=n.unstable_requestPaint,sn=n.unstable_now,dn=n.unstable_getCurrentPriorityLevel,Qt=n.unstable_ImmediatePriority,pn=n.unstable_UserBlockingPriority,on=n.unstable_NormalPriority,wt=n.unstable_LowPriority,en=n.unstable_IdlePriority,Nt=n.log,Cr=n.unstable_setDisableYieldValue,ln=null,Lt=null;function Wt(i){if(typeof Nt=="function"&&Cr(i),Lt&&typeof Lt.setStrictMode=="function")try{Lt.setStrictMode(ln,i)}catch{}}var an=Math.clz32?Math.clz32:zt,Tt=Math.log,zn=Math.LN2;function zt(i){return i>>>=0,i===0?32:31-(Tt(i)/zn|0)|0}var qt=256,Hn=262144,At=4194304;function jt(i){var l=i&42;if(l!==0)return l;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function xn(i,l,d){var m=i.pendingLanes;if(m===0)return 0;var w=0,_=i.suspendedLanes,U=i.pingedLanes;i=i.warmLanes;var X=m&134217727;return X!==0?(m=X&~_,m!==0?w=jt(m):(U&=X,U!==0?w=jt(U):d||(d=X&~i,d!==0&&(w=jt(d))))):(X=m&~_,X!==0?w=jt(X):U!==0?w=jt(U):d||(d=m&~i,d!==0&&(w=jt(d)))),w===0?0:l!==0&&l!==w&&(l&_)===0&&(_=w&-w,d=l&-l,_>=d||_===32&&(d&4194048)!==0)?l:w}function qs(i,l){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&l)===0}function As(i,l){switch(i){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yi(){var i=At;return At<<=1,(At&62914560)===0&&(At=4194304),i}function gs(i){for(var l=[],d=0;31>d;d++)l.push(i);return l}function Ct(i,l){i.pendingLanes|=l,l!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Wi(i,l,d,m,w,_){var U=i.pendingLanes;i.pendingLanes=d,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=d,i.entangledLanes&=d,i.errorRecoveryDisabledLanes&=d,i.shellSuspendCounter=0;var X=i.entanglements,fe=i.expirationTimes,ke=i.hiddenUpdates;for(d=U&~d;0<d;){var Be=31-an(d),We=1<<Be;X[Be]=0,fe[Be]=-1;var De=ke[Be];if(De!==null)for(ke[Be]=null,Be=0;Be<De.length;Be++){var Me=De[Be];Me!==null&&(Me.lane&=-536870913)}d&=~We}m!==0&&Na(i,m,0),_!==0&&w===0&&i.tag!==0&&(i.suspendedLanes|=_&~(U&~l))}function Na(i,l,d){i.pendingLanes|=l,i.suspendedLanes&=~l;var m=31-an(l);i.entangledLanes|=l,i.entanglements[m]=i.entanglements[m]|1073741824|d&261930}function ia(i,l){var d=i.entangledLanes|=l;for(i=i.entanglements;d;){var m=31-an(d),w=1<<m;w&l|i[m]&l&&(i[m]|=l),d&=~w}}function oa(i,l){var d=l&-l;return d=(d&42)!==0?1:nr(d),(d&(i.suspendedLanes|l))!==0?0:d}function nr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function mr(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ns(){var i=pe.p;return i!==0?i:(i=window.event,i===void 0?32:FN(i.type))}function Gs(i,l){var d=pe.p;try{return pe.p=i,l()}finally{pe.p=d}}var Ts=Math.random().toString(36).slice(2),$n="__reactFiber$"+Ts,ar="__reactProps$"+Ts,rs="__reactContainer$"+Ts,la="__reactEvents$"+Ts,Fa="__reactListeners$"+Ts,yo="__reactHandles$"+Ts,ri="__reactResources$"+Ts,ca="__reactMarker$"+Ts;function Ki(i){delete i[$n],delete i[ar],delete i[la],delete i[Fa],delete i[yo]}function ja(i){var l=i[$n];if(l)return l;for(var d=i.parentNode;d;){if(l=d[rs]||d[$n]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(i=NN(i);i!==null;){if(d=i[$n])return d;i=NN(i)}return l}i=d,d=i.parentNode}return null}function Hs(i){if(i=i[$n]||i[rs]){var l=i.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return i}return null}function _a(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i.stateNode;throw Error(r(33))}function Ua(i){var l=i[ri];return l||(l=i[ri]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Ir(i){i[ca]=!0}var jl=new Set,ua={};function Va(i,l){si(i,l),si(i+"Capture",l)}function si(i,l){for(ua[i]=l,i=0;i<l.length;i++)jl.add(l[i])}var Ho=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_l={},Sl={};function uc(i){return He.call(Sl,i)?!0:He.call(_l,i)?!1:Ho.test(i)?Sl[i]=!0:(_l[i]=!0,!1)}function Sa(i,l,d){if(uc(l))if(d===null)i.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":i.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){i.removeAttribute(l);return}}i.setAttribute(l,""+d)}}function Cs(i,l,d){if(d===null)i.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttribute(l,""+d)}}function Or(i,l,d,m){if(m===null)i.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(d);return}i.setAttributeNS(l,d,""+m)}}function wn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Yi(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ba(i,l,d){var m=Object.getOwnPropertyDescriptor(i.constructor.prototype,l);if(!i.hasOwnProperty(l)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var w=m.get,_=m.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return w.call(this)},set:function(U){d=""+U,_.call(this,U)}}),Object.defineProperty(i,l,{enumerable:m.enumerable}),{getValue:function(){return d},setValue:function(U){d=""+U},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function kn(i){if(!i._valueTracker){var l=Yi(i)?"checked":"value";i._valueTracker=Ba(i,l,""+i[l])}}function bo(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var d=l.getValue(),m="";return i&&(m=Yi(i)?i.checked?"true":"false":i.value),i=m,i!==d?(l.setValue(i),!0):!1}function $r(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var jr=/[\n"\\]/g;function Fr(i){return i.replace(jr,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function $o(i,l,d,m,w,_,U,X){i.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?i.type=U:i.removeAttribute("type"),l!=null?U==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+wn(l)):i.value!==""+wn(l)&&(i.value=""+wn(l)):U!=="submit"&&U!=="reset"||i.removeAttribute("value"),l!=null?dc(i,U,wn(l)):d!=null?dc(i,U,wn(d)):m!=null&&i.removeAttribute("value"),w==null&&_!=null&&(i.defaultChecked=!!_),w!=null&&(i.checked=w&&typeof w!="function"&&typeof w!="symbol"),X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?i.name=""+wn(X):i.removeAttribute("name")}function ou(i,l,d,m,w,_,U,X){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),l!=null||d!=null){if(!(_!=="submit"&&_!=="reset"||l!=null)){kn(i);return}d=d!=null?""+wn(d):"",l=l!=null?""+wn(l):d,X||l===i.value||(i.value=l),i.defaultValue=l}m=m??w,m=typeof m!="function"&&typeof m!="symbol"&&!!m,i.checked=X?i.checked:!!m,i.defaultChecked=!!m,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(i.name=U),kn(i)}function dc(i,l,d){l==="number"&&$r(i.ownerDocument)===i||i.defaultValue===""+d||(i.defaultValue=""+d)}function $s(i,l,d,m){if(i=i.options,l){l={};for(var w=0;w<d.length;w++)l["$"+d[w]]=!0;for(d=0;d<i.length;d++)w=l.hasOwnProperty("$"+i[d].value),i[d].selected!==w&&(i[d].selected=w),w&&m&&(i[d].defaultSelected=!0)}else{for(d=""+wn(d),l=null,w=0;w<i.length;w++){if(i[w].value===d){i[w].selected=!0,m&&(i[w].defaultSelected=!0);return}l!==null||i[w].disabled||(l=i[w])}l!==null&&(l.selected=!0)}}function hc(i,l,d){if(l!=null&&(l=""+wn(l),l!==i.value&&(i.value=l),d==null)){i.defaultValue!==l&&(i.defaultValue=l);return}i.defaultValue=d!=null?""+wn(d):""}function Xi(i,l,d,m){if(l==null){if(m!=null){if(d!=null)throw Error(r(92));if(Ne(m)){if(1<m.length)throw Error(r(93));m=m[0]}d=m}d==null&&(d=""),l=d}d=wn(l),i.defaultValue=d,m=i.textContent,m===d&&m!==""&&m!==null&&(i.value=m),kn(i)}function ps(i,l){if(l){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=l;return}}i.textContent=l}var vo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fc(i,l,d){var m=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?m?i.setProperty(l,""):l==="float"?i.cssFloat="":i[l]="":m?i.setProperty(l,d):typeof d!="number"||d===0||vo.has(l)?l==="float"?i.cssFloat=d:i[l]=(""+d).trim():i[l]=d+"px"}function mc(i,l,d){if(l!=null&&typeof l!="object")throw Error(r(62));if(i=i.style,d!=null){for(var m in d)!d.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?i.setProperty(m,""):m==="float"?i.cssFloat="":i[m]="");for(var w in l)m=l[w],l.hasOwnProperty(w)&&d[w]!==m&&fc(i,w,m)}else for(var _ in l)l.hasOwnProperty(_)&&fc(i,_,l[_])}function El(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Al=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function da(i){return Qi.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ai(){}var Ji=null;function ha(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var wo=null,Ot=null;function Wo(i){var l=Hs(i);if(l&&(i=l.stateNode)){var d=i[ar]||null;e:switch(i=l.stateNode,l.type){case"input":if($o(i,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Fr(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var m=d[l];if(m!==i&&m.form===i.form){var w=m[ar]||null;if(!w)throw Error(r(90));$o(m,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(l=0;l<d.length;l++)m=d[l],m.form===i.form&&bo(m)}break e;case"textarea":hc(i,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&$s(i,!!d.multiple,l,!1)}}}var Tl=!1;function No(i,l,d){if(Tl)return i(l,d);Tl=!0;try{var m=i(l);return m}finally{if(Tl=!1,(wo!==null||Ot!==null)&&(Hp(),wo&&(l=wo,i=Ot,Ot=wo=null,Wo(l),i)))for(l=0;l<i.length;l++)Wo(i[l])}}function xs(i,l){var d=i.stateNode;if(d===null)return null;var m=d[ar]||null;if(m===null)return null;d=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(r(231,l,typeof d));return d}var ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ko=!1;if(ss)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){Ko=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{Ko=!1}var Ea=null,Yo=null,ii=null;function gc(){if(ii)return ii;var i,l=Yo,d=l.length,m,w="value"in Ea?Ea.value:Ea.textContent,_=w.length;for(i=0;i<d&&l[i]===w[i];i++);var U=d-i;for(m=1;m<=U&&l[d-m]===w[_-m];m++);return ii=w.slice(i,1<m?1-m:void 0)}function Aa(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function Zi(){return!0}function Ta(){return!1}function Wr(i){function l(d,m,w,_,U){this._reactName=d,this._targetInst=w,this.type=m,this.nativeEvent=_,this.target=U,this.currentTarget=null;for(var X in i)i.hasOwnProperty(X)&&(d=i[X],this[X]=d?d(_):_[X]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Zi:Ta,this.isPropagationStopped=Ta,this}return x(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Zi)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Zi)},persist:function(){},isPersistent:Zi}),l}var bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Is=Wr(bi),vi=x({},bi,{view:0,detail:0}),jo=Wr(vi),wi,Ni,za,Xo=x({},vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ut,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==za&&(za&&i.type==="mousemove"?(wi=i.screenX-za.screenX,Ni=i.screenY-za.screenY):Ni=wi=0,za=i),wi)},movementY:function(i){return"movementY"in i?i.movementY:Ni}}),Cl=Wr(Xo),Ca=x({},Xo,{dataTransfer:0}),ji=Wr(Ca),pc=x({},vi,{relatedTarget:0}),oi=Wr(pc),Il=x({},bi,{animationName:0,elapsedTime:0,pseudoElement:0}),A=Wr(Il),H=x({},bi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),le=Wr(H),ge=x({},bi,{data:0}),we=Wr(ge),Ve={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ht={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xt(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=ht[i])?!!l[i]:!1}function Ut(){return xt}var It=x({},vi,{key:function(i){if(i.key){var l=Ve[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=Aa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Xe[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ut,charCode:function(i){return i.type==="keypress"?Aa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Aa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),En=Wr(It),gr=x({},Xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rr=Wr(gr),y=x({},vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ut}),R=Wr(y),z=x({},bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Z=Wr(z),_e=x({},Xo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Pe=Wr(_e),et=x({},bi,{newState:0,oldState:0}),Zt=Wr(et),pr=[9,13,27,32],bn=ss&&"CompositionEvent"in window,Kn=null;ss&&"documentMode"in document&&(Kn=document.documentMode);var ks=ss&&"TextEvent"in window&&!Kn,Ws=ss&&(!bn||Kn&&8<Kn&&11>=Kn),ir=" ",Ks=!1;function li(i,l){switch(i){case"keyup":return pr.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _o(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var So=!1;function Ia(i,l){switch(i){case"compositionend":return _o(l);case"keypress":return l.which!==32?null:(Ks=!0,ir);case"textInput":return i=l.data,i===ir&&Ks?null:i;default:return null}}function Qo(i,l){if(So)return i==="compositionend"||!bn&&li(i,l)?(i=gc(),ii=Yo=Ea=null,So=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Ws&&l.locale!=="ko"?null:l.data;default:return null}}var lu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xd(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!lu[i.type]:l==="textarea"}function ci(i,l,d,m){wo?Ot?Ot.push(m):Ot=[m]:wo=m,l=Jp(l,"onChange"),0<l.length&&(d=new Is("onChange","change",null,d,m),i.push({event:d,listeners:l}))}var eo=null,Jo=null;function yd(i){lN(i,0)}function to(i){var l=_a(i);if(bo(l))return i}function kl(i,l){if(i==="change")return l}var qa=!1;if(ss){var ka;if(ss){var Eo="oninput"in document;if(!Eo){var Ao=document.createElement("div");Ao.setAttribute("oninput","return;"),Eo=typeof Ao.oninput=="function"}ka=Eo}else ka=!1;qa=ka&&(!document.documentMode||9<document.documentMode)}function Zo(){eo&&(eo.detachEvent("onpropertychange",cu),Jo=eo=null)}function cu(i){if(i.propertyName==="value"&&to(Jo)){var l=[];ci(l,Jo,i,ha(i)),No(yd,l)}}function uu(i,l,d){i==="focusin"?(Zo(),eo=l,Jo=d,eo.attachEvent("onpropertychange",cu)):i==="focusout"&&Zo()}function Kr(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return to(Jo)}function Nh(i,l){if(i==="click")return to(l)}function To(i,l){if(i==="input"||i==="change")return to(l)}function Co(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var Ys=typeof Object.is=="function"?Object.is:Co;function el(i,l){if(Ys(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var d=Object.keys(i),m=Object.keys(l);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var w=d[m];if(!He.call(l,w)||!Ys(i[w],l[w]))return!1}return!0}function du(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function hu(i,l){var d=du(i);i=0;for(var m;d;){if(d.nodeType===3){if(m=i+d.textContent.length,i<=l&&m>=l)return{node:d,offset:l-i};i=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=du(d)}}function tl(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?tl(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function nl(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var l=$r(i.document);l instanceof i.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)i=l.contentWindow;else break;l=$r(i.document)}return l}function Io(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}var xc=ss&&"documentMode"in document&&11>=document.documentMode,ui=null,rl=null,fa=null,_i=!1;function qn(i,l,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;_i||ui==null||ui!==$r(m)||(m=ui,"selectionStart"in m&&Io(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),fa&&el(fa,m)||(fa=m,m=Jp(rl,"onSelect"),0<m.length&&(l=new Is("onSelect","select",null,l,d),i.push({event:l,listeners:m}),l.target=ui)))}function Mn(i,l){var d={};return d[i.toLowerCase()]=l.toLowerCase(),d["Webkit"+i]="webkit"+l,d["Moz"+i]="moz"+l,d}var xr={animationend:Mn("Animation","AnimationEnd"),animationiteration:Mn("Animation","AnimationIteration"),animationstart:Mn("Animation","AnimationStart"),transitionrun:Mn("Transition","TransitionRun"),transitionstart:Mn("Transition","TransitionStart"),transitioncancel:Mn("Transition","TransitionCancel"),transitionend:Mn("Transition","TransitionEnd")},Yr={},ko={};ss&&(ko=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);function no(i){if(Yr[i])return Yr[i];if(!xr[i])return i;var l=xr[i],d;for(d in l)if(l.hasOwnProperty(d)&&d in ko)return Yr[i]=l[d];return i}var yc=no("animationend"),bd=no("animationiteration"),mm=no("animationstart"),wp=no("transitionrun"),Np=no("transitionstart"),jp=no("transitioncancel"),gm=no("transitionend"),pm=new Map,bc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bc.push("scrollEnd");function Si(i,l){pm.set(i,l),Va(l,[i])}var vd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},di=[],vc=0,jh=0;function wd(){for(var i=vc,l=jh=vc=0;l<i;){var d=di[l];di[l++]=null;var m=di[l];di[l++]=null;var w=di[l];di[l++]=null;var _=di[l];if(di[l++]=null,m!==null&&w!==null){var U=m.pending;U===null?w.next=w:(w.next=U.next,U.next=w),m.pending=w}_!==0&&jd(d,w,_)}}function Nd(i,l,d,m){di[vc++]=i,di[vc++]=l,di[vc++]=d,di[vc++]=m,jh|=m,i.lanes|=m,i=i.alternate,i!==null&&(i.lanes|=m)}function _h(i,l,d,m){return Nd(i,l,d,m),ma(i)}function sl(i,l){return Nd(i,null,null,l),ma(i)}function jd(i,l,d){i.lanes|=d;var m=i.alternate;m!==null&&(m.lanes|=d);for(var w=!1,_=i.return;_!==null;)_.childLanes|=d,m=_.alternate,m!==null&&(m.childLanes|=d),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(w=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,w&&l!==null&&(w=31-an(d),i=_.hiddenUpdates,m=i[w],m===null?i[w]=[l]:m.push(l),l.lane=d|536870912),_):null}function ma(i){if(50<Fm)throw Fm=0,mb=null,Error(r(185));for(var l=i.return;l!==null;)i=l,l=i.return;return i.tag===3?i.stateNode:null}var Xs={};function Sh(i,l,d,m){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ga(i,l,d,m){return new Sh(i,l,d,m)}function Eh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ei(i,l){var d=i.alternate;return d===null?(d=ga(i.tag,l,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=l,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&65011712,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,l=i.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d.refCleanup=i.refCleanup,d}function _d(i,l){i.flags&=65011714;var d=i.alternate;return d===null?(i.childLanes=0,i.lanes=l,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=d.childLanes,i.lanes=d.lanes,i.child=d.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=d.memoizedProps,i.memoizedState=d.memoizedState,i.updateQueue=d.updateQueue,i.type=d.type,l=d.dependencies,i.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),i}function fu(i,l,d,m,w,_){var U=0;if(m=i,typeof i=="function")Eh(i)&&(U=1);else if(typeof i=="string")U=HI(i,d,ne.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case k:return i=ga(31,d,l,w),i.elementType=k,i.lanes=_,i;case E:return Rl(d.children,w,_,l);case j:U=8,w|=24;break;case S:return i=ga(12,d,l,w|2),i.elementType=S,i.lanes=_,i;case re:return i=ga(13,d,l,w),i.elementType=re,i.lanes=_,i;case ae:return i=ga(19,d,l,w),i.elementType=ae,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case O:U=10;break e;case D:U=9;break e;case B:U=11;break e;case G:U=14;break e;case M:U=16,m=null;break e}U=29,d=Error(r(130,i===null?"null":typeof i,"")),m=null}return l=ga(U,d,l,w),l.elementType=i,l.type=m,l.lanes=_,l}function Rl(i,l,d,m){return i=ga(7,i,m,l),i.lanes=d,i}function Sd(i,l,d){return i=ga(6,i,null,l),i.lanes=d,i}function Ah(i){var l=ga(18,null,null,0);return l.stateNode=i,l}function mu(i,l,d){return l=ga(4,i.children!==null?i.children:[],i.key,l),l.lanes=d,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}var Th=new WeakMap;function Ai(i,l){if(typeof i=="object"&&i!==null){var d=Th.get(i);return d!==void 0?d:(l={value:i,source:l,stack:Pt(l)},Th.set(i,l),l)}return{value:i,source:l,stack:Pt(l)}}var gu=[],wc=0,Ch=null,Ed=0,Ti=[],Ci=0,Pl=null,Ii=1,ki="";function hi(i,l){gu[wc++]=Ed,gu[wc++]=Ch,Ch=i,Ed=l}function _p(i,l,d){Ti[Ci++]=Ii,Ti[Ci++]=ki,Ti[Ci++]=Pl,Pl=i;var m=Ii;i=ki;var w=32-an(m)-1;m&=~(1<<w),d+=1;var _=32-an(l)+w;if(30<_){var U=w-w%5;_=(m&(1<<U)-1).toString(32),m>>=U,w-=U,Ii=1<<32-an(l)+w|d<<w|m,ki=_+i}else Ii=1<<_|d<<w|m,ki=i}function xm(i){i.return!==null&&(hi(i,1),_p(i,1,0))}function Ih(i){for(;i===Ch;)Ch=gu[--wc],gu[wc]=null,Ed=gu[--wc],gu[wc]=null;for(;i===Pl;)Pl=Ti[--Ci],Ti[Ci]=null,ki=Ti[--Ci],Ti[Ci]=null,Ii=Ti[--Ci],Ti[Ci]=null}function Sp(i,l){Ti[Ci++]=Ii,Ti[Ci++]=ki,Ti[Ci++]=Pl,Ii=l.id,ki=l.overflow,Pl=i}var Qs=null,_r=null,Tn=!1,Ra=null,Ur=!1,ro=Error(r(519));function Ll(i){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pu(Ai(l,i)),ro}function ym(i){var l=i.stateNode,d=i.type,m=i.memoizedProps;switch(l[$n]=i,l[ar]=m,d){case"dialog":In("cancel",l),In("close",l);break;case"iframe":case"object":case"embed":In("load",l);break;case"video":case"audio":for(d=0;d<Vm.length;d++)In(Vm[d],l);break;case"source":In("error",l);break;case"img":case"image":case"link":In("error",l),In("load",l);break;case"details":In("toggle",l);break;case"input":In("invalid",l),ou(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":In("invalid",l);break;case"textarea":In("invalid",l),Xi(l,m.value,m.defaultValue,m.children)}d=m.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||m.suppressHydrationWarning===!0||hN(l.textContent,d)?(m.popover!=null&&(In("beforetoggle",l),In("toggle",l)),m.onScroll!=null&&In("scroll",l),m.onScrollEnd!=null&&In("scrollend",l),m.onClick!=null&&(l.onclick=ai),l=!0):l=!1,l||Ll(i,!0)}function al(i){for(Qs=i.return;Qs;)switch(Qs.tag){case 5:case 31:case 13:Ur=!1;return;case 27:case 3:Ur=!0;return;default:Qs=Qs.return}}function Js(i){if(i!==Qs)return!1;if(!Tn)return al(i),Tn=!0,!1;var l=i.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=i.type,d=!(d!=="form"&&d!=="button")||Cb(i.type,i.memoizedProps)),d=!d),d&&_r&&Ll(i),al(i),l===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));_r=wN(i)}else if(l===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));_r=wN(i)}else l===27?(l=_r,Iu(i.type)?(i=Lb,Lb=null,_r=i):_r=l):_r=Qs?Do(i.stateNode.nextSibling):null;return!0}function Nc(){_r=Qs=null,Tn=!1}function bm(){var i=Ra;return i!==null&&(Oi===null?Oi=i:Oi.push.apply(Oi,i),Ra=null),i}function pu(i){Ra===null?Ra=[i]:Ra.push(i)}var kh=te(null),Dl=null,Ro=null;function Ml(i,l,d){Q(kh,l._currentValue),l._currentValue=d}function Ri(i){i._currentValue=kh.current,q(kh)}function xu(i,l,d){for(;i!==null;){var m=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),i===d)break;i=i.return}}function jc(i,l,d,m){var w=i.child;for(w!==null&&(w.return=i);w!==null;){var _=w.dependencies;if(_!==null){var U=w.child;_=_.firstContext;e:for(;_!==null;){var X=_;_=w;for(var fe=0;fe<l.length;fe++)if(X.context===l[fe]){_.lanes|=d,X=_.alternate,X!==null&&(X.lanes|=d),xu(_.return,d,i),m||(U=null);break e}_=X.next}}else if(w.tag===18){if(U=w.return,U===null)throw Error(r(341));U.lanes|=d,_=U.alternate,_!==null&&(_.lanes|=d),xu(U,d,i),U=null}else U=w.child;if(U!==null)U.return=w;else for(U=w;U!==null;){if(U===i){U=null;break}if(w=U.sibling,w!==null){w.return=U.return,U=w;break}U=U.return}w=U}}function Ol(i,l,d,m){i=null;for(var w=l,_=!1;w!==null;){if(!_){if((w.flags&524288)!==0)_=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var U=w.alternate;if(U===null)throw Error(r(387));if(U=U.memoizedProps,U!==null){var X=w.type;Ys(w.pendingProps.value,U.value)||(i!==null?i.push(X):i=[X])}}else if(w===be.current){if(U=w.alternate,U===null)throw Error(r(387));U.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(i!==null?i.push(Hm):i=[Hm])}w=w.return}i!==null&&jc(l,i,d,m),l.flags|=262144}function Rh(i){for(i=i.firstContext;i!==null;){if(!Ys(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Fl(i){Dl=i,Ro=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Zs(i){return Ep(Dl,i)}function Ph(i,l){return Dl===null&&Fl(i),Ep(i,l)}function Ep(i,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},Ro===null){if(i===null)throw Error(r(308));Ro=l,i.dependencies={lanes:0,firstContext:l},i.flags|=524288}else Ro=Ro.next=l;return d}var Py=typeof AbortController<"u"?AbortController:function(){var i=[],l=this.signal={aborted:!1,addEventListener:function(d,m){i.push(m)}};this.abort=function(){l.aborted=!0,i.forEach(function(d){return d()})}},Ly=n.unstable_scheduleCallback,Dy=n.unstable_NormalPriority,Xr={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yu(){return{controller:new Py,data:new Map,refCount:0}}function Ad(i){i.refCount--,i.refCount===0&&Ly(Dy,function(){i.controller.abort()})}var Td=null,Lh=0,p=0,N=null;function I(i,l){if(Td===null){var d=Td=[];Lh=0,p=vb(),N={status:"pending",value:void 0,then:function(m){d.push(m)}}}return Lh++,l.then(F,F),l}function F(){if(--Lh===0&&Td!==null){N!==null&&(N.status="fulfilled");var i=Td;Td=null,p=0,N=null;for(var l=0;l<i.length;l++)(0,i[l])()}}function $(i,l){var d=[],m={status:"pending",value:null,reason:null,then:function(w){d.push(w)}};return i.then(function(){m.status="fulfilled",m.value=l;for(var w=0;w<d.length;w++)(0,d[w])(l)},function(w){for(m.status="rejected",m.reason=w,w=0;w<d.length;w++)(0,d[w])(void 0)}),m}var K=ue.S;ue.S=function(i,l){M5=sn(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&I(i,l),K!==null&&K(i,l)};var Y=te(null);function J(){var i=Y.current;return i!==null?i:Er.pooledCache}function ee(i,l){l===null?Q(Y,Y.current):Q(Y,l.pool)}function ce(){var i=J();return i===null?null:{parent:Xr._currentValue,pool:i}}var xe=Error(r(460)),Ce=Error(r(474)),ie=Error(r(542)),ve={then:function(){}};function Ee(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Fe(i,l,d){switch(d=i[d],d===void 0?i.push(l):d!==l&&(l.then(ai,ai),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,Qe(i),i;default:if(typeof l.status=="string")l.then(ai,ai);else{if(i=Er,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=l,i.status="pending",i.then(function(m){if(l.status==="pending"){var w=l;w.status="fulfilled",w.value=m}},function(m){if(l.status==="pending"){var w=l;w.status="rejected",w.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,Qe(i),i}throw Oe=l,xe}}function Ae(i){try{var l=i._init;return l(i._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(Oe=d,xe):d}}var Oe=null;function Ge(){if(Oe===null)throw Error(r(459));var i=Oe;return Oe=null,i}function Qe(i){if(i===xe||i===ie)throw Error(r(483))}var Ye=null,yt=0;function ut(i){var l=yt;return yt+=1,Ye===null&&(Ye=[]),Fe(Ye,i,l)}function tn(i,l){l=l.props.ref,i.ref=l!==void 0?l:null}function mt(i,l){throw l.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(l),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i)))}function An(i){function l(je,ye){if(i){var Ie=je.deletions;Ie===null?(je.deletions=[ye],je.flags|=16):Ie.push(ye)}}function d(je,ye){if(!i)return null;for(;ye!==null;)l(je,ye),ye=ye.sibling;return null}function m(je){for(var ye=new Map;je!==null;)je.key!==null?ye.set(je.key,je):ye.set(je.index,je),je=je.sibling;return ye}function w(je,ye){return je=Ei(je,ye),je.index=0,je.sibling=null,je}function _(je,ye,Ie){return je.index=Ie,i?(Ie=je.alternate,Ie!==null?(Ie=Ie.index,Ie<ye?(je.flags|=67108866,ye):Ie):(je.flags|=67108866,ye)):(je.flags|=1048576,ye)}function U(je){return i&&je.alternate===null&&(je.flags|=67108866),je}function X(je,ye,Ie,$e){return ye===null||ye.tag!==6?(ye=Sd(Ie,je.mode,$e),ye.return=je,ye):(ye=w(ye,Ie),ye.return=je,ye)}function fe(je,ye,Ie,$e){var Bt=Ie.type;return Bt===E?Be(je,ye,Ie.props.children,$e,Ie.key):ye!==null&&(ye.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===M&&Ae(Bt)===ye.type)?(ye=w(ye,Ie.props),tn(ye,Ie),ye.return=je,ye):(ye=fu(Ie.type,Ie.key,Ie.props,null,je.mode,$e),tn(ye,Ie),ye.return=je,ye)}function ke(je,ye,Ie,$e){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Ie.containerInfo||ye.stateNode.implementation!==Ie.implementation?(ye=mu(Ie,je.mode,$e),ye.return=je,ye):(ye=w(ye,Ie.children||[]),ye.return=je,ye)}function Be(je,ye,Ie,$e,Bt){return ye===null||ye.tag!==7?(ye=Rl(Ie,je.mode,$e,Bt),ye.return=je,ye):(ye=w(ye,Ie),ye.return=je,ye)}function We(je,ye,Ie){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ye=Sd(""+ye,je.mode,Ie),ye.return=je,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case b:return Ie=fu(ye.type,ye.key,ye.props,null,je.mode,Ie),tn(Ie,ye),Ie.return=je,Ie;case T:return ye=mu(ye,je.mode,Ie),ye.return=je,ye;case M:return ye=Ae(ye),We(je,ye,Ie)}if(Ne(ye)||P(ye))return ye=Rl(ye,je.mode,Ie,null),ye.return=je,ye;if(typeof ye.then=="function")return We(je,ut(ye),Ie);if(ye.$$typeof===O)return We(je,Ph(je,ye),Ie);mt(je,ye)}return null}function De(je,ye,Ie,$e){var Bt=ye!==null?ye.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Bt!==null?null:X(je,ye,""+Ie,$e);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case b:return Ie.key===Bt?fe(je,ye,Ie,$e):null;case T:return Ie.key===Bt?ke(je,ye,Ie,$e):null;case M:return Ie=Ae(Ie),De(je,ye,Ie,$e)}if(Ne(Ie)||P(Ie))return Bt!==null?null:Be(je,ye,Ie,$e,null);if(typeof Ie.then=="function")return De(je,ye,ut(Ie),$e);if(Ie.$$typeof===O)return De(je,ye,Ph(je,Ie),$e);mt(je,Ie)}return null}function Me(je,ye,Ie,$e,Bt){if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return je=je.get(Ie)||null,X(ye,je,""+$e,Bt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case b:return je=je.get($e.key===null?Ie:$e.key)||null,fe(ye,je,$e,Bt);case T:return je=je.get($e.key===null?Ie:$e.key)||null,ke(ye,je,$e,Bt);case M:return $e=Ae($e),Me(je,ye,Ie,$e,Bt)}if(Ne($e)||P($e))return je=je.get(Ie)||null,Be(ye,je,$e,Bt,null);if(typeof $e.then=="function")return Me(je,ye,Ie,ut($e),Bt);if($e.$$typeof===O)return Me(je,ye,Ie,Ph(ye,$e),Bt);mt(ye,$e)}return null}function pt(je,ye,Ie,$e){for(var Bt=null,Yn=null,_t=ye,yn=ye=0,Pn=null;_t!==null&&yn<Ie.length;yn++){_t.index>yn?(Pn=_t,_t=null):Pn=_t.sibling;var Xn=De(je,_t,Ie[yn],$e);if(Xn===null){_t===null&&(_t=Pn);break}i&&_t&&Xn.alternate===null&&l(je,_t),ye=_(Xn,ye,yn),Yn===null?Bt=Xn:Yn.sibling=Xn,Yn=Xn,_t=Pn}if(yn===Ie.length)return d(je,_t),Tn&&hi(je,yn),Bt;if(_t===null){for(;yn<Ie.length;yn++)_t=We(je,Ie[yn],$e),_t!==null&&(ye=_(_t,ye,yn),Yn===null?Bt=_t:Yn.sibling=_t,Yn=_t);return Tn&&hi(je,yn),Bt}for(_t=m(_t);yn<Ie.length;yn++)Pn=Me(_t,je,yn,Ie[yn],$e),Pn!==null&&(i&&Pn.alternate!==null&&_t.delete(Pn.key===null?yn:Pn.key),ye=_(Pn,ye,yn),Yn===null?Bt=Pn:Yn.sibling=Pn,Yn=Pn);return i&&_t.forEach(function(Du){return l(je,Du)}),Tn&&hi(je,yn),Bt}function Yt(je,ye,Ie,$e){if(Ie==null)throw Error(r(151));for(var Bt=null,Yn=null,_t=ye,yn=ye=0,Pn=null,Xn=Ie.next();_t!==null&&!Xn.done;yn++,Xn=Ie.next()){_t.index>yn?(Pn=_t,_t=null):Pn=_t.sibling;var Du=De(je,_t,Xn.value,$e);if(Du===null){_t===null&&(_t=Pn);break}i&&_t&&Du.alternate===null&&l(je,_t),ye=_(Du,ye,yn),Yn===null?Bt=Du:Yn.sibling=Du,Yn=Du,_t=Pn}if(Xn.done)return d(je,_t),Tn&&hi(je,yn),Bt;if(_t===null){for(;!Xn.done;yn++,Xn=Ie.next())Xn=We(je,Xn.value,$e),Xn!==null&&(ye=_(Xn,ye,yn),Yn===null?Bt=Xn:Yn.sibling=Xn,Yn=Xn);return Tn&&hi(je,yn),Bt}for(_t=m(_t);!Xn.done;yn++,Xn=Ie.next())Xn=Me(_t,je,yn,Xn.value,$e),Xn!==null&&(i&&Xn.alternate!==null&&_t.delete(Xn.key===null?yn:Xn.key),ye=_(Xn,ye,yn),Yn===null?Bt=Xn:Yn.sibling=Xn,Yn=Xn);return i&&_t.forEach(function(n8){return l(je,n8)}),Tn&&hi(je,yn),Bt}function wr(je,ye,Ie,$e){if(typeof Ie=="object"&&Ie!==null&&Ie.type===E&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case b:e:{for(var Bt=Ie.key;ye!==null;){if(ye.key===Bt){if(Bt=Ie.type,Bt===E){if(ye.tag===7){d(je,ye.sibling),$e=w(ye,Ie.props.children),$e.return=je,je=$e;break e}}else if(ye.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===M&&Ae(Bt)===ye.type){d(je,ye.sibling),$e=w(ye,Ie.props),tn($e,Ie),$e.return=je,je=$e;break e}d(je,ye);break}else l(je,ye);ye=ye.sibling}Ie.type===E?($e=Rl(Ie.props.children,je.mode,$e,Ie.key),$e.return=je,je=$e):($e=fu(Ie.type,Ie.key,Ie.props,null,je.mode,$e),tn($e,Ie),$e.return=je,je=$e)}return U(je);case T:e:{for(Bt=Ie.key;ye!==null;){if(ye.key===Bt)if(ye.tag===4&&ye.stateNode.containerInfo===Ie.containerInfo&&ye.stateNode.implementation===Ie.implementation){d(je,ye.sibling),$e=w(ye,Ie.children||[]),$e.return=je,je=$e;break e}else{d(je,ye);break}else l(je,ye);ye=ye.sibling}$e=mu(Ie,je.mode,$e),$e.return=je,je=$e}return U(je);case M:return Ie=Ae(Ie),wr(je,ye,Ie,$e)}if(Ne(Ie))return pt(je,ye,Ie,$e);if(P(Ie)){if(Bt=P(Ie),typeof Bt!="function")throw Error(r(150));return Ie=Bt.call(Ie),Yt(je,ye,Ie,$e)}if(typeof Ie.then=="function")return wr(je,ye,ut(Ie),$e);if(Ie.$$typeof===O)return wr(je,ye,Ph(je,Ie),$e);mt(je,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint"?(Ie=""+Ie,ye!==null&&ye.tag===6?(d(je,ye.sibling),$e=w(ye,Ie),$e.return=je,je=$e):(d(je,ye),$e=Sd(Ie,je.mode,$e),$e.return=je,je=$e),U(je)):d(je,ye)}return function(je,ye,Ie,$e){try{yt=0;var Bt=wr(je,ye,Ie,$e);return Ye=null,Bt}catch(_t){if(_t===xe||_t===ie)throw _t;var Yn=ga(29,_t,null,je.mode);return Yn.lanes=$e,Yn.return=je,Yn}finally{}}}var Sr=An(!0),hn=An(!1),dt=!1;function rt(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kr(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Kt(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function gn(i,l,d){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(er&2)!==0){var w=m.pending;return w===null?l.next=l:(l.next=w.next,w.next=l),m.pending=l,l=ma(i),jd(i,null,d),l}return Nd(i,m,l,d),ma(i)}function Jn(i,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var m=l.lanes;m&=i.pendingLanes,d|=m,l.lanes=d,ia(i,d)}}function ys(i,l){var d=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var w=null,_=null;if(d=d.firstBaseUpdate,d!==null){do{var U={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};_===null?w=_=U:_=_.next=U,d=d.next}while(d!==null);_===null?w=_=l:_=_.next=l}else w=_=l;d={baseState:m.baseState,firstBaseUpdate:w,lastBaseUpdate:_,shared:m.shared,callbacks:m.callbacks},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=l:i.next=l,d.lastBaseUpdate=l}var ea=!1;function yr(){if(ea){var i=N;if(i!==null)throw i}}function as(i,l,d,m){ea=!1;var w=i.updateQueue;dt=!1;var _=w.firstBaseUpdate,U=w.lastBaseUpdate,X=w.shared.pending;if(X!==null){w.shared.pending=null;var fe=X,ke=fe.next;fe.next=null,U===null?_=ke:U.next=ke,U=fe;var Be=i.alternate;Be!==null&&(Be=Be.updateQueue,X=Be.lastBaseUpdate,X!==U&&(X===null?Be.firstBaseUpdate=ke:X.next=ke,Be.lastBaseUpdate=fe))}if(_!==null){var We=w.baseState;U=0,Be=ke=fe=null,X=_;do{var De=X.lane&-536870913,Me=De!==X.lane;if(Me?(Rn&De)===De:(m&De)===De){De!==0&&De===p&&(ea=!0),Be!==null&&(Be=Be.next={lane:0,tag:X.tag,payload:X.payload,callback:null,next:null});e:{var pt=i,Yt=X;De=l;var wr=d;switch(Yt.tag){case 1:if(pt=Yt.payload,typeof pt=="function"){We=pt.call(wr,We,De);break e}We=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=Yt.payload,De=typeof pt=="function"?pt.call(wr,We,De):pt,De==null)break e;We=x({},We,De);break e;case 2:dt=!0}}De=X.callback,De!==null&&(i.flags|=64,Me&&(i.flags|=8192),Me=w.callbacks,Me===null?w.callbacks=[De]:Me.push(De))}else Me={lane:De,tag:X.tag,payload:X.payload,callback:X.callback,next:null},Be===null?(ke=Be=Me,fe=We):Be=Be.next=Me,U|=De;if(X=X.next,X===null){if(X=w.shared.pending,X===null)break;Me=X,X=Me.next,Me.next=null,w.lastBaseUpdate=Me,w.shared.pending=null}}while(!0);Be===null&&(fe=We),w.baseState=fe,w.firstBaseUpdate=ke,w.lastBaseUpdate=Be,_===null&&(w.shared.lanes=0),Su|=U,i.lanes=U,i.memoizedState=We}}function pa(i,l){if(typeof i!="function")throw Error(r(191,i));i.call(l)}function is(i,l){var d=i.callbacks;if(d!==null)for(i.callbacks=null,i=0;i<d.length;i++)pa(d[i],l)}var vn=te(null),Fn=te(0);function Rr(i,l){i=Pc,Q(Fn,i),Q(vn,l),Pc=i|l.baseLanes}function Gn(){Q(Fn,Pc),Q(vn,vn.current)}function bs(){Pc=Fn.current,q(vn),q(Fn)}var Pr=te(null),Un=null;function Qr(i){var l=i.alternate;Q(On,On.current&1),Q(Pr,i),Un===null&&(l===null||vn.current!==null||l.memoizedState!==null)&&(Un=i)}function Zn(i){Q(On,On.current),Q(Pr,i),Un===null&&(Un=i)}function os(i){i.tag===22?(Q(On,On.current),Q(Pr,i),Un===null&&(Un=i)):ls()}function ls(){Q(On,On.current),Q(Pr,Pr.current)}function or(i){q(Pr),Un===i&&(Un=null),q(On)}var On=te(0);function xa(i){for(var l=i;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||Rb(d)||Pb(d)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Vr=0,Ft=null,Vt=null,Vn=null,Ga=!1,Pi=!1,Pa=!1,cs=0,Ul=0,Vl=null,Dh=0;function br(){throw Error(r(321))}function vm(i,l){if(l===null)return!1;for(var d=0;d<l.length&&d<i.length;d++)if(!Ys(i[d],l[d]))return!1;return!0}function wm(i,l,d,m,w,_){return Vr=_,Ft=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,ue.H=i===null||i.memoizedState===null?Ww:qy,Pa=!1,_=d(m,w),Pa=!1,Pi&&(_=il(l,d,m,w)),Mh(i),_}function Mh(i){ue.H=Cm;var l=Vt!==null&&Vt.next!==null;if(Vr=0,Vn=Vt=Ft=null,Ga=!1,Ul=0,Vl=null,l)throw Error(r(300));i===null||Ps||(i=i.dependencies,i!==null&&Rh(i)&&(Ps=!0))}function il(i,l,d,m){Ft=i;var w=0;do{if(Pi&&(Vl=null),Ul=0,Pi=!1,25<=w)throw Error(r(301));if(w+=1,Vn=Vt=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}ue.H=Kw,_=l(d,m)}while(Pi);return _}function My(){var i=ue.H,l=i.useState()[0];return l=typeof l.then=="function"?Bl(l):l,i=i.useState()[0],(Vt!==null?Vt.memoizedState:null)!==i&&(Ft.flags|=1024),l}function Nm(){var i=cs!==0;return cs=0,i}function jm(i,l,d){l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~d}function Oh(i){if(Ga){for(i=i.memoizedState;i!==null;){var l=i.queue;l!==null&&(l.pending=null),i=i.next}Ga=!1}Vr=0,Vn=Vt=Ft=null,Pi=!1,Ul=cs=0,Vl=null}function Rs(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?Ft.memoizedState=Vn=i:Vn=Vn.next=i,Vn}function Br(){if(Vt===null){var i=Ft.alternate;i=i!==null?i.memoizedState:null}else i=Vt.next;var l=Vn===null?Ft.memoizedState:Vn.next;if(l!==null)Vn=l,Vt=i;else{if(i===null)throw Ft.alternate===null?Error(r(467)):Error(r(310));Vt=i,i={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Vn===null?Ft.memoizedState=Vn=i:Vn=Vn.next=i}return Vn}function Cd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bl(i){var l=Ul;return Ul+=1,Vl===null&&(Vl=[]),i=Fe(Vl,i,l),l=Ft,(Vn===null?l.memoizedState:Vn.next)===null&&(l=l.alternate,ue.H=l===null||l.memoizedState===null?Ww:qy),i}function bu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Bl(i);if(i.$$typeof===O)return Zs(i)}throw Error(r(438,String(i)))}function _c(i){var l=null,d=Ft.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var m=Ft.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(w){return w.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=Cd(),Ft.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(i),m=0;m<i;m++)d[m]=L;return l.index++,d}function Po(i,l){return typeof l=="function"?l(i):l}function Fh(i){var l=Br();return vu(l,Vt,i)}function vu(i,l,d){var m=i.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=d;var w=i.baseQueue,_=m.pending;if(_!==null){if(w!==null){var U=w.next;w.next=_.next,_.next=U}l.baseQueue=w=_,m.pending=null}if(_=i.baseState,w===null)i.memoizedState=_;else{l=w.next;var X=U=null,fe=null,ke=l,Be=!1;do{var We=ke.lane&-536870913;if(We!==ke.lane?(Rn&We)===We:(Vr&We)===We){var De=ke.revertLane;if(De===0)fe!==null&&(fe=fe.next={lane:0,revertLane:0,gesture:null,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),We===p&&(Be=!0);else if((Vr&De)===De){ke=ke.next,De===p&&(Be=!0);continue}else We={lane:0,revertLane:ke.revertLane,gesture:null,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},fe===null?(X=fe=We,U=_):fe=fe.next=We,Ft.lanes|=De,Su|=De;We=ke.action,Pa&&d(_,We),_=ke.hasEagerState?ke.eagerState:d(_,We)}else De={lane:We,revertLane:ke.revertLane,gesture:ke.gesture,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},fe===null?(X=fe=De,U=_):fe=fe.next=De,Ft.lanes|=We,Su|=We;ke=ke.next}while(ke!==null&&ke!==l);if(fe===null?U=_:fe.next=X,!Ys(_,i.memoizedState)&&(Ps=!0,Be&&(d=N,d!==null)))throw d;i.memoizedState=_,i.baseState=U,i.baseQueue=fe,m.lastRenderedState=_}return w===null&&(m.lanes=0),[i.memoizedState,m.dispatch]}function Uh(i){var l=Br(),d=l.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=i;var m=d.dispatch,w=d.pending,_=l.memoizedState;if(w!==null){d.pending=null;var U=w=w.next;do _=i(_,U.action),U=U.next;while(U!==w);Ys(_,l.memoizedState)||(Ps=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),d.lastRenderedState=_}return[_,m]}function Vh(i,l,d){var m=Ft,w=Br(),_=Tn;if(_){if(d===void 0)throw Error(r(407));d=d()}else d=l();var U=!Ys((Vt||w).memoizedState,d);if(U&&(w.memoizedState=d,Ps=!0),w=w.queue,Oy(Sm.bind(null,m,w,i),[i]),w.getSnapshot!==l||U||Vn!==null&&Vn.memoizedState.tag&1){if(m.flags|=2048,Ec(9,{destroy:void 0},_m.bind(null,m,w,d,l),null),Er===null)throw Error(r(349));_||(Vr&127)!==0||ol(m,l,d)}return d}function ol(i,l,d){i.flags|=16384,i={getSnapshot:l,value:d},l=Ft.updateQueue,l===null?(l=Cd(),Ft.updateQueue=l,l.stores=[i]):(d=l.stores,d===null?l.stores=[i]:d.push(i))}function _m(i,l,d,m){l.value=d,l.getSnapshot=m,Ap(l)&&Em(i)}function Sm(i,l,d){return d(function(){Ap(l)&&Em(i)})}function Ap(i){var l=i.getSnapshot;i=i.value;try{var d=l();return!Ys(i,d)}catch{return!0}}function Em(i){var l=sl(i,2);l!==null&&Fi(l,i,2)}function zl(i){var l=Rs();if(typeof i=="function"){var d=i;if(i=d(),Pa){Wt(!0);try{d()}finally{Wt(!1)}}}return l.memoizedState=l.baseState=i,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:i},l}function Tp(i,l,d,m){return i.baseState=d,vu(i,Vt,typeof m=="function"?m:Po)}function Cp(i,l,d,m,w){if(Pp(i))throw Error(r(485));if(i=l.action,i!==null){var _={payload:w,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){_.listeners.push(U)}};ue.T!==null?d(!0):_.isTransition=!1,m(_),d=l.pending,d===null?(_.next=l.pending=_,Ip(l,_)):(_.next=d.next,l.pending=d.next=_)}}function Ip(i,l){var d=l.action,m=l.payload,w=i.state;if(l.isTransition){var _=ue.T,U={};ue.T=U;try{var X=d(w,m),fe=ue.S;fe!==null&&fe(U,X),Am(i,l,X)}catch(ke){Sc(i,l,ke)}finally{_!==null&&U.types!==null&&(_.types=U.types),ue.T=_}}else try{_=d(w,m),Am(i,l,_)}catch(ke){Sc(i,l,ke)}}function Am(i,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){kp(i,l,m)},function(m){return Sc(i,l,m)}):kp(i,l,d)}function kp(i,l,d){l.status="fulfilled",l.value=d,Bh(l),i.state=d,l=i.pending,l!==null&&(d=l.next,d===l?i.pending=null:(d=d.next,l.next=d,Ip(i,d)))}function Sc(i,l,d){var m=i.pending;if(i.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=d,Bh(l),l=l.next;while(l!==m)}i.action=null}function Bh(i){i=i.listeners;for(var l=0;l<i.length;l++)(0,i[l])()}function Id(i,l){return l}function Lo(i,l){if(Tn){var d=Er.formState;if(d!==null){e:{var m=Ft;if(Tn){if(_r){t:{for(var w=_r,_=Ur;w.nodeType!==8;){if(!_){w=null;break t}if(w=Do(w.nextSibling),w===null){w=null;break t}}_=w.data,w=_==="F!"||_==="F"?w:null}if(w){_r=Do(w.nextSibling),m=w.data==="F!";break e}}Ll(m)}m=!1}m&&(l=d[0])}}return d=Rs(),d.memoizedState=d.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Id,lastRenderedState:l},d.queue=m,d=Gw.bind(null,Ft,m),m.dispatch=d,m=zl(!1),_=zy.bind(null,Ft,!1,m.queue),m=Rs(),w={state:l,dispatch:null,action:i,pending:null},m.queue=w,d=Cp.bind(null,Ft,w,_,d),w.dispatch=d,m.memoizedState=i,[l,d,!1]}function ll(i){var l=Br();return cl(l,Vt,i)}function cl(i,l,d){if(l=vu(i,l,Id)[0],i=Fh(Po)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var m=Bl(l)}catch(U){throw U===xe?ie:U}else m=l;l=Br();var w=l.queue,_=w.dispatch;return d!==l.memoizedState&&(Ft.flags|=2048,Ec(9,{destroy:void 0},zh.bind(null,w,d),null)),[m,_,i]}function zh(i,l){i.action=l}function qh(i){var l=Br(),d=Vt;if(d!==null)return cl(l,d,i);Br(),l=l.memoizedState,d=Br();var m=d.queue.dispatch;return d.memoizedState=i,[l,m,!1]}function Ec(i,l,d,m){return i={tag:i,create:d,deps:m,inst:l,next:null},l=Ft.updateQueue,l===null&&(l=Cd(),Ft.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=i.next=i:(m=d.next,d.next=i,i.next=m,l.lastEffect=i),i}function Rp(){return Br().memoizedState}function wu(i,l,d,m){var w=Rs();Ft.flags|=i,w.memoizedState=Ec(1|l,{destroy:void 0},d,m===void 0?null:m)}function Nu(i,l,d,m){var w=Br();m=m===void 0?null:m;var _=w.memoizedState.inst;Vt!==null&&m!==null&&vm(m,Vt.memoizedState.deps)?w.memoizedState=Ec(l,_,d,m):(Ft.flags|=i,w.memoizedState=Ec(1|l,_,d,m))}function Iw(i,l){wu(8390656,8,i,l)}function Oy(i,l){Nu(2048,8,i,l)}function XC(i){Ft.flags|=4;var l=Ft.updateQueue;if(l===null)l=Cd(),Ft.updateQueue=l,l.events=[i];else{var d=l.events;d===null?l.events=[i]:d.push(i)}}function kw(i){var l=Br().memoizedState;return XC({ref:l,nextImpl:i}),function(){if((er&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function Rw(i,l){return Nu(4,2,i,l)}function Pw(i,l){return Nu(4,4,i,l)}function Lw(i,l){if(typeof l=="function"){i=i();var d=l(i);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function Dw(i,l,d){d=d!=null?d.concat([i]):null,Nu(4,4,Lw.bind(null,l,i),d)}function Fy(){}function Mw(i,l){var d=Br();l=l===void 0?null:l;var m=d.memoizedState;return l!==null&&vm(l,m[1])?m[0]:(d.memoizedState=[i,l],i)}function Ow(i,l){var d=Br();l=l===void 0?null:l;var m=d.memoizedState;if(l!==null&&vm(l,m[1]))return m[0];if(m=i(),Pa){Wt(!0);try{i()}finally{Wt(!1)}}return d.memoizedState=[m,l],m}function Uy(i,l,d){return d===void 0||(Vr&1073741824)!==0&&(Rn&261930)===0?i.memoizedState=l:(i.memoizedState=d,i=F5(),Ft.lanes|=i,Su|=i,d)}function Fw(i,l,d,m){return Ys(d,l)?d:vn.current!==null?(i=Uy(i,d,m),Ys(i,l)||(Ps=!0),i):(Vr&42)===0||(Vr&1073741824)!==0&&(Rn&261930)===0?(Ps=!0,i.memoizedState=d):(i=F5(),Ft.lanes|=i,Su|=i,l)}function Uw(i,l,d,m,w){var _=pe.p;pe.p=_!==0&&8>_?_:8;var U=ue.T,X={};ue.T=X,zy(i,!1,l,d);try{var fe=w(),ke=ue.S;if(ke!==null&&ke(X,fe),fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var Be=$(fe,m);Tm(i,l,Be,io(i))}else Tm(i,l,m,io(i))}catch(We){Tm(i,l,{then:function(){},status:"rejected",reason:We},io())}finally{pe.p=_,U!==null&&X.types!==null&&(U.types=X.types),ue.T=U}}function QC(){}function Vy(i,l,d,m){if(i.tag!==5)throw Error(r(476));var w=Vw(i).queue;Uw(i,w,l,de,d===null?QC:function(){return Bw(i),d(m)})}function Vw(i){var l=i.memoizedState;if(l!==null)return l;l={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:de},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:d},next:null},i.memoizedState=l,i=i.alternate,i!==null&&(i.memoizedState=l),l}function Bw(i){var l=Vw(i);l.next===null&&(l=i.alternate.memoizedState),Tm(i,l.next.queue,{},io())}function By(){return Zs(Hm)}function zw(){return Br().memoizedState}function qw(){return Br().memoizedState}function JC(i){for(var l=i.return;l!==null;){switch(l.tag){case 24:case 3:var d=io();i=Kt(d);var m=gn(l,i,d);m!==null&&(Fi(m,l,d),Jn(m,l,d)),l={cache:yu()},i.payload=l;return}l=l.return}}function ZC(i,l,d){var m=io();d={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Pp(i)?Hw(l,d):(d=_h(i,l,d,m),d!==null&&(Fi(d,i,m),$w(d,l,m)))}function Gw(i,l,d){var m=io();Tm(i,l,d,m)}function Tm(i,l,d,m){var w={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(Pp(i))Hw(l,w);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var U=l.lastRenderedState,X=_(U,d);if(w.hasEagerState=!0,w.eagerState=X,Ys(X,U))return Nd(i,l,w,0),Er===null&&wd(),!1}catch{}finally{}if(d=_h(i,l,w,m),d!==null)return Fi(d,i,m),$w(d,l,m),!0}return!1}function zy(i,l,d,m){if(m={lane:2,revertLane:vb(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Pp(i)){if(l)throw Error(r(479))}else l=_h(i,d,m,2),l!==null&&Fi(l,i,2)}function Pp(i){var l=i.alternate;return i===Ft||l!==null&&l===Ft}function Hw(i,l){Pi=Ga=!0;var d=i.pending;d===null?l.next=l:(l.next=d.next,d.next=l),i.pending=l}function $w(i,l,d){if((d&4194048)!==0){var m=l.lanes;m&=i.pendingLanes,d|=m,l.lanes=d,ia(i,d)}}var Cm={readContext:Zs,use:bu,useCallback:br,useContext:br,useEffect:br,useImperativeHandle:br,useLayoutEffect:br,useInsertionEffect:br,useMemo:br,useReducer:br,useRef:br,useState:br,useDebugValue:br,useDeferredValue:br,useTransition:br,useSyncExternalStore:br,useId:br,useHostTransitionStatus:br,useFormState:br,useActionState:br,useOptimistic:br,useMemoCache:br,useCacheRefresh:br};Cm.useEffectEvent=br;var Ww={readContext:Zs,use:bu,useCallback:function(i,l){return Rs().memoizedState=[i,l===void 0?null:l],i},useContext:Zs,useEffect:Iw,useImperativeHandle:function(i,l,d){d=d!=null?d.concat([i]):null,wu(4194308,4,Lw.bind(null,l,i),d)},useLayoutEffect:function(i,l){return wu(4194308,4,i,l)},useInsertionEffect:function(i,l){wu(4,2,i,l)},useMemo:function(i,l){var d=Rs();l=l===void 0?null:l;var m=i();if(Pa){Wt(!0);try{i()}finally{Wt(!1)}}return d.memoizedState=[m,l],m},useReducer:function(i,l,d){var m=Rs();if(d!==void 0){var w=d(l);if(Pa){Wt(!0);try{d(l)}finally{Wt(!1)}}}else w=l;return m.memoizedState=m.baseState=w,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:w},m.queue=i,i=i.dispatch=ZC.bind(null,Ft,i),[m.memoizedState,i]},useRef:function(i){var l=Rs();return i={current:i},l.memoizedState=i},useState:function(i){i=zl(i);var l=i.queue,d=Gw.bind(null,Ft,l);return l.dispatch=d,[i.memoizedState,d]},useDebugValue:Fy,useDeferredValue:function(i,l){var d=Rs();return Uy(d,i,l)},useTransition:function(){var i=zl(!1);return i=Uw.bind(null,Ft,i.queue,!0,!1),Rs().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,l,d){var m=Ft,w=Rs();if(Tn){if(d===void 0)throw Error(r(407));d=d()}else{if(d=l(),Er===null)throw Error(r(349));(Rn&127)!==0||ol(m,l,d)}w.memoizedState=d;var _={value:d,getSnapshot:l};return w.queue=_,Iw(Sm.bind(null,m,_,i),[i]),m.flags|=2048,Ec(9,{destroy:void 0},_m.bind(null,m,_,d,l),null),d},useId:function(){var i=Rs(),l=Er.identifierPrefix;if(Tn){var d=ki,m=Ii;d=(m&~(1<<32-an(m)-1)).toString(32)+d,l="_"+l+"R_"+d,d=cs++,0<d&&(l+="H"+d.toString(32)),l+="_"}else d=Dh++,l="_"+l+"r_"+d.toString(32)+"_";return i.memoizedState=l},useHostTransitionStatus:By,useFormState:Lo,useActionState:Lo,useOptimistic:function(i){var l=Rs();l.memoizedState=l.baseState=i;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=zy.bind(null,Ft,!0,d),d.dispatch=l,[i,l]},useMemoCache:_c,useCacheRefresh:function(){return Rs().memoizedState=JC.bind(null,Ft)},useEffectEvent:function(i){var l=Rs(),d={impl:i};return l.memoizedState=d,function(){if((er&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}},qy={readContext:Zs,use:bu,useCallback:Mw,useContext:Zs,useEffect:Oy,useImperativeHandle:Dw,useInsertionEffect:Rw,useLayoutEffect:Pw,useMemo:Ow,useReducer:Fh,useRef:Rp,useState:function(){return Fh(Po)},useDebugValue:Fy,useDeferredValue:function(i,l){var d=Br();return Fw(d,Vt.memoizedState,i,l)},useTransition:function(){var i=Fh(Po)[0],l=Br().memoizedState;return[typeof i=="boolean"?i:Bl(i),l]},useSyncExternalStore:Vh,useId:zw,useHostTransitionStatus:By,useFormState:ll,useActionState:ll,useOptimistic:function(i,l){var d=Br();return Tp(d,Vt,i,l)},useMemoCache:_c,useCacheRefresh:qw};qy.useEffectEvent=kw;var Kw={readContext:Zs,use:bu,useCallback:Mw,useContext:Zs,useEffect:Oy,useImperativeHandle:Dw,useInsertionEffect:Rw,useLayoutEffect:Pw,useMemo:Ow,useReducer:Uh,useRef:Rp,useState:function(){return Uh(Po)},useDebugValue:Fy,useDeferredValue:function(i,l){var d=Br();return Vt===null?Uy(d,i,l):Fw(d,Vt.memoizedState,i,l)},useTransition:function(){var i=Uh(Po)[0],l=Br().memoizedState;return[typeof i=="boolean"?i:Bl(i),l]},useSyncExternalStore:Vh,useId:zw,useHostTransitionStatus:By,useFormState:qh,useActionState:qh,useOptimistic:function(i,l){var d=Br();return Vt!==null?Tp(d,Vt,i,l):(d.baseState=i,[i,d.queue.dispatch])},useMemoCache:_c,useCacheRefresh:qw};Kw.useEffectEvent=kw;function Gy(i,l,d,m){l=i.memoizedState,d=d(m,l),d=d==null?l:x({},l,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var Hy={enqueueSetState:function(i,l,d){i=i._reactInternals;var m=io(),w=Kt(m);w.payload=l,d!=null&&(w.callback=d),l=gn(i,w,m),l!==null&&(Fi(l,i,m),Jn(l,i,m))},enqueueReplaceState:function(i,l,d){i=i._reactInternals;var m=io(),w=Kt(m);w.tag=1,w.payload=l,d!=null&&(w.callback=d),l=gn(i,w,m),l!==null&&(Fi(l,i,m),Jn(l,i,m))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var d=io(),m=Kt(d);m.tag=2,l!=null&&(m.callback=l),l=gn(i,m,d),l!==null&&(Fi(l,i,d),Jn(l,i,d))}};function Yw(i,l,d,m,w,_,U){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,_,U):l.prototype&&l.prototype.isPureReactComponent?!el(d,m)||!el(w,_):!0}function Xw(i,l,d,m){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,m),l.state!==i&&Hy.enqueueReplaceState(l,l.state,null)}function kd(i,l){var d=l;if("ref"in l){d={};for(var m in l)m!=="ref"&&(d[m]=l[m])}if(i=i.defaultProps){d===l&&(d=x({},d));for(var w in i)d[w]===void 0&&(d[w]=i[w])}return d}function Qw(i){vd(i)}function Jw(i){console.error(i)}function Zw(i){vd(i)}function Lp(i,l){try{var d=i.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function e5(i,l,d){try{var m=i.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function $y(i,l,d){return d=Kt(d),d.tag=3,d.payload={element:null},d.callback=function(){Lp(i,l)},d}function t5(i){return i=Kt(i),i.tag=3,i}function n5(i,l,d,m){var w=d.type.getDerivedStateFromError;if(typeof w=="function"){var _=m.value;i.payload=function(){return w(_)},i.callback=function(){e5(l,d,m)}}var U=d.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(i.callback=function(){e5(l,d,m),typeof w!="function"&&(Eu===null?Eu=new Set([this]):Eu.add(this));var X=m.stack;this.componentDidCatch(m.value,{componentStack:X!==null?X:""})})}function eI(i,l,d,m,w){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=d.alternate,l!==null&&Ol(l,d,w,!0),d=Pr.current,d!==null){switch(d.tag){case 31:case 13:return Un===null?$p():d.alternate===null&&us===0&&(us=3),d.flags&=-257,d.flags|=65536,d.lanes=w,m===ve?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([m]):l.add(m),xb(i,m,w)),!1;case 22:return d.flags|=65536,m===ve?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([m]):d.add(m)),xb(i,m,w)),!1}throw Error(r(435,d.tag))}return xb(i,m,w),$p(),!1}if(Tn)return l=Pr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=w,m!==ro&&(i=Error(r(422),{cause:m}),pu(Ai(i,d)))):(m!==ro&&(l=Error(r(423),{cause:m}),pu(Ai(l,d))),i=i.current.alternate,i.flags|=65536,w&=-w,i.lanes|=w,m=Ai(m,d),w=$y(i.stateNode,m,w),ys(i,w),us!==4&&(us=2)),!1;var _=Error(r(520),{cause:m});if(_=Ai(_,d),Om===null?Om=[_]:Om.push(_),us!==4&&(us=2),l===null)return!0;m=Ai(m,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,i=w&-w,d.lanes|=i,i=$y(d.stateNode,m,i),ys(d,i),!1;case 1:if(l=d.type,_=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Eu===null||!Eu.has(_))))return d.flags|=65536,w&=-w,d.lanes|=w,w=t5(w),n5(w,i,d,m),ys(d,w),!1}d=d.return}while(d!==null);return!1}var Wy=Error(r(461)),Ps=!1;function La(i,l,d,m){l.child=i===null?hn(l,null,d,m):Sr(l,i.child,d,m)}function r5(i,l,d,m,w){d=d.render;var _=l.ref;if("ref"in m){var U={};for(var X in m)X!=="ref"&&(U[X]=m[X])}else U=m;return Fl(l),m=wm(i,l,d,U,_,w),X=Nm(),i!==null&&!Ps?(jm(i,l,w),Ac(i,l,w)):(Tn&&X&&xm(l),l.flags|=1,La(i,l,m,w),l.child)}function s5(i,l,d,m,w){if(i===null){var _=d.type;return typeof _=="function"&&!Eh(_)&&_.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=_,a5(i,l,_,m,w)):(i=fu(d.type,null,m,l,l.mode,w),i.ref=l.ref,i.return=l,l.child=i)}if(_=i.child,!tb(i,w)){var U=_.memoizedProps;if(d=d.compare,d=d!==null?d:el,d(U,m)&&i.ref===l.ref)return Ac(i,l,w)}return l.flags|=1,i=Ei(_,m),i.ref=l.ref,i.return=l,l.child=i}function a5(i,l,d,m,w){if(i!==null){var _=i.memoizedProps;if(el(_,m)&&i.ref===l.ref)if(Ps=!1,l.pendingProps=m=_,tb(i,w))(i.flags&131072)!==0&&(Ps=!0);else return l.lanes=i.lanes,Ac(i,l,w)}return Ky(i,l,d,m,w)}function i5(i,l,d,m){var w=m.children,_=i!==null?i.memoizedState:null;if(i===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((l.flags&128)!==0){if(_=_!==null?_.baseLanes|d:d,i!==null){for(m=l.child=i.child,w=0;m!==null;)w=w|m.lanes|m.childLanes,m=m.sibling;m=w&~_}else m=0,l.child=null;return o5(i,l,_,d,m)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},i!==null&&ee(l,_!==null?_.cachePool:null),_!==null?Rr(l,_):Gn(),os(l);else return m=l.lanes=536870912,o5(i,l,_!==null?_.baseLanes|d:d,d,m)}else _!==null?(ee(l,_.cachePool),Rr(l,_),ls(),l.memoizedState=null):(i!==null&&ee(l,null),Gn(),ls());return La(i,l,w,d),l.child}function Im(i,l){return i!==null&&i.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function o5(i,l,d,m,w){var _=J();return _=_===null?null:{parent:Xr._currentValue,pool:_},l.memoizedState={baseLanes:d,cachePool:_},i!==null&&ee(l,null),Gn(),os(l),i!==null&&Ol(i,l,m,!0),l.childLanes=w,null}function Dp(i,l){return l=Op({mode:l.mode,children:l.children},i.mode),l.ref=i.ref,i.child=l,l.return=i,l}function l5(i,l,d){return Sr(l,i.child,null,d),i=Dp(l,l.pendingProps),i.flags|=2,or(l),l.memoizedState=null,i}function tI(i,l,d){var m=l.pendingProps,w=(l.flags&128)!==0;if(l.flags&=-129,i===null){if(Tn){if(m.mode==="hidden")return i=Dp(l,m),l.lanes=536870912,Im(null,i);if(Zn(l),(i=_r)?(i=vN(i,Ur),i=i!==null&&i.data==="&"?i:null,i!==null&&(l.memoizedState={dehydrated:i,treeContext:Pl!==null?{id:Ii,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},d=Ah(i),d.return=l,l.child=d,Qs=l,_r=null)):i=null,i===null)throw Ll(l);return l.lanes=536870912,null}return Dp(l,m)}var _=i.memoizedState;if(_!==null){var U=_.dehydrated;if(Zn(l),w)if(l.flags&256)l.flags&=-257,l=l5(i,l,d);else if(l.memoizedState!==null)l.child=i.child,l.flags|=128,l=null;else throw Error(r(558));else if(Ps||Ol(i,l,d,!1),w=(d&i.childLanes)!==0,Ps||w){if(m=Er,m!==null&&(U=oa(m,d),U!==0&&U!==_.retryLane))throw _.retryLane=U,sl(i,U),Fi(m,i,U),Wy;$p(),l=l5(i,l,d)}else i=_.treeContext,_r=Do(U.nextSibling),Qs=l,Tn=!0,Ra=null,Ur=!1,i!==null&&Sp(l,i),l=Dp(l,m),l.flags|=4096;return l}return i=Ei(i.child,{mode:m.mode,children:m.children}),i.ref=l.ref,l.child=i,i.return=l,i}function Mp(i,l){var d=l.ref;if(d===null)i!==null&&i.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(i===null||i.ref!==d)&&(l.flags|=4194816)}}function Ky(i,l,d,m,w){return Fl(l),d=wm(i,l,d,m,void 0,w),m=Nm(),i!==null&&!Ps?(jm(i,l,w),Ac(i,l,w)):(Tn&&m&&xm(l),l.flags|=1,La(i,l,d,w),l.child)}function c5(i,l,d,m,w,_){return Fl(l),l.updateQueue=null,d=il(l,m,d,w),Mh(i),m=Nm(),i!==null&&!Ps?(jm(i,l,_),Ac(i,l,_)):(Tn&&m&&xm(l),l.flags|=1,La(i,l,d,_),l.child)}function u5(i,l,d,m,w){if(Fl(l),l.stateNode===null){var _=Xs,U=d.contextType;typeof U=="object"&&U!==null&&(_=Zs(U)),_=new d(m,_),l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Hy,l.stateNode=_,_._reactInternals=l,_=l.stateNode,_.props=m,_.state=l.memoizedState,_.refs={},rt(l),U=d.contextType,_.context=typeof U=="object"&&U!==null?Zs(U):Xs,_.state=l.memoizedState,U=d.getDerivedStateFromProps,typeof U=="function"&&(Gy(l,d,U,m),_.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(U=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),U!==_.state&&Hy.enqueueReplaceState(_,_.state,null),as(l,m,_,w),yr(),_.state=l.memoizedState),typeof _.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(i===null){_=l.stateNode;var X=l.memoizedProps,fe=kd(d,X);_.props=fe;var ke=_.context,Be=d.contextType;U=Xs,typeof Be=="object"&&Be!==null&&(U=Zs(Be));var We=d.getDerivedStateFromProps;Be=typeof We=="function"||typeof _.getSnapshotBeforeUpdate=="function",X=l.pendingProps!==X,Be||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(X||ke!==U)&&Xw(l,_,m,U),dt=!1;var De=l.memoizedState;_.state=De,as(l,m,_,w),yr(),ke=l.memoizedState,X||De!==ke||dt?(typeof We=="function"&&(Gy(l,d,We,m),ke=l.memoizedState),(fe=dt||Yw(l,d,fe,m,De,ke,U))?(Be||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(l.flags|=4194308)):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=ke),_.props=m,_.state=ke,_.context=U,m=fe):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{_=l.stateNode,kr(i,l),U=l.memoizedProps,Be=kd(d,U),_.props=Be,We=l.pendingProps,De=_.context,ke=d.contextType,fe=Xs,typeof ke=="object"&&ke!==null&&(fe=Zs(ke)),X=d.getDerivedStateFromProps,(ke=typeof X=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(U!==We||De!==fe)&&Xw(l,_,m,fe),dt=!1,De=l.memoizedState,_.state=De,as(l,m,_,w),yr();var Me=l.memoizedState;U!==We||De!==Me||dt||i!==null&&i.dependencies!==null&&Rh(i.dependencies)?(typeof X=="function"&&(Gy(l,d,X,m),Me=l.memoizedState),(Be=dt||Yw(l,d,Be,m,De,Me,fe)||i!==null&&i.dependencies!==null&&Rh(i.dependencies))?(ke||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(m,Me,fe),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(m,Me,fe)),typeof _.componentDidUpdate=="function"&&(l.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof _.componentDidUpdate!="function"||U===i.memoizedProps&&De===i.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||U===i.memoizedProps&&De===i.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=Me),_.props=m,_.state=Me,_.context=fe,m=Be):(typeof _.componentDidUpdate!="function"||U===i.memoizedProps&&De===i.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||U===i.memoizedProps&&De===i.memoizedState||(l.flags|=1024),m=!1)}return _=m,Mp(i,l),m=(l.flags&128)!==0,_||m?(_=l.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:_.render(),l.flags|=1,i!==null&&m?(l.child=Sr(l,i.child,null,w),l.child=Sr(l,null,d,w)):La(i,l,d,w),l.memoizedState=_.state,i=l.child):i=Ac(i,l,w),i}function d5(i,l,d,m){return Nc(),l.flags|=256,La(i,l,d,m),l.child}var Yy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xy(i){return{baseLanes:i,cachePool:ce()}}function Qy(i,l,d){return i=i!==null?i.childLanes&~d:0,l&&(i|=ao),i}function h5(i,l,d){var m=l.pendingProps,w=!1,_=(l.flags&128)!==0,U;if((U=_)||(U=i!==null&&i.memoizedState===null?!1:(On.current&2)!==0),U&&(w=!0,l.flags&=-129),U=(l.flags&32)!==0,l.flags&=-33,i===null){if(Tn){if(w?Qr(l):ls(),(i=_r)?(i=vN(i,Ur),i=i!==null&&i.data!=="&"?i:null,i!==null&&(l.memoizedState={dehydrated:i,treeContext:Pl!==null?{id:Ii,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},d=Ah(i),d.return=l,l.child=d,Qs=l,_r=null)):i=null,i===null)throw Ll(l);return Pb(i)?l.lanes=32:l.lanes=536870912,null}var X=m.children;return m=m.fallback,w?(ls(),w=l.mode,X=Op({mode:"hidden",children:X},w),m=Rl(m,w,d,null),X.return=l,m.return=l,X.sibling=m,l.child=X,m=l.child,m.memoizedState=Xy(d),m.childLanes=Qy(i,U,d),l.memoizedState=Yy,Im(null,m)):(Qr(l),Jy(l,X))}var fe=i.memoizedState;if(fe!==null&&(X=fe.dehydrated,X!==null)){if(_)l.flags&256?(Qr(l),l.flags&=-257,l=Zy(i,l,d)):l.memoizedState!==null?(ls(),l.child=i.child,l.flags|=128,l=null):(ls(),X=m.fallback,w=l.mode,m=Op({mode:"visible",children:m.children},w),X=Rl(X,w,d,null),X.flags|=2,m.return=l,X.return=l,m.sibling=X,l.child=m,Sr(l,i.child,null,d),m=l.child,m.memoizedState=Xy(d),m.childLanes=Qy(i,U,d),l.memoizedState=Yy,l=Im(null,m));else if(Qr(l),Pb(X)){if(U=X.nextSibling&&X.nextSibling.dataset,U)var ke=U.dgst;U=ke,m=Error(r(419)),m.stack="",m.digest=U,pu({value:m,source:null,stack:null}),l=Zy(i,l,d)}else if(Ps||Ol(i,l,d,!1),U=(d&i.childLanes)!==0,Ps||U){if(U=Er,U!==null&&(m=oa(U,d),m!==0&&m!==fe.retryLane))throw fe.retryLane=m,sl(i,m),Fi(U,i,m),Wy;Rb(X)||$p(),l=Zy(i,l,d)}else Rb(X)?(l.flags|=192,l.child=i.child,l=null):(i=fe.treeContext,_r=Do(X.nextSibling),Qs=l,Tn=!0,Ra=null,Ur=!1,i!==null&&Sp(l,i),l=Jy(l,m.children),l.flags|=4096);return l}return w?(ls(),X=m.fallback,w=l.mode,fe=i.child,ke=fe.sibling,m=Ei(fe,{mode:"hidden",children:m.children}),m.subtreeFlags=fe.subtreeFlags&65011712,ke!==null?X=Ei(ke,X):(X=Rl(X,w,d,null),X.flags|=2),X.return=l,m.return=l,m.sibling=X,l.child=m,Im(null,m),m=l.child,X=i.child.memoizedState,X===null?X=Xy(d):(w=X.cachePool,w!==null?(fe=Xr._currentValue,w=w.parent!==fe?{parent:fe,pool:fe}:w):w=ce(),X={baseLanes:X.baseLanes|d,cachePool:w}),m.memoizedState=X,m.childLanes=Qy(i,U,d),l.memoizedState=Yy,Im(i.child,m)):(Qr(l),d=i.child,i=d.sibling,d=Ei(d,{mode:"visible",children:m.children}),d.return=l,d.sibling=null,i!==null&&(U=l.deletions,U===null?(l.deletions=[i],l.flags|=16):U.push(i)),l.child=d,l.memoizedState=null,d)}function Jy(i,l){return l=Op({mode:"visible",children:l},i.mode),l.return=i,i.child=l}function Op(i,l){return i=ga(22,i,null,l),i.lanes=0,i}function Zy(i,l,d){return Sr(l,i.child,null,d),i=Jy(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function f5(i,l,d){i.lanes|=l;var m=i.alternate;m!==null&&(m.lanes|=l),xu(i.return,l,d)}function eb(i,l,d,m,w,_){var U=i.memoizedState;U===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:w,treeForkCount:_}:(U.isBackwards=l,U.rendering=null,U.renderingStartTime=0,U.last=m,U.tail=d,U.tailMode=w,U.treeForkCount=_)}function m5(i,l,d){var m=l.pendingProps,w=m.revealOrder,_=m.tail;m=m.children;var U=On.current,X=(U&2)!==0;if(X?(U=U&1|2,l.flags|=128):U&=1,Q(On,U),La(i,l,m,d),m=Tn?Ed:0,!X&&i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&f5(i,d,l);else if(i.tag===19)f5(i,d,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(w){case"forwards":for(d=l.child,w=null;d!==null;)i=d.alternate,i!==null&&xa(i)===null&&(w=d),d=d.sibling;d=w,d===null?(w=l.child,l.child=null):(w=d.sibling,d.sibling=null),eb(l,!1,w,d,_,m);break;case"backwards":case"unstable_legacy-backwards":for(d=null,w=l.child,l.child=null;w!==null;){if(i=w.alternate,i!==null&&xa(i)===null){l.child=w;break}i=w.sibling,w.sibling=d,d=w,w=i}eb(l,!0,d,null,_,m);break;case"together":eb(l,!1,null,null,void 0,m);break;default:l.memoizedState=null}return l.child}function Ac(i,l,d){if(i!==null&&(l.dependencies=i.dependencies),Su|=l.lanes,(d&l.childLanes)===0)if(i!==null){if(Ol(i,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(i!==null&&l.child!==i.child)throw Error(r(153));if(l.child!==null){for(i=l.child,d=Ei(i,i.pendingProps),l.child=d,d.return=l;i.sibling!==null;)i=i.sibling,d=d.sibling=Ei(i,i.pendingProps),d.return=l;d.sibling=null}return l.child}function tb(i,l){return(i.lanes&l)!==0?!0:(i=i.dependencies,!!(i!==null&&Rh(i)))}function nI(i,l,d){switch(l.tag){case 3:Le(l,l.stateNode.containerInfo),Ml(l,Xr,i.memoizedState.cache),Nc();break;case 27:case 5:qe(l);break;case 4:Le(l,l.stateNode.containerInfo);break;case 10:Ml(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Zn(l),null;break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(Qr(l),l.flags|=128,null):(d&l.child.childLanes)!==0?h5(i,l,d):(Qr(l),i=Ac(i,l,d),i!==null?i.sibling:null);Qr(l);break;case 19:var w=(i.flags&128)!==0;if(m=(d&l.childLanes)!==0,m||(Ol(i,l,d,!1),m=(d&l.childLanes)!==0),w){if(m)return m5(i,l,d);l.flags|=128}if(w=l.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Q(On,On.current),m)break;return null;case 22:return l.lanes=0,i5(i,l,d,l.pendingProps);case 24:Ml(l,Xr,i.memoizedState.cache)}return Ac(i,l,d)}function g5(i,l,d){if(i!==null)if(i.memoizedProps!==l.pendingProps)Ps=!0;else{if(!tb(i,d)&&(l.flags&128)===0)return Ps=!1,nI(i,l,d);Ps=(i.flags&131072)!==0}else Ps=!1,Tn&&(l.flags&1048576)!==0&&_p(l,Ed,l.index);switch(l.lanes=0,l.tag){case 16:e:{var m=l.pendingProps;if(i=Ae(l.elementType),l.type=i,typeof i=="function")Eh(i)?(m=kd(i,m),l.tag=1,l=u5(null,l,i,m,d)):(l.tag=0,l=Ky(null,l,i,m,d));else{if(i!=null){var w=i.$$typeof;if(w===B){l.tag=11,l=r5(null,l,i,m,d);break e}else if(w===G){l.tag=14,l=s5(null,l,i,m,d);break e}}throw l=oe(i)||i,Error(r(306,l,""))}}return l;case 0:return Ky(i,l,l.type,l.pendingProps,d);case 1:return m=l.type,w=kd(m,l.pendingProps),u5(i,l,m,w,d);case 3:e:{if(Le(l,l.stateNode.containerInfo),i===null)throw Error(r(387));m=l.pendingProps;var _=l.memoizedState;w=_.element,kr(i,l),as(l,m,null,d);var U=l.memoizedState;if(m=U.cache,Ml(l,Xr,m),m!==_.cache&&jc(l,[Xr],d,!0),yr(),m=U.element,_.isDehydrated)if(_={element:m,isDehydrated:!1,cache:U.cache},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&256){l=d5(i,l,m,d);break e}else if(m!==w){w=Ai(Error(r(424)),l),pu(w),l=d5(i,l,m,d);break e}else{switch(i=l.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(_r=Do(i.firstChild),Qs=l,Tn=!0,Ra=null,Ur=!0,d=hn(l,null,m,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Nc(),m===w){l=Ac(i,l,d);break e}La(i,l,m,d)}l=l.child}return l;case 26:return Mp(i,l),i===null?(d=EN(l.type,null,l.pendingProps,null))?l.memoizedState=d:Tn||(d=l.type,i=l.pendingProps,m=Zp(me.current).createElement(d),m[$n]=l,m[ar]=i,Da(m,d,i),Ir(m),l.stateNode=m):l.memoizedState=EN(l.type,i.memoizedProps,l.pendingProps,i.memoizedState),null;case 27:return qe(l),i===null&&Tn&&(m=l.stateNode=jN(l.type,l.pendingProps,me.current),Qs=l,Ur=!0,w=_r,Iu(l.type)?(Lb=w,_r=Do(m.firstChild)):_r=w),La(i,l,l.pendingProps.children,d),Mp(i,l),i===null&&(l.flags|=4194304),l.child;case 5:return i===null&&Tn&&((w=m=_r)&&(m=RI(m,l.type,l.pendingProps,Ur),m!==null?(l.stateNode=m,Qs=l,_r=Do(m.firstChild),Ur=!1,w=!0):w=!1),w||Ll(l)),qe(l),w=l.type,_=l.pendingProps,U=i!==null?i.memoizedProps:null,m=_.children,Cb(w,_)?m=null:U!==null&&Cb(w,U)&&(l.flags|=32),l.memoizedState!==null&&(w=wm(i,l,My,null,null,d),Hm._currentValue=w),Mp(i,l),La(i,l,m,d),l.child;case 6:return i===null&&Tn&&((i=d=_r)&&(d=PI(d,l.pendingProps,Ur),d!==null?(l.stateNode=d,Qs=l,_r=null,i=!0):i=!1),i||Ll(l)),null;case 13:return h5(i,l,d);case 4:return Le(l,l.stateNode.containerInfo),m=l.pendingProps,i===null?l.child=Sr(l,null,m,d):La(i,l,m,d),l.child;case 11:return r5(i,l,l.type,l.pendingProps,d);case 7:return La(i,l,l.pendingProps,d),l.child;case 8:return La(i,l,l.pendingProps.children,d),l.child;case 12:return La(i,l,l.pendingProps.children,d),l.child;case 10:return m=l.pendingProps,Ml(l,l.type,m.value),La(i,l,m.children,d),l.child;case 9:return w=l.type._context,m=l.pendingProps.children,Fl(l),w=Zs(w),m=m(w),l.flags|=1,La(i,l,m,d),l.child;case 14:return s5(i,l,l.type,l.pendingProps,d);case 15:return a5(i,l,l.type,l.pendingProps,d);case 19:return m5(i,l,d);case 31:return tI(i,l,d);case 22:return i5(i,l,d,l.pendingProps);case 24:return Fl(l),m=Zs(Xr),i===null?(w=J(),w===null&&(w=Er,_=yu(),w.pooledCache=_,_.refCount++,_!==null&&(w.pooledCacheLanes|=d),w=_),l.memoizedState={parent:m,cache:w},rt(l),Ml(l,Xr,w)):((i.lanes&d)!==0&&(kr(i,l),as(l,null,null,d),yr()),w=i.memoizedState,_=l.memoizedState,w.parent!==m?(w={parent:m,cache:m},l.memoizedState=w,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=w),Ml(l,Xr,m)):(m=_.cache,Ml(l,Xr,m),m!==w.cache&&jc(l,[Xr],d,!0))),La(i,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Tc(i){i.flags|=4}function nb(i,l,d,m,w){if((l=(i.mode&32)!==0)&&(l=!1),l){if(i.flags|=16777216,(w&335544128)===w)if(i.stateNode.complete)i.flags|=8192;else if(z5())i.flags|=8192;else throw Oe=ve,Ce}else i.flags&=-16777217}function p5(i,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!kN(l))if(z5())i.flags|=8192;else throw Oe=ve,Ce}function Fp(i,l){l!==null&&(i.flags|=4),i.flags&16384&&(l=i.tag!==22?yi():536870912,i.lanes|=l,Wh|=l)}function km(i,l){if(!Tn)switch(i.tailMode){case"hidden":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function Lr(i){var l=i.alternate!==null&&i.alternate.child===i.child,d=0,m=0;if(l)for(var w=i.child;w!==null;)d|=w.lanes|w.childLanes,m|=w.subtreeFlags&65011712,m|=w.flags&65011712,w.return=i,w=w.sibling;else for(w=i.child;w!==null;)d|=w.lanes|w.childLanes,m|=w.subtreeFlags,m|=w.flags,w.return=i,w=w.sibling;return i.subtreeFlags|=m,i.childLanes=d,l}function rI(i,l,d){var m=l.pendingProps;switch(Ih(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lr(l),null;case 1:return Lr(l),null;case 3:return d=l.stateNode,m=null,i!==null&&(m=i.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),Ri(Xr),Re(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(Js(l)?Tc(l):i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,bm())),Lr(l),null;case 26:var w=l.type,_=l.memoizedState;return i===null?(Tc(l),_!==null?(Lr(l),p5(l,_)):(Lr(l),nb(l,w,null,m,d))):_?_!==i.memoizedState?(Tc(l),Lr(l),p5(l,_)):(Lr(l),l.flags&=-16777217):(i=i.memoizedProps,i!==m&&Tc(l),Lr(l),nb(l,w,i,m,d)),null;case 27:if(Je(l),d=me.current,w=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==m&&Tc(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return Lr(l),null}i=ne.current,Js(l)?ym(l):(i=jN(w,m,d),l.stateNode=i,Tc(l))}return Lr(l),null;case 5:if(Je(l),w=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==m&&Tc(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return Lr(l),null}if(_=ne.current,Js(l))ym(l);else{var U=Zp(me.current);switch(_){case 1:_=U.createElementNS("http://www.w3.org/2000/svg",w);break;case 2:_=U.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;default:switch(w){case"svg":_=U.createElementNS("http://www.w3.org/2000/svg",w);break;case"math":_=U.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;case"script":_=U.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof m.is=="string"?U.createElement("select",{is:m.is}):U.createElement("select"),m.multiple?_.multiple=!0:m.size&&(_.size=m.size);break;default:_=typeof m.is=="string"?U.createElement(w,{is:m.is}):U.createElement(w)}}_[$n]=l,_[ar]=m;e:for(U=l.child;U!==null;){if(U.tag===5||U.tag===6)_.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===l)break e;for(;U.sibling===null;){if(U.return===null||U.return===l)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}l.stateNode=_;e:switch(Da(_,w,m),w){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Tc(l)}}return Lr(l),nb(l,l.type,i===null?null:i.memoizedProps,l.pendingProps,d),null;case 6:if(i&&l.stateNode!=null)i.memoizedProps!==m&&Tc(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(r(166));if(i=me.current,Js(l)){if(i=l.stateNode,d=l.memoizedProps,m=null,w=Qs,w!==null)switch(w.tag){case 27:case 5:m=w.memoizedProps}i[$n]=l,i=!!(i.nodeValue===d||m!==null&&m.suppressHydrationWarning===!0||hN(i.nodeValue,d)),i||Ll(l,!0)}else i=Zp(i).createTextNode(m),i[$n]=l,l.stateNode=i}return Lr(l),null;case 31:if(d=l.memoizedState,i===null||i.memoizedState!==null){if(m=Js(l),d!==null){if(i===null){if(!m)throw Error(r(318));if(i=l.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[$n]=l}else Nc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Lr(l),i=!1}else d=bm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=d),i=!0;if(!i)return l.flags&256?(or(l),l):(or(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Lr(l),null;case 13:if(m=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(w=Js(l),m!==null&&m.dehydrated!==null){if(i===null){if(!w)throw Error(r(318));if(w=l.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(r(317));w[$n]=l}else Nc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Lr(l),w=!1}else w=bm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=w),w=!0;if(!w)return l.flags&256?(or(l),l):(or(l),null)}return or(l),(l.flags&128)!==0?(l.lanes=d,l):(d=m!==null,i=i!==null&&i.memoizedState!==null,d&&(m=l.child,w=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(w=m.alternate.memoizedState.cachePool.pool),_=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(_=m.memoizedState.cachePool.pool),_!==w&&(m.flags|=2048)),d!==i&&d&&(l.child.flags|=8192),Fp(l,l.updateQueue),Lr(l),null);case 4:return Re(),i===null&&_b(l.stateNode.containerInfo),Lr(l),null;case 10:return Ri(l.type),Lr(l),null;case 19:if(q(On),m=l.memoizedState,m===null)return Lr(l),null;if(w=(l.flags&128)!==0,_=m.rendering,_===null)if(w)km(m,!1);else{if(us!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(_=xa(i),_!==null){for(l.flags|=128,km(m,!1),i=_.updateQueue,l.updateQueue=i,Fp(l,i),l.subtreeFlags=0,i=d,d=l.child;d!==null;)_d(d,i),d=d.sibling;return Q(On,On.current&1|2),Tn&&hi(l,m.treeForkCount),l.child}i=i.sibling}m.tail!==null&&sn()>qp&&(l.flags|=128,w=!0,km(m,!1),l.lanes=4194304)}else{if(!w)if(i=xa(_),i!==null){if(l.flags|=128,w=!0,i=i.updateQueue,l.updateQueue=i,Fp(l,i),km(m,!0),m.tail===null&&m.tailMode==="hidden"&&!_.alternate&&!Tn)return Lr(l),null}else 2*sn()-m.renderingStartTime>qp&&d!==536870912&&(l.flags|=128,w=!0,km(m,!1),l.lanes=4194304);m.isBackwards?(_.sibling=l.child,l.child=_):(i=m.last,i!==null?i.sibling=_:l.child=_,m.last=_)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=sn(),i.sibling=null,d=On.current,Q(On,w?d&1|2:d&1),Tn&&hi(l,m.treeForkCount),i):(Lr(l),null);case 22:case 23:return or(l),bs(),m=l.memoizedState!==null,i!==null?i.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(d&536870912)!==0&&(l.flags&128)===0&&(Lr(l),l.subtreeFlags&6&&(l.flags|=8192)):Lr(l),d=l.updateQueue,d!==null&&Fp(l,d.retryQueue),d=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048),i!==null&&q(Y),null;case 24:return d=null,i!==null&&(d=i.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Ri(Xr),Lr(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function sI(i,l){switch(Ih(l),l.tag){case 1:return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return Ri(Xr),Re(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 26:case 27:case 5:return Je(l),null;case 31:if(l.memoizedState!==null){if(or(l),l.alternate===null)throw Error(r(340));Nc()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 13:if(or(l),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Nc()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return q(On),null;case 4:return Re(),null;case 10:return Ri(l.type),null;case 22:case 23:return or(l),bs(),i!==null&&q(Y),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 24:return Ri(Xr),null;case 25:return null;default:return null}}function x5(i,l){switch(Ih(l),l.tag){case 3:Ri(Xr),Re();break;case 26:case 27:case 5:Je(l);break;case 4:Re();break;case 31:l.memoizedState!==null&&or(l);break;case 13:or(l);break;case 19:q(On);break;case 10:Ri(l.type);break;case 22:case 23:or(l),bs(),i!==null&&q(Y);break;case 24:Ri(Xr)}}function Rm(i,l){try{var d=l.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var w=m.next;d=w;do{if((d.tag&i)===i){m=void 0;var _=d.create,U=d.inst;m=_(),U.destroy=m}d=d.next}while(d!==w)}}catch(X){cr(l,l.return,X)}}function ju(i,l,d){try{var m=l.updateQueue,w=m!==null?m.lastEffect:null;if(w!==null){var _=w.next;m=_;do{if((m.tag&i)===i){var U=m.inst,X=U.destroy;if(X!==void 0){U.destroy=void 0,w=l;var fe=d,ke=X;try{ke()}catch(Be){cr(w,fe,Be)}}}m=m.next}while(m!==_)}}catch(Be){cr(l,l.return,Be)}}function y5(i){var l=i.updateQueue;if(l!==null){var d=i.stateNode;try{is(l,d)}catch(m){cr(i,i.return,m)}}}function b5(i,l,d){d.props=kd(i.type,i.memoizedProps),d.state=i.memoizedState;try{d.componentWillUnmount()}catch(m){cr(i,l,m)}}function Pm(i,l){try{var d=i.ref;if(d!==null){switch(i.tag){case 26:case 27:case 5:var m=i.stateNode;break;case 30:m=i.stateNode;break;default:m=i.stateNode}typeof d=="function"?i.refCleanup=d(m):d.current=m}}catch(w){cr(i,l,w)}}function ql(i,l){var d=i.ref,m=i.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(w){cr(i,l,w)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(w){cr(i,l,w)}else d.current=null}function v5(i){var l=i.type,d=i.memoizedProps,m=i.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&m.focus();break e;case"img":d.src?m.src=d.src:d.srcSet&&(m.srcset=d.srcSet)}}catch(w){cr(i,i.return,w)}}function rb(i,l,d){try{var m=i.stateNode;EI(m,i.type,d,l),m[ar]=l}catch(w){cr(i,i.return,w)}}function w5(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Iu(i.type)||i.tag===4}function sb(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||w5(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Iu(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function ab(i,l,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(i,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(i),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=ai));else if(m!==4&&(m===27&&Iu(i.type)&&(d=i.stateNode,l=null),i=i.child,i!==null))for(ab(i,l,d),i=i.sibling;i!==null;)ab(i,l,d),i=i.sibling}function Up(i,l,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,l?d.insertBefore(i,l):d.appendChild(i);else if(m!==4&&(m===27&&Iu(i.type)&&(d=i.stateNode),i=i.child,i!==null))for(Up(i,l,d),i=i.sibling;i!==null;)Up(i,l,d),i=i.sibling}function N5(i){var l=i.stateNode,d=i.memoizedProps;try{for(var m=i.type,w=l.attributes;w.length;)l.removeAttributeNode(w[0]);Da(l,m,d),l[$n]=i,l[ar]=d}catch(_){cr(i,i.return,_)}}var Cc=!1,Ls=!1,ib=!1,j5=typeof WeakSet=="function"?WeakSet:Set,ya=null;function aI(i,l){if(i=i.containerInfo,Ab=i0,i=nl(i),Io(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var w=m.anchorOffset,_=m.focusNode;m=m.focusOffset;try{d.nodeType,_.nodeType}catch{d=null;break e}var U=0,X=-1,fe=-1,ke=0,Be=0,We=i,De=null;t:for(;;){for(var Me;We!==d||w!==0&&We.nodeType!==3||(X=U+w),We!==_||m!==0&&We.nodeType!==3||(fe=U+m),We.nodeType===3&&(U+=We.nodeValue.length),(Me=We.firstChild)!==null;)De=We,We=Me;for(;;){if(We===i)break t;if(De===d&&++ke===w&&(X=U),De===_&&++Be===m&&(fe=U),(Me=We.nextSibling)!==null)break;We=De,De=We.parentNode}We=Me}d=X===-1||fe===-1?null:{start:X,end:fe}}else d=null}d=d||{start:0,end:0}}else d=null;for(Tb={focusedElem:i,selectionRange:d},i0=!1,ya=l;ya!==null;)if(l=ya,i=l.child,(l.subtreeFlags&1028)!==0&&i!==null)i.return=l,ya=i;else for(;ya!==null;){switch(l=ya,_=l.alternate,i=l.flags,l.tag){case 0:if((i&4)!==0&&(i=l.updateQueue,i=i!==null?i.events:null,i!==null))for(d=0;d<i.length;d++)w=i[d],w.ref.impl=w.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,d=l,w=_.memoizedProps,_=_.memoizedState,m=d.stateNode;try{var pt=kd(d.type,w);i=m.getSnapshotBeforeUpdate(pt,_),m.__reactInternalSnapshotBeforeUpdate=i}catch(Yt){cr(d,d.return,Yt)}}break;case 3:if((i&1024)!==0){if(i=l.stateNode.containerInfo,d=i.nodeType,d===9)kb(i);else if(d===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":kb(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=l.sibling,i!==null){i.return=l.return,ya=i;break}ya=l.return}}function _5(i,l,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:kc(i,d),m&4&&Rm(5,d);break;case 1:if(kc(i,d),m&4)if(i=d.stateNode,l===null)try{i.componentDidMount()}catch(U){cr(d,d.return,U)}else{var w=kd(d.type,l.memoizedProps);l=l.memoizedState;try{i.componentDidUpdate(w,l,i.__reactInternalSnapshotBeforeUpdate)}catch(U){cr(d,d.return,U)}}m&64&&y5(d),m&512&&Pm(d,d.return);break;case 3:if(kc(i,d),m&64&&(i=d.updateQueue,i!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{is(i,l)}catch(U){cr(d,d.return,U)}}break;case 27:l===null&&m&4&&N5(d);case 26:case 5:kc(i,d),l===null&&m&4&&v5(d),m&512&&Pm(d,d.return);break;case 12:kc(i,d);break;case 31:kc(i,d),m&4&&A5(i,d);break;case 13:kc(i,d),m&4&&T5(i,d),m&64&&(i=d.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(d=mI.bind(null,d),LI(i,d))));break;case 22:if(m=d.memoizedState!==null||Cc,!m){l=l!==null&&l.memoizedState!==null||Ls,w=Cc;var _=Ls;Cc=m,(Ls=l)&&!_?Rc(i,d,(d.subtreeFlags&8772)!==0):kc(i,d),Cc=w,Ls=_}break;case 30:break;default:kc(i,d)}}function S5(i){var l=i.alternate;l!==null&&(i.alternate=null,S5(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&Ki(l)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var zr=null,Li=!1;function Ic(i,l,d){for(d=d.child;d!==null;)E5(i,l,d),d=d.sibling}function E5(i,l,d){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(ln,d)}catch{}switch(d.tag){case 26:Ls||ql(d,l),Ic(i,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Ls||ql(d,l);var m=zr,w=Li;Iu(d.type)&&(zr=d.stateNode,Li=!1),Ic(i,l,d),zm(d.stateNode),zr=m,Li=w;break;case 5:Ls||ql(d,l);case 6:if(m=zr,w=Li,zr=null,Ic(i,l,d),zr=m,Li=w,zr!==null)if(Li)try{(zr.nodeType===9?zr.body:zr.nodeName==="HTML"?zr.ownerDocument.body:zr).removeChild(d.stateNode)}catch(_){cr(d,l,_)}else try{zr.removeChild(d.stateNode)}catch(_){cr(d,l,_)}break;case 18:zr!==null&&(Li?(i=zr,yN(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,d.stateNode),tf(i)):yN(zr,d.stateNode));break;case 4:m=zr,w=Li,zr=d.stateNode.containerInfo,Li=!0,Ic(i,l,d),zr=m,Li=w;break;case 0:case 11:case 14:case 15:ju(2,d,l),Ls||ju(4,d,l),Ic(i,l,d);break;case 1:Ls||(ql(d,l),m=d.stateNode,typeof m.componentWillUnmount=="function"&&b5(d,l,m)),Ic(i,l,d);break;case 21:Ic(i,l,d);break;case 22:Ls=(m=Ls)||d.memoizedState!==null,Ic(i,l,d),Ls=m;break;default:Ic(i,l,d)}}function A5(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{tf(i)}catch(d){cr(l,l.return,d)}}}function T5(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{tf(i)}catch(d){cr(l,l.return,d)}}function iI(i){switch(i.tag){case 31:case 13:case 19:var l=i.stateNode;return l===null&&(l=i.stateNode=new j5),l;case 22:return i=i.stateNode,l=i._retryCache,l===null&&(l=i._retryCache=new j5),l;default:throw Error(r(435,i.tag))}}function Vp(i,l){var d=iI(i);l.forEach(function(m){if(!d.has(m)){d.add(m);var w=gI.bind(null,i,m);m.then(w,w)}})}function Di(i,l){var d=l.deletions;if(d!==null)for(var m=0;m<d.length;m++){var w=d[m],_=i,U=l,X=U;e:for(;X!==null;){switch(X.tag){case 27:if(Iu(X.type)){zr=X.stateNode,Li=!1;break e}break;case 5:zr=X.stateNode,Li=!1;break e;case 3:case 4:zr=X.stateNode.containerInfo,Li=!0;break e}X=X.return}if(zr===null)throw Error(r(160));E5(_,U,w),zr=null,Li=!1,_=w.alternate,_!==null&&(_.return=null),w.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)C5(l,i),l=l.sibling}var ul=null;function C5(i,l){var d=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Di(l,i),Mi(i),m&4&&(ju(3,i,i.return),Rm(3,i),ju(5,i,i.return));break;case 1:Di(l,i),Mi(i),m&512&&(Ls||d===null||ql(d,d.return)),m&64&&Cc&&(i=i.updateQueue,i!==null&&(m=i.callbacks,m!==null&&(d=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:var w=ul;if(Di(l,i),Mi(i),m&512&&(Ls||d===null||ql(d,d.return)),m&4){var _=d!==null?d.memoizedState:null;if(m=i.memoizedState,d===null)if(m===null)if(i.stateNode===null){e:{m=i.type,d=i.memoizedProps,w=w.ownerDocument||w;t:switch(m){case"title":_=w.getElementsByTagName("title")[0],(!_||_[ca]||_[$n]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=w.createElement(m),w.head.insertBefore(_,w.querySelector("head > title"))),Da(_,m,d),_[$n]=i,Ir(_),m=_;break e;case"link":var U=CN("link","href",w).get(m+(d.href||""));if(U){for(var X=0;X<U.length;X++)if(_=U[X],_.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&_.getAttribute("rel")===(d.rel==null?null:d.rel)&&_.getAttribute("title")===(d.title==null?null:d.title)&&_.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){U.splice(X,1);break t}}_=w.createElement(m),Da(_,m,d),w.head.appendChild(_);break;case"meta":if(U=CN("meta","content",w).get(m+(d.content||""))){for(X=0;X<U.length;X++)if(_=U[X],_.getAttribute("content")===(d.content==null?null:""+d.content)&&_.getAttribute("name")===(d.name==null?null:d.name)&&_.getAttribute("property")===(d.property==null?null:d.property)&&_.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&_.getAttribute("charset")===(d.charSet==null?null:d.charSet)){U.splice(X,1);break t}}_=w.createElement(m),Da(_,m,d),w.head.appendChild(_);break;default:throw Error(r(468,m))}_[$n]=i,Ir(_),m=_}i.stateNode=m}else IN(w,i.type,i.stateNode);else i.stateNode=TN(w,m,i.memoizedProps);else _!==m?(_===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):_.count--,m===null?IN(w,i.type,i.stateNode):TN(w,m,i.memoizedProps)):m===null&&i.stateNode!==null&&rb(i,i.memoizedProps,d.memoizedProps)}break;case 27:Di(l,i),Mi(i),m&512&&(Ls||d===null||ql(d,d.return)),d!==null&&m&4&&rb(i,i.memoizedProps,d.memoizedProps);break;case 5:if(Di(l,i),Mi(i),m&512&&(Ls||d===null||ql(d,d.return)),i.flags&32){w=i.stateNode;try{ps(w,"")}catch(pt){cr(i,i.return,pt)}}m&4&&i.stateNode!=null&&(w=i.memoizedProps,rb(i,w,d!==null?d.memoizedProps:w)),m&1024&&(ib=!0);break;case 6:if(Di(l,i),Mi(i),m&4){if(i.stateNode===null)throw Error(r(162));m=i.memoizedProps,d=i.stateNode;try{d.nodeValue=m}catch(pt){cr(i,i.return,pt)}}break;case 3:if(n0=null,w=ul,ul=e0(l.containerInfo),Di(l,i),ul=w,Mi(i),m&4&&d!==null&&d.memoizedState.isDehydrated)try{tf(l.containerInfo)}catch(pt){cr(i,i.return,pt)}ib&&(ib=!1,I5(i));break;case 4:m=ul,ul=e0(i.stateNode.containerInfo),Di(l,i),Mi(i),ul=m;break;case 12:Di(l,i),Mi(i);break;case 31:Di(l,i),Mi(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,Vp(i,m)));break;case 13:Di(l,i),Mi(i),i.child.flags&8192&&i.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(zp=sn()),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,Vp(i,m)));break;case 22:w=i.memoizedState!==null;var fe=d!==null&&d.memoizedState!==null,ke=Cc,Be=Ls;if(Cc=ke||w,Ls=Be||fe,Di(l,i),Ls=Be,Cc=ke,Mi(i),m&8192)e:for(l=i.stateNode,l._visibility=w?l._visibility&-2:l._visibility|1,w&&(d===null||fe||Cc||Ls||Rd(i)),d=null,l=i;;){if(l.tag===5||l.tag===26){if(d===null){fe=d=l;try{if(_=fe.stateNode,w)U=_.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{X=fe.stateNode;var We=fe.memoizedProps.style,De=We!=null&&We.hasOwnProperty("display")?We.display:null;X.style.display=De==null||typeof De=="boolean"?"":(""+De).trim()}}catch(pt){cr(fe,fe.return,pt)}}}else if(l.tag===6){if(d===null){fe=l;try{fe.stateNode.nodeValue=w?"":fe.memoizedProps}catch(pt){cr(fe,fe.return,pt)}}}else if(l.tag===18){if(d===null){fe=l;try{var Me=fe.stateNode;w?bN(Me,!0):bN(fe.stateNode,!1)}catch(pt){cr(fe,fe.return,pt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===i)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break e;for(;l.sibling===null;){if(l.return===null||l.return===i)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=i.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,Vp(i,d))));break;case 19:Di(l,i),Mi(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,Vp(i,m)));break;case 30:break;case 21:break;default:Di(l,i),Mi(i)}}function Mi(i){var l=i.flags;if(l&2){try{for(var d,m=i.return;m!==null;){if(w5(m)){d=m;break}m=m.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var w=d.stateNode,_=sb(i);Up(i,_,w);break;case 5:var U=d.stateNode;d.flags&32&&(ps(U,""),d.flags&=-33);var X=sb(i);Up(i,X,U);break;case 3:case 4:var fe=d.stateNode.containerInfo,ke=sb(i);ab(i,ke,fe);break;default:throw Error(r(161))}}catch(Be){cr(i,i.return,Be)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function I5(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var l=i;I5(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),i=i.sibling}}function kc(i,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)_5(i,l.alternate,l),l=l.sibling}function Rd(i){for(i=i.child;i!==null;){var l=i;switch(l.tag){case 0:case 11:case 14:case 15:ju(4,l,l.return),Rd(l);break;case 1:ql(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&b5(l,l.return,d),Rd(l);break;case 27:zm(l.stateNode);case 26:case 5:ql(l,l.return),Rd(l);break;case 22:l.memoizedState===null&&Rd(l);break;case 30:Rd(l);break;default:Rd(l)}i=i.sibling}}function Rc(i,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,w=i,_=l,U=_.flags;switch(_.tag){case 0:case 11:case 15:Rc(w,_,d),Rm(4,_);break;case 1:if(Rc(w,_,d),m=_,w=m.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(ke){cr(m,m.return,ke)}if(m=_,w=m.updateQueue,w!==null){var X=m.stateNode;try{var fe=w.shared.hiddenCallbacks;if(fe!==null)for(w.shared.hiddenCallbacks=null,w=0;w<fe.length;w++)pa(fe[w],X)}catch(ke){cr(m,m.return,ke)}}d&&U&64&&y5(_),Pm(_,_.return);break;case 27:N5(_);case 26:case 5:Rc(w,_,d),d&&m===null&&U&4&&v5(_),Pm(_,_.return);break;case 12:Rc(w,_,d);break;case 31:Rc(w,_,d),d&&U&4&&A5(w,_);break;case 13:Rc(w,_,d),d&&U&4&&T5(w,_);break;case 22:_.memoizedState===null&&Rc(w,_,d),Pm(_,_.return);break;case 30:break;default:Rc(w,_,d)}l=l.sibling}}function ob(i,l){var d=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),i=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(i=l.memoizedState.cachePool.pool),i!==d&&(i!=null&&i.refCount++,d!=null&&Ad(d))}function lb(i,l){i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&Ad(i))}function dl(i,l,d,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)k5(i,l,d,m),l=l.sibling}function k5(i,l,d,m){var w=l.flags;switch(l.tag){case 0:case 11:case 15:dl(i,l,d,m),w&2048&&Rm(9,l);break;case 1:dl(i,l,d,m);break;case 3:dl(i,l,d,m),w&2048&&(i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&Ad(i)));break;case 12:if(w&2048){dl(i,l,d,m),i=l.stateNode;try{var _=l.memoizedProps,U=_.id,X=_.onPostCommit;typeof X=="function"&&X(U,l.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(fe){cr(l,l.return,fe)}}else dl(i,l,d,m);break;case 31:dl(i,l,d,m);break;case 13:dl(i,l,d,m);break;case 23:break;case 22:_=l.stateNode,U=l.alternate,l.memoizedState!==null?_._visibility&2?dl(i,l,d,m):Lm(i,l):_._visibility&2?dl(i,l,d,m):(_._visibility|=2,Gh(i,l,d,m,(l.subtreeFlags&10256)!==0||!1)),w&2048&&ob(U,l);break;case 24:dl(i,l,d,m),w&2048&&lb(l.alternate,l);break;default:dl(i,l,d,m)}}function Gh(i,l,d,m,w){for(w=w&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var _=i,U=l,X=d,fe=m,ke=U.flags;switch(U.tag){case 0:case 11:case 15:Gh(_,U,X,fe,w),Rm(8,U);break;case 23:break;case 22:var Be=U.stateNode;U.memoizedState!==null?Be._visibility&2?Gh(_,U,X,fe,w):Lm(_,U):(Be._visibility|=2,Gh(_,U,X,fe,w)),w&&ke&2048&&ob(U.alternate,U);break;case 24:Gh(_,U,X,fe,w),w&&ke&2048&&lb(U.alternate,U);break;default:Gh(_,U,X,fe,w)}l=l.sibling}}function Lm(i,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=i,m=l,w=m.flags;switch(m.tag){case 22:Lm(d,m),w&2048&&ob(m.alternate,m);break;case 24:Lm(d,m),w&2048&&lb(m.alternate,m);break;default:Lm(d,m)}l=l.sibling}}var Dm=8192;function Hh(i,l,d){if(i.subtreeFlags&Dm)for(i=i.child;i!==null;)R5(i,l,d),i=i.sibling}function R5(i,l,d){switch(i.tag){case 26:Hh(i,l,d),i.flags&Dm&&i.memoizedState!==null&&$I(d,ul,i.memoizedState,i.memoizedProps);break;case 5:Hh(i,l,d);break;case 3:case 4:var m=ul;ul=e0(i.stateNode.containerInfo),Hh(i,l,d),ul=m;break;case 22:i.memoizedState===null&&(m=i.alternate,m!==null&&m.memoizedState!==null?(m=Dm,Dm=16777216,Hh(i,l,d),Dm=m):Hh(i,l,d));break;default:Hh(i,l,d)}}function P5(i){var l=i.alternate;if(l!==null&&(i=l.child,i!==null)){l.child=null;do l=i.sibling,i.sibling=null,i=l;while(i!==null)}}function Mm(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];ya=m,D5(m,i)}P5(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)L5(i),i=i.sibling}function L5(i){switch(i.tag){case 0:case 11:case 15:Mm(i),i.flags&2048&&ju(9,i,i.return);break;case 3:Mm(i);break;case 12:Mm(i);break;case 22:var l=i.stateNode;i.memoizedState!==null&&l._visibility&2&&(i.return===null||i.return.tag!==13)?(l._visibility&=-3,Bp(i)):Mm(i);break;default:Mm(i)}}function Bp(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];ya=m,D5(m,i)}P5(i)}for(i=i.child;i!==null;){switch(l=i,l.tag){case 0:case 11:case 15:ju(8,l,l.return),Bp(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,Bp(l));break;default:Bp(l)}i=i.sibling}}function D5(i,l){for(;ya!==null;){var d=ya;switch(d.tag){case 0:case 11:case 15:ju(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Ad(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,ya=m;else e:for(d=i;ya!==null;){m=ya;var w=m.sibling,_=m.return;if(S5(m),m===d){ya=null;break e}if(w!==null){w.return=_,ya=w;break e}ya=_}}}var oI={getCacheForType:function(i){var l=Zs(Xr),d=l.data.get(i);return d===void 0&&(d=i(),l.data.set(i,d)),d},cacheSignal:function(){return Zs(Xr).controller.signal}},lI=typeof WeakMap=="function"?WeakMap:Map,er=0,Er=null,Cn=null,Rn=0,lr=0,so=null,_u=!1,$h=!1,cb=!1,Pc=0,us=0,Su=0,Pd=0,ub=0,ao=0,Wh=0,Om=null,Oi=null,db=!1,zp=0,M5=0,qp=1/0,Gp=null,Eu=null,ta=0,Au=null,Kh=null,Lc=0,hb=0,fb=null,O5=null,Fm=0,mb=null;function io(){return(er&2)!==0&&Rn!==0?Rn&-Rn:ue.T!==null?vb():ns()}function F5(){if(ao===0)if((Rn&536870912)===0||Tn){var i=Hn;Hn<<=1,(Hn&3932160)===0&&(Hn=262144),ao=i}else ao=536870912;return i=Pr.current,i!==null&&(i.flags|=32),ao}function Fi(i,l,d){(i===Er&&(lr===2||lr===9)||i.cancelPendingCommit!==null)&&(Yh(i,0),Tu(i,Rn,ao,!1)),Ct(i,d),((er&2)===0||i!==Er)&&(i===Er&&((er&2)===0&&(Pd|=d),us===4&&Tu(i,Rn,ao,!1)),Gl(i))}function U5(i,l,d){if((er&6)!==0)throw Error(r(327));var m=!d&&(l&127)===0&&(l&i.expiredLanes)===0||qs(i,l),w=m?dI(i,l):pb(i,l,!0),_=m;do{if(w===0){$h&&!m&&Tu(i,l,0,!1);break}else{if(d=i.current.alternate,_&&!cI(d)){w=pb(i,l,!1),_=!1;continue}if(w===2){if(_=l,i.errorRecoveryDisabledLanes&_)var U=0;else U=i.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){l=U;e:{var X=i;w=Om;var fe=X.current.memoizedState.isDehydrated;if(fe&&(Yh(X,U).flags|=256),U=pb(X,U,!1),U!==2){if(cb&&!fe){X.errorRecoveryDisabledLanes|=_,Pd|=_,w=4;break e}_=Oi,Oi=w,_!==null&&(Oi===null?Oi=_:Oi.push.apply(Oi,_))}w=U}if(_=!1,w!==2)continue}}if(w===1){Yh(i,0),Tu(i,l,0,!0);break}e:{switch(m=i,_=w,_){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Tu(m,l,ao,!_u);break e;case 2:Oi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(w=zp+300-sn(),10<w)){if(Tu(m,l,ao,!_u),xn(m,0,!0)!==0)break e;Lc=l,m.timeoutHandle=pN(V5.bind(null,m,d,Oi,Gp,db,l,ao,Pd,Wh,_u,_,"Throttled",-0,0),w);break e}V5(m,d,Oi,Gp,db,l,ao,Pd,Wh,_u,_,null,-0,0)}}break}while(!0);Gl(i)}function V5(i,l,d,m,w,_,U,X,fe,ke,Be,We,De,Me){if(i.timeoutHandle=-1,We=l.subtreeFlags,We&8192||(We&16785408)===16785408){We={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ai},R5(l,_,We);var pt=(_&62914560)===_?zp-sn():(_&4194048)===_?M5-sn():0;if(pt=WI(We,pt),pt!==null){Lc=_,i.cancelPendingCommit=pt(K5.bind(null,i,l,_,d,m,w,U,X,fe,Be,We,null,De,Me)),Tu(i,_,U,!ke);return}}K5(i,l,_,d,m,w,U,X,fe)}function cI(i){for(var l=i;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var w=d[m],_=w.getSnapshot;w=w.value;try{if(!Ys(_(),w))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Tu(i,l,d,m){l&=~ub,l&=~Pd,i.suspendedLanes|=l,i.pingedLanes&=~l,m&&(i.warmLanes|=l),m=i.expirationTimes;for(var w=l;0<w;){var _=31-an(w),U=1<<_;m[_]=-1,w&=~U}d!==0&&Na(i,d,l)}function Hp(){return(er&6)===0?(Um(0),!1):!0}function gb(){if(Cn!==null){if(lr===0)var i=Cn.return;else i=Cn,Ro=Dl=null,Oh(i),Ye=null,yt=0,i=Cn;for(;i!==null;)x5(i.alternate,i),i=i.return;Cn=null}}function Yh(i,l){var d=i.timeoutHandle;d!==-1&&(i.timeoutHandle=-1,CI(d)),d=i.cancelPendingCommit,d!==null&&(i.cancelPendingCommit=null,d()),Lc=0,gb(),Er=i,Cn=d=Ei(i.current,null),Rn=l,lr=0,so=null,_u=!1,$h=qs(i,l),cb=!1,Wh=ao=ub=Pd=Su=us=0,Oi=Om=null,db=!1,(l&8)!==0&&(l|=l&32);var m=i.entangledLanes;if(m!==0)for(i=i.entanglements,m&=l;0<m;){var w=31-an(m),_=1<<w;l|=i[w],m&=~_}return Pc=l,wd(),d}function B5(i,l){Ft=null,ue.H=Cm,l===xe||l===ie?(l=Ge(),lr=3):l===Ce?(l=Ge(),lr=4):lr=l===Wy?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,so=l,Cn===null&&(us=1,Lp(i,Ai(l,i.current)))}function z5(){var i=Pr.current;return i===null?!0:(Rn&4194048)===Rn?Un===null:(Rn&62914560)===Rn||(Rn&536870912)!==0?i===Un:!1}function q5(){var i=ue.H;return ue.H=Cm,i===null?Cm:i}function G5(){var i=ue.A;return ue.A=oI,i}function $p(){us=4,_u||(Rn&4194048)!==Rn&&Pr.current!==null||($h=!0),(Su&134217727)===0&&(Pd&134217727)===0||Er===null||Tu(Er,Rn,ao,!1)}function pb(i,l,d){var m=er;er|=2;var w=q5(),_=G5();(Er!==i||Rn!==l)&&(Gp=null,Yh(i,l)),l=!1;var U=us;e:do try{if(lr!==0&&Cn!==null){var X=Cn,fe=so;switch(lr){case 8:gb(),U=6;break e;case 3:case 2:case 9:case 6:Pr.current===null&&(l=!0);var ke=lr;if(lr=0,so=null,Xh(i,X,fe,ke),d&&$h){U=0;break e}break;default:ke=lr,lr=0,so=null,Xh(i,X,fe,ke)}}uI(),U=us;break}catch(Be){B5(i,Be)}while(!0);return l&&i.shellSuspendCounter++,Ro=Dl=null,er=m,ue.H=w,ue.A=_,Cn===null&&(Er=null,Rn=0,wd()),U}function uI(){for(;Cn!==null;)H5(Cn)}function dI(i,l){var d=er;er|=2;var m=q5(),w=G5();Er!==i||Rn!==l?(Gp=null,qp=sn()+500,Yh(i,l)):$h=qs(i,l);e:do try{if(lr!==0&&Cn!==null){l=Cn;var _=so;t:switch(lr){case 1:lr=0,so=null,Xh(i,l,_,1);break;case 2:case 9:if(Ee(_)){lr=0,so=null,$5(l);break}l=function(){lr!==2&&lr!==9||Er!==i||(lr=7),Gl(i)},_.then(l,l);break e;case 3:lr=7;break e;case 4:lr=5;break e;case 7:Ee(_)?(lr=0,so=null,$5(l)):(lr=0,so=null,Xh(i,l,_,7));break;case 5:var U=null;switch(Cn.tag){case 26:U=Cn.memoizedState;case 5:case 27:var X=Cn;if(U?kN(U):X.stateNode.complete){lr=0,so=null;var fe=X.sibling;if(fe!==null)Cn=fe;else{var ke=X.return;ke!==null?(Cn=ke,Wp(ke)):Cn=null}break t}}lr=0,so=null,Xh(i,l,_,5);break;case 6:lr=0,so=null,Xh(i,l,_,6);break;case 8:gb(),us=6;break e;default:throw Error(r(462))}}hI();break}catch(Be){B5(i,Be)}while(!0);return Ro=Dl=null,ue.H=m,ue.A=w,er=d,Cn!==null?0:(Er=null,Rn=0,wd(),us)}function hI(){for(;Cn!==null&&!Mt();)H5(Cn)}function H5(i){var l=g5(i.alternate,i,Pc);i.memoizedProps=i.pendingProps,l===null?Wp(i):Cn=l}function $5(i){var l=i,d=l.alternate;switch(l.tag){case 15:case 0:l=c5(d,l,l.pendingProps,l.type,void 0,Rn);break;case 11:l=c5(d,l,l.pendingProps,l.type.render,l.ref,Rn);break;case 5:Oh(l);default:x5(d,l),l=Cn=_d(l,Pc),l=g5(d,l,Pc)}i.memoizedProps=i.pendingProps,l===null?Wp(i):Cn=l}function Xh(i,l,d,m){Ro=Dl=null,Oh(l),Ye=null,yt=0;var w=l.return;try{if(eI(i,w,l,d,Rn)){us=1,Lp(i,Ai(d,i.current)),Cn=null;return}}catch(_){if(w!==null)throw Cn=w,_;us=1,Lp(i,Ai(d,i.current)),Cn=null;return}l.flags&32768?(Tn||m===1?i=!0:$h||(Rn&536870912)!==0?i=!1:(_u=i=!0,(m===2||m===9||m===3||m===6)&&(m=Pr.current,m!==null&&m.tag===13&&(m.flags|=16384))),W5(l,i)):Wp(l)}function Wp(i){var l=i;do{if((l.flags&32768)!==0){W5(l,_u);return}i=l.return;var d=rI(l.alternate,l,Pc);if(d!==null){Cn=d;return}if(l=l.sibling,l!==null){Cn=l;return}Cn=l=i}while(l!==null);us===0&&(us=5)}function W5(i,l){do{var d=sI(i.alternate,i);if(d!==null){d.flags&=32767,Cn=d;return}if(d=i.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(i=i.sibling,i!==null)){Cn=i;return}Cn=i=d}while(i!==null);us=6,Cn=null}function K5(i,l,d,m,w,_,U,X,fe){i.cancelPendingCommit=null;do Kp();while(ta!==0);if((er&6)!==0)throw Error(r(327));if(l!==null){if(l===i.current)throw Error(r(177));if(_=l.lanes|l.childLanes,_|=jh,Wi(i,d,_,U,X,fe),i===Er&&(Cn=Er=null,Rn=0),Kh=l,Au=i,Lc=d,hb=_,fb=w,O5=m,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,pI(on,function(){return Z5(),null})):(i.callbackNode=null,i.callbackPriority=0),m=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||m){m=ue.T,ue.T=null,w=pe.p,pe.p=2,U=er,er|=4;try{aI(i,l,d)}finally{er=U,pe.p=w,ue.T=m}}ta=1,Y5(),X5(),Q5()}}function Y5(){if(ta===1){ta=0;var i=Au,l=Kh,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=ue.T,ue.T=null;var m=pe.p;pe.p=2;var w=er;er|=4;try{C5(l,i);var _=Tb,U=nl(i.containerInfo),X=_.focusedElem,fe=_.selectionRange;if(U!==X&&X&&X.ownerDocument&&tl(X.ownerDocument.documentElement,X)){if(fe!==null&&Io(X)){var ke=fe.start,Be=fe.end;if(Be===void 0&&(Be=ke),"selectionStart"in X)X.selectionStart=ke,X.selectionEnd=Math.min(Be,X.value.length);else{var We=X.ownerDocument||document,De=We&&We.defaultView||window;if(De.getSelection){var Me=De.getSelection(),pt=X.textContent.length,Yt=Math.min(fe.start,pt),wr=fe.end===void 0?Yt:Math.min(fe.end,pt);!Me.extend&&Yt>wr&&(U=wr,wr=Yt,Yt=U);var je=hu(X,Yt),ye=hu(X,wr);if(je&&ye&&(Me.rangeCount!==1||Me.anchorNode!==je.node||Me.anchorOffset!==je.offset||Me.focusNode!==ye.node||Me.focusOffset!==ye.offset)){var Ie=We.createRange();Ie.setStart(je.node,je.offset),Me.removeAllRanges(),Yt>wr?(Me.addRange(Ie),Me.extend(ye.node,ye.offset)):(Ie.setEnd(ye.node,ye.offset),Me.addRange(Ie))}}}}for(We=[],Me=X;Me=Me.parentNode;)Me.nodeType===1&&We.push({element:Me,left:Me.scrollLeft,top:Me.scrollTop});for(typeof X.focus=="function"&&X.focus(),X=0;X<We.length;X++){var $e=We[X];$e.element.scrollLeft=$e.left,$e.element.scrollTop=$e.top}}i0=!!Ab,Tb=Ab=null}finally{er=w,pe.p=m,ue.T=d}}i.current=l,ta=2}}function X5(){if(ta===2){ta=0;var i=Au,l=Kh,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=ue.T,ue.T=null;var m=pe.p;pe.p=2;var w=er;er|=4;try{_5(i,l.alternate,l)}finally{er=w,pe.p=m,ue.T=d}}ta=3}}function Q5(){if(ta===4||ta===3){ta=0,Et();var i=Au,l=Kh,d=Lc,m=O5;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?ta=5:(ta=0,Kh=Au=null,J5(i,i.pendingLanes));var w=i.pendingLanes;if(w===0&&(Eu=null),mr(d),l=l.stateNode,Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(ln,l,void 0,(l.current.flags&128)===128)}catch{}if(m!==null){l=ue.T,w=pe.p,pe.p=2,ue.T=null;try{for(var _=i.onRecoverableError,U=0;U<m.length;U++){var X=m[U];_(X.value,{componentStack:X.stack})}}finally{ue.T=l,pe.p=w}}(Lc&3)!==0&&Kp(),Gl(i),w=i.pendingLanes,(d&261930)!==0&&(w&42)!==0?i===mb?Fm++:(Fm=0,mb=i):Fm=0,Um(0)}}function J5(i,l){(i.pooledCacheLanes&=l)===0&&(l=i.pooledCache,l!=null&&(i.pooledCache=null,Ad(l)))}function Kp(){return Y5(),X5(),Q5(),Z5()}function Z5(){if(ta!==5)return!1;var i=Au,l=hb;hb=0;var d=mr(Lc),m=ue.T,w=pe.p;try{pe.p=32>d?32:d,ue.T=null,d=fb,fb=null;var _=Au,U=Lc;if(ta=0,Kh=Au=null,Lc=0,(er&6)!==0)throw Error(r(331));var X=er;if(er|=4,L5(_.current),k5(_,_.current,U,d),er=X,Um(0,!1),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(ln,_)}catch{}return!0}finally{pe.p=w,ue.T=m,J5(i,l)}}function eN(i,l,d){l=Ai(d,l),l=$y(i.stateNode,l,2),i=gn(i,l,2),i!==null&&(Ct(i,2),Gl(i))}function cr(i,l,d){if(i.tag===3)eN(i,i,d);else for(;l!==null;){if(l.tag===3){eN(l,i,d);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Eu===null||!Eu.has(m))){i=Ai(d,i),d=t5(2),m=gn(l,d,2),m!==null&&(n5(d,m,l,i),Ct(m,2),Gl(m));break}}l=l.return}}function xb(i,l,d){var m=i.pingCache;if(m===null){m=i.pingCache=new lI;var w=new Set;m.set(l,w)}else w=m.get(l),w===void 0&&(w=new Set,m.set(l,w));w.has(d)||(cb=!0,w.add(d),i=fI.bind(null,i,l,d),l.then(i,i))}function fI(i,l,d){var m=i.pingCache;m!==null&&m.delete(l),i.pingedLanes|=i.suspendedLanes&d,i.warmLanes&=~d,Er===i&&(Rn&d)===d&&(us===4||us===3&&(Rn&62914560)===Rn&&300>sn()-zp?(er&2)===0&&Yh(i,0):ub|=d,Wh===Rn&&(Wh=0)),Gl(i)}function tN(i,l){l===0&&(l=yi()),i=sl(i,l),i!==null&&(Ct(i,l),Gl(i))}function mI(i){var l=i.memoizedState,d=0;l!==null&&(d=l.retryLane),tN(i,d)}function gI(i,l){var d=0;switch(i.tag){case 31:case 13:var m=i.stateNode,w=i.memoizedState;w!==null&&(d=w.retryLane);break;case 19:m=i.stateNode;break;case 22:m=i.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(l),tN(i,d)}function pI(i,l){return ct(i,l)}var Yp=null,Qh=null,yb=!1,Xp=!1,bb=!1,Cu=0;function Gl(i){i!==Qh&&i.next===null&&(Qh===null?Yp=Qh=i:Qh=Qh.next=i),Xp=!0,yb||(yb=!0,yI())}function Um(i,l){if(!bb&&Xp){bb=!0;do for(var d=!1,m=Yp;m!==null;){if(i!==0){var w=m.pendingLanes;if(w===0)var _=0;else{var U=m.suspendedLanes,X=m.pingedLanes;_=(1<<31-an(42|i)+1)-1,_&=w&~(U&~X),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(d=!0,aN(m,_))}else _=Rn,_=xn(m,m===Er?_:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(_&3)===0||qs(m,_)||(d=!0,aN(m,_));m=m.next}while(d);bb=!1}}function xI(){nN()}function nN(){Xp=yb=!1;var i=0;Cu!==0&&TI()&&(i=Cu);for(var l=sn(),d=null,m=Yp;m!==null;){var w=m.next,_=rN(m,l);_===0?(m.next=null,d===null?Yp=w:d.next=w,w===null&&(Qh=d)):(d=m,(i!==0||(_&3)!==0)&&(Xp=!0)),m=w}ta!==0&&ta!==5||Um(i),Cu!==0&&(Cu=0)}function rN(i,l){for(var d=i.suspendedLanes,m=i.pingedLanes,w=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var U=31-an(_),X=1<<U,fe=w[U];fe===-1?((X&d)===0||(X&m)!==0)&&(w[U]=As(X,l)):fe<=l&&(i.expiredLanes|=X),_&=~X}if(l=Er,d=Rn,d=xn(i,i===l?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m=i.callbackNode,d===0||i===l&&(lr===2||lr===9)||i.cancelPendingCommit!==null)return m!==null&&m!==null&&lt(m),i.callbackNode=null,i.callbackPriority=0;if((d&3)===0||qs(i,d)){if(l=d&-d,l===i.callbackPriority)return l;switch(m!==null&&lt(m),mr(d)){case 2:case 8:d=pn;break;case 32:d=on;break;case 268435456:d=en;break;default:d=on}return m=sN.bind(null,i),d=ct(d,m),i.callbackPriority=l,i.callbackNode=d,l}return m!==null&&m!==null&&lt(m),i.callbackPriority=2,i.callbackNode=null,2}function sN(i,l){if(ta!==0&&ta!==5)return i.callbackNode=null,i.callbackPriority=0,null;var d=i.callbackNode;if(Kp()&&i.callbackNode!==d)return null;var m=Rn;return m=xn(i,i===Er?m:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m===0?null:(U5(i,m,l),rN(i,sn()),i.callbackNode!=null&&i.callbackNode===d?sN.bind(null,i):null)}function aN(i,l){if(Kp())return null;U5(i,l,!0)}function yI(){II(function(){(er&6)!==0?ct(Qt,xI):nN()})}function vb(){if(Cu===0){var i=p;i===0&&(i=qt,qt<<=1,(qt&261888)===0&&(qt=256)),Cu=i}return Cu}function iN(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:da(""+i)}function oN(i,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,i.id&&d.setAttribute("form",i.id),l.parentNode.insertBefore(d,l),i=new FormData(i),d.parentNode.removeChild(d),i}function bI(i,l,d,m,w){if(l==="submit"&&d&&d.stateNode===w){var _=iN((w[ar]||null).action),U=m.submitter;U&&(l=(l=U[ar]||null)?iN(l.formAction):U.getAttribute("formAction"),l!==null&&(_=l,U=null));var X=new Is("action","action",null,m,w);i.push({event:X,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Cu!==0){var fe=U?oN(w,U):new FormData(w);Vy(d,{pending:!0,data:fe,method:w.method,action:_},null,fe)}}else typeof _=="function"&&(X.preventDefault(),fe=U?oN(w,U):new FormData(w),Vy(d,{pending:!0,data:fe,method:w.method,action:_},_,fe))},currentTarget:w}]})}}for(var wb=0;wb<bc.length;wb++){var Nb=bc[wb],vI=Nb.toLowerCase(),wI=Nb[0].toUpperCase()+Nb.slice(1);Si(vI,"on"+wI)}Si(yc,"onAnimationEnd"),Si(bd,"onAnimationIteration"),Si(mm,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si(wp,"onTransitionRun"),Si(Np,"onTransitionStart"),Si(jp,"onTransitionCancel"),Si(gm,"onTransitionEnd"),si("onMouseEnter",["mouseout","mouseover"]),si("onMouseLeave",["mouseout","mouseover"]),si("onPointerEnter",["pointerout","pointerover"]),si("onPointerLeave",["pointerout","pointerover"]),Va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Va("onBeforeInput",["compositionend","keypress","textInput","paste"]),Va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vm));function lN(i,l){l=(l&4)!==0;for(var d=0;d<i.length;d++){var m=i[d],w=m.event;m=m.listeners;e:{var _=void 0;if(l)for(var U=m.length-1;0<=U;U--){var X=m[U],fe=X.instance,ke=X.currentTarget;if(X=X.listener,fe!==_&&w.isPropagationStopped())break e;_=X,w.currentTarget=ke;try{_(w)}catch(Be){vd(Be)}w.currentTarget=null,_=fe}else for(U=0;U<m.length;U++){if(X=m[U],fe=X.instance,ke=X.currentTarget,X=X.listener,fe!==_&&w.isPropagationStopped())break e;_=X,w.currentTarget=ke;try{_(w)}catch(Be){vd(Be)}w.currentTarget=null,_=fe}}}}function In(i,l){var d=l[la];d===void 0&&(d=l[la]=new Set);var m=i+"__bubble";d.has(m)||(cN(l,i,2,!1),d.add(m))}function jb(i,l,d){var m=0;l&&(m|=4),cN(d,i,m,l)}var Qp="_reactListening"+Math.random().toString(36).slice(2);function _b(i){if(!i[Qp]){i[Qp]=!0,jl.forEach(function(d){d!=="selectionchange"&&(NI.has(d)||jb(d,!1,i),jb(d,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[Qp]||(l[Qp]=!0,jb("selectionchange",!1,l))}}function cN(i,l,d,m){switch(FN(l)){case 2:var w=XI;break;case 8:w=QI;break;default:w=Ub}d=w.bind(null,l,d,i),w=void 0,!Ko||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(w=!0),m?w!==void 0?i.addEventListener(l,d,{capture:!0,passive:w}):i.addEventListener(l,d,!0):w!==void 0?i.addEventListener(l,d,{passive:w}):i.addEventListener(l,d,!1)}function Sb(i,l,d,m,w){var _=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var U=m.tag;if(U===3||U===4){var X=m.stateNode.containerInfo;if(X===w)break;if(U===4)for(U=m.return;U!==null;){var fe=U.tag;if((fe===3||fe===4)&&U.stateNode.containerInfo===w)return;U=U.return}for(;X!==null;){if(U=ja(X),U===null)return;if(fe=U.tag,fe===5||fe===6||fe===26||fe===27){m=_=U;continue e}X=X.parentNode}}m=m.return}No(function(){var ke=_,Be=ha(d),We=[];e:{var De=pm.get(i);if(De!==void 0){var Me=Is,pt=i;switch(i){case"keypress":if(Aa(d)===0)break e;case"keydown":case"keyup":Me=En;break;case"focusin":pt="focus",Me=oi;break;case"focusout":pt="blur",Me=oi;break;case"beforeblur":case"afterblur":Me=oi;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=Cl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=ji;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=R;break;case yc:case bd:case mm:Me=A;break;case gm:Me=Z;break;case"scroll":case"scrollend":Me=jo;break;case"wheel":Me=Pe;break;case"copy":case"cut":case"paste":Me=le;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=rr;break;case"toggle":case"beforetoggle":Me=Zt}var Yt=(l&4)!==0,wr=!Yt&&(i==="scroll"||i==="scrollend"),je=Yt?De!==null?De+"Capture":null:De;Yt=[];for(var ye=ke,Ie;ye!==null;){var $e=ye;if(Ie=$e.stateNode,$e=$e.tag,$e!==5&&$e!==26&&$e!==27||Ie===null||je===null||($e=xs(ye,je),$e!=null&&Yt.push(Bm(ye,$e,Ie))),wr)break;ye=ye.return}0<Yt.length&&(De=new Me(De,pt,null,d,Be),We.push({event:De,listeners:Yt}))}}if((l&7)===0){e:{if(De=i==="mouseover"||i==="pointerover",Me=i==="mouseout"||i==="pointerout",De&&d!==Ji&&(pt=d.relatedTarget||d.fromElement)&&(ja(pt)||pt[rs]))break e;if((Me||De)&&(De=Be.window===Be?Be:(De=Be.ownerDocument)?De.defaultView||De.parentWindow:window,Me?(pt=d.relatedTarget||d.toElement,Me=ke,pt=pt?ja(pt):null,pt!==null&&(wr=o(pt),Yt=pt.tag,pt!==wr||Yt!==5&&Yt!==27&&Yt!==6)&&(pt=null)):(Me=null,pt=ke),Me!==pt)){if(Yt=Cl,$e="onMouseLeave",je="onMouseEnter",ye="mouse",(i==="pointerout"||i==="pointerover")&&(Yt=rr,$e="onPointerLeave",je="onPointerEnter",ye="pointer"),wr=Me==null?De:_a(Me),Ie=pt==null?De:_a(pt),De=new Yt($e,ye+"leave",Me,d,Be),De.target=wr,De.relatedTarget=Ie,$e=null,ja(Be)===ke&&(Yt=new Yt(je,ye+"enter",pt,d,Be),Yt.target=Ie,Yt.relatedTarget=wr,$e=Yt),wr=$e,Me&&pt)t:{for(Yt=jI,je=Me,ye=pt,Ie=0,$e=je;$e;$e=Yt($e))Ie++;$e=0;for(var Bt=ye;Bt;Bt=Yt(Bt))$e++;for(;0<Ie-$e;)je=Yt(je),Ie--;for(;0<$e-Ie;)ye=Yt(ye),$e--;for(;Ie--;){if(je===ye||ye!==null&&je===ye.alternate){Yt=je;break t}je=Yt(je),ye=Yt(ye)}Yt=null}else Yt=null;Me!==null&&uN(We,De,Me,Yt,!1),pt!==null&&wr!==null&&uN(We,wr,pt,Yt,!0)}}e:{if(De=ke?_a(ke):window,Me=De.nodeName&&De.nodeName.toLowerCase(),Me==="select"||Me==="input"&&De.type==="file")var Yn=kl;else if(xd(De))if(qa)Yn=To;else{Yn=Kr;var _t=uu}else Me=De.nodeName,!Me||Me.toLowerCase()!=="input"||De.type!=="checkbox"&&De.type!=="radio"?ke&&El(ke.elementType)&&(Yn=kl):Yn=Nh;if(Yn&&(Yn=Yn(i,ke))){ci(We,Yn,d,Be);break e}_t&&_t(i,De,ke),i==="focusout"&&ke&&De.type==="number"&&ke.memoizedProps.value!=null&&dc(De,"number",De.value)}switch(_t=ke?_a(ke):window,i){case"focusin":(xd(_t)||_t.contentEditable==="true")&&(ui=_t,rl=ke,fa=null);break;case"focusout":fa=rl=ui=null;break;case"mousedown":_i=!0;break;case"contextmenu":case"mouseup":case"dragend":_i=!1,qn(We,d,Be);break;case"selectionchange":if(xc)break;case"keydown":case"keyup":qn(We,d,Be)}var yn;if(bn)e:{switch(i){case"compositionstart":var Pn="onCompositionStart";break e;case"compositionend":Pn="onCompositionEnd";break e;case"compositionupdate":Pn="onCompositionUpdate";break e}Pn=void 0}else So?li(i,d)&&(Pn="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(Pn="onCompositionStart");Pn&&(Ws&&d.locale!=="ko"&&(So||Pn!=="onCompositionStart"?Pn==="onCompositionEnd"&&So&&(yn=gc()):(Ea=Be,Yo="value"in Ea?Ea.value:Ea.textContent,So=!0)),_t=Jp(ke,Pn),0<_t.length&&(Pn=new we(Pn,i,null,d,Be),We.push({event:Pn,listeners:_t}),yn?Pn.data=yn:(yn=_o(d),yn!==null&&(Pn.data=yn)))),(yn=ks?Ia(i,d):Qo(i,d))&&(Pn=Jp(ke,"onBeforeInput"),0<Pn.length&&(_t=new we("onBeforeInput","beforeinput",null,d,Be),We.push({event:_t,listeners:Pn}),_t.data=yn)),bI(We,i,ke,d,Be)}lN(We,l)})}function Bm(i,l,d){return{instance:i,listener:l,currentTarget:d}}function Jp(i,l){for(var d=l+"Capture",m=[];i!==null;){var w=i,_=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||_===null||(w=xs(i,d),w!=null&&m.unshift(Bm(i,w,_)),w=xs(i,l),w!=null&&m.push(Bm(i,w,_))),i.tag===3)return m;i=i.return}return[]}function jI(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function uN(i,l,d,m,w){for(var _=l._reactName,U=[];d!==null&&d!==m;){var X=d,fe=X.alternate,ke=X.stateNode;if(X=X.tag,fe!==null&&fe===m)break;X!==5&&X!==26&&X!==27||ke===null||(fe=ke,w?(ke=xs(d,_),ke!=null&&U.unshift(Bm(d,ke,fe))):w||(ke=xs(d,_),ke!=null&&U.push(Bm(d,ke,fe)))),d=d.return}U.length!==0&&i.push({event:l,listeners:U})}var _I=/\r\n?/g,SI=/\u0000|\uFFFD/g;function dN(i){return(typeof i=="string"?i:""+i).replace(_I,`
`).replace(SI,"")}function hN(i,l){return l=dN(l),dN(i)===l}function vr(i,l,d,m,w,_){switch(d){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||ps(i,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&ps(i,""+m);break;case"className":Cs(i,"class",m);break;case"tabIndex":Cs(i,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Cs(i,d,m);break;case"style":mc(i,m,_);break;case"data":if(l!=="object"){Cs(i,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||d!=="href")){i.removeAttribute(d);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(d);break}m=da(""+m),i.setAttribute(d,m);break;case"action":case"formAction":if(typeof m=="function"){i.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(d==="formAction"?(l!=="input"&&vr(i,l,"name",w.name,w,null),vr(i,l,"formEncType",w.formEncType,w,null),vr(i,l,"formMethod",w.formMethod,w,null),vr(i,l,"formTarget",w.formTarget,w,null)):(vr(i,l,"encType",w.encType,w,null),vr(i,l,"method",w.method,w,null),vr(i,l,"target",w.target,w,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(d);break}m=da(""+m),i.setAttribute(d,m);break;case"onClick":m!=null&&(i.onclick=ai);break;case"onScroll":m!=null&&In("scroll",i);break;case"onScrollEnd":m!=null&&In("scrollend",i);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(w.children!=null)throw Error(r(60));i.innerHTML=d}}break;case"multiple":i.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":i.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){i.removeAttribute("xlink:href");break}d=da(""+m),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(d,""+m):i.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(d,""):i.removeAttribute(d);break;case"capture":case"download":m===!0?i.setAttribute(d,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(d,m):i.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?i.setAttribute(d,m):i.removeAttribute(d);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?i.removeAttribute(d):i.setAttribute(d,m);break;case"popover":In("beforetoggle",i),In("toggle",i),Sa(i,"popover",m);break;case"xlinkActuate":Or(i,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Or(i,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Or(i,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Or(i,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Or(i,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Or(i,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Or(i,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Or(i,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Or(i,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Sa(i,"is",m);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=Al.get(d)||d,Sa(i,d,m))}}function Eb(i,l,d,m,w,_){switch(d){case"style":mc(i,m,_);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(w.children!=null)throw Error(r(60));i.innerHTML=d}}break;case"children":typeof m=="string"?ps(i,m):(typeof m=="number"||typeof m=="bigint")&&ps(i,""+m);break;case"onScroll":m!=null&&In("scroll",i);break;case"onScrollEnd":m!=null&&In("scrollend",i);break;case"onClick":m!=null&&(i.onclick=ai);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ua.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(w=d.endsWith("Capture"),l=d.slice(2,w?d.length-7:void 0),_=i[ar]||null,_=_!=null?_[d]:null,typeof _=="function"&&i.removeEventListener(l,_,w),typeof m=="function")){typeof _!="function"&&_!==null&&(d in i?i[d]=null:i.hasAttribute(d)&&i.removeAttribute(d)),i.addEventListener(l,m,w);break e}d in i?i[d]=m:m===!0?i.setAttribute(d,""):Sa(i,d,m)}}}function Da(i,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":In("error",i),In("load",i);var m=!1,w=!1,_;for(_ in d)if(d.hasOwnProperty(_)){var U=d[_];if(U!=null)switch(_){case"src":m=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:vr(i,l,_,U,d,null)}}w&&vr(i,l,"srcSet",d.srcSet,d,null),m&&vr(i,l,"src",d.src,d,null);return;case"input":In("invalid",i);var X=_=U=w=null,fe=null,ke=null;for(m in d)if(d.hasOwnProperty(m)){var Be=d[m];if(Be!=null)switch(m){case"name":w=Be;break;case"type":U=Be;break;case"checked":fe=Be;break;case"defaultChecked":ke=Be;break;case"value":_=Be;break;case"defaultValue":X=Be;break;case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(r(137,l));break;default:vr(i,l,m,Be,d,null)}}ou(i,_,X,fe,ke,U,w,!1);return;case"select":In("invalid",i),m=U=_=null;for(w in d)if(d.hasOwnProperty(w)&&(X=d[w],X!=null))switch(w){case"value":_=X;break;case"defaultValue":U=X;break;case"multiple":m=X;default:vr(i,l,w,X,d,null)}l=_,d=U,i.multiple=!!m,l!=null?$s(i,!!m,l,!1):d!=null&&$s(i,!!m,d,!0);return;case"textarea":In("invalid",i),_=w=m=null;for(U in d)if(d.hasOwnProperty(U)&&(X=d[U],X!=null))switch(U){case"value":m=X;break;case"defaultValue":w=X;break;case"children":_=X;break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(91));break;default:vr(i,l,U,X,d,null)}Xi(i,m,w,_);return;case"option":for(fe in d)if(d.hasOwnProperty(fe)&&(m=d[fe],m!=null))switch(fe){case"selected":i.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:vr(i,l,fe,m,d,null)}return;case"dialog":In("beforetoggle",i),In("toggle",i),In("cancel",i),In("close",i);break;case"iframe":case"object":In("load",i);break;case"video":case"audio":for(m=0;m<Vm.length;m++)In(Vm[m],i);break;case"image":In("error",i),In("load",i);break;case"details":In("toggle",i);break;case"embed":case"source":case"link":In("error",i),In("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ke in d)if(d.hasOwnProperty(ke)&&(m=d[ke],m!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:vr(i,l,ke,m,d,null)}return;default:if(El(l)){for(Be in d)d.hasOwnProperty(Be)&&(m=d[Be],m!==void 0&&Eb(i,l,Be,m,d,void 0));return}}for(X in d)d.hasOwnProperty(X)&&(m=d[X],m!=null&&vr(i,l,X,m,d,null))}function EI(i,l,d,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,_=null,U=null,X=null,fe=null,ke=null,Be=null;for(Me in d){var We=d[Me];if(d.hasOwnProperty(Me)&&We!=null)switch(Me){case"checked":break;case"value":break;case"defaultValue":fe=We;default:m.hasOwnProperty(Me)||vr(i,l,Me,null,m,We)}}for(var De in m){var Me=m[De];if(We=d[De],m.hasOwnProperty(De)&&(Me!=null||We!=null))switch(De){case"type":_=Me;break;case"name":w=Me;break;case"checked":ke=Me;break;case"defaultChecked":Be=Me;break;case"value":U=Me;break;case"defaultValue":X=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(r(137,l));break;default:Me!==We&&vr(i,l,De,Me,m,We)}}$o(i,U,X,fe,ke,Be,_,w);return;case"select":Me=U=X=De=null;for(_ in d)if(fe=d[_],d.hasOwnProperty(_)&&fe!=null)switch(_){case"value":break;case"multiple":Me=fe;default:m.hasOwnProperty(_)||vr(i,l,_,null,m,fe)}for(w in m)if(_=m[w],fe=d[w],m.hasOwnProperty(w)&&(_!=null||fe!=null))switch(w){case"value":De=_;break;case"defaultValue":X=_;break;case"multiple":U=_;default:_!==fe&&vr(i,l,w,_,m,fe)}l=X,d=U,m=Me,De!=null?$s(i,!!d,De,!1):!!m!=!!d&&(l!=null?$s(i,!!d,l,!0):$s(i,!!d,d?[]:"",!1));return;case"textarea":Me=De=null;for(X in d)if(w=d[X],d.hasOwnProperty(X)&&w!=null&&!m.hasOwnProperty(X))switch(X){case"value":break;case"children":break;default:vr(i,l,X,null,m,w)}for(U in m)if(w=m[U],_=d[U],m.hasOwnProperty(U)&&(w!=null||_!=null))switch(U){case"value":De=w;break;case"defaultValue":Me=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:w!==_&&vr(i,l,U,w,m,_)}hc(i,De,Me);return;case"option":for(var pt in d)if(De=d[pt],d.hasOwnProperty(pt)&&De!=null&&!m.hasOwnProperty(pt))switch(pt){case"selected":i.selected=!1;break;default:vr(i,l,pt,null,m,De)}for(fe in m)if(De=m[fe],Me=d[fe],m.hasOwnProperty(fe)&&De!==Me&&(De!=null||Me!=null))switch(fe){case"selected":i.selected=De&&typeof De!="function"&&typeof De!="symbol";break;default:vr(i,l,fe,De,m,Me)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Yt in d)De=d[Yt],d.hasOwnProperty(Yt)&&De!=null&&!m.hasOwnProperty(Yt)&&vr(i,l,Yt,null,m,De);for(ke in m)if(De=m[ke],Me=d[ke],m.hasOwnProperty(ke)&&De!==Me&&(De!=null||Me!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(r(137,l));break;default:vr(i,l,ke,De,m,Me)}return;default:if(El(l)){for(var wr in d)De=d[wr],d.hasOwnProperty(wr)&&De!==void 0&&!m.hasOwnProperty(wr)&&Eb(i,l,wr,void 0,m,De);for(Be in m)De=m[Be],Me=d[Be],!m.hasOwnProperty(Be)||De===Me||De===void 0&&Me===void 0||Eb(i,l,Be,De,m,Me);return}}for(var je in d)De=d[je],d.hasOwnProperty(je)&&De!=null&&!m.hasOwnProperty(je)&&vr(i,l,je,null,m,De);for(We in m)De=m[We],Me=d[We],!m.hasOwnProperty(We)||De===Me||De==null&&Me==null||vr(i,l,We,De,m,Me)}function fN(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function AI(){if(typeof performance.getEntriesByType=="function"){for(var i=0,l=0,d=performance.getEntriesByType("resource"),m=0;m<d.length;m++){var w=d[m],_=w.transferSize,U=w.initiatorType,X=w.duration;if(_&&X&&fN(U)){for(U=0,X=w.responseEnd,m+=1;m<d.length;m++){var fe=d[m],ke=fe.startTime;if(ke>X)break;var Be=fe.transferSize,We=fe.initiatorType;Be&&fN(We)&&(fe=fe.responseEnd,U+=Be*(fe<X?1:(X-ke)/(fe-ke)))}if(--m,l+=8*(_+U)/(w.duration/1e3),i++,10<i)break}}if(0<i)return l/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Ab=null,Tb=null;function Zp(i){return i.nodeType===9?i:i.ownerDocument}function mN(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gN(i,l){if(i===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&l==="foreignObject"?0:i}function Cb(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Ib=null;function TI(){var i=window.event;return i&&i.type==="popstate"?i===Ib?!1:(Ib=i,!0):(Ib=null,!1)}var pN=typeof setTimeout=="function"?setTimeout:void 0,CI=typeof clearTimeout=="function"?clearTimeout:void 0,xN=typeof Promise=="function"?Promise:void 0,II=typeof queueMicrotask=="function"?queueMicrotask:typeof xN<"u"?function(i){return xN.resolve(null).then(i).catch(kI)}:pN;function kI(i){setTimeout(function(){throw i})}function Iu(i){return i==="head"}function yN(i,l){var d=l,m=0;do{var w=d.nextSibling;if(i.removeChild(d),w&&w.nodeType===8)if(d=w.data,d==="/$"||d==="/&"){if(m===0){i.removeChild(w),tf(l);return}m--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")m++;else if(d==="html")zm(i.ownerDocument.documentElement);else if(d==="head"){d=i.ownerDocument.head,zm(d);for(var _=d.firstChild;_;){var U=_.nextSibling,X=_.nodeName;_[ca]||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&_.rel.toLowerCase()==="stylesheet"||d.removeChild(_),_=U}}else d==="body"&&zm(i.ownerDocument.body);d=w}while(d);tf(l)}function bN(i,l){var d=i;i=0;do{var m=d.nextSibling;if(d.nodeType===1?l?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(l?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),m&&m.nodeType===8)if(d=m.data,d==="/$"){if(i===0)break;i--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||i++;d=m}while(d)}function kb(i){var l=i.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":kb(d),Ki(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}i.removeChild(d)}}function RI(i,l,d,m){for(;i.nodeType===1;){var w=d;if(i.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(m){if(!i[ca])switch(l){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==w.rel||i.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||i.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||i.getAttribute("title")!==(w.title==null?null:w.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(w.src==null?null:w.src)||i.getAttribute("type")!==(w.type==null?null:w.type)||i.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(l==="input"&&i.type==="hidden"){var _=w.name==null?null:""+w.name;if(w.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Do(i.nextSibling),i===null)break}return null}function PI(i,l,d){if(l==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!d||(i=Do(i.nextSibling),i===null))return null;return i}function vN(i,l){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Do(i.nextSibling),i===null))return null;return i}function Rb(i){return i.data==="$?"||i.data==="$~"}function Pb(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function LI(i,l){var d=i.ownerDocument;if(i.data==="$~")i._reactRetry=l;else if(i.data!=="$?"||d.readyState!=="loading")l();else{var m=function(){l(),d.removeEventListener("DOMContentLoaded",m)};d.addEventListener("DOMContentLoaded",m),i._reactRetry=m}}function Do(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return i}var Lb=null;function wN(i){i=i.nextSibling;for(var l=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"||d==="/&"){if(l===0)return Do(i.nextSibling);l--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||l++}i=i.nextSibling}return null}function NN(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(l===0)return i;l--}else d!=="/$"&&d!=="/&"||l++}i=i.previousSibling}return null}function jN(i,l,d){switch(l=Zp(d),i){case"html":if(i=l.documentElement,!i)throw Error(r(452));return i;case"head":if(i=l.head,!i)throw Error(r(453));return i;case"body":if(i=l.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function zm(i){for(var l=i.attributes;l.length;)i.removeAttributeNode(l[0]);Ki(i)}var Mo=new Map,_N=new Set;function e0(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Dc=pe.d;pe.d={f:DI,r:MI,D:OI,C:FI,L:UI,m:VI,X:zI,S:BI,M:qI};function DI(){var i=Dc.f(),l=Hp();return i||l}function MI(i){var l=Hs(i);l!==null&&l.tag===5&&l.type==="form"?Bw(l):Dc.r(i)}var Jh=typeof document>"u"?null:document;function SN(i,l,d){var m=Jh;if(m&&typeof l=="string"&&l){var w=Fr(l);w='link[rel="'+i+'"][href="'+w+'"]',typeof d=="string"&&(w+='[crossorigin="'+d+'"]'),_N.has(w)||(_N.add(w),i={rel:i,crossOrigin:d,href:l},m.querySelector(w)===null&&(l=m.createElement("link"),Da(l,"link",i),Ir(l),m.head.appendChild(l)))}}function OI(i){Dc.D(i),SN("dns-prefetch",i,null)}function FI(i,l){Dc.C(i,l),SN("preconnect",i,l)}function UI(i,l,d){Dc.L(i,l,d);var m=Jh;if(m&&i&&l){var w='link[rel="preload"][as="'+Fr(l)+'"]';l==="image"&&d&&d.imageSrcSet?(w+='[imagesrcset="'+Fr(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(w+='[imagesizes="'+Fr(d.imageSizes)+'"]')):w+='[href="'+Fr(i)+'"]';var _=w;switch(l){case"style":_=Zh(i);break;case"script":_=ef(i)}Mo.has(_)||(i=x({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:i,as:l},d),Mo.set(_,i),m.querySelector(w)!==null||l==="style"&&m.querySelector(qm(_))||l==="script"&&m.querySelector(Gm(_))||(l=m.createElement("link"),Da(l,"link",i),Ir(l),m.head.appendChild(l)))}}function VI(i,l){Dc.m(i,l);var d=Jh;if(d&&i){var m=l&&typeof l.as=="string"?l.as:"script",w='link[rel="modulepreload"][as="'+Fr(m)+'"][href="'+Fr(i)+'"]',_=w;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ef(i)}if(!Mo.has(_)&&(i=x({rel:"modulepreload",href:i},l),Mo.set(_,i),d.querySelector(w)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Gm(_)))return}m=d.createElement("link"),Da(m,"link",i),Ir(m),d.head.appendChild(m)}}}function BI(i,l,d){Dc.S(i,l,d);var m=Jh;if(m&&i){var w=Ua(m).hoistableStyles,_=Zh(i);l=l||"default";var U=w.get(_);if(!U){var X={loading:0,preload:null};if(U=m.querySelector(qm(_)))X.loading=5;else{i=x({rel:"stylesheet",href:i,"data-precedence":l},d),(d=Mo.get(_))&&Db(i,d);var fe=U=m.createElement("link");Ir(fe),Da(fe,"link",i),fe._p=new Promise(function(ke,Be){fe.onload=ke,fe.onerror=Be}),fe.addEventListener("load",function(){X.loading|=1}),fe.addEventListener("error",function(){X.loading|=2}),X.loading|=4,t0(U,l,m)}U={type:"stylesheet",instance:U,count:1,state:X},w.set(_,U)}}}function zI(i,l){Dc.X(i,l);var d=Jh;if(d&&i){var m=Ua(d).hoistableScripts,w=ef(i),_=m.get(w);_||(_=d.querySelector(Gm(w)),_||(i=x({src:i,async:!0},l),(l=Mo.get(w))&&Mb(i,l),_=d.createElement("script"),Ir(_),Da(_,"link",i),d.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(w,_))}}function qI(i,l){Dc.M(i,l);var d=Jh;if(d&&i){var m=Ua(d).hoistableScripts,w=ef(i),_=m.get(w);_||(_=d.querySelector(Gm(w)),_||(i=x({src:i,async:!0,type:"module"},l),(l=Mo.get(w))&&Mb(i,l),_=d.createElement("script"),Ir(_),Da(_,"link",i),d.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(w,_))}}function EN(i,l,d,m){var w=(w=me.current)?e0(w):null;if(!w)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=Zh(d.href),d=Ua(w).hoistableStyles,m=d.get(l),m||(m={type:"style",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){i=Zh(d.href);var _=Ua(w).hoistableStyles,U=_.get(i);if(U||(w=w.ownerDocument||w,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,U),(_=w.querySelector(qm(i)))&&!_._p&&(U.instance=_,U.state.loading=5),Mo.has(i)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Mo.set(i,d),_||GI(w,i,d,U.state))),l&&m===null)throw Error(r(528,""));return U}if(l&&m!==null)throw Error(r(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=ef(d),d=Ua(w).hoistableScripts,m=d.get(l),m||(m={type:"script",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Zh(i){return'href="'+Fr(i)+'"'}function qm(i){return'link[rel="stylesheet"]['+i+"]"}function AN(i){return x({},i,{"data-precedence":i.precedence,precedence:null})}function GI(i,l,d,m){i.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=i.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),Da(l,"link",d),Ir(l),i.head.appendChild(l))}function ef(i){return'[src="'+Fr(i)+'"]'}function Gm(i){return"script[async]"+i}function TN(i,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var m=i.querySelector('style[data-href~="'+Fr(d.href)+'"]');if(m)return l.instance=m,Ir(m),m;var w=x({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return m=(i.ownerDocument||i).createElement("style"),Ir(m),Da(m,"style",w),t0(m,d.precedence,i),l.instance=m;case"stylesheet":w=Zh(d.href);var _=i.querySelector(qm(w));if(_)return l.state.loading|=4,l.instance=_,Ir(_),_;m=AN(d),(w=Mo.get(w))&&Db(m,w),_=(i.ownerDocument||i).createElement("link"),Ir(_);var U=_;return U._p=new Promise(function(X,fe){U.onload=X,U.onerror=fe}),Da(_,"link",m),l.state.loading|=4,t0(_,d.precedence,i),l.instance=_;case"script":return _=ef(d.src),(w=i.querySelector(Gm(_)))?(l.instance=w,Ir(w),w):(m=d,(w=Mo.get(_))&&(m=x({},d),Mb(m,w)),i=i.ownerDocument||i,w=i.createElement("script"),Ir(w),Da(w,"link",m),i.head.appendChild(w),l.instance=w);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,t0(m,d.precedence,i));return l.instance}function t0(i,l,d){for(var m=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=m.length?m[m.length-1]:null,_=w,U=0;U<m.length;U++){var X=m[U];if(X.dataset.precedence===l)_=X;else if(_!==w)break}_?_.parentNode.insertBefore(i,_.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(i,l.firstChild))}function Db(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.title==null&&(i.title=l.title)}function Mb(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.integrity==null&&(i.integrity=l.integrity)}var n0=null;function CN(i,l,d){if(n0===null){var m=new Map,w=n0=new Map;w.set(d,m)}else w=n0,m=w.get(d),m||(m=new Map,w.set(d,m));if(m.has(i))return m;for(m.set(i,null),d=d.getElementsByTagName(i),w=0;w<d.length;w++){var _=d[w];if(!(_[ca]||_[$n]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var U=_.getAttribute(l)||"";U=i+U;var X=m.get(U);X?X.push(_):m.set(U,[_])}}return m}function IN(i,l,d){i=i.ownerDocument||i,i.head.insertBefore(d,l==="title"?i.querySelector("head > title"):null)}function HI(i,l,d){if(d===1||l.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return i=l.disabled,typeof l.precedence=="string"&&i==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function kN(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function $I(i,l,d,m){if(d.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var w=Zh(m.href),_=l.querySelector(qm(w));if(_){l=_._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(i.count++,i=r0.bind(i),l.then(i,i)),d.state.loading|=4,d.instance=_,Ir(_);return}_=l.ownerDocument||l,m=AN(m),(w=Mo.get(w))&&Db(m,w),_=_.createElement("link"),Ir(_);var U=_;U._p=new Promise(function(X,fe){U.onload=X,U.onerror=fe}),Da(_,"link",m),d.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(i.count++,d=r0.bind(i),l.addEventListener("load",d),l.addEventListener("error",d))}}var Ob=0;function WI(i,l){return i.stylesheets&&i.count===0&&a0(i,i.stylesheets),0<i.count||0<i.imgCount?function(d){var m=setTimeout(function(){if(i.stylesheets&&a0(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+l);0<i.imgBytes&&Ob===0&&(Ob=62500*AI());var w=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&a0(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>Ob?50:800)+l);return i.unsuspend=d,function(){i.unsuspend=null,clearTimeout(m),clearTimeout(w)}}:null}function r0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)a0(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var s0=null;function a0(i,l){i.stylesheets=null,i.unsuspend!==null&&(i.count++,s0=new Map,l.forEach(KI,i),s0=null,r0.call(i))}function KI(i,l){if(!(l.state.loading&4)){var d=s0.get(i);if(d)var m=d.get(null);else{d=new Map,s0.set(i,d);for(var w=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<w.length;_++){var U=w[_];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(d.set(U.dataset.precedence,U),m=U)}m&&d.set(null,m)}w=l.instance,U=w.getAttribute("data-precedence"),_=d.get(U)||m,_===m&&d.set(null,w),d.set(U,w),this.count++,m=r0.bind(this),w.addEventListener("load",m),w.addEventListener("error",m),_?_.parentNode.insertBefore(w,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(w,i.firstChild)),l.state.loading|=4}}var Hm={$$typeof:O,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function YI(i,l,d,m,w,_,U,X,fe){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gs(0),this.hiddenUpdates=gs(null),this.identifierPrefix=m,this.onUncaughtError=w,this.onCaughtError=_,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=fe,this.incompleteTransitions=new Map}function RN(i,l,d,m,w,_,U,X,fe,ke,Be,We){return i=new YI(i,l,d,U,fe,ke,Be,We,X),l=1,_===!0&&(l|=24),_=ga(3,null,null,l),i.current=_,_.stateNode=i,l=yu(),l.refCount++,i.pooledCache=l,l.refCount++,_.memoizedState={element:m,isDehydrated:d,cache:l},rt(_),i}function PN(i){return i?(i=Xs,i):Xs}function LN(i,l,d,m,w,_){w=PN(w),m.context===null?m.context=w:m.pendingContext=w,m=Kt(l),m.payload={element:d},_=_===void 0?null:_,_!==null&&(m.callback=_),d=gn(i,m,l),d!==null&&(Fi(d,i,l),Jn(d,i,l))}function DN(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<l?d:l}}function Fb(i,l){DN(i,l),(i=i.alternate)&&DN(i,l)}function MN(i){if(i.tag===13||i.tag===31){var l=sl(i,67108864);l!==null&&Fi(l,i,67108864),Fb(i,67108864)}}function ON(i){if(i.tag===13||i.tag===31){var l=io();l=nr(l);var d=sl(i,l);d!==null&&Fi(d,i,l),Fb(i,l)}}var i0=!0;function XI(i,l,d,m){var w=ue.T;ue.T=null;var _=pe.p;try{pe.p=2,Ub(i,l,d,m)}finally{pe.p=_,ue.T=w}}function QI(i,l,d,m){var w=ue.T;ue.T=null;var _=pe.p;try{pe.p=8,Ub(i,l,d,m)}finally{pe.p=_,ue.T=w}}function Ub(i,l,d,m){if(i0){var w=Vb(m);if(w===null)Sb(i,l,m,o0,d),UN(i,m);else if(ZI(w,i,l,d,m))m.stopPropagation();else if(UN(i,m),l&4&&-1<JI.indexOf(i)){for(;w!==null;){var _=Hs(w);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var U=jt(_.pendingLanes);if(U!==0){var X=_;for(X.pendingLanes|=2,X.entangledLanes|=2;U;){var fe=1<<31-an(U);X.entanglements[1]|=fe,U&=~fe}Gl(_),(er&6)===0&&(qp=sn()+500,Um(0))}}break;case 31:case 13:X=sl(_,2),X!==null&&Fi(X,_,2),Hp(),Fb(_,2)}if(_=Vb(m),_===null&&Sb(i,l,m,o0,d),_===w)break;w=_}w!==null&&m.stopPropagation()}else Sb(i,l,m,null,d)}}function Vb(i){return i=ha(i),Bb(i)}var o0=null;function Bb(i){if(o0=null,i=ja(i),i!==null){var l=o(i);if(l===null)i=null;else{var d=l.tag;if(d===13){if(i=c(l),i!==null)return i;i=null}else if(d===31){if(i=u(l),i!==null)return i;i=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null)}}return o0=i,null}function FN(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(dn()){case Qt:return 2;case pn:return 8;case on:case wt:return 32;case en:return 268435456;default:return 32}default:return 32}}var zb=!1,ku=null,Ru=null,Pu=null,$m=new Map,Wm=new Map,Lu=[],JI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function UN(i,l){switch(i){case"focusin":case"focusout":ku=null;break;case"dragenter":case"dragleave":Ru=null;break;case"mouseover":case"mouseout":Pu=null;break;case"pointerover":case"pointerout":$m.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wm.delete(l.pointerId)}}function Km(i,l,d,m,w,_){return i===null||i.nativeEvent!==_?(i={blockedOn:l,domEventName:d,eventSystemFlags:m,nativeEvent:_,targetContainers:[w]},l!==null&&(l=Hs(l),l!==null&&MN(l)),i):(i.eventSystemFlags|=m,l=i.targetContainers,w!==null&&l.indexOf(w)===-1&&l.push(w),i)}function ZI(i,l,d,m,w){switch(l){case"focusin":return ku=Km(ku,i,l,d,m,w),!0;case"dragenter":return Ru=Km(Ru,i,l,d,m,w),!0;case"mouseover":return Pu=Km(Pu,i,l,d,m,w),!0;case"pointerover":var _=w.pointerId;return $m.set(_,Km($m.get(_)||null,i,l,d,m,w)),!0;case"gotpointercapture":return _=w.pointerId,Wm.set(_,Km(Wm.get(_)||null,i,l,d,m,w)),!0}return!1}function VN(i){var l=ja(i.target);if(l!==null){var d=o(l);if(d!==null){if(l=d.tag,l===13){if(l=c(d),l!==null){i.blockedOn=l,Gs(i.priority,function(){ON(d)});return}}else if(l===31){if(l=u(d),l!==null){i.blockedOn=l,Gs(i.priority,function(){ON(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function l0(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var d=Vb(i.nativeEvent);if(d===null){d=i.nativeEvent;var m=new d.constructor(d.type,d);Ji=m,d.target.dispatchEvent(m),Ji=null}else return l=Hs(d),l!==null&&MN(l),i.blockedOn=d,!1;l.shift()}return!0}function BN(i,l,d){l0(i)&&d.delete(l)}function e8(){zb=!1,ku!==null&&l0(ku)&&(ku=null),Ru!==null&&l0(Ru)&&(Ru=null),Pu!==null&&l0(Pu)&&(Pu=null),$m.forEach(BN),Wm.forEach(BN)}function c0(i,l){i.blockedOn===l&&(i.blockedOn=null,zb||(zb=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,e8)))}var u0=null;function zN(i){u0!==i&&(u0=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){u0===i&&(u0=null);for(var l=0;l<i.length;l+=3){var d=i[l],m=i[l+1],w=i[l+2];if(typeof m!="function"){if(Bb(m||d)===null)continue;break}var _=Hs(d);_!==null&&(i.splice(l,3),l-=3,Vy(_,{pending:!0,data:w,method:d.method,action:m},m,w))}}))}function tf(i){function l(fe){return c0(fe,i)}ku!==null&&c0(ku,i),Ru!==null&&c0(Ru,i),Pu!==null&&c0(Pu,i),$m.forEach(l),Wm.forEach(l);for(var d=0;d<Lu.length;d++){var m=Lu[d];m.blockedOn===i&&(m.blockedOn=null)}for(;0<Lu.length&&(d=Lu[0],d.blockedOn===null);)VN(d),d.blockedOn===null&&Lu.shift();if(d=(i.ownerDocument||i).$$reactFormReplay,d!=null)for(m=0;m<d.length;m+=3){var w=d[m],_=d[m+1],U=w[ar]||null;if(typeof _=="function")U||zN(d);else if(U){var X=null;if(_&&_.hasAttribute("formAction")){if(w=_,U=_[ar]||null)X=U.formAction;else if(Bb(w)!==null)continue}else X=U.action;typeof X=="function"?d[m+1]=X:(d.splice(m,3),m-=3),zN(d)}}}function qN(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(U){return w=U})},focusReset:"manual",scroll:"manual"})}function l(){w!==null&&(w(),w=null),m||setTimeout(d,20)}function d(){if(!m&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,w=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(d,100),function(){m=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),w!==null&&(w(),w=null)}}}function qb(i){this._internalRoot=i}d0.prototype.render=qb.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(r(409));var d=l.current,m=io();LN(d,m,i,l,null,null)},d0.prototype.unmount=qb.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;LN(i.current,2,null,i,null,null),Hp(),l[rs]=null}};function d0(i){this._internalRoot=i}d0.prototype.unstable_scheduleHydration=function(i){if(i){var l=ns();i={blockedOn:null,target:i,priority:l};for(var d=0;d<Lu.length&&l!==0&&l<Lu[d].priority;d++);Lu.splice(d,0,i),d===0&&VN(i)}};var GN=e.version;if(GN!=="19.2.0")throw Error(r(527,GN,"19.2.0"));pe.findDOMNode=function(i){var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=f(l),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var t8={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ue,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var h0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!h0.isDisabled&&h0.supportsFiber)try{ln=h0.inject(t8),Lt=h0}catch{}}return Xm.createRoot=function(i,l){if(!a(i))throw Error(r(299));var d=!1,m="",w=Qw,_=Jw,U=Zw;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(w=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(U=l.onRecoverableError)),l=RN(i,1,!1,null,null,d,m,null,w,_,U,qN),i[rs]=l.current,_b(i),new qb(l)},Xm.hydrateRoot=function(i,l,d){if(!a(i))throw Error(r(299));var m=!1,w="",_=Qw,U=Jw,X=Zw,fe=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(w=d.identifierPrefix),d.onUncaughtError!==void 0&&(_=d.onUncaughtError),d.onCaughtError!==void 0&&(U=d.onCaughtError),d.onRecoverableError!==void 0&&(X=d.onRecoverableError),d.formState!==void 0&&(fe=d.formState)),l=RN(i,1,!0,l,d??null,m,w,fe,_,U,X,qN),l.context=PN(null),d=l.current,m=io(),m=nr(m),w=Kt(m),w.callback=null,gn(d,w,m),d=m,l.current.lanes=d,Ct(l,d),Gl(l),i[rs]=l.current,_b(i),new d0(l)},Xm.version="19.2.0",Xm}var ej;function f8(){if(ej)return $b.exports;ej=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),$b.exports=h8(),$b.exports}var m8=f8();u3();function Tg(){return Tg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Tg.apply(this,arguments)}var Ku;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ku||(Ku={}));const tj="popstate";function g8(n){n===void 0&&(n={});function e(r,a){let{pathname:o,search:c,hash:u}=r.location;return z1("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:nx(a)}return x8(e,t,null,n)}function _s(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function X2(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function p8(){return Math.random().toString(36).substr(2,8)}function nj(n,e){return{usr:n.state,key:n.key,idx:e}}function z1(n,e,t,r){return t===void 0&&(t=null),Tg({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?rm(e):e,{state:t,key:e&&e.key||r||p8()})}function nx(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function rm(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function x8(n,e,t,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:o=!1}=r,c=a.history,u=Ku.Pop,h=null,f=g();f==null&&(f=0,c.replaceState(Tg({},c.state,{idx:f}),""));function g(){return(c.state||{idx:null}).idx}function x(){u=Ku.Pop;let j=g(),S=j==null?null:j-f;f=j,h&&h({action:u,location:E.location,delta:S})}function v(j,S){u=Ku.Push;let D=z1(E.location,j,S);f=g()+1;let O=nj(D,f),B=E.createHref(D);try{c.pushState(O,"",B)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;a.location.assign(B)}o&&h&&h({action:u,location:E.location,delta:1})}function b(j,S){u=Ku.Replace;let D=z1(E.location,j,S);f=g();let O=nj(D,f),B=E.createHref(D);c.replaceState(O,"",B),o&&h&&h({action:u,location:E.location,delta:0})}function T(j){let S=a.location.origin!=="null"?a.location.origin:a.location.href,D=typeof j=="string"?j:nx(j);return D=D.replace(/ $/,"%20"),_s(S,"No window.location.(origin|href) available to create URL for href: "+D),new URL(D,S)}let E={get action(){return u},get location(){return n(a,c)},listen(j){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(tj,x),h=j,()=>{a.removeEventListener(tj,x),h=null}},createHref(j){return e(a,j)},createURL:T,encodeLocation(j){let S=T(j);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:v,replace:b,go(j){return c.go(j)}};return E}var rj;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(rj||(rj={}));function y8(n,e,t){return t===void 0&&(t="/"),b8(n,e,t)}function b8(n,e,t,r){let a=typeof e=="string"?rm(e):e,o=Q2(a.pathname||"/",t);if(o==null)return null;let c=d3(n);v8(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let f=R8(o);u=C8(c[h],f)}return u}function d3(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let a=(o,c,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};h.relativePath.startsWith("/")&&(_s(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let f=Qu([r,h.relativePath]),g=t.concat(h);o.children&&o.children.length>0&&(_s(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),d3(o.children,e,g,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:A8(f,o.index),routesMeta:g})};return n.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))a(o,c);else for(let h of h3(o.path))a(o,c,h)}),e}function h3(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return a?[o,""]:[o];let c=h3(r.join("/")),u=[];return u.push(...c.map(h=>h===""?o:[o,h].join("/"))),a&&u.push(...c),u.map(h=>n.startsWith("/")&&h===""?"/":h)}function v8(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:T8(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const w8=/^:[\w-]+$/,N8=3,j8=2,_8=1,S8=10,E8=-2,sj=n=>n==="*";function A8(n,e){let t=n.split("/"),r=t.length;return t.some(sj)&&(r+=E8),e&&(r+=j8),t.filter(a=>!sj(a)).reduce((a,o)=>a+(w8.test(o)?N8:o===""?_8:S8),r)}function T8(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function C8(n,e,t){let{routesMeta:r}=n,a={},o="/",c=[];for(let u=0;u<r.length;++u){let h=r[u],f=u===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",x=I8({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),v=h.route;if(!x)return null;Object.assign(a,x.params),c.push({params:a,pathname:Qu([o,x.pathname]),pathnameBase:O8(Qu([o,x.pathnameBase])),route:v}),x.pathnameBase!=="/"&&(o=Qu([o,x.pathnameBase]))}return c}function I8(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=k8(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:r.reduce((f,g,x)=>{let{paramName:v,isOptional:b}=g;if(v==="*"){let E=u[x]||"";c=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const T=u[x];return b&&!T?f[v]=void 0:f[v]=(T||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:n}}function k8(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),X2(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function R8(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return X2(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Q2(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const P8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,L8=n=>P8.test(n);function D8(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?rm(n):n,o;if(t)if(L8(t))o=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),X2(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+t))}t.startsWith("/")?o=aj(t.substring(1),"/"):o=aj(t,e)}else o=e;return{pathname:o,search:F8(r),hash:U8(a)}}function aj(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Xb(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function M8(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function J2(n,e){let t=M8(n);return e?t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Z2(n,e,t,r){r===void 0&&(r=!1);let a;typeof n=="string"?a=rm(n):(a=Tg({},n),_s(!a.pathname||!a.pathname.includes("?"),Xb("?","pathname","search",a)),_s(!a.pathname||!a.pathname.includes("#"),Xb("#","pathname","hash",a)),_s(!a.search||!a.search.includes("#"),Xb("#","search","hash",a)));let o=n===""||a.pathname==="",c=o?"/":a.pathname,u;if(c==null)u=t;else{let x=e.length-1;if(!r&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),x-=1;a.pathname=v.join("/")}u=x>=0?e[x]:"/"}let h=D8(a,u),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}const Qu=n=>n.join("/").replace(/\/\/+/g,"/"),O8=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),F8=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,U8=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function V8(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const f3=["post","put","patch","delete"];new Set(f3);const B8=["get",...f3];new Set(B8);function Cg(){return Cg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Cg.apply(this,arguments)}const ev=W.createContext(null),z8=W.createContext(null),hd=W.createContext(null),Hx=W.createContext(null),ic=W.createContext({outlet:null,matches:[],isDataRoute:!1}),m3=W.createContext(null);function q8(n,e){let{relative:t}=e===void 0?{}:e;sm()||_s(!1);let{basename:r,navigator:a}=W.useContext(hd),{hash:o,pathname:c,search:u}=p3(n,{relative:t}),h=c;return r!=="/"&&(h=c==="/"?r:Qu([r,c])),a.createHref({pathname:h,search:u,hash:o})}function sm(){return W.useContext(Hx)!=null}function fd(){return sm()||_s(!1),W.useContext(Hx).location}function g3(n){W.useContext(hd).static||W.useLayoutEffect(n)}function Tr(){let{isDataRoute:n}=W.useContext(ic);return n?sk():G8()}function G8(){sm()||_s(!1);let n=W.useContext(ev),{basename:e,future:t,navigator:r}=W.useContext(hd),{matches:a}=W.useContext(ic),{pathname:o}=fd(),c=JSON.stringify(J2(a,t.v7_relativeSplatPath)),u=W.useRef(!1);return g3(()=>{u.current=!0}),W.useCallback(function(f,g){if(g===void 0&&(g={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let x=Z2(f,JSON.parse(c),o,g.relative==="path");n==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Qu([e,x.pathname])),(g.replace?r.replace:r.push)(x,g.state,g)},[e,r,c,o,n])}const H8=W.createContext(null);function $8(n){let e=W.useContext(ic).outlet;return e&&W.createElement(H8.Provider,{value:n},e)}function bl(){let{matches:n}=W.useContext(ic),e=n[n.length-1];return e?e.params:{}}function p3(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=W.useContext(hd),{matches:a}=W.useContext(ic),{pathname:o}=fd(),c=JSON.stringify(J2(a,r.v7_relativeSplatPath));return W.useMemo(()=>Z2(n,JSON.parse(c),o,t==="path"),[n,c,o,t])}function W8(n,e){return K8(n,e)}function K8(n,e,t,r){sm()||_s(!1);let{navigator:a}=W.useContext(hd),{matches:o}=W.useContext(ic),c=o[o.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let f=fd(),g;if(e){var x;let j=typeof e=="string"?rm(e):e;h==="/"||(x=j.pathname)!=null&&x.startsWith(h)||_s(!1),g=j}else g=f;let v=g.pathname||"/",b=v;if(h!=="/"){let j=h.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(j.length).join("/")}let T=y8(n,{pathname:b}),E=Z8(T&&T.map(j=>Object.assign({},j,{params:Object.assign({},u,j.params),pathname:Qu([h,a.encodeLocation?a.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?h:Qu([h,a.encodeLocation?a.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),o,t,r);return e&&E?W.createElement(Hx.Provider,{value:{location:Cg({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Ku.Pop}},E):E}function Y8(){let n=rk(),e=V8(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),t?W.createElement("pre",{style:a},t):null,null)}const X8=W.createElement(Y8,null);class Q8 extends W.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?W.createElement(ic.Provider,{value:this.props.routeContext},W.createElement(m3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function J8(n){let{routeContext:e,match:t,children:r}=n,a=W.useContext(ev);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),W.createElement(ic.Provider,{value:e},r)}function Z8(n,e,t,r){var a;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var o;if(!t)return null;if(t.errors)n=t.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,u=(a=t)==null?void 0:a.errors;if(u!=null){let g=c.findIndex(x=>x.route.id&&u?.[x.route.id]!==void 0);g>=0||_s(!1),c=c.slice(0,Math.min(c.length,g+1))}let h=!1,f=-1;if(t&&r&&r.v7_partialHydration)for(let g=0;g<c.length;g++){let x=c[g];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(f=g),x.route.id){let{loaderData:v,errors:b}=t,T=x.route.loader&&v[x.route.id]===void 0&&(!b||b[x.route.id]===void 0);if(x.route.lazy||T){h=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((g,x,v)=>{let b,T=!1,E=null,j=null;t&&(b=u&&x.route.id?u[x.route.id]:void 0,E=x.route.errorElement||X8,h&&(f<0&&v===0?(ak("route-fallback"),T=!0,j=null):f===v&&(T=!0,j=x.route.hydrateFallbackElement||null)));let S=e.concat(c.slice(0,v+1)),D=()=>{let O;return b?O=E:T?O=j:x.route.Component?O=W.createElement(x.route.Component,null):x.route.element?O=x.route.element:O=g,W.createElement(J8,{match:x,routeContext:{outlet:g,matches:S,isDataRoute:t!=null},children:O})};return t&&(x.route.ErrorBoundary||x.route.errorElement||v===0)?W.createElement(Q8,{location:t.location,revalidation:t.revalidation,component:E,error:b,children:D(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):D()},null)}var x3=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(x3||{}),y3=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(y3||{});function ek(n){let e=W.useContext(ev);return e||_s(!1),e}function tk(n){let e=W.useContext(z8);return e||_s(!1),e}function nk(n){let e=W.useContext(ic);return e||_s(!1),e}function b3(n){let e=nk(),t=e.matches[e.matches.length-1];return t.route.id||_s(!1),t.route.id}function rk(){var n;let e=W.useContext(m3),t=tk(),r=b3();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function sk(){let{router:n}=ek(x3.UseNavigateStable),e=b3(y3.UseNavigateStable),t=W.useRef(!1);return g3(()=>{t.current=!0}),W.useCallback(function(a,o){o===void 0&&(o={}),t.current&&(typeof a=="number"?n.navigate(a):n.navigate(a,Cg({fromRouteId:e},o)))},[n,e])}const ij={};function ak(n,e,t){ij[n]||(ij[n]=!0)}function ik(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function tv(n){let{to:e,replace:t,state:r,relative:a}=n;sm()||_s(!1);let{future:o,static:c}=W.useContext(hd),{matches:u}=W.useContext(ic),{pathname:h}=fd(),f=Tr(),g=Z2(e,J2(u,o.v7_relativeSplatPath),h,a==="path"),x=JSON.stringify(g);return W.useEffect(()=>f(JSON.parse(x),{replace:t,state:r,relative:a}),[f,x,a,t,r]),null}function v3(n){return $8(n.context)}function Dt(n){_s(!1)}function ok(n){let{basename:e="/",children:t=null,location:r,navigationType:a=Ku.Pop,navigator:o,static:c=!1,future:u}=n;sm()&&_s(!1);let h=e.replace(/^\/*/,"/"),f=W.useMemo(()=>({basename:h,navigator:o,static:c,future:Cg({v7_relativeSplatPath:!1},u)}),[h,u,o,c]);typeof r=="string"&&(r=rm(r));let{pathname:g="/",search:x="",hash:v="",state:b=null,key:T="default"}=r,E=W.useMemo(()=>{let j=Q2(g,h);return j==null?null:{location:{pathname:j,search:x,hash:v,state:b,key:T},navigationType:a}},[h,g,x,v,b,T,a]);return E==null?null:W.createElement(hd.Provider,{value:f},W.createElement(Hx.Provider,{children:t,value:E}))}function lk(n){let{children:e,location:t}=n;return W8(q1(e),t)}new Promise(()=>{});function q1(n,e){e===void 0&&(e=[]);let t=[];return W.Children.forEach(n,(r,a)=>{if(!W.isValidElement(r))return;let o=[...e,a];if(r.type===W.Fragment){t.push.apply(t,q1(r.props.children,o));return}r.type!==Dt&&_s(!1),!r.props.index||!r.props.children||_s(!1);let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=q1(r.props.children,o)),t.push(c)}),t}function G1(){return G1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},G1.apply(this,arguments)}function ck(n,e){if(n==null)return{};var t={},r=Object.keys(n),a,o;for(o=0;o<r.length;o++)a=r[o],!(e.indexOf(a)>=0)&&(t[a]=n[a]);return t}function uk(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function dk(n,e){return n.button===0&&(!e||e==="_self")&&!uk(n)}const hk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fk="6";try{window.__reactRouterVersion=fk}catch{}const mk="startTransition",oj=l8[mk];function gk(n){let{basename:e,children:t,future:r,window:a}=n,o=W.useRef();o.current==null&&(o.current=g8({window:a,v5Compat:!0}));let c=o.current,[u,h]=W.useState({action:c.action,location:c.location}),{v7_startTransition:f}=r||{},g=W.useCallback(x=>{f&&oj?oj(()=>h(x)):h(x)},[h,f]);return W.useLayoutEffect(()=>c.listen(g),[c,g]),W.useEffect(()=>ik(r),[r]),W.createElement(ok,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:c,future:r})}const pk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_n=W.forwardRef(function(e,t){let{onClick:r,relative:a,reloadDocument:o,replace:c,state:u,target:h,to:f,preventScrollReset:g,viewTransition:x}=e,v=ck(e,hk),{basename:b}=W.useContext(hd),T,E=!1;if(typeof f=="string"&&xk.test(f)&&(T=f,pk))try{let O=new URL(window.location.href),B=f.startsWith("//")?new URL(O.protocol+f):new URL(f),re=Q2(B.pathname,b);B.origin===O.origin&&re!=null?f=re+B.search+B.hash:E=!0}catch{}let j=q8(f,{relative:a}),S=yk(f,{replace:c,state:u,target:h,preventScrollReset:g,relative:a,viewTransition:x});function D(O){r&&r(O),O.defaultPrevented||S(O)}return W.createElement("a",G1({},v,{href:T||j,onClick:E||o?r:D,ref:t,target:h}))});var lj;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(lj||(lj={}));var cj;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(cj||(cj={}));function yk(n,e){let{target:t,replace:r,state:a,preventScrollReset:o,relative:c,viewTransition:u}=e===void 0?{}:e,h=Tr(),f=fd(),g=p3(n,{relative:c});return W.useCallback(x=>{if(dk(x,t)){x.preventDefault();let v=r!==void 0?r:nx(f)===nx(g);h(n,{replace:v,state:a,preventScrollReset:o,relative:c,viewTransition:u})}},[f,h,g,r,a,t,n,o,c,u])}const bk={en:{nav:{home:"Home",about:"About Village",panchayat:"Gram Panchayat",services:"Services",schemes:"Schemes",downloads:"Forms & Downloads",education:"Education & Anganwadi",gallery:"Gallery",financials:"Financials",notices:"Notices & Tenders",contact:"Contact"},home:{welcomeTitle:"Welcome to",knowMore:"Know More",quickInfo:"Quick Information",phone:"Phone",email:"Email",address:"Address",timings:"Office Timings",quickLinks:"Quick Links",payPropertyTax:"Pay Property Tax",payWaterTax:"Pay Water Tax",viewSchemes:"View Schemes",downloadForms:"Download Forms",latestNotices:"Latest Notices",viewAllNotices:"View All Notices",highlights:"Highlights",members:"Gram Panchayat Members",popularSchemes:"Popular Schemes",importantServices:"Important Services",recentPrograms:"Recent Programs & Events",viewAllPrograms:"View All Programs"},common:{learnMore:"Learn More",readMore:"Read More",viewDetails:"View Details",download:"Download",submit:"Submit",cancel:"Cancel",search:"Search",filter:"Filter",all:"All",active:"Active",closed:"Closed",upcoming:"Upcoming",loading:"Loading...",noResults:"No results found"},footer:{contactUs:"Contact Us",quickLinks:"Quick Links",importantLinks:"Important Links",followUs:"Follow Us",copyright:"All rights reserved"}},mr:{nav:{home:"",about:"",panchayat:"",services:"",schemes:"",downloads:"  ",education:"  ",gallery:"",financials:" ",notices:"  ",contact:""},home:{welcomeTitle:"  ",knowMore:" ",quickInfo:" ",phone:"",email:"",address:"",timings:" ",quickLinks:" ",payPropertyTax:"  ",payWaterTax:"  ",viewSchemes:" ",downloadForms:"  ",latestNotices:" ",viewAllNotices:"  ",highlights:" ",members:" ",popularSchemes:" ",importantServices:" ",recentPrograms:" ",viewAllPrograms:"  "},common:{learnMore:"  ",readMore:" ",viewDetails:" ",download:"",submit:" ",cancel:" ",search:"",filter:"",all:"",active:"",closed:"",upcoming:"",loading:"  ...",noResults:"   "},footer:{contactUs:"  ",quickLinks:" ",importantLinks:" ",followUs:"  ",copyright:"  "}}},w3=W.createContext(),ms=()=>{const n=W.useContext(w3);if(!n)throw new Error("useLanguage must be used within a LanguageProvider");return n},vk=({children:n})=>{const[e,t]=W.useState(()=>localStorage.getItem("language")||"mr");W.useEffect(()=>{localStorage.setItem("language",e),document.documentElement.lang=e},[e]);const c={language:e,setLanguage:t,toggleLanguage:()=>{t(u=>u==="en"?"mr":"en")},t:u=>{const h=u.split(".");let f=bk[e];for(const g of h)f=f?.[g];return f||u},getContent:u=>u?typeof u=="string"?u:u[e]||u.en||u.mr||"":""};return s.jsx(w3.Provider,{value:c,children:n})},wk=()=>{};var uj={};const N3=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},Nk=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const o=n[t++];e[r++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=n[t++],c=n[t++],u=n[t++],h=((a&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],c=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(o&63)<<6|c&63)}}return e.join("")},j3={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const o=n[a],c=a+1<n.length,u=c?n[a+1]:0,h=a+2<n.length,f=h?n[a+2]:0,g=o>>2,x=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,b=f&63;h||(b=64,c||(v=64)),r.push(t[g],t[x],t[v],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(N3(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Nk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const o=t[n.charAt(a++)],u=a<n.length?t[n.charAt(a)]:0;++a;const f=a<n.length?t[n.charAt(a)]:64;++a;const x=a<n.length?t[n.charAt(a)]:64;if(++a,o==null||u==null||f==null||x==null)throw new jk;const v=o<<2|u>>4;if(r.push(v),f!==64){const b=u<<4&240|f>>2;if(r.push(b),x!==64){const T=f<<6&192|x;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class jk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _k=function(n){const e=N3(n);return j3.encodeByteArray(e,!0)},rx=function(n){return _k(n).replace(/\./g,"")},_3=function(n){try{return j3.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function S3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Sk=()=>S3().__FIREBASE_DEFAULTS__,Ek=()=>{if(typeof process>"u"||typeof uj>"u")return;const n=uj.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Ak=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&_3(n[1]);return e&&JSON.parse(e)},$x=()=>{try{return wk()||Sk()||Ek()||Ak()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},E3=n=>$x()?.emulatorHosts?.[n],nv=n=>{const e=E3(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},A3=()=>$x()?.config,T3=n=>$x()?.[`_${n}`];class Tk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function oc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Wx(n){return(await fetch(n,{credentials:"include"})).ok}function C3(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[rx(JSON.stringify(t)),rx(JSON.stringify(c)),""].join(".")}const hg={};function Ck(){const n={prod:[],emulator:[]};for(const e of Object.keys(hg))hg[e]?n.emulator.push(e):n.prod.push(e);return n}function Ik(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let dj=!1;function Kx(n,e){if(typeof window>"u"||typeof document>"u"||!oc(window.location.host)||hg[n]===e||hg[n]||dj)return;hg[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=Ck().prod.length>0;function c(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,b){v.setAttribute("width","24"),v.setAttribute("id",b),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{dj=!0,c()},v}function g(v,b){v.setAttribute("id",b),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function x(){const v=Ik(r),b=t("text"),T=document.getElementById(b)||document.createElement("span"),E=t("learnmore"),j=document.getElementById(E)||document.createElement("a"),S=t("preprendIcon"),D=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const O=v.element;u(O),g(j,E);const B=f();h(D,S),O.append(D,T,j,B),document.body.appendChild(O)}o?(T.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}function sa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sa())}function I3(){const n=$x()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Rk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Pk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Lk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Dk(){const n=sa();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function k3(){return!I3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R3(){return!I3()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function P3(){try{return typeof indexedDB=="object"}catch{return!1}}function Mk(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const Ok="FirebaseError";class vl extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Ok,Object.setPrototypeOf(this,vl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qg.prototype.create)}}class Qg{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,o=this.errors[e],c=o?Fk(o,r):"Error",u=`${this.serviceName}: ${c} (${a}).`;return new vl(a,u,r)}}function Fk(n,e){return n.replace(Uk,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const Uk=/\{\$([^}]+)}/g;function Vk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Jd(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const o=n[a],c=e[a];if(hj(o)&&hj(c)){if(!Jd(o,c))return!1}else if(o!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function hj(n){return n!==null&&typeof n=="object"}function Jg(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ag(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,o]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(o)}}),e}function ig(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Bk(n,e){const t=new zk(n,e);return t.subscribe.bind(t)}class zk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");qk(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Qb),a.error===void 0&&(a.error=Qb),a.complete===void 0&&(a.complete=Qb);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Qb(){}function sr(n){return n&&n._delegate?n._delegate:n}class Kc{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Dd="[DEFAULT]";class Gk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Tk;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($k(e))try{this.getOrInitializeService({instanceIdentifier:Dd})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:a});r.resolve(o)}catch{}}}}clearInstance(e=Dd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Dd){return this.instances.has(e)}getOptions(e=Dd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const o=this.instances.get(r);return o&&e(o,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Hk(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Dd){return this.component?this.component.multipleInstances?e:Dd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Hk(n){return n===Dd?void 0:n}function $k(n){return n.instantiationMode==="EAGER"}class Wk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Gk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ln;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ln||(Ln={}));const Kk={debug:Ln.DEBUG,verbose:Ln.VERBOSE,info:Ln.INFO,warn:Ln.WARN,error:Ln.ERROR,silent:Ln.SILENT},Yk=Ln.INFO,Xk={[Ln.DEBUG]:"log",[Ln.VERBOSE]:"log",[Ln.INFO]:"info",[Ln.WARN]:"warn",[Ln.ERROR]:"error"},Qk=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=Xk[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rv{constructor(e){this.name=e,this._logLevel=Yk,this._logHandler=Qk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ln))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Kk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ln.DEBUG,...e),this._logHandler(this,Ln.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ln.VERBOSE,...e),this._logHandler(this,Ln.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ln.INFO,...e),this._logHandler(this,Ln.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ln.WARN,...e),this._logHandler(this,Ln.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ln.ERROR,...e),this._logHandler(this,Ln.ERROR,...e)}}const Jk=(n,e)=>e.some(t=>n instanceof t);let fj,mj;function Zk(){return fj||(fj=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eR(){return mj||(mj=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const L3=new WeakMap,H1=new WeakMap,D3=new WeakMap,Jb=new WeakMap,sv=new WeakMap;function tR(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(Ju(n.result)),a()},c=()=>{r(n.error),a()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&L3.set(t,n)}).catch(()=>{}),sv.set(e,n),e}function nR(n){if(H1.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),a()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});H1.set(n,e)}let $1={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return H1.get(n);if(e==="objectStoreNames")return n.objectStoreNames||D3.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ju(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function rR(n){$1=n($1)}function sR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Zb(this),e,...t);return D3.set(r,e.sort?e.sort():[e]),Ju(r)}:eR().includes(n)?function(...e){return n.apply(Zb(this),e),Ju(L3.get(this))}:function(...e){return Ju(n.apply(Zb(this),e))}}function aR(n){return typeof n=="function"?sR(n):(n instanceof IDBTransaction&&nR(n),Jk(n,Zk())?new Proxy(n,$1):n)}function Ju(n){if(n instanceof IDBRequest)return tR(n);if(Jb.has(n))return Jb.get(n);const e=aR(n);return e!==n&&(Jb.set(n,e),sv.set(e,n)),e}const Zb=n=>sv.get(n);function iR(n,e,{blocked:t,upgrade:r,blocking:a,terminated:o}={}){const c=indexedDB.open(n,e),u=Ju(c);return r&&c.addEventListener("upgradeneeded",h=>{r(Ju(c.result),h.oldVersion,h.newVersion,Ju(c.transaction),h)}),t&&c.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),a&&h.addEventListener("versionchange",f=>a(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const oR=["get","getKey","getAll","getAllKeys","count"],lR=["put","add","delete","clear"],e1=new Map;function gj(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(e1.get(e))return e1.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=lR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||oR.includes(t)))return;const o=async function(c,...u){const h=this.transaction(c,a?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),a&&h.done]))[0]};return e1.set(e,o),o}rR(n=>({...n,get:(e,t,r)=>gj(e,t)||n.get(e,t,r),has:(e,t)=>!!gj(e,t)||n.has(e,t)}));class cR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(uR(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function uR(n){return n.getComponent()?.type==="VERSION"}const W1="@firebase/app",pj="0.14.6";const Yc=new rv("@firebase/app"),dR="@firebase/app-compat",hR="@firebase/analytics-compat",fR="@firebase/analytics",mR="@firebase/app-check-compat",gR="@firebase/app-check",pR="@firebase/auth",xR="@firebase/auth-compat",yR="@firebase/database",bR="@firebase/data-connect",vR="@firebase/database-compat",wR="@firebase/functions",NR="@firebase/functions-compat",jR="@firebase/installations",_R="@firebase/installations-compat",SR="@firebase/messaging",ER="@firebase/messaging-compat",AR="@firebase/performance",TR="@firebase/performance-compat",CR="@firebase/remote-config",IR="@firebase/remote-config-compat",kR="@firebase/storage",RR="@firebase/storage-compat",PR="@firebase/firestore",LR="@firebase/ai",DR="@firebase/firestore-compat",MR="firebase",OR="12.6.0";const K1="[DEFAULT]",FR={[W1]:"fire-core",[dR]:"fire-core-compat",[fR]:"fire-analytics",[hR]:"fire-analytics-compat",[gR]:"fire-app-check",[mR]:"fire-app-check-compat",[pR]:"fire-auth",[xR]:"fire-auth-compat",[yR]:"fire-rtdb",[bR]:"fire-data-connect",[vR]:"fire-rtdb-compat",[wR]:"fire-fn",[NR]:"fire-fn-compat",[jR]:"fire-iid",[_R]:"fire-iid-compat",[SR]:"fire-fcm",[ER]:"fire-fcm-compat",[AR]:"fire-perf",[TR]:"fire-perf-compat",[CR]:"fire-rc",[IR]:"fire-rc-compat",[kR]:"fire-gcs",[RR]:"fire-gcs-compat",[PR]:"fire-fst",[DR]:"fire-fst-compat",[LR]:"fire-vertex","fire-js":"fire-js",[MR]:"fire-js-all"};const sx=new Map,UR=new Map,Y1=new Map;function xj(n,e){try{n.container.addComponent(e)}catch(t){Yc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ad(n){const e=n.name;if(Y1.has(e))return Yc.debug(`There were multiple attempts to register component ${e}.`),!1;Y1.set(e,n);for(const t of sx.values())xj(t,n);for(const t of UR.values())xj(t,n);return!0}function Zg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Vi(n){return n==null?!1:n.settings!==void 0}const VR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zu=new Qg("app","Firebase",VR);class BR{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zu.create("app-deleted",{appName:this._name})}}const mh=OR;function M3(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:K1,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw Zu.create("bad-app-name",{appName:String(a)});if(t||(t=A3()),!t)throw Zu.create("no-options");const o=sx.get(a);if(o){if(Jd(t,o.options)&&Jd(r,o.config))return o;throw Zu.create("duplicate-app",{appName:a})}const c=new Wk(a);for(const h of Y1.values())c.addComponent(h);const u=new BR(t,r,c);return sx.set(a,u),u}function Yx(n=K1){const e=sx.get(n);if(!e&&n===K1&&A3())return M3();if(!e)throw Zu.create("no-app",{appName:n});return e}function Uo(n,e,t){let r=FR[n]??n;t&&(r+=`-${t}`);const a=r.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yc.warn(c.join(" "));return}ad(new Kc(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const zR="firebase-heartbeat-database",qR=1,Ig="firebase-heartbeat-store";let t1=null;function O3(){return t1||(t1=iR(zR,qR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ig)}catch(t){console.warn(t)}}}}).catch(n=>{throw Zu.create("idb-open",{originalErrorMessage:n.message})})),t1}async function GR(n){try{const t=(await O3()).transaction(Ig),r=await t.objectStore(Ig).get(F3(n));return await t.done,r}catch(e){if(e instanceof vl)Yc.warn(e.message);else{const t=Zu.create("idb-get",{originalErrorMessage:e?.message});Yc.warn(t.message)}}}async function yj(n,e){try{const r=(await O3()).transaction(Ig,"readwrite");await r.objectStore(Ig).put(e,F3(n)),await r.done}catch(t){if(t instanceof vl)Yc.warn(t.message);else{const r=Zu.create("idb-set",{originalErrorMessage:t?.message});Yc.warn(r.message)}}}function F3(n){return`${n.name}!${n.options.appId}`}const HR=1024,$R=30;class WR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new YR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=bj();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>$R){const a=XR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Yc.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=bj(),{heartbeatsToSend:t,unsentEntries:r}=KR(this._heartbeatsCache.heartbeats),a=rx(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Yc.warn(e),""}}}function bj(){return new Date().toISOString().substring(0,10)}function KR(n,e=HR){const t=[];let r=n.slice();for(const a of n){const o=t.find(c=>c.agent===a.agent);if(o){if(o.dates.push(a.date),vj(t)>e){o.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),vj(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class YR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return P3()?Mk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await GR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return yj(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return yj(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function vj(n){return rx(JSON.stringify({version:2,heartbeats:n})).length}function XR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function QR(n){ad(new Kc("platform-logger",e=>new cR(e),"PRIVATE")),ad(new Kc("heartbeat",e=>new WR(e),"PRIVATE")),Uo(W1,pj,n),Uo(W1,pj,"esm2020"),Uo("fire-js","")}QR("");function U3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JR=U3,V3=new Qg("auth","Firebase",U3());const ax=new rv("@firebase/auth");function ZR(n,...e){ax.logLevel<=Ln.WARN&&ax.warn(`Auth (${mh}): ${n}`,...e)}function L0(n,...e){ax.logLevel<=Ln.ERROR&&ax.error(`Auth (${mh}): ${n}`,...e)}function pl(n,...e){throw av(n,...e)}function Zl(n,...e){return av(n,...e)}function B3(n,e,t){const r={...JR(),[e]:t};return new Qg("auth","Firebase",r).create(e,{appName:n.name})}function $c(n){return B3(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function av(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return V3.create(n,...e)}function Jt(n,e,...t){if(!n)throw av(e,...t)}function zc(n){const e="INTERNAL ASSERTION FAILED: "+n;throw L0(e),new Error(e)}function Xc(n,e){n||zc(e)}function X1(){return typeof self<"u"&&self.location?.href||""}function eP(){return wj()==="http:"||wj()==="https:"}function wj(){return typeof self<"u"&&self.location?.protocol||null}function tP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eP()||Pk()||"connection"in navigator)?navigator.onLine:!0}function nP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class ep{constructor(e,t){this.shortDelay=e,this.longDelay=t,Xc(t>e,"Short delay should be less than long delay!"),this.isMobile=kk()||Lk()}get(){return tP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function iv(n,e){Xc(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class z3{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const sP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aP=new ep(3e4,6e4);function tu(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function nu(n,e,t,r,a={}){return q3(n,a,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const u=Jg({key:n.config.apiKey,...c}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:h,...o};return Rk()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&oc(n.emulatorConfig.host)&&(f.credentials="include"),z3.fetch()(await G3(n,n.config.apiHost,t,u),f)})}async function q3(n,e,t){n._canInitEmulator=!1;const r={...rP,...e};try{const a=new oP(n),o=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw f0(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw f0(n,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw f0(n,"email-already-in-use",c);if(h==="USER_DISABLED")throw f0(n,"user-disabled",c);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw B3(n,g,f);pl(n,g)}}catch(a){if(a instanceof vl)throw a;pl(n,"network-request-failed",{message:String(a)})}}async function tp(n,e,t,r,a={}){const o=await nu(n,e,t,r,a);return"mfaPendingCredential"in o&&pl(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function G3(n,e,t,r){const a=`${e}${t}?${r}`,o=n,c=o.config.emulator?iv(n.config,a):`${n.config.apiScheme}://${a}`;return sP.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function iP(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Zl(this.auth,"network-request-failed")),aP.get())})}}function f0(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Zl(n,e,r);return a.customData._tokenResponse=t,a}function Nj(n){return n!==void 0&&n.enterprise!==void 0}class lP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return iP(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cP(n,e){return nu(n,"GET","/v2/recaptchaConfig",tu(n,e))}async function uP(n,e){return nu(n,"POST","/v1/accounts:delete",e)}async function ix(n,e){return nu(n,"POST","/v1/accounts:lookup",e)}function fg(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dP(n,e=!1){const t=sr(n),r=await t.getIdToken(e),a=ov(r);Jt(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,c=o?.sign_in_provider;return{claims:a,token:r,authTime:fg(n1(a.auth_time)),issuedAtTime:fg(n1(a.iat)),expirationTime:fg(n1(a.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function n1(n){return Number(n)*1e3}function ov(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return L0("JWT malformed, contained fewer than 3 sections"),null;try{const a=_3(t);return a?JSON.parse(a):(L0("Failed to decode base64 JWT payload"),null)}catch(a){return L0("Caught error parsing JWT payload as JSON",a?.toString()),null}}function jj(n){const e=ov(n);return Jt(e,"internal-error"),Jt(typeof e.exp<"u","internal-error"),Jt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function kg(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof vl&&hP(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function hP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class fP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Q1{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fg(this.lastLoginAt),this.creationTime=fg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ox(n){const e=n.auth,t=await n.getIdToken(),r=await kg(n,ix(e,{idToken:t}));Jt(r?.users.length,e,"internal-error");const a=r.users[0];n._notifyReloadListener(a);const o=a.providerUserInfo?.length?H3(a.providerUserInfo):[],c=gP(n.providerData,o),u=n.isAnonymous,h=!(n.email&&a.passwordHash)&&!c?.length,f=u?h:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Q1(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(n,g)}async function mP(n){const e=sr(n);await ox(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gP(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function H3(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function pP(n,e){const t=await q3(n,{},async()=>{const r=Jg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:o}=n.config,c=await G3(n,a,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return n.emulatorConfig&&oc(n.emulatorConfig.host)&&(h.credentials="include"),z3.fetch()(c,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function xP(n,e){return nu(n,"POST","/v2/accounts:revokeToken",tu(n,e))}class Sf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Jt(e.idToken,"internal-error"),Jt(typeof e.idToken<"u","internal-error"),Jt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jj(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Jt(e.length!==0,"internal-error");const t=jj(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Jt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:o}=await pP(e,t);this.updateTokensAndExpiration(r,a,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:o}=t,c=new Sf;return r&&(Jt(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(Jt(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),o&&(Jt(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sf,this.toJSON())}_performRefresh(){return zc("not implemented")}}function Mu(n,e){Jt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ml{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new fP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Q1(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await kg(this,this.stsTokenManager.getToken(this.auth,e));return Jt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return dP(this,e)}reload(){return mP(this)}_assign(e){this!==e&&(Jt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ml({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Jt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ox(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vi(this.auth.app))return Promise.reject($c(this.auth));const e=await this.getIdToken();return await kg(this,uP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,u=t.tenantId??void 0,h=t._redirectEventId??void 0,f=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:x,emailVerified:v,isAnonymous:b,providerData:T,stsTokenManager:E}=t;Jt(x&&E,e,"internal-error");const j=Sf.fromJSON(this.name,E);Jt(typeof x=="string",e,"internal-error"),Mu(r,e.name),Mu(a,e.name),Jt(typeof v=="boolean",e,"internal-error"),Jt(typeof b=="boolean",e,"internal-error"),Mu(o,e.name),Mu(c,e.name),Mu(u,e.name),Mu(h,e.name),Mu(f,e.name),Mu(g,e.name);const S=new ml({uid:x,auth:e,email:a,emailVerified:v,displayName:r,isAnonymous:b,photoURL:c,phoneNumber:o,tenantId:u,stsTokenManager:j,createdAt:f,lastLoginAt:g});return T&&Array.isArray(T)&&(S.providerData=T.map(D=>({...D}))),h&&(S._redirectEventId=h),S}static async _fromIdTokenResponse(e,t,r=!1){const a=new Sf;a.updateFromServerResponse(t);const o=new ml({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await ox(o),o}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];Jt(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?H3(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!o?.length,u=new Sf;u.updateFromIdToken(r);const h=new ml({uid:a.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Q1(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!o?.length};return Object.assign(h,f),h}}const _j=new Map;function qc(n){Xc(n instanceof Function,"Expected a class definition");let e=_j.get(n);return e?(Xc(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,_j.set(n,e),e)}class $3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$3.type="NONE";const Sj=$3;function D0(n,e,t){return`firebase:${n}:${e}:${t}`}class Ef{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:o}=this.auth;this.fullUserKey=D0(this.userKey,a.apiKey,o),this.fullPersistenceKey=D0("persistence",a.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ix(this.auth,{idToken:e}).catch(()=>{});return t?ml._fromGetAccountInfoResponse(this.auth,t,e):null}return ml._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ef(qc(Sj),e,r);const a=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=a[0]||qc(Sj);const c=D0(r,e.config.apiKey,e.name);let u=null;for(const f of t)try{const g=await f._get(c);if(g){let x;if(typeof g=="string"){const v=await ix(e,{idToken:g}).catch(()=>{});if(!v)break;x=await ml._fromGetAccountInfoResponse(e,v,g)}else x=ml._fromJSON(e,g);f!==o&&(u=x),o=f;break}}catch{}const h=a.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ef(o,e,r):(o=h[0],u&&await o._set(c,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new Ef(o,e,r))}}function Ej(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(X3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(W3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(J3(e))return"Blackberry";if(Z3(e))return"Webos";if(K3(e))return"Safari";if((e.includes("chrome/")||Y3(e))&&!e.includes("edge/"))return"Chrome";if(Q3(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function W3(n=sa()){return/firefox\//i.test(n)}function K3(n=sa()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Y3(n=sa()){return/crios\//i.test(n)}function X3(n=sa()){return/iemobile/i.test(n)}function Q3(n=sa()){return/android/i.test(n)}function J3(n=sa()){return/blackberry/i.test(n)}function Z3(n=sa()){return/webos/i.test(n)}function lv(n=sa()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function yP(n=sa()){return lv(n)&&!!window.navigator?.standalone}function bP(){return Dk()&&document.documentMode===10}function eS(n=sa()){return lv(n)||Q3(n)||Z3(n)||J3(n)||/windows phone/i.test(n)||X3(n)}function tS(n,e=[]){let t;switch(n){case"Browser":t=Ej(sa());break;case"Worker":t=`${Ej(sa())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${mh}/${r}`}class vP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((c,u)=>{try{const h=e(o);c(h)}catch(h){u(h)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function wP(n,e={}){return nu(n,"GET","/v2/passwordPolicy",tu(n,e))}const NP=6;class jP{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??NP,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class _P{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Aj(this),this.idTokenSubscription=new Aj(this),this.beforeStateQueue=new vP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=V3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qc(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ef.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ix(this,{idToken:e}),r=await ml._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Vi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(r=u.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Jt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ox(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vi(this.app))return Promise.reject($c(this));const t=e?sr(e):null;return t&&Jt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Jt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vi(this.app)?Promise.reject($c(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vi(this.app)?Promise.reject($c(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wP(this),t=new jP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qg("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await xP(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&qc(e)||this._popupRedirectResolver;Jt(t,this,"argument-error"),this.redirectPersistenceManager=await Ef.create(this,[qc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Jt(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,a);return()=>{c=!0,h()}}else{const h=e.addObserver(t);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Jt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Vi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ZR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function md(n){return sr(n)}class Aj{constructor(e){this.auth=e,this.observer=null,this.addObserver=Bk(t=>this.observer=t)}get next(){return Jt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Xx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SP(n){Xx=n}function nS(n){return Xx.loadJS(n)}function EP(){return Xx.recaptchaEnterpriseScript}function AP(){return Xx.gapiScript}function TP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class CP{constructor(){this.enterprise=new IP}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class IP{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const kP="recaptcha-enterprise",rS="NO_RECAPTCHA";class RP{constructor(e){this.type=kP,this.auth=md(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,u)=>{cP(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new lP(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(h=>{u(h)})})}function a(o,c,u){const h=window.grecaptcha;Nj(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(rS)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new CP().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{r(this.auth).then(u=>{if(!t&&Nj(window.grecaptcha))a(u,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=EP();h.length!==0&&(h+=u),nS(h).then(()=>{a(u,o,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function Tj(n,e,t,r=!1,a=!1){const o=new RP(n);let c;if(a)c=rS;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function lx(n,e,t,r,a){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Tj(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Tj(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(o)})}function PP(n,e){const t=Zg(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),o=t.getOptions();if(Jd(o,e??{}))return a;pl(a,"already-initialized")}return t.initialize({options:e})}function LP(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(qc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function DP(n,e,t){const r=md(n);Jt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,o=sS(e),{host:c,port:u}=MP(e),h=u===null?"":`:${u}`,f={url:`${o}//${c}${h}/`},g=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Jt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Jt(Jd(f,r.config.emulator)&&Jd(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,oc(c)?(Wx(`${o}//${c}${h}`),Kx("Auth",!0)):OP()}function sS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function MP(n){const e=sS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const o=a[1];return{host:o,port:Cj(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:Cj(c)}}}function Cj(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function OP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class cv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return zc("not implemented")}_getIdTokenResponse(e){return zc("not implemented")}_linkToIdToken(e,t){return zc("not implemented")}_getReauthenticationResolver(e){return zc("not implemented")}}async function FP(n,e){return nu(n,"POST","/v1/accounts:signUp",e)}async function UP(n,e){return tp(n,"POST","/v1/accounts:signInWithPassword",tu(n,e))}async function VP(n,e){return nu(n,"POST","/v1/accounts:sendOobCode",tu(n,e))}async function BP(n,e){return VP(n,e)}async function zP(n,e){return tp(n,"POST","/v1/accounts:signInWithEmailLink",tu(n,e))}async function qP(n,e){return tp(n,"POST","/v1/accounts:signInWithEmailLink",tu(n,e))}class Rg extends cv{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Rg(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Rg(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lx(e,t,"signInWithPassword",UP);case"emailLink":return zP(e,{email:this._email,oobCode:this._password});default:pl(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lx(e,r,"signUpPassword",FP);case"emailLink":return qP(e,{idToken:t,email:this._email,oobCode:this._password});default:pl(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Af(n,e){return tp(n,"POST","/v1/accounts:signInWithIdp",tu(n,e))}const GP="http://localhost";class Zd extends cv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Zd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pl("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...o}=t;if(!r||!a)return null;const c=new Zd(r,a);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Af(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Af(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Af(e,t)}buildRequest(){const e={requestUri:GP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Jg(t)}return e}}function HP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $P(n){const e=ag(ig(n)).link,t=e?ag(ig(e)).deep_link_id:null,r=ag(ig(n)).deep_link_id;return(r?ag(ig(r)).link:null)||r||t||e||n}class uv{constructor(e){const t=ag(ig(e)),r=t.apiKey??null,a=t.oobCode??null,o=HP(t.mode??null);Jt(r&&a&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=$P(e);try{return new uv(t)}catch{return null}}}class am{constructor(){this.providerId=am.PROVIDER_ID}static credential(e,t){return Rg._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=uv.parseLink(t);return Jt(r,"argument-error"),Rg._fromEmailAndCode(e,r.code,r.tenantId)}}am.PROVIDER_ID="password";am.EMAIL_PASSWORD_SIGN_IN_METHOD="password";am.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class aS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class np extends aS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class zu extends np{constructor(){super("facebook.com")}static credential(e){return Zd._fromParams({providerId:zu.PROVIDER_ID,signInMethod:zu.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zu.credentialFromTaggedObject(e)}static credentialFromError(e){return zu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zu.credential(e.oauthAccessToken)}catch{return null}}}zu.FACEBOOK_SIGN_IN_METHOD="facebook.com";zu.PROVIDER_ID="facebook.com";class qu extends np{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Zd._fromParams({providerId:qu.PROVIDER_ID,signInMethod:qu.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return qu.credentialFromTaggedObject(e)}static credentialFromError(e){return qu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return qu.credential(t,r)}catch{return null}}}qu.GOOGLE_SIGN_IN_METHOD="google.com";qu.PROVIDER_ID="google.com";class Gu extends np{constructor(){super("github.com")}static credential(e){return Zd._fromParams({providerId:Gu.PROVIDER_ID,signInMethod:Gu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gu.credentialFromTaggedObject(e)}static credentialFromError(e){return Gu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gu.credential(e.oauthAccessToken)}catch{return null}}}Gu.GITHUB_SIGN_IN_METHOD="github.com";Gu.PROVIDER_ID="github.com";class Hu extends np{constructor(){super("twitter.com")}static credential(e,t){return Zd._fromParams({providerId:Hu.PROVIDER_ID,signInMethod:Hu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Hu.credentialFromTaggedObject(e)}static credentialFromError(e){return Hu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Hu.credential(t,r)}catch{return null}}}Hu.TWITTER_SIGN_IN_METHOD="twitter.com";Hu.PROVIDER_ID="twitter.com";async function WP(n,e){return tp(n,"POST","/v1/accounts:signUp",tu(n,e))}class eh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const o=await ml._fromIdTokenResponse(e,r,a),c=Ij(r);return new eh({user:o,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=Ij(r);return new eh({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function Ij(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class cx extends vl{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,cx.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new cx(e,t,r,a)}}function iS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?cx._fromErrorAndOperation(n,o,e,r):o})}async function KP(n,e,t=!1){const r=await kg(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return eh._forOperation(n,"link",r)}async function YP(n,e,t=!1){const{auth:r}=n;if(Vi(r.app))return Promise.reject($c(r));const a="reauthenticate";try{const o=await kg(n,iS(r,a,e,n),t);Jt(o.idToken,r,"internal-error");const c=ov(o.idToken);Jt(c,r,"internal-error");const{sub:u}=c;return Jt(n.uid===u,r,"user-mismatch"),eh._forOperation(n,a,o)}catch(o){throw o?.code==="auth/user-not-found"&&pl(r,"user-mismatch"),o}}async function oS(n,e,t=!1){if(Vi(n.app))return Promise.reject($c(n));const r="signIn",a=await iS(n,r,e),o=await eh._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(o.user),o}async function XP(n,e){return oS(md(n),e)}async function lS(n){const e=md(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function cS(n,e,t){const r=md(n);await lx(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",BP)}async function QP(n,e,t){if(Vi(n.app))return Promise.reject($c(n));const r=md(n),c=await lx(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",WP).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&lS(n),h}),u=await eh._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(u.user),u}function uS(n,e,t){return Vi(n.app)?Promise.reject($c(n)):XP(sr(n),am.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lS(n),r})}function JP(n,e,t,r){return sr(n).onIdTokenChanged(e,t,r)}function ZP(n,e,t){return sr(n).beforeAuthStateChanged(e,t)}function dS(n,e,t,r){return sr(n).onAuthStateChanged(e,t,r)}function eL(n){return sr(n).signOut()}const ux="__sak";class hS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ux,"1"),this.storage.removeItem(ux),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const tL=1e3,nL=10;class fS extends hS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);bP()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,nL):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},tL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}fS.type="LOCAL";const rL=fS;class mS extends hS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mS.type="SESSION";const gS=mS;function sL(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Qx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Qx(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:o}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const u=Array.from(c).map(async f=>f(t.origin,o)),h=await sL(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qx.receivers=[];function dv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class aL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,c;return new Promise((u,h)=>{const f=dv("",20);a.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(x){const v=x;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function ec(){return window}function iL(n){ec().location.href=n}function pS(){return typeof ec().WorkerGlobalScope<"u"&&typeof ec().importScripts=="function"}async function oL(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lL(){return navigator?.serviceWorker?.controller||null}function cL(){return pS()?self:null}const xS="firebaseLocalStorageDb",uL=1,dx="firebaseLocalStorage",yS="fbase_key";class rp{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jx(n,e){return n.transaction([dx],e?"readwrite":"readonly").objectStore(dx)}function dL(){const n=indexedDB.deleteDatabase(xS);return new rp(n).toPromise()}function J1(){const n=indexedDB.open(xS,uL);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(dx,{keyPath:yS})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(dx)?e(r):(r.close(),await dL(),e(await J1()))})})}async function kj(n,e,t){const r=Jx(n,!0).put({[yS]:e,value:t});return new rp(r).toPromise()}async function hL(n,e){const t=Jx(n,!1).get(e),r=await new rp(t).toPromise();return r===void 0?null:r.value}function Rj(n,e){const t=Jx(n,!0).delete(e);return new rp(t).toPromise()}const fL=800,mL=3;class bS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await J1(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>mL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qx._getInstance(cL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await oL(),!this.activeServiceWorker)return;this.sender=new aL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await J1();return await kj(e,ux,"1"),await Rj(e,ux),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>kj(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>hL(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Rj(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const o=Jx(a,!1).getAll();return new rp(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:o}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bS.type="LOCAL";const gL=bS;new ep(3e4,6e4);function pL(n,e){return e?qc(e):(Jt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class hv extends cv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Af(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Af(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Af(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xL(n){return oS(n.auth,new hv(n),n.bypassAuthState)}function yL(n){const{auth:e,user:t}=n;return Jt(t,e,"internal-error"),YP(t,new hv(n),n.bypassAuthState)}async function bL(n){const{auth:e,user:t}=n;return Jt(t,e,"internal-error"),KP(t,new hv(n),n.bypassAuthState)}class vS{constructor(e,t,r,a,o=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xL;case"linkViaPopup":case"linkViaRedirect":return bL;case"reauthViaPopup":case"reauthViaRedirect":return yL;default:pl(this.auth,"internal-error")}}resolve(e){Xc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vL=new ep(2e3,1e4);class Nf extends vS{constructor(e,t,r,a,o){super(e,t,a,o),this.provider=r,this.authWindow=null,this.pollId=null,Nf.currentPopupAction&&Nf.currentPopupAction.cancel(),Nf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Jt(e,this.auth,"internal-error"),e}async onExecution(){Xc(this.filter.length===1,"Popup operations only handle one event");const e=dv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Zl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Zl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Nf.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vL.get())};e()}}Nf.currentPopupAction=null;const wL="pendingRedirect",M0=new Map;class NL extends vS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=M0.get(this.auth._key());if(!e){try{const r=await jL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}M0.set(this.auth._key(),e)}return this.bypassAuthState||M0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jL(n,e){const t=EL(e),r=SL(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function _L(n,e){M0.set(n._key(),e)}function SL(n){return qc(n._redirectPersistence)}function EL(n){return D0(wL,n.config.apiKey,n.name)}async function AL(n,e,t=!1){if(Vi(n.app))return Promise.reject($c(n));const r=md(n),a=pL(r,e),c=await new NL(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const TL=600*1e3;class CL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!wS(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Zl(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TL&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pj(e))}saveEventToCache(e){this.cachedEventUids.add(Pj(e)),this.lastProcessedEventTime=Date.now()}}function Pj(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function wS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function IL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wS(n);default:return!1}}async function kL(n,e={}){return nu(n,"GET","/v1/projects",e)}const RL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PL=/^https?/;async function LL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await kL(n);for(const t of e)try{if(DL(t))return}catch{}pl(n,"unauthorized-domain")}function DL(n){const e=X1(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!PL.test(t))return!1;if(RL.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const ML=new ep(3e4,6e4);function Lj(){const n=ec().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function OL(n){return new Promise((e,t)=>{function r(){Lj(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Lj(),t(Zl(n,"network-request-failed"))},timeout:ML.get()})}if(ec().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ec().gapi?.load)r();else{const a=TP("iframefcb");return ec()[a]=()=>{gapi.load?r():t(Zl(n,"network-request-failed"))},nS(`${AP()}?onload=${a}`).catch(o=>t(o))}}).catch(e=>{throw O0=null,e})}let O0=null;function FL(n){return O0=O0||OL(n),O0}const UL=new ep(5e3,15e3),VL="__/auth/iframe",BL="emulator/auth/iframe",zL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GL(n){const e=n.config;Jt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?iv(e,BL):`https://${n.config.authDomain}/${VL}`,r={apiKey:e.apiKey,appName:n.name,v:mh},a=qL.get(n.config.apiHost);a&&(r.eid=a);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Jg(r).slice(1)}`}async function HL(n){const e=await FL(n),t=ec().gapi;return Jt(t,n,"internal-error"),e.open({where:document.body,url:GL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zL,dontclear:!0},r=>new Promise(async(a,o)=>{await r.restyle({setHideOnLeave:!1});const c=Zl(n,"network-request-failed"),u=ec().setTimeout(()=>{o(c)},UL.get());function h(){ec().clearTimeout(u),a(r)}r.ping(h).then(h,()=>{o(c)})}))}const $L={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WL=500,KL=600,YL="_blank",XL="http://localhost";class Dj{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QL(n,e,t,r=WL,a=KL){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h={...$L,width:r.toString(),height:a.toString(),top:o,left:c},f=sa().toLowerCase();t&&(u=Y3(f)?YL:t),W3(f)&&(e=e||XL,h.scrollbars="yes");const g=Object.entries(h).reduce((v,[b,T])=>`${v}${b}=${T},`,"");if(yP(f)&&u!=="_self")return JL(e||"",u),new Dj(null);const x=window.open(e||"",u,g);Jt(x,n,"popup-blocked");try{x.focus()}catch{}return new Dj(x)}function JL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const ZL="__/auth/handler",e7="emulator/auth/handler",t7=encodeURIComponent("fac");async function Mj(n,e,t,r,a,o){Jt(n.config.authDomain,n,"auth-domain-config-required"),Jt(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:mh,eventId:a};if(e instanceof aS){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",Vk(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,x]of Object.entries({}))c[g]=x}if(e instanceof np){const g=e.getScopes().filter(x=>x!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await n._getAppCheckToken(),f=h?`#${t7}=${encodeURIComponent(h)}`:"";return`${n7(n)}?${Jg(u).slice(1)}${f}`}function n7({config:n}){return n.emulator?iv(n,e7):`https://${n.authDomain}/${ZL}`}const r1="webStorageSupport";class r7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gS,this._completeRedirectFn=AL,this._overrideRedirectResult=_L}async _openPopup(e,t,r,a){Xc(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Mj(e,t,r,X1(),a);return QL(e,o,dv())}async _openRedirect(e,t,r,a){await this._originValidation(e);const o=await Mj(e,t,r,X1(),a);return iL(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:o}=this.eventManagers[t];return a?Promise.resolve(a):(Xc(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await HL(e),r=new CL(e);return t.register("authEvent",a=>(Jt(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(r1,{type:r1},a=>{const o=a?.[0]?.[r1];o!==void 0&&t(!!o),pl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=LL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return eS()||K3()||lv()}}const s7=r7;var Oj="@firebase/auth",Fj="1.11.1";class a7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Jt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function i7(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function o7(n){ad(new Kc("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;Jt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tS(n)},f=new _P(r,a,o,h);return LP(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ad(new Kc("auth-internal",e=>{const t=md(e.getProvider("auth").getImmediate());return(r=>new a7(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Uo(Oj,Fj,i7(n)),Uo(Oj,Fj,"esm2020")}const l7=300,c7=T3("authIdTokenMaxAge")||l7;let Uj=null;const u7=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>c7)return;const a=t?.token;Uj!==a&&(Uj=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function d7(n=Yx()){const e=Zg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=PP(n,{popupRedirectResolver:s7,persistence:[gL,rL,gS]}),r=T3("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=u7(o.toString());ZP(t,c,()=>c(t.currentUser)),JP(t,u=>c(u))}}const a=E3("auth");return a&&DP(t,`http://${a}`),t}function h7(){return document.getElementsByTagName("head")?.[0]??document}SP({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const o=Zl("internal-error");o.customData=a,t(o)},r.type="text/javascript",r.charset="UTF-8",h7().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});o7("Browser");var Vj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ed,NS;(function(){var n;function e(G,M){function k(){}k.prototype=M.prototype,G.F=M.prototype,G.prototype=new k,G.prototype.constructor=G,G.D=function(L,C,P){for(var V=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)V[oe-2]=arguments[oe];return M.prototype[C].apply(L,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(G,M,k){k||(k=0);const L=Array(16);if(typeof M=="string")for(var C=0;C<16;++C)L[C]=M.charCodeAt(k++)|M.charCodeAt(k++)<<8|M.charCodeAt(k++)<<16|M.charCodeAt(k++)<<24;else for(C=0;C<16;++C)L[C]=M[k++]|M[k++]<<8|M[k++]<<16|M[k++]<<24;M=G.g[0],k=G.g[1],C=G.g[2];let P=G.g[3],V;V=M+(P^k&(C^P))+L[0]+3614090360&4294967295,M=k+(V<<7&4294967295|V>>>25),V=P+(C^M&(k^C))+L[1]+3905402710&4294967295,P=M+(V<<12&4294967295|V>>>20),V=C+(k^P&(M^k))+L[2]+606105819&4294967295,C=P+(V<<17&4294967295|V>>>15),V=k+(M^C&(P^M))+L[3]+3250441966&4294967295,k=C+(V<<22&4294967295|V>>>10),V=M+(P^k&(C^P))+L[4]+4118548399&4294967295,M=k+(V<<7&4294967295|V>>>25),V=P+(C^M&(k^C))+L[5]+1200080426&4294967295,P=M+(V<<12&4294967295|V>>>20),V=C+(k^P&(M^k))+L[6]+2821735955&4294967295,C=P+(V<<17&4294967295|V>>>15),V=k+(M^C&(P^M))+L[7]+4249261313&4294967295,k=C+(V<<22&4294967295|V>>>10),V=M+(P^k&(C^P))+L[8]+1770035416&4294967295,M=k+(V<<7&4294967295|V>>>25),V=P+(C^M&(k^C))+L[9]+2336552879&4294967295,P=M+(V<<12&4294967295|V>>>20),V=C+(k^P&(M^k))+L[10]+4294925233&4294967295,C=P+(V<<17&4294967295|V>>>15),V=k+(M^C&(P^M))+L[11]+2304563134&4294967295,k=C+(V<<22&4294967295|V>>>10),V=M+(P^k&(C^P))+L[12]+1804603682&4294967295,M=k+(V<<7&4294967295|V>>>25),V=P+(C^M&(k^C))+L[13]+4254626195&4294967295,P=M+(V<<12&4294967295|V>>>20),V=C+(k^P&(M^k))+L[14]+2792965006&4294967295,C=P+(V<<17&4294967295|V>>>15),V=k+(M^C&(P^M))+L[15]+1236535329&4294967295,k=C+(V<<22&4294967295|V>>>10),V=M+(C^P&(k^C))+L[1]+4129170786&4294967295,M=k+(V<<5&4294967295|V>>>27),V=P+(k^C&(M^k))+L[6]+3225465664&4294967295,P=M+(V<<9&4294967295|V>>>23),V=C+(M^k&(P^M))+L[11]+643717713&4294967295,C=P+(V<<14&4294967295|V>>>18),V=k+(P^M&(C^P))+L[0]+3921069994&4294967295,k=C+(V<<20&4294967295|V>>>12),V=M+(C^P&(k^C))+L[5]+3593408605&4294967295,M=k+(V<<5&4294967295|V>>>27),V=P+(k^C&(M^k))+L[10]+38016083&4294967295,P=M+(V<<9&4294967295|V>>>23),V=C+(M^k&(P^M))+L[15]+3634488961&4294967295,C=P+(V<<14&4294967295|V>>>18),V=k+(P^M&(C^P))+L[4]+3889429448&4294967295,k=C+(V<<20&4294967295|V>>>12),V=M+(C^P&(k^C))+L[9]+568446438&4294967295,M=k+(V<<5&4294967295|V>>>27),V=P+(k^C&(M^k))+L[14]+3275163606&4294967295,P=M+(V<<9&4294967295|V>>>23),V=C+(M^k&(P^M))+L[3]+4107603335&4294967295,C=P+(V<<14&4294967295|V>>>18),V=k+(P^M&(C^P))+L[8]+1163531501&4294967295,k=C+(V<<20&4294967295|V>>>12),V=M+(C^P&(k^C))+L[13]+2850285829&4294967295,M=k+(V<<5&4294967295|V>>>27),V=P+(k^C&(M^k))+L[2]+4243563512&4294967295,P=M+(V<<9&4294967295|V>>>23),V=C+(M^k&(P^M))+L[7]+1735328473&4294967295,C=P+(V<<14&4294967295|V>>>18),V=k+(P^M&(C^P))+L[12]+2368359562&4294967295,k=C+(V<<20&4294967295|V>>>12),V=M+(k^C^P)+L[5]+4294588738&4294967295,M=k+(V<<4&4294967295|V>>>28),V=P+(M^k^C)+L[8]+2272392833&4294967295,P=M+(V<<11&4294967295|V>>>21),V=C+(P^M^k)+L[11]+1839030562&4294967295,C=P+(V<<16&4294967295|V>>>16),V=k+(C^P^M)+L[14]+4259657740&4294967295,k=C+(V<<23&4294967295|V>>>9),V=M+(k^C^P)+L[1]+2763975236&4294967295,M=k+(V<<4&4294967295|V>>>28),V=P+(M^k^C)+L[4]+1272893353&4294967295,P=M+(V<<11&4294967295|V>>>21),V=C+(P^M^k)+L[7]+4139469664&4294967295,C=P+(V<<16&4294967295|V>>>16),V=k+(C^P^M)+L[10]+3200236656&4294967295,k=C+(V<<23&4294967295|V>>>9),V=M+(k^C^P)+L[13]+681279174&4294967295,M=k+(V<<4&4294967295|V>>>28),V=P+(M^k^C)+L[0]+3936430074&4294967295,P=M+(V<<11&4294967295|V>>>21),V=C+(P^M^k)+L[3]+3572445317&4294967295,C=P+(V<<16&4294967295|V>>>16),V=k+(C^P^M)+L[6]+76029189&4294967295,k=C+(V<<23&4294967295|V>>>9),V=M+(k^C^P)+L[9]+3654602809&4294967295,M=k+(V<<4&4294967295|V>>>28),V=P+(M^k^C)+L[12]+3873151461&4294967295,P=M+(V<<11&4294967295|V>>>21),V=C+(P^M^k)+L[15]+530742520&4294967295,C=P+(V<<16&4294967295|V>>>16),V=k+(C^P^M)+L[2]+3299628645&4294967295,k=C+(V<<23&4294967295|V>>>9),V=M+(C^(k|~P))+L[0]+4096336452&4294967295,M=k+(V<<6&4294967295|V>>>26),V=P+(k^(M|~C))+L[7]+1126891415&4294967295,P=M+(V<<10&4294967295|V>>>22),V=C+(M^(P|~k))+L[14]+2878612391&4294967295,C=P+(V<<15&4294967295|V>>>17),V=k+(P^(C|~M))+L[5]+4237533241&4294967295,k=C+(V<<21&4294967295|V>>>11),V=M+(C^(k|~P))+L[12]+1700485571&4294967295,M=k+(V<<6&4294967295|V>>>26),V=P+(k^(M|~C))+L[3]+2399980690&4294967295,P=M+(V<<10&4294967295|V>>>22),V=C+(M^(P|~k))+L[10]+4293915773&4294967295,C=P+(V<<15&4294967295|V>>>17),V=k+(P^(C|~M))+L[1]+2240044497&4294967295,k=C+(V<<21&4294967295|V>>>11),V=M+(C^(k|~P))+L[8]+1873313359&4294967295,M=k+(V<<6&4294967295|V>>>26),V=P+(k^(M|~C))+L[15]+4264355552&4294967295,P=M+(V<<10&4294967295|V>>>22),V=C+(M^(P|~k))+L[6]+2734768916&4294967295,C=P+(V<<15&4294967295|V>>>17),V=k+(P^(C|~M))+L[13]+1309151649&4294967295,k=C+(V<<21&4294967295|V>>>11),V=M+(C^(k|~P))+L[4]+4149444226&4294967295,M=k+(V<<6&4294967295|V>>>26),V=P+(k^(M|~C))+L[11]+3174756917&4294967295,P=M+(V<<10&4294967295|V>>>22),V=C+(M^(P|~k))+L[2]+718787259&4294967295,C=P+(V<<15&4294967295|V>>>17),V=k+(P^(C|~M))+L[9]+3951481745&4294967295,G.g[0]=G.g[0]+M&4294967295,G.g[1]=G.g[1]+(C+(V<<21&4294967295|V>>>11))&4294967295,G.g[2]=G.g[2]+C&4294967295,G.g[3]=G.g[3]+P&4294967295}r.prototype.v=function(G,M){M===void 0&&(M=G.length);const k=M-this.blockSize,L=this.C;let C=this.h,P=0;for(;P<M;){if(C==0)for(;P<=k;)a(this,G,P),P+=this.blockSize;if(typeof G=="string"){for(;P<M;)if(L[C++]=G.charCodeAt(P++),C==this.blockSize){a(this,L),C=0;break}}else for(;P<M;)if(L[C++]=G[P++],C==this.blockSize){a(this,L),C=0;break}}this.h=C,this.o+=M},r.prototype.A=function(){var G=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);G[0]=128;for(var M=1;M<G.length-8;++M)G[M]=0;M=this.o*8;for(var k=G.length-8;k<G.length;++k)G[k]=M&255,M/=256;for(this.v(G),G=Array(16),M=0,k=0;k<4;++k)for(let L=0;L<32;L+=8)G[M++]=this.g[k]>>>L&255;return G};function o(G,M){var k=u;return Object.prototype.hasOwnProperty.call(k,G)?k[G]:k[G]=M(G)}function c(G,M){this.h=M;const k=[];let L=!0;for(let C=G.length-1;C>=0;C--){const P=G[C]|0;L&&P==M||(k[C]=P,L=!1)}this.g=k}var u={};function h(G){return-128<=G&&G<128?o(G,function(M){return new c([M|0],M<0?-1:0)}):new c([G|0],G<0?-1:0)}function f(G){if(isNaN(G)||!isFinite(G))return x;if(G<0)return j(f(-G));const M=[];let k=1;for(let L=0;G>=k;L++)M[L]=G/k|0,k*=4294967296;return new c(M,0)}function g(G,M){if(G.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(G.charAt(0)=="-")return j(g(G.substring(1),M));if(G.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=f(Math.pow(M,8));let L=x;for(let P=0;P<G.length;P+=8){var C=Math.min(8,G.length-P);const V=parseInt(G.substring(P,P+C),M);C<8?(C=f(Math.pow(M,C)),L=L.j(C).add(f(V))):(L=L.j(k),L=L.add(f(V)))}return L}var x=h(0),v=h(1),b=h(16777216);n=c.prototype,n.m=function(){if(E(this))return-j(this).m();let G=0,M=1;for(let k=0;k<this.g.length;k++){const L=this.i(k);G+=(L>=0?L:4294967296+L)*M,M*=4294967296}return G},n.toString=function(G){if(G=G||10,G<2||36<G)throw Error("radix out of range: "+G);if(T(this))return"0";if(E(this))return"-"+j(this).toString(G);const M=f(Math.pow(G,6));var k=this;let L="";for(;;){const C=B(k,M).g;k=S(k,C.j(M));let P=((k.g.length>0?k.g[0]:k.h)>>>0).toString(G);if(k=C,T(k))return P+L;for(;P.length<6;)P="0"+P;L=P+L}},n.i=function(G){return G<0?0:G<this.g.length?this.g[G]:this.h};function T(G){if(G.h!=0)return!1;for(let M=0;M<G.g.length;M++)if(G.g[M]!=0)return!1;return!0}function E(G){return G.h==-1}n.l=function(G){return G=S(this,G),E(G)?-1:T(G)?0:1};function j(G){const M=G.g.length,k=[];for(let L=0;L<M;L++)k[L]=~G.g[L];return new c(k,~G.h).add(v)}n.abs=function(){return E(this)?j(this):this},n.add=function(G){const M=Math.max(this.g.length,G.g.length),k=[];let L=0;for(let C=0;C<=M;C++){let P=L+(this.i(C)&65535)+(G.i(C)&65535),V=(P>>>16)+(this.i(C)>>>16)+(G.i(C)>>>16);L=V>>>16,P&=65535,V&=65535,k[C]=V<<16|P}return new c(k,k[k.length-1]&-2147483648?-1:0)};function S(G,M){return G.add(j(M))}n.j=function(G){if(T(this)||T(G))return x;if(E(this))return E(G)?j(this).j(j(G)):j(j(this).j(G));if(E(G))return j(this.j(j(G)));if(this.l(b)<0&&G.l(b)<0)return f(this.m()*G.m());const M=this.g.length+G.g.length,k=[];for(var L=0;L<2*M;L++)k[L]=0;for(L=0;L<this.g.length;L++)for(let C=0;C<G.g.length;C++){const P=this.i(L)>>>16,V=this.i(L)&65535,oe=G.i(C)>>>16,Ne=G.i(C)&65535;k[2*L+2*C]+=V*Ne,D(k,2*L+2*C),k[2*L+2*C+1]+=P*Ne,D(k,2*L+2*C+1),k[2*L+2*C+1]+=V*oe,D(k,2*L+2*C+1),k[2*L+2*C+2]+=P*oe,D(k,2*L+2*C+2)}for(G=0;G<M;G++)k[G]=k[2*G+1]<<16|k[2*G];for(G=M;G<2*M;G++)k[G]=0;return new c(k,0)};function D(G,M){for(;(G[M]&65535)!=G[M];)G[M+1]+=G[M]>>>16,G[M]&=65535,M++}function O(G,M){this.g=G,this.h=M}function B(G,M){if(T(M))throw Error("division by zero");if(T(G))return new O(x,x);if(E(G))return M=B(j(G),M),new O(j(M.g),j(M.h));if(E(M))return M=B(G,j(M)),new O(j(M.g),M.h);if(G.g.length>30){if(E(G)||E(M))throw Error("slowDivide_ only works with positive integers.");for(var k=v,L=M;L.l(G)<=0;)k=re(k),L=re(L);var C=ae(k,1),P=ae(L,1);for(L=ae(L,2),k=ae(k,2);!T(L);){var V=P.add(L);V.l(G)<=0&&(C=C.add(k),P=V),L=ae(L,1),k=ae(k,1)}return M=S(G,C.j(M)),new O(C,M)}for(C=x;G.l(M)>=0;){for(k=Math.max(1,Math.floor(G.m()/M.m())),L=Math.ceil(Math.log(k)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),P=f(k),V=P.j(M);E(V)||V.l(G)>0;)k-=L,P=f(k),V=P.j(M);T(P)&&(P=v),C=C.add(P),G=S(G,V)}return new O(C,G)}n.B=function(G){return B(this,G).h},n.and=function(G){const M=Math.max(this.g.length,G.g.length),k=[];for(let L=0;L<M;L++)k[L]=this.i(L)&G.i(L);return new c(k,this.h&G.h)},n.or=function(G){const M=Math.max(this.g.length,G.g.length),k=[];for(let L=0;L<M;L++)k[L]=this.i(L)|G.i(L);return new c(k,this.h|G.h)},n.xor=function(G){const M=Math.max(this.g.length,G.g.length),k=[];for(let L=0;L<M;L++)k[L]=this.i(L)^G.i(L);return new c(k,this.h^G.h)};function re(G){const M=G.g.length+1,k=[];for(let L=0;L<M;L++)k[L]=G.i(L)<<1|G.i(L-1)>>>31;return new c(k,G.h)}function ae(G,M){const k=M>>5;M%=32;const L=G.g.length-k,C=[];for(let P=0;P<L;P++)C[P]=M>0?G.i(P+k)>>>M|G.i(P+k+1)<<32-M:G.i(P+k);return new c(C,G.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,NS=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=g,ed=c}).apply(typeof Vj<"u"?Vj:typeof self<"u"?self:typeof window<"u"?window:{});var m0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var jS,og,_S,F0,Z1,SS,ES,AS;(function(){var n,e=Object.defineProperty;function t(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof m0=="object"&&m0];for(var R=0;R<y.length;++R){var z=y[R];if(z&&z.Math==Math)return z}throw Error("Cannot find global object")}var r=t(this);function a(y,R){if(R)e:{var z=r;y=y.split(".");for(var Z=0;Z<y.length-1;Z++){var _e=y[Z];if(!(_e in z))break e;z=z[_e]}y=y[y.length-1],Z=z[y],R=R(Z),R!=Z&&R!=null&&e(z,y,{configurable:!0,writable:!0,value:R})}}a("Symbol.dispose",function(y){return y||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(y){return y||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(y){return y||function(R){var z=[],Z;for(Z in R)Object.prototype.hasOwnProperty.call(R,Z)&&z.push([Z,R[Z]]);return z}});var o=o||{},c=this||self;function u(y){var R=typeof y;return R=="object"&&y!=null||R=="function"}function h(y,R,z){return y.call.apply(y.bind,arguments)}function f(y,R,z){return f=h,f.apply(null,arguments)}function g(y,R){var z=Array.prototype.slice.call(arguments,1);return function(){var Z=z.slice();return Z.push.apply(Z,arguments),y.apply(this,Z)}}function x(y,R){function z(){}z.prototype=R.prototype,y.Z=R.prototype,y.prototype=new z,y.prototype.constructor=y,y.Ob=function(Z,_e,Pe){for(var et=Array(arguments.length-2),Zt=2;Zt<arguments.length;Zt++)et[Zt-2]=arguments[Zt];return R.prototype[_e].apply(Z,et)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?y=>y&&AsyncContext.Snapshot.wrap(y):y=>y;function b(y){const R=y.length;if(R>0){const z=Array(R);for(let Z=0;Z<R;Z++)z[Z]=y[Z];return z}return[]}function T(y,R){for(let Z=1;Z<arguments.length;Z++){const _e=arguments[Z];var z=typeof _e;if(z=z!="object"?z:_e?Array.isArray(_e)?"array":z:"null",z=="array"||z=="object"&&typeof _e.length=="number"){z=y.length||0;const Pe=_e.length||0;y.length=z+Pe;for(let et=0;et<Pe;et++)y[z+et]=_e[et]}else y.push(_e)}}class E{constructor(R,z){this.i=R,this.j=z,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function j(y){c.setTimeout(()=>{throw y},0)}function S(){var y=G;let R=null;return y.g&&(R=y.g,y.g=y.g.next,y.g||(y.h=null),R.next=null),R}class D{constructor(){this.h=this.g=null}add(R,z){const Z=O.get();Z.set(R,z),this.h?this.h.next=Z:this.g=Z,this.h=Z}}var O=new E(()=>new B,y=>y.reset());class B{constructor(){this.next=this.g=this.h=null}set(R,z){this.h=R,this.g=z,this.next=null}reset(){this.next=this.g=this.h=null}}let re,ae=!1,G=new D,M=()=>{const y=Promise.resolve(void 0);re=()=>{y.then(k)}};function k(){for(var y;y=S();){try{y.h.call(y.g)}catch(z){j(z)}var R=O;R.j(y),R.h<100&&(R.h++,y.next=R.g,R.g=y)}ae=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(y,R){this.type=y,this.g=this.target=R,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var y=!1,R=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const z=()=>{};c.addEventListener("test",z,R),c.removeEventListener("test",z,R)}catch{}return y})();function V(y){return/^[\s\xa0]*$/.test(y)}function oe(y,R){C.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y&&this.init(y,R)}x(oe,C),oe.prototype.init=function(y,R){const z=this.type=y.type,Z=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;this.target=y.target||y.srcElement,this.g=R,R=y.relatedTarget,R||(z=="mouseover"?R=y.fromElement:z=="mouseout"&&(R=y.toElement)),this.relatedTarget=R,Z?(this.clientX=Z.clientX!==void 0?Z.clientX:Z.pageX,this.clientY=Z.clientY!==void 0?Z.clientY:Z.pageY,this.screenX=Z.screenX||0,this.screenY=Z.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=y.pointerType,this.state=y.state,this.i=y,y.defaultPrevented&&oe.Z.h.call(this)},oe.prototype.h=function(){oe.Z.h.call(this);const y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Ne="closure_listenable_"+(Math.random()*1e6|0),ue=0;function pe(y,R,z,Z,_e){this.listener=y,this.proxy=null,this.src=R,this.type=z,this.capture=!!Z,this.ha=_e,this.key=++ue,this.da=this.fa=!1}function de(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function Se(y,R,z){for(const Z in y)R.call(z,y[Z],Z,y)}function ze(y,R){for(const z in y)R.call(void 0,y[z],z,y)}function te(y){const R={};for(const z in y)R[z]=y[z];return R}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(y,R){let z,Z;for(let _e=1;_e<arguments.length;_e++){Z=arguments[_e];for(z in Z)y[z]=Z[z];for(let Pe=0;Pe<q.length;Pe++)z=q[Pe],Object.prototype.hasOwnProperty.call(Z,z)&&(y[z]=Z[z])}}function ne(y){this.src=y,this.g={},this.h=0}ne.prototype.add=function(y,R,z,Z,_e){const Pe=y.toString();y=this.g[Pe],y||(y=this.g[Pe]=[],this.h++);const et=me(y,R,Z,_e);return et>-1?(R=y[et],z||(R.fa=!1)):(R=new pe(R,this.src,Pe,!!Z,_e),R.fa=z,y.push(R)),R};function he(y,R){const z=R.type;if(z in y.g){var Z=y.g[z],_e=Array.prototype.indexOf.call(Z,R,void 0),Pe;(Pe=_e>=0)&&Array.prototype.splice.call(Z,_e,1),Pe&&(de(R),y.g[z].length==0&&(delete y.g[z],y.h--))}}function me(y,R,z,Z){for(let _e=0;_e<y.length;++_e){const Pe=y[_e];if(!Pe.da&&Pe.listener==R&&Pe.capture==!!z&&Pe.ha==Z)return _e}return-1}var be="closure_lm_"+(Math.random()*1e6|0),Le={};function Re(y,R,z,Z,_e){if(Array.isArray(R)){for(let Pe=0;Pe<R.length;Pe++)Re(y,R[Pe],z,Z,_e);return null}return z=Pt(z),y&&y[Ne]?y.J(R,z,u(Z)?!!Z.capture:!1,_e):qe(y,R,z,!1,Z,_e)}function qe(y,R,z,Z,_e,Pe){if(!R)throw Error("Invalid event type");const et=u(_e)?!!_e.capture:!!_e;let Zt=st(y);if(Zt||(y[be]=Zt=new ne(y)),z=Zt.add(R,z,Z,et,Pe),z.proxy)return z;if(Z=Je(),z.proxy=Z,Z.src=y,Z.listener=z,y.addEventListener)P||(_e=et),_e===void 0&&(_e=!1),y.addEventListener(R.toString(),Z,_e);else if(y.attachEvent)y.attachEvent(ft(R.toString()),Z);else if(y.addListener&&y.removeListener)y.addListener(Z);else throw Error("addEventListener and attachEvent are unavailable.");return z}function Je(){function y(z){return R.call(y.src,y.listener,z)}const R=se;return y}function it(y,R,z,Z,_e){if(Array.isArray(R))for(var Pe=0;Pe<R.length;Pe++)it(y,R[Pe],z,Z,_e);else Z=u(Z)?!!Z.capture:!!Z,z=Pt(z),y&&y[Ne]?(y=y.i,Pe=String(R).toString(),Pe in y.g&&(R=y.g[Pe],z=me(R,z,Z,_e),z>-1&&(de(R[z]),Array.prototype.splice.call(R,z,1),R.length==0&&(delete y.g[Pe],y.h--)))):y&&(y=st(y))&&(R=y.g[R.toString()],y=-1,R&&(y=me(R,z,Z,_e)),(z=y>-1?R[y]:null)&&at(z))}function at(y){if(typeof y!="number"&&y&&!y.da){var R=y.src;if(R&&R[Ne])he(R.i,y);else{var z=y.type,Z=y.proxy;R.removeEventListener?R.removeEventListener(z,Z,y.capture):R.detachEvent?R.detachEvent(ft(z),Z):R.addListener&&R.removeListener&&R.removeListener(Z),(z=st(R))?(he(z,y),z.h==0&&(z.src=null,R[be]=null)):de(y)}}}function ft(y){return y in Le?Le[y]:Le[y]="on"+y}function se(y,R){if(y.da)y=!0;else{R=new oe(R,this);const z=y.listener,Z=y.ha||y.src;y.fa&&at(y),y=z.call(Z,R)}return y}function st(y){return y=y[be],y instanceof ne?y:null}var rn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Pt(y){return typeof y=="function"?y:(y[rn]||(y[rn]=function(R){return y.handleEvent(R)}),y[rn])}function He(){L.call(this),this.i=new ne(this),this.M=this,this.G=null}x(He,L),He.prototype[Ne]=!0,He.prototype.removeEventListener=function(y,R,z,Z){it(this,y,R,z,Z)};function ct(y,R){var z,Z=y.G;if(Z)for(z=[];Z;Z=Z.G)z.push(Z);if(y=y.M,Z=R.type||R,typeof R=="string")R=new C(R,y);else if(R instanceof C)R.target=R.target||y;else{var _e=R;R=new C(Z,y),Q(R,_e)}_e=!0;let Pe,et;if(z)for(et=z.length-1;et>=0;et--)Pe=R.g=z[et],_e=lt(Pe,Z,!0,R)&&_e;if(Pe=R.g=y,_e=lt(Pe,Z,!0,R)&&_e,_e=lt(Pe,Z,!1,R)&&_e,z)for(et=0;et<z.length;et++)Pe=R.g=z[et],_e=lt(Pe,Z,!1,R)&&_e}He.prototype.N=function(){if(He.Z.N.call(this),this.i){var y=this.i;for(const R in y.g){const z=y.g[R];for(let Z=0;Z<z.length;Z++)de(z[Z]);delete y.g[R],y.h--}}this.G=null},He.prototype.J=function(y,R,z,Z){return this.i.add(String(y),R,!1,z,Z)},He.prototype.K=function(y,R,z,Z){return this.i.add(String(y),R,!0,z,Z)};function lt(y,R,z,Z){if(R=y.i.g[String(R)],!R)return!0;R=R.concat();let _e=!0;for(let Pe=0;Pe<R.length;++Pe){const et=R[Pe];if(et&&!et.da&&et.capture==z){const Zt=et.listener,pr=et.ha||et.src;et.fa&&he(y.i,et),_e=Zt.call(pr,Z)!==!1&&_e}}return _e&&!Z.defaultPrevented}function Mt(y,R){if(typeof y!="function")if(y&&typeof y.handleEvent=="function")y=f(y.handleEvent,y);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:c.setTimeout(y,R||0)}function Et(y){y.g=Mt(()=>{y.g=null,y.i&&(y.i=!1,Et(y))},y.l);const R=y.h;y.h=null,y.m.apply(null,R)}class sn extends L{constructor(R,z){super(),this.m=R,this.l=z,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:Et(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dn(y){L.call(this),this.h=y,this.g={}}x(dn,L);var Qt=[];function pn(y){Se(y.g,function(R,z){this.g.hasOwnProperty(z)&&at(R)},y),y.g={}}dn.prototype.N=function(){dn.Z.N.call(this),pn(this)},dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var on=c.JSON.stringify,wt=c.JSON.parse,en=class{stringify(y){return c.JSON.stringify(y,void 0)}parse(y){return c.JSON.parse(y,void 0)}};function Nt(){}function Cr(){}var ln={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Lt(){C.call(this,"d")}x(Lt,C);function Wt(){C.call(this,"c")}x(Wt,C);var an={},Tt=null;function zn(){return Tt=Tt||new He}an.Ia="serverreachability";function zt(y){C.call(this,an.Ia,y)}x(zt,C);function qt(y){const R=zn();ct(R,new zt(R))}an.STAT_EVENT="statevent";function Hn(y,R){C.call(this,an.STAT_EVENT,y),this.stat=R}x(Hn,C);function At(y){const R=zn();ct(R,new Hn(R,y))}an.Ja="timingevent";function jt(y,R){C.call(this,an.Ja,y),this.size=R}x(jt,C);function xn(y,R){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){y()},R)}function qs(){this.g=!0}qs.prototype.ua=function(){this.g=!1};function As(y,R,z,Z,_e,Pe){y.info(function(){if(y.g)if(Pe){var et="",Zt=Pe.split("&");for(let bn=0;bn<Zt.length;bn++){var pr=Zt[bn].split("=");if(pr.length>1){const Kn=pr[0];pr=pr[1];const ks=Kn.split("_");et=ks.length>=2&&ks[1]=="type"?et+(Kn+"="+pr+"&"):et+(Kn+"=redacted&")}}}else et=null;else et=Pe;return"XMLHTTP REQ ("+Z+") [attempt "+_e+"]: "+R+`
`+z+`
`+et})}function yi(y,R,z,Z,_e,Pe,et){y.info(function(){return"XMLHTTP RESP ("+Z+") [ attempt "+_e+"]: "+R+`
`+z+`
`+Pe+" "+et})}function gs(y,R,z,Z){y.info(function(){return"XMLHTTP TEXT ("+R+"): "+Wi(y,z)+(Z?" "+Z:"")})}function Ct(y,R){y.info(function(){return"TIMEOUT: "+R})}qs.prototype.info=function(){};function Wi(y,R){if(!y.g)return R;if(!R)return null;try{const Pe=JSON.parse(R);if(Pe){for(y=0;y<Pe.length;y++)if(Array.isArray(Pe[y])){var z=Pe[y];if(!(z.length<2)){var Z=z[1];if(Array.isArray(Z)&&!(Z.length<1)){var _e=Z[0];if(_e!="noop"&&_e!="stop"&&_e!="close")for(let et=1;et<Z.length;et++)Z[et]=""}}}}return on(Pe)}catch{return R}}var Na={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ia={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},oa;function nr(){}x(nr,Nt),nr.prototype.g=function(){return new XMLHttpRequest},oa=new nr;function mr(y){return encodeURIComponent(String(y))}function ns(y){var R=1;y=y.split(":");const z=[];for(;R>0&&y.length;)z.push(y.shift()),R--;return y.length&&z.push(y.join(":")),z}function Gs(y,R,z,Z){this.j=y,this.i=R,this.l=z,this.S=Z||1,this.V=new dn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ts}function Ts(){this.i=null,this.g="",this.h=!1}var $n={},ar={};function rs(y,R,z){y.M=1,y.A=bo(Or(R)),y.u=z,y.R=!0,la(y,null)}function la(y,R){y.F=Date.now(),ca(y),y.B=Or(y.A);var z=y.B,Z=y.S;Array.isArray(Z)||(Z=[String(Z)]),El(z.i,"t",Z),y.C=0,z=y.j.L,y.h=new Ts,y.g=ht(y.j,z?R:null,!y.u),y.P>0&&(y.O=new sn(f(y.Y,y,y.g),y.P)),R=y.V,z=y.g,Z=y.ba;var _e="readystatechange";Array.isArray(_e)||(_e&&(Qt[0]=_e.toString()),_e=Qt);for(let Pe=0;Pe<_e.length;Pe++){const et=Re(z,_e[Pe],Z||R.handleEvent,!1,R.h||R);if(!et)break;R.g[et.key]=et}R=y.J?te(y.J):{},y.u?(y.v||(y.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.B,y.v,y.u,R)):(y.v="GET",y.g.ea(y.B,y.v,null,R)),qt(),As(y.i,y.v,y.B,y.l,y.S,y.u)}Gs.prototype.ba=function(y){y=y.target;const R=this.O;R&&Ta(y)==3?R.j():this.Y(y)},Gs.prototype.Y=function(y){try{if(y==this.g)e:{const Zt=Ta(this.g),pr=this.g.ya(),bn=this.g.ca();if(!(Zt<3)&&(Zt!=3||this.g&&(this.h.h||this.g.la()||Wr(this.g)))){this.K||Zt!=4||pr==7||(pr==8||bn<=0?qt(3):qt(2)),ja(this);var R=this.g.ca();this.X=R;var z=Fa(this);if(this.o=R==200,yi(this.i,this.v,this.B,this.l,this.S,Zt,R),this.o){if(this.U&&!this.L){t:{if(this.g){var Z,_e=this.g;if((Z=_e.g?_e.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(Z)){var Pe=Z;break t}}Pe=null}if(y=Pe)gs(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ua(this,y);else{this.o=!1,this.m=3,At(12),_a(this),Hs(this);break e}}if(this.R){y=!0;let Kn;for(;!this.K&&this.C<z.length;)if(Kn=ri(this,z),Kn==ar){Zt==4&&(this.m=4,At(14),y=!1),gs(this.i,this.l,null,"[Incomplete Response]");break}else if(Kn==$n){this.m=4,At(15),gs(this.i,this.l,z,"[Invalid Chunk]"),y=!1;break}else gs(this.i,this.l,Kn,null),Ua(this,Kn);if(yo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||z.length!=0||this.h.h||(this.m=1,At(16),y=!1),this.o=this.o&&y,!y)gs(this.i,this.l,z,"[Invalid Chunked Response]"),_a(this),Hs(this);else if(z.length>0&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.aa&&!et.P&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Il(et),et.P=!0,At(11))}}else gs(this.i,this.l,z,null),Ua(this,z);Zt==4&&_a(this),this.o&&!this.K&&(Zt==4?le(this.j,this):(this.o=!1,ca(this)))}else bi(this.g),R==400&&z.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),_a(this),Hs(this)}}}catch{}finally{}};function Fa(y){if(!yo(y))return y.g.la();const R=Wr(y.g);if(R==="")return"";let z="";const Z=R.length,_e=Ta(y.g)==4;if(!y.h.i){if(typeof TextDecoder>"u")return _a(y),Hs(y),"";y.h.i=new c.TextDecoder}for(let Pe=0;Pe<Z;Pe++)y.h.h=!0,z+=y.h.i.decode(R[Pe],{stream:!(_e&&Pe==Z-1)});return R.length=0,y.h.g+=z,y.C=0,y.h.g}function yo(y){return y.g?y.v=="GET"&&y.M!=2&&y.j.Aa:!1}function ri(y,R){var z=y.C,Z=R.indexOf(`
`,z);return Z==-1?ar:(z=Number(R.substring(z,Z)),isNaN(z)?$n:(Z+=1,Z+z>R.length?ar:(R=R.slice(Z,Z+z),y.C=Z+z,R)))}Gs.prototype.cancel=function(){this.K=!0,_a(this)};function ca(y){y.T=Date.now()+y.H,Ki(y,y.H)}function Ki(y,R){if(y.D!=null)throw Error("WatchDog timer not null");y.D=xn(f(y.aa,y),R)}function ja(y){y.D&&(c.clearTimeout(y.D),y.D=null)}Gs.prototype.aa=function(){this.D=null;const y=Date.now();y-this.T>=0?(Ct(this.i,this.B),this.M!=2&&(qt(),At(17)),_a(this),this.m=2,Hs(this)):Ki(this,this.T-y)};function Hs(y){y.j.I==0||y.K||le(y.j,y)}function _a(y){ja(y);var R=y.O;R&&typeof R.dispose=="function"&&R.dispose(),y.O=null,pn(y.V),y.g&&(R=y.g,y.g=null,R.abort(),R.dispose())}function Ua(y,R){try{var z=y.j;if(z.I!=0&&(z.g==y||si(z.h,y))){if(!y.L&&si(z.h,y)&&z.I==3){try{var Z=z.Ba.g.parse(R)}catch{Z=null}if(Array.isArray(Z)&&Z.length==3){var _e=Z;if(_e[0]==0){e:if(!z.v){if(z.g)if(z.g.F+3e3<y.F)H(z),wi(z);else break e;oi(z),At(18)}}else z.xa=_e[1],0<z.xa-z.K&&_e[2]<37500&&z.F&&z.A==0&&!z.C&&(z.C=xn(f(z.Va,z),6e3));Va(z.h)<=1&&z.ta&&(z.ta=void 0)}else we(z,11)}else if((y.L||z.g==y)&&H(z),!V(R))for(_e=z.Ba.g.parse(R),R=0;R<_e.length;R++){let bn=_e[R];const Kn=bn[0];if(!(Kn<=z.K))if(z.K=Kn,bn=bn[1],z.I==2)if(bn[0]=="c"){z.M=bn[1],z.ba=bn[2];const ks=bn[3];ks!=null&&(z.ka=ks,z.j.info("VER="+z.ka));const Ws=bn[4];Ws!=null&&(z.za=Ws,z.j.info("SVER="+z.za));const ir=bn[5];ir!=null&&typeof ir=="number"&&ir>0&&(Z=1.5*ir,z.O=Z,z.j.info("backChannelRequestTimeoutMs_="+Z)),Z=z;const Ks=y.g;if(Ks){const li=Ks.g?Ks.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(li){var Pe=Z.h;Pe.g||li.indexOf("spdy")==-1&&li.indexOf("quic")==-1&&li.indexOf("h2")==-1||(Pe.j=Pe.l,Pe.g=new Set,Pe.h&&(Ho(Pe,Pe.h),Pe.h=null))}if(Z.G){const _o=Ks.g?Ks.g.getResponseHeader("X-HTTP-Session-Id"):null;_o&&(Z.wa=_o,kn(Z.J,Z.G,_o))}}z.I=3,z.l&&z.l.ra(),z.aa&&(z.T=Date.now()-y.F,z.j.info("Handshake RTT: "+z.T+"ms")),Z=z;var et=y;if(Z.na=Xe(Z,Z.L?Z.ba:null,Z.W),et.L){_l(Z.h,et);var Zt=et,pr=Z.O;pr&&(Zt.H=pr),Zt.D&&(ja(Zt),ca(Zt)),Z.g=et}else pc(Z);z.i.length>0&&za(z)}else bn[0]!="stop"&&bn[0]!="close"||we(z,7);else z.I==3&&(bn[0]=="stop"||bn[0]=="close"?bn[0]=="stop"?we(z,7):jo(z):bn[0]!="noop"&&z.l&&z.l.qa(bn),z.A=0)}}qt(4)}catch{}}var Ir=class{constructor(y,R){this.g=y,this.map=R}};function jl(y){this.l=y||10,c.PerformanceNavigationTiming?(y=c.performance.getEntriesByType("navigation"),y=y.length>0&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ua(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Va(y){return y.h?1:y.g?y.g.size:0}function si(y,R){return y.h?y.h==R:y.g?y.g.has(R):!1}function Ho(y,R){y.g?y.g.add(R):y.h=R}function _l(y,R){y.h&&y.h==R?y.h=null:y.g&&y.g.has(R)&&y.g.delete(R)}jl.prototype.cancel=function(){if(this.i=Sl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Sl(y){if(y.h!=null)return y.i.concat(y.h.G);if(y.g!=null&&y.g.size!==0){let R=y.i;for(const z of y.g.values())R=R.concat(z.G);return R}return b(y.i)}var uc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sa(y,R){if(y){y=y.split("&");for(let z=0;z<y.length;z++){const Z=y[z].indexOf("=");let _e,Pe=null;Z>=0?(_e=y[z].substring(0,Z),Pe=y[z].substring(Z+1)):_e=y[z],R(_e,Pe?decodeURIComponent(Pe.replace(/\+/g," ")):"")}}}function Cs(y){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;y instanceof Cs?(this.l=y.l,wn(this,y.j),this.o=y.o,this.g=y.g,Yi(this,y.u),this.h=y.h,Ba(this,Al(y.i)),this.m=y.m):y&&(R=String(y).match(uc))?(this.l=!1,wn(this,R[1]||"",!0),this.o=$r(R[2]||""),this.g=$r(R[3]||"",!0),Yi(this,R[4]),this.h=$r(R[5]||"",!0),Ba(this,R[6]||"",!0),this.m=$r(R[7]||"")):(this.l=!1,this.i=new Xi(null,this.l))}Cs.prototype.toString=function(){const y=[];var R=this.j;R&&y.push(jr(R,$o,!0),":");var z=this.g;return(z||R=="file")&&(y.push("//"),(R=this.o)&&y.push(jr(R,$o,!0),"@"),y.push(mr(z).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),z=this.u,z!=null&&y.push(":",String(z))),(z=this.h)&&(this.g&&z.charAt(0)!="/"&&y.push("/"),y.push(jr(z,z.charAt(0)=="/"?dc:ou,!0))),(z=this.i.toString())&&y.push("?",z),(z=this.m)&&y.push("#",jr(z,hc)),y.join("")},Cs.prototype.resolve=function(y){const R=Or(this);let z=!!y.j;z?wn(R,y.j):z=!!y.o,z?R.o=y.o:z=!!y.g,z?R.g=y.g:z=y.u!=null;var Z=y.h;if(z)Yi(R,y.u);else if(z=!!y.h){if(Z.charAt(0)!="/")if(this.g&&!this.h)Z="/"+Z;else{var _e=R.h.lastIndexOf("/");_e!=-1&&(Z=R.h.slice(0,_e+1)+Z)}if(_e=Z,_e==".."||_e==".")Z="";else if(_e.indexOf("./")!=-1||_e.indexOf("/.")!=-1){Z=_e.lastIndexOf("/",0)==0,_e=_e.split("/");const Pe=[];for(let et=0;et<_e.length;){const Zt=_e[et++];Zt=="."?Z&&et==_e.length&&Pe.push(""):Zt==".."?((Pe.length>1||Pe.length==1&&Pe[0]!="")&&Pe.pop(),Z&&et==_e.length&&Pe.push("")):(Pe.push(Zt),Z=!0)}Z=Pe.join("/")}else Z=_e}return z?R.h=Z:z=y.i.toString()!=="",z?Ba(R,Al(y.i)):z=!!y.m,z&&(R.m=y.m),R};function Or(y){return new Cs(y)}function wn(y,R,z){y.j=z?$r(R,!0):R,y.j&&(y.j=y.j.replace(/:$/,""))}function Yi(y,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);y.u=R}else y.u=null}function Ba(y,R,z){R instanceof Xi?(y.i=R,da(y.i,y.l)):(z||(R=jr(R,$s)),y.i=new Xi(R,y.l))}function kn(y,R,z){y.i.set(R,z)}function bo(y){return kn(y,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),y}function $r(y,R){return y?R?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function jr(y,R,z){return typeof y=="string"?(y=encodeURI(y).replace(R,Fr),z&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function Fr(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var $o=/[#\/\?@]/g,ou=/[#\?:]/g,dc=/[#\?]/g,$s=/[#\?@]/g,hc=/#/g;function Xi(y,R){this.h=this.g=null,this.i=y||null,this.j=!!R}function ps(y){y.g||(y.g=new Map,y.h=0,y.i&&Sa(y.i,function(R,z){y.add(decodeURIComponent(R.replace(/\+/g," ")),z)}))}n=Xi.prototype,n.add=function(y,R){ps(this),this.i=null,y=Qi(this,y);let z=this.g.get(y);return z||this.g.set(y,z=[]),z.push(R),this.h+=1,this};function vo(y,R){ps(y),R=Qi(y,R),y.g.has(R)&&(y.i=null,y.h-=y.g.get(R).length,y.g.delete(R))}function fc(y,R){return ps(y),R=Qi(y,R),y.g.has(R)}n.forEach=function(y,R){ps(this),this.g.forEach(function(z,Z){z.forEach(function(_e){y.call(R,_e,Z,this)},this)},this)};function mc(y,R){ps(y);let z=[];if(typeof R=="string")fc(y,R)&&(z=z.concat(y.g.get(Qi(y,R))));else for(y=Array.from(y.g.values()),R=0;R<y.length;R++)z=z.concat(y[R]);return z}n.set=function(y,R){return ps(this),this.i=null,y=Qi(this,y),fc(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[R]),this.h+=1,this},n.get=function(y,R){return y?(y=mc(this,y),y.length>0?String(y[0]):R):R};function El(y,R,z){vo(y,R),z.length>0&&(y.i=null,y.g.set(Qi(y,R),b(z)),y.h+=z.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],R=Array.from(this.g.keys());for(let Z=0;Z<R.length;Z++){var z=R[Z];const _e=mr(z);z=mc(this,z);for(let Pe=0;Pe<z.length;Pe++){let et=_e;z[Pe]!==""&&(et+="="+mr(z[Pe])),y.push(et)}}return this.i=y.join("&")};function Al(y){const R=new Xi;return R.i=y.i,y.g&&(R.g=new Map(y.g),R.h=y.h),R}function Qi(y,R){return R=String(R),y.j&&(R=R.toLowerCase()),R}function da(y,R){R&&!y.j&&(ps(y),y.i=null,y.g.forEach(function(z,Z){const _e=Z.toLowerCase();Z!=_e&&(vo(this,Z),El(this,_e,z))},y)),y.j=R}function ai(y,R){const z=new qs;if(c.Image){const Z=new Image;Z.onload=g(ha,z,"TestLoadImage: loaded",!0,R,Z),Z.onerror=g(ha,z,"TestLoadImage: error",!1,R,Z),Z.onabort=g(ha,z,"TestLoadImage: abort",!1,R,Z),Z.ontimeout=g(ha,z,"TestLoadImage: timeout",!1,R,Z),c.setTimeout(function(){Z.ontimeout&&Z.ontimeout()},1e4),Z.src=y}else R(!1)}function Ji(y,R){const z=new qs,Z=new AbortController,_e=setTimeout(()=>{Z.abort(),ha(z,"TestPingServer: timeout",!1,R)},1e4);fetch(y,{signal:Z.signal}).then(Pe=>{clearTimeout(_e),Pe.ok?ha(z,"TestPingServer: ok",!0,R):ha(z,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(_e),ha(z,"TestPingServer: error",!1,R)})}function ha(y,R,z,Z,_e){try{_e&&(_e.onload=null,_e.onerror=null,_e.onabort=null,_e.ontimeout=null),Z(z)}catch{}}function wo(){this.g=new en}function Ot(y){this.i=y.Sb||null,this.h=y.ab||!1}x(Ot,Nt),Ot.prototype.g=function(){return new Wo(this.i,this.h)};function Wo(y,R){He.call(this),this.H=y,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Wo,He),n=Wo.prototype,n.open=function(y,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=y,this.D=R,this.readyState=1,xs(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};y&&(R.body=y),(this.H||c).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,No(this)),this.readyState=0},n.Pa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,xs(this)),this.g&&(this.readyState=3,xs(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Tl(this)}else y.text().then(this.Oa.bind(this),this.ga.bind(this))};function Tl(y){y.j.read().then(y.Ma.bind(y)).catch(y.ga.bind(y))}n.Ma=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var R=y.value?y.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!y.done}))&&(this.response=this.responseText+=R)}y.done?No(this):xs(this),this.readyState==3&&Tl(this)}},n.Oa=function(y){this.g&&(this.response=this.responseText=y,No(this))},n.Na=function(y){this.g&&(this.response=y,No(this))},n.ga=function(){this.g&&No(this)};function No(y){y.readyState=4,y.l=null,y.j=null,y.B=null,xs(y)}n.setRequestHeader=function(y,R){this.A.append(y,R)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],R=this.h.entries();for(var z=R.next();!z.done;)z=z.value,y.push(z[0]+": "+z[1]),z=R.next();return y.join(`\r
`)};function xs(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(Wo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function ss(y){let R="";return Se(y,function(z,Z){R+=Z,R+=":",R+=z,R+=`\r
`}),R}function Ko(y,R,z){e:{for(Z in z){var Z=!1;break e}Z=!0}Z||(z=ss(z),typeof y=="string"?z!=null&&mr(z):kn(y,R,z))}function Wn(y){He.call(this),this.headers=new Map,this.L=y||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(Wn,He);var Ea=/^https?$/i,Yo=["POST","PUT"];n=Wn.prototype,n.Fa=function(y){this.H=y},n.ea=function(y,R,z,Z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);R=R?R.toUpperCase():"GET",this.D=y,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():oa.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(R,String(y),!0),this.B=!1}catch(Pe){ii(this,Pe);return}if(y=z||"",z=new Map(this.headers),Z)if(Object.getPrototypeOf(Z)===Object.prototype)for(var _e in Z)z.set(_e,Z[_e]);else if(typeof Z.keys=="function"&&typeof Z.get=="function")for(const Pe of Z.keys())z.set(Pe,Z.get(Pe));else throw Error("Unknown input type for opt_headers: "+String(Z));Z=Array.from(z.keys()).find(Pe=>Pe.toLowerCase()=="content-type"),_e=c.FormData&&y instanceof c.FormData,!(Array.prototype.indexOf.call(Yo,R,void 0)>=0)||Z||_e||z.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Pe,et]of z)this.g.setRequestHeader(Pe,et);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(y),this.v=!1}catch(Pe){ii(this,Pe)}};function ii(y,R){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=R,y.o=5,gc(y),Zi(y)}function gc(y){y.A||(y.A=!0,ct(y,"complete"),ct(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=y||7,ct(this,"complete"),ct(this,"abort"),Zi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zi(this,!0)),Wn.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Aa(this):this.Xa())},n.Xa=function(){Aa(this)};function Aa(y){if(y.h&&typeof o<"u"){if(y.v&&Ta(y)==4)setTimeout(y.Ca.bind(y),0);else if(ct(y,"readystatechange"),Ta(y)==4){y.h=!1;try{const Pe=y.ca();e:switch(Pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var z;if(!(z=R)){var Z;if(Z=Pe===0){let et=String(y.D).match(uc)[1]||null;!et&&c.self&&c.self.location&&(et=c.self.location.protocol.slice(0,-1)),Z=!Ea.test(et?et.toLowerCase():"")}z=Z}if(z)ct(y,"complete"),ct(y,"success");else{y.o=6;try{var _e=Ta(y)>2?y.g.statusText:""}catch{_e=""}y.l=_e+" ["+y.ca()+"]",gc(y)}}finally{Zi(y)}}}}function Zi(y,R){if(y.g){y.m&&(clearTimeout(y.m),y.m=null);const z=y.g;y.g=null,R||ct(y,"ready");try{z.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ta(y){return y.g?y.g.readyState:0}n.ca=function(){try{return Ta(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(y){if(this.g){var R=this.g.responseText;return y&&R.indexOf(y)==0&&(R=R.substring(y.length)),wt(R)}};function Wr(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.F){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function bi(y){const R={};y=(y.g&&Ta(y)>=2&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let Z=0;Z<y.length;Z++){if(V(y[Z]))continue;var z=ns(y[Z]);const _e=z[0];if(z=z[1],typeof z!="string")continue;z=z.trim();const Pe=R[_e]||[];R[_e]=Pe,Pe.push(z)}ze(R,function(Z){return Z.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Is(y,R,z){return z&&z.internalChannelParams&&z.internalChannelParams[y]||R}function vi(y){this.za=0,this.i=[],this.j=new qs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Is("failFast",!1,y),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Is("baseRetryDelayMs",5e3,y),this.Za=Is("retryDelaySeedMs",1e4,y),this.Ta=Is("forwardChannelMaxRetries",2,y),this.va=Is("forwardChannelRequestTimeoutMs",2e4,y),this.ma=y&&y.xmlHttpFactory||void 0,this.Ua=y&&y.Rb||void 0,this.Aa=y&&y.useFetchStreams||!1,this.O=void 0,this.L=y&&y.supportsCrossDomainXhr||!1,this.M="",this.h=new jl(y&&y.concurrentRequestLimit),this.Ba=new wo,this.S=y&&y.fastHandshake||!1,this.R=y&&y.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=y&&y.Pb||!1,y&&y.ua&&this.j.ua(),y&&y.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&y&&y.detectBufferingProxy||!1,this.ia=void 0,y&&y.longPollingTimeout&&y.longPollingTimeout>0&&(this.ia=y.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=vi.prototype,n.ka=8,n.I=1,n.connect=function(y,R,z,Z){At(0),this.W=y,this.H=R||{},z&&Z!==void 0&&(this.H.OSID=z,this.H.OAID=Z),this.F=this.X,this.J=Xe(this,null,this.W),za(this)};function jo(y){if(Ni(y),y.I==3){var R=y.V++,z=Or(y.J);if(kn(z,"SID",y.M),kn(z,"RID",R),kn(z,"TYPE","terminate"),Ca(y,z),R=new Gs(y,y.j,R),R.M=2,R.A=bo(Or(z)),z=!1,c.navigator&&c.navigator.sendBeacon)try{z=c.navigator.sendBeacon(R.A.toString(),"")}catch{}!z&&c.Image&&(new Image().src=R.A,z=!0),z||(R.g=ht(R.j,null),R.g.ea(R.A)),R.F=Date.now(),ca(R)}Ve(y)}function wi(y){y.g&&(Il(y),y.g.cancel(),y.g=null)}function Ni(y){wi(y),y.v&&(c.clearTimeout(y.v),y.v=null),H(y),y.h.cancel(),y.m&&(typeof y.m=="number"&&c.clearTimeout(y.m),y.m=null)}function za(y){if(!ua(y.h)&&!y.m){y.m=!0;var R=y.Ea;re||M(),ae||(re(),ae=!0),G.add(R,y),y.D=0}}function Xo(y,R){return Va(y.h)>=y.h.j-(y.m?1:0)?!1:y.m?(y.i=R.G.concat(y.i),!0):y.I==1||y.I==2||y.D>=(y.Sa?0:y.Ta)?!1:(y.m=xn(f(y.Ea,y,R),ge(y,y.D)),y.D++,!0)}n.Ea=function(y){if(this.m)if(this.m=null,this.I==1){if(!y){this.V=Math.floor(Math.random()*1e5),y=this.V++;const _e=new Gs(this,this.j,y);let Pe=this.o;if(this.U&&(Pe?(Pe=te(Pe),Q(Pe,this.U)):Pe=this.U),this.u!==null||this.R||(_e.J=Pe,Pe=null),this.S)e:{for(var R=0,z=0;z<this.i.length;z++){t:{var Z=this.i[z];if("__data__"in Z.map&&(Z=Z.map.__data__,typeof Z=="string")){Z=Z.length;break t}Z=void 0}if(Z===void 0)break;if(R+=Z,R>4096){R=z;break e}if(R===4096||z===this.i.length-1){R=z+1;break e}}R=1e3}else R=1e3;R=ji(this,_e,R),z=Or(this.J),kn(z,"RID",y),kn(z,"CVER",22),this.G&&kn(z,"X-HTTP-Session-Id",this.G),Ca(this,z),Pe&&(this.R?R="headers="+mr(ss(Pe))+"&"+R:this.u&&Ko(z,this.u,Pe)),Ho(this.h,_e),this.Ra&&kn(z,"TYPE","init"),this.S?(kn(z,"$req",R),kn(z,"SID","null"),_e.U=!0,rs(_e,z,null)):rs(_e,z,R),this.I=2}}else this.I==3&&(y?Cl(this,y):this.i.length==0||ua(this.h)||Cl(this))};function Cl(y,R){var z;R?z=R.l:z=y.V++;const Z=Or(y.J);kn(Z,"SID",y.M),kn(Z,"RID",z),kn(Z,"AID",y.K),Ca(y,Z),y.u&&y.o&&Ko(Z,y.u,y.o),z=new Gs(y,y.j,z,y.D+1),y.u===null&&(z.J=y.o),R&&(y.i=R.G.concat(y.i)),R=ji(y,z,1e3),z.H=Math.round(y.va*.5)+Math.round(y.va*.5*Math.random()),Ho(y.h,z),rs(z,Z,R)}function Ca(y,R){y.H&&Se(y.H,function(z,Z){kn(R,Z,z)}),y.l&&Se({},function(z,Z){kn(R,Z,z)})}function ji(y,R,z){z=Math.min(y.i.length,z);const Z=y.l?f(y.l.Ka,y.l,y):null;e:{var _e=y.i;let Zt=-1;for(;;){const pr=["count="+z];Zt==-1?z>0?(Zt=_e[0].g,pr.push("ofs="+Zt)):Zt=0:pr.push("ofs="+Zt);let bn=!0;for(let Kn=0;Kn<z;Kn++){var Pe=_e[Kn].g;const ks=_e[Kn].map;if(Pe-=Zt,Pe<0)Zt=Math.max(0,_e[Kn].g-100),bn=!1;else try{Pe="req"+Pe+"_"||"";try{var et=ks instanceof Map?ks:Object.entries(ks);for(const[Ws,ir]of et){let Ks=ir;u(ir)&&(Ks=on(ir)),pr.push(Pe+Ws+"="+encodeURIComponent(Ks))}}catch(Ws){throw pr.push(Pe+"type="+encodeURIComponent("_badmap")),Ws}}catch{Z&&Z(ks)}}if(bn){et=pr.join("&");break e}}et=void 0}return y=y.i.splice(0,z),R.G=y,et}function pc(y){if(!y.g&&!y.v){y.Y=1;var R=y.Da;re||M(),ae||(re(),ae=!0),G.add(R,y),y.A=0}}function oi(y){return y.g||y.v||y.A>=3?!1:(y.Y++,y.v=xn(f(y.Da,y),ge(y,y.A)),y.A++,!0)}n.Da=function(){if(this.v=null,A(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var y=4*this.T;this.j.info("BP detection timer enabled: "+y),this.B=xn(f(this.Wa,this),y)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),wi(this),A(this))};function Il(y){y.B!=null&&(c.clearTimeout(y.B),y.B=null)}function A(y){y.g=new Gs(y,y.j,"rpc",y.Y),y.u===null&&(y.g.J=y.o),y.g.P=0;var R=Or(y.na);kn(R,"RID","rpc"),kn(R,"SID",y.M),kn(R,"AID",y.K),kn(R,"CI",y.F?"0":"1"),!y.F&&y.ia&&kn(R,"TO",y.ia),kn(R,"TYPE","xmlhttp"),Ca(y,R),y.u&&y.o&&Ko(R,y.u,y.o),y.O&&(y.g.H=y.O);var z=y.g;y=y.ba,z.M=1,z.A=bo(Or(R)),z.u=null,z.R=!0,la(z,y)}n.Va=function(){this.C!=null&&(this.C=null,wi(this),oi(this),At(19))};function H(y){y.C!=null&&(c.clearTimeout(y.C),y.C=null)}function le(y,R){var z=null;if(y.g==R){H(y),Il(y),y.g=null;var Z=2}else if(si(y.h,R))z=R.G,_l(y.h,R),Z=1;else return;if(y.I!=0){if(R.o)if(Z==1){z=R.u?R.u.length:0,R=Date.now()-R.F;var _e=y.D;Z=zn(),ct(Z,new jt(Z,z)),za(y)}else pc(y);else if(_e=R.m,_e==3||_e==0&&R.X>0||!(Z==1&&Xo(y,R)||Z==2&&oi(y)))switch(z&&z.length>0&&(R=y.h,R.i=R.i.concat(z)),_e){case 1:we(y,5);break;case 4:we(y,10);break;case 3:we(y,6);break;default:we(y,2)}}}function ge(y,R){let z=y.Qa+Math.floor(Math.random()*y.Za);return y.isActive()||(z*=2),z*R}function we(y,R){if(y.j.info("Error code "+R),R==2){var z=f(y.bb,y),Z=y.Ua;const _e=!Z;Z=new Cs(Z||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||wn(Z,"https"),bo(Z),_e?ai(Z.toString(),z):Ji(Z.toString(),z)}else At(2);y.I=0,y.l&&y.l.pa(R),Ve(y),Ni(y)}n.bb=function(y){y?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Ve(y){if(y.I=0,y.ja=[],y.l){const R=Sl(y.h);(R.length!=0||y.i.length!=0)&&(T(y.ja,R),T(y.ja,y.i),y.h.i.length=0,b(y.i),y.i.length=0),y.l.oa()}}function Xe(y,R,z){var Z=z instanceof Cs?Or(z):new Cs(z);if(Z.g!="")R&&(Z.g=R+"."+Z.g),Yi(Z,Z.u);else{var _e=c.location;Z=_e.protocol,R=R?R+"."+_e.hostname:_e.hostname,_e=+_e.port;const Pe=new Cs(null);Z&&wn(Pe,Z),R&&(Pe.g=R),_e&&Yi(Pe,_e),z&&(Pe.h=z),Z=Pe}return z=y.G,R=y.wa,z&&R&&kn(Z,z,R),kn(Z,"VER",y.ka),Ca(y,Z),Z}function ht(y,R,z){if(R&&!y.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=y.Aa&&!y.ma?new Wn(new Ot({ab:z})):new Wn(y.ma),R.Fa(y.L),R}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function xt(){}n=xt.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ut(){}Ut.prototype.g=function(y,R){return new It(y,R)};function It(y,R){He.call(this),this.g=new vi(R),this.l=y,this.h=R&&R.messageUrlParams||null,y=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(y?y["X-WebChannel-Content-Type"]=R.messageContentType:y={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(y?y["X-WebChannel-Client-Profile"]=R.sa:y={"X-WebChannel-Client-Profile":R.sa}),this.g.U=y,(y=R&&R.Qb)&&!V(y)&&(this.g.u=y),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!V(R)&&(this.g.G=R,y=this.h,y!==null&&R in y&&(y=this.h,R in y&&delete y[R])),this.j=new rr(this)}x(It,He),It.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){jo(this.g)},It.prototype.o=function(y){var R=this.g;if(typeof y=="string"){var z={};z.__data__=y,y=z}else this.v&&(z={},z.__data__=on(y),y=z);R.i.push(new Ir(R.Ya++,y)),R.I==3&&za(R)},It.prototype.N=function(){this.g.l=null,delete this.j,jo(this.g),delete this.g,It.Z.N.call(this)};function En(y){Lt.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var R=y.__sm__;if(R){e:{for(const z in R){y=z;break e}y=void 0}(this.i=y)&&(y=this.i,R=R!==null&&y in R?R[y]:void 0),this.data=R}else this.data=y}x(En,Lt);function gr(){Wt.call(this),this.status=1}x(gr,Wt);function rr(y){this.g=y}x(rr,xt),rr.prototype.ra=function(){ct(this.g,"a")},rr.prototype.qa=function(y){ct(this.g,new En(y))},rr.prototype.pa=function(y){ct(this.g,new gr)},rr.prototype.oa=function(){ct(this.g,"b")},Ut.prototype.createWebChannel=Ut.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,AS=function(){return new Ut},ES=function(){return zn()},SS=an,Z1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Na.NO_ERROR=0,Na.TIMEOUT=8,Na.HTTP_ERROR=6,F0=Na,ia.COMPLETE="complete",_S=ia,Cr.EventType=ln,ln.OPEN="a",ln.CLOSE="b",ln.ERROR="c",ln.MESSAGE="d",He.prototype.listen=He.prototype.J,og=Cr,Wn.prototype.listenOnce=Wn.prototype.K,Wn.prototype.getLastError=Wn.prototype.Ha,Wn.prototype.getLastErrorCode=Wn.prototype.ya,Wn.prototype.getStatus=Wn.prototype.ca,Wn.prototype.getResponseJson=Wn.prototype.La,Wn.prototype.getResponseText=Wn.prototype.la,Wn.prototype.send=Wn.prototype.ea,Wn.prototype.setWithCredentials=Wn.prototype.Fa,jS=Wn}).apply(typeof m0<"u"?m0:typeof self<"u"?self:typeof window<"u"?window:{});const Bj="@firebase/firestore",zj="4.9.2";let Ma=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ma.UNAUTHENTICATED=new Ma(null),Ma.GOOGLE_CREDENTIALS=new Ma("google-credentials-uid"),Ma.FIRST_PARTY=new Ma("first-party-uid"),Ma.MOCK_USER=new Ma("mock-user");let im="12.3.0";const th=new rv("@firebase/firestore");function gf(){return th.logLevel}function Ze(n,...e){if(th.logLevel<=Ln.DEBUG){const t=e.map(fv);th.debug(`Firestore (${im}): ${n}`,...t)}}function gi(n,...e){if(th.logLevel<=Ln.ERROR){const t=e.map(fv);th.error(`Firestore (${im}): ${n}`,...t)}}function nh(n,...e){if(th.logLevel<=Ln.WARN){const t=e.map(fv);th.warn(`Firestore (${im}): ${n}`,...t)}}function fv(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function vt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,TS(n,r,t)}function TS(n,e,t){let r=`FIRESTORE (${im}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw gi(r),new Error(r)}function Rt(n,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,n||TS(e,a,r)}function un(n,e){return n}const Ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tt extends vl{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class tc{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class CS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class f7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ma.UNAUTHENTICATED)))}shutdown(){}}class m7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class g7{constructor(e){this.t=e,this.currentUser=Ma.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Rt(this.o===void 0,42304);let r=this.i;const a=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new tc;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new tc,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await a(this.currentUser)}))},u=h=>{Ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((h=>u(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(Ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new tc)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt(typeof r.accessToken=="string",31837,{l:r}),new CS(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Rt(e===null||typeof e=="string",2055,{h:e}),new Ma(e)}}class p7{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ma.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class x7{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new p7(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ma.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class y7{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Rt(this.o===void 0,3512);const r=o=>{o.error!=null&&Ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,Ze("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const a=o=>{Ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>a(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?a(o):Ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new qj(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Rt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new qj(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function b7(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class mv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=b7(40);for(let o=0;o<a.length;++o)r.length<20&&a[o]<t&&(r+=e.charAt(a[o]%62))}return r}}function cn(n,e){return n<e?-1:n>e?1:0}function e2(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const a=n.charAt(r),o=e.charAt(r);if(a!==o)return s1(a)===s1(o)?cn(a,o):s1(a)?1:-1}return cn(n.length,e.length)}const v7=55296,w7=57343;function s1(n){const e=n.charCodeAt(0);return e>=v7&&e<=w7}function Mf(n,e,t){return n.length===e.length&&n.every(((r,a)=>t(r,e[a])))}function IS(n){return n+"\0"}const Gj="__name__";class Wl{constructor(e,t,r){t===void 0?t=0:t>e.length&&vt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&vt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Wl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wl?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const o=Wl.compareSegments(e.get(a),t.get(a));if(o!==0)return o}return cn(e.length,t.length)}static compareSegments(e,t){const r=Wl.isNumericId(e),a=Wl.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Wl.extractNumericId(e).compare(Wl.extractNumericId(t)):e2(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ed.fromString(e.substring(4,e.length-2))}}class tr extends Wl{construct(e,t,r){return new tr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new tt(Ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new tr(t)}static emptyPath(){return new tr([])}}const N7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jr extends Wl{construct(e,t,r){return new Jr(e,t,r)}static isValidIdentifier(e){return N7.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Gj}static keyField(){return new Jr([Gj])}static fromServerFormat(e){const t=[];let r="",a=0;const o=()=>{if(r.length===0)throw new tt(Ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const u=e[a];if(u==="\\"){if(a+1===e.length)throw new tt(Ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[a+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new tt(Ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,a+=2}else u==="`"?(c=!c,a++):u!=="."||c?(r+=u,a++):(o(),a++)}if(o(),c)throw new tt(Ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jr(t)}static emptyPath(){return new Jr([])}}class ot{constructor(e){this.path=e}static fromPath(e){return new ot(tr.fromString(e))}static fromName(e){return new ot(tr.fromString(e).popFirst(5))}static empty(){return new ot(tr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ot(new tr(e.slice()))}}function kS(n,e,t){if(!t)throw new tt(Ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function j7(n,e,t,r){if(e===!0&&r===!0)throw new tt(Ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Hj(n){if(!ot.isDocumentKey(n))throw new tt(Ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $j(n){if(ot.isDocumentKey(n))throw new tt(Ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function RS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Zx(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":vt(12329,{type:typeof n})}function wa(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new tt(Ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zx(n);throw new tt(Ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Fs(n,e){const t={typeString:n};return e&&(t.value=e),t}function sp(n,e){if(!RS(n))throw new tt(Ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new tt(Ue.INVALID_ARGUMENT,t);return!0}const Wj=-62135596800,Kj=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Kj);return new gt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new tt(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new tt(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Wj)throw new tt(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new tt(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Kj}_compareTo(e){return this.seconds===e.seconds?cn(this.nanoseconds,e.nanoseconds):cn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sp(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Wj;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:Fs("string",gt._jsonSchemaVersion),seconds:Fs("number"),nanoseconds:Fs("number")};class Gt{static fromTimestamp(e){return new Gt(e)}static min(){return new Gt(new gt(0,0))}static max(){return new Gt(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Pg=-1;class hx{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function t2(n){return n.fields.find((e=>e.kind===2))}function Md(n){return n.fields.filter((e=>e.kind!==2))}hx.UNKNOWN_ID=-1;class U0{constructor(e,t){this.fieldPath=e,this.kind=t}}class Lg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Lg(0,mo.min())}}function _7(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=Gt.fromTimestamp(r===1e9?new gt(t+1,0):new gt(t,r));return new mo(a,ot.empty(),e)}function PS(n){return new mo(n.readTime,n.key,Pg)}class mo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new mo(Gt.min(),ot.empty(),Pg)}static max(){return new mo(Gt.max(),ot.empty(),Pg)}}function gv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ot.comparator(n.documentKey,e.documentKey),t!==0?t:cn(n.largestBatchId,e.largestBatchId))}const LS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function gh(n){if(n.code!==Ue.FAILED_PRECONDITION||n.message!==LS)throw n;Ze("LocalStore","Unexpectedly lost primary lease")}class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&vt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Te(((r,a)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,a)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Te?t:Te.resolve(t)}catch(t){return Te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Te.reject(t)}static resolve(e){return new Te(((t,r)=>{t(e)}))}static reject(e){return new Te(((t,r)=>{r(e)}))}static waitFor(e){return new Te(((t,r)=>{let a=0,o=0,c=!1;e.forEach((u=>{++a,u.next((()=>{++o,c&&o===a&&t()}),(h=>r(h)))})),c=!0,o===a&&t()}))}static or(e){let t=Te.resolve(!1);for(const r of e)t=t.next((a=>a?Te.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,o)=>{r.push(t.call(this,a,o))})),this.waitFor(r)}static mapArray(e,t){return new Te(((r,a)=>{const o=e.length,c=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;t(e[f]).next((g=>{c[f]=g,++u,u===o&&r(c)}),(g=>a(g)))}}))}static doWhile(e,t){return new Te(((r,a)=>{const o=()=>{e()===!0?t().next((()=>{o()}),a):r()};o()}))}}const lo="SimpleDb";class ey{static open(e,t,r,a){try{return new ey(t,e.transaction(a,r))}catch(o){throw new mg(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new tc,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new mg(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=pv(r.target.error);this.S.reject(new mg(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ze(lo,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new E7(t)}}class td{static delete(e){return Ze(lo,"Removing database:",e),Ud(S3().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!P3())return!1;if(td.F())return!0;const e=sa(),t=td.M(e),r=0<t&&t<10,a=MS(e),o=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,td.M(sa())===12.2&&gi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Ze(lo,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=o=>{const c=o.target.result;t(c)},a.onblocked=()=>{r(new mg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=o=>{const c=o.target.error;c.name==="VersionError"?r(new tt(Ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new tt(Ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new mg(e,c))},a.onupgradeneeded=o=>{Ze(lo,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.N.k(c,a.transaction,o.oldVersion,this.version).next((()=>{Ze(lo,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const o=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const u=ey.open(this.db,e,o?"readonly":"readwrite",r),h=a(u).next((f=>(u.C(),f))).catch((f=>(u.abort(f),Te.reject(f)))).toPromise();return h.catch((()=>{})),await u.D,h}catch(u){const h=u,f=h.name!=="FirebaseError"&&c<3;if(Ze(lo,"Transaction failed with error:",h.message,"Retrying:",f),this.close(),!f)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function MS(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class S7{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ud(this.U.delete())}}class mg extends tt{constructor(e,t){super(Ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function gd(n){return n.name==="IndexedDbTransactionError"}class E7{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Ze(lo,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ze(lo,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ud(r)}add(e){return Ze(lo,"ADD",this.store.name,e,e),Ud(this.store.add(e))}get(e){return Ud(this.store.get(e)).next((t=>(t===void 0&&(t=null),Ze(lo,"GET",this.store.name,e,t),t)))}delete(e){return Ze(lo,"DELETE",this.store.name,e),Ud(this.store.delete(e))}count(){return Ze(lo,"COUNT",this.store.name),Ud(this.store.count())}J(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const o=a.getAll(r.range);return new Te(((c,u)=>{o.onerror=h=>{u(h.target.error)},o.onsuccess=h=>{c(h.target.result)}}))}{const o=this.cursor(r),c=[];return this.H(o,((u,h)=>{c.push(h)})).next((()=>c))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new Te(((a,o)=>{r.onerror=c=>{o(c.target.error)},r.onsuccess=c=>{a(c.target.result)}}))}Z(e,t){Ze(lo,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const a=this.cursor(r);return this.H(a,((o,c,u)=>u.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.H(a,t)}te(e){const t=this.cursor({});return new Te(((r,a)=>{t.onerror=o=>{const c=pv(o.target.error);a(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next((u=>{u?c.continue():r()})):r()}}))}H(e,t){const r=[];return new Te(((a,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const u=c.target.result;if(!u)return void a();const h=new S7(u),f=t(u.primaryKey,u.value,h);if(f instanceof Te){const g=f.catch((x=>(h.done(),Te.reject(x))));r.push(g)}h.isDone?a():h.G===null?u.continue():u.continue(h.G)}})).next((()=>Te.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ud(n){return new Te(((e,t)=>{n.onsuccess=r=>{const a=r.target.result;e(a)},n.onerror=r=>{const a=pv(r.target.error);t(a)}}))}let Yj=!1;function pv(n){const e=td.M(sa());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new tt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Yj||(Yj=!0,setTimeout((()=>{throw r}),0)),r}}return n}const gg="IndexBackfiller";class A7{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Ze(gg,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();Ze(gg,`Documents written: ${t}`)}catch(t){gd(t)?Ze(gg,"Ignoring IndexedDB error during index backfill: ",t):await gh(t)}await this.re(6e4)}))}}class T7{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let a=t,o=!0;return Te.doWhile((()=>o===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return Ze(gg,`Processing collection: ${c}`),this.oe(e,c,a).next((u=>{a-=u,r.add(c)}));o=!1})))).next((()=>t-a))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,o))).next((u=>(Ze(gg,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>c.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((a,o)=>{const c=PS(o);gv(c,r)>0&&(r=c)})),new mo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Fo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Fo.ce=-1;const Hd=-1;function ty(n){return n==null}function Dg(n){return n===0&&1/n==-1/0}function C7(n){return typeof n=="number"&&Number.isInteger(n)&&!Dg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const fx="";function Za(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Xj(e)),e=I7(n.get(t),e);return Xj(e)}function I7(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const o=n.charAt(a);switch(o){case"\0":t+="";break;case fx:t+="";break;default:t+=o}}return t}function Xj(n){return n+fx+""}function Kl(n){const e=n.length;if(Rt(e>=2,64408,{path:n}),e===2)return Rt(n.charAt(0)===fx&&n.charAt(1)==="",56145,{path:n}),tr.emptyPath();const t=e-2,r=[];let a="";for(let o=0;o<e;){const c=n.indexOf(fx,o);switch((c<0||c>t)&&vt(50515,{path:n}),n.charAt(c+1)){case"":const u=n.substring(o,c);let h;a.length===0?h=u:(a+=u,h=a,a=""),r.push(h);break;case"":a+=n.substring(o,c),a+="\0";break;case"":a+=n.substring(o,c+1);break;default:vt(61167,{path:n})}o=c+2}return new tr(r)}const Od="remoteDocuments",ap="owner",nf="owner",Mg="mutationQueues",k7="userId",fl="mutations",Qj="batchId",Gd="userMutationsIndex",Jj=["userId","batchId"];function V0(n,e){return[n,Za(e)]}function OS(n,e,t){return[n,Za(e),t]}const R7={},Of="documentMutations",mx="remoteDocumentsV14",P7=["prefixPath","collectionGroup","readTime","documentId"],B0="documentKeyIndex",L7=["prefixPath","collectionGroup","documentId"],FS="collectionGroupIndex",D7=["collectionGroup","readTime","prefixPath","documentId"],Og="remoteDocumentGlobal",n2="remoteDocumentGlobalKey",Ff="targets",US="queryTargetsIndex",M7=["canonicalId","targetId"],Uf="targetDocuments",O7=["targetId","path"],xv="documentTargetsIndex",F7=["path","targetId"],gx="targetGlobalKey",$d="targetGlobal",Fg="collectionParents",U7=["collectionId","parent"],Vf="clientMetadata",V7="clientId",ny="bundles",B7="bundleId",ry="namedQueries",z7="name",yv="indexConfiguration",q7="indexId",r2="collectionGroupIndex",G7="collectionGroup",pg="indexState",H7=["indexId","uid"],VS="sequenceNumberIndex",$7=["uid","sequenceNumber"],xg="indexEntries",W7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],BS="documentKeyIndex",K7=["indexId","uid","orderedDocumentKey"],sy="documentOverlays",Y7=["userId","collectionPath","documentId"],s2="collectionPathOverlayIndex",X7=["userId","collectionPath","largestBatchId"],zS="collectionGroupOverlayIndex",Q7=["userId","collectionGroup","largestBatchId"],bv="globals",J7="name",qS=[Mg,fl,Of,Od,Ff,ap,$d,Uf,Vf,Og,Fg,ny,ry],Z7=[...qS,sy],GS=[Mg,fl,Of,mx,Ff,ap,$d,Uf,Vf,Og,Fg,ny,ry,sy],HS=GS,vv=[...HS,yv,pg,xg],eD=vv,$S=[...vv,bv],tD=$S;class a2 extends DS{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function aa(n,e){const t=un(n);return td.O(t.le,e)}function Zj(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function WS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Hr{constructor(e,t){this.comparator=e,this.root=t||Oa.EMPTY}insert(e,t){return new Hr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Oa.BLACK,null,null))}remove(e){return new Hr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Oa.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new g0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new g0(this.root,e,this.comparator,!1)}getReverseIterator(){return new g0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new g0(this.root,e,this.comparator,!0)}}class g0{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&a&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Oa{constructor(e,t,r,a,o){this.key=e,this.value=t,this.color=r??Oa.RED,this.left=a??Oa.EMPTY,this.right=o??Oa.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,o){return new Oa(e??this.key,t??this.value,r??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const o=r(e,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(e,t,r),null):o===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Oa.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Oa.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Oa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Oa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw vt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw vt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw vt(27949);return e+(this.isRed()?0:1)}}Oa.EMPTY=null,Oa.RED=!0,Oa.BLACK=!1;Oa.EMPTY=new class{constructor(){this.size=0}get key(){throw vt(57766)}get value(){throw vt(16141)}get color(){throw vt(16727)}get left(){throw vt(29726)}get right(){throw vt(36894)}copy(e,t,r,a,o){return this}insert(e,t,r){return new Oa(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hr{constructor(e){this.comparator=e,this.data=new Hr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new e_(this.data.getIterator())}getIteratorFrom(e){return new e_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof hr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=r.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new hr(this.comparator);return t.data=e,t}}class e_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function rf(n){return n.hasNext()?n.getNext():void 0}class Bi{constructor(e){this.fields=e,e.sort(Jr.comparator)}static empty(){return new Bi([])}unionWith(e){let t=new hr(Jr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Bi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mf(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class KS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new KS("Invalid base64 string: "+o):o}})(e);return new Vs(t)}static fromUint8Array(e){const t=(function(a){let o="";for(let c=0;c<a.length;++c)o+=String.fromCharCode(a[c]);return o})(e);return new Vs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return cn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vs.EMPTY_BYTE_STRING=new Vs("");const nD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qc(n){if(Rt(!!n,39018),typeof n=="string"){let e=0;const t=nD.exec(n);if(Rt(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Gr(n.seconds),nanos:Gr(n.nanos)}}function Gr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Jc(n){return typeof n=="string"?Vs.fromBase64String(n):Vs.fromUint8Array(n)}const YS="server_timestamp",XS="__type__",QS="__previous_value__",JS="__local_write_time__";function wv(n){return(n?.mapValue?.fields||{})[XS]?.stringValue===YS}function ay(n){const e=n.mapValue.fields[QS];return wv(e)?ay(e):e}function Ug(n){const e=Qc(n.mapValue.fields[JS].timestampValue);return new gt(e.seconds,e.nanos)}class rD{constructor(e,t,r,a,o,c,u,h,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=g}}const px="(default)";class rh{constructor(e,t){this.projectId=e,this.database=t||px}static empty(){return new rh("","")}get isDefaultDatabase(){return this.database===px}isEqual(e){return e instanceof rh&&e.projectId===this.projectId&&e.database===this.database}}const Nv="__type__",ZS="__max__",Yu={mapValue:{fields:{__type__:{stringValue:ZS}}}},jv="__vector__",Bf="value",z0={nullValue:"NULL_VALUE"};function id(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wv(n)?4:eE(n)?9007199254740991:iy(n)?10:11:vt(28295,{value:n})}function sc(n,e){if(n===e)return!0;const t=id(n);if(t!==id(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ug(n).isEqual(Ug(e));case 3:return(function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const c=Qc(a.timestampValue),u=Qc(o.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,o){return Jc(a.bytesValue).isEqual(Jc(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,o){return Gr(a.geoPointValue.latitude)===Gr(o.geoPointValue.latitude)&&Gr(a.geoPointValue.longitude)===Gr(o.geoPointValue.longitude)})(n,e);case 2:return(function(a,o){if("integerValue"in a&&"integerValue"in o)return Gr(a.integerValue)===Gr(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const c=Gr(a.doubleValue),u=Gr(o.doubleValue);return c===u?Dg(c)===Dg(u):isNaN(c)&&isNaN(u)}return!1})(n,e);case 9:return Mf(n.arrayValue.values||[],e.arrayValue.values||[],sc);case 10:case 11:return(function(a,o){const c=a.mapValue.fields||{},u=o.mapValue.fields||{};if(Zj(c)!==Zj(u))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(u[h]===void 0||!sc(c[h],u[h])))return!1;return!0})(n,e);default:return vt(52216,{left:n})}}function Vg(n,e){return(n.values||[]).find((t=>sc(t,e)))!==void 0}function od(n,e){if(n===e)return 0;const t=id(n),r=id(e);if(t!==r)return cn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return cn(n.booleanValue,e.booleanValue);case 2:return(function(o,c){const u=Gr(o.integerValue||o.doubleValue),h=Gr(c.integerValue||c.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1})(n,e);case 3:return t_(n.timestampValue,e.timestampValue);case 4:return t_(Ug(n),Ug(e));case 5:return e2(n.stringValue,e.stringValue);case 6:return(function(o,c){const u=Jc(o),h=Jc(c);return u.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(o,c){const u=o.split("/"),h=c.split("/");for(let f=0;f<u.length&&f<h.length;f++){const g=cn(u[f],h[f]);if(g!==0)return g}return cn(u.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,c){const u=cn(Gr(o.latitude),Gr(c.latitude));return u!==0?u:cn(Gr(o.longitude),Gr(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return n_(n.arrayValue,e.arrayValue);case 10:return(function(o,c){const u=o.fields||{},h=c.fields||{},f=u[Bf]?.arrayValue,g=h[Bf]?.arrayValue,x=cn(f?.values?.length||0,g?.values?.length||0);return x!==0?x:n_(f,g)})(n.mapValue,e.mapValue);case 11:return(function(o,c){if(o===Yu.mapValue&&c===Yu.mapValue)return 0;if(o===Yu.mapValue)return 1;if(c===Yu.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=c.fields||{},g=Object.keys(f);h.sort(),g.sort();for(let x=0;x<h.length&&x<g.length;++x){const v=e2(h[x],g[x]);if(v!==0)return v;const b=od(u[h[x]],f[g[x]]);if(b!==0)return b}return cn(h.length,g.length)})(n.mapValue,e.mapValue);default:throw vt(23264,{he:t})}}function t_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return cn(n,e);const t=Qc(n),r=Qc(e),a=cn(t.seconds,r.seconds);return a!==0?a:cn(t.nanos,r.nanos)}function n_(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const o=od(t[a],r[a]);if(o)return o}return cn(t.length,r.length)}function zf(n){return i2(n)}function i2(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Qc(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Jc(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ot.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",a=!0;for(const o of t.values||[])a?a=!1:r+=",",r+=i2(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",o=!0;for(const c of r)o?o=!1:a+=",",a+=`${c}:${i2(t.fields[c])}`;return a+"}"})(n.mapValue):vt(61005,{value:n})}function q0(n){switch(id(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ay(n);return e?16+q0(e):16;case 5:return 2*n.stringValue.length;case 6:return Jc(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,o)=>a+q0(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let a=0;return pd(r.fields,((o,c)=>{a+=o.length+q0(c)})),a})(n.mapValue);default:throw vt(13486,{value:n})}}function Bg(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function o2(n){return!!n&&"integerValue"in n}function zg(n){return!!n&&"arrayValue"in n}function r_(n){return!!n&&"nullValue"in n}function s_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function G0(n){return!!n&&"mapValue"in n}function iy(n){return(n?.mapValue?.fields||{})[Nv]?.stringValue===jv}function yg(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return pd(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=yg(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yg(n.arrayValue.values[t]);return e}return{...n}}function eE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ZS}const tE={mapValue:{fields:{[Nv]:{stringValue:jv},[Bf]:{arrayValue:{}}}}};function sD(n){return"nullValue"in n?z0:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Bg(rh.empty(),ot.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?iy(n)?tE:{mapValue:{}}:vt(35942,{value:n})}function aD(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Bg(rh.empty(),ot.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?tE:"mapValue"in n?iy(n)?{mapValue:{}}:Yu:vt(61959,{value:n})}function a_(n,e){const t=od(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function i_(n,e){const t=od(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ja{constructor(e){this.value=e}static empty(){return new Ja({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!G0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yg(t)}setAll(e){let t=Jr.emptyPath(),r={},a=[];e.forEach(((c,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,r,a),r={},a=[],t=u.popLast()}c?r[u.lastSegment()]=yg(c):a.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,a)}delete(e){const t=this.field(e.popLast());G0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];G0(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){pd(t,((a,o)=>e[a]=o));for(const a of r)delete e[a]}clone(){return new Ja(yg(this.value))}}function nE(n){const e=[];return pd(n.fields,((t,r)=>{const a=new Jr([t]);if(G0(r)){const o=nE(r.mapValue).fields;if(o.length===0)e.push(a);else for(const c of o)e.push(a.child(c))}else e.push(a)})),new Bi(e)}class hs{constructor(e,t,r,a,o,c,u){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=o,this.data=c,this.documentState=u}static newInvalidDocument(e){return new hs(e,0,Gt.min(),Gt.min(),Gt.min(),Ja.empty(),0)}static newFoundDocument(e,t,r,a){return new hs(e,1,t,Gt.min(),r,a,0)}static newNoDocument(e,t){return new hs(e,2,t,Gt.min(),Gt.min(),Ja.empty(),0)}static newUnknownDocument(e,t){return new hs(e,3,t,Gt.min(),Gt.min(),Ja.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Gt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ja.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ja.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qf{constructor(e,t){this.position=e,this.inclusive=t}}function o_(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const o=e[a],c=n.position[a];if(o.field.isKeyField()?r=ot.comparator(ot.fromName(c.referenceValue),t.key):r=od(c,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function l_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!sc(n.position[t],e.position[t]))return!1;return!0}class qg{constructor(e,t="asc"){this.field=e,this.dir=t}}function iD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class rE{}class Dn extends rE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new oD(e,t,r):t==="array-contains"?new uD(e,r):t==="in"?new cE(e,r):t==="not-in"?new dD(e,r):t==="array-contains-any"?new hD(e,r):new Dn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new lD(e,r):new cD(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(od(t,this.value)):t!==null&&id(this.value)===id(t)&&this.matchesComparison(od(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return vt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dr extends rE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new dr(e,t)}matches(e){return Gf(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Gf(n){return n.op==="and"}function l2(n){return n.op==="or"}function _v(n){return sE(n)&&Gf(n)}function sE(n){for(const e of n.filters)if(e instanceof dr)return!1;return!0}function c2(n){if(n instanceof Dn)return n.field.canonicalString()+n.op.toString()+zf(n.value);if(_v(n))return n.filters.map((e=>c2(e))).join(",");{const e=n.filters.map((t=>c2(t))).join(",");return`${n.op}(${e})`}}function aE(n,e){return n instanceof Dn?(function(r,a){return a instanceof Dn&&r.op===a.op&&r.field.isEqual(a.field)&&sc(r.value,a.value)})(n,e):n instanceof dr?(function(r,a){return a instanceof dr&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((o,c,u)=>o&&aE(c,a.filters[u])),!0):!1})(n,e):void vt(19439)}function iE(n,e){const t=n.filters.concat(e);return dr.create(t,n.op)}function oE(n){return n instanceof Dn?(function(t){return`${t.field.canonicalString()} ${t.op} ${zf(t.value)}`})(n):n instanceof dr?(function(t){return t.op.toString()+" {"+t.getFilters().map(oE).join(" ,")+"}"})(n):"Filter"}class oD extends Dn{constructor(e,t,r){super(e,t,r),this.key=ot.fromName(r.referenceValue)}matches(e){const t=ot.comparator(e.key,this.key);return this.matchesComparison(t)}}class lD extends Dn{constructor(e,t){super(e,"in",t),this.keys=lE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class cD extends Dn{constructor(e,t){super(e,"not-in",t),this.keys=lE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function lE(n,e){return(e.arrayValue?.values||[]).map((t=>ot.fromName(t.referenceValue)))}class uD extends Dn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zg(t)&&Vg(t.arrayValue,this.value)}}class cE extends Dn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Vg(this.value.arrayValue,t)}}class dD extends Dn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Vg(this.value.arrayValue,t)}}class hD extends Dn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Vg(this.value.arrayValue,r)))}}class fD{constructor(e,t=null,r=[],a=[],o=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=o,this.startAt=c,this.endAt=u,this.Te=null}}function u2(n,e=null,t=[],r=[],a=null,o=null,c=null){return new fD(n,e,t,r,a,o,c)}function sh(n){const e=un(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>c2(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),ty(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>zf(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>zf(r))).join(",")),e.Te=t}return e.Te}function ip(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!iD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!aE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!l_(n.startAt,e.startAt)&&l_(n.endAt,e.endAt)}function xx(n){return ot.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function yx(n,e){return n.filters.filter((t=>t instanceof Dn&&t.field.isEqual(e)))}function c_(n,e,t){let r=z0,a=!0;for(const o of yx(n,e)){let c=z0,u=!0;switch(o.op){case"<":case"<=":c=sD(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,u=!1;break;case"!=":case"not-in":c=z0}a_({value:r,inclusive:a},{value:c,inclusive:u})<0&&(r=c,a=u)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];a_({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function u_(n,e,t){let r=Yu,a=!0;for(const o of yx(n,e)){let c=Yu,u=!0;switch(o.op){case">=":case">":c=aD(o.value),u=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,u=!1;break;case"!=":case"not-in":c=Yu}i_({value:r,inclusive:a},{value:c,inclusive:u})>0&&(r=c,a=u)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];i_({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}class om{constructor(e,t=null,r=[],a=[],o=null,c="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function mD(n,e,t,r,a,o,c,u){return new om(n,e,t,r,a,o,c,u)}function op(n){return new om(n)}function d_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function uE(n){return n.collectionGroup!==null}function bg(n){const e=un(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new hr(Jr.comparator);return c.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new qg(o,r))})),t.has(Jr.keyField().canonicalString())||e.Ie.push(new qg(Jr.keyField(),r))}return e.Ie}function Vo(n){const e=un(n);return e.Ee||(e.Ee=gD(e,bg(n))),e.Ee}function gD(n,e){if(n.limitType==="F")return u2(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const o=a.dir==="desc"?"asc":"desc";return new qg(a.field,o)}));const t=n.endAt?new qf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new qf(n.startAt.position,n.startAt.inclusive):null;return u2(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function d2(n,e){const t=n.filters.concat([e]);return new om(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function h2(n,e,t){return new om(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function oy(n,e){return ip(Vo(n),Vo(e))&&n.limitType===e.limitType}function dE(n){return`${sh(Vo(n))}|lt:${n.limitType}`}function pf(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>oE(a))).join(", ")}]`),ty(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>zf(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>zf(a))).join(",")),`Target(${r})`})(Vo(n))}; limitType=${n.limitType})`}function lp(n,e){return e.isFoundDocument()&&(function(r,a){const o=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ot.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,a){for(const o of bg(r))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,a){for(const o of r.filters)if(!o.matches(a))return!1;return!0})(n,e)&&(function(r,a){return!(r.startAt&&!(function(c,u,h){const f=o_(c,u,h);return c.inclusive?f<=0:f<0})(r.startAt,bg(r),a)||r.endAt&&!(function(c,u,h){const f=o_(c,u,h);return c.inclusive?f>=0:f>0})(r.endAt,bg(r),a))})(n,e)}function pD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function hE(n){return(e,t)=>{let r=!1;for(const a of bg(n)){const o=xD(a,e,t);if(o!==0)return o;r=r||a.field.isKeyField()}return 0}}function xD(n,e,t){const r=n.field.isKeyField()?ot.comparator(e.key,t.key):(function(o,c,u){const h=c.data.field(o),f=u.data.field(o);return h!==null&&f!==null?od(h,f):vt(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return vt(19790,{direction:n.dir})}}class ru{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,o]of r)if(this.equalsFn(a,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return void(a[o]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){pd(this.inner,((t,r)=>{for(const[a,o]of r)e(a,o)}))}isEmpty(){return WS(this.inner)}size(){return this.innerSize}}const yD=new Hr(ot.comparator);function uo(){return yD}const fE=new Hr(ot.comparator);function lg(...n){let e=fE;for(const t of n)e=e.insert(t.key,t);return e}function mE(n){let e=fE;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Yl(){return vg()}function gE(){return vg()}function vg(){return new ru((n=>n.toString()),((n,e)=>n.isEqual(e)))}const bD=new Hr(ot.comparator),vD=new hr(ot.comparator);function Sn(...n){let e=vD;for(const t of n)e=e.add(t);return e}const wD=new hr(cn);function ND(){return wD}function Sv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dg(e)?"-0":e}}function pE(n){return{integerValue:""+n}}function jD(n,e){return C7(e)?pE(e):Sv(n,e)}class ly{constructor(){this._=void 0}}function _D(n,e,t){return n instanceof Hf?(function(a,o){const c={fields:{[XS]:{stringValue:YS},[JS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&wv(o)&&(o=ay(o)),o&&(c.fields[QS]=o),{mapValue:c}})(t,e):n instanceof $f?yE(n,e):n instanceof Wf?bE(n,e):(function(a,o){const c=xE(a,o),u=h_(c)+h_(a.Ae);return o2(c)&&o2(a.Ae)?pE(u):Sv(a.serializer,u)})(n,e)}function SD(n,e,t){return n instanceof $f?yE(n,e):n instanceof Wf?bE(n,e):t}function xE(n,e){return n instanceof Gg?(function(r){return o2(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Hf extends ly{}class $f extends ly{constructor(e){super(),this.elements=e}}function yE(n,e){const t=vE(e);for(const r of n.elements)t.some((a=>sc(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Wf extends ly{constructor(e){super(),this.elements=e}}function bE(n,e){let t=vE(e);for(const r of n.elements)t=t.filter((a=>!sc(a,r)));return{arrayValue:{values:t}}}class Gg extends ly{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function h_(n){return Gr(n.integerValue||n.doubleValue)}function vE(n){return zg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class wE{constructor(e,t){this.field=e,this.transform=t}}function ED(n,e){return n.field.isEqual(e.field)&&(function(r,a){return r instanceof $f&&a instanceof $f||r instanceof Wf&&a instanceof Wf?Mf(r.elements,a.elements,sc):r instanceof Gg&&a instanceof Gg?sc(r.Ae,a.Ae):r instanceof Hf&&a instanceof Hf})(n.transform,e.transform)}class AD{constructor(e,t){this.version=e,this.transformResults=t}}class ra{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ra}static exists(e){return new ra(void 0,e)}static updateTime(e){return new ra(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function H0(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class cy{}function NE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new cp(n.key,ra.none()):new lm(n.key,n.data,ra.none());{const t=n.data,r=Ja.empty();let a=new hr(Jr.comparator);for(let o of e.fields)if(!a.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?r.delete(o):r.set(o,c),a=a.add(o)}return new su(n.key,r,new Bi(a.toArray()),ra.none())}}function TD(n,e,t){n instanceof lm?(function(a,o,c){const u=a.value.clone(),h=m_(a.fieldTransforms,o,c.transformResults);u.setAll(h),o.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(n,e,t):n instanceof su?(function(a,o,c){if(!H0(a.precondition,o))return void o.convertToUnknownDocument(c.version);const u=m_(a.fieldTransforms,o,c.transformResults),h=o.data;h.setAll(jE(a)),h.setAll(u),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):(function(a,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function wg(n,e,t,r){return n instanceof lm?(function(o,c,u,h){if(!H0(o.precondition,c))return u;const f=o.value.clone(),g=g_(o.fieldTransforms,h,c);return f.setAll(g),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof su?(function(o,c,u,h){if(!H0(o.precondition,c))return u;const f=g_(o.fieldTransforms,h,c),g=c.data;return g.setAll(jE(o)),g.setAll(f),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((x=>x.field)))})(n,e,t,r):(function(o,c,u){return H0(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(n,e,t)}function CD(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),o=xE(r.transform,a||null);o!=null&&(t===null&&(t=Ja.empty()),t.set(r.field,o))}return t||null}function f_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Mf(r,a,((o,c)=>ED(o,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class lm extends cy{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class su extends cy{constructor(e,t,r,a,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function jE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function m_(n,e,t){const r=new Map;Rt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const o=n[a],c=o.transform,u=e.data.field(o.field);r.set(o.field,SD(c,u,t[a]))}return r}function g_(n,e,t){const r=new Map;for(const a of n){const o=a.transform,c=t.data.field(a.field);r.set(a.field,_D(o,c,e))}return r}class cp extends cy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _E extends cy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ev{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(e.key)&&TD(o,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=wg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=wg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=gE();return this.mutations.forEach((a=>{const o=e.get(a.key),c=o.overlayedDocument;let u=this.applyToLocalView(c,o.mutatedFields);u=t.has(a.key)?null:u;const h=NE(c,u);h!==null&&r.set(a.key,h),c.isValidDocument()||c.convertToNoDocument(Gt.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Sn())}isEqual(e){return this.batchId===e.batchId&&Mf(this.mutations,e.mutations,((t,r)=>f_(t,r)))&&Mf(this.baseMutations,e.baseMutations,((t,r)=>f_(t,r)))}}class Av{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Rt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return bD})();const o=e.mutations;for(let c=0;c<o.length;c++)a=a.insert(o[c].key,r[c].version);return new Av(e,t,r,a)}}class Tv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class ID{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ms,Bn;function kD(n){switch(n){case Ue.OK:return vt(64938);case Ue.CANCELLED:case Ue.UNKNOWN:case Ue.DEADLINE_EXCEEDED:case Ue.RESOURCE_EXHAUSTED:case Ue.INTERNAL:case Ue.UNAVAILABLE:case Ue.UNAUTHENTICATED:return!1;case Ue.INVALID_ARGUMENT:case Ue.NOT_FOUND:case Ue.ALREADY_EXISTS:case Ue.PERMISSION_DENIED:case Ue.FAILED_PRECONDITION:case Ue.ABORTED:case Ue.OUT_OF_RANGE:case Ue.UNIMPLEMENTED:case Ue.DATA_LOSS:return!0;default:return vt(15467,{code:n})}}function SE(n){if(n===void 0)return gi("GRPC error has no .code"),Ue.UNKNOWN;switch(n){case Ms.OK:return Ue.OK;case Ms.CANCELLED:return Ue.CANCELLED;case Ms.UNKNOWN:return Ue.UNKNOWN;case Ms.DEADLINE_EXCEEDED:return Ue.DEADLINE_EXCEEDED;case Ms.RESOURCE_EXHAUSTED:return Ue.RESOURCE_EXHAUSTED;case Ms.INTERNAL:return Ue.INTERNAL;case Ms.UNAVAILABLE:return Ue.UNAVAILABLE;case Ms.UNAUTHENTICATED:return Ue.UNAUTHENTICATED;case Ms.INVALID_ARGUMENT:return Ue.INVALID_ARGUMENT;case Ms.NOT_FOUND:return Ue.NOT_FOUND;case Ms.ALREADY_EXISTS:return Ue.ALREADY_EXISTS;case Ms.PERMISSION_DENIED:return Ue.PERMISSION_DENIED;case Ms.FAILED_PRECONDITION:return Ue.FAILED_PRECONDITION;case Ms.ABORTED:return Ue.ABORTED;case Ms.OUT_OF_RANGE:return Ue.OUT_OF_RANGE;case Ms.UNIMPLEMENTED:return Ue.UNIMPLEMENTED;case Ms.DATA_LOSS:return Ue.DATA_LOSS;default:return vt(39323,{code:n})}}(Bn=Ms||(Ms={}))[Bn.OK=0]="OK",Bn[Bn.CANCELLED=1]="CANCELLED",Bn[Bn.UNKNOWN=2]="UNKNOWN",Bn[Bn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bn[Bn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bn[Bn.NOT_FOUND=5]="NOT_FOUND",Bn[Bn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bn[Bn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bn[Bn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bn[Bn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bn[Bn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bn[Bn.ABORTED=10]="ABORTED",Bn[Bn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bn[Bn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bn[Bn.INTERNAL=13]="INTERNAL",Bn[Bn.UNAVAILABLE=14]="UNAVAILABLE",Bn[Bn.DATA_LOSS=15]="DATA_LOSS";function RD(){return new TextEncoder}const PD=new ed([4294967295,4294967295],0);function p_(n){const e=RD().encode(n),t=new NS;return t.update(e),new Uint8Array(t.digest())}function x_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ed([t,r],0),new ed([a,o],0)]}class Cv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new cg(`Invalid padding: ${t}`);if(r<0)throw new cg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new cg(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new cg(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ed.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(ed.fromNumber(r)));return a.compare(PD)===1&&(a=new ed([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=p_(e),[r,a]=x_(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,a,o);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new Cv(o,a,t);return r.forEach((u=>c.insert(u))),c}insert(e){if(this.ge===0)return;const t=p_(e),[r,a]=x_(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,a,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class cg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class uy{constructor(e,t,r,a,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,up.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new uy(Gt.min(),a,new Hr(cn),uo(),Sn())}}class up{constructor(e,t,r,a,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new up(r,t,Sn(),Sn(),Sn())}}class $0{constructor(e,t,r,a){this.be=e,this.removedTargetIds=t,this.key=r,this.De=a}}class EE{constructor(e,t){this.targetId=e,this.Ce=t}}class AE{constructor(e,t,r=Vs.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class y_{constructor(){this.ve=0,this.Fe=b_(),this.Me=Vs.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Sn(),t=Sn(),r=Sn();return this.Fe.forEach(((a,o)=>{switch(o){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:vt(38017,{changeType:o})}})),new up(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=b_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Rt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class LD{constructor(e){this.Ge=e,this.ze=new Map,this.je=uo(),this.Je=p0(),this.He=p0(),this.Ye=new Hr(cn)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:vt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const o=a.target;if(xx(o))if(r===0){const c=new ot(o.path);this.et(t,c,hs.newNoDocument(c,Gt.min()))}else Rt(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const u=this.ut(e),h=u?this.ct(u,e,c):1;if(h!==0){this.it(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:o=0}=t;let c,u;try{c=Jc(r).toUint8Array()}catch(h){if(h instanceof KS)return nh("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new Cv(c,a,o)}catch(h){return nh(h instanceof cg?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((o=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const u=this.ot(c);if(u){if(o.current&&xx(u.target)){const h=new ot(u.target.path);this.It(h).has(c)||this.Et(c,h)||this.et(c,h,hs.newNoDocument(h,e))}o.Be&&(t.set(c,o.ke()),o.qe())}}));let r=Sn();this.He.forEach(((o,c)=>{let u=!0;c.forEachWhile((h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const a=new uy(e,t,this.Ye,this.je,r);return this.je=uo(),this.Je=p0(),this.He=p0(),this.Ye=new Hr(cn),a}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new y_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new hr(cn),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new hr(cn),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ze("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new y_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function p0(){return new Hr(ot.comparator)}function b_(){return new Hr(ot.comparator)}const DD={asc:"ASCENDING",desc:"DESCENDING"},MD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OD={and:"AND",or:"OR"};class FD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function f2(n,e){return n.useProto3Json||ty(e)?e:{value:e}}function Kf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function UD(n,e){return Kf(n,e.toTimestamp())}function pi(n){return Rt(!!n,49232),Gt.fromTimestamp((function(t){const r=Qc(t);return new gt(r.seconds,r.nanos)})(n))}function Iv(n,e){return m2(n,e).canonicalString()}function m2(n,e){const t=(function(a){return new tr(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function CE(n){const e=tr.fromString(n);return Rt(FE(e),10190,{key:e.toString()}),e}function bx(n,e){return Iv(n.databaseId,e.path)}function Wd(n,e){const t=CE(e);if(t.get(1)!==n.databaseId.projectId)throw new tt(Ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new tt(Ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ot(RE(t))}function IE(n,e){return Iv(n.databaseId,e)}function kE(n){const e=CE(n);return e.length===4?tr.emptyPath():RE(e)}function g2(n){return new tr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function RE(n){return Rt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function v_(n,e,t){return{name:bx(n,e),fields:t.value.mapValue.fields}}function VD(n,e,t){const r=Wd(n,e.name),a=pi(e.updateTime),o=e.createTime?pi(e.createTime):Gt.min(),c=new Ja({mapValue:{fields:e.fields}}),u=hs.newFoundDocument(r,a,o,c);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function BD(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:vt(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(Rt(g===void 0||typeof g=="string",58123),Vs.fromBase64String(g||"")):(Rt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Vs.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&(function(f){const g=f.code===void 0?Ue.UNKNOWN:SE(f.code);return new tt(g,f.message||"")})(c);t=new AE(r,a,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Wd(n,r.document.name),o=pi(r.document.updateTime),c=r.document.createTime?pi(r.document.createTime):Gt.min(),u=new Ja({mapValue:{fields:r.document.fields}}),h=hs.newFoundDocument(a,o,c,u),f=r.targetIds||[],g=r.removedTargetIds||[];t=new $0(f,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Wd(n,r.document),o=r.readTime?pi(r.readTime):Gt.min(),c=hs.newNoDocument(a,o),u=r.removedTargetIds||[];t=new $0([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Wd(n,r.document),o=r.removedTargetIds||[];t=new $0([],o,a,null)}else{if(!("filter"in e))return vt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:o}=r,c=new ID(a,o),u=r.targetId;t=new EE(u,c)}}return t}function vx(n,e){let t;if(e instanceof lm)t={update:v_(n,e.key,e.value)};else if(e instanceof cp)t={delete:bx(n,e.key)};else if(e instanceof su)t={update:v_(n,e.key,e.data),updateMask:WD(e.fieldMask)};else{if(!(e instanceof _E))return vt(16599,{Vt:e.type});t={verify:bx(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,c){const u=c.transform;if(u instanceof Hf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof $f)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Wf)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Gg)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw vt(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,o){return o.updateTime!==void 0?{updateTime:UD(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:vt(27497)})(n,e.precondition)),t}function p2(n,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?ra.updateTime(pi(o.updateTime)):o.exists!==void 0?ra.exists(o.exists):ra.none()})(e.currentDocument):ra.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(c,u){let h=null;if("setToServerValue"in u)Rt(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),h=new Hf;else if("appendMissingElements"in u){const g=u.appendMissingElements.values||[];h=new $f(g)}else if("removeAllFromArray"in u){const g=u.removeAllFromArray.values||[];h=new Wf(g)}else"increment"in u?h=new Gg(c,u.increment):vt(16584,{proto:u});const f=Jr.fromServerFormat(u.fieldPath);return new wE(f,h)})(n,a))):[];if(e.update){e.update.name;const a=Wd(n,e.update.name),o=new Ja({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(h){const f=h.fieldPaths||[];return new Bi(f.map((g=>Jr.fromServerFormat(g))))})(e.updateMask);return new su(a,o,c,t,r)}return new lm(a,o,t,r)}if(e.delete){const a=Wd(n,e.delete);return new cp(a,t)}if(e.verify){const a=Wd(n,e.verify);return new _E(a,t)}return vt(1463,{proto:e})}function zD(n,e){return n&&n.length>0?(Rt(e!==void 0,14353),n.map((t=>(function(a,o){let c=a.updateTime?pi(a.updateTime):pi(o);return c.isEqual(Gt.min())&&(c=pi(o)),new AD(c,a.transformResults||[])})(t,e)))):[]}function PE(n,e){return{documents:[IE(n,e.path)]}}function LE(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=IE(n,a);const o=(function(f){if(f.length!==0)return OE(dr.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(f){if(f.length!==0)return f.map((g=>(function(v){return{field:xf(v.field),direction:GD(v.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=f2(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:a}}function DE(n){let e=kE(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Rt(r===1,65062);const g=t.from[0];g.allDescendants?a=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(x){const v=ME(x);return v instanceof dr&&_v(v)?v.getFilters():[v]})(t.where));let c=[];t.orderBy&&(c=(function(x){return x.map((v=>(function(T){return new qg(yf(T.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(v)))})(t.orderBy));let u=null;t.limit&&(u=(function(x){let v;return v=typeof x=="object"?x.value:x,ty(v)?null:v})(t.limit));let h=null;t.startAt&&(h=(function(x){const v=!!x.before,b=x.values||[];return new qf(b,v)})(t.startAt));let f=null;return t.endAt&&(f=(function(x){const v=!x.before,b=x.values||[];return new qf(b,v)})(t.endAt)),mD(e,a,c,o,u,"F",h,f)}function qD(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ME(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=yf(t.unaryFilter.field);return Dn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=yf(t.unaryFilter.field);return Dn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=yf(t.unaryFilter.field);return Dn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=yf(t.unaryFilter.field);return Dn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return vt(61313);default:return vt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Dn.create(yf(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return vt(58110);default:return vt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return dr.create(t.compositeFilter.filters.map((r=>ME(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return vt(1026)}})(t.compositeFilter.op))})(n):vt(30097,{filter:n})}function GD(n){return DD[n]}function HD(n){return MD[n]}function $D(n){return OD[n]}function xf(n){return{fieldPath:n.canonicalString()}}function yf(n){return Jr.fromServerFormat(n.fieldPath)}function OE(n){return n instanceof Dn?(function(t){if(t.op==="=="){if(s_(t.value))return{unaryFilter:{field:xf(t.field),op:"IS_NAN"}};if(r_(t.value))return{unaryFilter:{field:xf(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(s_(t.value))return{unaryFilter:{field:xf(t.field),op:"IS_NOT_NAN"}};if(r_(t.value))return{unaryFilter:{field:xf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xf(t.field),op:HD(t.op),value:t.value}}})(n):n instanceof dr?(function(t){const r=t.getFilters().map((a=>OE(a)));return r.length===1?r[0]:{compositeFilter:{op:$D(t.op),filters:r}}})(n):vt(54877,{filter:n})}function WD(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function FE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Gc{constructor(e,t,r,a,o=Gt.min(),c=Gt.min(),u=Vs.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Gc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Gc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class UE{constructor(e){this.yt=e}}function KD(n,e){let t;if(e.document)t=VD(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ot.fromSegments(e.noDocument.path),a=ih(e.noDocument.readTime);t=hs.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return vt(56709);{const r=ot.fromSegments(e.unknownDocument.path),a=ih(e.unknownDocument.version);t=hs.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const o=new gt(a[0],a[1]);return Gt.fromTimestamp(o)})(e.readTime)),t}function w_(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:wx(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,c){return{name:bx(o,c.key),fields:c.data.value.mapValue.fields,updateTime:Kf(o,c.version.toTimestamp()),createTime:Kf(o,c.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ah(e.version)};else{if(!e.isUnknownDocument())return vt(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:ah(e.version)}}return r}function wx(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ah(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ih(n){const e=new gt(n.seconds,n.nanoseconds);return Gt.fromTimestamp(e)}function Vd(n,e){const t=(e.baseMutations||[]).map((o=>p2(n.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];c.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map((o=>p2(n.yt,o))),a=gt.fromMillis(e.localWriteTimeMs);return new Ev(e.batchId,a,t,r)}function ug(n){const e=ih(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ih(n.lastLimboFreeSnapshotVersion):Gt.min();let r;return r=(function(o){return o.documents!==void 0})(n.query)?(function(o){const c=o.documents.length;return Rt(c===1,1966,{count:c}),Vo(op(kE(o.documents[0])))})(n.query):(function(o){return Vo(DE(o))})(n.query),new Gc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Vs.fromBase64String(n.resumeToken))}function VE(n,e){const t=ah(e.snapshotVersion),r=ah(e.lastLimboFreeSnapshotVersion);let a;a=xx(e.target)?PE(n.yt,e.target):LE(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:sh(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function BE(n){const e=DE({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?h2(e,e.limit,"L"):e}function a1(n,e){return new Tv(e.largestBatchId,p2(n.yt,e.overlayMutation))}function N_(n,e){const t=e.path.lastSegment();return[n,Za(e.path.popLast()),t]}function j_(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ah(r.readTime),documentKey:Za(r.documentKey.path),largestBatchId:r.largestBatchId}}class YD{getBundleMetadata(e,t){return __(e).get(t).next((r=>{if(r)return(function(o){return{id:o.bundleId,createTime:ih(o.createTime),version:o.version}})(r)}))}saveBundleMetadata(e,t){return __(e).put((function(a){return{bundleId:a.id,createTime:ah(pi(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return S_(e).get(t).next((r=>{if(r)return(function(o){return{name:o.name,query:BE(o.bundledQuery),readTime:ih(o.readTime)}})(r)}))}saveNamedQuery(e,t){return S_(e).put((function(a){return{name:a.name,readTime:ah(pi(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function __(n){return aa(n,ny)}function S_(n){return aa(n,ry)}class dy{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new dy(e,r)}getOverlay(e,t){return Qm(e).get(N_(this.userId,t)).next((r=>r?a1(this.serializer,r):null))}getOverlays(e,t){const r=Yl();return Te.forEach(t,(a=>this.getOverlay(e,a).next((o=>{o!==null&&r.set(a,o)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((o,c)=>{const u=new Tv(t,c);a.push(this.St(e,u))})),Te.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((c=>a.add(Za(c.getCollectionPath()))));const o=[];return a.forEach((c=>{const u=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);o.push(Qm(e).Z(s2,u))})),Te.waitFor(o)}getOverlaysForCollection(e,t,r){const a=Yl(),o=Za(t),c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Qm(e).J(s2,c).next((u=>{for(const h of u){const f=a1(this.serializer,h);a.set(f.getKey(),f)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const o=Yl();let c;const u=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Qm(e).ee({index:zS,range:u},((h,f,g)=>{const x=a1(this.serializer,f);o.size()<a||x.largestBatchId===c?(o.set(x.getKey(),x),c=x.largestBatchId):g.done()})).next((()=>o))}St(e,t){return Qm(e).put((function(a,o,c){const[u,h,f]=N_(o,c.mutation.key);return{userId:o,collectionPath:h,documentId:f,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:vx(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Qm(n){return aa(n,sy)}class XD{bt(e){return aa(e,bv)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?Vs.fromUint8Array(r):Vs.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Bd{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Gr(e.integerValue));else if("doubleValue"in e){const r=Gr(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Dg(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Qc(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Jc(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?eE(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):iy(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):vt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const a of Object.keys(r))this.Ot(a,t),this.Ct(r[a],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const a=Bf,o=r[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Gr(o)),this.Ot(a,t),this.Ct(r[a],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const a of r)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),ot.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Bd.Kt=new Bd;const sf=255;function QD(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function E_(n){const e=64-(function(r){let a=0;for(let o=0;o<8;++o){const c=QD(255&r[o]);if(a+=c,c!==8)break}return a})(n);return Math.ceil(e/8)}class JD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Ht()}Xt(e){const t=this.en(e),r=E_(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),r=E_(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(sf),this.sn(255)}_n(){this.an(sf),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===sf?(this.sn(sf),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===sf?(this.an(sf),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class ZD{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class eM{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Jm{constructor(){this.cn=new JD,this.ln=new ZD(this.cn),this.hn=new eM(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class zd{constructor(e,t,r,a){this.Tn=e,this.In=t,this.En=r,this.dn=a}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new zd(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:W0(this.En),directionalValue:W0(this.dn),orderedDocumentKey:W0(t),documentKey:r.path.toArray()}}Vn(e,t,r){const a=this.Rn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function Ou(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=A_(n.En,e.En),t!==0?t:(t=A_(n.dn,e.dn),t!==0?t:ot.comparator(n.In,e.In)))}function A_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function W0(n){return R3()?(function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r})(n):n}function T_(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(n)}class C_{constructor(e){this.mn=new hr(((t,r)=>Jr.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Rt(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=t2(e);if(t!==void 0&&!this.wn(t))return!1;const r=Md(e);let a=new Set,o=0,c=0;for(;o<r.length&&this.wn(r[o]);++o)a=a.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!a.has(u.field.canonicalString())){const h=r[o];if(!this.Sn(u,h)||!this.bn(this.fn[c++],h))return!1}++o}for(;o<r.length;++o){const u=r[o];if(c>=this.fn.length||!this.bn(this.fn[c++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new hr(Jr.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new U0(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new U0(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new U0(r.field,r.dir==="asc"?0:1)));return new hx(hx.UNKNOWN_ID,this.collectionId,t,Lg.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function zE(n){if(Rt(n instanceof Dn||n instanceof dr,20012),n instanceof Dn){if(n instanceof cE){const t=n.value.arrayValue?.values?.map((r=>Dn.create(n.field,"==",r)))||[];return dr.create(t,"or")}return n}const e=n.filters.map((t=>zE(t)));return dr.create(e,n.op)}function tM(n){if(n.getFilters().length===0)return[];const e=b2(zE(n));return Rt(qE(e),7391),x2(e)||y2(e)?[e]:e.getFilters()}function x2(n){return n instanceof Dn}function y2(n){return n instanceof dr&&_v(n)}function qE(n){return x2(n)||y2(n)||(function(t){if(t instanceof dr&&l2(t)){for(const r of t.getFilters())if(!x2(r)&&!y2(r))return!1;return!0}return!1})(n)}function b2(n){if(Rt(n instanceof Dn||n instanceof dr,34018),n instanceof Dn)return n;if(n.filters.length===1)return b2(n.filters[0]);const e=n.filters.map((r=>b2(r)));let t=dr.create(e,n.op);return t=Nx(t),qE(t)?t:(Rt(t instanceof dr,64498),Rt(Gf(t),40251),Rt(t.filters.length>1,57927),t.filters.reduce(((r,a)=>kv(r,a))))}function kv(n,e){let t;return Rt(n instanceof Dn||n instanceof dr,38388),Rt(e instanceof Dn||e instanceof dr,25473),t=n instanceof Dn?e instanceof Dn?(function(a,o){return dr.create([a,o],"and")})(n,e):I_(n,e):e instanceof Dn?I_(e,n):(function(a,o){if(Rt(a.filters.length>0&&o.filters.length>0,48005),Gf(a)&&Gf(o))return iE(a,o.getFilters());const c=l2(a)?a:o,u=l2(a)?o:a,h=c.filters.map((f=>kv(f,u)));return dr.create(h,"or")})(n,e),Nx(t)}function I_(n,e){if(Gf(e))return iE(e,n.getFilters());{const t=e.filters.map((r=>kv(n,r)));return dr.create(t,"or")}}function Nx(n){if(Rt(n instanceof Dn||n instanceof dr,11850),n instanceof Dn)return n;const e=n.getFilters();if(e.length===1)return Nx(e[0]);if(sE(n))return n;const t=e.map((a=>Nx(a))),r=[];return t.forEach((a=>{a instanceof Dn?r.push(a):a instanceof dr&&(a.op===n.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:dr.create(r,n.op)}class nM{constructor(){this.Cn=new Rv}addToCollectionParentIndex(e,t){return this.Cn.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Te.resolve()}deleteFieldIndex(e,t){return Te.resolve()}deleteAllFieldIndexes(e){return Te.resolve()}createTargetIndexes(e,t){return Te.resolve()}getDocumentsMatchingTarget(e,t){return Te.resolve(null)}getIndexType(e,t){return Te.resolve(0)}getFieldIndexes(e,t){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,t){return Te.resolve(mo.min())}getMinOffsetFromCollectionGroup(e,t){return Te.resolve(mo.min())}updateCollectionGroup(e,t,r){return Te.resolve()}updateIndexEntries(e,t){return Te.resolve()}}class Rv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new hr(tr.comparator),o=!a.has(r);return this.index[t]=a.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new hr(tr.comparator)).toArray()}}const k_="IndexedDbIndexManager",x0=new Uint8Array(0);class rM{constructor(e,t){this.databaseId=t,this.vn=new Rv,this.Fn=new ru((r=>sh(r)),((r,a)=>ip(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:r,parent:Za(a)};return R_(e).put(o)}return Te.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[IS(t),""],!1,!0);return R_(e).J(a).next((o=>{for(const c of o){if(c.collectionId!==t)break;r.push(Kl(c.parent))}return r}))}addFieldIndex(e,t){const r=Zm(e),a=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((h=>[h.fieldPath.canonicalString(),h.kind]))}})(t);delete a.indexId;const o=r.add(a);if(t.indexState){const c=of(e);return o.next((u=>{c.put(j_(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const r=Zm(e),a=of(e),o=af(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Zm(e),r=af(e),a=of(e);return t.Z().next((()=>r.Z())).next((()=>a.Z()))}createTargetIndexes(e,t){return Te.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const o=new C_(r).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const r=af(e);let a=!0;const o=new Map;return Te.forEach(this.Mn(t),(c=>this.xn(e,c).next((u=>{a&&(a=!!u),o.set(c,u)})))).next((()=>{if(a){let c=Sn();const u=[];return Te.forEach(o,((h,f)=>{Ze(k_,`Using index ${(function(O){return`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map((B=>`${B.fieldPath}:${B.kind}`)).join(",")}`})(h)} to execute ${sh(t)}`);const g=(function(O,B){const re=t2(B);if(re===void 0)return null;for(const ae of yx(O,re.fieldPath))switch(ae.op){case"array-contains-any":return ae.value.arrayValue.values||[];case"array-contains":return[ae.value]}return null})(f,h),x=(function(O,B){const re=new Map;for(const ae of Md(B))for(const G of yx(O,ae.fieldPath))switch(G.op){case"==":case"in":re.set(ae.fieldPath.canonicalString(),G.value);break;case"not-in":case"!=":return re.set(ae.fieldPath.canonicalString(),G.value),Array.from(re.values())}return null})(f,h),v=(function(O,B){const re=[];let ae=!0;for(const G of Md(B)){const M=G.kind===0?c_(O,G.fieldPath,O.startAt):u_(O,G.fieldPath,O.startAt);re.push(M.value),ae&&(ae=M.inclusive)}return new qf(re,ae)})(f,h),b=(function(O,B){const re=[];let ae=!0;for(const G of Md(B)){const M=G.kind===0?u_(O,G.fieldPath,O.endAt):c_(O,G.fieldPath,O.endAt);re.push(M.value),ae&&(ae=M.inclusive)}return new qf(re,ae)})(f,h),T=this.On(h,f,v),E=this.On(h,f,b),j=this.Nn(h,f,x),S=this.Bn(h.indexId,g,T,v.inclusive,E,b.inclusive,j);return Te.forEach(S,(D=>r.Y(D,t.limit).next((O=>{O.forEach((B=>{const re=ot.fromSegments(B.documentKey);c.has(re)||(c=c.add(re),u.push(re))}))}))))})).next((()=>u))}return Te.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=tM(dr.create(e.filters,"and")).map((r=>u2(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,a,o,c,u){const h=(t!=null?t.length:1)*Math.max(r.length,o.length),f=h/(t!=null?t.length:1),g=[];for(let x=0;x<h;++x){const v=t?this.Ln(t[x/f]):x0,b=this.kn(e,v,r[x%f],a),T=this.qn(e,v,o[x%f],c),E=u.map((j=>this.kn(e,v,j,!0)));g.push(...this.createRange(b,T,E))}return g}kn(e,t,r,a){const o=new zd(e,ot.empty(),t,r);return a?o:o.An()}qn(e,t,r,a){const o=new zd(e,ot.empty(),t,r);return a?o.An():o}xn(e,t){const r=new C_(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((o=>{let c=null;for(const u of o)r.yn(u)&&(!c||u.fields.length>c.fields.length)&&(c=u);return c}))}getIndexType(e,t){let r=2;const a=this.Mn(t);return Te.forEach(a,(o=>this.xn(e,o).next((c=>{c?r!==0&&c.fields.length<(function(h){let f=new hr(Jr.comparator),g=!1;for(const x of h.filters)for(const v of x.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?g=!0:f=f.add(v.field));for(const x of h.orderBy)x.field.isKeyField()||(f=f.add(x.field));return f.size+(g?1:0)})(o)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&r===2?1:r))}Qn(e,t){const r=new Jm;for(const a of Md(e)){const o=t.data.field(a.fieldPath);if(o==null)return null;const c=r.Pn(a.kind);Bd.Kt.Dt(o,c)}return r.un()}Ln(e){const t=new Jm;return Bd.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Jm;return Bd.Kt.Dt(Bg(this.databaseId,t),r.Pn((function(o){const c=Md(o);return c.length===0?0:c[c.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let a=[];a.push(new Jm);let o=0;for(const c of Md(e)){const u=r[o++];for(const h of a)if(this.Un(t,c.fieldPath)&&zg(u))a=this.Kn(a,c,u);else{const f=h.Pn(c.kind);Bd.Kt.Dt(u,f)}}return this.Wn(a)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const a=[...e],o=[];for(const c of r.arrayValue.values||[])for(const u of a){const h=new Jm;h.seed(u.un()),Bd.Kt.Dt(c,h.Pn(t.kind)),o.push(h)}return o}Un(e,t){return!!e.filters.find((r=>r instanceof Dn&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Zm(e),a=of(e);return(t?r.J(r2,IDBKeyRange.bound(t,t)):r.J()).next((o=>{const c=[];return Te.forEach(o,(u=>a.get([u.indexId,this.uid]).next((h=>{c.push((function(g,x){const v=x?new Lg(x.sequenceNumber,new mo(ih(x.readTime),new ot(Kl(x.documentKey)),x.largestBatchId)):Lg.empty(),b=g.fields.map((([T,E])=>new U0(Jr.fromServerFormat(T),E)));return new hx(g.indexId,g.collectionGroup,b,v)})(u,h))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const o=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return o!==0?o:cn(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=Zm(e),o=of(e);return this.Gn(e).next((c=>a.J(r2,IDBKeyRange.bound(t,t)).next((u=>Te.forEach(u,(h=>o.put(j_(h.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return Te.forEach(t,((a,o)=>{const c=r.get(a.collectionGroup);return(c?Te.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((u=>(r.set(a.collectionGroup,u),Te.forEach(u,(h=>this.zn(e,a,h).next((f=>{const g=this.jn(o,h);return f.isEqual(g)?Te.resolve():this.Jn(e,o,h,f,g)})))))))}))}Hn(e,t,r,a){return af(e).put(a.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,a){return af(e).delete(a.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const a=af(e);let o=new hr(Ou);return a.ee({index:BS,range:IDBKeyRange.only([r.indexId,this.uid,W0(this.$n(r,t))])},((c,u)=>{o=o.add(new zd(r.indexId,t,T_(u.arrayValue),T_(u.directionalValue)))})).next((()=>o))}jn(e,t){let r=new hr(Ou);const a=this.Qn(t,e);if(a==null)return r;const o=t2(t);if(o!=null){const c=e.data.field(o.fieldPath);if(zg(c))for(const u of c.arrayValue.values||[])r=r.add(new zd(t.indexId,e.key,this.Ln(u),a))}else r=r.add(new zd(t.indexId,e.key,x0,a));return r}Jn(e,t,r,a,o){Ze(k_,"Updating index entries for document '%s'",t.key);const c=[];return(function(h,f,g,x,v){const b=h.getIterator(),T=f.getIterator();let E=rf(b),j=rf(T);for(;E||j;){let S=!1,D=!1;if(E&&j){const O=g(E,j);O<0?D=!0:O>0&&(S=!0)}else E!=null?D=!0:S=!0;S?(x(j),j=rf(T)):D?(v(E),E=rf(b)):(E=rf(b),j=rf(T))}})(a,o,Ou,(u=>{c.push(this.Hn(e,t,r,u))}),(u=>{c.push(this.Yn(e,t,r,u))})),Te.waitFor(c)}Gn(e){let t=1;return of(e).ee({index:VS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,o)=>{o.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,u)=>Ou(c,u))).filter(((c,u,h)=>!u||Ou(c,h[u-1])!==0));const a=[];a.push(e);for(const c of r){const u=Ou(c,e),h=Ou(c,t);if(u===0)a[0]=e.An();else if(u>0&&h<0)a.push(c),a.push(c.An());else if(h>0)break}a.push(t);const o=[];for(let c=0;c<a.length;c+=2){if(this.Zn(a[c],a[c+1]))return[];const u=a[c].Vn(this.uid,x0,ot.empty()),h=a[c+1].Vn(this.uid,x0,ot.empty());o.push(IDBKeyRange.bound(u,h))}return o}Zn(e,t){return Ou(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(P_)}getMinOffset(e,t){return Te.mapArray(this.Mn(t),(r=>this.xn(e,r).next((a=>a||vt(44426))))).next(P_)}}function R_(n){return aa(n,Fg)}function af(n){return aa(n,xg)}function Zm(n){return aa(n,yv)}function of(n){return aa(n,pg)}function P_(n){Rt(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const a=n[r].indexState.offset;gv(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new mo(e.readTime,e.documentKey,t)}const L_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},GE=41943040;class Qa{static withCacheSize(e){return new Qa(e,Qa.DEFAULT_COLLECTION_PERCENTILE,Qa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function HE(n,e,t){const r=n.store(fl),a=n.store(Of),o=[],c=IDBKeyRange.only(t.batchId);let u=0;const h=r.ee({range:c},((g,x,v)=>(u++,v.delete())));o.push(h.next((()=>{Rt(u===1,47070,{batchId:t.batchId})})));const f=[];for(const g of t.mutations){const x=OS(e,g.key.path,t.batchId);o.push(a.delete(x)),f.push(g.key)}return Te.waitFor(o).next((()=>f))}function jx(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw vt(14731);e=n.noDocument}return JSON.stringify(e).length}Qa.DEFAULT_COLLECTION_PERCENTILE=10,Qa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qa.DEFAULT=new Qa(GE,Qa.DEFAULT_COLLECTION_PERCENTILE,Qa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qa.DISABLED=new Qa(-1,0,0);class hy{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Xn={}}static wt(e,t,r,a){Rt(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new hy(o,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fu(e).ee({index:Gd,range:r},((a,o,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const o=bf(e),c=Fu(e);return c.add({}).next((u=>{Rt(typeof u=="number",49019);const h=new Ev(u,t,r,a),f=(function(b,T,E){const j=E.baseMutations.map((D=>vx(b.yt,D))),S=E.mutations.map((D=>vx(b.yt,D)));return{userId:T,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:j,mutations:S}})(this.serializer,this.userId,h),g=[];let x=new hr(((v,b)=>cn(v.canonicalString(),b.canonicalString())));for(const v of a){const b=OS(this.userId,v.key.path,u);x=x.add(v.key.path.popLast()),g.push(c.put(f)),g.push(o.put(b,R7))}return x.forEach((v=>{g.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[u]=h.keys()})),Te.waitFor(g).next((()=>h))}))}lookupMutationBatch(e,t){return Fu(e).get(t).next((r=>r?(Rt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Vd(this.serializer,r)):null))}er(e,t){return this.Xn[t]?Te.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Xn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Fu(e).ee({index:Gd,range:a},((c,u,h)=>{u.userId===this.userId&&(Rt(u.batchId>=r,47524,{tr:r}),o=Vd(this.serializer,u)),h.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Hd;return Fu(e).ee({index:Gd,range:t,reverse:!0},((a,o,c)=>{r=o.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Hd],[this.userId,Number.POSITIVE_INFINITY]);return Fu(e).J(Gd,t).next((r=>r.map((a=>Vd(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=V0(this.userId,t.path),a=IDBKeyRange.lowerBound(r),o=[];return bf(e).ee({range:a},((c,u,h)=>{const[f,g,x]=c,v=Kl(g);if(f===this.userId&&t.path.isEqual(v))return Fu(e).get(x).next((b=>{if(!b)throw vt(61480,{nr:c,batchId:x});Rt(b.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:b.userId,batchId:x}),o.push(Vd(this.serializer,b))}));h.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hr(cn);const a=[];return t.forEach((o=>{const c=V0(this.userId,o.path),u=IDBKeyRange.lowerBound(c),h=bf(e).ee({range:u},((f,g,x)=>{const[v,b,T]=f,E=Kl(b);v===this.userId&&o.path.isEqual(E)?r=r.add(T):x.done()}));a.push(h)})),Te.waitFor(a).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,o=V0(this.userId,r),c=IDBKeyRange.lowerBound(o);let u=new hr(cn);return bf(e).ee({range:c},((h,f,g)=>{const[x,v,b]=h,T=Kl(v);x===this.userId&&r.isPrefixOf(T)?T.length===a&&(u=u.add(b)):g.done()})).next((()=>this.rr(e,u)))}rr(e,t){const r=[],a=[];return t.forEach((o=>{a.push(Fu(e).get(o).next((c=>{if(c===null)throw vt(35274,{batchId:o});Rt(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:o}),r.push(Vd(this.serializer,c))})))})),Te.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return HE(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),Te.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Te.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return bf(e).ee({range:r},((o,c,u)=>{if(o[0]===this.userId){const h=Kl(o[1]);a.push(h)}else u.done()})).next((()=>{Rt(a.length===0,56720,{sr:a.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return $E(e,this.userId,t)}_r(e){return WE(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Hd,lastStreamToken:""}))}}function $E(n,e,t){const r=V0(e,t.path),a=r[1],o=IDBKeyRange.lowerBound(r);let c=!1;return bf(n).ee({range:o,X:!0},((u,h,f)=>{const[g,x,v]=u;g===e&&x===a&&(c=!0),f.done()})).next((()=>c))}function Fu(n){return aa(n,fl)}function bf(n){return aa(n,Of)}function WE(n){return aa(n,Mg)}class oh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new oh(0)}static cr(){return new oh(-1)}}class sM{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new oh(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Gt.fromTimestamp(new gt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.hr(e,a))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>lf(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(Rt(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let a=0;const o=[];return lf(e).ee(((c,u)=>{const h=ug(u);h.sequenceNumber<=t&&r.get(h.targetId)===null&&(a++,o.push(this.removeTargetData(e,h)))})).next((()=>Te.waitFor(o))).next((()=>a))}forEachTarget(e,t){return lf(e).ee(((r,a)=>{const o=ug(a);t(o)}))}lr(e){return D_(e).get(gx).next((t=>(Rt(t!==null,2888),t)))}hr(e,t){return D_(e).put(gx,t)}Pr(e,t){return lf(e).put(VE(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=sh(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return lf(e).ee({range:a,index:US},((c,u,h)=>{const f=ug(u);ip(t,f.target)&&(o=f,h.done())})).next((()=>o))}addMatchingKeys(e,t,r){const a=[],o=$u(e);return t.forEach((c=>{const u=Za(c.path);a.push(o.put({targetId:r,path:u})),a.push(this.referenceDelegate.addReference(e,r,c))})),Te.waitFor(a)}removeMatchingKeys(e,t,r){const a=$u(e);return Te.forEach(t,(o=>{const c=Za(o.path);return Te.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,o)])}))}removeMatchingKeysForTargetId(e,t){const r=$u(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=$u(e);let o=Sn();return a.ee({range:r,X:!0},((c,u,h)=>{const f=Kl(c[1]),g=new ot(f);o=o.add(g)})).next((()=>o))}containsKey(e,t){const r=Za(t.path),a=IDBKeyRange.bound([r],[IS(r)],!1,!0);let o=0;return $u(e).ee({index:xv,X:!0,range:a},(([c,u],h,f)=>{c!==0&&(o++,f.done())})).next((()=>o>0))}At(e,t){return lf(e).get(t).next((r=>r?ug(r):null))}}function lf(n){return aa(n,Ff)}function D_(n){return aa(n,$d)}function $u(n){return aa(n,Uf)}const M_="LruGarbageCollector",aM=1048576;function O_([n,e],[t,r]){const a=cn(n,t);return a===0?cn(e,r):a}class iM{constructor(e){this.Ir=e,this.buffer=new hr(O_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();O_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class KE{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ze(M_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){gd(t)?Ze(M_,"Ignoring IndexedDB error during garbage collection: ",t):await gh(t)}await this.Vr(3e5)}))}}class oM{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return Te.resolve(Fo.ce);const r=new iM(t);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ze("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(L_)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),L_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,a,o,c,u,h,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(Ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),a=this.params.maximumSequenceNumbersToCollect):a=x,c=Date.now(),this.nthSequenceNumber(e,a)))).next((x=>(r=x,u=Date.now(),this.removeTargets(e,r,t)))).next((x=>(o=x,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((x=>(f=Date.now(),gf()<=Ln.DEBUG&&Ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${a} in `+(u-c)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${x} documents in `+(f-h)+`ms
Total Duration: ${f-g}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:x}))))}}function YE(n,e){return new oM(n,e)}class lM{constructor(e,t){this.db=e,this.garbageCollector=YE(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,a)=>t(a)))}addReference(e,t,r){return y0(e,r)}removeReference(e,t,r){return y0(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return y0(e,t)}br(e,t){return(function(a,o){let c=!1;return WE(a).te((u=>$E(a,u,o).next((h=>(h&&(c=!0),Te.resolve(!h)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let o=0;return this.Sr(e,((c,u)=>{if(u<=t){const h=this.br(e,c).next((f=>{if(!f)return o++,r.getEntry(e,c).next((()=>(r.removeEntry(c,Gt.min()),$u(e).delete((function(x){return[0,Za(x.path)]})(c)))))}));a.push(h)}})).next((()=>Te.waitFor(a))).next((()=>r.apply(e))).next((()=>o))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return y0(e,t)}Sr(e,t){const r=$u(e);let a,o=Fo.ce;return r.ee({index:xv},(([c,u],{path:h,sequenceNumber:f})=>{c===0?(o!==Fo.ce&&t(new ot(Kl(a)),o),o=f,a=h):o=Fo.ce})).next((()=>{o!==Fo.ce&&t(new ot(Kl(a)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function y0(n,e){return $u(n).put((function(r,a){return{targetId:0,path:Za(r.path),sequenceNumber:a}})(e,n.currentSequenceNumber))}class XE{constructor(){this.changes=new ru((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ld(e).put(r)}removeEntry(e,t,r){return Ld(e).delete((function(o,c){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],wx(c),u[u.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=hs.newInvalidDocument(t);return Ld(e).ee({index:B0,range:IDBKeyRange.only(eg(t))},((a,o)=>{r=this.Cr(t,o)})).next((()=>r))}vr(e,t){let r={size:0,document:hs.newInvalidDocument(t)};return Ld(e).ee({index:B0,range:IDBKeyRange.only(eg(t))},((a,o)=>{r={document:this.Cr(t,o),size:jx(o)}})).next((()=>r))}getEntries(e,t){let r=uo();return this.Fr(e,t,((a,o)=>{const c=this.Cr(a,o);r=r.insert(a,c)})).next((()=>r))}Mr(e,t){let r=uo(),a=new Hr(ot.comparator);return this.Fr(e,t,((o,c)=>{const u=this.Cr(o,c);r=r.insert(o,u),a=a.insert(o,jx(c))})).next((()=>({documents:r,Or:a})))}Fr(e,t,r){if(t.isEmpty())return Te.resolve();let a=new hr(V_);t.forEach((h=>a=a.add(h)));const o=IDBKeyRange.bound(eg(a.first()),eg(a.last())),c=a.getIterator();let u=c.getNext();return Ld(e).ee({index:B0,range:o},((h,f,g)=>{const x=ot.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;u&&V_(u,x)<0;)r(u,null),u=c.getNext();u&&u.isEqual(x)&&(r(u,f),u=c.hasNext()?c.getNext():null),u?g.j(eg(u)):g.done()})).next((()=>{for(;u;)r(u,null),u=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,o){const c=t.path,u=[c.popLast().toArray(),c.lastSegment(),wx(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ld(e).J(IDBKeyRange.bound(u,h,!0)).next((f=>{o?.incrementDocumentReadCount(f.length);let g=uo();for(const x of f){const v=this.Cr(ot.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);v.isFoundDocument()&&(lp(t,v)||a.has(v.key))&&(g=g.insert(v.key,v))}return g}))}getAllFromCollectionGroup(e,t,r,a){let o=uo();const c=U_(t,r),u=U_(t,mo.max());return Ld(e).ee({index:FS,range:IDBKeyRange.bound(c,u,!0)},((h,f,g)=>{const x=this.Cr(ot.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(x.key,x),o.size===a&&g.done()})).next((()=>o))}newChangeBuffer(e){return new uM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return F_(e).get(n2).next((t=>(Rt(!!t,20021),t)))}Dr(e,t){return F_(e).put(n2,t)}Cr(e,t){if(t){const r=KD(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Gt.min())))return r}return hs.newInvalidDocument(e)}}function QE(n){return new cM(n)}class uM extends XE{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new ru((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new hr(((o,c)=>cn(o.canonicalString(),c.canonicalString())));return this.changes.forEach(((o,c)=>{const u=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,u.readTime)),c.isValidDocument()){const h=w_(this.Nr.serializer,c);a=a.add(o.path.popLast());const f=jx(h);r+=f-u.size,t.push(this.Nr.addEntry(e,o,h))}else if(r-=u.size,this.trackRemovals){const h=w_(this.Nr.serializer,c.convertToNoDocument(Gt.min()));t.push(this.Nr.addEntry(e,o,h))}})),a.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,r)),Te.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:a})=>(a.forEach(((o,c)=>{this.Br.set(o,{size:c,readTime:r.get(o).readTime})})),r)))}}function F_(n){return aa(n,Og)}function Ld(n){return aa(n,mx)}function eg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function U_(n,e){const t=e.documentKey.path.toArray();return[n,wx(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function V_(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(a=cn(t[o],r[o]),a)return a;return a=cn(t.length,r.length),a||(a=cn(t[t.length-2],r[r.length-2]),a||cn(t[t.length-1],r[r.length-1]))}class dM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class JE{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&wg(r.mutation,a,Bi.empty(),gt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Sn()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Sn()){const a=Yl();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((o=>{let c=lg();return o.forEach(((u,h)=>{c=c.insert(u,h.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Yl();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Sn())))}populateOverlays(e,t,r){const a=[];return r.forEach((o=>{t.has(o)||a.push(o)})),this.documentOverlayCache.getOverlays(e,a).next((o=>{o.forEach(((c,u)=>{t.set(c,u)}))}))}computeViews(e,t,r,a){let o=uo();const c=vg(),u=(function(){return vg()})();return t.forEach(((h,f)=>{const g=r.get(f.key);a.has(f.key)&&(g===void 0||g.mutation instanceof su)?o=o.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),wg(g.mutation,f,g.mutation.getFieldMask(),gt.now())):c.set(f.key,Bi.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((f,g)=>c.set(f,g))),t.forEach(((f,g)=>u.set(f,new dM(g,c.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,t){const r=vg();let a=new Hr(((c,u)=>c-u)),o=Sn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const u of c)u.keys().forEach((h=>{const f=t.get(h);if(f===null)return;let g=r.get(h)||Bi.empty();g=u.applyToLocalView(f,g),r.set(h,g);const x=(a.get(u.batchId)||Sn()).add(h);a=a.insert(u.batchId,x)}))})).next((()=>{const c=[],u=a.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,g=h.value,x=gE();g.forEach((v=>{if(!o.has(v)){const b=NE(t.get(v),r.get(v));b!==null&&x.set(v,b),o=o.add(v)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,x))}return Te.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(c){return ot.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):uE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((o=>{const c=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-o.size):Te.resolve(Yl());let u=Pg,h=o;return c.next((f=>Te.forEach(f,((g,x)=>(u<x.largestBatchId&&(u=x.largestBatchId),o.get(g)?Te.resolve():this.remoteDocumentCache.getEntry(e,g).next((v=>{h=h.insert(g,v)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,h,f,Sn()))).next((g=>({batchId:u,changes:mE(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ot(t)).next((r=>{let a=lg();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const o=t.collectionGroup;let c=lg();return this.indexManager.getCollectionParents(e,o).next((u=>Te.forEach(u,(h=>{const f=(function(x,v){return new om(v,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,a).next((g=>{g.forEach(((x,v)=>{c=c.insert(x,v)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,a)))).next((c=>{o.forEach(((h,f)=>{const g=f.getKey();c.get(g)===null&&(c=c.insert(g,hs.newInvalidDocument(g)))}));let u=lg();return c.forEach(((h,f)=>{const g=o.get(h);g!==void 0&&wg(g.mutation,f,Bi.empty(),gt.now()),lp(t,f)&&(u=u.insert(h,f))})),u}))}}class hM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:pi(a.createTime)}})(t)),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:BE(a.bundledQuery),readTime:pi(a.readTime)}})(t)),Te.resolve()}}class fM{constructor(){this.overlays=new Hr(ot.comparator),this.qr=new Map}getOverlay(e,t){return Te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Yl();return Te.forEach(t,(a=>this.getOverlay(e,a).next((o=>{o!==null&&r.set(a,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,o)=>{this.St(e,t,o)})),Te.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),Te.resolve()}getOverlaysForCollection(e,t,r){const a=Yl(),o=t.length+1,c=new ot(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&a.set(h.getKey(),h)}return Te.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let o=new Hr(((f,g)=>f-g));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let g=o.get(f.largestBatchId);g===null&&(g=Yl(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=Yl(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,g)=>u.set(f,g))),!(u.size()>=a)););return Te.resolve(u)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Tv(t,r));let o=this.qr.get(t);o===void 0&&(o=Sn(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}class mM{constructor(){this.sessionToken=Vs.EMPTY_BYTE_STRING}getSessionToken(e){return Te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Te.resolve()}}class Pv{constructor(){this.Qr=new hr(ba.$r),this.Ur=new hr(ba.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new ba(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new ba(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ot(new tr([])),r=new ba(t,e),a=new ba(t,e+1),o=[];return this.Ur.forEachInRange([r,a],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ot(new tr([])),r=new ba(t,e),a=new ba(t,e+1);let o=Sn();return this.Ur.forEachInRange([r,a],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new ba(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class ba{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ot.comparator(e.key,t.key)||cn(e.Yr,t.Yr)}static Kr(e,t){return cn(e.Yr,t.Yr)||ot.comparator(e.key,t.key)}}class gM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new hr(ba.$r)}checkEmpty(e){return Te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Ev(o,t,r,a);this.mutationQueue.push(c);for(const u of a)this.Zr=this.Zr.add(new ba(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Te.resolve(c)}lookupMutationBatch(e,t){return Te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.ei(r),o=a<0?0:a;return Te.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(this.mutationQueue.length===0?Hd:this.tr-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ba(t,0),a=new ba(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,a],(c=>{const u=this.Xr(c.Yr);o.push(u)})),Te.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hr(cn);return t.forEach((a=>{const o=new ba(a,0),c=new ba(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(u=>{r=r.add(u.Yr)}))})),Te.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let o=r;ot.isDocumentKey(o)||(o=o.child(""));const c=new ba(new ot(o),0);let u=new hr(cn);return this.Zr.forEachWhile((h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===a&&(u=u.add(h.Yr)),!0)}),c),Te.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Rt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Te.forEach(t.mutations,(a=>{const o=new ba(a.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new ba(t,0),a=this.Zr.firstAfterOrEqual(r);return Te.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Te.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class pM{constructor(e){this.ri=e,this.docs=(function(){return new Hr(ot.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),o=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Te.resolve(r?r.document.mutableCopy():hs.newInvalidDocument(t))}getEntries(e,t){let r=uo();return t.forEach((a=>{const o=this.docs.get(a);r=r.insert(a,o?o.document.mutableCopy():hs.newInvalidDocument(a))})),Te.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let o=uo();const c=t.path,u=new ot(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:g}}=h.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||gv(PS(g),r)<=0||(a.has(g.key)||lp(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return Te.resolve(o)}getAllFromCollectionGroup(e,t,r,a){vt(9500)}ii(e,t){return Te.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new xM(this)}getSize(e){return Te.resolve(this.size)}}class xM extends XE{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),Te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class yM{constructor(e){this.persistence=e,this.si=new ru((t=>sh(t)),ip),this.lastRemoteSnapshotVersion=Gt.min(),this.highestTargetId=0,this.oi=0,this._i=new Pv,this.targetCount=0,this.ai=oh.ur()}forEachTarget(e,t){return this.si.forEach(((r,a)=>t(a))),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),Te.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new oh(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.Pr(t),Te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,r){let a=0;const o=[];return this.si.forEach(((c,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),a++)})),Te.waitFor(o).next((()=>a))}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return Te.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),Te.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const a=this.persistence.referenceDelegate,o=[];return a&&t.forEach((c=>{o.push(a.markPotentiallyOrphaned(e,c))})),Te.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Te.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return Te.resolve(r)}containsKey(e,t){return Te.resolve(this._i.containsKey(t))}}class Lv{constructor(e,t){this.ui={},this.overlays={},this.ci=new Fo(0),this.li=!1,this.li=!0,this.hi=new mM,this.referenceDelegate=e(this),this.Pi=new yM(this),this.indexManager=new nM,this.remoteDocumentCache=(function(a){return new pM(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new UE(t),this.Ii=new hM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new gM(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Ze("MemoryPersistence","Starting transaction:",e);const a=new bM(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((o=>this.referenceDelegate.di(a).next((()=>o)))).toPromise().then((o=>(a.raiseOnCommittedEvent(),o)))}Ai(e,t){return Te.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class bM extends DS{constructor(e){super(),this.currentSequenceNumber=e}}class fy{constructor(e){this.persistence=e,this.Ri=new Pv,this.Vi=null}static mi(e){return new fy(e)}get fi(){if(this.Vi)return this.Vi;throw vt(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),Te.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.fi,(r=>{const a=ot.fromPath(r);return this.gi(e,a).next((o=>{o||t.removeEntry(a,Gt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Te.or([()=>Te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class _x{constructor(e,t){this.persistence=e,this.pi=new ru((r=>Za(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=YE(this,t)}static mi(e,t){return new _x(e,t)}Ei(){}di(e){return Te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return Te.forEach(this.pi,((r,a)=>this.br(e,r,a).next((o=>o?Te.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((u=>{u||(r++,o.removeEntry(c,Gt.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Te.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Te.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=q0(e.data.value)),t}br(e,t,r){return Te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return Te.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class vM{constructor(e){this.serializer=e}k(e,t,r,a){const o=new ey("createOrUpgrade",t);r<1&&a>=1&&((function(h){h.createObjectStore(ap)})(e),(function(h){h.createObjectStore(Mg,{keyPath:k7}),h.createObjectStore(fl,{keyPath:Qj,autoIncrement:!0}).createIndex(Gd,Jj,{unique:!0}),h.createObjectStore(Of)})(e),B_(e),(function(h){h.createObjectStore(Od)})(e));let c=Te.resolve();return r<3&&a>=3&&(r!==0&&((function(h){h.deleteObjectStore(Uf),h.deleteObjectStore(Ff),h.deleteObjectStore($d)})(e),B_(e)),c=c.next((()=>(function(h){const f=h.store($d),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Gt.min().toTimestamp(),targetCount:0};return f.put(gx,g)})(o)))),r<4&&a>=4&&(r!==0&&(c=c.next((()=>(function(h,f){return f.store(fl).J().next((x=>{h.deleteObjectStore(fl),h.createObjectStore(fl,{keyPath:Qj,autoIncrement:!0}).createIndex(Gd,Jj,{unique:!0});const v=f.store(fl),b=x.map((T=>v.put(T)));return Te.waitFor(b)}))})(e,o)))),c=c.next((()=>{(function(h){h.createObjectStore(Vf,{keyPath:V7})})(e)}))),r<5&&a>=5&&(c=c.next((()=>this.yi(o)))),r<6&&a>=6&&(c=c.next((()=>((function(h){h.createObjectStore(Og)})(e),this.wi(o))))),r<7&&a>=7&&(c=c.next((()=>this.Si(o)))),r<8&&a>=8&&(c=c.next((()=>this.bi(e,o)))),r<9&&a>=9&&(c=c.next((()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(c=c.next((()=>this.Di(o)))),r<11&&a>=11&&(c=c.next((()=>{(function(h){h.createObjectStore(ny,{keyPath:B7})})(e),(function(h){h.createObjectStore(ry,{keyPath:z7})})(e)}))),r<12&&a>=12&&(c=c.next((()=>{(function(h){const f=h.createObjectStore(sy,{keyPath:Y7});f.createIndex(s2,X7,{unique:!1}),f.createIndex(zS,Q7,{unique:!1})})(e)}))),r<13&&a>=13&&(c=c.next((()=>(function(h){const f=h.createObjectStore(mx,{keyPath:P7});f.createIndex(B0,L7),f.createIndex(FS,D7)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(Od)))),r<14&&a>=14&&(c=c.next((()=>this.Fi(e,o)))),r<15&&a>=15&&(c=c.next((()=>(function(h){h.createObjectStore(yv,{keyPath:q7,autoIncrement:!0}).createIndex(r2,G7,{unique:!1}),h.createObjectStore(pg,{keyPath:H7}).createIndex(VS,$7,{unique:!1}),h.createObjectStore(xg,{keyPath:W7}).createIndex(BS,K7,{unique:!1})})(e)))),r<16&&a>=16&&(c=c.next((()=>{t.objectStore(pg).clear()})).next((()=>{t.objectStore(xg).clear()}))),r<17&&a>=17&&(c=c.next((()=>{(function(h){h.createObjectStore(bv,{keyPath:J7})})(e)}))),r<18&&a>=18&&R3()&&(c=c.next((()=>{t.objectStore(pg).clear()})).next((()=>{t.objectStore(xg).clear()}))),c}wi(e){let t=0;return e.store(Od).ee(((r,a)=>{t+=jx(a)})).next((()=>{const r={byteSize:t};return e.store(Og).put(n2,r)}))}yi(e){const t=e.store(Mg),r=e.store(fl);return t.J().next((a=>Te.forEach(a,(o=>{const c=IDBKeyRange.bound([o.userId,Hd],[o.userId,o.lastAcknowledgedBatchId]);return r.J(Gd,c).next((u=>Te.forEach(u,(h=>{Rt(h.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:h.batchId});const f=Vd(this.serializer,h);return HE(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const t=e.store(Uf),r=e.store(Od);return e.store($d).get(gx).next((a=>{const o=[];return r.ee(((c,u)=>{const h=new tr(c),f=(function(x){return[0,Za(x)]})(h);o.push(t.get(f).next((g=>g?Te.resolve():(x=>t.put({targetId:0,path:Za(x),sequenceNumber:a.highestListenSequenceNumber}))(h))))})).next((()=>Te.waitFor(o)))}))}bi(e,t){e.createObjectStore(Fg,{keyPath:U7});const r=t.store(Fg),a=new Rv,o=c=>{if(a.add(c)){const u=c.lastSegment(),h=c.popLast();return r.put({collectionId:u,parent:Za(h)})}};return t.store(Od).ee({X:!0},((c,u)=>{const h=new tr(c);return o(h.popLast())})).next((()=>t.store(Of).ee({X:!0},(([c,u,h],f)=>{const g=Kl(u);return o(g.popLast())}))))}Di(e){const t=e.store(Ff);return t.ee(((r,a)=>{const o=ug(a),c=VE(this.serializer,o);return t.put(c)}))}Ci(e,t){const r=t.store(Od),a=[];return r.ee(((o,c)=>{const u=t.store(mx),h=(function(x){return x.document?new ot(tr.fromString(x.document.name).popFirst(5)):x.noDocument?ot.fromSegments(x.noDocument.path):x.unknownDocument?ot.fromSegments(x.unknownDocument.path):vt(36783)})(c).path.toArray(),f={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(u.put(f))})).next((()=>Te.waitFor(a)))}Fi(e,t){const r=t.store(fl),a=QE(this.serializer),o=new Lv(fy.mi,this.serializer.yt);return r.J().next((c=>{const u=new Map;return c.forEach((h=>{let f=u.get(h.userId)??Sn();Vd(this.serializer,h).keys().forEach((g=>f=f.add(g))),u.set(h.userId,f)})),Te.forEach(u,((h,f)=>{const g=new Ma(f),x=dy.wt(this.serializer,g),v=o.getIndexManager(g),b=hy.wt(g,this.serializer,v,o.referenceDelegate);return new JE(a,b,x,v).recalculateAndSaveOverlaysForDocumentKeys(new a2(t,Fo.ce),h).next()}))}))}}function B_(n){n.createObjectStore(Uf,{keyPath:O7}).createIndex(xv,F7,{unique:!0}),n.createObjectStore(Ff,{keyPath:"targetId"}).createIndex(US,M7,{unique:!0}),n.createObjectStore($d)}const Uu="IndexedDbPersistence",i1=18e5,o1=5e3,l1="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",wM="main";class Dv{constructor(e,t,r,a,o,c,u,h,f,g,x=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=o,this.window=c,this.document=u,this.xi=f,this.Oi=g,this.Ni=x,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!Dv.v())throw new tt(Ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lM(this,a),this.$i=t+wM,this.serializer=new UE(h),this.Ui=new td(this.$i,this.Ni,new vM(this.serializer)),this.hi=new XD,this.Pi=new sM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=QE(this.serializer),this.Ii=new YD,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&gi(Uu,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new tt(Ue.FAILED_PRECONDITION,l1);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Fo(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>b0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(gd(e))return Ze(Uu,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ze(Uu,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return tg(e).get(nf).next((t=>Te.resolve(this.es(t))))}ts(e){return b0(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,i1)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=aa(t,Vf);return r.J().next((a=>{const o=this.ss(a,i1),c=a.filter((u=>o.indexOf(u)===-1));return Te.forEach(c,(u=>r.delete(u.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?Te.resolve(!0):tg(e).get(nf).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,o1)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new tt(Ue.FAILED_PRECONDITION,l1);return!1}}return!(!this.networkEnabled||!this.inForeground)||b0(e).J().next((r=>this.ss(r,o1).find((a=>{if(this.clientId!==a.clientId){const o=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,u=this.networkEnabled===a.networkEnabled;if(o||c&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&Ze(Uu,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[ap,Vf],(e=>{const t=new a2(e,Fo.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>b0(e).J().next((t=>this.ss(t,i1).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return hy.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new rM(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return dy.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){Ze(Uu,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",o=(function(h){return h===18?tD:h===17?$S:h===16?eD:h===15?vv:h===14?HS:h===13?GS:h===12?Z7:h===11?qS:void vt(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,a,o,(u=>(c=new a2(u,this.ci?this.ci.next():Fo.ce),t==="readwrite-primary"?this.Hi(c).next((h=>!!h||this.Yi(c))).next((h=>{if(!h)throw gi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new tt(Ue.FAILED_PRECONDITION,LS);return r(c)})).next((h=>this.Xi(c).next((()=>h)))):this.Is(c).next((()=>r(c)))))).then((u=>(c.raiseOnCommittedEvent(),u)))}Is(e){return tg(e).get(nf).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,o1)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new tt(Ue.FAILED_PRECONDITION,l1)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tg(e).put(nf,t)}static v(){return td.v()}Zi(e){const t=tg(e);return t.get(nf).next((r=>this.es(r)?(Ze(Uu,"Releasing primary lease."),t.delete(nf)):Te.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(gi(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;k3()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return Ze(Uu,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return gi(Uu,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){gi("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function tg(n){return aa(n,ap)}function b0(n){return aa(n,Vf)}function NM(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Mv{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=a}static As(e,t){let r=Sn(),a=Sn();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new Mv(e,t.fromCache,r,a)}}class jM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ZE{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return k3()?8:MS(sa())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const o={result:null};return this.ys(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,t,a,r).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new jM;return this.Ss(e,t,c).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,c,u.size)}))})).next((()=>o.result))}bs(e,t,r,a){return r.documentReadCount<this.fs?(gf()<=Ln.DEBUG&&Ze("QueryEngine","SDK will not create cache indexes for query:",pf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Te.resolve()):(gf()<=Ln.DEBUG&&Ze("QueryEngine","Query:",pf(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(gf()<=Ln.DEBUG&&Ze("QueryEngine","The SDK decides to create cache indexes for query:",pf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vo(t))):Te.resolve())}ys(e,t){if(d_(t))return Te.resolve(null);let r=Vo(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=h2(t,null,"F"),r=Vo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const c=Sn(...o);return this.ps.getDocuments(e,c).next((u=>this.indexManager.getMinOffset(e,r).next((h=>{const f=this.Ds(t,u);return this.Cs(t,f,c,h.readTime)?this.ys(e,h2(t,null,"F")):this.vs(e,f,t,h)}))))})))))}ws(e,t,r,a){return d_(t)||a.isEqual(Gt.min())?Te.resolve(null):this.ps.getDocuments(e,r).next((o=>{const c=this.Ds(t,o);return this.Cs(t,c,r,a)?Te.resolve(null):(gf()<=Ln.DEBUG&&Ze("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),pf(t)),this.vs(e,c,t,_7(a,Pg)).next((u=>u)))}))}Ds(e,t){let r=new hr(hE(e));return t.forEach(((a,o)=>{lp(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}Ss(e,t,r){return gf()<=Ln.DEBUG&&Ze("QueryEngine","Using full collection scan to execute query:",pf(t)),this.ps.getDocumentsMatchingQuery(e,t,mo.min(),r)}vs(e,t,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const Ov="LocalStore",_M=3e8;class SM{constructor(e,t,r,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new Hr(cn),this.xs=new ru((o=>sh(o)),ip),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JE(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function eA(n,e,t,r){return new SM(n,e,t,r)}async function tA(n,e){const t=un(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((o=>(a=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const c=[],u=[];let h=Sn();for(const f of a){c.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}for(const f of o){u.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(r,h).next((f=>({Ls:f,removedBatchIds:c,addedBatchIds:u})))}))}))}function EM(n,e){const t=un(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,h,f,g){const x=f.batch,v=x.keys();let b=Te.resolve();return v.forEach((T=>{b=b.next((()=>g.getEntry(h,T))).next((E=>{const j=f.docVersions.get(T);Rt(j!==null,48541),E.version.compareTo(j)<0&&(x.applyToRemoteDocument(E,f),E.isValidDocument()&&(E.setReadTime(f.commitVersion),g.addEntry(E)))}))})),b.next((()=>u.mutationQueue.removeMutationBatch(h,x)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let h=Sn();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function nA(n){const e=un(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function AM(n,e){const t=un(n),r=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const u=[];e.targetChanges.forEach(((g,x)=>{const v=a.get(x);if(!v)return;u.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,x).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,x))));let b=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(x)!==null?b=b.withResumeToken(Vs.EMPTY_BYTE_STRING,Gt.min()).withLastLimboFreeSnapshotVersion(Gt.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,r)),a=a.insert(x,b),(function(E,j,S){return E.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=_M?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0})(v,b,g)&&u.push(t.Pi.updateTargetData(o,b))}));let h=uo(),f=Sn();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),u.push(TM(o,c,e.documentUpdates).next((g=>{h=g.ks,f=g.qs}))),!r.isEqual(Gt.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((x=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));u.push(g)}return Te.waitFor(u).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,h,f))).next((()=>h))})).then((o=>(t.Ms=a,o)))}function TM(n,e,t){let r=Sn(),a=Sn();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let c=uo();return t.forEach(((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(a=a.add(u)),h.isNoDocument()&&h.version.isEqual(Gt.min())?(e.removeEntry(u,h.readTime),c=c.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),c=c.insert(u,h)):Ze(Ov,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)})),{ks:c,qs:a}}))}function CM(n,e){const t=un(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Hd),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function IM(n,e){const t=un(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.Pi.getTargetData(r,e).next((o=>o?(a=o,Te.resolve(a)):t.Pi.allocateTargetId(r).next((c=>(a=new Gc(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function v2(n,e,t){const r=un(n),a=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!gd(c))throw c;Ze(Ov,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function z_(n,e,t){const r=un(n);let a=Gt.min(),o=Sn();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(h,f,g){const x=un(h),v=x.xs.get(g);return v!==void 0?Te.resolve(x.Ms.get(v)):x.Pi.getTargetData(f,g)})(r,c,Vo(e)).next((u=>{if(u)return a=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,u.targetId).next((h=>{o=h}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?a:Gt.min(),t?o:Sn()))).next((u=>(kM(r,pD(e),u),{documents:u,Qs:o})))))}function kM(n,e,t){let r=n.Os.get(e)||Gt.min();t.forEach(((a,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(e,r)}class q_{constructor(){this.activeTargetIds=ND()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rA{constructor(){this.Mo=new q_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new q_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class RM{Oo(e){}shutdown(){}}const G_="ConnectivityMonitor";class H_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ze(G_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ze(G_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let v0=null;function w2(){return v0===null?v0=(function(){return 268435456+Math.round(2147483648*Math.random())})():v0++,"0x"+v0.toString(16)}const c1="RestConnection",PM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===px?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,t,r,a,o){const c=w2(),u=this.zo(e,t.toUriEncodedString());Ze(c1,`Sending RPC '${e}' ${c}:`,u,r);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,a,o);const{host:f}=new URL(u),g=oc(f);return this.Jo(e,u,h,r,g).then((x=>(Ze(c1,`Received RPC '${e}' ${c}: `,x),x)),(x=>{throw nh(c1,`RPC '${e}' ${c} failed with error: `,x,"url: ",u,"request:",r),x}))}Ho(e,t,r,a,o,c){return this.Go(e,t,r,a,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+im})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,o)=>e[o]=a)),r&&r.headers.forEach(((a,o)=>e[o]=a))}zo(e,t){const r=PM[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class DM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const $a="WebChannelConnection";class MM extends LM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,a,o){const c=w2();return new Promise(((u,h)=>{const f=new jS;f.setWithCredentials(!0),f.listenOnce(_S.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case F0.NO_ERROR:const x=f.getResponseJson();Ze($a,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(x)),u(x);break;case F0.TIMEOUT:Ze($a,`RPC '${e}' ${c} timed out`),h(new tt(Ue.DEADLINE_EXCEEDED,"Request time out"));break;case F0.HTTP_ERROR:const v=f.getStatus();if(Ze($a,`RPC '${e}' ${c} failed with status:`,v,"response text:",f.getResponseText()),v>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const T=b?.error;if(T&&T.status&&T.message){const E=(function(S){const D=S.toLowerCase().replace(/_/g,"-");return Object.values(Ue).indexOf(D)>=0?D:Ue.UNKNOWN})(T.status);h(new tt(E,T.message))}else h(new tt(Ue.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new tt(Ue.UNAVAILABLE,"Connection failed."));break;default:vt(9055,{l_:e,streamId:c,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Ze($a,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(a);Ze($a,`RPC '${e}' ${c} sending request:`,a),f.send(t,"POST",g,r,15)}))}T_(e,t,r){const a=w2(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=AS(),u=ES(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const g=o.join("");Ze($a,`Creating RPC '${e}' stream ${a}: ${g}`,h);const x=c.createWebChannel(g,h);this.I_(x);let v=!1,b=!1;const T=new DM({Yo:j=>{b?Ze($a,`Not sending because RPC '${e}' stream ${a} is closed:`,j):(v||(Ze($a,`Opening RPC '${e}' stream ${a} transport.`),x.open(),v=!0),Ze($a,`RPC '${e}' stream ${a} sending:`,j),x.send(j))},Zo:()=>x.close()}),E=(j,S,D)=>{j.listen(S,(O=>{try{D(O)}catch(B){setTimeout((()=>{throw B}),0)}}))};return E(x,og.EventType.OPEN,(()=>{b||(Ze($a,`RPC '${e}' stream ${a} transport opened.`),T.o_())})),E(x,og.EventType.CLOSE,(()=>{b||(b=!0,Ze($a,`RPC '${e}' stream ${a} transport closed`),T.a_(),this.E_(x))})),E(x,og.EventType.ERROR,(j=>{b||(b=!0,nh($a,`RPC '${e}' stream ${a} transport errored. Name:`,j.name,"Message:",j.message),T.a_(new tt(Ue.UNAVAILABLE,"The operation could not be completed")))})),E(x,og.EventType.MESSAGE,(j=>{if(!b){const S=j.data[0];Rt(!!S,16349);const D=S,O=D?.error||D[0]?.error;if(O){Ze($a,`RPC '${e}' stream ${a} received error:`,O);const B=O.status;let re=(function(M){const k=Ms[M];if(k!==void 0)return SE(k)})(B),ae=O.message;re===void 0&&(re=Ue.INTERNAL,ae="Unknown error status: "+B+" with message "+O.message),b=!0,T.a_(new tt(re,ae)),x.close()}else Ze($a,`RPC '${e}' stream ${a} received:`,S),T.u_(S)}})),E(u,SS.STAT_EVENT,(j=>{j.stat===Z1.PROXY?Ze($a,`RPC '${e}' stream ${a} detected buffering proxy`):j.stat===Z1.NOPROXY&&Ze($a,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{T.__()}),0),T}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function OM(){return typeof window<"u"?window:null}function K0(){return typeof document<"u"?document:null}function my(n){return new FD(n,!0)}class sA{constructor(e,t,r=1e3,a=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=a,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&Ze("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const $_="PersistentStream";class aA{constructor(e,t,r,a,o,c,u,h){this.Mi=e,this.S_=r,this.b_=a,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new sA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Ue.RESOURCE_EXHAUSTED?(gi(t.toString()),gi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new tt(Ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ze($_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ze($_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class FM extends aA{constructor(e,t,r,a,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=BD(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Gt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Gt.min():c.readTime?pi(c.readTime):Gt.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=g2(this.serializer),t.addTarget=(function(o,c){let u;const h=c.target;if(u=xx(h)?{documents:PE(o,h)}:{query:LE(o,h).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=TE(o,c.resumeToken);const f=f2(o,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(Gt.min())>0){u.readTime=Kf(o,c.snapshotVersion.toTimestamp());const f=f2(o,c.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const r=qD(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=g2(this.serializer),t.removeTarget=e,this.q_(t)}}class UM extends aA{constructor(e,t,r,a,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=zD(e.writeResults,e.commitTime),r=pi(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=g2(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>vx(this.serializer,r)))};this.q_(t)}}class VM{}class BM extends VM{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new tt(Ue.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,m2(t,r),a,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new tt(Ue.UNKNOWN,o.toString())}))}Ho(e,t,r,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Ho(e,m2(t,r),a,c,u,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new tt(Ue.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class zM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(gi(t),this.aa=!1):Ze("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const lh="RemoteStore";class qM{constructor(e,t,r,a,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{ph(this)&&(Ze(lh,"Restarting streams for network reachability change."),await(async function(h){const f=un(h);f.Ea.add(4),await dp(f),f.Ra.set("Unknown"),f.Ea.delete(4),await gy(f)})(this))}))})),this.Ra=new zM(r,a)}}async function gy(n){if(ph(n))for(const e of n.da)await e(!0)}async function dp(n){for(const e of n.da)await e(!1)}function iA(n,e){const t=un(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Bv(t)?Vv(t):cm(t).O_()&&Uv(t,e))}function Fv(n,e){const t=un(n),r=cm(t);t.Ia.delete(e),r.O_()&&oA(t,e),t.Ia.size===0&&(r.O_()?r.L_():ph(t)&&t.Ra.set("Unknown"))}function Uv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Gt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}cm(n).Y_(e)}function oA(n,e){n.Va.Ue(e),cm(n).Z_(e)}function Vv(n){n.Va=new LD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),cm(n).start(),n.Ra.ua()}function Bv(n){return ph(n)&&!cm(n).x_()&&n.Ia.size>0}function ph(n){return un(n).Ea.size===0}function lA(n){n.Va=void 0}async function GM(n){n.Ra.set("Online")}async function HM(n){n.Ia.forEach(((e,t)=>{Uv(n,e)}))}async function $M(n,e){lA(n),Bv(n)?(n.Ra.ha(e),Vv(n)):n.Ra.set("Unknown")}async function WM(n,e,t){if(n.Ra.set("Online"),e instanceof AE&&e.state===2&&e.cause)try{await(async function(a,o){const c=o.cause;for(const u of o.targetIds)a.Ia.has(u)&&(await a.remoteSyncer.rejectListen(u,c),a.Ia.delete(u),a.Va.removeTarget(u))})(n,e)}catch(r){Ze(lh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Sx(n,r)}else if(e instanceof $0?n.Va.Ze(e):e instanceof EE?n.Va.st(e):n.Va.tt(e),!t.isEqual(Gt.min()))try{const r=await nA(n.localStore);t.compareTo(r)>=0&&await(function(o,c){const u=o.Va.Tt(c);return u.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(h.resumeToken,c))}})),u.targetMismatches.forEach(((h,f)=>{const g=o.Ia.get(h);if(!g)return;o.Ia.set(h,g.withResumeToken(Vs.EMPTY_BYTE_STRING,g.snapshotVersion)),oA(o,h);const x=new Gc(g.target,h,f,g.sequenceNumber);Uv(o,x)})),o.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){Ze(lh,"Failed to raise snapshot:",r),await Sx(n,r)}}async function Sx(n,e,t){if(!gd(e))throw e;n.Ea.add(1),await dp(n),n.Ra.set("Offline"),t||(t=()=>nA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ze(lh,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await gy(n)}))}function cA(n,e){return e().catch((t=>Sx(n,t,e)))}async function hp(n){const e=un(n),t=ld(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Hd;for(;KM(e);)try{const a=await CM(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,YM(e,a)}catch(a){await Sx(e,a)}uA(e)&&dA(e)}function KM(n){return ph(n)&&n.Ta.length<10}function YM(n,e){n.Ta.push(e);const t=ld(n);t.O_()&&t.X_&&t.ea(e.mutations)}function uA(n){return ph(n)&&!ld(n).x_()&&n.Ta.length>0}function dA(n){ld(n).start()}async function XM(n){ld(n).ra()}async function QM(n){const e=ld(n);for(const t of n.Ta)e.ea(t.mutations)}async function JM(n,e,t){const r=n.Ta.shift(),a=Av.from(r,e,t);await cA(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await hp(n)}async function ZM(n,e){e&&ld(n).X_&&await(async function(r,a){if((function(c){return kD(c)&&c!==Ue.ABORTED})(a.code)){const o=r.Ta.shift();ld(r).B_(),await cA(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,a))),await hp(r)}})(n,e),uA(n)&&dA(n)}async function W_(n,e){const t=un(n);t.asyncQueue.verifyOperationInProgress(),Ze(lh,"RemoteStore received new credentials");const r=ph(t);t.Ea.add(3),await dp(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await gy(t)}async function e9(n,e){const t=un(n);e?(t.Ea.delete(2),await gy(t)):e||(t.Ea.add(2),await dp(t),t.Ra.set("Unknown"))}function cm(n){return n.ma||(n.ma=(function(t,r,a){const o=un(t);return o.sa(),new FM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(n.datastore,n.asyncQueue,{Xo:GM.bind(null,n),t_:HM.bind(null,n),r_:$M.bind(null,n),H_:WM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Bv(n)?Vv(n):n.Ra.set("Unknown")):(await n.ma.stop(),lA(n))}))),n.ma}function ld(n){return n.fa||(n.fa=(function(t,r,a){const o=un(t);return o.sa(),new UM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:XM.bind(null,n),r_:ZM.bind(null,n),ta:QM.bind(null,n),na:JM.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await hp(n)):(await n.fa.stop(),n.Ta.length>0&&(Ze(lh,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class zv{constructor(e,t,r,a,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=o,this.deferred=new tc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,o){const c=Date.now()+r,u=new zv(e,t,c,a,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new tt(Ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qv(n,e){if(gi("AsyncQueue",`${e}: ${n}`),gd(n))return new tt(Ue.UNAVAILABLE,`${e}: ${n}`);throw n}class Tf{static emptySet(e){return new Tf(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ot.comparator(t.key,r.key):(t,r)=>ot.comparator(t.key,r.key),this.keyedMap=lg(),this.sortedSet=new Hr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Tf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=r.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Tf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class K_{constructor(){this.ga=new Hr(ot.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):vt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Yf{constructor(e,t,r,a,o,c,u,h,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,a,o){const c=[];return t.forEach((u=>{c.push({type:0,doc:u})})),new Yf(e,t,Tf.emptySet(t),c,r,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class t9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class n9{constructor(){this.queries=Y_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=un(t),o=a.queries;a.queries=Y_(),o.forEach(((c,u)=>{for(const h of u.Sa)h.onError(r)}))})(this,new tt(Ue.ABORTED,"Firestore shutting down"))}}function Y_(){return new ru((n=>dE(n)),oy)}async function Gv(n,e){const t=un(n);let r=3;const a=e.query;let o=t.queries.get(a);o?!o.ba()&&e.Da()&&(r=2):(o=new t9,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(a,!0);break;case 1:o.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const u=qv(c,`Initialization of query '${pf(e.query)}' failed`);return void e.onError(u)}t.queries.set(a,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&$v(t)}async function Hv(n,e){const t=un(n),r=e.query;let a=3;const o=t.queries.get(r);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?a=e.Da()?0:1:!o.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function r9(n,e){const t=un(n);let r=!1;for(const a of e){const o=a.query,c=t.queries.get(o);if(c){for(const u of c.Sa)u.Fa(a)&&(r=!0);c.wa=a}}r&&$v(t)}function s9(n,e,t){const r=un(n),a=r.queries.get(e);if(a)for(const o of a.Sa)o.onError(t);r.queries.delete(e)}function $v(n){n.Ca.forEach((e=>{e.next()}))}var N2,X_;(X_=N2||(N2={})).Ma="default",X_.Cache="cache";class Wv{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Yf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Yf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==N2.Cache}}class hA{constructor(e){this.key=e}}class fA{constructor(e){this.key=e}}class a9{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Sn(),this.mutatedKeys=Sn(),this.eu=hE(e),this.tu=new Tf(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new K_,a=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=a,u=!1;const h=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,f=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((g,x)=>{const v=a.get(g),b=lp(this.query,x)?x:null,T=!!v&&this.mutatedKeys.has(v.key),E=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let j=!1;v&&b?v.data.isEqual(b.data)?T!==E&&(r.track({type:3,doc:b}),j=!0):this.su(v,b)||(r.track({type:2,doc:b}),j=!0,(h&&this.eu(b,h)>0||f&&this.eu(b,f)<0)&&(u=!0)):!v&&b?(r.track({type:0,doc:b}),j=!0):v&&!b&&(r.track({type:1,doc:v}),j=!0,(h||f)&&(u=!0)),j&&(b?(c=c.add(b),o=E?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{tu:c,iu:r,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,x)=>(function(b,T){const E=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt(20277,{Rt:j})}};return E(b)-E(T)})(g.type,x.type)||this.eu(g.doc,x.doc))),this.ou(r),a=a??!1;const u=t&&!a?this._u():[],h=this.Xa.size===0&&this.current&&!a?1:0,f=h!==this.Za;return this.Za=h,c.length!==0||f?{snapshot:new Yf(this.query,e.tu,o,c,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new K_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Sn(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new fA(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new hA(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Sn();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Yf.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Kv="SyncEngine";class i9{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class o9{constructor(e){this.key=e,this.hu=!1}}class l9{constructor(e,t,r,a,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ru((u=>dE(u)),oy),this.Iu=new Map,this.Eu=new Set,this.du=new Hr(ot.comparator),this.Au=new Map,this.Ru=new Pv,this.Vu={},this.mu=new Map,this.fu=oh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function c9(n,e,t=!0){const r=bA(n);let a;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.lu()):a=await mA(r,e,t,!0),a}async function u9(n,e){const t=bA(n);await mA(t,e,!0,!1)}async function mA(n,e,t,r){const a=await IM(n.localStore,Vo(e)),o=a.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let u;return r&&(u=await d9(n,e,o,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&iA(n.remoteStore,a),u}async function d9(n,e,t,r,a){n.pu=(x,v,b)=>(async function(E,j,S,D){let O=j.view.ru(S);O.Cs&&(O=await z_(E.localStore,j.query,!1).then((({documents:G})=>j.view.ru(G,O))));const B=D&&D.targetChanges.get(j.targetId),re=D&&D.targetMismatches.get(j.targetId)!=null,ae=j.view.applyChanges(O,E.isPrimaryClient,B,re);return J_(E,j.targetId,ae.au),ae.snapshot})(n,x,v,b);const o=await z_(n.localStore,e,!0),c=new a9(e,o.Qs),u=c.ru(o.documents),h=up.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),f=c.applyChanges(u,n.isPrimaryClient,h);J_(n,t,f.au);const g=new i9(e,t,c);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function h9(n,e,t){const r=un(n),a=r.Tu.get(e),o=r.Iu.get(a.targetId);if(o.length>1)return r.Iu.set(a.targetId,o.filter((c=>!oy(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await v2(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Fv(r.remoteStore,a.targetId),j2(r,a.targetId)})).catch(gh)):(j2(r,a.targetId),await v2(r.localStore,a.targetId,!0))}async function f9(n,e){const t=un(n),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Fv(t.remoteStore,r.targetId))}async function m9(n,e,t){const r=vA(n);try{const a=await(function(c,u){const h=un(c),f=gt.now(),g=u.reduce(((b,T)=>b.add(T.key)),Sn());let x,v;return h.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let T=uo(),E=Sn();return h.Ns.getEntries(b,g).next((j=>{T=j,T.forEach(((S,D)=>{D.isValidDocument()||(E=E.add(S))}))})).next((()=>h.localDocuments.getOverlayedDocuments(b,T))).next((j=>{x=j;const S=[];for(const D of u){const O=CD(D,x.get(D.key).overlayedDocument);O!=null&&S.push(new su(D.key,O,nE(O.value.mapValue),ra.exists(!0)))}return h.mutationQueue.addMutationBatch(b,f,S,u)})).next((j=>{v=j;const S=j.applyToLocalDocumentSet(x,E);return h.documentOverlayCache.saveOverlays(b,j.batchId,S)}))})).then((()=>({batchId:v.batchId,changes:mE(x)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,u,h){let f=c.Vu[c.currentUser.toKey()];f||(f=new Hr(cn)),f=f.insert(u,h),c.Vu[c.currentUser.toKey()]=f})(r,a.batchId,t),await fp(r,a.changes),await hp(r.remoteStore)}catch(a){const o=qv(a,"Failed to persist write");t.reject(o)}}async function gA(n,e){const t=un(n);try{const r=await AM(t.localStore,e);e.targetChanges.forEach(((a,o)=>{const c=t.Au.get(o);c&&(Rt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Rt(c.hu,14607):a.removedDocuments.size>0&&(Rt(c.hu,42227),c.hu=!1))})),await fp(t,r,e)}catch(r){await gh(r)}}function Q_(n,e,t){const r=un(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((o,c)=>{const u=c.view.va(e);u.snapshot&&a.push(u.snapshot)})),(function(c,u){const h=un(c);h.onlineState=u;let f=!1;h.queries.forEach(((g,x)=>{for(const v of x.Sa)v.va(u)&&(f=!0)})),f&&$v(h)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function g9(n,e,t){const r=un(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),o=a&&a.key;if(o){let c=new Hr(ot.comparator);c=c.insert(o,hs.newNoDocument(o,Gt.min()));const u=Sn().add(o),h=new uy(Gt.min(),new Map,new Hr(cn),c,u);await gA(r,h),r.du=r.du.remove(o),r.Au.delete(e),Yv(r)}else await v2(r.localStore,e,!1).then((()=>j2(r,e,t))).catch(gh)}async function p9(n,e){const t=un(n),r=e.batch.batchId;try{const a=await EM(t.localStore,e);xA(t,r,null),pA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await fp(t,a)}catch(a){await gh(a)}}async function x9(n,e,t){const r=un(n);try{const a=await(function(c,u){const h=un(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return h.mutationQueue.lookupMutationBatch(f,u).next((x=>(Rt(x!==null,37113),g=x.keys(),h.mutationQueue.removeMutationBatch(f,x)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,g,u))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>h.localDocuments.getDocuments(f,g)))}))})(r.localStore,e);xA(r,e,t),pA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await fp(r,a)}catch(a){await gh(a)}}function pA(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function xA(n,e,t){const r=un(n);let a=r.Vu[r.currentUser.toKey()];if(a){const o=a.get(e);o&&(t?o.reject(t):o.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function j2(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||yA(n,r)}))}function yA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Fv(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Yv(n))}function J_(n,e,t){for(const r of t)r instanceof hA?(n.Ru.addReference(r.key,e),y9(n,r)):r instanceof fA?(Ze(Kv,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||yA(n,r.key)):vt(19791,{wu:r})}function y9(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Ze(Kv,"New document in limbo: "+t),n.Eu.add(r),Yv(n))}function Yv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ot(tr.fromString(e)),r=n.fu.next();n.Au.set(r,new o9(t)),n.du=n.du.insert(t,r),iA(n.remoteStore,new Gc(Vo(op(t.path)),r,"TargetPurposeLimboResolution",Fo.ce))}}async function fp(n,e,t){const r=un(n),a=[],o=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,h)=>{c.push(r.pu(h,e,t).then((f=>{if((f||t)&&r.isPrimaryClient){const g=f?!f.fromCache:t?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){a.push(f);const g=Mv.As(h.targetId,f);o.push(g)}})))})),await Promise.all(c),r.Pu.H_(a),await(async function(h,f){const g=un(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>Te.forEach(f,(v=>Te.forEach(v.Es,(b=>g.persistence.referenceDelegate.addReference(x,v.targetId,b))).next((()=>Te.forEach(v.ds,(b=>g.persistence.referenceDelegate.removeReference(x,v.targetId,b)))))))))}catch(x){if(!gd(x))throw x;Ze(Ov,"Failed to update sequence numbers: "+x)}for(const x of f){const v=x.targetId;if(!x.fromCache){const b=g.Ms.get(v),T=b.snapshotVersion,E=b.withLastLimboFreeSnapshotVersion(T);g.Ms=g.Ms.insert(v,E)}}})(r.localStore,o))}async function b9(n,e){const t=un(n);if(!t.currentUser.isEqual(e)){Ze(Kv,"User change. New user:",e.toKey());const r=await tA(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((u=>{u.forEach((h=>{h.reject(new tt(Ue.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fp(t,r.Ls)}}function v9(n,e){const t=un(n),r=t.Au.get(e);if(r&&r.hu)return Sn().add(r.key);{let a=Sn();const o=t.Iu.get(e);if(!o)return a;for(const c of o){const u=t.Tu.get(c);a=a.unionWith(u.view.nu)}return a}}function bA(n){const e=un(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=gA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=v9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g9.bind(null,e),e.Pu.H_=r9.bind(null,e.eventManager),e.Pu.yu=s9.bind(null,e.eventManager),e}function vA(n){const e=un(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=p9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=x9.bind(null,e),e}class Hg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=my(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return eA(this.persistence,new ZE,e.initialUser,this.serializer)}Cu(e){return new Lv(fy.mi,this.serializer)}Du(e){return new rA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hg.provider={build:()=>new Hg};class w9 extends Hg{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Rt(this.persistence.referenceDelegate instanceof _x,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new KE(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Qa.withCacheSize(this.cacheSizeBytes):Qa.DEFAULT;return new Lv((r=>_x.mi(r,t)),this.serializer)}}class N9 extends Hg{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await vA(this.xu.syncEngine),await hp(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return eA(this.persistence,new ZE,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new KE(r,e.asyncQueue,t)}Mu(e,t){const r=new T7(t,this.persistence);return new A7(e.asyncQueue,r)}Cu(e){const t=NM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Qa.withCacheSize(this.cacheSizeBytes):Qa.DEFAULT;return new Dv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,OM(),K0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new rA}}class Ex{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Q_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=b9.bind(null,this.syncEngine),await e9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new n9})()}createDatastore(e){const t=my(e.databaseInfo.databaseId),r=(function(o){return new MM(o)})(e.databaseInfo);return(function(o,c,u,h){return new BM(o,c,u,h)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,o,c,u){return new qM(r,a,o,c,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>Q_(this.syncEngine,t,0)),(function(){return H_.v()?new H_:new RM})())}createSyncEngine(e,t){return(function(a,o,c,u,h,f,g){const x=new l9(a,o,c,u,h,f);return g&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=un(t);Ze(lh,"RemoteStore shutting down."),r.Ea.add(5),await dp(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ex.provider={build:()=>new Ex};class Xv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):gi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const cd="FirestoreClient";class j9{constructor(e,t,r,a,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=Ma.UNAUTHENTICATED,this.clientId=mv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async c=>{Ze(cd,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(Ze(cd,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=qv(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function u1(n,e){n.asyncQueue.verifyOperationInProgress(),Ze(cd,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async a=>{r.isEqual(a)||(await tA(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Z_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await _9(n);Ze(cd,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>W_(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,a)=>W_(e.remoteStore,a))),n._onlineComponents=e}async function _9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ze(cd,"Using user provided OfflineComponentProvider");try{await u1(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Ue.FAILED_PRECONDITION||a.code===Ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;nh("Error using user provided cache. Falling back to memory cache: "+t),await u1(n,new Hg)}}else Ze(cd,"Using default OfflineComponentProvider"),await u1(n,new w9(void 0));return n._offlineComponents}async function wA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ze(cd,"Using user provided OnlineComponentProvider"),await Z_(n,n._uninitializedComponentsProvider._online)):(Ze(cd,"Using default OnlineComponentProvider"),await Z_(n,new Ex))),n._onlineComponents}function S9(n){return wA(n).then((e=>e.syncEngine))}async function Ax(n){const e=await wA(n),t=e.eventManager;return t.onListen=c9.bind(null,e.syncEngine),t.onUnlisten=h9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=u9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=f9.bind(null,e.syncEngine),t}function E9(n,e,t={}){const r=new tc;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,h,f){const g=new Xv({next:v=>{g.Nu(),c.enqueueAndForget((()=>Hv(o,x)));const b=v.docs.has(u);!b&&v.fromCache?f.reject(new tt(Ue.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&v.fromCache&&h&&h.source==="server"?f.reject(new tt(Ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),x=new Wv(op(u.path),g,{includeMetadataChanges:!0,qa:!0});return Gv(o,x)})(await Ax(n),n.asyncQueue,e,t,r))),r.promise}function NA(n,e,t={}){const r=new tc;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,h,f){const g=new Xv({next:v=>{g.Nu(),c.enqueueAndForget((()=>Hv(o,x))),v.fromCache&&h.source==="server"?f.reject(new tt(Ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),x=new Wv(u,g,{includeMetadataChanges:!0,qa:!0});return Gv(o,x)})(await Ax(n),n.asyncQueue,e,t,r))),r.promise}function jA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const e4=new Map;const _A="firestore.googleapis.com",t4=!0;class n4{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new tt(Ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_A,this.ssl=t4}else this.host=e.host,this.ssl=e.ssl??t4;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=GE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aM)throw new tt(Ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}j7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new tt(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new tt(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new tt(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class py{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n4({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new tt(Ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new tt(Ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n4(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new f7;switch(r.type){case"firstParty":return new x7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new tt(Ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=e4.get(t);r&&(Ze("ComponentProvider","Removing Datastore"),e4.delete(t),r.terminate())})(this),Promise.resolve()}}function A9(n,e,t,r={}){n=wa(n,py);const a=oc(e),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;a&&(Wx(`https://${u}`),Kx("Firestore",!0)),o.host!==_A&&o.host!==u&&nh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:a,emulatorOptions:r};if(!Jd(h,c)&&(n._setSettings(h),r.mockUserToken)){let f,g;if(typeof r.mockUserToken=="string")f=r.mockUserToken,g=Ma.MOCK_USER;else{f=C3(r.mockUserToken,n._app?.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new tt(Ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ma(x)}n._authCredentials=new m7(new CS(f,g))}}class au{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new au(this.firestore,e,this._query)}}class fs{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fs(this.firestore,e,this._key)}toJSON(){return{type:fs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(sp(t,fs._jsonSchema))return new fs(e,r||null,new ot(tr.fromString(t.referencePath)))}}fs._jsonSchemaVersion="firestore/documentReference/1.0",fs._jsonSchema={type:Fs("string",fs._jsonSchemaVersion),referencePath:Fs("string")};class nd extends au{constructor(e,t,r){super(e,t,op(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fs(this.firestore,null,new ot(e))}withConverter(e){return new nd(this.firestore,e,this._path)}}function Ht(n,e,...t){if(n=sr(n),kS("collection","path",e),n instanceof py){const r=tr.fromString(e,...t);return $j(r),new nd(n,null,r)}{if(!(n instanceof fs||n instanceof nd))throw new tt(Ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tr.fromString(e,...t));return $j(r),new nd(n.firestore,null,r)}}function St(n,e,...t){if(n=sr(n),arguments.length===1&&(e=mv.newId()),kS("doc","path",e),n instanceof py){const r=tr.fromString(e,...t);return Hj(r),new fs(n,null,new ot(r))}{if(!(n instanceof fs||n instanceof nd))throw new tt(Ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tr.fromString(e,...t));return Hj(r),new fs(n.firestore,n instanceof nd?n.converter:null,new ot(r))}}const r4="AsyncQueue";class s4{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new sA(this,"async_queue_retry"),this._c=()=>{const r=K0();r&&Ze(r4,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=K0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=K0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new tc;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!gd(e))throw e;Ze(r4,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,gi("INTERNAL UNHANDLED ERROR: ",a4(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=zv.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(a),a}uc(){this.nc&&vt(47125,{Pc:a4(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function a4(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function i4(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const o of r)if(o in a&&typeof a[o]=="function")return!0;return!1})(n,["next","error","complete"])}class qo extends py{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new s4,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new s4(e),this._firestoreClient=void 0,await e}}}function T9(n,e){const t=typeof n=="object"?n:Yx(),r=typeof n=="string"?n:px,a=Zg(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const o=nv("firestore");o&&A9(a,...o)}return a}function um(n){if(n._terminated)throw new tt(Ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||SA(n),n._firestoreClient}function SA(n){const e=n._freezeSettings(),t=(function(a,o,c,u){return new rD(a,o,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,jA(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new j9(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const o=a?._online.build();return{_offline:a?._offline.build(o),_online:o}})(n._componentsProvider))}function C9(n,e){nh("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return I9(n,Ex.provider,{build:r=>new N9(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function I9(n,e,t){if((n=wa(n,qo))._firestoreClient||n._terminated)throw new tt(Ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new tt(Ue.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},SA(n)}class Oo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oo(Vs.fromBase64String(e))}catch(t){throw new tt(Ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Oo(Vs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Oo._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sp(e,Oo._jsonSchema))return Oo.fromBase64String(e.bytes)}}Oo._jsonSchemaVersion="firestore/bytes/1.0",Oo._jsonSchema={type:Fs("string",Oo._jsonSchemaVersion),bytes:Fs("string")};class mp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new tt(Ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xy{constructor(e){this._methodName=e}}class nc{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new tt(Ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new tt(Ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return cn(this._lat,e._lat)||cn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:nc._jsonSchemaVersion}}static fromJSON(e){if(sp(e,nc._jsonSchema))return new nc(e.latitude,e.longitude)}}nc._jsonSchemaVersion="firestore/geoPoint/1.0",nc._jsonSchema={type:Fs("string",nc._jsonSchemaVersion),latitude:Fs("number"),longitude:Fs("number")};class rc{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==a[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:rc._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sp(e,rc._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new rc(e.vectorValues);throw new tt(Ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}rc._jsonSchemaVersion="firestore/vectorValue/1.0",rc._jsonSchema={type:Fs("string",rc._jsonSchemaVersion),vectorValues:Fs("object")};const k9=/^__.*__$/;class R9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new su(e,this.data,this.fieldMask,t,this.fieldTransforms):new lm(e,this.data,t,this.fieldTransforms)}}class EA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new su(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function AA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt(40011,{Ac:n})}}class Qv{constructor(e,t,r,a,o,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Qv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Tx(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(AA(this.Ac)&&k9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class P9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||my(e)}Cc(e,t,r,a=!1){return new Qv({Ac:e,methodName:t,Dc:r,path:Jr.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gp(n){const e=n._freezeSettings(),t=my(n._databaseId);return new P9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Jv(n,e,t,r,a,o={}){const c=n.Cc(o.merge||o.mergeFields?2:0,e,t,a);ew("Data must be an object, but it was:",c,r);const u=IA(r,c);let h,f;if(o.merge)h=new Bi(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const x of o.mergeFields){const v=_2(e,x,t);if(!c.contains(v))throw new tt(Ue.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);RA(g,v)||g.push(v)}h=new Bi(g),f=c.fieldTransforms.filter((x=>h.covers(x.field)))}else h=null,f=c.fieldTransforms;return new R9(new Ja(u),h,f)}class yy extends xy{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yy}}class Zv extends xy{_toFieldTransform(e){return new wE(e.path,new Hf)}isEqual(e){return e instanceof Zv}}function TA(n,e,t,r){const a=n.Cc(1,e,t);ew("Data must be an object, but it was:",a,r);const o=[],c=Ja.empty();pd(r,((h,f)=>{const g=tw(e,h,t);f=sr(f);const x=a.yc(g);if(f instanceof yy)o.push(g);else{const v=pp(f,x);v!=null&&(o.push(g),c.set(g,v))}}));const u=new Bi(o);return new EA(c,u,a.fieldTransforms)}function CA(n,e,t,r,a,o){const c=n.Cc(1,e,t),u=[_2(e,r,t)],h=[a];if(o.length%2!=0)throw new tt(Ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(_2(e,o[v])),h.push(o[v+1]);const f=[],g=Ja.empty();for(let v=u.length-1;v>=0;--v)if(!RA(f,u[v])){const b=u[v];let T=h[v];T=sr(T);const E=c.yc(b);if(T instanceof yy)f.push(b);else{const j=pp(T,E);j!=null&&(f.push(b),g.set(b,j))}}const x=new Bi(f);return new EA(g,x,c.fieldTransforms)}function L9(n,e,t,r=!1){return pp(t,n.Cc(r?4:3,e))}function pp(n,e){if(kA(n=sr(n)))return ew("Unsupported field value:",e,n),IA(n,e);if(n instanceof xy)return(function(r,a){if(!AA(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(a);o&&a.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const o=[];let c=0;for(const u of r){let h=pp(u,a.wc(c));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),c++}return{arrayValue:{values:o}}})(n,e)}return(function(r,a){if((r=sr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jD(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=gt.fromDate(r);return{timestampValue:Kf(a.serializer,o)}}if(r instanceof gt){const o=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kf(a.serializer,o)}}if(r instanceof nc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Oo)return{bytesValue:TE(a.serializer,r._byteString)};if(r instanceof fs){const o=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Iv(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof rc)return(function(c,u){return{mapValue:{fields:{[Nv]:{stringValue:jv},[Bf]:{arrayValue:{values:c.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return Sv(u.serializer,f)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${Zx(r)}`)})(n,e)}function IA(n,e){const t={};return WS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pd(n,((r,a)=>{const o=pp(a,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function kA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof gt||n instanceof nc||n instanceof Oo||n instanceof fs||n instanceof xy||n instanceof rc)}function ew(n,e,t){if(!kA(t)||!RS(t)){const r=Zx(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function _2(n,e,t){if((e=sr(e))instanceof mp)return e._internalPath;if(typeof e=="string")return tw(n,e);throw Tx("Field path arguments must be of type string or ",n,!1,void 0,t)}const D9=new RegExp("[~\\*/\\[\\]]");function tw(n,e,t){if(e.search(D9)>=0)throw Tx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new mp(...e.split("."))._internalPath}catch{throw Tx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Tx(n,e,t,r,a){const o=r&&!r.isEmpty(),c=a!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||c)&&(h+=" (found",o&&(h+=` in field ${r}`),c&&(h+=` in document ${a}`),h+=")"),new tt(Ue.INVALID_ARGUMENT,u+n+h)}function RA(n,e){return n.some((t=>t.isEqual(e)))}class PA{constructor(e,t,r,a,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new fs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new M9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(by("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class M9 extends PA{data(){return super.data()}}function by(n,e){return typeof e=="string"?tw(n,e):e instanceof mp?e._internalPath:e._delegate._internalPath}function LA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new tt(Ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nw{}class DA extends nw{}function Es(n,e,...t){let r=[];e instanceof nw&&r.push(e),r=r.concat(t),(function(o){const c=o.filter((h=>h instanceof rw)).length,u=o.filter((h=>h instanceof vy)).length;if(c>1||c>0&&u>0)throw new tt(Ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)n=a._apply(n);return n}class vy extends DA{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new vy(e,t,r)}_apply(e){const t=this._parse(e);return MA(e._query,t),new au(e.firestore,e.converter,d2(e._query,t))}_parse(e){const t=gp(e.firestore);return(function(o,c,u,h,f,g,x){let v;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new tt(Ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){l4(x,g);const T=[];for(const E of x)T.push(o4(h,o,E));v={arrayValue:{values:T}}}else v=o4(h,o,x)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||l4(x,g),v=L9(u,c,x,g==="in"||g==="not-in");return Dn.create(f,g,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ei(n,e,t){const r=e,a=by("where",n);return vy._create(a,r,t)}class rw extends nw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new rw(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:dr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,o){let c=a;const u=o.getFlattenedFilters();for(const h of u)MA(c,h),c=d2(c,h)})(e._query,t),new au(e.firestore,e.converter,d2(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sw extends DA{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new sw(e,t)}_apply(e){const t=(function(a,o,c){if(a.startAt!==null)throw new tt(Ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new tt(Ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qg(o,c)})(e._query,this._field,this._direction);return new au(e.firestore,e.converter,(function(a,o){const c=a.explicitOrderBy.concat([o]);return new om(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function lc(n,e="asc"){const t=e,r=by("orderBy",n);return sw._create(r,t)}function o4(n,e,t){if(typeof(t=sr(t))=="string"){if(t==="")throw new tt(Ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uE(e)&&t.indexOf("/")!==-1)throw new tt(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tr.fromString(t));if(!ot.isDocumentKey(r))throw new tt(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bg(n,new ot(r))}if(t instanceof fs)return Bg(n,t._key);throw new tt(Ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zx(t)}.`)}function l4(n,e){if(!Array.isArray(n)||n.length===0)throw new tt(Ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MA(n,e){const t=(function(a,o){for(const c of a)for(const u of c.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new tt(Ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new tt(Ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class O9{convertValue(e,t="none"){switch(id(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw vt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return pd(e,((a,o)=>{r[a]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[Bf].arrayValue?.values?.map((r=>Gr(r.doubleValue)));return new rc(t)}convertGeoPoint(e){return new nc(Gr(e.latitude),Gr(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ay(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ug(e));default:return null}}convertTimestamp(e){const t=Qc(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tr.fromString(e);Rt(FE(r),9688,{name:e});const a=new rh(r.get(1),r.get(3)),o=new ot(r.popFirst(5));return a.isEqual(t)||gi(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function aw(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class dg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kd extends PA{constructor(e,t,r,a,o,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Y0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(by("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new tt(Ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Kd._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Kd._jsonSchemaVersion="firestore/documentSnapshot/1.0",Kd._jsonSchema={type:Fs("string",Kd._jsonSchemaVersion),bundleSource:Fs("string","DocumentSnapshot"),bundleName:Fs("string"),bundle:Fs("string")};class Y0 extends Kd{data(e={}){return super.data(e)}}class rd{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new dg(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Y0(this._firestore,this._userDataWriter,r.key,r,new dg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new tt(Ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,o){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((u=>{const h=new Y0(a._firestore,a._userDataWriter,u.doc.key,u.doc,new dg(a._snapshot.mutatedKeys.has(u.doc.key),a._snapshot.fromCache),a.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const h=new Y0(a._firestore,a._userDataWriter,u.doc.key,u.doc,new dg(a._snapshot.mutatedKeys.has(u.doc.key),a._snapshot.fromCache),a.query.converter);let f=-1,g=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:F9(u.type),doc:h,oldIndex:f,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new tt(Ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=rd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),a.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function F9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt(61501,{type:n})}}function zs(n){n=wa(n,fs);const e=wa(n.firestore,qo);return E9(um(e),n._key).then((t=>OA(e,n,t)))}rd._jsonSchemaVersion="firestore/querySnapshot/1.0",rd._jsonSchema={type:Fs("string",rd._jsonSchemaVersion),bundleSource:Fs("string","QuerySnapshot"),bundleName:Fs("string"),bundle:Fs("string")};class wy extends O9{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fs(this.firestore,null,t)}}function Nr(n){n=wa(n,au);const e=wa(n.firestore,qo),t=um(e),r=new wy(e);return LA(n._query),NA(t,n._query).then((a=>new rd(e,r,n,a)))}function U9(n){n=wa(n,au);const e=wa(n.firestore,qo),t=um(e),r=new wy(e);return NA(t,n._query,{source:"server"}).then((a=>new rd(e,r,n,a)))}function ch(n,e,t){n=wa(n,fs);const r=wa(n.firestore,qo),a=aw(n.converter,e,t);return xp(r,[Jv(gp(r),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,ra.none())])}function po(n,e,t,...r){n=wa(n,fs);const a=wa(n.firestore,qo),o=gp(a);let c;return c=typeof(e=sr(e))=="string"||e instanceof mp?CA(o,"updateDoc",n._key,e,t,r):TA(o,"updateDoc",n._key,e),xp(a,[c.toMutation(n._key,ra.exists(!0))])}function Bo(n){return xp(wa(n.firestore,qo),[new cp(n._key,ra.none())])}function vs(n,e){const t=wa(n.firestore,qo),r=St(n),a=aw(n.converter,e);return xp(t,[Jv(gp(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,ra.exists(!1))]).then((()=>r))}function V9(n,...e){n=sr(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||i4(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(i4(e[r])){const h=e[r];e[r]=h.next?.bind(h),e[r+1]=h.error?.bind(h),e[r+2]=h.complete?.bind(h)}let o,c,u;if(n instanceof fs)c=wa(n.firestore,qo),u=op(n._key.path),o={next:h=>{e[r]&&e[r](OA(c,n,h))},error:e[r+1],complete:e[r+2]};else{const h=wa(n,au);c=wa(h.firestore,qo),u=h._query;const f=new wy(c);o={next:g=>{e[r]&&e[r](new rd(c,f,h,g))},error:e[r+1],complete:e[r+2]},LA(n._query)}return(function(f,g,x,v){const b=new Xv(v),T=new Wv(g,b,x);return f.asyncQueue.enqueueAndForget((async()=>Gv(await Ax(f),T))),()=>{b.Nu(),f.asyncQueue.enqueueAndForget((async()=>Hv(await Ax(f),T)))}})(um(c),u,a,o)}function xp(n,e){return(function(r,a){const o=new tc;return r.asyncQueue.enqueueAndForget((async()=>m9(await S9(r),a,o))),o.promise})(um(n),e)}function OA(n,e,t){const r=t.docs.get(e._key),a=new wy(n);return new Kd(n,a,e._key,r,new dg(t.hasPendingWrites,t.fromCache),e.converter)}class B9{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=gp(e)}set(e,t,r){this._verifyNotCommitted();const a=d1(e,this._firestore),o=aw(a.converter,t,r),c=Jv(this._dataReader,"WriteBatch.set",a._key,o,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,ra.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const o=d1(e,this._firestore);let c;return c=typeof(t=sr(t))=="string"||t instanceof mp?CA(this._dataReader,"WriteBatch.update",o._key,t,r,a):TA(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(c.toMutation(o._key,ra.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=d1(e,this._firestore);return this._mutations=this._mutations.concat(new cp(t._key,ra.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new tt(Ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function d1(n,e){if((n=sr(n)).firestore!==e)throw new tt(Ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function Xt(){return new Zv("serverTimestamp")}function Ny(n){return um(n=wa(n,qo)),new B9(n,(e=>xp(n,e)))}(function(e,t=!0){(function(a){im=a})(mh),ad(new Kc("firestore",((r,{instanceIdentifier:a,options:o})=>{const c=r.getProvider("app").getImmediate(),u=new qo(new g7(r.getProvider("auth-internal")),new y7(c,r.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new tt(Ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rh(f.options.projectId,g)})(c,a),c);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Uo(Bj,zj,e),Uo(Bj,zj,"esm2020")})();var z9="firebase",q9="12.6.0";Uo(z9,q9,"app");const FA="firebasestorage.googleapis.com",UA="storageBucket",G9=120*1e3,H9=600*1e3,$9=1e3;class ts extends vl{constructor(e,t,r=0){super(h1(e),`Firebase Storage: ${t} (${h1(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ts.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return h1(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Mr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Mr||(Mr={}));function h1(n){return"storage/"+n}function iw(){const n="An unknown error occurred, please check the error payload for server response.";return new ts(Mr.UNKNOWN,n)}function W9(n){return new ts(Mr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function K9(n){return new ts(Mr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Y9(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ts(Mr.UNAUTHENTICATED,n)}function X9(){return new ts(Mr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Q9(n){return new ts(Mr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function VA(){return new ts(Mr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function BA(){return new ts(Mr.CANCELED,"User canceled the upload/download.")}function J9(n){return new ts(Mr.INVALID_URL,"Invalid URL '"+n+"'.")}function Z9(n){return new ts(Mr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function eO(){return new ts(Mr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+UA+"' property when initializing the app?")}function zA(){return new ts(Mr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function tO(){return new ts(Mr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function nO(){return new ts(Mr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function rO(n){return new ts(Mr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function S2(n){return new ts(Mr.INVALID_ARGUMENT,n)}function qA(){return new ts(Mr.APP_DELETED,"The Firebase app was deleted.")}function sO(n){return new ts(Mr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ng(n,e){return new ts(Mr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function ng(n){throw new ts(Mr.INTERNAL_ERROR,"Internal error: "+n)}class ho{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ho.makeFromUrl(e,t)}catch{return new ho(e,"")}if(r.path==="")return r;throw Z9(e)}static makeFromUrl(e,t){let r=null;const a="([A-Za-z0-9.\\-_]+)";function o(B){B.path.charAt(B.path.length-1)==="/"&&(B.path_=B.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+a+c,"i"),h={bucket:1,path:3};function f(B){B.path_=decodeURIComponent(B.path)}const g="v[A-Za-z0-9_]+",x=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",b=new RegExp(`^https?://${x}/${g}/b/${a}/o${v}`,"i"),T={bucket:1,path:3},E=t===FA?"(?:storage.googleapis.com|storage.cloud.google.com)":t,j="([^?#]*)",S=new RegExp(`^https?://${E}/${a}/${j}`,"i"),O=[{regex:u,indices:h,postModify:o},{regex:b,indices:T,postModify:f},{regex:S,indices:{bucket:1,path:2},postModify:f}];for(let B=0;B<O.length;B++){const re=O[B],ae=re.regex.exec(e);if(ae){const G=ae[re.indices.bucket];let M=ae[re.indices.path];M||(M=""),r=new ho(G,M),re.postModify(r);break}}if(r==null)throw J9(e);return r}}class aO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function iO(n,e,t){let r=1,a=null,o=null,c=!1,u=0;function h(){return u===2}let f=!1;function g(...j){f||(f=!0,e.apply(null,j))}function x(j){a=setTimeout(()=>{a=null,n(b,h())},j)}function v(){o&&clearTimeout(o)}function b(j,...S){if(f){v();return}if(j){v(),g.call(null,j,...S);return}if(h()||c){v(),g.call(null,j,...S);return}r<64&&(r*=2);let O;u===1?(u=2,O=0):O=(r+Math.random())*1e3,x(O)}let T=!1;function E(j){T||(T=!0,v(),!f&&(a!==null?(j||(u=2),clearTimeout(a),x(0)):j||(u=1)))}return x(0),o=setTimeout(()=>{c=!0,E(!0)},t),E}function oO(n){n(!1)}function lO(n){return n!==void 0}function cO(n){return typeof n=="function"}function uO(n){return typeof n=="object"&&!Array.isArray(n)}function jy(n){return typeof n=="string"||n instanceof String}function c4(n){return ow()&&n instanceof Blob}function ow(){return typeof Blob<"u"}function u4(n,e,t,r){if(r<e)throw S2(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw S2(`Invalid value for '${n}'. Expected ${t} or less.`)}function dm(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function GA(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const a=e(r)+"="+e(n[r]);t=t+a+"&"}return t=t.slice(0,-1),t}var Yd;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Yd||(Yd={}));function HA(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||a||o}class dO{constructor(e,t,r,a,o,c,u,h,f,g,x,v=!0,b=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=a,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=x,this.retry=v,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,E)=>{this.resolve_=T,this.reject_=E,this.start_()})}start_(){const e=(r,a)=>{if(a){r(!1,new w0(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const u=o.getErrorCode()===Yd.NO_ERROR,h=o.getStatus();if(!u||HA(h,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===Yd.ABORT;r(!1,new w0(!1,null,g));return}const f=this.successCodes_.indexOf(h)!==-1;r(!0,new w0(f,o))})},t=(r,a)=>{const o=this.resolve_,c=this.reject_,u=a.connection;if(a.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());lO(h)?o(h):o()}catch(h){c(h)}else if(u!==null){const h=iw();h.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,h)):c(h)}else if(a.canceled){const h=this.appDelete_?qA():BA();c(h)}else{const h=VA();c(h)}};this.canceled_?t(!1,new w0(!1,null,!0)):this.backoffId_=iO(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&oO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class w0{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function hO(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function fO(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function mO(n,e){e&&(n["X-Firebase-GMPID"]=e)}function gO(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function pO(n,e,t,r,a,o,c=!0,u=!1){const h=GA(n.urlParams),f=n.url+h,g=Object.assign({},n.headers);return mO(g,e),hO(g,t),fO(g,o),gO(g,r),new dO(f,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,c,u)}function xO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function yO(...n){const e=xO();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(ow())return new Blob(n);throw new ts(Mr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function bO(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function vO(n){if(typeof atob>"u")throw rO("base-64");return atob(n)}const Xl={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class f1{constructor(e,t){this.data=e,this.contentType=t||null}}function wO(n,e){switch(n){case Xl.RAW:return new f1($A(e));case Xl.BASE64:case Xl.BASE64URL:return new f1(WA(n,e));case Xl.DATA_URL:return new f1(jO(e),_O(e))}throw iw()}function $A(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,c=n.charCodeAt(++t);r=65536|(o&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function NO(n){let e;try{e=decodeURIComponent(n)}catch{throw Ng(Xl.DATA_URL,"Malformed data URL.")}return $A(e)}function WA(n,e){switch(n){case Xl.BASE64:{const a=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(a||o)throw Ng(n,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Xl.BASE64URL:{const a=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(a||o)throw Ng(n,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=vO(e)}catch(a){throw a.message.includes("polyfill")?a:Ng(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}class KA{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Ng(Xl.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=SO(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function jO(n){const e=new KA(n);return e.base64?WA(Xl.BASE64,e.rest):NO(e.rest)}function _O(n){return new KA(n).contentType}function SO(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}class Bc{constructor(e,t){let r=0,a="";c4(e)?(this.data_=e,r=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(c4(this.data_)){const r=this.data_,a=bO(r,e,t);return a===null?null:new Bc(a)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Bc(r,!0)}}static getBlob(...e){if(ow()){const t=e.map(r=>r instanceof Bc?r.data_:r);return new Bc(yO.apply(null,t))}else{const t=e.map(c=>jy(c)?wO(Xl.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const a=new Uint8Array(r);let o=0;return t.forEach(c=>{for(let u=0;u<c.length;u++)a[o++]=c[u]}),new Bc(a,!0)}}uploadData(){return this.data_}}function YA(n){let e;try{e=JSON.parse(n)}catch{return null}return uO(e)?e:null}function EO(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function AO(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function XA(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function TO(n,e){return e}class fi{constructor(e,t,r,a){this.server=e,this.local=t||e,this.writable=!!r,this.xform=a||TO}}let N0=null;function CO(n){return!jy(n)||n.length<2?n:XA(n)}function lw(){if(N0)return N0;const n=[];n.push(new fi("bucket")),n.push(new fi("generation")),n.push(new fi("metageneration")),n.push(new fi("name","fullPath",!0));function e(o,c){return CO(c)}const t=new fi("name");t.xform=e,n.push(t);function r(o,c){return c!==void 0?Number(c):c}const a=new fi("size");return a.xform=r,n.push(a),n.push(new fi("timeCreated")),n.push(new fi("updated")),n.push(new fi("md5Hash",null,!0)),n.push(new fi("cacheControl",null,!0)),n.push(new fi("contentDisposition",null,!0)),n.push(new fi("contentEncoding",null,!0)),n.push(new fi("contentLanguage",null,!0)),n.push(new fi("contentType",null,!0)),n.push(new fi("metadata","customMetadata",!0)),N0=n,N0}function IO(n,e){function t(){const r=n.bucket,a=n.fullPath,o=new ho(r,a);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function kO(n,e,t){const r={};r.type="file";const a=t.length;for(let o=0;o<a;o++){const c=t[o];r[c.local]=c.xform(r,e[c.server])}return IO(r,n),r}function QA(n,e,t){const r=YA(e);return r===null?null:kO(n,r,t)}function RO(n,e,t,r){const a=YA(e);if(a===null||!jy(a.downloadTokens))return null;const o=a.downloadTokens;if(o.length===0)return null;const c=encodeURIComponent;return o.split(",").map(f=>{const g=n.bucket,x=n.fullPath,v="/b/"+c(g)+"/o/"+c(x),b=dm(v,t,r),T=GA({alt:"media",token:f});return b+T})[0]}function JA(n,e){const t={},r=e.length;for(let a=0;a<r;a++){const o=e[a];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class xh{constructor(e,t,r,a){this.url=e,this.method=t,this.handler=r,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Wc(n){if(!n)throw iw()}function cw(n,e){function t(r,a){const o=QA(n,a,e);return Wc(o!==null),o}return t}function PO(n,e){function t(r,a){const o=QA(n,a,e);return Wc(o!==null),RO(o,a,n.host,n._protocol)}return t}function yp(n){function e(t,r){let a;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?a=X9():a=Y9():t.getStatus()===402?a=K9(n.bucket):t.getStatus()===403?a=Q9(n.path):a=r,a.status=t.getStatus(),a.serverResponse=r.serverResponse,a}return e}function uw(n){const e=yp(n);function t(r,a){let o=e(r,a);return r.getStatus()===404&&(o=W9(n.path)),o.serverResponse=a.serverResponse,o}return t}function LO(n,e,t){const r=e.fullServerUrl(),a=dm(r,n.host,n._protocol),o="GET",c=n.maxOperationRetryTime,u=new xh(a,o,cw(n,t),c);return u.errorHandler=uw(e),u}function DO(n,e,t){const r=e.fullServerUrl(),a=dm(r,n.host,n._protocol),o="GET",c=n.maxOperationRetryTime,u=new xh(a,o,PO(n,t),c);return u.errorHandler=uw(e),u}function MO(n,e){const t=e.fullServerUrl(),r=dm(t,n.host,n._protocol),a="DELETE",o=n.maxOperationRetryTime;function c(h,f){}const u=new xh(r,a,c,o);return u.successCodes=[200,204],u.errorHandler=uw(e),u}function OO(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function ZA(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=OO(null,e)),r}function eT(n,e,t,r,a){const o=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function u(){let O="";for(let B=0;B<2;B++)O=O+Math.random().toString().slice(2);return O}const h=u();c["Content-Type"]="multipart/related; boundary="+h;const f=ZA(e,r,a),g=JA(f,t),x="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+h+`\r
Content-Type: `+f.contentType+`\r
\r
`,v=`\r
--`+h+"--",b=Bc.getBlob(x,r,v);if(b===null)throw zA();const T={name:f.fullPath},E=dm(o,n.host,n._protocol),j="POST",S=n.maxUploadRetryTime,D=new xh(E,j,cw(n,t),S);return D.urlParams=T,D.headers=c,D.body=b.uploadData(),D.errorHandler=yp(e),D}class Cx{constructor(e,t,r,a){this.current=e,this.total=t,this.finalized=!!r,this.metadata=a||null}}function dw(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Wc(!1)}return Wc(!!t&&(e||["active"]).indexOf(t)!==-1),t}function FO(n,e,t,r,a){const o=e.bucketOnlyServerUrl(),c=ZA(e,r,a),u={name:c.fullPath},h=dm(o,n.host,n._protocol),f="POST",g={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},x=JA(c,t),v=n.maxUploadRetryTime;function b(E){dw(E);let j;try{j=E.getResponseHeader("X-Goog-Upload-URL")}catch{Wc(!1)}return Wc(jy(j)),j}const T=new xh(h,f,b,v);return T.urlParams=u,T.headers=g,T.body=x,T.errorHandler=yp(e),T}function UO(n,e,t,r){const a={"X-Goog-Upload-Command":"query"};function o(f){const g=dw(f,["active","final"]);let x=null;try{x=f.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Wc(!1)}x||Wc(!1);const v=Number(x);return Wc(!isNaN(v)),new Cx(v,r.size(),g==="final")}const c="POST",u=n.maxUploadRetryTime,h=new xh(t,c,o,u);return h.headers=a,h.errorHandler=yp(e),h}const d4=256*1024;function VO(n,e,t,r,a,o,c,u){const h=new Cx(0,0);if(c?(h.current=c.current,h.total=c.total):(h.current=0,h.total=r.size()),r.size()!==h.total)throw tO();const f=h.total-h.current;let g=f;a>0&&(g=Math.min(g,a));const x=h.current,v=x+g;let b="";g===0?b="finalize":f===g?b="upload, finalize":b="upload";const T={"X-Goog-Upload-Command":b,"X-Goog-Upload-Offset":`${h.current}`},E=r.slice(x,v);if(E===null)throw zA();function j(B,re){const ae=dw(B,["active","final"]),G=h.current+g,M=r.size();let k;return ae==="final"?k=cw(e,o)(B,re):k=null,new Cx(G,M,ae==="final",k)}const S="POST",D=e.maxUploadRetryTime,O=new xh(t,S,j,D);return O.headers=T,O.body=E.uploadData(),O.progressCallback=u||null,O.errorHandler=yp(n),O}const Ui={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function m1(n){switch(n){case"running":case"pausing":case"canceling":return Ui.RUNNING;case"paused":return Ui.PAUSED;case"success":return Ui.SUCCESS;case"canceled":return Ui.CANCELED;case"error":return Ui.ERROR;default:return Ui.ERROR}}class BO{constructor(e,t,r){if(cO(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function cf(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class zO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,a,o){if(this.sent_)throw ng("cannot .send() more than once");if(oc(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ng("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ng("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ng("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ng("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class qO extends zO{initXhr(){this.xhr_.responseType="text"}}function Wu(){return new qO}class GO{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=lw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(Mr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(HA(a.status,[]))if(o)a=VA();else{this.sleepTime=Math.max(this.sleepTime*2,$9),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(Mr.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,o)=>{this._resolve=a,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const r=FO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(r,Wu,e,t);this._request=a,a.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const a=UO(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(a,Wu,t,r);this._request=o,o.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=d4*this._chunkMultiplier,t=new Cx(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((a,o)=>{let c;try{c=VO(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(h){this._error=h,this._transition("error");return}const u=this._ref.storage._makeRequest(c,Wu,a,o,!1);this._request=u,u.getPromise().then(h=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(h.current),h.finalized?(this._metadata=h.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){d4*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=LO(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(r,Wu,e,t);this._request=a,a.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=eT(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(r,Wu,e,t);this._request=a,a.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=BA(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=m1(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,a){const o=new BO(t||void 0,r||void 0,a||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(m1(this._state)){case Ui.SUCCESS:cf(this._resolve.bind(null,this.snapshot))();break;case Ui.CANCELED:case Ui.ERROR:const t=this._reject;cf(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(m1(this._state)){case Ui.RUNNING:case Ui.PAUSED:e.next&&cf(e.next.bind(e,this.snapshot))();break;case Ui.SUCCESS:e.complete&&cf(e.complete.bind(e))();break;case Ui.CANCELED:case Ui.ERROR:e.error&&cf(e.error.bind(e,this._error))();break;default:e.error&&cf(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}class uh{constructor(e,t){this._service=e,t instanceof ho?this._location=t:this._location=ho.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new uh(e,t)}get root(){const e=new ho(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return XA(this._location.path)}get storage(){return this._service}get parent(){const e=EO(this._location.path);if(e===null)return null;const t=new ho(this._location.bucket,e);return new uh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw sO(e)}}function HO(n,e,t){n._throwIfRoot("uploadBytes");const r=eT(n.storage,n._location,lw(),new Bc(e,!0),t);return n.storage.makeRequestWithTokens(r,Wu).then(a=>({metadata:a,ref:n}))}function $O(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new GO(n,new Bc(e),t)}function WO(n){n._throwIfRoot("getDownloadURL");const e=DO(n.storage,n._location,lw());return n.storage.makeRequestWithTokens(e,Wu).then(t=>{if(t===null)throw nO();return t})}function KO(n){n._throwIfRoot("deleteObject");const e=MO(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Wu)}function YO(n,e){const t=AO(n._location.path,e),r=new ho(n._location.bucket,t);return new uh(n.storage,r)}function XO(n){return/^[A-Za-z]+:\/\//.test(n)}function QO(n,e){return new uh(n,e)}function tT(n,e){if(n instanceof hw){const t=n;if(t._bucket==null)throw eO();const r=new uh(t,t._bucket);return e!=null?tT(r,e):r}else return e!==void 0?YO(n,e):n}function JO(n,e){if(e&&XO(e)){if(n instanceof hw)return QO(n,e);throw S2("To use ref(service, url), the first argument must be a Storage instance.")}else return tT(n,e)}function h4(n,e){const t=e?.[UA];return t==null?null:ho.makeFromBucketSpec(t,n)}function ZO(n,e,t,r={}){n.host=`${e}:${t}`;const a=oc(e);a&&(Wx(`https://${n.host}/b`),Kx("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:C3(o,n.app.options.projectId))}class hw{constructor(e,t,r,a,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=a,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=FA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=G9,this._maxUploadRetryTime=H9,this._requests=new Set,a!=null?this._bucket=ho.makeFromBucketSpec(a,this._host):this._bucket=h4(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ho.makeFromBucketSpec(this._url,e):this._bucket=h4(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){u4("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){u4("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Vi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new uh(this,e)}_makeRequest(e,t,r,a,o=!0){if(this._deleted)return new aO(qA());{const c=pO(e,this._appId,r,a,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,a).getPromise()}}const f4="@firebase/storage",m4="0.14.0";const nT="storage";function eF(n,e,t){return n=sr(n),HO(n,e,t)}function tF(n,e,t){return n=sr(n),$O(n,e,t)}function rT(n){return n=sr(n),WO(n)}function sT(n){return n=sr(n),KO(n)}function _y(n,e){return n=sr(n),JO(n,e)}function nF(n=Yx(),e){n=sr(n);const r=Zg(n,nT).getImmediate({identifier:e}),a=nv("storage");return a&&rF(r,...a),r}function rF(n,e,t,r={}){ZO(n,e,t,r)}function sF(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new hw(t,r,a,e,mh)}function aF(){ad(new Kc(nT,sF,"PUBLIC").setMultipleInstances(!0)),Uo(f4,m4,""),Uo(f4,m4,"esm2020")}aF();const Fc={apiKey:"AIzaSyB67ZvBQ7DLy3nErDuWSorBtbwgKeoWCw4",authDomain:"grampanchayat-multi-tenant.firebaseapp.com",projectId:"grampanchayat-multi-tenant",storageBucket:"grampanchayat-multi-tenant.firebasestorage.app",messagingSenderId:"595321745876",appId:"1:595321745876:web:3073e006f4a418207e2641",measurementId:void 0};if(!Fc.apiKey||!Fc.projectId)throw console.error(" Firebase environment variables are not loaded!"),console.error("Missing variables:",{apiKey:!Fc.apiKey,authDomain:!Fc.authDomain,projectId:!Fc.projectId,storageBucket:!Fc.storageBucket,messagingSenderId:!Fc.messagingSenderId,appId:!Fc.appId}),new Error("Firebase configuration is incomplete. Please check environment variables.");const fw=M3(Fc),Ke=T9(fw);C9(Ke).then(()=>{console.log(" Firestore offline persistence enabled")}).catch(n=>{n.code==="failed-precondition"?console.warn(" Multiple tabs open, persistence can only be enabled in one tab at a time"):n.code==="unimplemented"&&console.warn(" Current browser does not support persistence")});const ac=d7(fw),Sy=nF(fw),g4={"grampanchayatpindkepaarlodha.in":"pindkepar","www.grampanchayatpindkepaarlodha.in":"pindkepar",localhost:"development","127.0.0.1":"development"},jg=[{id:"pindkepar",name:"Gram Panchayat Pindkepar Lodha",nameHi:"   ",domain:"grampanchayatpindkepaarlodha.in",active:!0},{id:"demo",name:"Demo Gram Panchayat",nameHi:"  ",domain:"demo",active:!0}],iF=n=>{if(!n||typeof n!="string")return"";let e=n.toLowerCase();if(e.startsWith("gp-")){e=e.substring(3);const t=e.match(/^(.+)-([a-z0-9]{6})$/);return t&&(e=t[1]),e}return e.includes("-gpmulti")&&(e=e.split("-gpmulti")[0]),e=e.replace(/-+$/g,""),e=e.replace(/gpmulti$/g,"").replace(/-+$/g,""),e},oF=()=>{const e=new URLSearchParams(window.location.search).get("tenant");if(e&&jg.find(o=>o.id===e))return console.log(" Tenant from query parameter:",e),e;const t=window.location.hostname;if(g4[t]){const a=g4[t];if(a==="development"){const o=jg.find(c=>c.active);if(o)return console.log(" Development mode - Using default tenant:",o.id),console.log(" Tip: Use ?tenant=TENANT_ID to test other GPs"),o.id}return console.log(" Tenant from domain:",a),a}if(t.includes(".grampanchayats.in")){const a=t.split(".")[0];if(a!=="www")return console.log(" Tenant from subdomain:",a),a}if(t.endsWith(".web.app")||t.endsWith(".firebaseapp.com")){const a=t.split(".")[0];if(a&&a!=="www"){const o=iF(a);return console.log(" Tenant from Firebase subdomain:",o,"(from",a+")"),o}}const r=jg.find(a=>a.active);return r?(console.log(" Using default tenant:",r.id),r.id):(console.warn(" No tenant detected, using fallback"),"pindkepar")};let j0=null;const Zc=()=>(j0||(j0=oF(),console.log(" Current Tenant:",j0)),j0),lF=()=>{const n=Zc(),e=jg.find(t=>t.id===n);return e||(console.log(` Tenant "${n}" using dynamic configuration (will load from Firestore)`),{id:n,name:`GP ${n.charAt(0).toUpperCase()+n.slice(1)}`,nameHi:`  ${n}`,domain:`gp-${n}.web.app`,active:!0})},cF=()=>jg.filter(n=>n.active);async function p4(n,e){try{const r=(await uS(ac,n,e)).user,a=Zc(),o=await zs(St(Ke,"gramPanchayats",a,"users",r.uid));if(!o.exists()){console.log("User not found in current tenant, searching all tenants...");const c=await aT(r.uid);if(!c)throw new Error("User data not found");return{uid:r.uid,email:r.email,...c}}return{uid:r.uid,email:r.email,...o.data()}}catch(t){throw console.error("Sign in error:",t),t}}async function aT(n){const e=["pindkepar","demo","warghat"];for(const t of e)try{const r=await zs(St(Ke,"gramPanchayats",t,"users",n));if(r.exists())return console.log(` User found in tenant: ${t}`),r.data()}catch(r){console.error(`Error checking tenant ${t}:`,r)}return null}async function uF(){try{return await eL(ac),!0}catch(n){throw console.error("Sign out error:",n),n}}async function dF(n,e,t,r=null){try{const o=(await QP(ac,n,e)).user,c=r||Zc();return await ch(St(Ke,"gramPanchayats",c,"users",o.uid),{email:o.email,role:"admin",tenant:c,...t,createdAt:Xt(),updatedAt:Xt()}),{uid:o.uid,email:o.email,...t}}catch(a){throw console.error("Create admin error:",a),a}}function hF(n){return dS(ac,async e=>{if(e){const t=Zc(),r=await zs(St(Ke,"gramPanchayats",t,"users",e.uid));if(r.exists())n({uid:e.uid,email:e.email,...r.data()});else{const a=await aT(e.uid);n(a?{uid:e.uid,email:e.email,...a}:null)}}else n(null)})}const fF="type.googleapis.com/google.protobuf.Int64Value",mF="type.googleapis.com/google.protobuf.UInt64Value";function iT(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function Ix(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Ix(e));if(typeof n=="function"||typeof n=="object")return iT(n,e=>Ix(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Xf(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case fF:case mF:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Xf(e)):typeof n=="function"||typeof n=="object"?iT(n,e=>Xf(e)):n}const mw="functions";const x4={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zi extends vl{constructor(e,t,r){super(`${mw}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,zi.prototype)}}function gF(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function kx(n,e){let t=gF(n),r=t,a;try{const o=e&&e.error;if(o){const c=o.status;if(typeof c=="string"){if(!x4[c])return new zi("internal","internal");t=x4[c],r=c}const u=o.message;typeof u=="string"&&(r=u),a=o.details,a!==void 0&&(a=Xf(a))}}catch{}return t==="ok"?null:new zi(t,r,a)}class pF{constructor(e,t,r,a){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Vi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||a?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:a}}}const E2="us-central1",xF=/^data: (.*?)(?:\n|$)/;function yF(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new zi("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class bF{constructor(e,t,r,a,o=E2,c=(...u)=>fetch(...u)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new pF(e,t,r,a),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(o);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=E2}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function vF(n,e,t){const r=oc(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(Wx(n.emulatorOrigin+"/backends"),Kx("Functions",!0))}function wF(n,e,t){const r=a=>jF(n,e,a,{});return r.stream=(a,o)=>SF(n,e,a,o),r}function oT(n){return n.emulatorOrigin&&oc(n.emulatorOrigin)?"include":void 0}async function NF(n,e,t,r,a){t["Content-Type"]="application/json";let o;try{o=await r(n,{method:"POST",body:JSON.stringify(e),headers:t,credentials:oT(a)})}catch{return{status:0,json:null}}let c=null;try{c=await o.json()}catch{}return{status:o.status,json:c}}async function lT(n,e){const t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function jF(n,e,t,r){const a=n._url(e);return _F(n,a,t,r)}async function _F(n,e,t,r){t=Ix(t);const a={data:t},o=await lT(n,r),c=r.timeout||7e4,u=yF(c),h=await Promise.race([NF(e,a,o,n.fetchImpl,n),u.promise,n.cancelAllRequests]);if(u.cancel(),!h)throw new zi("cancelled","Firebase Functions instance was deleted.");const f=kx(h.status,h.json);if(f)throw f;if(!h.json)throw new zi("internal","Response is not valid JSON object.");let g=h.json.data;if(typeof g>"u"&&(g=h.json.result),typeof g>"u")throw new zi("internal","Response is missing data field.");return{data:Xf(g)}}function SF(n,e,t,r){const a=n._url(e);return EF(n,a,t,r||{})}async function EF(n,e,t,r){t=Ix(t);const a={data:t},o=await lT(n,r);o["Content-Type"]="application/json",o.Accept="text/event-stream";let c;try{c=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:o,signal:r?.signal,credentials:oT(n)})}catch(v){if(v instanceof Error&&v.name==="AbortError"){const T=new zi("cancelled","Request was cancelled.");return{data:Promise.reject(T),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(T)}}}}}}const b=kx(0,null);return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}let u,h;const f=new Promise((v,b)=>{u=v,h=b});r?.signal?.addEventListener("abort",()=>{const v=new zi("cancelled","Request was cancelled.");h(v)});const g=c.body.getReader(),x=AF(g,u,h,r?.signal);return{stream:{[Symbol.asyncIterator](){const v=x.getReader();return{async next(){const{value:b,done:T}=await v.read();return{value:b,done:T}},async return(){return await v.cancel(),{done:!0,value:void 0}}}}},data:f}}function AF(n,e,t,r){const a=(c,u)=>{const h=c.match(xF);if(!h)return;const f=h[1];try{const g=JSON.parse(f);if("result"in g){e(Xf(g.result));return}if("message"in g){u.enqueue(Xf(g.message));return}if("error"in g){const x=kx(0,g);u.error(x),t(x);return}}catch(g){if(g instanceof zi){u.error(g),t(g);return}}},o=new TextDecoder;return new ReadableStream({start(c){let u="";return h();async function h(){if(r?.aborted){const f=new zi("cancelled","Request was cancelled");return c.error(f),t(f),Promise.resolve()}try{const{value:f,done:g}=await n.read();if(g){u.trim()&&a(u.trim(),c),c.close();return}if(r?.aborted){const v=new zi("cancelled","Request was cancelled");c.error(v),t(v),await n.cancel();return}u+=o.decode(f,{stream:!0});const x=u.split(`
`);u=x.pop()||"";for(const v of x)v.trim()&&a(v.trim(),c);return h()}catch(f){const g=f instanceof zi?f:kx(0,null);c.error(g),t(g)}}},cancel(){return n.cancel()}})}const y4="@firebase/functions",b4="0.13.1";const TF="auth-internal",CF="app-check-internal",IF="messaging-internal";function kF(n){const e=(t,{instanceIdentifier:r})=>{const a=t.getProvider("app").getImmediate(),o=t.getProvider(TF),c=t.getProvider(IF),u=t.getProvider(CF);return new bF(a,o,c,u,r)};ad(new Kc(mw,e,"PUBLIC").setMultipleInstances(!0)),Uo(y4,b4,n),Uo(y4,b4,"esm2020")}function RF(n=Yx(),e=E2){const r=Zg(sr(n),mw).getImmediate({identifier:e}),a=nv("functions");return a&&PF(r,...a),r}function PF(n,e,t){vF(sr(n),e,t)}function LF(n,e,t){return wF(sr(n),e)}kF();const cT=W.createContext(),gw=()=>{const n=W.useContext(cT);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},DF=({children:n})=>{const[e,t]=W.useState(null),[r,a]=W.useState(!0);W.useEffect(()=>{const h=hF(f=>{t(f?{uid:f.uid,email:f.email,name:f.displayName||f.email,role:"ADMIN"}:null),a(!1)});return()=>h()},[]);const u={user:e,login:async h=>{try{const{email:f,password:g}=h,x=await p4(f,g);return{success:!0}}catch(f){if(console.error("Login error:",f),f.code==="auth/user-not-found"||f.code==="auth/invalid-credential"){console.log("User not found, attempting to create Auth user...");try{const x=RF(),v=LF(x,"createAuthUserOnLogin"),b=Zc(),T=await v({email:h.email,password:h.password,tenantId:b});console.log("Auth user created:",T.data);const E=await p4(h.email,h.password);return{success:!0}}catch(x){return console.error("Failed to create Auth user:",x),{success:!1,error:x.message||"Invalid credentials. Please check your email and password."}}}let g="Login failed. Please try again.";return f.code==="auth/wrong-password"?g="Incorrect password.":f.code==="auth/invalid-email"?g="Invalid email address.":f.code==="auth/too-many-requests"&&(g="Too many failed attempts. Please try again later."),{success:!1,error:g}}},logout:async()=>{try{await uF()}catch(h){console.error("Logout error:",h)}},loading:r,isAuthenticated:!!e};return s.jsx(cT.Provider,{value:u,children:n})},Ds={panchayatName:{en:"Gram Panchayat Shivpur",mr:" "},tagline:{en:"Working for Village Development",mr:"  "},logo:"/logo.png",contact:{phone:"+91 1234567890",email:"grampanchayat@example.com",address:{en:"Village Shivpur, Taluka Sample, District Example, Maharashtra - 411001",mr:" ,  ,  ,  - "}},officeTimings:{en:"Monday to Friday: 10:00 AM - 5:00 PM",mr:"  :     "},socialMedia:{facebook:"https://facebook.com",twitter:"https://twitter.com",youtube:"https://youtube.com"}},Nn=()=>`gramPanchayats/${Zc()}`,$t={settings:()=>`${Nn()}/settings`,siteSettings:()=>`${Nn()}/settings/siteConfig`,theme:()=>`${Nn()}/theme`,themeConfig:()=>`${Nn()}/theme/config`,features:()=>`${Nn()}/features`,featuresConfig:()=>`${Nn()}/features/config`,members:()=>`${Nn()}/members`,member:n=>`${Nn()}/members/${n}`,staff:()=>`${Nn()}/staff`,staffMember:n=>`${Nn()}/staff/${n}`,notices:()=>`${Nn()}/notices`,notice:n=>`${Nn()}/notices/${n}`,announcements:()=>`${Nn()}/announcements`,announcement:n=>`${Nn()}/announcements/${n}`,services:()=>`${Nn()}/services`,service:n=>`${Nn()}/services/${n}`,schemes:()=>`${Nn()}/schemes`,scheme:n=>`${Nn()}/schemes/${n}`,forms:()=>`${Nn()}/forms`,form:n=>`${Nn()}/forms/${n}`,programs:()=>`${Nn()}/programs`,program:n=>`${Nn()}/programs/${n}`,gallery:()=>`${Nn()}/gallery`,galleryItem:n=>`${Nn()}/gallery/${n}`,villages:()=>`${Nn()}/villages`,village:n=>`${Nn()}/villages/${n}`,demographics:()=>`${Nn()}/demographics`,populationBreakdowns:()=>`${Nn()}/populationBreakdowns`,villageGroups:()=>`${Nn()}/villageGroups`,infrastructure:()=>`${Nn()}/infrastructure`,statisticsYears:()=>`${Nn()}/statisticsYears`,financials:()=>`${Nn()}/financials`,financial:n=>`${Nn()}/financials/${n}`,grievances:()=>`${Nn()}/grievances`,grievance:n=>`${Nn()}/grievances/${n}`,pages:()=>`${Nn()}/pages`,page:n=>`${Nn()}/pages/${n}`,metadata:()=>`${Nn()}/metadata`,metadataConfig:()=>`${Nn()}/metadata/config`},Rx=async()=>{try{const n=St(Ke,$t.siteSettings()),e=await zs(n);return e.exists()?e.data():null}catch(n){throw console.error("Error fetching settings:",n),n}},uT=async n=>{try{const e=St(Ke,$t.siteSettings());return await ch(e,n,{merge:!0}),console.log("Settings updated successfully in Firebase"),n}catch(e){throw console.error("Error updating settings:",e),e}},MF=async n=>{try{const e=await Rx();return e||(await uT(n),console.log("Settings initialized with default data"),n)}catch(e){throw console.error("Error initializing settings:",e),e}},v4=n=>{if(!n)return;document.querySelectorAll("link[rel*='icon']").forEach(a=>a.remove());const t=document.createElement("link");t.rel="icon",t.type="image/png",t.href=n,document.head.appendChild(t);const r=document.createElement("link");r.rel="apple-touch-icon",r.href=n,document.head.appendChild(r),console.log(" Favicon updated to:",n)},w4=n=>{if(!n)return;const e=typeof n=="object"&&n.en?n.en:n;document.title=e||"Gram Panchayat",console.log(" Document title updated to:",document.title)},dT=W.createContext(),OF=({children:n})=>{const[e,t]=W.useState(null),[r,a]=W.useState(!0);return W.useEffect(()=>{(async()=>{try{a(!0);const c=await Rx();if(c)t(c),c.logo&&v4(c.logo),c.panchayatName&&w4(c.panchayatName),console.log("Site settings loaded from Firebase:",c);else{const u=await MF(Ds);t(u),console.log("Site settings initialized in Firebase")}}catch(c){console.error("Error loading site settings:",c),t(Ds)}finally{a(!1)}})()},[]),s.jsx(dT.Provider,{value:{settings:e,loading:r,refresh:async()=>{const o=await Rx();o&&(t(o),o.logo&&v4(o.logo),o.panchayatName&&w4(o.panchayatName))}},children:n})},iu=()=>{const n=W.useContext(dT);if(n===void 0)throw new Error("useSiteSettings must be used within a SiteSettingsProvider");return n},FF=W.createContext(),mi={primaryColor:"#1e40af",secondaryColor:"#059669",accentColor:"#f59e0b",fontFamily:"Inter, sans-serif",headerHeight:"80px",borderRadius:"8px",useCustomHomepage:!1,useCustomNavbar:!1,useCustomFooter:!1};function UF({children:n}){const[e,t]=W.useState(mi),[r,a]=W.useState(!0),[o,c]=W.useState(null);W.useEffect(()=>{u()},[]);const u=async()=>{try{a(!0);const v=St(Ke,$t.themeConfig()),b=await zs(v);if(b.exists()){const T={...mi,...b.data()};t(T),h(T),console.log(" Theme loaded for tenant:",Zc())}else console.log(" Using default theme for tenant:",Zc()),h(mi)}catch(v){console.error("Error loading theme:",v),c(v),h(mi)}finally{a(!1)}},h=v=>{const b=document.documentElement;b.style.setProperty("--color-primary",v.primaryColor||mi.primaryColor),b.style.setProperty("--color-secondary",v.secondaryColor||mi.secondaryColor),b.style.setProperty("--color-accent",v.accentColor||mi.accentColor),b.style.setProperty("--font-family",v.fontFamily||mi.fontFamily),b.style.setProperty("--header-height",v.headerHeight||mi.headerHeight),b.style.setProperty("--border-radius",v.borderRadius||mi.borderRadius),document.body.style.fontFamily=v.fontFamily||mi.fontFamily},x={theme:e,loading:r,error:o,updateTheme:async v=>{try{const b=St(Ke,$t.themeConfig()),T={...e,...v};return await setDoc(b,T),t(T),h(T),!0}catch(b){throw console.error("Error updating theme:",b),b}},resetTheme:async()=>{try{const v=St(Ke,$t.themeConfig());return await setDoc(v,mi),t(mi),h(mi),!0}catch(v){throw console.error("Error resetting theme:",v),v}},defaultTheme:mi};return s.jsx(FF.Provider,{value:x,children:!r&&n})}const hT=async n=>{try{const e=await zs(St(Ke,"globalConfig","superAdmins","users",n));return e.exists()&&e.data().role==="superadmin"}catch(e){return console.error("Error checking super admin status:",e),!1}},VF=async n=>{try{const e=await zs(St(Ke,"globalConfig","superAdmins","users",n));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Error getting super admin profile:",e),e}},BF=async n=>{try{await po(St(Ke,"globalConfig","superAdmins","users",n),{lastLogin:gt.now()})}catch(e){console.error("Error updating last login:",e)}},Ey=async()=>{try{const n=Ht(Ke,"globalConfig","metadata","gramPanchayats"),e=await Nr(n),t=[];return e.forEach(r=>{t.push({id:r.id,...r.data()})}),t.sort((r,a)=>{const o=r.createdAt?.toDate?.()||new Date(0);return(a.createdAt?.toDate?.()||new Date(0))-o})}catch(n){throw console.error("Error getting all GPs:",n),n}},pw=async n=>{try{const e=await zs(St(Ke,"globalConfig","metadata","gramPanchayats",n));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Error getting GP:",e),e}},zF=(n,e)=>{try{const t=St(Ke,"globalConfig","metadata","gramPanchayats",n);return V9(t,a=>{a.exists()?e({id:a.id,...a.data()}):e(null)},a=>{console.error("Error in GP subscription:",a),e(null)})}catch(t){return console.error("Error subscribing to GP:",t),null}},qF=async n=>{try{const{id:e,name:t,nameMarathi:r,domain:a,adminEmail:o,adminPassword:c,adminName:u,...h}=n;if(!e||!t||!a||!o||!c)throw new Error("Missing required fields: id, name, domain, adminEmail, adminPassword");if(!u)throw new Error("Admin name is required");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o))throw new Error("Invalid email format");if(c.length<6)throw new Error("Password must be at least 6 characters");if((await zs(St(Ke,"globalConfig","metadata","gramPanchayats",e))).exists())throw new Error(`Gram Panchayat with ID "${e}" already exists. Please use a different name.`);console.log(" Creating GP:",{id:e,name:t,domain:a,adminEmail:o});const x={id:e,name:t,nameMarathi:r||"",domain:a,subdomain:h.subdomain||a.replace(".web.app",""),domainStatus:"pending",active:!0,createdAt:gt.now(),updatedAt:gt.now(),adminEmail:o,adminPassword:c,adminName:u,...h};await ch(St(Ke,"globalConfig","metadata","gramPanchayats",e),x),console.log(" GP document created in Firestore");const v=`pending_${e}_${Date.now()}`;return await ch(St(Ke,`gramPanchayats/${e}/users`,v),{email:o,name:u,role:"admin",tenantId:e,createdAt:gt.now(),active:!0,createdBy:"superadmin",password:c,passwordLastChanged:gt.now(),isPending:!0,note:"Auth user will be created on first login or by Cloud Function"}),console.log(" Placeholder user document created"),await yh({action:"create_gp",gpId:e,gpName:t,adminEmail:o,timestamp:gt.now()}),console.log(" Activity logged"),{success:!0,gpId:e,adminEmail:o,message:`Gram Panchayat "${t}" created successfully. Admin can login with provided credentials.`}}catch(e){throw console.error(" Error creating GP:",e),e.code==="permission-denied"?new Error("Permission denied. Please ensure you are logged in as a Super Admin."):e}},GF=async(n,e)=>{try{return await po(St(Ke,"globalConfig","metadata","gramPanchayats",n),{...e,updatedAt:gt.now()}),await yh({action:"update_gp",gpId:n,updates:e,timestamp:gt.now()}),{success:!0,message:"GP updated successfully"}}catch(t){throw console.error("Error updating GP:",t),t}},fT=async(n,e)=>{try{return await po(St(Ke,"globalConfig","metadata","gramPanchayats",n),{active:e,updatedAt:gt.now()}),await yh({action:e?"activate_gp":"deactivate_gp",gpId:n,timestamp:gt.now()}),{success:!0}}catch(t){throw console.error("Error toggling GP status:",t),t}},mT=async n=>{try{const e=await pw(n);if(!e)throw new Error("GP not found");console.log(" Starting deletion of GP:",n),console.log(" Deleting GP users...");const t=await Nr(Ht(Ke,`gramPanchayats/${n}/users`)),r=[];for(const o of t.docs)r.push(Bo(St(Ke,`gramPanchayats/${n}/users`,o.id)));await Promise.all(r),console.log(" User documents deleted");const a=["notices","announcements","members","services","schemes","gallery","forms","grievances","financials","downloads","settings"];for(const o of a){console.log(` Deleting ${o}...`);const u=(await Nr(Ht(Ke,`gramPanchayats/${n}/${o}`))).docs.map(h=>Bo(h.ref));await Promise.all(u)}return console.log(" All subcollections deleted"),await Bo(St(Ke,"globalConfig","metadata","gramPanchayats",n)),console.log(" GP metadata deleted - Cloud Functions will handle hosting site & Auth user cleanup"),await yh({action:"delete_gp",gpId:n,gpData:e,timestamp:gt.now()}),{success:!0,message:" GP deleted successfully! Cloud Functions are automatically cleaning up hosting site and Auth users.",automated:!0,note:"No manual steps required - everything is handled automatically by Cloud Functions."}}catch(e){throw console.error("Error deleting GP:",e),e}},gT=async()=>{try{const n=[],e=await Ey();for(const t of e){const r=Ht(Ke,`gramPanchayats/${t.id}/users`);(await Nr(Es(r,ei("role","==","admin")))).forEach(o=>{n.push({id:o.id,gpId:t.id,gpName:t.name,...o.data()})})}return n}catch(n){throw console.error("Error getting all admin users:",n),n}},HF=async n=>{try{return await cS(ac,n),await yh({action:"reset_password",email:n,timestamp:gt.now()}),{success:!0,message:"Password reset email sent"}}catch(e){throw console.error("Error resetting password:",e),e}},$F=async(n,e)=>{try{const t=await zs(St(Ke,`gramPanchayats/${n}/users`,e));if(!t.exists())throw new Error("User not found");const r=t.data(),a=r.initialPassword?atob(r.initialPassword):null;return await yh({action:"view_password",userId:e,gpId:n,timestamp:gt.now()}),{password:a,createdAt:r.createdAt,passwordLastChanged:r.passwordLastChanged}}catch(t){throw console.error("Error getting initial password:",t),t}},WF=async(n,e,t,r=null)=>{try{const a=r||pT(12);return await po(St(Ke,`gramPanchayats/${n}/users`,e),{initialPassword:btoa(a),passwordLastChanged:gt.now(),passwordChangedBy:"superadmin"}),await cS(ac,t),await yh({action:"generate_new_password",userId:e,gpId:n,email:t,timestamp:gt.now()}),{success:!0,password:a,message:"Password updated. User should use the password reset email to set this password."}}catch(a){throw console.error("Error generating new password:",a),a}},KF=async()=>{try{const n=await Ey(),e=await gT(),t=n.filter(u=>u.active).length,r=n.filter(u=>!u.active).length,a=e.filter(u=>u.active).length,o=n.filter(u=>u.domainStatus==="active").length,c=n.filter(u=>u.domainStatus==="pending").length;return{totalGPs:n.length,activeGPs:t,inactiveGPs:r,totalUsers:e.length,activeUsers:a,domainsActive:o,domainsPending:c,lastUpdated:new Date}}catch(n){throw console.error("Error getting system stats:",n),n}},yh=async n=>{try{const e=Ht(Ke,"globalConfig","metadata","activityLogs");await ch(St(e),{...n,timestamp:n.timestamp||gt.now()})}catch(e){console.error("Error logging activity:",e)}},pT=(n=16)=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",t="abcdefghijklmnopqrstuvwxyz",r="0123456789",o=e+t+r+"@#";let c="";c+=e[Math.floor(Math.random()*e.length)],c+=t[Math.floor(Math.random()*t.length)],c+=r[Math.floor(Math.random()*r.length)],c+="@#"[Math.floor(Math.random()*2)];for(let u=4;u<n;u++)c+=o[Math.floor(Math.random()*o.length)];return c.split("").sort(()=>Math.random()-.5).join("")},YF=async n=>{try{const e=Ht(Ke,`gramPanchayats/${n}/users`),t=await Nr(e),r=[];return t.forEach(a=>{r.push({id:a.id,...a.data()})}),r.sort((a,o)=>{const c=a.createdAt?.toDate?.()||new Date(0);return(o.createdAt?.toDate?.()||new Date(0))-c})}catch(e){throw console.error("Error getting GP users:",e),e}},XF=async n=>{try{const e={totalUsers:0,totalNotices:0,totalGrievances:0,storageUsed:0};try{const t=await Nr(Ht(Ke,`gramPanchayats/${n}/users`));e.totalUsers=t.size}catch(t){console.error("Error counting users:",t)}try{const t=await Nr(Ht(Ke,`gramPanchayats/${n}/notices`));e.totalNotices=t.size}catch(t){console.error("Error counting notices:",t)}try{const t=await Nr(Ht(Ke,`gramPanchayats/${n}/grievances`));e.totalGrievances=t.size}catch(t){console.error("Error counting grievances:",t)}return e}catch(e){return console.error("Error getting GP stats:",e),null}},xT=W.createContext(),yT=()=>{const n=W.useContext(xT);if(!n)throw new Error("useSuperAdmin must be used within SuperAdminProvider");return n},QF=({children:n})=>{const[e,t]=W.useState(null),[r,a]=W.useState(!0),[o,c]=W.useState(null);W.useEffect(()=>{const f=dS(ac,async g=>{if(a(!0),c(null),g)try{if(await hT(g.uid)){const v=await VF(g.uid);t({uid:g.uid,email:g.email,...v}),await BF(g.uid)}else t(null),c("You do not have super admin permissions")}catch(x){console.error("Error checking super admin status:",x),c(x.message),t(null)}else t(null);a(!1)});return()=>f()},[]);const h={superAdmin:e,loading:r,error:o,isAuthenticated:!!e,hasPermission:f=>e&&e.permissions?.includes(f)||!1};return s.jsx(xT.Provider,{value:h,children:n})};const JF=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ZF=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),N4=n=>{const e=ZF(n);return e.charAt(0).toUpperCase()+e.slice(1)},bT=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),eU=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var tU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const nU=W.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:a="",children:o,iconNode:c,...u},h)=>W.createElement("svg",{ref:h,...tU,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:bT("lucide",a),...!o&&!eU(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,g])=>W.createElement(f,g)),...Array.isArray(o)?o:[o]]));const nt=(n,e)=>{const t=W.forwardRef(({className:r,...a},o)=>W.createElement(nU,{ref:o,iconNode:e,className:bT(`lucide-${JF(N4(n))}`,`lucide-${n}`,r),...a}));return t.displayName=N4(n),t};const rU=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],xo=nt("arrow-left",rU);const sU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Uc=nt("arrow-right",sU);const aU=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],sd=nt("award",aU);const iU=[["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M19.38 6.813A9 9 0 0 1 20.8 10.2a2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"11xh7x"}],["path",{d:"M9 12h.01",key:"157uk2"}]],A2=nt("baby",iU);const oU=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],qi=nt("bell",oU);const lU=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],$g=nt("book-open",lU);const cU=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Qf=nt("briefcase",cU);const uU=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],gl=nt("building-2",uU);const dU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Zr=nt("calendar",dU);const hU=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],j4=nt("camera",hU);const fU=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],vT=nt("chart-column",fU);const mU=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],gU=nt("chevron-left",mU);const pU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ay=nt("chevron-right",pU);const xU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Qn=nt("circle-alert",xU);const yU=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Gi=nt("circle-check-big",yU);const bU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],jf=nt("circle-user",bU);const vU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],dh=nt("circle-x",vU);const wU=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Jf=nt("clock",wU);const NU=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],T2=nt("copy",NU);const jU=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],_4=nt("credit-card",jU);const _U=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],SU=nt("dollar-sign",_U);const EU=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],zo=nt("download",EU);const AU=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],Px=nt("droplets",AU);const TU=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Lx=nt("external-link",TU);const CU=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],bh=nt("eye-off",CU);const IU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xi=nt("eye",IU);const kU=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],C2=nt("facebook",kU);const RU=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],PU=nt("file-check",RU);const LU=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],fr=nt("file-text",LU);const DU=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],MU=nt("file",DU);const OU=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],S4=nt("folder-open",OU);const FU=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Ty=nt("funnel",FU);const UU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Zf=nt("globe",UU);const VU=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],E4=nt("graduation-cap",VU);const BU=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],zU=nt("hash",BU);const qU=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],GU=nt("house",qU);const HU=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],$U=nt("image-plus",HU);const WU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],na=nt("image",WU);const KU=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],Dx=nt("indian-rupee",KU);const YU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],I2=nt("info",YU);const XU=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],QU=nt("instagram",XU);const JU=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],ZU=nt("key-round",JU);const eV=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],Cf=nt("languages",eV);const tV=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],nV=nt("layout-dashboard",tV);const rV=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],A4=nt("link",rV);const sV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],aV=nt("loader-circle",sV);const iV=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],em=nt("loader",iV);const oV=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],T4=nt("log-in",oV);const lV=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],k2=nt("lock",lV);const cV=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],wT=nt("log-out",cV);const uV=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],go=nt("mail",uV);const dV=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],xl=nt("map-pin",dV);const hV=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],Mx=nt("megaphone",hV);const fV=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],NT=nt("menu",fV);const mV=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],If=nt("message-square",mV);const gV=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],pV=nt("pen-line",gV);const xV=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],bp=nt("pen",xV);const yV=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],co=nt("phone",yV);const bV=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],vV=nt("piggy-bank",bV);const wV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ss=nt("plus",wV);const NV=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],jT=nt("power",NV);const jV=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ox=nt("refresh-cw",jV);const _V=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Bs=nt("save",_V);const SV=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],R2=nt("school",SV);const EV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Hi=nt("search",EV);const AV=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],C4=nt("send",AV);const TV=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_T=nt("settings",TV);const CV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ql=nt("shield",CV);const IV=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Os=nt("sparkles",IV);const kV=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ud=nt("square-pen",kV);const RV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ST=nt("target",RV);const PV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ti=nt("trash-2",PV);const LV=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],_g=nt("trending-down",LV);const DV=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Xd=nt("trending-up",DV);const MV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],xw=nt("triangle-alert",MV);const OV=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],ET=nt("twitter",OV);const FV=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],tm=nt("upload",FV);const UV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],VV=nt("user-plus",UV);const BV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],nm=nt("user",BV);const zV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Us=nt("users",zV);const qV=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],P2=nt("video",qV);const GV=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],L2=nt("wallet",GV);const HV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ni=nt("x",HV);const $V=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],WV=nt("youtube",$V),KV=()=>{const[n,e]=W.useState(!1),[t,r]=W.useState(!1),{language:a,toggleLanguage:o,t:c,getContent:u}=ms(),{settings:h,loading:f}=iu(),g=fd();W.useEffect(()=>{const b=()=>{r(window.scrollY>20)};return window.addEventListener("scroll",b),()=>window.removeEventListener("scroll",b)},[]);const x=[{path:"/",label:c("nav.home")},{path:"/about",label:c("nav.about")},{path:"/panchayat",label:c("nav.panchayat")},{path:"/services",label:c("nav.services")},{path:"/schemes",label:c("nav.schemes")},{path:"/downloads",label:c("nav.downloads")},{path:"/education",label:c("nav.education")},{path:"/gallery",label:c("nav.gallery")},{path:"/financials",label:c("nav.financials")},{path:"/village-statistics",label:a==="en"?"Statistics":""},{path:"/notices",label:c("nav.notices")},{path:"/contact",label:c("nav.contact")}],v=b=>g.pathname===b;return f||!h?s.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-md",children:s.jsx("div",{className:"h-20 flex items-center justify-center",children:s.jsx("div",{className:"w-8 h-8 border-2 border-orange-600 border-t-transparent rounded-full animate-spin"})})}):s.jsxs("header",{className:`sticky top-0 z-50 transition-all duration-300 ${t?"shadow-xl":"shadow-md"}`,children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 via-blue-900 to-green-600 text-white py-1.5",children:s.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex flex-wrap justify-between items-center text-xs",children:[s.jsxs("div",{className:"flex flex-wrap gap-2 md:gap-4 items-center",children:[h?.contact?.phone&&s.jsxs("a",{href:`tel:${h.contact.phone}`,className:"flex items-center gap-1 hover:text-orange-200 transition-colors",children:[s.jsx(co,{size:12}),s.jsx("span",{className:"font-medium",children:h.contact.phone})]}),h?.contact?.email&&s.jsxs("a",{href:`mailto:${h.contact.email}`,className:"hidden sm:flex items-center gap-1 hover:text-orange-200 transition-colors",children:[s.jsx(go,{size:12}),s.jsx("span",{className:"font-medium truncate max-w-[160px]",children:h.contact.email})]}),s.jsxs("div",{className:"hidden lg:flex items-center gap-1 text-white/90",children:[s.jsx(Jf,{size:12}),s.jsx("span",{className:"font-medium",children:u(h.officeTimings)})]})]}),s.jsxs("button",{onClick:o,className:"flex items-center gap-1.5 px-2.5 py-1 bg-white/20 hover:bg-white/30 rounded-md transition-all font-semibold text-xs",children:[s.jsx(Zf,{size:12}),s.jsx("span",{children:a==="en"?"EN":""})]})]})})}),s.jsx("div",{className:`bg-white border-b border-gray-100 transition-all duration-300 ${t?"py-2":"py-3"}`,children:s.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center lg:justify-center lg:relative",children:[s.jsxs(_n,{to:"/",className:"group flex items-center gap-3",children:[h.logo&&s.jsx("img",{src:h.logo,alt:"GP Logo",className:"h-12 w-12 object-contain"}),s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-bold bg-gradient-to-r from-gray-900 via-blue-900 to-gray-900 bg-clip-text text-transparent leading-tight group-hover:from-orange-600 group-hover:via-orange-700 group-hover:to-orange-600 transition-all duration-300",children:u(h.panchayatName)}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-600 leading-tight font-medium hidden sm:block mt-0.5",children:u(h.tagline)}),s.jsxs("div",{className:"w-20 h-0.5 mx-auto mt-1 flex rounded-full overflow-hidden",children:[s.jsx("div",{className:"flex-1 bg-orange-600"}),s.jsx("div",{className:"flex-1 bg-white"}),s.jsx("div",{className:"flex-1 bg-green-600"})]})]})]}),s.jsx("button",{onClick:()=>e(!n),className:"lg:hidden p-2 text-gray-700 hover:bg-orange-50 rounded-lg transition-colors",children:n?s.jsx(ni,{size:22}):s.jsx(NT,{size:22})})]})})}),s.jsx("nav",{className:`bg-gradient-to-r from-blue-900 via-gray-800 to-blue-900 ${n?"block":"hidden"} lg:block`,children:s.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("ul",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-center lg:gap-0.5",children:x.map(b=>s.jsx("li",{className:"relative group",children:s.jsxs(_n,{to:b.path,onClick:()=>e(!1),className:`block px-3 lg:px-4 py-2.5 lg:py-2.5 text-white font-medium transition-all relative overflow-hidden text-sm ${v(b.path)?"bg-orange-600 lg:bg-transparent":"hover:bg-white/10"}`,children:[v(b.path)&&s.jsx("span",{className:"hidden lg:block absolute bottom-0 left-0 right-0 h-0.5 bg-orange-500"}),s.jsx("span",{className:"hidden lg:block absolute inset-0 bg-gradient-to-r from-transparent via-orange-500/20 to-transparent transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300"}),s.jsx("span",{className:"relative z-10",children:b.label})]})},b.path))})})})]})},YV=()=>{const{t:n,getContent:e}=ms(),{settings:t,loading:r}=iu();if(r||!t)return null;const a=[{path:"/",label:n("nav.home")},{path:"/services",label:n("nav.services")},{path:"/schemes",label:n("nav.schemes")},{path:"/downloads",label:n("nav.downloads")},{path:"/notices",label:n("nav.notices")}],o=[{label:"Ministry of Panchayati Raj",url:"https://panchayat.gov.in"},{label:"Digital India",url:"https://digitalindia.gov.in"},{label:"MyGov",url:"https://mygov.in"}];return s.jsxs("footer",{className:"bg-gray-900 text-gray-300",children:[s.jsx("div",{className:"container-custom py-12",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-bold text-lg mb-4",children:e(t.panchayatName)}),s.jsx("p",{className:"text-sm mb-4",children:e(t.tagline)}),t.socialMedia&&s.jsxs("div",{className:"flex gap-3",children:[t.socialMedia.facebook&&s.jsx("a",{href:t.socialMedia.facebook,target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 bg-gray-700 hover:bg-primary-600 rounded-full flex items-center justify-center transition-colors",children:s.jsx(C2,{size:16})}),t.socialMedia.twitter&&s.jsx("a",{href:t.socialMedia.twitter,target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 bg-gray-700 hover:bg-primary-600 rounded-full flex items-center justify-center transition-colors",children:s.jsx(ET,{size:16})}),t.socialMedia.youtube&&s.jsx("a",{href:t.socialMedia.youtube,target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 bg-gray-700 hover:bg-primary-600 rounded-full flex items-center justify-center transition-colors",children:s.jsx(WV,{size:16})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-bold text-lg mb-4",children:n("footer.quickLinks")}),s.jsxs("ul",{className:"space-y-2",children:[a.map(c=>s.jsx("li",{children:s.jsx(_n,{to:c.path,className:"text-sm hover:text-primary-400 transition-colors",children:c.label})},c.path)),s.jsx("li",{children:s.jsx(_n,{to:"/admin/login",className:"text-sm hover:text-primary-400 transition-colors font-semibold",children:" Admin Login"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-bold text-lg mb-4",children:n("footer.importantLinks")}),s.jsx("ul",{className:"space-y-2",children:o.map(c=>s.jsx("li",{children:s.jsx("a",{href:c.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm hover:text-primary-400 transition-colors",children:c.label})},c.url))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-bold text-lg mb-4",children:n("footer.contactUs")}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:"flex gap-2 text-sm",children:[s.jsx(xl,{size:16,className:"flex-shrink-0 mt-1"}),s.jsx("span",{children:e(t.contact.address)})]}),s.jsxs("li",{className:"flex gap-2 text-sm",children:[s.jsx(co,{size:16,className:"flex-shrink-0"}),s.jsx("a",{href:`tel:${t.contact.phone}`,className:"hover:text-primary-400 transition-colors",children:t.contact.phone})]}),s.jsxs("li",{className:"flex gap-2 text-sm",children:[s.jsx(go,{size:16,className:"flex-shrink-0"}),s.jsx("a",{href:`mailto:${t.contact.email}`,className:"hover:text-primary-400 transition-colors",children:t.contact.email})]})]})]})]})}),s.jsx("div",{className:"border-t border-gray-800",children:s.jsx("div",{className:"container-custom py-4",children:s.jsx("div",{className:"text-center text-sm",children:s.jsxs("p",{children:[" ",new Date().getFullYear()," ",e(t.panchayatName),". ",n("footer.copyright"),"."]})})})})]})};async function XV(){try{const n=Ht(Ke,$t.announcements()),e=Es(n,lc("createdAt","desc")),r=(await Nr(e)).docs.map(o=>({id:o.id,...o.data(),createdAt:o.data().createdAt?.toDate?.()||new Date,updatedAt:o.data().updatedAt?.toDate?.()||new Date})),a={high:3,medium:2,low:1};return r.sort((o,c)=>{const u=(a[c.priority]||0)-(a[o.priority]||0);return u!==0?u:c.createdAt-o.createdAt})}catch(n){throw console.error("Error getting announcements:",n),n}}async function QV(){try{const n=Ht(Ke,$t.announcements()),e=Es(n,ei("isActive","==",!0)),r=(await Nr(e)).docs.map(o=>({id:o.id,...o.data(),createdAt:o.data().createdAt?.toDate?.()||new Date})),a={high:3,medium:2,low:1};return r.sort((o,c)=>{const u=(a[c.priority]||0)-(a[o.priority]||0);return u!==0?u:c.createdAt-o.createdAt})}catch(n){throw console.error("Error getting active announcements:",n),n}}async function JV(n){try{const e=St(Ke,$t.announcement(n)),t=await zs(e);if(t.exists()){const r=t.data();return{id:t.id,...r,createdAt:r.createdAt?.toDate?.()||new Date,updatedAt:r.updatedAt?.toDate?.()||new Date}}return null}catch(e){throw console.error("Error getting announcement:",e),e}}async function ZV(n){try{const e=Ht(Ke,$t.announcements());return(await vs(e,{...n,createdAt:Xt(),updatedAt:Xt()})).id}catch(e){throw console.error("Error creating announcement:",e),e}}async function AT(n,e){try{const t=St(Ke,$t.announcement(n));await po(t,{...e,updatedAt:Xt()})}catch(t){throw console.error("Error updating announcement:",t),t}}async function eB(n){try{const e=St(Ke,$t.announcement(n));await Bo(e)}catch(e){throw console.error("Error deleting announcement:",e),e}}async function tB(n,e){try{await AT(n,{isActive:e})}catch(t){throw console.error("Error toggling announcement status:",t),t}}function nB(){const[n,e]=W.useState([]),[t,r]=W.useState(0),[a,o]=W.useState(!0),{getContent:c}=ms();W.useEffect(()=>{u()},[]),W.useEffect(()=>{if(n.length>1){const b=setInterval(()=>{r(T=>(T+1)%n.length)},5e3);return()=>clearInterval(b)}},[n.length]);const u=async()=>{try{const b=await QV();e(b)}catch(b){console.error("Error loading announcements:",b)}},h=()=>{o(!1)};if(!a||n.length===0)return null;const f=n[t],g={info:{bg:"bg-blue-500",icon:I2},warning:{bg:"bg-yellow-500",icon:xw},alert:{bg:"bg-red-500",icon:Qn},success:{bg:"bg-green-500",icon:Gi}},x=g[f?.type]||g.info,v=x.icon;return s.jsxs("div",{className:`${x.bg} text-white shadow-lg relative overflow-hidden`,children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')]"})}),s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-3 relative z-10",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(v,{className:"flex-shrink-0 animate-pulse",size:24}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("p",{className:"font-bold text-sm sm:text-base",children:c(f.title)}),s.jsx("span",{className:"text-white/80 text-sm hidden sm:inline",children:""}),s.jsx("p",{className:"text-white/90 text-sm",children:c(f.message)})]})})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[f.link&&s.jsxs("a",{href:f.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-semibold transition-colors backdrop-blur-sm",children:[s.jsx("span",{className:"hidden sm:inline",children:"Read More"}),s.jsx(Lx,{size:14})]}),s.jsx("button",{onClick:h,className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors",title:"Close",children:s.jsx(ni,{size:18})})]})]}),n.length>1&&s.jsx("div",{className:"flex justify-center gap-1.5 mt-2",children:n.map((b,T)=>s.jsx("button",{onClick:()=>r(T),className:`h-1.5 rounded-full transition-all ${T===t?"w-6 bg-white":"w-1.5 bg-white/40 hover:bg-white/60"}`,title:`Announcement ${T+1}`},T))})]})]})}const rB=()=>s.jsxs("div",{className:"min-h-screen flex flex-col",children:[s.jsx(KV,{}),s.jsx(nB,{}),s.jsx("main",{className:"flex-1",children:s.jsx(v3,{})}),s.jsx(YV,{})]}),sB=({children:n})=>{const{isAuthenticated:e,loading:t}=gw();return t?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):e?n:s.jsx(tv,{to:"/admin/login",replace:!0})};function uf({children:n,requiredPermission:e=null}){const{superAdmin:t,loading:r,isAuthenticated:a,hasPermission:o}=yT(),c=fd();return r?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-800 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white/10 backdrop-blur-md rounded-full mb-4 border border-white/20",children:s.jsx(Ql,{className:"w-10 h-10 text-white animate-pulse"})}),s.jsxs("div",{className:"flex items-center justify-center gap-3 text-white",children:[s.jsx(em,{className:"w-6 h-6 animate-spin"}),s.jsx("p",{className:"text-lg",children:"Verifying super admin access..."})]})]})}):!a||!t?s.jsx(tv,{to:"/superadmin/login",state:{from:c},replace:!0}):e&&!o(e)?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-800 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 max-w-md text-center border border-white/20",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-500/20 rounded-full mb-4",children:s.jsx(Ql,{className:"w-8 h-8 text-red-200"})}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-indigo-200 mb-6",children:"You do not have permission to access this feature."}),s.jsxs("p",{className:"text-sm text-indigo-300 mb-6",children:["Required permission: ",s.jsx("span",{className:"font-mono bg-white/10 px-2 py-1 rounded",children:e})]}),s.jsx("button",{onClick:()=>window.history.back(),className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-6 py-2 rounded-lg hover:from-indigo-600 hover:to-purple-700 transition",children:"Go Back"})]})}):n}const aB=()=>{const[n,e]=W.useState(!1),{user:t,logout:r}=gw(),{language:a,toggleLanguage:o}=ms(),c=fd(),u=Tr(),h=()=>{r(),u("/admin/login")},f=[{path:"/admin/dashboard",label:"Dashboard",icon:nV},{path:"/admin/members",label:"Members & Staff",icon:Us},{path:"/admin/services",label:"Services",icon:Qf},{path:"/admin/schemes",label:"Schemes",icon:fr},{path:"/admin/forms",label:"Forms & Downloads",icon:zo},{path:"/admin/gallery",label:"Gallery",icon:na},{path:"/admin/financials",label:"Financials",icon:SU},{path:"/admin/notices",label:"Notices & Tenders",icon:qi},{path:"/admin/announcements",label:"Announcements",icon:Mx},{path:"/admin/grievances",label:"Grievances",icon:If},{path:"/admin/village-statistics",label:"Village Statistics",icon:fr},{path:"/admin/settings",label:"Settings",icon:_T}],g=x=>c.pathname===x;return s.jsxs("div",{className:"min-h-screen bg-gray-100",children:[s.jsx("header",{className:"bg-white shadow-md fixed top-0 left-0 right-0 z-40",children:s.jsxs("div",{className:"flex justify-between items-center px-4 py-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>e(!n),className:"lg:hidden p-2 hover:bg-gray-100 rounded",children:n?s.jsx(ni,{size:24}):s.jsx(NT,{size:24})}),s.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Admin Panel"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right hidden sm:block",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-800",children:t?.name}),s.jsx("p",{className:"text-xs text-gray-500",children:t?.role})]}),s.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",title:a==="en"?"Switch to Marathi":"Switch to English",children:[s.jsx(Cf,{size:18}),s.jsx("span",{className:"hidden sm:inline text-sm",children:a==="en"?"EN":""})]}),s.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:[s.jsx(wT,{size:18}),s.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})}),s.jsx("aside",{className:`fixed top-16 left-0 bottom-0 w-64 bg-white shadow-lg transform transition-transform duration-200 z-30 ${n?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:s.jsx("nav",{className:"p-4 space-y-2 overflow-y-auto h-full",children:f.map(x=>{const v=x.icon;return s.jsxs(_n,{to:x.path,onClick:()=>e(!1),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${g(x.path)?"bg-primary-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[s.jsx(v,{size:20}),s.jsx("span",{className:"font-medium",children:x.label})]},x.path)})})}),s.jsx("main",{className:"pt-16 lg:pl-64 min-h-screen",children:s.jsx("div",{className:"p-6",children:s.jsx(v3,{})})}),n&&s.jsx("div",{onClick:()=>e(!1),className:"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden"})]})};function iB(){const[n,e]=W.useState(!1);return lF(),cF(),null}const oB=()=>{const{t:n,getContent:e}=ms(),{settings:t,loading:r}=iu();return r||!t?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 via-blue-50 to-green-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-orange-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"Loading..."})]})}):s.jsxs("div",{className:"overflow-hidden",children:[s.jsxs("section",{className:"relative overflow-hidden min-h-[650px] md:min-h-[700px] lg:min-h-[750px] flex items-center",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-600 via-white to-green-600",children:s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')] opacity-20"})})}),s.jsx("div",{className:"absolute top-10 right-10 w-32 h-32 md:w-48 md:h-48 opacity-5 animate-spin-slow",children:s.jsxs("svg",{viewBox:"0 0 200 200",className:"w-full h-full",children:[s.jsx("circle",{cx:"100",cy:"100",r:"80",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-blue-900"}),[...Array(24)].map((a,o)=>s.jsx("line",{x1:"100",y1:"100",x2:"100",y2:"20",stroke:"currentColor",strokeWidth:"2",className:"text-blue-900",transform:`rotate(${o*15} 100 100)`},o))]})}),s.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10 py-16 md:py-20",children:s.jsx("div",{className:"max-w-5xl mx-auto",children:s.jsxs("div",{className:"text-center mb-8 md:mb-12 animate-fade-in-up",children:[s.jsx("div",{className:"inline-block mb-6 p-4 bg-white rounded-full shadow-2xl",children:s.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-orange-600 via-blue-900 to-green-600 rounded-full flex items-center justify-center",children:s.jsx(sd,{className:"text-white w-8 h-8 md:w-10 md:h-10"})})}),s.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-4 text-gray-900 leading-snug",children:[s.jsx("span",{className:"block text-orange-600",children:n("home.welcomeTitle")}),s.jsx("span",{className:"block mt-2 pt-2 bg-gradient-to-r from-blue-900 via-gray-800 to-blue-900 bg-clip-text text-transparent",children:e(t.panchayatName)})]}),s.jsx("p",{className:"text-lg sm:text-xl md:text-2xl text-gray-700 font-medium max-w-3xl mx-auto mb-8 px-4",children:e(t.tagline)}),s.jsxs("div",{className:"w-32 h-1 mx-auto mb-8 flex rounded-full overflow-hidden shadow-lg",children:[s.jsx("div",{className:"flex-1 bg-orange-600"}),s.jsx("div",{className:"flex-1 bg-white"}),s.jsx("div",{className:"flex-1 bg-green-600"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[s.jsxs(_n,{to:"/about",className:"group inline-flex items-center gap-2 bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white px-8 py-4 rounded-lg text-base md:text-lg font-semibold shadow-xl hover:shadow-2xl transition-all transform hover:scale-105",children:[n("home.knowMore"),s.jsx(Uc,{size:20,className:"group-hover:translate-x-1 transition-transform"})]}),s.jsxs(_n,{to:"/services",className:"group inline-flex items-center gap-2 bg-white hover:bg-gray-50 text-gray-900 px-8 py-4 rounded-lg text-base md:text-lg font-semibold shadow-xl hover:shadow-2xl transition-all transform hover:scale-105 border-2 border-gray-200",children:[n("home.importantServices"),s.jsx(Lx,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})]})]})})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:s.jsx("svg",{viewBox:"0 0 1440 120",className:"w-full h-16 md:h-24 fill-current text-white",children:s.jsx("path",{d:"M0,64L48,69.3C96,75,192,85,288,80C384,75,480,53,576,48C672,43,768,53,864,58.7C960,64,1056,64,1152,58.7C1248,53,1344,43,1392,37.3L1440,32L1440,120L1392,120C1344,120,1248,120,1152,120C1056,120,960,120,864,120C768,120,672,120,576,120C480,120,384,120,288,120C192,120,96,120,48,120L0,120Z"})})})]}),s.jsx("section",{className:"py-12 md:py-16 lg:py-20 bg-gradient-to-br from-gray-50 via-blue-50/30 to-orange-50/30",children:s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-10 md:mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-3",children:n("home.quickInfo")}),s.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-orange-600 to-green-600 mx-auto rounded-full"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 max-w-7xl mx-auto",children:[s.jsx("div",{className:"group bg-white p-6 md:p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border-l-4 border-orange-600 transform hover:-translate-y-2",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl flex items-center justify-center shadow-md group-hover:scale-110 transition-transform",children:s.jsx(co,{className:"text-white",size:24})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:n("home.phone")}),s.jsx("a",{href:`tel:${t.contact.phone}`,className:"text-gray-700 hover:text-orange-600 font-medium transition-colors block truncate",children:t.contact.phone})]})]})}),s.jsx("div",{className:"group bg-white p-6 md:p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border-l-4 border-green-600 transform hover:-translate-y-2",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-gradient-to-br from-green-600 to-green-700 rounded-xl flex items-center justify-center shadow-md group-hover:scale-110 transition-transform",children:s.jsx(go,{className:"text-white",size:24})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:n("home.email")}),s.jsx("a",{href:`mailto:${t.contact.email}`,className:"text-gray-700 hover:text-green-600 font-medium transition-colors block break-all text-sm md:text-base",children:t.contact.email})]})]})}),s.jsx("div",{className:"group bg-white p-6 md:p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border-l-4 border-blue-600 transform hover:-translate-y-2",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md group-hover:scale-110 transition-transform",children:s.jsx(xl,{className:"text-white",size:24})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:n("home.address")}),s.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:e(t.contact.address)})]})]})}),s.jsx("div",{className:"group bg-white p-6 md:p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border-l-4 border-orange-600 transform hover:-translate-y-2",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl flex items-center justify-center shadow-md group-hover:scale-110 transition-transform",children:s.jsx(Jf,{className:"text-white",size:24})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:n("home.timings")}),s.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:e(t.officeTimings)})]})]})})]})]})}),s.jsx("section",{className:"py-12 md:py-16 lg:py-20 bg-white",children:s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-10 md:mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-3",children:n("home.quickLinks")}),s.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-orange-600 to-green-600 mx-auto rounded-full"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 max-w-7xl mx-auto",children:[s.jsxs(_n,{to:"/financials#property-tax",className:"group relative bg-gradient-to-br from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white p-6 md:p-8 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-500"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx(Dx,{size:40,className:"mb-4 group-hover:scale-110 transition-transform"}),s.jsx("h3",{className:"text-xl md:text-2xl font-bold mb-2",children:n("home.payPropertyTax")}),s.jsx("p",{className:"text-white/90 text-sm mb-4",children:"Pay your property tax online"}),s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[s.jsx("span",{children:"Pay Now"}),s.jsx(Uc,{size:18,className:"group-hover:translate-x-2 transition-transform"})]})]})]}),s.jsxs(_n,{to:"/financials#water-tax",className:"group relative bg-gradient-to-br from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white p-6 md:p-8 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-500"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx(Dx,{size:40,className:"mb-4 group-hover:scale-110 transition-transform"}),s.jsx("h3",{className:"text-xl md:text-2xl font-bold mb-2",children:n("home.payWaterTax")}),s.jsx("p",{className:"text-white/90 text-sm mb-4",children:"Pay your water bill online"}),s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[s.jsx("span",{children:"Pay Now"}),s.jsx(Uc,{size:18,className:"group-hover:translate-x-2 transition-transform"})]})]})]}),s.jsxs(_n,{to:"/schemes",className:"group relative bg-gradient-to-br from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white p-6 md:p-8 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-500"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx(Qf,{size:40,className:"mb-4 group-hover:scale-110 transition-transform"}),s.jsx("h3",{className:"text-xl md:text-2xl font-bold mb-2",children:n("home.viewSchemes")}),s.jsx("p",{className:"text-white/90 text-sm mb-4",children:"Browse government schemes"}),s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[s.jsx("span",{children:"View All"}),s.jsx(Uc,{size:18,className:"group-hover:translate-x-2 transition-transform"})]})]})]}),s.jsxs(_n,{to:"/downloads",className:"group relative bg-gradient-to-br from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white p-6 md:p-8 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-500"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx(zo,{size:40,className:"mb-4 group-hover:scale-110 transition-transform"}),s.jsx("h3",{className:"text-xl md:text-2xl font-bold mb-2",children:n("home.downloadForms")}),s.jsx("p",{className:"text-white/90 text-sm mb-4",children:"Download application forms"}),s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[s.jsx("span",{children:"Download"}),s.jsx(Uc,{size:18,className:"group-hover:translate-x-2 transition-transform"})]})]})]})]})]})}),s.jsxs("section",{className:"py-12 md:py-16 lg:py-20 bg-gradient-to-br from-blue-900 via-blue-800 to-blue-900 text-white relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')]"})}),s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[s.jsxs("div",{className:"text-center mb-10 md:mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-3",children:n("home.highlights")}),s.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-orange-400 to-green-400 mx-auto rounded-full"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8 max-w-6xl mx-auto",children:[s.jsxs(_n,{to:"/panchayat",className:"group bg-white/10 backdrop-blur-sm p-8 md:p-10 rounded-2xl text-center hover:bg-white/20 transition-all duration-300 transform hover:-translate-y-2 hover:shadow-2xl border border-white/20",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-400 to-orange-500 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform shadow-xl",children:s.jsx(Us,{className:"text-white",size:40})}),s.jsx("p",{className:"text-xl font-semibold mb-2 text-orange-300",children:n("home.members")}),s.jsx("p",{className:"text-white/80 text-sm",children:"Panchayat Representatives"}),s.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-orange-300 text-sm font-semibold opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("span",{children:"View Details"}),s.jsx(Uc,{size:16})]})]}),s.jsxs(_n,{to:"/schemes",className:"group bg-white/10 backdrop-blur-sm p-8 md:p-10 rounded-2xl text-center hover:bg-white/20 transition-all duration-300 transform hover:-translate-y-2 hover:shadow-2xl border border-white/20",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-400 to-green-500 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform shadow-xl",children:s.jsx(Qf,{className:"text-white",size:40})}),s.jsx("p",{className:"text-xl font-semibold mb-2 text-green-300",children:n("home.popularSchemes")}),s.jsx("p",{className:"text-white/80 text-sm",children:"Government Schemes"}),s.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-green-300 text-sm font-semibold opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("span",{children:"View Details"}),s.jsx(Uc,{size:16})]})]}),s.jsxs(_n,{to:"/services",className:"group bg-white/10 backdrop-blur-sm p-8 md:p-10 rounded-2xl text-center hover:bg-white/20 transition-all duration-300 transform hover:-translate-y-2 hover:shadow-2xl border border-white/20",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-400 to-blue-500 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform shadow-xl",children:s.jsx(fr,{className:"text-white",size:40})}),s.jsx("p",{className:"text-xl font-semibold mb-2 text-blue-300",children:n("home.importantServices")}),s.jsx("p",{className:"text-white/80 text-sm",children:"Panchayat Services"}),s.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-blue-300 text-sm font-semibold opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("span",{children:"View Details"}),s.jsx(Uc,{size:16})]})]})]})]})]})]})},Cy={ABOUT:"about",EDUCATION:"education"},TT=async n=>{try{const e=St(Ke,$t.pages(),n),t=await zs(e);if(t.exists()){const r=t.data();return{id:t.id,...r,updatedAt:r.updatedAt?.toDate?.()?.toISOString?.()||r.updatedAt,createdAt:r.createdAt?.toDate?.()?.toISOString?.()||r.createdAt}}else return console.log(`No ${n} page content found`),null}catch(e){throw console.error(`Error fetching ${n} page content:`,e),new Error(`Failed to fetch ${n} page content`)}},CT=async(n,e)=>{try{const t=St(Ke,$t.pages(),n),a=!(await zs(t)).exists(),o={...e,updatedAt:gt.now(),...a&&{createdAt:gt.now()}};await ch(t,o,{merge:!0}),console.log(`${n} page content ${a?"created":"updated"}`)}catch(t){throw console.error(`Error updating ${n} page content:`,t),new Error(`Failed to update ${n} page content`)}},IT=async()=>await TT(Cy.ABOUT),I4=async n=>await CT(Cy.ABOUT,n),kT=async()=>await TT(Cy.EDUCATION),k4=async n=>await CT(Cy.EDUCATION,n),lB=()=>{const{t:n,language:e,getContent:t}=ms(),{settings:r,loading:a}=iu(),[o,c]=W.useState(null),[u,h]=W.useState(!0);return W.useEffect(()=>{(async()=>{try{h(!0);const g=await IT();c(g)}catch(g){console.error("Error loading about content:",g),c(null)}finally{h(!1)}})()},[]),u||a?s.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gradient-to-br from-orange-50 via-blue-50 to-green-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-orange-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"Loading..."})]})}):r?o?s.jsxs("div",{className:"overflow-hidden",children:[s.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-orange-600 via-white to-green-600 py-16 md:py-24",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')]"})}),s.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:s.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[s.jsx("div",{className:"inline-block mb-6 p-4 bg-white rounded-full shadow-2xl",children:s.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-orange-600 via-blue-900 to-green-600 rounded-full flex items-center justify-center",children:s.jsx(sd,{className:"text-white w-8 h-8 md:w-10 md:h-10"})})}),s.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-6 text-gray-900",children:[e==="en"?"About":"",s.jsx("span",{className:"block mt-2 bg-gradient-to-r from-orange-600 via-blue-900 to-green-600 bg-clip-text text-transparent",children:t(r.panchayatName)})]}),s.jsxs("div",{className:"w-32 h-1 mx-auto mb-6 flex rounded-full overflow-hidden shadow-lg",children:[s.jsx("div",{className:"flex-1 bg-orange-600"}),s.jsx("div",{className:"flex-1 bg-white"}),s.jsx("div",{className:"flex-1 bg-green-600"})]}),s.jsx("p",{className:"text-lg md:text-xl text-gray-700 leading-relaxed",children:t(o.description)})]})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:s.jsx("svg",{viewBox:"0 0 1440 120",className:"w-full h-12 md:h-16 fill-current text-white",children:s.jsx("path",{d:"M0,64L48,69.3C96,75,192,85,288,80C384,75,480,53,576,48C672,43,768,53,864,58.7C960,64,1056,64,1152,58.7C1248,53,1344,43,1392,37.3L1440,32L1440,120L1392,120C1344,120,1248,120,1152,120C1056,120,960,120,864,120C768,120,672,120,576,120C480,120,384,120,288,120C192,120,96,120,48,120L0,120Z"})})})]}),s.jsx("section",{className:"py-12 md:py-16 bg-white",children:s.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"max-w-6xl mx-auto",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8",children:[s.jsxs("div",{className:"group relative bg-gradient-to-br from-orange-500 to-orange-600 text-white p-8 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-500"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx(Us,{size:40,className:"mb-4 group-hover:scale-110 transition-transform"}),s.jsx("div",{className:"text-4xl md:text-5xl font-bold mb-2",children:o.population}),s.jsx("div",{className:"text-white/90 text-lg",children:e==="en"?"Population":""})]})]}),s.jsxs("div",{className:"group relative bg-gradient-to-br from-green-600 to-green-700 text-white p-8 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-500"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx(xl,{size:40,className:"mb-4 group-hover:scale-110 transition-transform"}),s.jsx("div",{className:"text-4xl md:text-5xl font-bold mb-2",children:o.area}),s.jsx("div",{className:"text-white/90 text-lg",children:e==="en"?"Area":""})]})]}),s.jsxs("div",{className:"group relative bg-gradient-to-br from-blue-600 to-blue-700 text-white p-8 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-500"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx(GU,{size:40,className:"mb-4 group-hover:scale-110 transition-transform"}),s.jsx("div",{className:"text-4xl md:text-5xl font-bold mb-2",children:o.households}),s.jsx("div",{className:"text-white/90 text-lg",children:e==="en"?"Households":""})]})]})]})})})}),(o.history||o.vision||o.mission)&&s.jsx("section",{className:"py-12 md:py-16 lg:py-20 bg-gradient-to-br from-gray-50 via-blue-50/30 to-orange-50/30",children:s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-10 md:mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-3",children:e==="en"?"Our Journey":" "}),s.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-orange-600 to-green-600 mx-auto rounded-full"})]}),s.jsxs("div",{className:"max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8",children:[o.history&&s.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border-t-4 border-orange-600",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center",children:s.jsx(Zr,{className:"text-orange-600",size:24})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:e==="en"?"History":""})]}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:t(o.history)})]}),o.vision&&s.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border-t-4 border-green-600",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:s.jsx(xi,{className:"text-green-600",size:24})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:e==="en"?"Vision":""})]}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:t(o.vision)})]}),o.mission&&s.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border-t-4 border-blue-600",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:s.jsx(ST,{className:"text-blue-600",size:24})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:e==="en"?"Mission":""})]}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:t(o.mission)})]})]})]})}),o.importantPlaces&&o.importantPlaces.length>0&&s.jsxs("section",{className:"py-12 md:py-16 lg:py-20 bg-gradient-to-br from-blue-900 via-blue-800 to-blue-900 text-white relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')]"})}),s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[s.jsxs("div",{className:"text-center mb-10 md:mb-12",children:[s.jsx(Os,{className:"w-12 h-12 mx-auto mb-4 text-orange-400"}),s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-3",children:e==="en"?"Important Places":" "}),s.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-orange-400 to-green-400 mx-auto rounded-full"})]}),s.jsx("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:o.importantPlaces.map((f,g)=>s.jsxs("div",{className:"group bg-white/10 backdrop-blur-sm rounded-2xl overflow-hidden hover:bg-white/20 transition-all duration-300 transform hover:-translate-y-2 hover:shadow-2xl border border-white/20",children:[f.photoUrl&&s.jsx("div",{className:"h-48 overflow-hidden",children:s.jsx("img",{src:f.photoUrl,alt:t(f.name),className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"})}),!f.photoUrl&&s.jsx("div",{className:"h-48 bg-gradient-to-br from-orange-400 to-green-400 flex items-center justify-center",children:s.jsx(xl,{size:64,className:"text-white opacity-50"})}),s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-xl font-bold mb-3 text-white",children:t(f.name)}),s.jsx("p",{className:"text-white/80 leading-relaxed",children:t(f.description)})]})]},f.id))})]})]})]}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-16",children:s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[s.jsx(sd,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:e==="en"?"No About Information Available":"   "}),s.jsx("p",{className:"text-gray-600",children:e==="en"?"About page content has not been added yet.":"     ."})]})}):null},R4=()=>Zc(),cB=(n,e,t=null)=>t?`${R4()}/${n}/${t}/${e}`:`${R4()}/${n}/${e}`;async function Wg(n,e,t=null,r=null){try{const a=t||`${Date.now()}_${n.name}`,o=cB(e,a,r),c=_y(Sy,o),u=await eF(c,n);return await rT(u.ref)}catch(a){throw console.error("Error uploading image:",a),a}}async function Kg(n){try{const e=uB(n);if(!e)throw new Error("Invalid file URL");const t=_y(Sy,e);return await sT(t),!0}catch(e){throw console.error("Error deleting image:",e),e}}function uB(n){try{if(!n.startsWith("https://firebasestorage.googleapis.com/v0/b/"))return null;const t=n.split("/o/")[1]?.split("?")[0];return t?decodeURIComponent(t):null}catch(e){return console.error("Error extracting path:",e),null}}async function RT(n,e){try{const t=Array.from(n).map(r=>Wg(r,e));return await Promise.all(t)}catch(t){throw console.error("Error uploading multiple images:",t),t}}const yw=async()=>{try{const n=Ht(Ke,$t.members()),e=Es(n,lc("position","asc")),t=await Nr(e),r=[];return t.forEach(a=>{r.push({id:a.id,...a.data()})}),r}catch(n){throw console.error("Error fetching members:",n),n}},bw=async n=>{try{const e=St(Ke,$t.members(),n),t=await zs(e);return t.exists()?{id:t.id,...t.data()}:null}catch(e){throw console.error("Error fetching member:",e),e}},dB=async(n,e=null)=>{try{let t=n.photo||"";e&&(t=await Wg(e,"members"));const r=Ht(Ke,$t.members()),a=await vs(r,{...n,photo:t,createdAt:gt.now(),updatedAt:gt.now()});return console.log("Member created successfully with ID:",a.id),a.id}catch(t){throw console.error("Error creating member:",t),t}},hB=async(n,e,t=null)=>{try{let r=e.photo||"";if(t){const o=await bw(n);if(o&&o.photo)try{await Kg(o.photo)}catch(c){console.warn("Failed to delete old photo:",c)}r=await Wg(t,"members")}const a=St(Ke,$t.members(),n);return await po(a,{...e,photo:r,updatedAt:gt.now()}),console.log("Member updated successfully:",n),n}catch(r){throw console.error("Error updating member:",r),r}},fB=async n=>{try{const e=await bw(n);if(e&&e.photo)try{await Kg(e.photo)}catch(r){console.warn("Failed to delete member photo:",r)}const t=St(Ke,$t.members(),n);return await Bo(t),console.log("Member deleted successfully:",n),!0}catch(e){throw console.error("Error deleting member:",e),e}},mB=()=>{const{t:n,getContent:e}=ms(),{settings:t,loading:r}=iu(),[a,o]=W.useState([]),[c,u]=W.useState(!0);W.useEffect(()=>{(async()=>{try{u(!0);const b=await yw();o(Array.isArray(b)?b:[])}catch(b){console.error("Error loading members:",b),o([])}finally{u(!1)}})()},[]);const h=a.filter(v=>v.type==="SARPANCH"),f=a.filter(v=>v.type==="UPSARPANCH"),g=a.filter(v=>v.type==="MEMBER"),x=a.filter(v=>v.type==="STAFF");return c||r?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary-600"})}):t?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsxs("section",{className:"relative bg-gradient-to-br from-orange-600 via-white to-green-600 py-20",children:[s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm"}),s.jsx("div",{className:"container-custom relative z-10",children:s.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[s.jsxs("div",{className:"inline-flex items-center gap-3 mb-6 px-6 py-3 bg-gradient-to-r from-orange-600 to-green-600 rounded-full shadow-lg",children:[s.jsx(gl,{className:"text-white",size:28}),s.jsx("span",{className:"text-white font-bold text-xl",children:"Gram Panchayat"})]}),s.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-orange-600 to-green-600 bg-clip-text text-transparent",children:n("nav.panchayat")}),s.jsx("p",{className:"text-xl text-gray-700 leading-relaxed",children:"Meet our elected representatives and dedicated office staff committed to serving our community"}),s.jsxs("div",{className:"mt-8 flex items-center justify-center gap-8 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-orange-600 rounded-full"}),s.jsx("span",{children:"Saffron - Courage & Sacrifice"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-600 rounded-full"}),s.jsx("span",{children:"Green - Growth & Prosperity"})]})]})]})})]}),s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(gl,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:"Office Information"}),s.jsx("p",{className:"text-gray-600",children:"Your gateway to local governance and public services"})]}),s.jsx("div",{className:"max-w-6xl mx-auto",children:s.jsx("div",{className:"bg-gradient-to-br from-orange-50 via-white to-green-50 rounded-2xl shadow-xl overflow-hidden border border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-0",children:[s.jsxs("div",{className:"relative h-80 lg:h-auto",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-600/20 to-green-600/20"}),s.jsx("img",{src:t.officePhoto||"https://via.placeholder.com/600x400",alt:"Gram Panchayat Office",className:"w-full h-full object-cover"}),s.jsxs("div",{className:"absolute bottom-6 left-6 right-6 bg-white/90 backdrop-blur-sm rounded-lg p-4",children:[s.jsx("p",{className:"text-sm font-semibold text-blue-900",children:"Government of India"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Serving the community since establishment"})]})]}),s.jsxs("div",{className:"p-8 lg:p-12 space-y-6",children:[s.jsxs("div",{className:"flex gap-4 group",children:[s.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-orange-600 to-orange-700 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform",children:s.jsx(xl,{className:"text-white",size:24})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-lg mb-2 text-blue-900",children:"Office Address"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:e(t.contact.address)})]})]}),s.jsxs("div",{className:"flex gap-4 group",children:[s.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-900 to-blue-800 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform",children:s.jsx(Jf,{className:"text-white",size:24})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-lg mb-2 text-blue-900",children:"Working Hours"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:e(t.officeTimings)})]})]}),s.jsxs("div",{className:"flex gap-4 group",children:[s.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-green-600 to-green-700 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform",children:s.jsx(co,{className:"text-white",size:24})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-lg mb-2 text-blue-900",children:"Contact Details"}),s.jsx("p",{className:"text-gray-700 mb-1",children:s.jsx("a",{href:`tel:${t.contact.phone}`,className:"hover:text-orange-600 transition-colors",children:t.contact.phone})}),s.jsx("p",{className:"text-gray-700",children:s.jsxs("a",{href:`mailto:${t.contact.email}`,className:"hover:text-orange-600 transition-colors flex items-center gap-2",children:[s.jsx(go,{size:16}),t.contact.email]})})]})]})]})]})})})]})}),h.length>0&&s.jsx("section",{className:"py-16 bg-gradient-to-br from-orange-50 via-white to-green-50",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(sd,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:e(h[0].designation)}),s.jsx("p",{className:"text-gray-600",children:"Head of the Gram Panchayat"})]}),s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden border-t-4 border-orange-600",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-green-600 h-2"}),s.jsx("div",{className:"p-8 md:p-12",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center md:items-start",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-orange-600 to-green-600 rounded-full opacity-20 blur-xl"}),s.jsx("div",{className:"relative w-56 h-56 rounded-full border-8 border-white shadow-2xl overflow-hidden bg-gradient-to-br from-orange-100 to-green-100 flex items-center justify-center",children:h[0].photo?s.jsx("img",{src:h[0].photo,alt:e(h[0].name),className:"w-full h-full object-cover"}):s.jsx(jf,{size:140,className:"text-gray-400"})}),s.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 bg-gradient-to-r from-orange-600 to-green-600 text-white px-6 py-2 rounded-full shadow-lg text-sm font-bold",children:"SARPANCH"})]}),s.jsxs("div",{className:"flex-1 text-center md:text-left space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-3xl font-bold text-blue-900 mb-2",children:e(h[0].name)}),s.jsx("p",{className:"text-xl text-orange-600 font-semibold mb-1",children:e(h[0].designation)})]}),s.jsxs("div",{className:"inline-flex items-center gap-3 bg-gradient-to-r from-orange-50 to-green-50 px-6 py-3 rounded-xl border border-orange-200",children:[s.jsx(co,{size:20,className:"text-orange-600"}),s.jsx("a",{href:`tel:${h[0].phone}`,className:"text-blue-900 hover:text-orange-600 transition-colors font-semibold",children:h[0].phone})]}),h[0].termStart&&s.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:[s.jsx("p",{className:"text-sm text-blue-900 font-semibold mb-1",children:"Current Term"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[new Date(h[0].termStart).getFullYear()," - ",new Date(h[0].termEnd).getFullYear()]})]}),s.jsx("div",{className:"pt-4 border-t border-gray-200",children:s.jsx("p",{className:"text-sm text-gray-600 italic leading-relaxed",children:'"Committed to the development and welfare of our village community"'})})]})]})})]})})]})}),f.length>0&&s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(sd,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:e(f[0].designation)}),s.jsx("p",{className:"text-gray-600",children:"Vice-Head of the Gram Panchayat"})]}),s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"bg-gradient-to-br from-orange-50 via-white to-green-50 rounded-2xl shadow-2xl overflow-hidden border-t-4 border-green-600",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-600 to-orange-600 h-2"}),s.jsx("div",{className:"p-8 md:p-12",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center md:items-start",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-green-600 to-orange-600 rounded-full opacity-20 blur-xl"}),s.jsx("div",{className:"relative w-56 h-56 rounded-full border-8 border-white shadow-2xl overflow-hidden bg-gradient-to-br from-green-100 to-orange-100 flex items-center justify-center",children:f[0].photo?s.jsx("img",{src:f[0].photo,alt:e(f[0].name),className:"w-full h-full object-cover"}):s.jsx(jf,{size:140,className:"text-gray-400"})}),s.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 bg-gradient-to-r from-green-600 to-orange-600 text-white px-6 py-2 rounded-full shadow-lg text-sm font-bold",children:"UP-SARPANCH"})]}),s.jsxs("div",{className:"flex-1 text-center md:text-left space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-3xl font-bold text-blue-900 mb-2",children:e(f[0].name)}),s.jsx("p",{className:"text-xl text-green-600 font-semibold mb-1",children:e(f[0].designation)})]}),s.jsxs("div",{className:"inline-flex items-center gap-3 bg-gradient-to-r from-green-50 to-orange-50 px-6 py-3 rounded-xl border border-green-200",children:[s.jsx(co,{size:20,className:"text-green-600"}),s.jsx("a",{href:`tel:${f[0].phone}`,className:"text-blue-900 hover:text-green-600 transition-colors font-semibold",children:f[0].phone})]}),f[0].termStart&&s.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:[s.jsx("p",{className:"text-sm text-blue-900 font-semibold mb-1",children:"Current Term"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[new Date(f[0].termStart).getFullYear()," - ",new Date(f[0].termEnd).getFullYear()]})]}),s.jsx("div",{className:"pt-4 border-t border-gray-200",children:s.jsx("p",{className:"text-sm text-gray-600 italic leading-relaxed",children:'"Supporting the vision of progress and prosperity for our community"'})})]})]})})]})})]})}),g.length>0&&s.jsx("section",{className:"py-16 bg-gradient-to-br from-orange-50 via-white to-green-50",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(Us,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:"Gram Panchayat Members"}),s.jsx("p",{className:"text-gray-600",children:"Elected representatives serving our community"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:g.map((v,b)=>s.jsxs("div",{className:"group bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border-t-4 border-orange-600 hover:scale-105",children:[s.jsx("div",{className:"h-1 bg-gradient-to-r from-orange-600 to-green-600"}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"relative mb-6",children:[s.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-orange-600 to-green-600 rounded-full opacity-0 group-hover:opacity-20 blur-lg transition-opacity"}),s.jsx("div",{className:"relative w-32 h-32 mx-auto rounded-full border-4 border-white shadow-xl overflow-hidden bg-gradient-to-br from-orange-100 to-green-100 flex items-center justify-center",children:v.photo?s.jsx("img",{src:v.photo,alt:e(v.name),className:"w-full h-full object-cover"}):s.jsx(jf,{size:80,className:"text-gray-400"})}),s.jsx("div",{className:"absolute -top-2 -right-2 w-10 h-10 bg-gradient-to-r from-orange-600 to-green-600 rounded-full flex items-center justify-center text-white font-bold shadow-lg",children:b+1})]}),s.jsxs("div",{className:"text-center space-y-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-1 group-hover:text-orange-600 transition-colors",children:e(v.name)}),s.jsx("p",{className:"text-orange-600 font-semibold text-sm",children:e(v.designation)})]}),s.jsx("div",{className:"pt-3 border-t border-gray-200",children:s.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-orange-50 to-green-50 px-4 py-2 rounded-lg border border-orange-200",children:[s.jsx(co,{size:16,className:"text-orange-600"}),s.jsx("a",{href:`tel:${v.phone}`,className:"text-blue-900 hover:text-orange-600 transition-colors text-sm font-medium",children:v.phone})]})})]})]})]},v.id))})]})}),x.length>0&&s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(gl,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:"Office Staff"}),s.jsx("p",{className:"text-gray-600",children:"Dedicated professionals serving the public"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:x.map((v,b)=>s.jsxs("div",{className:"group bg-gradient-to-br from-green-50 via-white to-orange-50 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border-t-4 border-green-600 hover:scale-105",children:[s.jsx("div",{className:"h-1 bg-gradient-to-r from-green-600 to-orange-600"}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"relative mb-6",children:[s.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-green-600 to-orange-600 rounded-full opacity-0 group-hover:opacity-20 blur-lg transition-opacity"}),s.jsx("div",{className:"relative w-32 h-32 mx-auto rounded-full border-4 border-white shadow-xl overflow-hidden bg-gradient-to-br from-green-100 to-orange-100 flex items-center justify-center",children:v.photo?s.jsx("img",{src:v.photo,alt:e(v.name),className:"w-full h-full object-cover"}):s.jsx(jf,{size:80,className:"text-gray-400"})}),s.jsx("div",{className:"absolute -top-2 -right-2 w-10 h-10 bg-gradient-to-r from-green-600 to-orange-600 rounded-full flex items-center justify-center text-white font-bold shadow-lg",children:b+1})]}),s.jsxs("div",{className:"text-center space-y-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-1 group-hover:text-green-600 transition-colors",children:e(v.name)}),s.jsx("p",{className:"text-green-600 font-semibold text-sm",children:e(v.designation)})]}),s.jsx("div",{className:"pt-3 border-t border-gray-200",children:s.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-green-50 to-orange-50 px-4 py-2 rounded-lg border border-green-200",children:[s.jsx(co,{size:16,className:"text-green-600"}),s.jsx("a",{href:`tel:${v.phone}`,className:"text-blue-900 hover:text-green-600 transition-colors text-sm font-medium",children:v.phone})]})})]})]})]},v.id))})]})})]}):null},vw=async()=>{try{const n=Ht(Ke,$t.services()),e=Es(n,lc("name.en","asc")),t=await Nr(e),r=[];return t.forEach(a=>{r.push({id:a.id,...a.data()})}),r}catch(n){throw console.error("Error fetching services:",n),n}},gB=async n=>{try{const e=St(Ke,$t.services(),n),t=await zs(e);return t.exists()?{id:t.id,...t.data()}:null}catch(e){throw console.error("Error fetching service:",e),e}},pB=async n=>{try{const e=Ht(Ke,$t.services()),t=await vs(e,{...n,createdAt:gt.now(),updatedAt:gt.now()});return console.log("Service created successfully with ID:",t.id),t.id}catch(e){throw console.error("Error creating service:",e),e}},xB=async(n,e)=>{try{const t=St(Ke,$t.services(),n);return await po(t,{...e,updatedAt:gt.now()}),console.log("Service updated successfully:",n),n}catch(t){throw console.error("Error updating service:",t),t}},yB=async n=>{try{const e=St(Ke,$t.services(),n);return await Bo(e),console.log("Service deleted successfully:",n),!0}catch(e){throw console.error("Error deleting service:",e),e}},bB=()=>{const{t:n,getContent:e}=ms(),[t,r]=W.useState(""),[a,o]=W.useState("All"),[c,u]=W.useState([]),[h,f]=W.useState(!0);W.useEffect(()=>{(async()=>{try{f(!0);const b=await vw();u(Array.isArray(b)?b:[])}catch(b){console.error("Error loading services:",b),u([])}finally{f(!1)}})()},[]);const g=["All","Certificate","Tax","NOC","Other"],x=c.filter(v=>{const b=e(v.name).toLowerCase().includes(t.toLowerCase()),T=a==="All"||v.category===a;return b&&T});return h?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary-600"})}):s.jsxs("div",{children:[s.jsx("section",{className:"bg-gradient-to-r from-primary-600 to-primary-800 text-white py-16",children:s.jsxs("div",{className:"container-custom",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:n("nav.services")}),s.jsx("p",{className:"text-xl text-primary-100",children:"Explore various services provided by Gram Panchayat"})]})}),s.jsx("section",{className:"py-12",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"mb-8 flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(Hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:n("common.search"),value:t,onChange:v=>r(v.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:g.map(v=>s.jsx("button",{onClick:()=>o(v),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a===v?"bg-primary-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:v},v))})]}),c.length===0?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-500 text-lg",children:n("common.language")==="en"?"No services have been added yet.":"     ."})}):x.length===0?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-500 text-lg",children:n("common.noResults")})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:x.map(v=>s.jsxs("div",{className:"card p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:e(v.name)}),s.jsx("span",{className:"px-3 py-1 bg-primary-100 text-primary-700 text-sm font-medium rounded-full",children:v.category})]}),s.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:e(v.description)}),s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Fees: "}),s.jsx("span",{className:"font-semibold text-gray-700",children:v.fees})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Time: "}),s.jsx("span",{className:"font-semibold text-gray-700",children:v.processingTime})]})]}),s.jsxs(_n,{to:`/services/${v.id}`,className:"mt-4 inline-flex items-center gap-1 text-primary-600 hover:text-primary-700 font-medium",children:[n("common.viewDetails"),s.jsx(Ay,{size:16})]})]},v.id))})]})})]})},ww=async()=>{try{const n=Ht(Ke,$t.schemes()),e=Es(n,lc("name.en","asc")),t=await Nr(e),r=[];return t.forEach(a=>{r.push({id:a.id,...a.data()})}),r}catch(n){throw console.error("Error fetching schemes:",n),n}},vB=async n=>{try{const e=St(Ke,$t.schemes(),n),t=await zs(e);return t.exists()?{id:t.id,...t.data()}:null}catch(e){throw console.error("Error fetching scheme:",e),e}},wB=async n=>{try{const e=Ht(Ke,$t.schemes()),t=await vs(e,{...n,createdAt:gt.now(),updatedAt:gt.now()});return console.log("Scheme created successfully with ID:",t.id),t.id}catch(e){throw console.error("Error creating scheme:",e),e}},NB=async(n,e)=>{try{const t=St(Ke,$t.schemes(),n);return await po(t,{...e,updatedAt:gt.now()}),console.log("Scheme updated successfully:",n),n}catch(t){throw console.error("Error updating scheme:",t),t}},jB=async n=>{try{const e=St(Ke,$t.schemes(),n);return await Bo(e),console.log("Scheme deleted successfully:",n),!0}catch(e){throw console.error("Error deleting scheme:",e),e}},_B=()=>{const{t:n,getContent:e}=ms(),[t,r]=W.useState(""),[a,o]=W.useState("All"),[c,u]=W.useState("All"),[h,f]=W.useState([]),[g,x]=W.useState(!0);W.useEffect(()=>{(async()=>{try{x(!0);const j=await ww();f(Array.isArray(j)?j:[])}catch(j){console.error("Error loading schemes:",j),f([])}finally{x(!1)}})()},[]);const v=["All","CENTRAL","STATE","LOCAL","OTHER"],b=["All","ACTIVE","CLOSED","UPCOMING"],T=h.filter(E=>{const j=e(E.name).toLowerCase().includes(t.toLowerCase()),S=a==="All"||E.category===a,D=c==="All"||E.status===c;return j&&S&&D});return g?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary-600"})}):s.jsxs("div",{children:[s.jsx("section",{className:"bg-gradient-to-r from-primary-600 to-primary-800 text-white py-16",children:s.jsxs("div",{className:"container-custom",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:n("nav.schemes")}),s.jsx("p",{className:"text-xl text-primary-100",children:"Government schemes and welfare programs for villagers"})]})}),s.jsx("section",{className:"py-12",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"mb-8 space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:n("common.search"),value:t,onChange:E=>r(E.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex gap-2 flex-wrap",children:v.map(E=>s.jsx("button",{onClick:()=>o(E),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a===E?"bg-primary-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:E},E))}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:b.map(E=>s.jsx("button",{onClick:()=>u(E),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c===E?"bg-secondary-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:E},E))})]})]}),h.length===0?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-500 text-lg",children:n("common.language")==="en"?"No schemes have been added yet.":"     ."})}):T.length===0?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-500 text-lg",children:n("common.noResults")})}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:T.map(E=>s.jsxs("div",{className:"card p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-800 flex-1",children:e(E.name)}),s.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[s.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm font-medium rounded-full",children:E.category}),s.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${E.status==="ACTIVE"?"bg-green-100 text-green-700":E.status==="CLOSED"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:E.status})]})]}),s.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3",children:e(E.description)}),s.jsxs(_n,{to:`/schemes/${E.id}`,className:"inline-flex items-center gap-1 text-primary-600 hover:text-primary-700 font-medium",children:[n("common.viewDetails"),s.jsx(Ay,{size:16})]})]},E.id))})]})})]})},SB="forms",Nw=async()=>{try{const n=Ht(Ke,$t.forms()),e=Es(n,lc("createdAt","desc")),t=await Nr(e),r=[];return t.forEach(a=>{r.push({id:a.id,...a.data()})}),console.log(`Loaded ${r.length} forms from Firebase`),r}catch(n){throw console.error("Error loading forms:",n),n}},EB=async n=>{try{const e=St(Ke,$t.forms(),n),t=await zs(e);if(t.exists())return{id:t.id,...t.data()};throw new Error("Form not found")}catch(e){throw console.error("Error loading form:",e),e}},PT=async(n,e,t=null)=>{try{if(n.type!=="application/pdf")throw new Error("Only PDF files are allowed");const r=10*1024*1024;if(n.size>r)throw new Error("File size must be less than 10MB");const a=`${Date.now()}_${n.name}`,o=_y(Sy,`${SB}/${e}/${a}`),c=tF(o,n);return new Promise((u,h)=>{c.on("state_changed",f=>{const g=f.bytesTransferred/f.totalBytes*100;console.log(`Upload progress: ${g}%`),t&&t(g)},f=>{console.error("Error uploading PDF:",f),h(f)},async()=>{const f=await rT(c.snapshot.ref);console.log("PDF uploaded successfully:",f),u(f)})})}catch(r){throw console.error("Error in uploadPDF:",r),r}},LT=async n=>{try{if(!n){console.log("No file URL provided, skipping deletion");return}const e=n.split("/o/");if(e.length<2){console.warn("Invalid file URL format");return}const t=e[1],r=decodeURIComponent(t.split("?")[0]),a=_y(Sy,r);await sT(a),console.log("PDF deleted from storage:",r)}catch(e){if(e.code==="storage/object-not-found")console.log("File already deleted or does not exist");else throw console.error("Error deleting PDF:",e),e}},AB=async(n,e,t=null)=>{try{const r=Ht(Ke,$t.forms()),a={titleEn:n.titleEn||"",titleMr:n.titleMr||"",descriptionEn:n.descriptionEn||"",descriptionMr:n.descriptionMr||"",category:n.category||"General",language:n.language||"BOTH",fileUrl:"",fileName:e.name,fileSize:e.size,createdAt:Xt(),updatedAt:Xt()},o=await vs(r,a);console.log("Form document created with ID:",o.id);const c=await PT(e,o.id,t);return await po(o,{fileUrl:c}),console.log("Form updated with file URL"),o.id}catch(r){throw console.error("Error creating form:",r),r}},TB=async(n,e,t=null,r=null,a=null)=>{try{const o=St(Ke,$t.forms(),n),c={titleEn:e.titleEn||"",titleMr:e.titleMr||"",descriptionEn:e.descriptionEn||"",descriptionMr:e.descriptionMr||"",category:e.category||"General",language:e.language||"BOTH",updatedAt:Xt()};if(t){r&&await LT(r);const u=await PT(t,n,a);c.fileUrl=u,c.fileName=t.name,c.fileSize=t.size}await po(o,c),console.log("Form updated:",n)}catch(o){throw console.error("Error updating form:",o),o}},CB=async(n,e)=>{try{e&&await LT(e);const t=St(Ke,$t.forms(),n);await Bo(t),console.log("Form deleted:",n)}catch(t){throw console.error("Error deleting form:",t),t}},IB=()=>{const{language:n}=ms(),[e,t]=W.useState([]),[r,a]=W.useState(""),[o,c]=W.useState("ALL"),[u,h]=W.useState(!0);W.useEffect(()=>{(async()=>{try{h(!0);const E=await Nw();console.log("Fetched forms:",E),console.log("First form data:",E[0]),t(E)}catch(E){console.error("Error loading forms:",E),t([])}finally{h(!1)}})()},[]);const f=["ALL",...new Set(e.map(T=>T.category))],g=e.filter(T=>{const E=T.titleEn&&T.titleEn.toLowerCase().includes(r.toLowerCase())||T.titleMr&&T.titleMr.toLowerCase().includes(r.toLowerCase()),j=o==="ALL"||T.category===o;return E&&j}),x=T=>({Certificate:"from-blue-500 to-blue-600 border-blue-400",APPLICATION:"from-green-500 to-green-600 border-green-400",Tax:"from-orange-500 to-orange-600 border-orange-400",LICENSE:"from-purple-500 to-purple-600 border-purple-400",OTHER:"from-gray-500 to-gray-600 border-gray-400"})[T]||"from-gray-500 to-gray-600 border-gray-400",v=T=>({Certificate:"",APPLICATION:"",Tax:"",LICENSE:"",OTHER:""})[T]||"",b=T=>{console.log("Download clicked for form:",T),console.log("File URL:",T.fileUrl),T.fileUrl&&T.fileUrl.trim()!==""?window.open(T.fileUrl,"_blank"):(console.error("File URL is missing or empty for form:",T.id),alert(n==="en"?"Download link not available. Please contact administrator.":"   .    ."))};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[s.jsxs("section",{className:"relative bg-gradient-to-br from-orange-600 via-white to-green-600 py-20 overflow-hidden",children:[s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:[s.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-white rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-10 right-10 w-40 h-40 bg-blue-900 rounded-full blur-3xl"})]}),s.jsx("div",{className:"container-custom relative z-10",children:s.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/20 backdrop-blur-md px-6 py-3 rounded-full mb-6 border border-white/30 shadow-lg",children:[s.jsx(S4,{className:"text-blue-900",size:24}),s.jsx("span",{className:"text-blue-900 font-bold text-lg",children:n==="en"?"Document Center":" "})]}),s.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-6 text-blue-900 leading-tight",children:n==="en"?"Forms & Downloads":"  "}),s.jsx("p",{className:"text-xl md:text-2xl text-gray-700 mb-8 leading-relaxed",children:n==="en"?"Download application forms, certificates, and important documents with ease":" ,       "}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 max-w-2xl mx-auto",children:[s.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-4 shadow-lg border border-orange-200",children:[s.jsx("div",{className:"text-3xl font-bold text-orange-600",children:e.length}),s.jsx("div",{className:"text-sm text-gray-600 font-medium",children:n==="en"?"Total Forms":" "})]}),s.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-4 shadow-lg border border-green-200",children:[s.jsx("div",{className:"text-3xl font-bold text-green-600",children:f.length-1}),s.jsx("div",{className:"text-sm text-gray-600 font-medium",children:n==="en"?"Categories":""})]}),s.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-4 shadow-lg border border-blue-200 col-span-2 md:col-span-1",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:"24/7"}),s.jsx("div",{className:"text-sm text-gray-600 font-medium",children:n==="en"?"Available":""})]})]})]})}),s.jsx("div",{className:"absolute bottom-0 left-0 w-full",children:s.jsx("svg",{viewBox:"0 0 1440 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z",fill:"white"})})})]}),s.jsx("section",{className:"py-8 -mt-12 relative z-20",children:s.jsx("div",{className:"container-custom",children:s.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl border-t-4 border-orange-600",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"relative group",children:[s.jsx(Hi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-orange-500 group-focus-within:text-orange-600 transition-colors",size:22}),s.jsx("input",{type:"text",placeholder:n==="en"?"Search forms by name...":"  ...",value:r,onChange:T=>a(T.target.value),className:"w-full pl-12 pr-4 py-4 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-all text-gray-700 font-medium"})]}),s.jsxs("div",{className:"relative group",children:[s.jsx(Ty,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-green-600 group-focus-within:text-green-700 transition-colors z-10",size:22}),s.jsx("select",{value:o,onChange:T=>c(T.target.value),className:"w-full pl-12 pr-4 py-4 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-green-600 focus:ring-2 focus:ring-green-200 appearance-none bg-white transition-all text-gray-700 font-medium cursor-pointer",children:f.map(T=>s.jsx("option",{value:T,children:T==="ALL"?n==="en"?" All Categories":"  ":`${v(T)} ${T}`},T))}),s.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:s.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),r||o!=="ALL"?s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[s.jsx(Os,{size:16,className:"text-orange-500"}),s.jsx("span",{children:n==="en"?`Found ${g.length} form${g.length!==1?"s":""}`:`${g.length}  `})]})}):null]})})}),s.jsx("section",{className:"py-12",children:s.jsxs("div",{className:"container-custom",children:[u?s.jsxs("div",{className:"flex flex-col justify-center items-center py-20",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-20 w-20 border-b-4 border-t-4 border-orange-600"}),s.jsx(fr,{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-orange-600",size:32})]}),s.jsx("p",{className:"text-gray-600 font-semibold mt-6 text-lg",children:n==="en"?"Loading forms...":"   ..."})]}):g.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:g.map((T,E)=>s.jsxs("div",{className:"group relative bg-white rounded-2xl shadow-lg border-t-4 border-orange-600 overflow-hidden hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2",style:{animationDelay:`${E*50}ms`},children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-orange-100 to-green-100 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),s.jsx("div",{className:"relative bg-gradient-to-r from-blue-900 to-blue-800 p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-4 bg-white/20 backdrop-blur-sm rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:s.jsx(fr,{className:"text-white",size:32})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-bold text-white text-lg leading-tight mb-2 line-clamp-2",children:n==="en"?T.titleEn:T.titleMr||T.titleEn}),s.jsx("div",{className:"inline-flex items-center gap-2",children:s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold bg-gradient-to-r ${x(T.category)} text-white shadow-md border-2`,children:[v(T.category)," ",T.category]})})]})]})}),s.jsxs("div",{className:"relative p-6 space-y-4",children:[s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed line-clamp-3 min-h-[60px]",children:n==="en"?T.descriptionEn:T.descriptionMr||T.descriptionEn}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[T.language&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-semibold bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-md",children:[s.jsx(Cf,{size:14}),T.language]}),T.createdAt&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-semibold bg-gray-100 text-gray-700 border border-gray-300",children:[s.jsx(Zr,{size:14}),(()=>{try{return(T.createdAt?.toDate?T.createdAt.toDate():new Date(T.createdAt)).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Recent"}})()]})]}),s.jsxs("button",{onClick:()=>b(T),className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-orange-600 to-orange-500 text-white rounded-xl hover:from-orange-700 hover:to-orange-600 transition-all shadow-lg hover:shadow-xl font-bold text-sm group-hover:scale-105 transform duration-300",children:[s.jsx(zo,{size:20,className:"animate-bounce"}),s.jsx("span",{children:n==="en"?"Download Form":"  "}),s.jsx(Uc,{size:18,className:"group-hover:translate-x-1 transition-transform"})]})]}),T.fileName&&s.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-gray-100 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-600 flex-1 min-w-0",children:[s.jsx(MU,{size:14,className:"flex-shrink-0 text-blue-600"}),s.jsx("span",{className:"truncate font-medium",children:T.fileName})]}),T.fileSize&&s.jsxs("span",{className:"ml-3 text-gray-500 font-semibold bg-white px-2 py-1 rounded-md border border-gray-300",children:[(T.fileSize/1024).toFixed(1)," KB"]})]})}),s.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:s.jsx(Os,{className:"text-yellow-400",size:24})})]},T.id))}):s.jsxs("div",{className:"text-center py-20",children:[s.jsx("div",{className:"inline-block p-8 bg-gradient-to-br from-orange-50 to-green-50 rounded-full mb-6 border-4 border-orange-200",children:s.jsx(S4,{size:80,className:"text-orange-600"})}),s.jsx("h3",{className:"text-3xl font-bold text-gray-800 mb-3",children:n==="en"?"No Forms Available":"   "}),s.jsx("p",{className:"text-gray-600 text-lg max-w-md mx-auto",children:n==="en"?"Forms and documents will be displayed here once they are uploaded by the admin.":"         ."})]}),g.length>0&&s.jsxs("div",{className:"mt-16 bg-gradient-to-br from-blue-50 via-white to-green-50 border-2 border-blue-300 rounded-2xl p-8 shadow-xl",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[s.jsx("div",{className:"p-4 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl shadow-lg",children:s.jsx(I2,{className:"text-white",size:28})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-2",children:n==="en"?"How to Download & Submit Forms":"     "}),s.jsx("p",{className:"text-gray-600",children:n==="en"?"Follow these simple steps to complete your application":"        "})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"relative bg-white rounded-xl p-6 shadow-md border-t-4 border-orange-600 hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"absolute -top-4 left-6 w-12 h-12 bg-gradient-to-br from-orange-600 to-orange-700 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-lg",children:"1"}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(zo,{className:"text-orange-600",size:24}),s.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:n==="en"?"Download":""})]}),s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:n==="en"?'Click the "Download Form" button to get the PDF file on your device':'  PDF   "  "   '})]})]}),s.jsxs("div",{className:"relative bg-white rounded-xl p-6 shadow-md border-t-4 border-green-600 hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"absolute -top-4 left-6 w-12 h-12 bg-gradient-to-br from-green-600 to-green-700 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-lg",children:"2"}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(PU,{className:"text-green-600",size:24}),s.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:n==="en"?"Fill Form":" "})]}),s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:n==="en"?"Complete all required fields accurately and attach necessary documents":"         "})]})]}),s.jsxs("div",{className:"relative bg-white rounded-xl p-6 shadow-md border-t-4 border-blue-600 hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"absolute -top-4 left-6 w-12 h-12 bg-gradient-to-br from-blue-600 to-blue-700 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-lg",children:"3"}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(Gi,{className:"text-blue-600",size:24}),s.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:n==="en"?"Submit":" "})]}),s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:n==="en"?"Submit the completed form at the Gram Panchayat office during working hours":"        "})]})]})]}),s.jsx("div",{className:"mt-6 p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg",children:s.jsxs("p",{className:"text-sm text-yellow-800 flex items-start gap-2",children:[s.jsx(I2,{size:18,className:"flex-shrink-0 mt-0.5"}),s.jsx("span",{children:n==="en"?"For any assistance, please contact the Gram Panchayat office during working hours or call our helpline.":" ,            ."})]})})]})]})})]})},kB=()=>{const{t:n,language:e}=ms(),[t,r]=W.useState(null),[a,o]=W.useState(!0);return W.useEffect(()=>{(async()=>{try{o(!0);const u=await kT();r(u)}catch(u){console.error("Error loading education content:",u),r(null)}finally{o(!1)}})()},[]),a?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-[#ff6b00]"})}):t?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsxs("section",{className:"relative bg-gradient-to-br from-orange-600 via-white to-green-600 py-20",children:[s.jsx("div",{className:"absolute inset-0 bg-white/85 backdrop-blur-sm"}),s.jsx("div",{className:"container-custom relative z-10",children:s.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[s.jsxs("div",{className:"inline-flex items-center gap-3 mb-6 px-6 py-3 bg-gradient-to-r from-orange-600 to-green-600 rounded-full shadow-lg",children:[s.jsx(E4,{className:"text-white",size:32}),s.jsx("span",{className:"text-white font-bold text-xl",children:e==="en"?"Education":""})]}),s.jsx("h1",{className:"text-5xl font-bold mb-6 bg-gradient-to-r from-orange-600 to-green-600 bg-clip-text text-transparent",children:n("nav.education")}),s.jsx("p",{className:"text-xl text-gray-700 leading-relaxed",children:e==="en"?t.description.en:t.description.mr}),s.jsxs("div",{className:"mt-8 flex items-center justify-center gap-8 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-orange-600 rounded-full"}),s.jsx("span",{children:e==="en"?"Knowledge & Wisdom":"  "})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-600 rounded-full"}),s.jsx("span",{children:e==="en"?"Growth & Progress":"  "})]})]})]})})]}),s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(Xd,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:e==="en"?"Education at a Glance":"  "}),s.jsx("p",{className:"text-gray-600",children:"Key metrics and achievements in education"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"group bg-gradient-to-br from-blue-50 to-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all border-t-4 border-blue-600 hover:scale-105",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform",children:s.jsx(sd,{className:"text-white",size:32})}),s.jsx(Os,{className:"text-blue-300",size:24})]}),s.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:t.stats.literacyRate}),s.jsx("div",{className:"text-gray-700 font-semibold",children:e==="en"?"Literacy Rate":" "})]}),s.jsxs("div",{className:"group bg-gradient-to-br from-green-50 to-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all border-t-4 border-green-600 hover:scale-105",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-600 to-green-700 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform",children:s.jsx(Us,{className:"text-white",size:32})}),s.jsx(Os,{className:"text-green-300",size:24})]}),s.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:t.stats.totalStudents}),s.jsx("div",{className:"text-gray-700 font-semibold",children:e==="en"?"Total Students":" "})]}),s.jsxs("div",{className:"group bg-gradient-to-br from-orange-50 to-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all border-t-4 border-orange-600 hover:scale-105",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-600 to-orange-700 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform",children:s.jsx(E4,{className:"text-white",size:32})}),s.jsx(Os,{className:"text-orange-300",size:24})]}),s.jsx("div",{className:"text-4xl font-bold text-orange-600 mb-2",children:t.stats.totalTeachers}),s.jsx("div",{className:"text-gray-700 font-semibold",children:e==="en"?"Total Teachers":" "})]}),s.jsxs("div",{className:"group bg-gradient-to-br from-purple-50 to-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all border-t-4 border-purple-600 hover:scale-105",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-600 to-purple-700 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform",children:s.jsx(ST,{className:"text-white",size:32})}),s.jsx(Os,{className:"text-purple-300",size:24})]}),s.jsx("div",{className:"text-4xl font-bold text-purple-600 mb-2",children:t.stats.schoolDropoutRate}),s.jsx("div",{className:"text-gray-700 font-semibold",children:e==="en"?"Dropout Rate":"  "})]})]})]})}),t.schools.length>0&&s.jsx("section",{className:"py-16 bg-gradient-to-br from-orange-50 via-white to-green-50",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(R2,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:e==="en"?"Our Schools":" "}),s.jsx("p",{className:"text-gray-600",children:"Centers of excellence nurturing young minds"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:t.schools.map((c,u)=>s.jsxs("div",{className:"group bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-all overflow-hidden border-t-4 border-orange-600 hover:scale-105",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-green-600 h-2"}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex items-start justify-between mb-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-2 group-hover:text-orange-600 transition-colors",children:e==="en"?c.name.en:c.name.mr}),s.jsx("span",{className:"inline-block px-4 py-1 bg-gradient-to-r from-orange-100 to-green-100 text-orange-700 rounded-full text-sm font-semibold",children:e==="en"?c.type.en:c.type.mr})]}),s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-lg",children:u+1})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-xl text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:c.students}),s.jsx("div",{className:"text-xs text-gray-600 font-semibold",children:e==="en"?"Students":""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-xl text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:c.teachers}),s.jsx("div",{className:"text-xs text-gray-600 font-semibold",children:e==="en"?"Teachers":""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-4 rounded-xl text-center",children:[s.jsx("div",{className:"text-lg font-bold text-orange-600 mb-1",children:c.classes}),s.jsx("div",{className:"text-xs text-gray-600 font-semibold",children:e==="en"?"Classes":""})]})]}),s.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:e==="en"?c.description.en:c.description.mr}),s.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-green-50 p-6 rounded-xl border border-orange-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(sd,{className:"text-orange-600",size:20}),s.jsx("div",{className:"text-sm font-bold text-blue-900",children:e==="en"?"Facilities & Amenities":"  "})]}),s.jsx("div",{className:"text-sm text-gray-700 leading-relaxed",children:e==="en"?c.facilities.en:c.facilities.mr})]})]})]},c.id))})]})}),t.anganwadis.length>0&&s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(A2,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:e==="en"?"Anganwadi Centers":""}),s.jsx("p",{className:"text-gray-600",children:"Early childhood care and development"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:t.anganwadis.map((c,u)=>s.jsxs("div",{className:"group bg-gradient-to-br from-green-50 via-white to-orange-50 rounded-2xl shadow-xl hover:shadow-2xl transition-all overflow-hidden border-t-4 border-green-600 hover:scale-105",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-600 to-orange-600 h-2"}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex items-start justify-between mb-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-2 group-hover:text-green-600 transition-colors",children:e==="en"?c.name.en:c.name.mr}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full"}),s.jsx("span",{className:"font-semibold",children:e==="en"?c.location.en:c.location.mr})]})]}),s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-600 to-orange-600 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-lg",children:u+1})]}),s.jsx("div",{className:"bg-gradient-to-br from-green-100 to-orange-100 p-6 rounded-xl mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-green-600 mb-1",children:c.children}),s.jsx("div",{className:"text-xs text-gray-600 font-semibold",children:e==="en"?"Children":""})]}),s.jsx("div",{className:"w-px h-12 bg-gray-300"}),s.jsxs("div",{className:"text-center px-4",children:[s.jsx(A2,{className:"mx-auto text-orange-600 mb-1",size:28}),s.jsx("div",{className:"text-xs text-gray-600 font-semibold",children:e==="en"?"Age 0-6":" -"})]})]})}),s.jsxs("div",{className:"space-y-3 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3 bg-white p-3 rounded-lg border border-green-200",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-600 to-green-700 rounded-full flex items-center justify-center",children:s.jsx(Us,{className:"text-white",size:20})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 font-semibold",children:e==="en"?"Worker":""}),s.jsx("div",{className:"text-sm font-bold text-gray-800",children:e==="en"?c.worker.en:c.worker.mr})]})]}),s.jsxs("div",{className:"flex items-center gap-3 bg-white p-3 rounded-lg border border-orange-200",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-600 to-orange-700 rounded-full flex items-center justify-center",children:s.jsx(Us,{className:"text-white",size:20})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 font-semibold",children:e==="en"?"Helper":""}),s.jsx("div",{className:"text-sm font-bold text-gray-800",children:e==="en"?c.helper.en:c.helper.mr})]})]})]}),s.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:e==="en"?c.description.en:c.description.mr}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-orange-50 p-6 rounded-xl border border-green-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(sd,{className:"text-green-600",size:20}),s.jsx("div",{className:"text-sm font-bold text-blue-900",children:e==="en"?"Services Provided":"  "})]}),s.jsx("div",{className:"text-sm text-gray-700 leading-relaxed",children:e==="en"?c.services.en:c.services.mr})]})]})]},c.id))})]})}),t.programs.length>0&&s.jsx("section",{className:"py-16 bg-gradient-to-br from-orange-50 via-white to-green-50",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx($g,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:e==="en"?"Educational Programs":" "}),s.jsx("p",{className:"text-gray-600",children:"Empowering communities through learning initiatives"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.programs.map((c,u)=>s.jsxs("div",{className:"group bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-all overflow-hidden border-t-4 border-blue-600 hover:scale-105",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-2"}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex items-start justify-between mb-6",children:[s.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:s.jsx($g,{className:"text-white",size:24})}),s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center text-white font-bold shadow-lg",children:u+1})]}),s.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-4 group-hover:text-blue-600 transition-colors leading-snug",children:e==="en"?c.name.en:c.name.mr}),s.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:e==="en"?c.description.en:c.description.mr}),s.jsxs("div",{className:"space-y-3",children:[c.timing&&s.jsxs("div",{className:"flex items-start gap-3 bg-gradient-to-r from-blue-50 to-purple-50 p-3 rounded-lg border border-blue-200",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 font-semibold mb-1",children:e==="en"?"Timing":""}),s.jsx("div",{className:"text-sm text-gray-800 font-medium",children:e==="en"?c.timing.en:c.timing.mr})]})]}),c.participants&&s.jsxs("div",{className:"flex items-start gap-3 bg-gradient-to-r from-green-50 to-orange-50 p-3 rounded-lg border border-green-200",children:[s.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mt-2"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 font-semibold mb-1",children:e==="en"?"Participants":""}),s.jsx("div",{className:"text-sm text-gray-800 font-medium",children:c.participants})]})]}),c.beneficiaries&&s.jsxs("div",{className:"flex items-start gap-3 bg-gradient-to-r from-green-50 to-orange-50 p-3 rounded-lg border border-green-200",children:[s.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mt-2"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 font-semibold mb-1",children:e==="en"?"Beneficiaries":""}),s.jsx("div",{className:"text-sm text-gray-800 font-medium",children:c.beneficiaries})]})]}),c.coordinator&&s.jsxs("div",{className:"flex items-start gap-3 bg-gradient-to-r from-orange-50 to-purple-50 p-3 rounded-lg border border-orange-200",children:[s.jsx("div",{className:"w-2 h-2 bg-orange-600 rounded-full mt-2"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 font-semibold mb-1",children:e==="en"?"Coordinator":""}),s.jsx("div",{className:"text-sm text-gray-800 font-medium",children:e==="en"?c.coordinator.en:c.coordinator.mr})]})]})]})]})]},c.id))})]})})]}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-16",children:s.jsxs("div",{className:"container-custom text-center",children:[s.jsx(R2,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:e==="en"?"No Education Data Available":"   "}),s.jsx("p",{className:"text-gray-600",children:e==="en"?"Education information has not been added yet.":"     ."})]})})},jw=async()=>{try{const n=Es(Ht(Ke,$t.gallery()),lc("date","desc"));return(await Nr(n)).docs.map(t=>({id:t.id,...t.data(),date:t.data().date?.toDate?.()||new Date(t.data().date),createdAt:t.data().createdAt?.toDate?.()||new Date,updatedAt:t.data().updatedAt?.toDate?.()||new Date}))}catch(n){throw console.error("Error getting gallery programs:",n),new Error("Failed to fetch gallery programs")}},DT=async n=>{try{const e=St(Ke,$t.gallery(),n),t=await zs(e);if(!t.exists())throw new Error("Program not found");return{id:t.id,...t.data(),date:t.data().date?.toDate?.()||new Date(t.data().date),createdAt:t.data().createdAt?.toDate?.()||new Date,updatedAt:t.data().updatedAt?.toDate?.()||new Date}}catch(e){throw console.error("Error getting program:",e),new Error("Failed to fetch program")}},RB=async(n,e=[])=>{try{let t=[];if(e&&e.length>0){const o=`gallery/${Date.now()}`;t=await RT(e,o)}const r={titleEn:n.titleEn||"",titleMr:n.titleMr||"",descriptionEn:n.descriptionEn||"",descriptionMr:n.descriptionMr||"",date:gt.fromDate(new Date(n.date)),images:t,youtubeLink:n.youtubeLink||"",createdAt:Xt(),updatedAt:Xt()};return{id:(await vs(Ht(Ke,$t.gallery()),r)).id,...r,date:new Date(n.date),createdAt:new Date,updatedAt:new Date}}catch(t){throw console.error("Error creating program:",t),new Error("Failed to create gallery program")}},PB=async(n,e,t=[],r=[])=>{try{const a=St(Ke,$t.gallery(),n);let o=[];if(t&&t.length>0){const h=`gallery/${n}`;o=await RT(t,h)}const c=[...r,...o],u={titleEn:e.titleEn||"",titleMr:e.titleMr||"",descriptionEn:e.descriptionEn||"",descriptionMr:e.descriptionMr||"",date:gt.fromDate(new Date(e.date)),images:c,youtubeLink:e.youtubeLink||"",updatedAt:Xt()};return await po(a,u),{id:n,...u,date:new Date(e.date),updatedAt:new Date}}catch(a){throw console.error("Error updating program:",a),new Error("Failed to update gallery program")}},LB=async n=>{try{const e=await DT(n);e.images&&e.images.length>0&&await Promise.all(e.images.map(t=>Kg(t).catch(r=>{console.warn("Failed to delete image:",t,r)}))),await Bo(St(Ke,$t.gallery(),n))}catch(e){throw console.error("Error deleting program:",e),new Error("Failed to delete gallery program")}},g1=n=>{if(!n)return null;n=n.trim();const e=[/(?:youtube\.com\/watch\?v=)([^&\s]+)/,/(?:youtube\.com\/embed\/)([^?&\s]+)/,/(?:youtube\.com\/v\/)([^?&\s]+)/,/(?:youtu\.be\/)([^?&\s]+)/,/(?:youtube\.com\/watch\?.*&v=)([^&\s]+)/];for(const t of e){const r=n.match(t);if(r&&r[1])return r[1]}return null},DB=n=>`https://www.youtube.com/embed/${n}?rel=0&modestbranding=1`,MB=(n,e="hqdefault")=>`https://img.youtube.com/vi/${n}/${e}.jpg`,OB=()=>{const{language:n}=ms(),[e,t]=W.useState([]),[r,a]=W.useState(!0),[o,c]=W.useState(null),[u,h]=W.useState(0),[f,g]=W.useState(0);W.useEffect(()=>{x()},[]);const x=async()=>{try{a(!0);const B=(await jw()).sort((re,ae)=>new Date(ae.date)-new Date(re.date));t(B)}catch(O){console.error("Error loading gallery programs:",O),t([])}finally{a(!1)}},v=O=>new Date(O).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),b=(O,B)=>{c(O),h(B),g(0)},T=()=>{c(null),g(0)},E=()=>{if(!o)return;const O=S(o),B=f===0?O-1:f-1;g(B)},j=()=>{if(!o)return;const O=S(o),B=f===O-1?0:f+1;g(B)},S=O=>{const B=O.images&&O.images.length>0?O.images.length:0,re=O.youtubeLink&&g1(O.youtubeLink)?1:0;return B+re},D=(O,B)=>{if(!O)return!1;const re=O.images&&O.images.length>0?O.images.length:0;return B>=re};return W.useEffect(()=>{const O=B=>{if(!o)return;const re=S(o);B.key==="ArrowLeft"&&re>1&&E(),B.key==="ArrowRight"&&re>1&&j(),B.key==="Escape"&&T()};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[o,u,f]),s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsxs("section",{className:"relative bg-gradient-to-br from-orange-600 via-white to-green-600 py-20",children:[s.jsx("div",{className:"absolute inset-0 bg-white/85 backdrop-blur-sm"}),s.jsx("div",{className:"container-custom relative z-10",children:s.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[s.jsxs("div",{className:"inline-flex items-center gap-3 mb-6 px-6 py-3 bg-gradient-to-r from-orange-600 to-green-600 rounded-full shadow-lg",children:[s.jsx(j4,{className:"text-white",size:32}),s.jsx("span",{className:"text-white font-bold text-xl",children:n==="en"?"Photo Gallery":" "})]}),s.jsx("h1",{className:"text-5xl font-bold mb-6 bg-gradient-to-r from-orange-600 to-green-600 bg-clip-text text-transparent",children:n==="en"?"Visual Chronicles":" "}),s.jsx("p",{className:"text-xl text-gray-700 leading-relaxed",children:n==="en"?"Capturing moments of progress, celebration, and community spirit in our village":"  ,      "}),s.jsxs("div",{className:"mt-8 flex items-center justify-center gap-8 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-orange-600 rounded-full"}),s.jsx("span",{children:n==="en"?"Events & Programs":"  "})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-600 rounded-full"}),s.jsx("span",{children:n==="en"?"Development Activities":" "})]})]})]})})]}),s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(na,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:n==="en"?"Programs & Events":"  "}),s.jsx("p",{className:"text-gray-600",children:n==="en"?"Browse through our collection of memorable moments":"    "})]}),r?s.jsxs("div",{className:"flex flex-col justify-center items-center py-16",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-600 mb-4"}),s.jsx("p",{className:"text-gray-600 font-semibold",children:n==="en"?"Loading gallery...":"   ..."})]}):e.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map((O,B)=>{const re=O.youtubeLink?g1(O.youtubeLink):null,ae=re!==null,G=O.images&&O.images.length>0,M=ae?MB(re,"hqdefault"):G?O.images[0]:"https://via.placeholder.com/400x300?text=No+Media",k=(G?O.images.length:0)+(ae?1:0);return s.jsxs("div",{className:"group relative bg-white rounded-2xl shadow-xl overflow-hidden cursor-pointer transform transition-all duration-300 hover:scale-105 hover:shadow-2xl border-t-4 border-orange-600",onClick:()=>b(O,B),children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-green-600 h-2"}),s.jsxs("div",{className:"relative h-64 overflow-hidden bg-gradient-to-br from-orange-100 to-green-100",children:[s.jsx("img",{src:M,alt:n==="en"?O.titleEn:O.titleMr,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onError:L=>{L.target.src="https://via.placeholder.com/400x300?text=No+Media"}}),ae&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:s.jsx("div",{className:"w-20 h-20 bg-red-600/90 backdrop-blur-sm rounded-full flex items-center justify-center shadow-2xl transform transition-transform group-hover:scale-110",children:s.jsx("div",{className:"w-0 h-0 border-t-8 border-t-transparent border-l-12 border-l-white border-b-8 border-b-transparent ml-1"})})}),k>1&&s.jsx("div",{className:"absolute top-4 right-4 bg-gradient-to-r from-orange-600 to-green-600 text-white px-4 py-2 rounded-full text-sm font-bold flex items-center gap-2 shadow-lg",children:G&&ae?s.jsxs(s.Fragment,{children:[s.jsx(na,{size:16}),s.jsx("span",{children:O.images.length}),s.jsx(P2,{size:16}),s.jsx("span",{children:"1"})]}):G?s.jsxs(s.Fragment,{children:[s.jsx(na,{size:16}),s.jsxs("span",{children:[O.images.length," ",n==="en"?"Photos":""]})]}):null}),s.jsx("div",{className:"absolute top-4 left-4 w-12 h-12 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center text-blue-900 font-bold text-lg shadow-lg",children:B+1}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300 flex items-center justify-center",children:s.jsxs("div",{className:"text-white text-center p-6 transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300",children:[s.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(xi,{size:32})}),s.jsx("p",{className:"font-bold text-lg",children:n==="en"?"View Gallery":" "}),k>0&&s.jsxs("p",{className:"text-sm text-white/80 mt-1",children:[G&&`${O.images.length} ${n==="en"?"photos":""}`,G&&ae&&" + ",ae&&`1 ${n==="en"?"video":""}`]})]})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsx("h3",{className:"font-bold text-xl text-blue-900 mb-2 line-clamp-2 flex-1 group-hover:text-orange-600 transition-colors",children:n==="en"?O.titleEn:O.titleMr||O.titleEn}),s.jsx(Os,{className:"text-orange-500 flex-shrink-0 ml-2",size:20})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2 leading-relaxed",children:n==="en"?O.descriptionEn:O.descriptionMr||O.descriptionEn}),s.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-orange-50 to-green-50 px-4 py-2 rounded-lg border border-orange-200",children:[s.jsx(Zr,{size:16,className:"text-orange-600"}),s.jsx("span",{className:"text-sm font-semibold text-gray-700",children:v(O.date)})]})]})]},O.id)})}):s.jsxs("div",{className:"text-center py-16 bg-gradient-to-br from-orange-50 to-green-50 rounded-2xl border-2 border-dashed border-orange-300",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-orange-100 to-green-100 rounded-full mb-6",children:s.jsx(na,{size:48,className:"text-orange-600"})}),s.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-3",children:n==="en"?"No Photos Available":"   "}),s.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:n==="en"?"Photos and programs will be displayed here once they are uploaded by the admin.":"         ."})]})]})}),o&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-hidden",onClick:T,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/95 via-blue-900/80 to-black/95 backdrop-blur-sm"}),s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-orange-600/10 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-green-600/10 rounded-full blur-3xl"}),s.jsxs("div",{className:"relative max-w-7xl w-full max-h-[95vh] flex flex-col z-10",onClick:O=>O.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 bg-white/10 backdrop-blur-md rounded-2xl px-6 py-4 border border-white/20",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center shadow-lg",children:s.jsx(j4,{size:24,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-white font-bold text-xl",children:n==="en"?"Photo Gallery":" "}),s.jsx("p",{className:"text-white/70 text-sm",children:n==="en"?o.titleEn:o.titleMr||o.titleEn})]})]}),s.jsx("button",{onClick:T,className:"w-12 h-12 bg-white/10 hover:bg-red-600 backdrop-blur-sm text-white rounded-full flex items-center justify-center transition-all shadow-lg hover:shadow-red-500/50 hover:scale-110","aria-label":"Close",children:s.jsx(ni,{size:24})})]}),S(o)>1&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:O=>{O.stopPropagation(),E()},className:"absolute left-4 top-1/2 -translate-y-1/2 w-14 h-14 bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 backdrop-blur-sm text-white rounded-full flex items-center justify-center transition-all z-20 shadow-xl hover:scale-110","aria-label":"Previous Media",children:s.jsx(gU,{size:32})}),s.jsx("button",{onClick:O=>{O.stopPropagation(),j()},className:"absolute right-4 top-1/2 -translate-y-1/2 w-14 h-14 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 backdrop-blur-sm text-white rounded-full flex items-center justify-center transition-all z-20 shadow-xl hover:scale-110","aria-label":"Next Media",children:s.jsx(Ay,{size:32})})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center bg-gradient-to-br from-black/50 to-blue-900/30 backdrop-blur-md rounded-2xl mb-4 p-8 border border-white/20 shadow-2xl overflow-hidden",children:s.jsx("div",{className:"relative w-full",children:D(o,f)?s.jsxs("div",{className:"w-full max-w-5xl mx-auto",children:[s.jsxs("div",{className:"relative pb-[56.25%]",children:[" ",s.jsx("iframe",{src:DB(g1(o.youtubeLink)),title:`${n==="en"?o.titleEn:o.titleMr} - YouTube Video`,className:"absolute top-0 left-0 w-full h-full rounded-xl shadow-2xl",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})]}),s.jsxs("div",{className:"absolute top-4 right-4 bg-gradient-to-r from-red-600 to-red-700 text-white px-5 py-2 rounded-full font-bold text-lg shadow-xl flex items-center gap-2",children:[s.jsx(P2,{size:20}),s.jsx("span",{children:n==="en"?"YouTube Video":"YouTube "})]})]}):s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("img",{src:o.images[f],alt:`${n==="en"?o.titleEn:o.titleMr} - Image ${f+1}`,className:"max-w-full max-h-[60vh] object-contain rounded-xl shadow-2xl",onError:O=>{O.target.src="https://via.placeholder.com/800x600?text=No+Image"}}),o.images&&o.images.length>0&&s.jsxs("div",{className:"absolute top-4 right-4 bg-gradient-to-r from-orange-600 to-green-600 text-white px-5 py-2 rounded-full font-bold text-lg shadow-xl flex items-center gap-2",children:[s.jsx(na,{size:20}),s.jsxs("span",{children:[f+1," / ",o.images.length]})]})]})})}),s.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 text-white border border-white/20 shadow-2xl",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600/20 to-green-600/20 h-1 rounded-full mb-6"}),s.jsx("div",{className:"flex justify-between items-start mb-6",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center shadow-lg",children:s.jsx(Os,{size:20,className:"text-white"})}),s.jsx("h3",{className:"text-2xl font-bold text-white",children:n==="en"?o.titleEn:o.titleMr||o.titleEn})]}),s.jsx("p",{className:"text-white/80 mb-4 leading-relaxed pl-13",children:n==="en"?o.descriptionEn:o.descriptionMr||o.descriptionEn}),s.jsxs("div",{className:"flex items-center gap-3 bg-white/10 backdrop-blur-sm px-4 py-3 rounded-xl border border-white/20 w-fit",children:[s.jsx(Zr,{size:20,className:"text-orange-400"}),s.jsx("span",{className:"font-semibold",children:v(o.date)})]})]})}),o.images.length>1&&s.jsxs("div",{className:"border-t border-white/20 pt-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center",children:s.jsx(na,{size:16,className:"text-white"})}),s.jsx("h4",{className:"font-bold text-white",children:n==="en"?"All Photos":" "}),s.jsxs("span",{className:"text-white/60 text-sm",children:["(",o.images.length,")"]})]}),s.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-orange-600 scrollbar-track-white/10",children:o.images.map((O,B)=>s.jsxs("button",{onClick:re=>{re.stopPropagation(),g(B)},className:`relative flex-shrink-0 w-24 h-24 rounded-xl overflow-hidden transition-all group ${B===f?"ring-4 ring-orange-500 scale-110 shadow-xl shadow-orange-500/50":"ring-2 ring-white/30 hover:ring-white/60 hover:scale-105"}`,children:[s.jsx("img",{src:O,alt:`Thumbnail ${B+1}`,className:"w-full h-full object-cover",onError:re=>{re.target.src="https://via.placeholder.com/80x80?text=No+Image"}}),B===f&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-orange-600/50 to-transparent flex items-end justify-center pb-1",children:s.jsx("div",{className:"w-6 h-6 bg-white rounded-full flex items-center justify-center shadow-lg",children:s.jsx(xi,{size:14,className:"text-orange-600"})})}),s.jsx("div",{className:"absolute top-1 right-1 w-6 h-6 bg-black/70 backdrop-blur-sm rounded-full flex items-center justify-center text-white text-xs font-bold",children:B+1})]},B))})]})]}),s.jsxs("div",{className:"mt-3 flex items-center justify-center gap-6 text-white/50 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded border border-white/20",children:""}),s.jsx("span",{children:n==="en"?"Previous":""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded border border-white/20",children:""}),s.jsx("span",{children:n==="en"?"Next":""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded border border-white/20",children:"ESC"}),s.jsx("span",{children:n==="en"?"Close":" "})]})]})]})]})]})},MT=Ht(Ke,$t.financials()),OT=async()=>{try{const n=Es(MT,lc("transactionDate","desc")),e=await Nr(n),t=[];return e.forEach(r=>{const a=r.data();t.push({id:r.id,...a,transactionDate:a.transactionDate?.toDate?.()?.toISOString?.()||a.transactionDate,createdAt:a.createdAt?.toDate?.()?.toISOString?.()||a.createdAt,updatedAt:a.updatedAt?.toDate?.()?.toISOString?.()||a.updatedAt})}),t}catch(n){throw console.error("Error fetching financial records:",n),new Error("Failed to fetch financial records")}},FB=async n=>{try{const e=St(Ke,$t.financials(),n),t=await zs(e);if(t.exists()){const r=t.data();return{id:t.id,...r,transactionDate:r.transactionDate?.toDate?.()?.toISOString?.()||r.transactionDate,createdAt:r.createdAt?.toDate?.()?.toISOString?.()||r.createdAt,updatedAt:r.updatedAt?.toDate?.()?.toISOString?.()||r.updatedAt}}else throw new Error("Record not found")}catch(e){throw console.error("Error fetching record:",e),new Error("Failed to fetch record")}},UB=async n=>{try{if(!n.type||!n.category||!n.amount||!n.transactionDate)throw new Error("Missing required fields");const e=n.transactionDate instanceof Date?gt.fromDate(n.transactionDate):gt.fromDate(new Date(n.transactionDate)),t={type:n.type,category:n.category,subcategory:n.subcategory||"",subcategoryMr:n.subcategoryMr||"",amount:parseFloat(n.amount),description:n.description||"",descriptionMr:n.descriptionMr||"",transactionDate:e,paymentMode:n.paymentMode||"CASH",referenceNumber:n.referenceNumber||"",receivedFrom:n.receivedFrom||"",receivedFromMr:n.receivedFromMr||"",paidTo:n.paidTo||"",paidToMr:n.paidToMr||"",attachment:n.attachment||null,createdAt:gt.now(),updatedAt:gt.now()},r=await vs(MT,t);return console.log("Financial record created with ID:",r.id),r.id}catch(e){throw console.error("Error creating financial record:",e),new Error("Failed to create financial record")}},VB=async(n,e)=>{try{const t=St(Ke,$t.financials(),n);let r=e.transactionDate;r&&!(r instanceof gt)&&(r=r instanceof Date?gt.fromDate(r):gt.fromDate(new Date(r)));const a={...e,...r&&{transactionDate:r},...e.amount&&{amount:parseFloat(e.amount)},updatedAt:gt.now()};Object.keys(a).forEach(o=>a[o]===void 0&&delete a[o]),await po(t,a),console.log("Financial record updated:",n)}catch(t){throw console.error("Error updating financial record:",t),new Error("Failed to update financial record")}},BB=async n=>{try{const e=St(Ke,$t.financials(),n);await Bo(e),console.log("Financial record deleted:",n)}catch(e){throw console.error("Error deleting financial record:",e),new Error("Failed to delete financial record")}},zB=()=>{const{t:n,language:e}=ms(),[t,r]=W.useState([]),[a,o]=W.useState("ALL"),[c,u]=W.useState("ALL"),[h,f]=W.useState(!0);W.useEffect(()=>{(async()=>{try{f(!0);const j=await OT();r(j)}catch(j){console.error("Error loading transactions:",j),r([])}finally{f(!1)}})()},[]);const g={totalIncome:t.filter(E=>E.type==="INCOME").reduce((E,j)=>E+j.amount,0),totalExpense:t.filter(E=>E.type==="EXPENSE").reduce((E,j)=>E+j.amount,0),balance:0,transactionCount:t.length};g.balance=g.totalIncome-g.totalExpense;const x=["ALL",...new Set(t.map(E=>new Date(E.transactionDate).getFullYear()))],v=t.filter(E=>{const j=a==="ALL"||E.type===a,S=c==="ALL"||new Date(E.transactionDate).getFullYear().toString()===c;return j&&S}),b=E=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(E),T=E=>new Date(E).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"});return h?s.jsxs("div",{children:[s.jsx("section",{className:"bg-gradient-to-r from-[#ff6b00] to-[#ff8533] text-white py-16",children:s.jsxs("div",{className:"container-custom",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:e==="en"?"Financial Transparency":" "}),s.jsx("p",{className:"text-xl text-white/90",children:e==="en"?"Complete transparency of Gram Panchayat income and expenditure":"     "})]})}),s.jsx("div",{className:"flex justify-center items-center py-16",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-[#ff6b00]"})})]}):s.jsxs("div",{children:[s.jsx("section",{className:"bg-gradient-to-r from-[#ff6b00] to-[#ff8533] text-white py-16",children:s.jsxs("div",{className:"container-custom",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:e==="en"?"Financial Transparency":" "}),s.jsx("p",{className:"text-xl text-white/90",children:e==="en"?"Complete transparency of Gram Panchayat income and expenditure":"     "})]})}),s.jsx("section",{className:"py-12 bg-gray-50",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white p-6 rounded-xl border-2 border-green-300 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:s.jsx(Xd,{className:"text-green-600",size:24})}),s.jsx("span",{className:"text-green-700 font-semibold text-sm",children:e==="en"?"Total Income":" "})]}),s.jsx("div",{className:"text-3xl font-bold text-green-800",children:b(g.totalIncome)}),s.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[t.filter(E=>E.type==="INCOME").length," ",e==="en"?"transactions":""]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl border-2 border-red-300 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:s.jsx(_g,{className:"text-red-600",size:24})}),s.jsx("span",{className:"text-red-700 font-semibold text-sm",children:e==="en"?"Total Expense":" "})]}),s.jsx("div",{className:"text-3xl font-bold text-red-800",children:b(g.totalExpense)}),s.jsxs("div",{className:"text-sm text-red-600 mt-1",children:[t.filter(E=>E.type==="EXPENSE").length," ",e==="en"?"transactions":""]})]}),s.jsxs("div",{className:`bg-white p-6 rounded-xl border-2 ${g.balance>=0?"border-blue-300":"border-orange-300"} shadow-lg`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:`p-3 ${g.balance>=0?"bg-blue-100":"bg-orange-100"} rounded-lg`,children:s.jsx(L2,{className:`${g.balance>=0?"text-blue-600":"text-orange-600"}`,size:24})}),s.jsx("span",{className:`${g.balance>=0?"text-blue-700":"text-orange-700"} font-semibold text-sm`,children:e==="en"?"Balance":""})]}),s.jsx("div",{className:`text-3xl font-bold ${g.balance>=0?"text-blue-800":"text-orange-800"}`,children:b(g.balance)}),s.jsx("div",{className:`text-sm ${g.balance>=0?"text-blue-600":"text-orange-600"} mt-1`,children:g.balance>=0?e==="en"?"Surplus":"":e==="en"?"Deficit":""})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl border-2 border-purple-300 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:s.jsx(fr,{className:"text-purple-600",size:24})}),s.jsx("span",{className:"text-purple-700 font-semibold text-sm",children:e==="en"?"Total":""})]}),s.jsx("div",{className:"text-3xl font-bold text-purple-800",children:g.transactionCount}),s.jsx("div",{className:"text-sm text-purple-600 mt-1",children:e==="en"?"Transactions":""})]})]}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6 border-2 border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Ty,{size:20,className:"text-gray-500"}),s.jsxs("select",{value:a,onChange:E=>o(E.target.value),className:"px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]",children:[s.jsx("option",{value:"ALL",children:e==="en"?"All Types":" "}),s.jsx("option",{value:"INCOME",children:e==="en"?"Income":""}),s.jsx("option",{value:"EXPENSE",children:e==="en"?"Expense":""})]}),s.jsx("select",{value:c,onChange:E=>u(E.target.value),className:"px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]",children:x.map(E=>s.jsx("option",{value:E,children:E==="ALL"?e==="en"?"All Years":" ":E},E))})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg border-2 border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#138808] to-[#1aa910] text-white px-6 py-4",children:s.jsx("h2",{className:"text-2xl font-bold",children:e==="en"?"Recent Transactions":" "})}),v.length>0?s.jsx("div",{className:"divide-y divide-gray-200",children:v.map(E=>s.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:`p-2 rounded-lg ${E.type==="INCOME"?"bg-green-100":"bg-red-100"}`,children:E.type==="INCOME"?s.jsx(Xd,{className:`${E.type==="INCOME"?"text-green-600":"text-red-600"}`,size:20}):s.jsx(_g,{className:"text-red-600",size:20})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg text-gray-800",children:e==="en"?E.subcategory:E.subcategoryMr}),s.jsx("p",{className:"text-sm text-gray-600",children:e==="en"?E.description:E.descriptionMr})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 text-sm",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"text-gray-500",children:[e==="en"?"Date":"",":"]}),s.jsxs("div",{className:"flex items-center gap-1 text-gray-700 font-semibold",children:[s.jsx(Zr,{size:14}),T(E.transactionDate)]})]}),s.jsxs("div",{children:[s.jsxs("span",{className:"text-gray-500",children:[E.type==="INCOME"?e==="en"?"Received From":" ":e==="en"?"Paid To":" ",":"]}),s.jsx("div",{className:"text-gray-700 font-semibold",children:E.type==="INCOME"?e==="en"?E.receivedFrom:E.receivedFromMr:e==="en"?E.paidTo:E.paidToMr})]}),s.jsxs("div",{children:[s.jsxs("span",{className:"text-gray-500",children:[e==="en"?"Payment Mode":" ",":"]}),s.jsx("div",{className:"text-gray-700 font-semibold",children:E.paymentMode.replace("_"," ")})]})]}),E.referenceNumber&&s.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[e==="en"?"Ref":"",": ",E.referenceNumber]})]}),s.jsxs("div",{className:"ml-6 text-right",children:[s.jsxs("div",{className:`text-2xl font-bold ${E.type==="INCOME"?"text-green-600":"text-red-600"}`,children:[E.type==="INCOME"?"+":"-"," ",b(E.amount)]}),s.jsx("span",{className:`inline-block mt-2 px-3 py-1 rounded-full text-xs font-semibold ${E.type==="INCOME"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:E.type==="INCOME"?e==="en"?"Income":"":e==="en"?"Expense":""})]})]})},E.id))}):s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(fr,{size:64,className:"mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 text-lg",children:e==="en"?"No transactions available yet":"    "}),s.jsx("p",{className:"text-gray-500 text-sm mt-2",children:e==="en"?"Financial data will be displayed here once transactions are added by the admin":"        "})]})]})]})})]})},_w=async()=>{try{const n=Ht(Ke,$t.notices()),e=Es(n,lc("startDate","desc")),t=await Nr(e),r=[];return t.forEach(a=>{r.push({id:a.id,...a.data()})}),console.log(`Loaded ${r.length} notices from Firebase`),r}catch(n){throw console.error("Error loading notices:",n),n}},qB=async()=>{try{const n=await _w(),e=new Date;e.setHours(0,0,0,0);const t=n.filter(r=>{const a=new Date(r.startDate),o=new Date(r.endDate);return a<=e&&o>=e});return console.log(`Found ${t.length} active notices`),t}catch(n){throw console.error("Error loading active notices:",n),n}},GB=async n=>{try{const e=St(Ke,$t.notices(),n),t=await zs(e);if(t.exists())return{id:t.id,...t.data()};throw new Error("Notice not found")}catch(e){throw console.error("Error loading notice:",e),e}},HB=async n=>{try{const e=Ht(Ke,$t.notices()),t={titleEn:n.titleEn||"",titleMr:n.titleMr||"",type:n.type||"ANNOUNCEMENT",descriptionEn:n.descriptionEn||"",descriptionMr:n.descriptionMr||"",startDate:n.startDate,endDate:n.endDate,showOnHome:n.showOnHome||!1,createdAt:Xt(),updatedAt:Xt()},r=await vs(e,t);return console.log("Notice created with ID:",r.id),r.id}catch(e){throw console.error("Error creating notice:",e),e}},$B=async(n,e)=>{try{const t=St(Ke,$t.notices(),n),r={titleEn:e.titleEn||"",titleMr:e.titleMr||"",type:e.type||"ANNOUNCEMENT",descriptionEn:e.descriptionEn||"",descriptionMr:e.descriptionMr||"",startDate:e.startDate,endDate:e.endDate,showOnHome:e.showOnHome||!1,updatedAt:Xt()};await po(t,r),console.log("Notice updated:",n)}catch(t){throw console.error("Error updating notice:",t),t}},WB=async n=>{try{const e=St(Ke,$t.notices(),n);await Bo(e),console.log("Notice deleted:",n)}catch(e){throw console.error("Error deleting notice:",e),e}},KB=()=>{const{language:n}=ms(),[e,t]=W.useState([]),[r,a]=W.useState(!0),[o,c]=W.useState("ALL");W.useEffect(()=>{u()},[]);const u=async()=>{try{a(!0);const E=(await qB()).sort((j,S)=>new Date(S.startDate)-new Date(j.startDate));t(E)}catch(T){console.error("Error loading notices:",T),t([])}finally{a(!1)}},h=e.filter(T=>o==="ALL"||T.type===o),f=T=>new Date(T).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),g=T=>{switch(T){case"MEETING":return s.jsx(qi,{className:"w-5 h-5"});case"TENDER":return s.jsx(fr,{className:"w-5 h-5"});case"ANNOUNCEMENT":return s.jsx(Mx,{className:"w-5 h-5"});default:return s.jsx(fr,{className:"w-5 h-5"})}},x=T=>{switch(T){case"MEETING":return"from-blue-500 to-blue-600";case"TENDER":return"from-green-500 to-green-600";case"ANNOUNCEMENT":return"from-orange-500 to-orange-600";case"EVENT":return"from-purple-500 to-purple-600";case"URGENT":return"from-red-500 to-red-600";default:return"from-gray-500 to-gray-600"}},v=T=>{switch(T){case"MEETING":return"text-blue-700";case"TENDER":return"text-green-700";case"ANNOUNCEMENT":return"text-orange-700";case"EVENT":return"text-purple-700";case"URGENT":return"text-red-700";default:return"text-gray-700"}},b=T=>{const E=new Date(T),S=Math.ceil((E-new Date)/(1e3*60*60*24));return S<=7&&S>=0};return s.jsxs("div",{children:[s.jsxs("section",{className:"relative py-20 overflow-hidden bg-gradient-to-br from-blue-900 via-blue-800 to-blue-900",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-orange-600/20 rounded-full blur-3xl animate-pulse"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-green-600/20 rounded-full blur-3xl animate-pulse delay-700"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-white/5 rounded-full blur-2xl"})]}),s.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 bg-gradient-to-r from-orange-600 via-white to-green-600"}),s.jsx("div",{className:"container-custom relative z-10",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-orange-600 to-green-600 rounded-full mb-6 shadow-2xl shadow-orange-500/50 animate-bounce-slow",children:s.jsx(qi,{size:40,className:"text-white"})}),s.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-4 tracking-tight",children:n==="en"?"Notices & Announcements":"  "}),s.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[s.jsx("div",{className:"h-1 w-20 bg-gradient-to-r from-transparent via-orange-500 to-orange-600 rounded-full"}),s.jsx(Os,{className:"text-orange-400",size:24}),s.jsx("div",{className:"h-1 w-20 bg-gradient-to-r from-green-600 via-green-500 to-transparent rounded-full"})]}),s.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto leading-relaxed",children:n==="en"?"Stay updated with important notices, meetings, tenders, and announcements":" , ,     "}),s.jsxs("div",{className:"flex items-center justify-center gap-8 mt-8 text-white/60",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-sm",children:n==="en"?"Official":""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse delay-300"}),s.jsx("span",{className:"text-sm",children:n==="en"?"Verified":""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse delay-700"}),s.jsx("span",{className:"text-sm",children:n==="en"?"Updated":""})]})]})]})})]}),s.jsx("section",{className:"py-8 bg-gradient-to-br from-orange-50 via-white to-green-50",children:s.jsx("div",{className:"container-custom",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border-t-4 border-orange-600 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-green-600 h-2"}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center shadow-lg",children:s.jsx(Ty,{size:20,className:"text-white"})}),s.jsx("label",{className:"font-bold text-blue-900 text-lg",children:n==="en"?"Filter by Type":"  "})]}),s.jsxs("select",{value:o,onChange:T=>c(T.target.value),className:"flex-1 min-w-[200px] px-5 py-3 border-2 border-orange-300 rounded-xl focus:outline-none focus:border-orange-600 focus:ring-2 focus:ring-orange-200 bg-gradient-to-r from-orange-50 to-green-50 font-semibold text-gray-700 transition-all hover:border-orange-500",children:[s.jsx("option",{value:"ALL",children:n==="en"?" All Types":"  "}),s.jsx("option",{value:"MEETING",children:" Meeting"}),s.jsx("option",{value:"TENDER",children:" Tender"}),s.jsx("option",{value:"ANNOUNCEMENT",children:" Announcement"}),s.jsx("option",{value:"EVENT",children:" Event"}),s.jsx("option",{value:"URGENT",children:" Urgent"}),s.jsx("option",{value:"OTHER",children:" Other"})]}),o!=="ALL"&&s.jsx("button",{onClick:()=>c("ALL"),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg text-gray-700 font-semibold transition-all",children:n==="en"?"Clear Filter":"  "})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"font-semibold text-orange-600",children:h.length})," ",n==="en"?o==="ALL"?"active notices found":`${o.toLowerCase()} notices found`:o==="ALL"?"  ":`${o.toLowerCase()}  `]})})]})]})})}),s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"container-custom",children:[r?s.jsxs("div",{className:"flex flex-col justify-center items-center py-16",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-600 mb-4"}),s.jsx("p",{className:"text-gray-600 font-semibold",children:n==="en"?"Loading notices...":"   ..."})]}):h.length>0?s.jsx("div",{className:"space-y-6",children:h.map((T,E)=>s.jsxs("div",{className:"group bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden border-t-4 border-orange-600 transform hover:scale-[1.02]",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-green-600 h-2"}),s.jsx("div",{className:`bg-gradient-to-r ${x(T.type)} p-6`,children:s.jsx("div",{className:"flex items-start justify-between gap-4",children:s.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[s.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-white font-bold text-xl shadow-lg",children:E+1}),s.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-white/90 rounded-full flex items-center justify-center shadow-lg",children:s.jsx("div",{className:`${v(T.type)}`,children:g(T.type)})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[s.jsx("span",{className:`px-4 py-1.5 rounded-full text-sm font-bold bg-white/95 ${v(T.type)} shadow-md`,children:T.type}),b(T.endDate)&&s.jsxs("span",{className:"px-4 py-1.5 rounded-full text-sm font-bold bg-red-100 text-red-700 flex items-center gap-2 shadow-md animate-pulse",children:[s.jsx(xw,{size:16}),n==="en"?"Expiring Soon":"   "]})]}),s.jsx("h2",{className:"font-bold text-white text-2xl mb-2 leading-tight",children:n==="en"?T.titleEn:T.titleMr||T.titleEn}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full text-white text-sm font-semibold",children:[s.jsx(Zr,{size:16}),s.jsx("span",{children:f(T.startDate)})]}),s.jsx(Ay,{size:16,className:"text-white/60"}),s.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full text-white text-sm font-semibold",children:[s.jsx(Zr,{size:16}),s.jsx("span",{children:f(T.endDate)})]})]})]})]})})}),s.jsxs("div",{className:"p-8 bg-gradient-to-br from-gray-50 to-white",children:[s.jsxs("div",{className:"flex items-start gap-3 mb-6",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center mt-1",children:s.jsx(fr,{size:16,className:"text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-blue-900 text-lg mb-3",children:n==="en"?"Description":""}),s.jsx("p",{className:"text-gray-700 text-base leading-relaxed",children:n==="en"?T.descriptionEn:T.descriptionMr||T.descriptionEn})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-4 border-l-4 border-green-600 shadow-md hover:shadow-lg transition-all",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Zr,{size:20,className:"text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 font-semibold",children:n==="en"?"Start Date":" "}),s.jsx("p",{className:"font-bold text-gray-800",children:f(T.startDate)})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 border-l-4 border-red-600 shadow-md hover:shadow-lg transition-all",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx(Zr,{size:20,className:"text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 font-semibold",children:n==="en"?"End Date":" "}),s.jsx("p",{className:"font-bold text-gray-800",children:f(T.endDate)})]})]})})]})]})]},T.id))}):s.jsxs("div",{className:"text-center py-16 bg-gradient-to-br from-orange-50 to-green-50 rounded-2xl border-2 border-dashed border-orange-300",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-orange-100 to-green-100 rounded-full mb-6",children:s.jsx(qi,{size:48,className:"text-orange-600"})}),s.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-3",children:n==="en"?"No Active Notices":"   "}),s.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:n==="en"?"There are currently no active notices. Check back later for updates.":"    .   ."})]}),h.length>0&&s.jsxs("div",{className:"mt-12 bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl shadow-xl border-t-4 border-blue-600 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 h-2"}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-blue-700 rounded-full flex items-center justify-center shadow-lg flex-shrink-0",children:s.jsx(Qn,{size:24,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-blue-900 text-2xl mb-2",children:n==="en"?"Important Information":" "}),s.jsx("p",{className:"text-blue-700 text-sm",children:n==="en"?"Please read the following guidelines carefully":"     "})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-3 bg-white/50 backdrop-blur-sm rounded-xl p-4",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"1"})}),s.jsx("p",{className:"text-blue-900 font-medium",children:n==="en"?"Please check the start and end dates for each notice carefully":"        "})]}),s.jsxs("div",{className:"flex items-start gap-3 bg-white/50 backdrop-blur-sm rounded-xl p-4",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"2"})}),s.jsx("p",{className:"text-blue-900 font-medium",children:n==="en"?"For tender submissions, contact the Gram Panchayat office before the deadline":" ,      "})]}),s.jsxs("div",{className:"flex items-start gap-3 bg-white/50 backdrop-blur-sm rounded-xl p-4",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"3"})}),s.jsx("p",{className:"text-blue-900 font-medium",children:n==="en"?"Meeting attendance is mandatory for all members and important for village development":"          "})]})]})]})]})]})})]})},YB=()=>{const{t:n,getContent:e}=ms(),{settings:t}=iu(),[r,a]=W.useState({name:"",phone:"",email:"",category:"QUERY",subject:"",message:""}),[o,c]=W.useState(!1),u=f=>{a({...r,[f.target.name]:f.target.value})},h=f=>{f.preventDefault(),console.log("Form submitted:",r),c(!0),setTimeout(()=>{c(!1),a({name:"",phone:"",email:"",category:"QUERY",subject:"",message:""})},3e3)};return s.jsxs("div",{children:[s.jsxs("section",{className:"relative py-20 overflow-hidden bg-gradient-to-br from-blue-900 via-blue-800 to-blue-900",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-orange-600/20 rounded-full blur-3xl animate-pulse"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-green-600/20 rounded-full blur-3xl animate-pulse delay-700"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-white/5 rounded-full blur-2xl"})]}),s.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 bg-gradient-to-r from-orange-600 via-white to-green-600"}),s.jsx("div",{className:"container-custom relative z-10",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-orange-600 to-green-600 rounded-full mb-6 shadow-2xl shadow-orange-500/50 animate-bounce-slow",children:s.jsx(If,{size:40,className:"text-white"})}),s.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-4 tracking-tight",children:n("nav.contact")}),s.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[s.jsx("div",{className:"h-1 w-20 bg-gradient-to-r from-transparent via-orange-500 to-orange-600 rounded-full"}),s.jsx(Os,{className:"text-orange-400",size:24}),s.jsx("div",{className:"h-1 w-20 bg-gradient-to-r from-green-600 via-green-500 to-transparent rounded-full"})]}),s.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto leading-relaxed",children:"Get in touch with us or submit your grievances"}),s.jsxs("div",{className:"flex items-center justify-center gap-8 mt-8 text-white/60",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-sm",children:"24/7 Available"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse delay-300"}),s.jsx("span",{className:"text-sm",children:"Quick Response"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse delay-700"}),s.jsx("span",{className:"text-sm",children:"Verified"})]})]})]})})]}),s.jsx("section",{className:"py-16 bg-gradient-to-br from-orange-50 via-white to-green-50",children:s.jsx("div",{className:"container-custom",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(co,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:"Contact Information"}),s.jsx("p",{className:"text-gray-600",children:"Reach out to us through any of the following channels"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"group bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden border-t-4 border-orange-600 transform hover:scale-105",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-green-600 h-2"}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center shadow-lg",children:s.jsx(co,{className:"text-white",size:28})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-xl text-blue-900 mb-2",children:"Phone"}),s.jsxs("a",{href:`tel:${t?.contact?.phone||""}`,className:"text-orange-600 hover:text-orange-700 text-lg font-semibold flex items-center gap-2 group-hover:gap-3 transition-all",children:[t?.contact?.phone||"Not available",s.jsx(Os,{size:18,className:"group-hover:animate-spin"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Available during office hours"})]})]})})]}),s.jsxs("div",{className:"group bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden border-t-4 border-green-600 transform hover:scale-105",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-600 to-orange-600 h-2"}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-gradient-to-br from-green-600 to-orange-600 rounded-full flex items-center justify-center shadow-lg",children:s.jsx(go,{className:"text-white",size:28})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-xl text-blue-900 mb-2",children:"Email"}),s.jsxs("a",{href:`mailto:${t?.contact?.email||""}`,className:"text-green-600 hover:text-green-700 text-lg font-semibold flex items-center gap-2 group-hover:gap-3 transition-all break-all",children:[t?.contact?.email||"Not available",s.jsx(Os,{size:18,className:"group-hover:animate-spin flex-shrink-0"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"We respond within 24 hours"})]})]})})]}),s.jsxs("div",{className:"group bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden border-t-4 border-blue-600 transform hover:scale-105",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 h-2"}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-gradient-to-br from-blue-600 to-blue-700 rounded-full flex items-center justify-center shadow-lg",children:s.jsx(xl,{className:"text-white",size:28})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-xl text-blue-900 mb-2",children:"Address"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:e(t?.contact?.address)||"Not available"}),s.jsxs("p",{className:"text-sm text-gray-600 mt-2 flex items-center gap-2",children:[s.jsx(Jf,{size:16}),e(t?.officeTimings)||"Mon - Fri: 10:00 AM - 5:00 PM"]})]})]})})]})]}),s.jsx("div",{className:"mt-8",children:t?.googleMapsLink?s.jsx("div",{className:"h-80 bg-white rounded-2xl shadow-xl overflow-hidden border-2 border-orange-300",children:s.jsx("iframe",{src:t.googleMapsLink,width:"100%",height:"100%",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Gram Panchayat Location"})}):s.jsx("div",{className:"h-64 bg-gradient-to-br from-orange-100 to-green-100 rounded-2xl shadow-xl overflow-hidden border-2 border-dashed border-orange-300 flex items-center justify-center group hover:border-solid transition-all",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-full mb-3 shadow-lg",children:s.jsx(xl,{size:32,className:"text-orange-600"})}),s.jsx("p",{className:"text-gray-600 font-semibold",children:"Map will be embedded here"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Interactive location map"})]})})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(C4,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:"Send us a Message"}),s.jsx("p",{className:"text-gray-600",children:"Fill out the form below and we'll get back to you soon"})]}),o?s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden border-t-4 border-green-600 animate-fade-in",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 h-2"}),s.jsxs("div",{className:"p-12 text-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-green-600 to-green-700 rounded-full mb-6 shadow-2xl shadow-green-500/50 animate-bounce",children:s.jsx(Gi,{className:"text-white",size:48})}),s.jsx("h3",{className:"text-3xl font-bold text-blue-900 mb-3",children:"Message Sent Successfully!"}),s.jsx("p",{className:"text-gray-600 text-lg mb-6",children:"We will get back to you soon."}),s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("div",{className:"h-1 w-16 bg-gradient-to-r from-orange-600 to-green-600 rounded-full"}),s.jsx(Os,{className:"text-green-600",size:20}),s.jsx("div",{className:"h-1 w-16 bg-gradient-to-r from-green-600 to-orange-600 rounded-full"})]})]})]}):s.jsxs("form",{onSubmit:h,className:"bg-white rounded-2xl shadow-2xl overflow-hidden border-t-4 border-orange-600",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-green-600 h-2"}),s.jsxs("div",{className:"p-8 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-blue-900 mb-2",children:[s.jsx(nm,{size:18,className:"text-orange-600"}),"Name *"]}),s.jsx("input",{type:"text",name:"name",required:!0,value:r.name,onChange:u,placeholder:"Enter your full name",className:"w-full px-5 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-600 focus:ring-2 focus:ring-orange-200 transition-all bg-gradient-to-r from-orange-50/50 to-green-50/50 hover:border-orange-400"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-blue-900 mb-2",children:[s.jsx(co,{size:18,className:"text-green-600"}),"Phone *"]}),s.jsx("input",{type:"tel",name:"phone",required:!0,value:r.phone,onChange:u,placeholder:"Enter your phone number",className:"w-full px-5 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-green-600 focus:ring-2 focus:ring-green-200 transition-all bg-gradient-to-r from-green-50/50 to-orange-50/50 hover:border-green-400"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-blue-900 mb-2",children:[s.jsx(go,{size:18,className:"text-blue-600"}),"Email"]}),s.jsx("input",{type:"email",name:"email",value:r.email,onChange:u,placeholder:"Enter your email address",className:"w-full px-5 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-blue-600 focus:ring-2 focus:ring-blue-200 transition-all bg-gradient-to-r from-blue-50/50 to-white hover:border-blue-400"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-blue-900 mb-2",children:[s.jsx(If,{size:18,className:"text-orange-600"}),"Category *"]}),s.jsxs("select",{name:"category",required:!0,value:r.category,onChange:u,className:"w-full px-5 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-600 focus:ring-2 focus:ring-orange-200 transition-all bg-gradient-to-r from-orange-50/50 to-green-50/50 hover:border-orange-400 font-semibold text-gray-700",children:[s.jsx("option",{value:"QUERY",children:" Query"}),s.jsx("option",{value:"COMPLAINT",children:" Complaint"}),s.jsx("option",{value:"SUGGESTION",children:" Suggestion"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-blue-900 mb-2",children:[s.jsx(Os,{size:18,className:"text-green-600"}),"Subject *"]}),s.jsx("input",{type:"text",name:"subject",required:!0,value:r.subject,onChange:u,placeholder:"Enter the subject of your message",className:"w-full px-5 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-green-600 focus:ring-2 focus:ring-green-200 transition-all bg-gradient-to-r from-green-50/50 to-orange-50/50 hover:border-green-400"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-blue-900 mb-2",children:[s.jsx(If,{size:18,className:"text-blue-600"}),"Message *"]}),s.jsx("textarea",{name:"message",required:!0,rows:"5",value:r.message,onChange:u,placeholder:"Type your message here...",className:"w-full px-5 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-blue-600 focus:ring-2 focus:ring-blue-200 transition-all bg-gradient-to-br from-blue-50/50 to-white hover:border-blue-400 resize-none"})]}),s.jsxs("button",{type:"submit",className:"w-full bg-gradient-to-r from-orange-600 to-green-600 hover:from-orange-700 hover:to-green-700 text-white font-bold py-4 px-6 rounded-xl flex items-center justify-center gap-3 transition-all transform hover:scale-105 shadow-xl hover:shadow-2xl",children:[s.jsx(C4,{size:24}),s.jsx("span",{className:"text-lg",children:n("common.submit")}),s.jsx(Os,{size:20,className:"animate-pulse"})]}),s.jsxs("div",{className:"pt-6 border-t border-gray-200",children:[s.jsxs("p",{className:"text-sm text-gray-600 text-center",children:[s.jsx("span",{className:"font-semibold text-orange-600",children:"*"})," Required fields"]}),s.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3 text-xs text-gray-500",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),s.jsx("span",{children:"Your information is secure with us"})]})]})]})]})]})]})})})]})},XB=()=>{const n=Tr(),{login:e}=gw(),[t,r]=W.useState({email:"",password:""}),[a,o]=W.useState(""),[c,u]=W.useState(!1),h=g=>{r({...t,[g.target.name]:g.target.value}),o("")},f=async g=>{g.preventDefault(),u(!0),o("");const x=await e(t);x.success?n("/admin/dashboard"):o(x.error||"Invalid credentials"),u(!1)};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-blue-900 flex items-center justify-center px-3 sm:px-4 py-6 sm:py-12 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-64 sm:w-96 h-64 sm:h-96 bg-orange-600/20 rounded-full blur-3xl animate-pulse"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-64 sm:w-96 h-64 sm:h-96 bg-green-600/20 rounded-full blur-3xl animate-pulse delay-700"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 sm:w-96 h-64 sm:h-96 bg-white/5 rounded-full blur-2xl"})]}),s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1.5 sm:h-2 bg-gradient-to-r from-orange-600 via-white to-green-600"}),s.jsxs("div",{className:"max-w-md w-full relative z-10",children:[s.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-2xl overflow-hidden border-t-4 border-orange-600",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-green-600 h-1.5 sm:h-2"}),s.jsxs("div",{className:"text-center pt-8 sm:pt-12 pb-6 sm:pb-8 px-4 sm:px-8 bg-gradient-to-br from-blue-50 to-white",children:[s.jsxs("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-24 sm:h-24 bg-gradient-to-br from-orange-600 to-green-600 rounded-full mb-4 sm:mb-6 shadow-2xl shadow-orange-500/50 animate-bounce-slow",children:[s.jsx(Ql,{className:"text-white",size:32}),s.jsx(Ql,{className:"text-white hidden sm:block",size:48})]}),s.jsx("h1",{className:"text-2xl sm:text-4xl font-bold text-blue-900 mb-2 sm:mb-3",children:"Admin Login"}),s.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[s.jsx("div",{className:"h-0.5 sm:h-1 w-12 sm:w-16 bg-gradient-to-r from-transparent via-orange-500 to-orange-600 rounded-full"}),s.jsx(Os,{className:"text-orange-400",size:16}),s.jsx(Os,{className:"text-orange-400 hidden sm:block",size:20}),s.jsx("div",{className:"h-0.5 sm:h-1 w-12 sm:w-16 bg-gradient-to-r from-green-600 via-green-500 to-transparent rounded-full"})]}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600 font-semibold",children:"Gram Panchayat Management System"}),s.jsxs("div",{className:"inline-flex items-center gap-2 mt-3 sm:mt-4 px-3 sm:px-4 py-1.5 sm:py-2 bg-white/80 backdrop-blur-sm rounded-full border border-orange-200 shadow-md",children:[s.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-green-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-xs sm:text-sm text-gray-700 font-semibold",children:"Secure Access"})]})]}),a&&s.jsx("div",{className:"mx-4 sm:mx-8 mt-6 sm:mt-8",children:s.jsxs("div",{className:"bg-red-50 border-l-4 border-red-600 rounded-lg p-3 sm:p-4 flex items-start gap-2 sm:gap-3 shadow-lg",children:[s.jsx(Qn,{className:"text-red-600 flex-shrink-0 mt-0.5",size:18}),s.jsx(Qn,{className:"text-red-600 flex-shrink-0 mt-0.5 hidden sm:block",size:20}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-red-900 mb-1 text-sm sm:text-base",children:"Login Failed"}),s.jsx("p",{className:"text-red-700 text-xs sm:text-sm",children:a})]})]})}),s.jsxs("form",{onSubmit:f,className:"p-4 sm:p-8 space-y-4 sm:space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-xs sm:text-sm font-bold text-blue-900 mb-2",children:[s.jsx(go,{size:16,className:"text-orange-600"}),s.jsx(go,{size:18,className:"text-orange-600 hidden sm:block"}),"Email Address"]}),s.jsx("input",{type:"email",name:"email",required:!0,value:t.email,onChange:h,className:"w-full px-4 sm:px-5 py-2.5 sm:py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-600 focus:ring-2 focus:ring-orange-200 transition-all bg-gradient-to-r from-orange-50/50 to-green-50/50 hover:border-orange-400 text-gray-900 font-medium text-sm sm:text-base",placeholder:"admin@example.com"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-xs sm:text-sm font-bold text-blue-900 mb-2",children:[s.jsx(k2,{size:16,className:"text-green-600"}),s.jsx(k2,{size:18,className:"text-green-600 hidden sm:block"}),"Password"]}),s.jsx("input",{type:"password",name:"password",required:!0,value:t.password,onChange:h,className:"w-full px-4 sm:px-5 py-2.5 sm:py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-green-600 focus:ring-2 focus:ring-green-200 transition-all bg-gradient-to-r from-green-50/50 to-orange-50/50 hover:border-green-400 text-gray-900 font-medium text-sm sm:text-base",placeholder:"Enter your password"})]}),s.jsxs("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-orange-600 to-green-600 hover:from-orange-700 hover:to-green-700 text-white font-bold py-3 sm:py-4 px-4 sm:px-6 rounded-xl flex items-center justify-center gap-2 sm:gap-3 transition-all transform hover:scale-105 shadow-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[s.jsx(T4,{size:20}),s.jsx(T4,{size:24,className:"hidden sm:block"}),s.jsx("span",{className:"text-base sm:text-lg",children:c?"Logging in...":"Login to Admin Panel"}),!c&&s.jsx(Os,{size:18,className:"animate-pulse sm:hidden"}),!c&&s.jsx(Os,{size:20,className:"animate-pulse hidden sm:block"})]}),c&&s.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-600",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b-2 border-orange-600"}),s.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:"Authenticating..."})]})]}),s.jsx("div",{className:"px-4 sm:px-8 pb-4 sm:pb-8",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 rounded-xl p-3 sm:p-4 border border-blue-200",children:s.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[s.jsx(Ql,{size:18,className:"text-blue-600 flex-shrink-0 mt-0.5 sm:hidden"}),s.jsx(Ql,{size:20,className:"text-blue-600 flex-shrink-0 mt-0.5 hidden sm:block"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-blue-900 text-xs sm:text-sm mb-1",children:"Authorized Personnel Only"}),s.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600 leading-relaxed",children:"This portal is restricted to authorized Gram Panchayat administrators. Unauthorized access is prohibited and may be subject to legal action."})]})]})})})]}),s.jsx("div",{className:"mt-4 sm:mt-6 text-center px-4",children:s.jsxs("div",{className:"inline-flex items-center gap-2 text-white/80 text-xs sm:text-sm",children:[s.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-green-500 rounded-full animate-pulse"}),s.jsx("span",{children:"Government of India Initiative"})]})})]})]})},QB=()=>{const{t:n}=ms(),[e,t]=W.useState(!0),[r,a]=W.useState({members:0,services:0,schemes:0,activeNotices:0,programs:0,forms:0}),[o,c]=W.useState([]),[u,h]=W.useState([]);W.useEffect(()=>{f()},[]);const f=async()=>{try{t(!0);const[x,v,b,T,E,j]=await Promise.all([yw(),vw(),ww(),_w(),jw(),Nw()]);a({members:x?.length||0,services:v?.length||0,schemes:b?.length||0,activeNotices:T?.filter(S=>S.status==="ACTIVE")?.length||0,programs:E?.length||0,forms:j?.length||0}),c(T?.slice(0,3)||[]),h(E?.slice(0,3)||[])}catch(x){console.error("Error loading dashboard data:",x)}finally{t(!1)}},g=[{title:"Total Members",count:r.members,icon:Us,color:"from-orange-500 to-orange-600",link:"/admin/members"},{title:"Services",count:r.services,icon:fr,color:"from-green-600 to-green-700",link:"/admin/services"},{title:"Schemes",count:r.schemes,icon:Qf,color:"from-blue-800 to-blue-900",link:"/admin/schemes"},{title:"Active Notices",count:r.activeNotices,icon:qi,color:"from-purple-500 to-purple-600",link:"/admin/notices"},{title:"Programs",count:r.programs,icon:na,color:"from-pink-500 to-pink-600",link:"/admin/gallery"},{title:"Forms",count:r.forms,icon:zo,color:"from-indigo-500 to-indigo-600",link:"/admin/forms"}];return e?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary-600"})}):s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Admin Dashboard"}),s.jsx("p",{className:"text-gray-600",children:"Welcome back! Here's what's happening with your Gram Panchayat."})]}),s.jsxs(_n,{to:"/admin/settings",className:"flex items-center gap-2 bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white px-6 py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all",children:[s.jsx(_T,{size:20}),"Site Settings"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map((x,v)=>s.jsxs(_n,{to:x.link,className:"bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all transform hover:scale-105 overflow-hidden group",children:[s.jsx("div",{className:`bg-gradient-to-br ${x.color} p-6 text-white`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white/80 text-sm font-medium mb-1",children:x.title}),s.jsx("p",{className:"text-4xl font-bold",children:x.count})]}),s.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center group-hover:bg-white/30 transition-colors",children:s.jsx(x.icon,{size:32})})]})}),s.jsx("div",{className:"p-4 bg-gray-50",children:s.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:["Manage ",x.title,s.jsx(Xd,{size:16,className:"group-hover:translate-x-1 transition-transform"})]})})]},v))}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx(VV,{size:24,className:"text-orange-600"}),"Quick Actions"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(_n,{to:"/admin/members/new",className:"flex items-center gap-3 p-4 border-2 border-orange-200 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition-all group",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center group-hover:bg-orange-200 transition-colors",children:s.jsx(Us,{size:20,className:"text-orange-600"})}),s.jsx("span",{className:"font-semibold text-gray-700",children:"Add Member"})]}),s.jsxs(_n,{to:"/admin/services/new",className:"flex items-center gap-3 p-4 border-2 border-green-200 rounded-lg hover:border-green-500 hover:bg-green-50 transition-all group",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center group-hover:bg-green-200 transition-colors",children:s.jsx(fr,{size:20,className:"text-green-600"})}),s.jsx("span",{className:"font-semibold text-gray-700",children:"Add Service"})]}),s.jsxs(_n,{to:"/admin/notices/new",className:"flex items-center gap-3 p-4 border-2 border-purple-200 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-all group",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center group-hover:bg-purple-200 transition-colors",children:s.jsx(qi,{size:20,className:"text-purple-600"})}),s.jsx("span",{className:"font-semibold text-gray-700",children:"Add Notice"})]}),s.jsxs(_n,{to:"/admin/gallery/new",className:"flex items-center gap-3 p-4 border-2 border-pink-200 rounded-lg hover:border-pink-500 hover:bg-pink-50 transition-all group",children:[s.jsx("div",{className:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center group-hover:bg-pink-200 transition-colors",children:s.jsx(na,{size:20,className:"text-pink-600"})}),s.jsx("span",{className:"font-semibold text-gray-700",children:"Add Program"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx(pV,{size:24,className:"text-blue-600"}),"Content Management"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs(_n,{to:"/admin/content/about",className:"flex items-center gap-3 p-4 border-2 border-blue-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all group",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center group-hover:bg-blue-200 transition-colors",children:s.jsx(fr,{size:20,className:"text-blue-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-700",children:"Edit About Page"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Village info, history, vision & mission"})]})]}),s.jsxs(_n,{to:"/admin/content/education",className:"flex items-center gap-3 p-4 border-2 border-indigo-200 rounded-lg hover:border-indigo-500 hover:bg-indigo-50 transition-all group",children:[s.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center group-hover:bg-indigo-200 transition-colors",children:s.jsx($g,{size:20,className:"text-indigo-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-700",children:"Edit Education Page"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Schools, anganwadis & programs"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[s.jsx(qi,{size:24,className:"text-purple-600"}),"Recent Notices"]}),s.jsx(_n,{to:"/admin/notices",className:"text-orange-600 hover:text-orange-700 font-semibold text-sm",children:"View All "})]}),s.jsx("div",{className:"space-y-3",children:o.length>0?o.map(x=>s.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-orange-300 hover:bg-orange-50/50 transition-all",children:s.jsx("div",{className:"flex items-start justify-between gap-3",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:x.title.en}),s.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:x.description.en}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Zr,{size:12}),new Date(x.startDate).toLocaleDateString()]}),s.jsx("span",{className:`px-2 py-1 rounded-full ${x.status==="ACTIVE"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:x.status})]})]})})},x.id)):s.jsx("p",{className:"text-gray-500 text-center py-8",children:"No notices yet"})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[s.jsx(na,{size:24,className:"text-pink-600"}),"Recent Programs"]}),s.jsx(_n,{to:"/admin/gallery",className:"text-orange-600 hover:text-orange-700 font-semibold text-sm",children:"View All "})]}),s.jsx("div",{className:"space-y-3",children:u.length>0?u.map(x=>s.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-orange-300 hover:bg-orange-50/50 transition-all",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("img",{src:x.images?.[0]||"/placeholder.jpg",alt:x.titleEn||"Program",className:"w-16 h-16 object-cover rounded-lg"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:x.titleEn}),s.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:x.descriptionEn}),s.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[s.jsx(Zr,{size:12}),new Date(x.date).toLocaleDateString()]})]})]})},x.id)):s.jsx("p",{className:"text-gray-500 text-center py-8",children:"No programs yet"})})]})]})]})},JB=()=>{const[n,e]=W.useState([]),[t,r]=W.useState(""),[a,o]=W.useState("ALL"),[c,u]=W.useState(!0);W.useEffect(()=>{(async()=>{try{u(!0);const v=await yw();e(v)}catch(v){console.error("Error loading members:",v)}finally{u(!1)}})()},[]);const h=n.filter(x=>{const v=x.name.en.toLowerCase().includes(t.toLowerCase())||x.name.mr.includes(t),b=a==="ALL"||x.type===a;return v&&b}),f=async x=>{if(window.confirm("Are you sure you want to delete this member?"))try{await fB(x),e(n.filter(v=>v.id!==x)),console.log("Member deleted successfully")}catch(v){console.error("Error deleting member:",v),alert("Failed to delete member. Please try again.")}},g=x=>({SARPANCH:"bg-orange-100 text-orange-700",UPSARPANCH:"bg-green-100 text-green-700",MEMBER:"bg-blue-100 text-blue-700",STAFF:"bg-purple-100 text-purple-700"})[x]||"bg-gray-100 text-gray-700";return c?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Members Management"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage Sarpanch, Upsarpanch, Members and Staff"})]}),s.jsxs(_n,{to:"/admin/members/new",className:"flex items-center gap-2 bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white px-6 py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all",children:[s.jsx(Ss,{size:20}),"Add Member"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search members...",value:t,onChange:x=>r(x.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),s.jsxs("select",{value:a,onChange:x=>o(x.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"ALL",children:"All Members"}),s.jsx("option",{value:"SARPANCH",children:"Sarpanch"}),s.jsx("option",{value:"UPSARPANCH",children:"Upsarpanch"}),s.jsx("option",{value:"MEMBER",children:"Members"}),s.jsx("option",{value:"STAFF",children:"Staff"})]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.length>0?h.map(x=>s.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition-all",children:[s.jsx("div",{className:"h-48 bg-gradient-to-br from-orange-100 to-green-100 flex items-center justify-center",children:x.photo?s.jsx("img",{src:x.photo,alt:x.name.en,className:"w-full h-full object-cover"}):s.jsx(jf,{size:80,className:"text-gray-400"})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:x.name.en}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:x.name.mr})]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${g(x.type)}`,children:x.type})]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("span",{className:"font-semibold",children:"Designation:"})," ",x.designation.en]}),s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("span",{className:"font-semibold",children:"Phone:"})," ",x.phone]}),x.termStart&&s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("span",{className:"font-semibold",children:"Term:"})," ",new Date(x.termStart).getFullYear()," - ",new Date(x.termEnd).getFullYear()]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(_n,{to:`/admin/members/edit/${x.id}`,className:"flex-1 flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold transition-all",children:[s.jsx(ud,{size:16}),"Edit"]}),s.jsxs("button",{onClick:()=>f(x.id),className:"flex items-center justify-center gap-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold transition-all",children:[s.jsx(ti,{size:16}),"Delete"]})]})]})]},x.id)):s.jsxs("div",{className:"col-span-full text-center py-12",children:[s.jsx(jf,{size:64,className:"mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"No members found"}),s.jsxs(_n,{to:"/admin/members/new",className:"inline-flex items-center gap-2 mt-4 text-orange-600 hover:text-orange-700 font-semibold",children:[s.jsx(Ss,{size:20}),"Add your first member"]})]})})]})},ZB=async n=>{if(!n||n.trim()==="")return"";try{const e=`https://api.mymemory.translated.net/get?q=${encodeURIComponent(n)}&langpair=en|mr`,r=await(await fetch(e)).json();return r.responseStatus===200&&r.responseData?r.responseData.translatedText:(console.error("Translation API error:",r),n)}catch(e){return console.error("Translation error:",e),n}},jn=({label:n,name:e,value:t={en:"",mr:""},onChange:r,required:a=!1,type:o="text",placeholder:c="",rows:u=3,disabled:h=!1})=>{const[f,g]=W.useState(!1),[x,v]=W.useState(!0),[b,T]=W.useState(null),E=o==="textarea",j=O=>{const B=O.target.value;if(r({...t,en:B}),x&&B.trim()){b&&clearTimeout(b);const re=setTimeout(async()=>{g(!0);try{const ae=await ZB(B);r({en:B,mr:ae})}catch(ae){console.error("Translation failed:",ae)}finally{g(!1)}},1500);T(re)}},S=O=>{const B=O.target.value;r({...t,mr:B})};W.useEffect(()=>()=>{b&&clearTimeout(b)},[b]);const D=E?"textarea":"input";return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[n," ",a&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("input",{type:"checkbox",id:`auto-translate-${e}`,checked:x,onChange:O=>v(O.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),s.jsxs("label",{htmlFor:`auto-translate-${e}`,className:"text-gray-600 flex items-center gap-1",children:[s.jsx(Cf,{size:14}),"Auto-translate to Marathi",f&&s.jsx(aV,{size:14,className:"animate-spin text-primary-600 ml-1"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"English"}),s.jsx(D,{type:E?void 0:o,rows:E?u:void 0,value:t.en||"",onChange:j,placeholder:c||`Enter ${n} in English`,required:a,disabled:h,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:[" (Marathi)",f&&s.jsx("span",{className:"ml-2 text-primary-600 text-xs",children:"Translating..."})]}),s.jsx(D,{type:E?void 0:o,rows:E?u:void 0,value:t.mr||"",onChange:S,placeholder:`${n}  `,disabled:h,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none"}),x&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" Auto-translated. You can edit manually."})]})]})]})},P4=()=>{const n=Tr(),{id:e}=bl(),t=!!e,[r,a]=W.useState({name:{en:"",mr:""},designation:{en:"",mr:""},phone:"",type:"MEMBER",position:0,termStart:"",termEnd:"",photo:""}),[o,c]=W.useState(null),[u,h]=W.useState({}),[f,g]=W.useState(!1),[x,v]=W.useState(!1);W.useEffect(()=>{(async()=>{if(t&&e)try{g(!0);const O=await bw(e);O&&a({name:O.name||{en:"",mr:""},designation:O.designation||{en:"",mr:""},phone:O.phone||"",type:O.type||"MEMBER",position:O.position||0,termStart:O.termStart||"",termEnd:O.termEnd||"",photo:O.photo||""})}catch(O){console.error("Error loading member:",O),alert("Failed to load member. Please try again.")}finally{g(!1)}})()},[t,e]);const b=(D,O)=>{a(B=>({...B,[D]:O})),u[D]&&h(B=>({...B,[D]:""}))},T=D=>{const{name:O,value:B}=D.target;a(re=>({...re,[O]:B})),u[O]&&h(re=>({...re,[O]:""}))},E=()=>{const D={};return r.name.en.trim()||(D.name="Member name is required"),r.designation.en.trim()||(D.designation="Designation is required"),r.phone.trim()?/^[\+]?[0-9]{10,13}$/.test(r.phone.replace(/\s/g,""))||(D.phone="Invalid phone number"):D.phone="Phone number is required",r.type||(D.type="Member type is required"),r.termStart&&r.termEnd&&r.termEnd<r.termStart&&(D.termEnd="End date must be after start date"),D},j=async D=>{D.preventDefault();const O=E();if(Object.keys(O).length>0){h(O);return}v(!0);try{const B={name:r.name,designation:r.designation,phone:r.phone,type:r.type,position:parseInt(r.position)||0,photo:r.photo,...r.termStart&&{termStart:r.termStart},...r.termEnd&&{termEnd:r.termEnd}};t?(await hB(e,B,o),console.log("Member updated successfully")):(await dB(B,o),console.log("Member created successfully")),n("/admin/members")}catch(B){console.error("Error saving member:",B),alert("Failed to save member. Please try again.")}finally{v(!1)}},S=D=>{const O=D.target.files[0];if(O){c(O);const B=new FileReader;B.onloadend=()=>{a(re=>({...re,photo:B.result}))},B.readAsDataURL(O)}};return f?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>n("/admin/members"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(xo,{size:24})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:t?"Edit Member":"Add New Member"}),s.jsx("p",{className:"text-gray-600 mt-1",children:t?"Update member information":"Fill in the details to add a new member"})]})]}),s.jsx("form",{onSubmit:j,className:"bg-white rounded-xl shadow-lg p-8",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Photo"}),s.jsxs("div",{className:"flex items-center gap-6",children:[r.photo?s.jsx("img",{src:r.photo,alt:"Member photo",className:"w-32 h-32 object-cover rounded-lg border-2 border-gray-200"}):s.jsx("div",{className:"w-32 h-32 bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center",children:s.jsx(tm,{size:32,className:"text-gray-400"})}),s.jsxs("div",{children:[s.jsx("input",{type:"file",id:"photo",accept:"image/*",onChange:S,className:"hidden"}),s.jsxs("label",{htmlFor:"photo",className:"inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold cursor-pointer transition-all",children:[s.jsx(tm,{size:16}),"Choose Photo"]}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Recommended: 400x400px, Max 2MB"})]})]})]}),s.jsxs("div",{children:[s.jsx(jn,{label:"Member Name",name:"name",value:r.name,onChange:D=>b("name",D),required:!0,placeholder:"Enter member name"}),u.name&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.name})]}),s.jsxs("div",{children:[s.jsx(jn,{label:"Designation",name:"designation",value:r.designation,onChange:D=>b("designation",D),required:!0,placeholder:"Enter designation"}),u.designation&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.designation})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"phone",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Phone Number ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"tel",id:"phone",name:"phone",value:r.phone,onChange:T,className:`w-full px-4 py-3 border ${u.phone?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent`,placeholder:"+91 1234567890"}),u.phone&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.phone})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"type",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Member Type ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{id:"type",name:"type",value:r.type,onChange:T,className:`w-full px-4 py-3 border ${u.type?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent`,children:[s.jsx("option",{value:"SARPANCH",children:"Sarpanch"}),s.jsx("option",{value:"UPSARPANCH",children:"Upsarpanch"}),s.jsx("option",{value:"MEMBER",children:"Member"}),s.jsx("option",{value:"STAFF",children:"Staff"})]}),u.type&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.type})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"position",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Display Order"}),s.jsx("input",{type:"number",id:"position",name:"position",value:r.position,onChange:T,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"1"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Lower numbers appear first"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"termStart",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Term Start Date",s.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Optional)"})]}),s.jsx("input",{type:"date",id:"termStart",name:"termStart",value:r.termStart,onChange:T,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"YYYY-MM-DD"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"termEnd",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Term End Date",s.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Optional)"})]}),s.jsx("input",{type:"date",id:"termEnd",name:"termEnd",value:r.termEnd,onChange:T,min:r.termStart,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"YYYY-MM-DD"}),r.termStart&&r.termEnd&&r.termEnd<r.termStart&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:"End date must be after start date"})]})]}),s.jsxs("div",{className:"flex gap-4 pt-6 border-t",children:[s.jsx("button",{type:"button",onClick:()=>n("/admin/members"),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-all",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:x,className:"flex items-center gap-2 bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white px-8 py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all disabled:opacity-50",children:[s.jsx(Bs,{size:20}),x?"Saving...":t?"Update Member":"Add Member"]})]})]})})]})},ez=()=>{const[n,e]=W.useState([]),[t,r]=W.useState(""),[a,o]=W.useState("ALL"),[c,u]=W.useState(!0),h=["ALL","Certificate","Tax","License","Registration","Other"];W.useEffect(()=>{(async()=>{try{u(!0);const b=await vw();e(b)}catch(b){console.error("Error loading services:",b)}finally{u(!1)}})()},[]);const f=n.filter(v=>{const b=v.name.en.toLowerCase().includes(t.toLowerCase())||v.name.mr.includes(t),T=a==="ALL"||v.category===a;return b&&T}),g=async v=>{if(window.confirm("Are you sure you want to delete this service?"))try{await yB(v),e(n.filter(b=>b.id!==v)),console.log("Service deleted successfully")}catch(b){console.error("Error deleting service:",b),alert("Failed to delete service. Please try again.")}},x=v=>({Certificate:"bg-blue-100 text-blue-700",Tax:"bg-green-100 text-green-700",License:"bg-purple-100 text-purple-700",Registration:"bg-orange-100 text-orange-700",Other:"bg-gray-100 text-gray-700"})[v]||"bg-gray-100 text-gray-700";return c?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Services Management"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage all services provided by Gram Panchayat"})]}),s.jsxs(_n,{to:"/admin/services/new",className:"flex items-center gap-2 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white px-6 py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all",children:[s.jsx(Ss,{size:20}),"Add Service"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search services...",value:t,onChange:v=>r(v.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),s.jsx("select",{value:a,onChange:v=>o(v.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:h.map(v=>s.jsx("option",{value:v,children:v==="ALL"?"All Categories":v},v))})]})}),s.jsx("div",{className:"grid grid-cols-1 gap-6",children:f.length>0?f.map(v=>s.jsx("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center",children:s.jsx(fr,{size:24,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:v.name.en}),s.jsx("p",{className:"text-gray-600",children:v.name.mr})]})]})}),s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${x(v.category)}`,children:v.category})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-600 text-sm",children:v.description.en})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("span",{className:"font-semibold text-gray-700",children:"Fees:"}),s.jsx("span",{className:"text-green-600 font-bold",children:v.fees})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("span",{className:"font-semibold text-gray-700",children:"Processing Time:"}),s.jsx("span",{className:"text-blue-600 font-semibold",children:v.processingTime})]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Required Documents"}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:s.jsx("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap font-sans",children:v.requiredDocuments.en})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"How to Apply"}),s.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:s.jsx("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap font-sans",children:v.howToApply.en})})]}),s.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[s.jsxs(_n,{to:`/admin/services/edit/${v.id}`,className:"flex-1 flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg font-semibold transition-all",children:[s.jsx(ud,{size:18}),"Edit Service"]}),s.jsxs("button",{onClick:()=>g(v.id),className:"flex items-center justify-center gap-2 bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-semibold transition-all",children:[s.jsx(ti,{size:18}),"Delete"]})]})]})},v.id)):s.jsxs("div",{className:"col-span-full text-center py-12 bg-white rounded-xl shadow-lg",children:[s.jsx(fr,{size:64,className:"mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"No services found"}),s.jsxs(_n,{to:"/admin/services/new",className:"inline-flex items-center gap-2 mt-4 text-green-600 hover:text-green-700 font-semibold",children:[s.jsx(Ss,{size:20}),"Add your first service"]})]})})]})},L4=()=>{const n=Tr(),{id:e}=bl(),t=!!e,[r,a]=W.useState({name:{en:"",mr:""},category:"Certificate",description:{en:"",mr:""},requiredDocuments:{en:"",mr:""},fees:"",processingTime:"",howToApply:{en:"",mr:""}}),[o,c]=W.useState({}),[u,h]=W.useState(!1),[f,g]=W.useState(!1),x=["Certificate","Tax","License","Registration","Other"];W.useEffect(()=>{(async()=>{if(t&&e)try{h(!0);const S=await gB(e);S&&a({name:S.name||{en:"",mr:""},category:S.category||"Certificate",description:S.description||{en:"",mr:""},requiredDocuments:S.requiredDocuments||{en:"",mr:""},fees:S.fees||"",processingTime:S.processingTime||"",howToApply:S.howToApply||{en:"",mr:""}})}catch(S){console.error("Error loading service:",S),alert("Failed to load service. Please try again.")}finally{h(!1)}})()},[t,e]);const v=(j,S)=>{a(D=>({...D,[j]:S})),o[j]&&c(D=>({...D,[j]:""}))},b=j=>{const{name:S,value:D}=j.target;a(O=>({...O,[S]:D})),o[S]&&c(O=>({...O,[S]:""}))},T=()=>{const j={};return r.name.en.trim()||(j.name="Service name is required"),r.description.en.trim()||(j.description="Description is required"),r.requiredDocuments.en.trim()||(j.requiredDocuments="Required documents is required"),r.fees.trim()||(j.fees="Fees is required"),r.processingTime.trim()||(j.processingTime="Processing time is required"),r.howToApply.en.trim()||(j.howToApply="How to apply is required"),j},E=async j=>{j.preventDefault();const S=T();if(Object.keys(S).length>0){c(S);return}g(!0);try{const D={name:r.name,category:r.category,description:r.description,requiredDocuments:r.requiredDocuments,fees:r.fees,processingTime:r.processingTime,howToApply:r.howToApply};t?(await xB(e,D),console.log("Service updated successfully")):(await pB(D),console.log("Service created successfully")),n("/admin/services")}catch(D){console.error("Error saving service:",D),alert("Failed to save service. Please try again.")}finally{g(!1)}};return u?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>n("/admin/services"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(xo,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:t?"Edit Service":"Add New Service"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t?"Update service information":"Add a new service offered by the Panchayat"})]})]})}),s.jsxs("form",{onSubmit:E,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(jn,{label:"Service Name",name:"name",value:r.name,onChange:j=>v("name",j),required:!0,placeholder:"Enter service name"}),o.name&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.name})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Category ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("select",{name:"category",value:r.category,onChange:b,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:x.map(j=>s.jsx("option",{value:j,children:j},j))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Fees ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"fees",value:r.fees,onChange:b,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${o.fees?"border-red-500":"border-gray-300"}`,placeholder:"e.g., 100 or Free"}),o.fees&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.fees})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Processing Time ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"processingTime",value:r.processingTime,onChange:b,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${o.processingTime?"border-red-500":"border-gray-300"}`,placeholder:"e.g., 7 days or 1-2 weeks"}),o.processingTime&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.processingTime})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Description"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(jn,{label:"Service Description",name:"description",type:"textarea",rows:5,value:r.description,onChange:j=>v("description",j),required:!0,placeholder:"Describe the service in detail..."}),o.description&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.description})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Required Documents"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(jn,{label:"Documents Required",name:"requiredDocuments",type:"textarea",rows:5,value:r.requiredDocuments,onChange:j=>v("requiredDocuments",j),required:!0,placeholder:"List required documents..."}),o.requiredDocuments&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.requiredDocuments})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"How to Apply"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(jn,{label:"Application Process",name:"howToApply",type:"textarea",rows:5,value:r.howToApply,onChange:j=>v("howToApply",j),required:!0,placeholder:"Explain how to apply for this service..."}),o.howToApply&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.howToApply})]})]}),s.jsxs("div",{className:"flex gap-4 justify-end",children:[s.jsx("button",{type:"button",onClick:()=>n("/admin/services"),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:f,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all flex items-center gap-2 disabled:opacity-50",children:[s.jsx(Bs,{className:"w-4 h-4"}),f?"Saving...":t?"Update Service":"Save Service"]})]})]})]})},tz=()=>{const[n,e]=W.useState([]),[t,r]=W.useState(""),[a,o]=W.useState("ALL"),[c,u]=W.useState(!0),h=["ALL","CENTRAL","STATE","DISTRICT"];W.useEffect(()=>{(async()=>{try{u(!0);const T=await ww();e(T)}catch(T){console.error("Error loading schemes:",T)}finally{u(!1)}})()},[]);const f=n.filter(b=>{const T=b.name.en.toLowerCase().includes(t.toLowerCase())||b.name.mr.includes(t),E=a==="ALL"||b.category===a;return T&&E}),g=async b=>{if(window.confirm("Are you sure you want to delete this scheme?"))try{await jB(b),e(n.filter(T=>T.id!==b)),console.log("Scheme deleted successfully")}catch(T){console.error("Error deleting scheme:",T),alert("Failed to delete scheme. Please try again.")}},x=b=>({CENTRAL:"bg-orange-100 text-orange-700",STATE:"bg-green-100 text-green-700",DISTRICT:"bg-blue-100 text-blue-700"})[b]||"bg-gray-100 text-gray-700",v=b=>b==="ACTIVE"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700";return c?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Schemes Management"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage government schemes and programs"})]}),s.jsxs(_n,{to:"/admin/schemes/new",className:"flex items-center gap-2 bg-gradient-to-r from-blue-800 to-blue-900 hover:from-blue-900 hover:to-blue-950 text-white px-6 py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all",children:[s.jsx(Ss,{size:20}),"Add Scheme"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search schemes...",value:t,onChange:b=>r(b.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsx("select",{value:a,onChange:b=>o(b.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:h.map(b=>s.jsx("option",{value:b,children:b==="ALL"?"All Categories":b},b))})]})}),s.jsx("div",{className:"grid grid-cols-1 gap-6",children:f.length>0?f.map(b=>s.jsx("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-800 to-blue-900 rounded-full flex items-center justify-center",children:s.jsx(Qf,{size:24,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:b.name.en}),s.jsx("p",{className:"text-gray-600",children:b.name.mr})]})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${x(b.category)}`,children:b.category}),s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${v(b.status)}`,children:b.status})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-600 text-sm",children:b.description.en})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Eligibility Criteria"}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:s.jsx("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap font-sans",children:b.eligibility.en})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Required Documents"}),s.jsx("div",{className:"bg-orange-50 p-4 rounded-lg",children:s.jsx("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap font-sans",children:b.documentsRequired.en})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Application Process"}),s.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:s.jsx("p",{className:"text-sm text-gray-700",children:b.applicationProcess.en})})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[s.jsxs(_n,{to:`/admin/schemes/edit/${b.id}`,className:"flex-1 flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg font-semibold transition-all",children:[s.jsx(ud,{size:18}),"Edit Scheme"]}),s.jsxs("button",{onClick:()=>g(b.id),className:"flex items-center justify-center gap-2 bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-semibold transition-all",children:[s.jsx(ti,{size:18}),"Delete"]})]})]})},b.id)):s.jsxs("div",{className:"col-span-full text-center py-12 bg-white rounded-xl shadow-lg",children:[s.jsx(Qf,{size:64,className:"mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"No schemes found"}),s.jsxs(_n,{to:"/admin/schemes/new",className:"inline-flex items-center gap-2 mt-4 text-blue-600 hover:text-blue-700 font-semibold",children:[s.jsx(Ss,{size:20}),"Add your first scheme"]})]})})]})};function D4(){const n=Tr(),{id:e}=bl(),t=!!e,[r,a]=W.useState(!1),[o,c]=W.useState(!1),[u,h]=W.useState({name:{en:"",mr:""},category:"CENTRAL",description:{en:"",mr:""},eligibility:{en:"",mr:""},documentsRequired:{en:"",mr:""},applicationProcess:{en:"",mr:""},status:"ACTIVE"}),[f,g]=W.useState({});W.useEffect(()=>{(async()=>{if(t)try{a(!0);const j=await vB(e);j&&h({name:j.name,category:j.category,description:j.description,eligibility:j.eligibility,documentsRequired:{en:j.documentsRequired.en.join(`
`),mr:j.documentsRequired.mr.join(`
`)},applicationProcess:j.applicationProcess,status:j.status})}catch(j){console.error("Error loading scheme:",j)}finally{a(!1)}})()},[e,t]);const x=(E,j)=>{h(S=>({...S,[E]:j})),f[E]&&g(S=>({...S,[E]:""}))},v=E=>{const{name:j,value:S}=E.target;h(D=>({...D,[j]:S})),f[j]&&g(D=>({...D,[j]:""}))},b=()=>{const E={};return u.name.en.trim()||(E.name="Scheme name is required"),u.description.en.trim()||(E.description="Description is required"),u.eligibility.en.trim()||(E.eligibility="Eligibility criteria is required"),u.documentsRequired.en.trim()||(E.documentsRequired="Required documents are required"),u.applicationProcess.en.trim()||(E.applicationProcess="Application process is required"),g(E),Object.keys(E).length===0},T=async E=>{if(E.preventDefault(),!!b())try{c(!0);const j={name:u.name,category:u.category,description:u.description,eligibility:u.eligibility,documentsRequired:{en:u.documentsRequired.en.split(`
`).filter(S=>S.trim()),mr:u.documentsRequired.mr.split(`
`).filter(S=>S.trim())},applicationProcess:u.applicationProcess,status:u.status};t?await NB(e,j):await wB(j),n("/admin/schemes")}catch(j){console.error("Error saving scheme:",j),alert("Failed to save scheme. Please try again.")}finally{c(!1)}};return s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>n("/admin/schemes"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(xo,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:t?"Edit Scheme":"Add New Scheme"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t?"Update scheme information":"Add a new government scheme"})]})]})}),r?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s.jsx(s.Fragment,{children:s.jsxs("form",{onSubmit:T,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(jn,{label:"Scheme Name",name:"name",value:u.name,onChange:E=>x("name",E),required:!0,placeholder:"Enter scheme name"}),f.name&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.name})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Category ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"category",value:u.category,onChange:v,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"CENTRAL",children:"Central Government"}),s.jsx("option",{value:"STATE",children:"State Government"}),s.jsx("option",{value:"DISTRICT",children:"District Level"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Status ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"status",value:u.status,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"ACTIVE",children:"Active"}),s.jsx("option",{value:"INACTIVE",children:"Inactive"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Description"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(jn,{label:"Scheme Description",name:"description",type:"textarea",rows:5,value:u.description,onChange:E=>x("description",E),required:!0,placeholder:"Describe the scheme in detail..."}),f.description&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.description})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Eligibility Criteria"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(jn,{label:"Eligibility Criteria",name:"eligibility",type:"textarea",rows:5,value:u.eligibility,onChange:E=>x("eligibility",E),required:!0,placeholder:"Who can apply for this scheme..."}),f.eligibility&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.eligibility})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Required Documents"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(jn,{label:"Documents Required",name:"documentsRequired",type:"textarea",rows:6,value:u.documentsRequired,onChange:E=>x("documentsRequired",E),required:!0,placeholder:"List required documents (one per line)..."}),f.documentsRequired&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.documentsRequired}),s.jsx("p",{className:"text-xs text-gray-500",children:"Enter one document per line"})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Application Process"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(jn,{label:"Application Process",name:"applicationProcess",type:"textarea",rows:6,value:u.applicationProcess,onChange:E=>x("applicationProcess",E),required:!0,placeholder:"Explain how to apply for this scheme..."}),f.applicationProcess&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.applicationProcess})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Status"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scheme Status"}),s.jsxs("select",{name:"status",value:u.status,onChange:v,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"ACTIVE",children:"Active"}),s.jsx("option",{value:"INACTIVE",children:"Inactive"}),s.jsx("option",{value:"UPCOMING",children:"Upcoming"})]})]})]}),s.jsxs("div",{className:"flex gap-4 justify-end",children:[s.jsx("button",{type:"button",onClick:()=>n("/admin/schemes"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:o,children:"Cancel"}),s.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:o,children:[s.jsx(Bs,{className:"w-4 h-4"}),o?"Saving...":t?"Update Scheme":"Save Scheme"]})]})]})})]})}function nz(){const n=Tr(),[e,t]=W.useState([]),[r,a]=W.useState(!0),[o,c]=W.useState(""),[u,h]=W.useState("ALL");W.useEffect(()=>{f()},[]);const f=async()=>{try{a(!0);const j=await _w();t(j)}catch(j){console.error("Error loading notices:",j),alert("Failed to load notices. Please try again.")}finally{a(!1)}},g=e.filter(j=>{const S=j.titleEn.toLowerCase().includes(o.toLowerCase())||j.titleMr&&j.titleMr.toLowerCase().includes(o.toLowerCase()),D=u==="ALL"||j.type===u;return S&&D}),x=async j=>{if(window.confirm("Are you sure you want to delete this notice?"))try{await WB(j),t(e.filter(S=>S.id!==j))}catch(S){console.error("Error deleting notice:",S),alert("Failed to delete notice. Please try again.")}},v=j=>{switch(j){case"MEETING":return s.jsx(qi,{className:"w-4 h-4"});case"TENDER":return s.jsx(fr,{className:"w-4 h-4"});case"ANNOUNCEMENT":return s.jsx(Mx,{className:"w-4 h-4"});default:return s.jsx(fr,{className:"w-4 h-4"})}},b=j=>{const S={MEETING:"bg-blue-100 text-blue-700",TENDER:"bg-green-100 text-green-700",ANNOUNCEMENT:"bg-orange-100 text-orange-700"};return s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1 ${S[j]}`,children:[v(j),j]})},T=j=>new Date(j).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),E=j=>{const S=new Date,D=new Date(j.startDate),O=new Date(j.endDate);return S>=D&&S<=O};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Notices Management"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage meetings, tenders, and announcements"})]}),s.jsxs("button",{onClick:()=>n("/admin/notices/new"),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all shadow-md hover:shadow-lg",children:[s.jsx(Ss,{className:"w-5 h-5"}),"Add Notice"]})]}),r?s.jsx("div",{className:"flex justify-center items-center py-16",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-orange-600"})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg",children:s.jsx(qi,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Meetings"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.filter(j=>j.type==="MEETING").length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-600 to-green-700 rounded-lg",children:s.jsx(fr,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Tenders"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.filter(j=>j.type==="TENDER").length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg",children:s.jsx(Mx,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Announcements"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.filter(j=>j.type==="ANNOUNCEMENT").length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg",children:s.jsx(Zr,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.filter(j=>E(j)).length})]})]})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6 border border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search notices...",value:o,onChange:j=>c(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),s.jsx("div",{children:s.jsxs("select",{value:u,onChange:j=>h(j.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"ALL",children:"All Types"}),s.jsx("option",{value:"MEETING",children:"Meetings"}),s.jsx("option",{value:"TENDER",children:"Tenders"}),s.jsx("option",{value:"ANNOUNCEMENT",children:"Announcements"})]})})]})}),s.jsx("div",{className:"space-y-4",children:g.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center border border-gray-200",children:[s.jsx(qi,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No Notices Found"}),s.jsx("p",{className:"text-gray-500 mb-4",children:o||u!=="ALL"?"Try adjusting your filters":"Get started by adding your first notice"}),!o&&u==="ALL"&&s.jsx("button",{onClick:()=>n("/admin/notices/new"),className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all",children:"Add Notice"})]}):g.map(j=>s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b(j.type),E(j)?s.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700 flex items-center gap-1",children:[s.jsx(xi,{className:"w-3 h-3"}),"ACTIVE"]}):s.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600 flex items-center gap-1",children:[s.jsx(bh,{className:"w-3 h-3"}),"INACTIVE"]}),j.showOnHome&&s.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:"ON HOMEPAGE"})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-1",children:j.titleEn}),j.titleMr&&s.jsx("p",{className:"text-base text-gray-600 mb-3",children:j.titleMr}),s.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Zr,{className:"w-4 h-4"}),s.jsxs("span",{children:["From: ",T(j.startDate)]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Zr,{className:"w-4 h-4"}),s.jsxs("span",{children:["To: ",T(j.endDate)]})]})]}),s.jsx("p",{className:"text-gray-700 mb-2",children:j.descriptionEn}),j.descriptionMr&&s.jsx("p",{className:"text-gray-600 text-sm",children:j.descriptionMr})]}),s.jsxs("div",{className:"flex gap-2 ml-4",children:[s.jsx("button",{onClick:()=>n(`/admin/notices/edit/${j.id}`),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:s.jsx(bp,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>x(j.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:s.jsx(ti,{className:"w-5 h-5"})})]})]})},j.id))})]})]})}function M4(){const n=Tr(),{id:e}=bl(),t=!!e,[r,a]=W.useState({titleEn:"",titleMr:"",type:"ANNOUNCEMENT",descriptionEn:"",descriptionMr:"",startDate:"",endDate:"",showOnHome:!1}),[o,c]=W.useState({}),[u,h]=W.useState(!1),[f,g]=W.useState(!1);W.useEffect(()=>{t&&x()},[e,t]);const x=async()=>{try{g(!0);const j=await GB(e);a({titleEn:j.titleEn||"",titleMr:j.titleMr||"",type:j.type||"ANNOUNCEMENT",descriptionEn:j.descriptionEn||"",descriptionMr:j.descriptionMr||"",startDate:j.startDate||"",endDate:j.endDate||"",showOnHome:j.showOnHome||!1})}catch(j){console.error("Error loading notice:",j),alert("Failed to load notice. Redirecting to notices list."),n("/admin/notices")}finally{g(!1)}},v=(j,S,D)=>{const O=S?`${j}${S.charAt(0).toUpperCase()+S.slice(1)}`:j;a(B=>({...B,[O]:D})),o[O]&&c(B=>({...B,[O]:""}))},b=j=>{const{name:S,value:D,type:O,checked:B}=j.target;a(re=>({...re,[S]:O==="checkbox"?B:D})),o[S]&&c(re=>({...re,[S]:""}))},T=()=>{const j={};if(r.titleEn.trim()||(j.titleEn="Title is required"),r.descriptionEn.trim()||(j.descriptionEn="Description is required"),r.startDate||(j.startDate="Start date is required"),r.endDate||(j.endDate="End date is required"),r.startDate&&r.endDate){const S=new Date(r.startDate);new Date(r.endDate)<S&&(j.endDate="End date must be after start date")}return c(j),Object.keys(j).length===0},E=async j=>{if(j.preventDefault(),!!T())try{h(!0);const S={titleEn:r.titleEn,titleMr:r.titleMr,type:r.type,descriptionEn:r.descriptionEn,descriptionMr:r.descriptionMr,startDate:r.startDate,endDate:r.endDate,showOnHome:r.showOnHome};t?(await $B(e,S),alert("Notice updated successfully!")):(await HB(S),alert("Notice created successfully!")),n("/admin/notices")}catch(S){console.error("Error saving notice:",S),alert("Failed to save notice. Please try again.")}finally{h(!1)}};return f?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}):s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>n("/admin/notices"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",disabled:u,children:s.jsx(xo,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:t?"Edit Notice":"Add New Notice"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t?"Update notice information":"Create a new notice, meeting, or tender"})]})]})}),s.jsxs("form",{onSubmit:E,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Title (English) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:r.titleEn,onChange:j=>v("title","en",j.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${o.titleEn?"border-red-500":"border-gray-300"}`,placeholder:"Enter notice title in English",disabled:u}),o.titleEn&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.titleEn})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title (Marathi)"}),s.jsx("input",{type:"text",value:r.titleMr,onChange:j=>v("title","mr",j.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"    ",disabled:u})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Type ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"type",value:r.type,onChange:b,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:u,children:[s.jsx("option",{value:"ANNOUNCEMENT",children:"Announcement"}),s.jsx("option",{value:"MEETING",children:"Meeting"}),s.jsx("option",{value:"TENDER",children:"Tender"}),s.jsx("option",{value:"EVENT",children:"Event"}),s.jsx("option",{value:"HOLIDAY",children:"Holiday"}),s.jsx("option",{value:"URGENT",children:"Urgent"}),s.jsx("option",{value:"OTHER",children:"Other"})]})]}),s.jsx("div",{className:"flex items-center",children:s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",name:"showOnHome",checked:r.showOnHome,onChange:b,className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500",disabled:u}),s.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Show on Homepage"})]})})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Description"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description (English) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{rows:6,value:r.descriptionEn,onChange:j=>v("description","en",j.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${o.descriptionEn?"border-red-500":"border-gray-300"}`,placeholder:"Enter detailed description in English",disabled:u}),o.descriptionEn&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.descriptionEn})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Marathi)"}),s.jsx("textarea",{rows:6,value:r.descriptionMr,onChange:j=>v("description","mr",j.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"    ",disabled:u})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Validity Period"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Start Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",name:"startDate",value:r.startDate,onChange:b,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${o.startDate?"border-red-500":"border-gray-300"}`,disabled:u}),o.startDate&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.startDate}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"When this notice becomes active"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["End Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",name:"endDate",value:r.endDate,onChange:b,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${o.endDate?"border-red-500":"border-gray-300"}`,disabled:u}),o.endDate&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.endDate}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"When this notice expires"})]})]}),s.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Note:"})," The notice will automatically be marked as active during the specified date range. After the end date, it will be marked as inactive."]})})]}),s.jsxs("div",{className:"flex gap-4 justify-end",children:[s.jsx("button",{type:"button",onClick:()=>n("/admin/notices"),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",disabled:u,children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:u,children:u?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),t?"Updating...":"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Bs,{className:"w-4 h-4"}),t?"Update Notice":"Save Notice"]})})]})]})]})}function rz(){const n=Tr(),[e,t]=W.useState([]),[r,a]=W.useState(!0),[o,c]=W.useState("");W.useEffect(()=>{u()},[]);const u=async()=>{try{a(!0);const x=await jw();console.log("Loaded gallery programs from Firebase:",x.length),t(x)}catch(x){console.error("Error loading gallery programs:",x),alert("Failed to load gallery programs")}finally{a(!1)}},h=e.filter(x=>x.titleEn?.toLowerCase().includes(o.toLowerCase())||x.titleMr?.toLowerCase().includes(o.toLowerCase())),f=async x=>{if(window.confirm("Are you sure you want to delete this program/photo? All images will be permanently deleted."))try{await LB(x),t(e.filter(v=>v.id!==x)),alert("Program deleted successfully!")}catch(v){console.error("Error deleting program:",v),alert("Failed to delete program")}},g=x=>new Date(x).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"});return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Gallery Management"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage photos and programs"})]}),s.jsxs("button",{onClick:()=>n("/admin/gallery/new"),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all shadow-md hover:shadow-lg",children:[s.jsx(Ss,{className:"w-5 h-5"}),"Add Photo/Program"]})]}),r?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg",children:s.jsx(na,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Programs"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-600 to-green-700 rounded-lg",children:s.jsx(na,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Images"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.reduce((x,v)=>x+(v.images?.length||0),0)})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-800 to-blue-900 rounded-lg",children:s.jsx(Zr,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"This Month"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.filter(x=>{const v=new Date(x.date),b=new Date;return v.getMonth()===b.getMonth()&&v.getFullYear()===b.getFullYear()}).length})]})]})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6 border border-gray-200",children:s.jsxs("div",{className:"relative",children:[s.jsx(Hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search programs...",value:o,onChange:x=>c(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.length===0?s.jsxs("div",{className:"col-span-full bg-white rounded-xl shadow-sm p-12 text-center border border-gray-200",children:[s.jsx(na,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No Photos Found"}),s.jsx("p",{className:"text-gray-500 mb-4",children:o?"Try adjusting your search":"Get started by adding your first photo or program"}),!o&&s.jsx("button",{onClick:()=>n("/admin/gallery/new"),className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all",children:"Add Photo/Program"})]}):h.map(x=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200 hover:shadow-lg transition-shadow group",children:[s.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-gray-100 to-gray-200 overflow-hidden",children:[x.images&&x.images.length>0?s.jsx("img",{src:x.images[0],alt:x.titleEn,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(na,{className:"w-16 h-16 text-gray-400"})}),x.images&&x.images.length>1&&s.jsx("div",{className:"absolute top-3 left-3",children:s.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-black/70 text-white shadow-lg flex items-center gap-1",children:[s.jsx(na,{className:"w-3 h-3"}),x.images.length," photos"]})}),s.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3",children:[s.jsx("button",{onClick:()=>n(`/admin/gallery/edit/${x.id}`),className:"p-3 bg-white/90 hover:bg-white rounded-lg transition-colors",title:"Edit",children:s.jsx(bp,{className:"w-5 h-5 text-blue-600"})}),s.jsx("button",{onClick:()=>f(x.id),className:"p-3 bg-white/90 hover:bg-white rounded-lg transition-colors",title:"Delete",children:s.jsx(ti,{className:"w-5 h-5 text-red-600"})})]})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-2",children:[s.jsx(Zr,{className:"w-4 h-4"}),s.jsx("span",{children:g(x.date)})]}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:x.titleEn}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:x.titleMr}),s.jsx("p",{className:"text-gray-700 text-sm line-clamp-2 mb-2",children:x.descriptionEn}),s.jsx("p",{className:"text-gray-600 text-xs line-clamp-2",children:x.descriptionMr})]})]},x.id))})]})]})}const sz=async(n,e=350,t=1920,r=1080)=>new Promise((a,o)=>{const c=n.size/1024;if(c<=e){console.log(`Image ${n.name} is already small enough (${c.toFixed(2)}KB)`),a(n);return}const u=new FileReader;u.onload=h=>{const f=new Image;f.onload=()=>{let g=f.width,x=f.height;if(g>t||x>r){const S=g/x;g>x?(g=t,x=g/S):(x=r,g=x*S)}const v=document.createElement("canvas");v.width=g,v.height=x,v.getContext("2d").drawImage(f,0,0,g,x);let T=.9;const E=e*1024,j=S=>{v.toBlob(D=>{if(!D){o(new Error("Failed to compress image"));return}if(console.log(`Compressed ${n.name}: ${(D.size/1024).toFixed(2)}KB at quality ${S}`),D.size<=E||S<=.5){const O=new File([D],n.name,{type:"image/jpeg",lastModified:Date.now()});console.log(`Final size: ${(O.size/1024).toFixed(2)}KB`),a(O)}else j(S-.1)},"image/jpeg",S)};j(T)},f.onerror=()=>{o(new Error("Failed to load image"))},f.src=h.target.result},u.onerror=()=>{o(new Error("Failed to read file"))},u.readAsDataURL(n)}),az=n=>{const e=[];if(!n.type.startsWith("image/"))return e.push("File must be an image"),{valid:!1,errors:e};const t=10;return n.size>t*1024*1024?(e.push(`File size must be less than ${t}MB`),{valid:!1,errors:e}):["image/jpeg","image/jpg","image/png","image/webp"].includes(n.type)?{valid:!0,errors:[]}:(e.push("Only JPEG, PNG, and WebP images are allowed"),{valid:!1,errors:e})};function O4(){const n=Tr(),{id:e}=bl(),t=!!e,[r,a]=W.useState({titleEn:"",titleMr:"",descriptionEn:"",descriptionMr:"",date:"",youtubeLink:""}),[o,c]=W.useState([]),[u,h]=W.useState([]),[f,g]=W.useState([]),[x,v]=W.useState(!1),[b,T]=W.useState({}),[E,j]=W.useState(!1),[S,D]=W.useState(!1);W.useEffect(()=>{t&&O()},[e,t]);const O=async()=>{try{D(!0);const P=await DT(e);a({titleEn:P.titleEn||"",titleMr:P.titleMr||"",descriptionEn:P.descriptionEn||"",descriptionMr:P.descriptionMr||"",date:P.date?.toISOString?.().split("T")[0]||"",youtubeLink:P.youtubeLink||""}),c(P.images||[])}catch(P){console.error("Error loading program:",P),alert("Failed to load program"),n("/admin/gallery")}finally{D(!1)}},B=(P,V,oe)=>{const Ne=`${P}${V.charAt(0).toUpperCase()+V.slice(1)}`;a(ue=>({...ue,[Ne]:oe})),b[P]&&T(ue=>({...ue,[P]:""}))},re=P=>{const{name:V,value:oe}=P.target;a(Ne=>({...Ne,[V]:oe})),b[V]&&T(Ne=>({...Ne,[V]:""}))},ae=async P=>{const V=Array.from(P.target.files);if(V.length!==0){v(!0);try{const oe=[],Ne=[];for(const ue of V){const pe=az(ue);if(!pe.valid){Ne.push(`${ue.name}: ${pe.errors.join(", ")}`);continue}try{const de=ue.size/1024;console.log(`Original size of ${ue.name}: ${de.toFixed(2)}KB`);let Se=ue;if(de>1024){console.log(`Compressing ${ue.name}...`),Se=await sz(ue,350);const ze=Se.size/1024;console.log(`Compressed ${ue.name}: ${de.toFixed(2)}KB  ${ze.toFixed(2)}KB`)}oe.push(Se)}catch(de){console.error(`Error compressing ${ue.name}:`,de),Ne.push(`${ue.name}: Failed to compress`)}}if(Ne.length>0&&alert(`Some files had errors:
`+Ne.join(`
`)),oe.length===0){v(!1);return}h(ue=>[...ue,...oe]);for(const ue of oe){const pe=new FileReader;pe.onloadend=()=>{g(de=>[...de,pe.result])},pe.readAsDataURL(ue)}if(T(ue=>({...ue,images:""})),oe.length>0){const ue=oe.reduce((pe,de)=>pe+de.size,0)/1024;console.log(`Successfully processed ${oe.length} image(s). Total size: ${ue.toFixed(2)}KB`)}}catch(oe){console.error("Error processing images:",oe),alert("Failed to process images. Please try again.")}finally{v(!1)}}},G=P=>{c(V=>V.filter(oe=>oe!==P))},M=P=>{h(V=>V.filter((oe,Ne)=>Ne!==P)),g(V=>V.filter((oe,Ne)=>Ne!==P))},k=()=>{const P={};r.titleEn.trim()||(P.titleEn="English title is required"),r.descriptionEn.trim()||(P.descriptionEn="English description is required"),r.date||(P.date="Date is required");const V=t&&o.length>0||u.length>0,oe=r.youtubeLink&&r.youtubeLink.trim()!=="";return!V&&!oe&&(P.media="Please provide either images or a YouTube video link"),r.youtubeLink&&r.youtubeLink.trim()!==""&&(/^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/.+/.test(r.youtubeLink)||(P.youtubeLink="Please enter a valid YouTube URL")),T(P),Object.keys(P).length===0},L=async P=>{if(P.preventDefault(),!!k())try{j(!0);const V={titleEn:r.titleEn,titleMr:r.titleMr,descriptionEn:r.descriptionEn,descriptionMr:r.descriptionMr,date:r.date,youtubeLink:r.youtubeLink||""};t?(await PB(e,V,u,o),alert("Program updated successfully!")):(await RB(V,u),alert("Program created successfully!")),n("/admin/gallery")}catch(V){console.error("Error saving program:",V),alert("Failed to save program. Please try again.")}finally{j(!1)}};if(S)return s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})});const C=o.length+u.length;return s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>n("/admin/gallery"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",disabled:E,children:s.jsx(xo,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:t?"Edit Photo/Program":"Add New Photo/Program"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t?"Update photo/program information":"Add a new photo or program to the gallery"})]})]})}),s.jsxs("form",{onSubmit:L,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b flex items-center justify-between",children:[s.jsxs("span",{children:["Photos (",C,")"]}),C>0&&s.jsxs("span",{className:"text-sm font-normal text-gray-500",children:[o.length," saved + ",u.length," new"]})]}),s.jsxs("div",{className:"space-y-4",children:[o.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Saved Images"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:o.map((P,V)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:P,alt:`Existing ${V+1}`,className:"w-full h-32 object-cover rounded-lg border border-gray-300"}),s.jsx("button",{type:"button",onClick:()=>G(P),className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors shadow-lg opacity-0 group-hover:opacity-100",disabled:E,children:s.jsx(ni,{className:"w-4 h-4"})})]},V))})]}),f.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"New Images (will be uploaded)"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:f.map((P,V)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:P,alt:`New ${V+1}`,className:"w-full h-32 object-cover rounded-lg border border-orange-300"}),s.jsx("button",{type:"button",onClick:()=>M(V),className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors shadow-lg opacity-0 group-hover:opacity-100",disabled:E,children:s.jsx(ni,{className:"w-4 h-4"})})]},V))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block",children:[s.jsx("div",{className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors ${x?"border-orange-500 bg-orange-50":"border-gray-300 hover:border-orange-500"}`,children:x?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-orange-600 mx-auto mb-3"}),s.jsx("p",{className:"text-orange-600 font-medium mb-1",children:"Compressing images..."}),s.jsx("p",{className:"text-sm text-orange-500",children:"Please wait while we optimize your images"})]}):s.jsxs(s.Fragment,{children:[s.jsx(na,{className:"w-10 h-10 text-gray-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-600 mb-1",children:"Click to upload images"}),s.jsx("p",{className:"text-sm text-gray-500",children:"PNG, JPG, WebP up to 10MB"}),s.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Images over 1MB will be automatically compressed to ~350KB"})]})}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:ae,className:"hidden",disabled:E||x})]}),b.media&&s.jsx("p",{className:"text-red-500 text-sm mt-2",children:b.media})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b flex items-center gap-2",children:[s.jsx(P2,{className:"w-5 h-5 text-orange-600"}),s.jsx("span",{children:"YouTube Video (Optional)"})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"YouTube Video Link"}),s.jsx("input",{type:"url",value:r.youtubeLink,onChange:P=>a({...r,youtubeLink:P.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${b.youtubeLink?"border-red-500":"border-gray-300"}`,placeholder:"https://www.youtube.com/watch?v=...",disabled:E}),b.youtubeLink&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.youtubeLink}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Add a YouTube video link to display alongside or instead of images. Supported formats: youtube.com/watch?v=, youtu.be/"})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Title (English) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:r.titleEn,onChange:P=>B("title","en",P.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${b.titleEn?"border-red-500":"border-gray-300"}`,placeholder:"Enter program title in English",disabled:E}),b.titleEn&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.titleEn})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title (Marathi)"}),s.jsx("input",{type:"text",value:r.titleMr,onChange:P=>B("title","mr",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"    ",disabled:E})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",name:"date",value:r.date,onChange:re,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${b.date?"border-red-500":"border-gray-300"}`,disabled:E}),b.date&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.date})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Description"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description (English) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{rows:4,value:r.descriptionEn,onChange:P=>B("description","en",P.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${b.descriptionEn?"border-red-500":"border-gray-300"}`,placeholder:"Describe the program or event in English",disabled:E}),b.descriptionEn&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.descriptionEn})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Marathi)"}),s.jsx("textarea",{rows:4,value:r.descriptionMr,onChange:P=>B("description","mr",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"     ",disabled:E})]})]})]}),s.jsxs("div",{className:"flex gap-4 justify-end",children:[s.jsx("button",{type:"button",onClick:()=>n("/admin/gallery"),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",disabled:E,children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:E,children:E?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),t?"Updating...":"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Bs,{className:"w-4 h-4"}),t?"Update Program":"Save Program"]})})]})]})]})}function iz(){const n=Tr(),[e,t]=W.useState([]),[r,a]=W.useState(!0),[o,c]=W.useState(""),[u,h]=W.useState("ALL"),[f,g]=W.useState("ALL");W.useEffect(()=>{x()},[]);const x=async()=>{try{a(!0);const S=await Nw();t(S)}catch(S){console.error("Error loading forms:",S),alert("Failed to load forms. Please try again.")}finally{a(!1)}},v=e.filter(S=>{const D=S.titleEn.toLowerCase().includes(o.toLowerCase())||S.titleMr&&S.titleMr.toLowerCase().includes(o.toLowerCase()),O=u==="ALL"||S.category===u,B=f==="ALL"||S.language===f;return D&&O&&B}),b=async(S,D)=>{if(window.confirm("Are you sure you want to delete this form? The PDF file will also be removed."))try{await CB(S,D),t(e.filter(O=>O.id!==S))}catch(O){console.error("Error deleting form:",O),alert("Failed to delete form. Please try again.")}},T=S=>{const D={CERTIFICATE:"bg-blue-100 text-blue-700",APPLICATION:"bg-green-100 text-green-700",TAX:"bg-orange-100 text-orange-700",LICENSE:"bg-purple-100 text-purple-700",OTHER:"bg-gray-100 text-gray-700"};return s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${D[S]}`,children:S})},E=S=>{const D={ENGLISH:"bg-blue-500 text-white",MARATHI:"bg-orange-500 text-white",BOTH:"bg-gradient-to-r from-blue-500 to-orange-500 text-white"};return s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1 ${D[S]}`,children:[s.jsx(Cf,{className:"w-3 h-3"}),S]})},j=S=>{S.fileUrl?window.open(S.fileUrl,"_blank"):alert(" No file URL available for this form. Please edit and re-upload the PDF file.")};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Forms & Downloads"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage downloadable forms and documents"})]}),s.jsxs("button",{onClick:()=>n("/admin/forms/new"),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all shadow-md hover:shadow-lg",children:[s.jsx(Ss,{className:"w-5 h-5"}),"Upload Form"]})]}),r?s.jsx("div",{className:"flex justify-center items-center py-16",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-orange-600"})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg",children:s.jsx(fr,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Forms"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg",children:s.jsx(Cf,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"English"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.filter(S=>S.language==="ENGLISH"||S.language==="BOTH").length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-600 to-orange-700 rounded-lg",children:s.jsx(Cf,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Marathi"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.filter(S=>S.language==="MARATHI"||S.language==="BOTH").length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-600 to-green-700 rounded-lg",children:s.jsx(zo,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Downloads"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.reduce((S,D)=>S+(D.downloads||0),0)})]})]})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6 border border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search forms...",value:o,onChange:S=>c(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),s.jsx("div",{children:s.jsxs("select",{value:u,onChange:S=>h(S.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"ALL",children:"All Categories"}),s.jsx("option",{value:"CERTIFICATE",children:"Certificate"}),s.jsx("option",{value:"APPLICATION",children:"Application"}),s.jsx("option",{value:"TAX",children:"Tax"}),s.jsx("option",{value:"LICENSE",children:"License"}),s.jsx("option",{value:"OTHER",children:"Other"})]})}),s.jsx("div",{children:s.jsxs("select",{value:f,onChange:S=>g(S.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"ALL",children:"All Languages"}),s.jsx("option",{value:"ENGLISH",children:"English Only"}),s.jsx("option",{value:"MARATHI",children:"Marathi Only"}),s.jsx("option",{value:"BOTH",children:"Both Languages"})]})})]})}),s.jsx("div",{className:"space-y-4",children:v.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center border border-gray-200",children:[s.jsx(fr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No Forms Found"}),s.jsx("p",{className:"text-gray-500 mb-4",children:o||u!=="ALL"||f!=="ALL"?"Try adjusting your filters":"Get started by uploading your first form"}),!o&&u==="ALL"&&f==="ALL"&&s.jsx("button",{onClick:()=>n("/admin/forms/new"),className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all",children:"Upload Form"})]}):v.map(S=>s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[T(S.category),E(S.language),!S.fileUrl&&s.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700 flex items-center gap-1 animate-pulse",children:[s.jsx(xw,{className:"w-3 h-3"}),"Missing File"]})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-1",children:S.titleEn}),S.titleMr&&s.jsx("p",{className:"text-base text-gray-600 mb-3",children:S.titleMr}),s.jsx("p",{className:"text-gray-700 mb-2",children:S.descriptionEn}),S.descriptionMr&&s.jsx("p",{className:"text-gray-600 text-sm mb-4",children:S.descriptionMr}),s.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fr,{className:"w-4 h-4"}),s.jsx("span",{children:S.fileName||"PDF Document"})]}),S.fileSize&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(zo,{className:"w-4 h-4"}),s.jsxs("span",{children:[(S.fileSize/1024).toFixed(2)," KB"]})]})]})]}),s.jsxs("div",{className:"flex gap-2 ml-4",children:[s.jsx("button",{onClick:()=>j(S),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Download",children:s.jsx(zo,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>n(`/admin/forms/edit/${S.id}`),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:s.jsx(bp,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>b(S.id,S.fileUrl),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:s.jsx(ti,{className:"w-5 h-5"})})]})]})},S.id))})]})]})}function F4(){const n=Tr(),{id:e}=bl(),t=!!e,[r,a]=W.useState({titleEn:"",titleMr:"",descriptionEn:"",descriptionMr:"",category:"APPLICATION",language:"BOTH",file:null,fileName:"",existingFileUrl:""}),[o,c]=W.useState({}),[u,h]=W.useState(!1),[f,g]=W.useState(0);W.useEffect(()=>{(async()=>{if(t)try{h(!0);const D=await EB(e);D?a({titleEn:D.titleEn||"",titleMr:D.titleMr||"",descriptionEn:D.descriptionEn||"",descriptionMr:D.descriptionMr||"",category:D.category,language:D.language,file:null,fileName:D.fileName||"",existingFileUrl:D.fileUrl||""}):(alert("Form not found"),n("/admin/forms"))}catch(D){console.error("Error loading form:",D),alert("Failed to load form")}finally{h(!1)}})()},[e,t,n]);const x=(S,D)=>{a(O=>({...O,[S]:D})),o[S]&&c(O=>({...O,[S]:""}))},v=S=>{const{name:D,value:O}=S.target;a(B=>({...B,[D]:O})),o[D]&&c(B=>({...B,[D]:""}))},b=S=>{const D=S.target.files[0];if(D){if(D.type!=="application/pdf"){c(O=>({...O,file:"Please select a PDF file"}));return}if(D.size>10*1024*1024){c(O=>({...O,file:"File size should be less than 10MB"}));return}a(O=>({...O,file:D,fileName:D.name})),c(O=>({...O,file:""}))}},T=()=>{a(S=>({...S,file:null,fileName:""}))},E=()=>{const S={};return r.titleEn.trim()||(S.titleEn="English title is required"),r.descriptionEn.trim()||(S.descriptionEn="English description is required"),!r.file&&!t&&(S.file="PDF file is required"),!r.fileName&&!r.file&&(S.file="PDF file is required"),c(S),Object.keys(S).length===0},j=async S=>{if(S.preventDefault(),!!E())try{h(!0),g(0);const D={titleEn:r.titleEn,titleMr:r.titleMr,descriptionEn:r.descriptionEn,descriptionMr:r.descriptionMr,category:r.category,language:r.language};t?(await TB(e,D,r.file,r.existingFileUrl,O=>g(O)),alert("Form updated successfully!")):(await AB(D,r.file,O=>g(O)),alert("Form uploaded successfully!")),n("/admin/forms")}catch(D){console.error("Error saving form:",D),alert(`Failed to ${t?"update":"upload"} form: ${D.message}`)}finally{h(!1),g(0)}};return s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>n("/admin/forms"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(xo,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:t?"Edit Form":"Upload New Form"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t?"Update form information":"Upload a new downloadable form"})]})]})}),s.jsxs("form",{onSubmit:j,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"PDF File Upload"}),s.jsxs("div",{className:"space-y-4",children:[r.fileName?s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 border border-gray-300 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(fr,{className:"w-8 h-8 text-red-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-800",children:r.fileName}),s.jsx("p",{className:"text-sm text-gray-500",children:"PDF Document"})]})]}),s.jsx("button",{type:"button",onClick:T,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:s.jsx(ni,{className:"w-5 h-5"})})]}):s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[s.jsx(tm,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 mb-2",children:"Click to upload or drag and drop"}),s.jsx("p",{className:"text-sm text-gray-500",children:"PDF up to 10MB"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block",children:s.jsx("input",{type:"file",accept:".pdf,application/pdf",onChange:b,className:`block w-full text-sm text-gray-500
                    file:mr-4 file:py-2 file:px-4
                    file:rounded-lg file:border-0
                    file:text-sm file:font-semibold
                    file:bg-gradient-to-r file:from-orange-500 file:to-orange-600
                    file:text-white hover:file:from-orange-600 hover:file:to-orange-700
                    file:cursor-pointer cursor-pointer`})}),o.file&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.file})]}),u&&f>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[s.jsx("span",{children:"Uploading..."}),s.jsxs("span",{children:[f,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 h-2 rounded-full transition-all duration-300",style:{width:`${f}%`}})})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Form Title (English) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:r.titleEn,onChange:S=>x("titleEn",S.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter form title in English"}),o.titleEn&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.titleEn})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Form Title (Marathi)"}),s.jsx("input",{type:"text",value:r.titleMr,onChange:S=>x("titleMr",S.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"    "})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Category ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"category",value:r.category,onChange:v,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"CERTIFICATE",children:"Certificate"}),s.jsx("option",{value:"APPLICATION",children:"Application"}),s.jsx("option",{value:"TAX",children:"Tax"}),s.jsx("option",{value:"LICENSE",children:"License"}),s.jsx("option",{value:"OTHER",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Language ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"language",value:r.language,onChange:v,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"ENGLISH",children:"English Only"}),s.jsx("option",{value:"MARATHI",children:"Marathi Only"}),s.jsx("option",{value:"BOTH",children:"Both Languages"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Description"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description (English) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{rows:4,value:r.descriptionEn,onChange:S=>x("descriptionEn",S.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Describe the form and its purpose in English"}),o.descriptionEn&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.descriptionEn})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Marathi)"}),s.jsx("textarea",{rows:4,value:r.descriptionMr,onChange:S=>x("descriptionMr",S.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"      "})]})]})]}),s.jsxs("div",{className:"flex gap-4 justify-end",children:[s.jsx("button",{type:"button",onClick:()=>n("/admin/forms"),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",disabled:u,children:"Cancel"}),s.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:u,children:[s.jsx(Bs,{className:"w-4 h-4"}),u?t?"Updating...":"Uploading...":t?"Update Form":"Upload Form"]})]})]})]})}const oz=n=>{document.querySelectorAll("link[rel*='icon']").forEach(r=>r.remove());const t=document.createElement("link");t.rel="icon",t.type="image/png",t.href=n,document.head.appendChild(t),console.log("Favicon updated to:",n)};function lz(){const{refresh:n}=iu(),[e,t]=W.useState({panchayatName:{en:"",mr:""},tagline:{en:"",mr:""},phone:"",email:"",address:{en:"",mr:""},officeTimings:{en:"",mr:""},facebook:"",twitter:"",instagram:"",officePhoto:"",googleMapsLink:"",logo:""}),[r,a]=W.useState({}),[o,c]=W.useState(!1),[u,h]=W.useState(!0),[f,g]=W.useState(!1),[x,v]=W.useState(null),[b,T]=W.useState(""),[E,j]=W.useState(null),[S,D]=W.useState("");W.useEffect(()=>{(async()=>{try{h(!0);const C=await Rx();C?(t({panchayatName:C.panchayatName||{en:"",mr:""},tagline:C.tagline||{en:"",mr:""},phone:C.contact?.phone||"",email:C.contact?.email||"",address:C.contact?.address||{en:"",mr:""},officeTimings:C.officeTimings||{en:"",mr:""},facebook:C.socialMedia?.facebook||"",twitter:C.socialMedia?.twitter||"",instagram:C.socialMedia?.instagram||"",officePhoto:C.officePhoto||"",googleMapsLink:C.googleMapsLink||"",logo:C.logo||""}),T(C.officePhoto||""),D(C.logo||"")):t({panchayatName:Ds.panchayatName,tagline:Ds.tagline,phone:Ds.contact.phone,email:Ds.contact.email,address:Ds.contact.address,officeTimings:Ds.officeTimings,facebook:Ds.socialMedia.facebook,twitter:Ds.socialMedia.twitter,instagram:Ds.socialMedia.instagram,officePhoto:"",googleMapsLink:""})}catch(C){console.error("Error loading settings:",C),t({panchayatName:Ds.panchayatName,tagline:Ds.tagline,phone:Ds.contact.phone,email:Ds.contact.email,address:Ds.contact.address,officeTimings:Ds.officeTimings,facebook:Ds.socialMedia.facebook,twitter:Ds.socialMedia.twitter,instagram:Ds.socialMedia.instagram})}finally{h(!1)}})()},[]);const O=(L,C)=>{t(P=>({...P,[L]:C})),r[L]&&a(P=>{const V={...P};return delete V[L],V})},B=L=>{const C=L.target.files[0];if(C){v(C);const P=new FileReader;P.onloadend=()=>{T(P.result)},P.readAsDataURL(C)}},re=L=>{const C=L.target.files[0];if(C){if(!C.type.startsWith("image/")){alert("Please select an image file");return}if(C.size>2*1024*1024){alert("Logo size should be less than 2MB");return}j(C);const P=new FileReader;P.onloadend=()=>{D(P.result)},P.readAsDataURL(C)}},ae=()=>{v(null),T(""),t(L=>({...L,officePhoto:""}))},G=()=>{j(null),D(""),t(L=>({...L,logo:""}))},M=()=>{const L={};return e.panchayatName.en.trim()||(L.panchayatName="Panchayat name is required"),e.tagline.en.trim()||(L.tagline="Tagline is required"),e.phone.trim()?/^\+?[\d\s-]{10,}$/.test(e.phone)||(L.phone="Invalid phone number"):L.phone="Phone number is required",e.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(L.email="Invalid email address"):L.email="Email is required",e.address.en.trim()||(L.address="Address is required"),e.officeTimings.en.trim()||(L.officeTimings="Office timings are required"),a(L),Object.keys(L).length===0},k=async L=>{if(L.preventDefault(),!!M()){g(!0);try{let C=e.officePhoto,P=e.logo;if(E){if(e.logo)try{await Kg(e.logo)}catch(oe){console.warn("Failed to delete old logo:",oe)}P=await Wg(E,"site/logos")}if(x){if(e.officePhoto)try{await Kg(e.officePhoto)}catch(oe){console.warn("Failed to delete old office photo:",oe)}C=await Wg(x,"site")}const V={panchayatName:e.panchayatName,tagline:e.tagline,logo:P,contact:{phone:e.phone,email:e.email,address:e.address},officeTimings:e.officeTimings,socialMedia:{facebook:e.facebook,twitter:e.twitter,instagram:e.instagram},officePhoto:C,googleMapsLink:e.googleMapsLink};await uT(V),P&&oz(P),await n(),console.log("Settings saved successfully!",V),c(!0),setTimeout(()=>{c(!1),window.location.reload()},1e3)}catch(C){console.error("Error saving settings:",C),alert("Failed to save settings. Please try again.")}finally{g(!1)}}};return u?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Site Settings"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Configure your Gram Panchayat website settings"})]})}),o&&s.jsx("div",{className:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg",children:" Settings saved successfully! Reloading page..."}),s.jsxs("form",{onSubmit:k,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx(gl,{className:"text-primary-600",size:24}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Basic Information"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(jn,{label:"Panchayat Name",name:"panchayatName",value:e.panchayatName,onChange:L=>O("panchayatName",L),required:!0,placeholder:"e.g., Gram Panchayat Pindkepar Lodha"}),r.panchayatName&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.panchayatName}),s.jsx(jn,{label:"Tagline",name:"tagline",value:e.tagline,onChange:L=>O("tagline",L),required:!0,placeholder:"e.g., Progress with Tradition"}),r.tagline&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.tagline})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx(na,{className:"text-primary-600",size:24}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Logo & Branding"})]}),s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gram Panchayat Logo"}),s.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Upload your Gram Panchayat logo. This will appear in the header and as the favicon. Recommended size: 200x200px, PNG or JPG format."}),S?s.jsxs("div",{className:"relative inline-block",children:[s.jsx("img",{src:S,alt:"Logo Preview",className:"w-32 h-32 object-contain rounded-lg border-2 border-gray-300 bg-white p-2"}),s.jsx("button",{type:"button",onClick:G,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:s.jsx(ni,{size:16})})]}):s.jsx("div",{className:"flex items-center justify-center w-full",children:s.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors",children:[s.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[s.jsx(na,{className:"w-10 h-10 mb-3 text-gray-400"}),s.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[s.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),s.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG (MAX. 2MB)"})]}),s.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:re})]})})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx(co,{className:"text-primary-600",size:24}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Contact Information"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"tel",value:e.phone,onChange:L=>O("phone",L.target.value),placeholder:"+91 1234567890",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),r.phone&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.phone})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"email",value:e.email,onChange:L=>O("email",L.target.value),placeholder:"contact@grampanchayat.gov.in",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),r.email&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.email})]}),s.jsx(jn,{label:"Address",name:"address",type:"textarea",rows:3,value:e.address,onChange:L=>O("address",L),required:!0,placeholder:"Village, Taluka, District, State, PIN"}),r.address&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.address}),s.jsx(jn,{label:"Office Timings",name:"officeTimings",value:e.officeTimings,onChange:L=>O("officeTimings",L),required:!0,placeholder:"e.g., Mon-Fri: 10:00 AM - 5:00 PM"}),r.officeTimings&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.officeTimings}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xl,{size:16,className:"text-primary-600"}),"Google Maps Embed Link"]})}),s.jsx("input",{type:"url",value:e.googleMapsLink,onChange:L=>O("googleMapsLink",L.target.value),placeholder:"https://www.google.com/maps/embed?pb=...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'To get the embed link: Go to Google Maps  Search your location  Click "Share"  Click "Embed a map"  Copy the iframe src URL'})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx(na,{className:"text-primary-600",size:24}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Office Photo"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Upload a photo of your Gram Panchayat office. This will be displayed on the Panchayat page."}),b&&s.jsxs("div",{className:"relative inline-block",children:[s.jsx("img",{src:b,alt:"Office",className:"w-full max-w-md h-64 object-cover rounded-lg border-2 border-gray-300"}),s.jsx("button",{type:"button",onClick:ae,className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition-colors shadow-lg",children:s.jsx(ni,{size:20})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:b?"Change Photo":"Upload Photo"}),s.jsx("input",{type:"file",accept:"image/*",onChange:B,className:`block w-full text-sm text-gray-500
                  file:mr-4 file:py-2 file:px-4
                  file:rounded-lg file:border-0
                  file:text-sm file:font-semibold
                  file:bg-primary-50 file:text-primary-700
                  hover:file:bg-primary-100
                  cursor-pointer`}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Recommended: 1200x800px or larger, JPG or PNG format"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx(C2,{className:"text-primary-600",size:24}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Social Media Links"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(C2,{size:16,className:"inline mr-2"}),"Facebook URL"]}),s.jsx("input",{type:"url",value:e.facebook,onChange:L=>O("facebook",L.target.value),placeholder:"https://facebook.com/yourpage",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(ET,{size:16,className:"inline mr-2"}),"Twitter URL"]}),s.jsx("input",{type:"url",value:e.twitter,onChange:L=>O("twitter",L.target.value),placeholder:"https://twitter.com/yourhandle",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(QU,{size:16,className:"inline mr-2"}),"Instagram URL"]}),s.jsx("input",{type:"url",value:e.instagram,onChange:L=>O("instagram",L.target.value),placeholder:"https://instagram.com/yourprofile",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]})]}),s.jsx("div",{className:"flex justify-end gap-4",children:s.jsxs("button",{type:"submit",disabled:f,className:"flex items-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50",children:[s.jsx(Bs,{size:20}),f?"Saving...":"Save Settings"]})})]})]})}const cz=async()=>{try{const n=Ht(Ke,$t.grievances()),e=Es(n,lc("createdAt","desc")),t=await Nr(e),r=[];return t.forEach(a=>{r.push({id:a.id,...a.data()})}),r}catch(n){throw console.error("Error fetching grievances:",n),n}};function uz(){const n=Tr(),[e,t]=W.useState([]),[r,a]=W.useState(!0);W.useEffect(()=>{o()},[]);const o=async()=>{try{const B=await cz();t(B)}catch(B){console.error("Error loading grievances:",B)}finally{a(!1)}},[c,u]=W.useState(""),[h,f]=W.useState("ALL"),[g,x]=W.useState("ALL"),[v,b]=W.useState("ALL"),T=e.filter(B=>{const re=B.title.en.toLowerCase().includes(c.toLowerCase())||B.title.mr.toLowerCase().includes(c.toLowerCase())||B.submittedBy.toLowerCase().includes(c.toLowerCase()),ae=h==="ALL"||B.status===h,G=g==="ALL"||B.category===g,M=v==="ALL"||B.priority===v;return re&&ae&&G&&M}),E=B=>{window.confirm("Are you sure you want to delete this grievance?")&&t(e.filter(re=>re.id!==B))},j=B=>{const re={PENDING:"bg-yellow-100 text-yellow-700 border-yellow-300",IN_PROGRESS:"bg-blue-100 text-blue-700 border-blue-300",RESOLVED:"bg-green-100 text-green-700 border-green-300",REJECTED:"bg-red-100 text-red-700 border-red-300"},ae={PENDING:s.jsx(Jf,{className:"w-3 h-3"}),IN_PROGRESS:s.jsx(Qn,{className:"w-3 h-3"}),RESOLVED:s.jsx(Gi,{className:"w-3 h-3"}),REJECTED:s.jsx(dh,{className:"w-3 h-3"})};return s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium border flex items-center gap-1 ${re[B]}`,children:[ae[B],B.replace("_"," ")]})},S=B=>{const re={LOW:"bg-gray-100 text-gray-700",MEDIUM:"bg-orange-100 text-orange-700",HIGH:"bg-red-100 text-red-700"};return s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${re[B]}`,children:B})},D=B=>{const re={WATER:"bg-blue-100 text-blue-700",ROAD:"bg-gray-100 text-gray-700",ELECTRICITY:"bg-yellow-100 text-yellow-700",SANITATION:"bg-green-100 text-green-700",TAX:"bg-purple-100 text-purple-700",OTHER:"bg-pink-100 text-pink-700"};return s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${re[B]}`,children:B})},O=B=>B?new Date(B).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A";return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Grievances Management"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage citizen complaints and feedback"})]}),s.jsxs("button",{onClick:()=>n("/admin/grievances/new"),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all shadow-md hover:shadow-lg",children:[s.jsx(Ss,{className:"w-5 h-5"}),"Add Grievance"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-lg",children:s.jsx(Jf,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.filter(B=>B.status==="PENDING").length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg",children:s.jsx(Qn,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.filter(B=>B.status==="IN_PROGRESS").length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-600 to-green-700 rounded-lg",children:s.jsx(Gi,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Resolved"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.filter(B=>B.status==="RESOLVED").length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg",children:s.jsx(If,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.length})]})]})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6 border border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search grievances...",value:c,onChange:B=>u(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),s.jsx("div",{children:s.jsxs("select",{value:h,onChange:B=>f(B.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"ALL",children:"All Status"}),s.jsx("option",{value:"PENDING",children:"Pending"}),s.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),s.jsx("option",{value:"RESOLVED",children:"Resolved"}),s.jsx("option",{value:"REJECTED",children:"Rejected"})]})}),s.jsx("div",{children:s.jsxs("select",{value:g,onChange:B=>x(B.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"ALL",children:"All Categories"}),s.jsx("option",{value:"WATER",children:"Water"}),s.jsx("option",{value:"ROAD",children:"Road"}),s.jsx("option",{value:"ELECTRICITY",children:"Electricity"}),s.jsx("option",{value:"SANITATION",children:"Sanitation"}),s.jsx("option",{value:"TAX",children:"Tax"}),s.jsx("option",{value:"OTHER",children:"Other"})]})}),s.jsx("div",{children:s.jsxs("select",{value:v,onChange:B=>b(B.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"ALL",children:"All Priorities"}),s.jsx("option",{value:"HIGH",children:"High"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"LOW",children:"Low"})]})})]})}),s.jsx("div",{className:"space-y-4",children:T.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center border border-gray-200",children:[s.jsx(If,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No Grievances Found"}),s.jsx("p",{className:"text-gray-500 mb-4",children:c||h!=="ALL"||g!=="ALL"||v!=="ALL"?"Try adjusting your filters":"Get started by adding your first grievance"}),!c&&h==="ALL"&&g==="ALL"&&v==="ALL"&&s.jsx("button",{onClick:()=>n("/admin/grievances/new"),className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all",children:"Add Grievance"})]}):T.map(B=>s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:[j(B.status),S(B.priority),D(B.category)]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-1",children:B.title.en}),s.jsx("p",{className:"text-base text-gray-600 mb-3",children:B.title.mr}),s.jsx("p",{className:"text-gray-700 mb-2",children:B.description.en}),s.jsx("p",{className:"text-gray-600 text-sm mb-4",children:B.description.mr}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600 mb-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Submitted By:"})," ",B.submittedBy]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Phone:"})," ",B.phone]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Email:"})," ",B.email]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Address:"})," ",B.address]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Submitted Date:"})," ",O(B.submittedDate)]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Assigned To:"})," ",B.assignedTo]})]}),B.response&&s.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Response:"}),s.jsx("p",{className:"text-blue-800 text-sm",children:B.response.en}),s.jsx("p",{className:"text-blue-700 text-xs mt-1",children:B.response.mr})]}),B.resolvedDate&&s.jsxs("div",{className:"mt-2 text-sm text-green-700",children:[s.jsx("span",{className:"font-medium",children:"Resolved on:"})," ",O(B.resolvedDate)]})]}),s.jsxs("div",{className:"flex gap-2 ml-4",children:[s.jsx("button",{onClick:()=>n(`/admin/grievances/edit/${B.id}`),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:s.jsx(bp,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>E(B.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:s.jsx(ti,{className:"w-5 h-5"})})]})]})},B.id))})]})}function U4(){const n=Tr(),{id:e}=bl(),t=!!e,[r,a]=W.useState(!1),[o,c]=W.useState(!1),[u,h]=W.useState({title:{en:"",mr:""},description:{en:"",mr:""},category:"OTHER",status:"PENDING",priority:"MEDIUM",submittedBy:"",phone:"",email:"",address:"",submittedDate:new Date().toISOString().split("T")[0],resolvedDate:"",assignedTo:"",response:{en:"",mr:""}}),[f,g]=W.useState({});W.useEffect(()=>{t&&h({title:{en:"Water Supply Issue",mr:" "},description:{en:"No water supply for the last 3 days",mr:"    "},category:"WATER",status:"PENDING",priority:"HIGH",submittedBy:"Ramesh Kumar",phone:"+91 9876543210",email:"ramesh@example.com",address:"Village Road, Area 1",submittedDate:"2024-11-15",resolvedDate:"",assignedTo:"Water Department",response:{en:"",mr:""}})},[e,t]);const x=(E,j)=>{h(S=>({...S,[E]:j})),f[E]&&g(S=>({...S,[E]:""}))},v=E=>{const{name:j,value:S}=E.target;h(D=>({...D,[j]:S})),f[j]&&g(D=>({...D,[j]:""}))},b=()=>{const E={};return u.title.en.trim()||(E.title="Title is required"),u.description.en.trim()||(E.description="Description is required"),u.submittedBy.trim()||(E.submittedBy="Name is required"),u.phone.trim()?/^\+?[\d\s-]{10,}$/.test(u.phone)||(E.phone="Invalid phone number"):E.phone="Phone number is required",u.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u.email)||(E.email="Invalid email address"):E.email="Email is required",u.address.trim()||(E.address="Address is required"),u.submittedDate||(E.submittedDate="Submitted date is required"),u.assignedTo.trim()||(E.assignedTo="Department assignment is required"),u.status==="RESOLVED"&&!u.resolvedDate&&(E.resolvedDate="Resolved date is required when status is Resolved"),g(E),Object.keys(E).length===0},T=E=>{if(E.preventDefault(),!b())return;const j={id:t?parseInt(e):Date.now(),title:u.title,description:u.description,category:u.category,status:u.status,priority:u.priority,submittedBy:u.submittedBy,phone:u.phone,email:u.email,address:u.address,submittedDate:u.submittedDate,resolvedDate:u.resolvedDate||null,assignedTo:u.assignedTo,response:u.response.en&&u.response.mr?u.response:null};console.log(t?"Updating grievance:":"Creating grievance:",j),n("/admin/grievances")};return s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>n("/admin/grievances"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(xo,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:t?"Edit Grievance":"Add New Grievance"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t?"Update grievance information and status":"Record a new citizen grievance"})]})]})}),r?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s.jsx(s.Fragment,{children:s.jsxs("form",{onSubmit:T,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Grievance Details"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(jn,{label:"Grievance Title",name:"title",value:u.title,onChange:E=>x("title",E),required:!0,placeholder:"Enter grievance title"}),f.title&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.title})]}),s.jsxs("div",{children:[s.jsx(jn,{label:"Description",name:"description",type:"textarea",rows:4,value:u.description,onChange:E=>x("description",E),required:!0,placeholder:"Describe the grievance in detail"}),f.description&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.description})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Category ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"category",value:u.category,onChange:v,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"WATER",children:"Water"}),s.jsx("option",{value:"ROAD",children:"Road"}),s.jsx("option",{value:"ELECTRICITY",children:"Electricity"}),s.jsx("option",{value:"SANITATION",children:"Sanitation"}),s.jsx("option",{value:"TAX",children:"Tax"}),s.jsx("option",{value:"OTHER",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Priority ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"priority",value:u.priority,onChange:v,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"LOW",children:"Low"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"HIGH",children:"High"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Status ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"status",value:u.status,onChange:v,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"PENDING",children:"Pending"}),s.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),s.jsx("option",{value:"RESOLVED",children:"Resolved"}),s.jsx("option",{value:"REJECTED",children:"Rejected"})]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Citizen Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Submitted By ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"submittedBy",value:u.submittedBy,onChange:v,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${f.submittedBy?"border-red-500":"border-gray-300"}`,placeholder:"Enter citizen name"}),f.submittedBy&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.submittedBy})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"tel",name:"phone",value:u.phone,onChange:v,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${f.phone?"border-red-500":"border-gray-300"}`,placeholder:"+91 9876543210"}),f.phone&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.phone})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"email",name:"email",value:u.email,onChange:v,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${f.email?"border-red-500":"border-gray-300"}`,placeholder:"citizen@example.com"}),f.email&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.email})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Address ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"address",value:u.address,onChange:v,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${f.address?"border-red-500":"border-gray-300"}`,placeholder:"Enter full address"}),f.address&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.address})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Management Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Assigned To ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"assignedTo",value:u.assignedTo,onChange:v,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${f.assignedTo?"border-red-500":"border-gray-300"}`,placeholder:"Department or Officer name"}),f.assignedTo&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.assignedTo})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Submitted Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",name:"submittedDate",value:u.submittedDate,onChange:v,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${f.submittedDate?"border-red-500":"border-gray-300"}`}),f.submittedDate&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.submittedDate})]}),u.status==="RESOLVED"&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Resolved Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",name:"resolvedDate",value:u.resolvedDate,onChange:v,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${f.resolvedDate?"border-red-500":"border-gray-300"}`}),f.resolvedDate&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.resolvedDate})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Response (Optional)"}),s.jsx("div",{children:s.jsx(jn,{label:"Response",name:"response",type:"textarea",rows:3,value:u.response,onChange:E=>x("response",E),placeholder:"Enter response or action taken"})})]}),s.jsxs("div",{className:"flex gap-4 justify-end",children:[s.jsx("button",{type:"button",onClick:()=>n("/admin/grievances"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:o,children:"Cancel"}),s.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:o,children:[s.jsx(Bs,{className:"w-4 h-4"}),o?"Saving...":t?"Update Grievance":"Submit Grievance"]})]})]})})]})}const dz=()=>{const{language:n}=ms(),e=Tr(),[t,r]=W.useState([]),[a,o]=W.useState(!0),[c,u]=W.useState(""),[h,f]=W.useState("ALL"),[g,x]=W.useState("ALL"),[v,b]=W.useState({start:"",end:""});W.useEffect(()=>{(async()=>{try{o(!0);const G=await OT();r(G)}catch(G){console.error("Error loading transactions:",G),alert("Failed to load transactions")}finally{o(!1)}})()},[]);const T={totalIncome:t.filter(ae=>ae.type==="INCOME").reduce((ae,G)=>ae+G.amount,0),totalExpense:t.filter(ae=>ae.type==="EXPENSE").reduce((ae,G)=>ae+G.amount,0),balance:0,transactionCount:t.length};T.balance=T.totalIncome-T.totalExpense;const E=t.filter(ae=>{const G=ae.description.toLowerCase().includes(c.toLowerCase())||ae.descriptionMr.includes(c)||ae.subcategory.toLowerCase().includes(c.toLowerCase())||ae.referenceNumber.toLowerCase().includes(c.toLowerCase()),M=h==="ALL"||ae.type===h,k=g==="ALL"||ae.category===g,L=(!v.start||ae.transactionDate>=v.start)&&(!v.end||ae.transactionDate<=v.end);return G&&M&&k&&L}),j=async ae=>{if(window.confirm(n==="en"?"Are you sure you want to delete this transaction?":"        ?"))try{await BB(ae),r(t.filter(G=>G.id!==ae))}catch(G){console.error("Error deleting transaction:",G),alert("Failed to delete transaction")}},S=ae=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(ae),D=ae=>new Date(ae).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),O=ae=>{switch(ae){case"INCOME":return"bg-green-100 text-green-800 border-green-300";case"EXPENSE":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},B=ae=>{switch(ae){case"TAX":return s.jsx(Dx,{size:16});case"GRANT":return s.jsx(vV,{size:16});case"SALARY":return s.jsx(L2,{size:16});case"INFRASTRUCTURE":return s.jsx(Xd,{size:16});case"UTILITIES":return s.jsx(_g,{size:16});default:return s.jsx(fr,{size:16})}},re=()=>{alert(n==="en"?"Export functionality will be implemented":"    ")};return a?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-[#ff6b00]"})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:n==="en"?"Financial Management":" "}),s.jsx("p",{className:"text-gray-600 mt-1",children:n==="en"?"Track income, expenses, and budgets":",     "})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:re,className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-[#138808] text-[#138808] rounded-lg hover:bg-[#138808] hover:text-white transition-colors",children:[s.jsx(zo,{size:20}),n==="en"?"Export Report":"  "]}),s.jsxs(_n,{to:"/admin/financials/new",className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-[#ff6b00] to-[#ff8533] text-white rounded-lg hover:shadow-lg transition-all",children:[s.jsx(Ss,{size:20}),n==="en"?"Add Transaction":" "]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-xl border-2 border-green-300 shadow-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"p-3 bg-green-500 rounded-lg",children:s.jsx(Xd,{className:"text-white",size:24})}),s.jsx("span",{className:"text-green-700 font-semibold",children:n==="en"?"Income":""})]}),s.jsx("div",{className:"text-3xl font-bold text-green-800",children:S(T.totalIncome)}),s.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[t.filter(ae=>ae.type==="INCOME").length," ",n==="en"?"transactions":""]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 p-6 rounded-xl border-2 border-red-300 shadow-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"p-3 bg-red-500 rounded-lg",children:s.jsx(_g,{className:"text-white",size:24})}),s.jsx("span",{className:"text-red-700 font-semibold",children:n==="en"?"Expense":""})]}),s.jsx("div",{className:"text-3xl font-bold text-red-800",children:S(T.totalExpense)}),s.jsxs("div",{className:"text-sm text-red-600 mt-1",children:[t.filter(ae=>ae.type==="EXPENSE").length," ",n==="en"?"transactions":""]})]}),s.jsxs("div",{className:`bg-gradient-to-br ${T.balance>=0?"from-blue-50 to-blue-100 border-blue-300":"from-orange-50 to-orange-100 border-orange-300"} p-6 rounded-xl border-2 shadow-md`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:`p-3 ${T.balance>=0?"bg-blue-500":"bg-orange-500"} rounded-lg`,children:s.jsx(L2,{className:"text-white",size:24})}),s.jsx("span",{className:`${T.balance>=0?"text-blue-700":"text-orange-700"} font-semibold`,children:n==="en"?"Balance":""})]}),s.jsx("div",{className:`text-3xl font-bold ${T.balance>=0?"text-blue-800":"text-orange-800"}`,children:S(T.balance)}),s.jsx("div",{className:`text-sm ${T.balance>=0?"text-blue-600":"text-orange-600"} mt-1`,children:T.balance>=0?n==="en"?"Surplus":"":n==="en"?"Deficit":""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-xl border-2 border-purple-300 shadow-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"p-3 bg-purple-500 rounded-lg",children:s.jsx(fr,{className:"text-white",size:24})}),s.jsx("span",{className:"text-purple-700 font-semibold",children:n==="en"?"Total":""})]}),s.jsx("div",{className:"text-3xl font-bold text-purple-800",children:T.transactionCount}),s.jsx("div",{className:"text-sm text-purple-600 mt-1",children:n==="en"?"Transactions":""})]})]}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6 border-2 border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsx("div",{className:"md:col-span-2",children:s.jsxs("div",{className:"relative",children:[s.jsx(Hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:n==="en"?"Search transactions...":" ...",value:c,onChange:ae=>u(ae.target.value),className:"w-full pl-10 pr-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]})}),s.jsx("div",{children:s.jsxs("select",{value:h,onChange:ae=>f(ae.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]",children:[s.jsx("option",{value:"ALL",children:n==="en"?"All Types":" "}),s.jsx("option",{value:"INCOME",children:n==="en"?"Income":""}),s.jsx("option",{value:"EXPENSE",children:n==="en"?"Expense":""})]})}),s.jsx("div",{children:s.jsxs("select",{value:g,onChange:ae=>x(ae.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]",children:[s.jsx("option",{value:"ALL",children:n==="en"?"All Categories":" "}),s.jsx("option",{value:"TAX",children:n==="en"?"Tax":""}),s.jsx("option",{value:"GRANT",children:n==="en"?"Grant":""}),s.jsx("option",{value:"SALARY",children:n==="en"?"Salary":""}),s.jsx("option",{value:"INFRASTRUCTURE",children:n==="en"?"Infrastructure":" "}),s.jsx("option",{value:"UTILITIES",children:n==="en"?"Utilities":""}),s.jsx("option",{value:"OTHER",children:n==="en"?"Other":""})]})}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("input",{type:"date",value:v.start,onChange:ae=>b({...v,start:ae.target.value}),className:"flex-1 px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00] text-sm"}),s.jsx("span",{className:"text-gray-500",children:"-"}),s.jsx("input",{type:"date",value:v.end,onChange:ae=>b({...v,end:ae.target.value}),className:"flex-1 px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00] text-sm"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md border-2 border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gradient-to-r from-[#ff6b00] to-[#ff8533] text-white",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:n==="en"?"Date":""}),s.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:n==="en"?"Type":""}),s.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:n==="en"?"Category":""}),s.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:n==="en"?"Description":""}),s.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:n==="en"?"Party":""}),s.jsx("th",{className:"px-6 py-4 text-right font-semibold",children:n==="en"?"Amount":""}),s.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:n==="en"?"Payment Mode":" "}),s.jsx("th",{className:"px-6 py-4 text-center font-semibold",children:n==="en"?"Actions":""})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:E.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"8",className:"px-6 py-12 text-center text-gray-500",children:n==="en"?"No transactions found. Add your first transaction!":"   .    !"})}):E.map(ae=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[s.jsx(Zr,{size:16,className:"text-gray-400"}),D(ae.transactionDate)]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold border ${O(ae.type)}`,children:ae.type==="INCOME"?s.jsxs(s.Fragment,{children:[s.jsx(Xd,{size:14}),n==="en"?"Income":""]}):s.jsxs(s.Fragment,{children:[s.jsx(_g,{size:14}),n==="en"?"Expense":""]})})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[B(ae.category),s.jsx("span",{className:"text-gray-700",children:n==="en"?ae.subcategory:ae.subcategoryMr})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"max-w-xs",children:[s.jsx("p",{className:"text-gray-700 line-clamp-2",children:n==="en"?ae.description:ae.descriptionMr}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ae.referenceNumber})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"text-gray-700",children:ae.type==="INCOME"?n==="en"?ae.receivedFrom:ae.receivedFromMr:n==="en"?ae.paidTo:ae.paidToMr})}),s.jsx("td",{className:"px-6 py-4 text-right",children:s.jsxs("span",{className:`font-bold text-lg ${ae.type==="INCOME"?"text-green-600":"text-red-600"}`,children:[ae.type==="INCOME"?"+":"-"," ",S(ae.amount)]})}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("span",{className:"text-sm text-gray-600",children:ae.paymentMode.replace("_"," ")}),ae.attachment&&s.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-600 mt-1",children:[s.jsx(fr,{size:12}),n==="en"?"Attachment":""]})]}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("button",{onClick:()=>e(`/admin/financials/edit/${ae.id}`),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:n==="en"?"Edit":" ",children:s.jsx(ud,{size:18})}),s.jsx("button",{onClick:()=>j(ae.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:n==="en"?"Delete":"",children:s.jsx(ti,{size:18})})]})})]},ae.id))})]})})})]})},V4=()=>{const{language:n}=ms(),e=Tr(),{id:t}=bl(),r=!!t,[a,o]=W.useState(!1),[c,u]=W.useState({type:"INCOME",category:"TAX",subcategory:"",subcategoryMr:"",amount:"",description:"",descriptionMr:"",transactionDate:new Date().toISOString().split("T")[0],paymentMode:"CASH",referenceNumber:"",receivedFrom:"",receivedFromMr:"",paidTo:"",paidToMr:"",attachment:null,remarks:"",remarksMr:""}),[h,f]=W.useState({}),[g,x]=W.useState(null),v={TAX:{en:"Tax",mr:"",subcategories:[{en:"Property Tax",mr:" "},{en:"Water Tax",mr:" "},{en:"Trade License",mr:" "},{en:"Building Permission",mr:" "}]},GRANT:{en:"Grant",mr:"",subcategories:[{en:"Central Government Grant",mr:"  "},{en:"State Government Grant",mr:"  "},{en:"District Grant",mr:" "},{en:"Special Grant",mr:" "}]},FEES:{en:"Fees & Charges",mr:"  ",subcategories:[{en:"Birth/Death Certificate",mr:"/ "},{en:"Other Certificates",mr:" "},{en:"Rent Income",mr:" "},{en:"Advertisement Fees",mr:" "}]},DONATION:{en:"Donation",mr:"",subcategories:[{en:"CSR Donation",mr:"CSR "},{en:"Individual Donation",mr:" "},{en:"Organization Donation",mr:" "}]},OTHER:{en:"Other Income",mr:" ",subcategories:[{en:"Miscellaneous",mr:""}]}},b={SALARY:{en:"Salary & Wages",mr:"  ",subcategories:[{en:"Staff Salaries",mr:" "},{en:"Daily Wages",mr:" "},{en:"Honorarium",mr:""},{en:"Allowances",mr:""}]},INFRASTRUCTURE:{en:"Infrastructure",mr:" ",subcategories:[{en:"Road Construction",mr:" "},{en:"Road Repair",mr:" "},{en:"Drainage Work",mr:" "},{en:"Street Lights",mr:" "},{en:"Water Supply",mr:" "},{en:"Building Maintenance",mr:" "}]},UTILITIES:{en:"Utilities",mr:"",subcategories:[{en:"Electricity Bill",mr:" "},{en:"Water Bill",mr:" "},{en:"Telephone/Internet",mr:"/"},{en:"Fuel",mr:""}]},SUPPLIES:{en:"Supplies & Materials",mr:"  ",subcategories:[{en:"Stationery",mr:" "},{en:"Office Supplies",mr:" "},{en:"Cleaning Materials",mr:" "},{en:"Equipment",mr:""}]},PROGRAMS:{en:"Programs & Schemes",mr:"  ",subcategories:[{en:"Health Programs",mr:" "},{en:"Education Programs",mr:" "},{en:"Social Welfare",mr:" "},{en:"Agriculture Programs",mr:" "}]},ADMINISTRATIVE:{en:"Administrative",mr:"",subcategories:[{en:"Legal Fees",mr:" "},{en:"Audit Fees",mr:" "},{en:"Insurance",mr:""},{en:"Bank Charges",mr:" "},{en:"Travel Expenses",mr:" "}]},OTHER:{en:"Other Expenses",mr:" ",subcategories:[{en:"Miscellaneous",mr:""}]}},T=[{value:"CASH",en:"Cash",mr:""},{value:"CHEQUE",en:"Cheque",mr:""},{value:"ONLINE",en:"Online Payment",mr:" "},{value:"NEFT",en:"NEFT",mr:"NEFT"},{value:"RTGS",en:"RTGS",mr:"RTGS"},{value:"IMPS",en:"IMPS",mr:"IMPS"},{value:"UPI",en:"UPI",mr:"UPI"},{value:"BANK_TRANSFER",en:"Bank Transfer",mr:" "},{value:"DD",en:"Demand Draft",mr:" "}];W.useEffect(()=>{(async()=>{if(r)try{o(!0);const L=await FB(t);if(L){const C=L.transactionDate?new Date(L.transactionDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0];u({...L,transactionDate:C}),L.attachment&&x(L.attachment)}else alert("Transaction not found"),e("/admin/financials")}catch(L){console.error("Error loading transaction:",L),alert("Failed to load transaction")}finally{o(!1)}})()},[t,r,e]);const E=()=>c.type==="INCOME"?v:b,j=()=>E()[c.category]?.subcategories||[],S=k=>{const{name:L,value:C}=k.target;u(P=>({...P,[L]:C})),h[L]&&f(P=>({...P,[L]:""}))},D=k=>{u(L=>({...L,type:k,category:k==="INCOME"?"TAX":"SALARY",subcategory:"",subcategoryMr:"",receivedFrom:"",receivedFromMr:"",paidTo:"",paidToMr:""}))},O=k=>{const L=k.target.value;u(C=>({...C,category:L,subcategory:"",subcategoryMr:""}))},B=k=>{const L=k.target.value;if(L!==""){const P=j()[parseInt(L)];u(V=>({...V,subcategory:P.en,subcategoryMr:P.mr}))}else u(C=>({...C,subcategory:"",subcategoryMr:""}))},re=k=>{const L=k.target.files[0];if(L){if(L.size>5*1024*1024){f(P=>({...P,attachment:n==="en"?"File size should not exceed 5MB":"  5MB   "}));return}if(!["application/pdf","image/jpeg","image/jpg","image/png"].includes(L.type)){f(P=>({...P,attachment:n==="en"?"Only PDF and image files are allowed":" PDF     "}));return}u(P=>({...P,attachment:L})),x(L.name),f(P=>({...P,attachment:""}))}},ae=()=>{const k={};return c.subcategory||(k.subcategory=n==="en"?"Subcategory is required":"  "),(!c.amount||parseFloat(c.amount)<=0)&&(k.amount=n==="en"?"Valid amount is required":"   "),c.description.trim()||(k.description=n==="en"?"Description is required":"  "),c.descriptionMr.trim()||(k.descriptionMr=n==="en"?"Marathi description is required":"   "),c.transactionDate||(k.transactionDate=n==="en"?"Transaction date is required":"   "),c.referenceNumber.trim()||(k.referenceNumber=n==="en"?"Reference number is required":"   "),c.type==="INCOME"?(c.receivedFrom.trim()||(k.receivedFrom=n==="en"?"Received from is required":"   "),c.receivedFromMr.trim()||(k.receivedFromMr=n==="en"?"Marathi received from is required":"   ")):(c.paidTo.trim()||(k.paidTo=n==="en"?"Paid to is required":"   "),c.paidToMr.trim()||(k.paidToMr=n==="en"?"Marathi paid to is required":"   ")),f(k),Object.keys(k).length===0},G=async k=>{if(k.preventDefault(),ae())try{o(!0),r?(await VB(t,c),alert(n==="en"?"Transaction updated successfully!":"   !")):(await UB(c),alert(n==="en"?"Transaction added successfully!":"  !")),e("/admin/financials")}catch(L){console.error("Error saving transaction:",L),alert(n==="en"?`Failed to ${r?"update":"add"} transaction: ${L.message}`:` ${r?"":""} : ${L.message}`)}finally{o(!1)}},M=k=>k?new Intl.NumberFormat("en-IN").format(k):"";return s.jsxs("div",{className:"p-6 max-w-5xl mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:r?n==="en"?"Edit Transaction":"  ":n==="en"?"Add New Transaction":"  "}),s.jsx("p",{className:"text-gray-600 mt-1",children:n==="en"?"Enter financial transaction details":"    "})]}),s.jsxs("form",{onSubmit:G,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx(_4,{className:"text-[#ff6b00]"}),n==="en"?"Transaction Type":" "]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("button",{type:"button",onClick:()=>D("INCOME"),className:`flex-1 p-4 rounded-lg border-2 transition-all ${c.type==="INCOME"?"bg-green-50 border-green-500 text-green-700":"bg-white border-gray-300 text-gray-600 hover:border-green-300"}`,children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("div",{className:"font-semibold",children:n==="en"?"Income":""}),s.jsx("div",{className:"text-sm",children:n==="en"?"Money Received":" "})]}),s.jsxs("button",{type:"button",onClick:()=>D("EXPENSE"),className:`flex-1 p-4 rounded-lg border-2 transition-all ${c.type==="EXPENSE"?"bg-red-50 border-red-500 text-red-700":"bg-white border-gray-300 text-gray-600 hover:border-red-300"}`,children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("div",{className:"font-semibold",children:n==="en"?"Expense":""}),s.jsx("div",{className:"text-sm",children:n==="en"?"Money Paid":" "})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx(fr,{className:"text-[#ff6b00]"}),n==="en"?"Transaction Details":" "]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Category":""," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("select",{name:"category",value:c.category,onChange:O,className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]",children:Object.entries(E()).map(([k,L])=>s.jsx("option",{value:k,children:n==="en"?L.en:L.mr},k))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Subcategory":""," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{onChange:B,value:j().findIndex(k=>k.en===c.subcategory),className:`w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${h.subcategory?"border-red-500":"border-gray-300"}`,children:[s.jsx("option",{value:"",children:n==="en"?"Select subcategory":" "}),j().map((k,L)=>s.jsx("option",{value:L,children:n==="en"?k.en:k.mr},L))]}),h.subcategory&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[s.jsx(Qn,{size:14})," ",h.subcategory]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Amount ()":" ()"," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Dx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"number",name:"amount",value:c.amount,onChange:S,placeholder:"0",className:`w-full pl-10 pr-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${h.amount?"border-red-500":"border-gray-300"}`})]}),c.amount&&s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:M(c.amount)}),h.amount&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[s.jsx(Qn,{size:14})," ",h.amount]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Transaction Date":" "," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Zr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"date",name:"transactionDate",value:c.transactionDate,onChange:S,className:`w-full pl-10 pr-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${h.transactionDate?"border-red-500":"border-gray-300"}`})]}),h.transactionDate&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[s.jsx(Qn,{size:14})," ",h.transactionDate]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Description (English)":" ()"," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{name:"description",value:c.description,onChange:S,rows:"3",placeholder:"Enter transaction description in English...",className:`w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${h.description?"border-red-500":"border-gray-300"}`}),h.description&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[s.jsx(Qn,{size:14})," ",h.description]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Description (Marathi)":" ()"," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{name:"descriptionMr",value:c.descriptionMr,onChange:S,rows:"3",placeholder:"    ...",className:`w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${h.descriptionMr?"border-red-500":"border-gray-300"}`}),h.descriptionMr&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[s.jsx(Qn,{size:14})," ",h.descriptionMr]})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx(_4,{className:"text-[#ff6b00]"}),n==="en"?"Payment Information":" "]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Payment Mode":" "," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("select",{name:"paymentMode",value:c.paymentMode,onChange:S,className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]",children:T.map(k=>s.jsx("option",{value:k.value,children:n==="en"?k.en:k.mr},k.value))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Reference Number":" "," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(zU,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",name:"referenceNumber",value:c.referenceNumber,onChange:S,placeholder:"REF/2025/001",className:`w-full pl-10 pr-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${h.referenceNumber?"border-red-500":"border-gray-300"}`})]}),h.referenceNumber&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[s.jsx(Qn,{size:14})," ",h.referenceNumber]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[c.type==="INCOME"?n==="en"?"Received From (English)":"  ()":n==="en"?"Paid To (English)":"  ()",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(nm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",name:c.type==="INCOME"?"receivedFrom":"paidTo",value:c.type==="INCOME"?c.receivedFrom:c.paidTo,onChange:S,placeholder:c.type==="INCOME"?"Name of payer...":"Name of payee...",className:`w-full pl-10 pr-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${(c.type==="INCOME"?h.receivedFrom:h.paidTo)?"border-red-500":"border-gray-300"}`})]}),(c.type==="INCOME"?h.receivedFrom:h.paidTo)&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[s.jsx(Qn,{size:14})," ",c.type==="INCOME"?h.receivedFrom:h.paidTo]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[c.type==="INCOME"?n==="en"?"Received From (Marathi)":"  ()":n==="en"?"Paid To (Marathi)":"  ()",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(nm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",name:c.type==="INCOME"?"receivedFromMr":"paidToMr",value:c.type==="INCOME"?c.receivedFromMr:c.paidToMr,onChange:S,placeholder:c.type==="INCOME"?" ...":" ...",className:`w-full pl-10 pr-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${(c.type==="INCOME"?h.receivedFromMr:h.paidToMr)?"border-red-500":"border-gray-300"}`})]}),(c.type==="INCOME"?h.receivedFromMr:h.paidToMr)&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[s.jsx(Qn,{size:14})," ",c.type==="INCOME"?h.receivedFromMr:h.paidToMr]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Attachment (Invoice, Receipt, etc.)":" (, , .)"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"flex-1 cursor-pointer",children:[s.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 border-2 rounded-lg hover:border-[#ff6b00] transition-colors ${h.attachment?"border-red-500":"border-gray-300"}`,children:[s.jsx(tm,{size:20,className:"text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:g||(n==="en"?"Choose file...":" ...")})]}),s.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:re,className:"hidden"})]}),g&&s.jsx("button",{type:"button",onClick:()=>{u(k=>({...k,attachment:null})),x(null)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:s.jsx(ni,{size:20})})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:n==="en"?"PDF or Image files only. Max size: 5MB":" PDF   .  : 5MB"}),h.attachment&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[s.jsx(Qn,{size:14})," ",h.attachment]})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:n==="en"?"Additional Notes (Optional)":"  ()"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Remarks (English)":" ()"}),s.jsx("textarea",{name:"remarks",value:c.remarks,onChange:S,rows:"3",placeholder:"Any additional notes...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Remarks (Marathi)":" ()"}),s.jsx("textarea",{name:"remarksMr",value:c.remarksMr,onChange:S,rows:"3",placeholder:"  ...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsxs("button",{type:"button",onClick:()=>e("/admin/financials"),className:"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",disabled:a,children:[s.jsx(ni,{size:20}),n==="en"?"Cancel":" "]}),s.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-[#138808] to-[#1aa910] text-white rounded-lg hover:shadow-lg transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:a,children:[s.jsx(Bs,{size:20}),a?n==="en"?"Saving...":"  ...":r?n==="en"?"Update Transaction":"  ":n==="en"?"Save Transaction":"  "]})]})]})]})},hz=()=>{const{language:n}=ms(),e=Tr(),[t,r]=W.useState({villageImage:"",description:{en:"Shivpur is a vibrant village located in the heart of Maharashtra. With a rich cultural heritage and a progressive outlook, our village has been at the forefront of rural development. The village is known for its agricultural productivity, community spirit, and commitment to education and social welfare.",mr:"        .             .    ,          ."},population:"5,000+",area:"15 sq km",households:"800+",history:{en:"Our village has a rich history spanning over 500 years. Founded during the Maratha Empire, Shivpur has witnessed significant historical events and has been home to many notable personalities. The village played an important role during the freedom struggle and continues to preserve its historical heritage.",mr:"        .                 .             ."},vision:{en:"To transform Shivpur into a model village that balances traditional values with modern development, ensuring prosperity, education, and well-being for all residents while preserving our cultural heritage and environment.",mr:"            ,          ,     ."},mission:{en:"Our mission is to provide quality infrastructure, promote sustainable agriculture, ensure access to education and healthcare, empower youth and women, and foster community participation in development initiatives.",mr:"      ,    ,       ,            ."},importantPlaces:[{id:1,name:{en:"Village Temple",mr:" "},description:{en:"Ancient temple dedicated to Lord Shiva, the spiritual center of our village",mr:"    ,    "},photoUrl:""},{id:2,name:{en:"Community Hall",mr:" "},description:{en:"Modern community hall for village meetings and cultural programs",mr:"       "},photoUrl:""},{id:3,name:{en:"Village Pond",mr:" "},description:{en:"Historic pond that serves as the main water source during summer",mr:"         "},photoUrl:""}]}),[a,o]=W.useState({}),[c,u]=W.useState(!1),[h,f]=W.useState(!0),[g,x]=W.useState(!1);W.useEffect(()=>{(async()=>{try{f(!0);const k=await IT();k&&r({...k,villageImage:k.villageImage||""})}catch(k){console.error("Error loading about content:",k)}finally{f(!1)}})()},[]);const v=(M,k)=>{r(L=>({...L,[M]:k})),a[M]&&o(L=>({...L,[M]:""}))},b=(M,k)=>{r(L=>({...L,[M]:k})),a[M]&&o(L=>({...L,[M]:""}))},T=(M,k,L)=>{const C=[...t.importantPlaces];C[M]={...C[M],[k]:L},r(P=>({...P,importantPlaces:C}))},E=(M,k)=>{const L=k.target.files[0];if(L){if(!L.type.startsWith("image/")){alert(n==="en"?"Please select an image file":"   ");return}if(L.size>5*1024*1024){alert(n==="en"?"Image size should be less than 5MB":"  5MB   ");return}const C=new FileReader;C.onloadend=()=>{const P=[...t.importantPlaces];P[M]={...P[M],photoUrl:C.result},r(V=>({...V,importantPlaces:P}))},C.readAsDataURL(L)}},j=M=>{const k=M.target.files[0];if(k){if(!k.type.startsWith("image/")){alert(n==="en"?"Please select an image file":"   ");return}if(k.size>5*1024*1024){alert(n==="en"?"Image size should be less than 5MB":"  5MB   ");return}const L=new FileReader;L.onloadend=()=>{r(C=>({...C,villageImage:L.result}))},L.readAsDataURL(k)}},S=()=>{r(M=>({...M,villageImage:""}))},D=M=>{const k=[...t.importantPlaces];k[M]={...k[M],photoUrl:""},r(L=>({...L,importantPlaces:k}))},O=()=>{const M={id:Date.now(),name:{en:"",mr:""},description:{en:"",mr:""},photoUrl:""};r(k=>({...k,importantPlaces:[...k.importantPlaces,M]}))},B=M=>{window.confirm(n==="en"?"Remove this place?":"  ?")&&r(k=>({...k,importantPlaces:k.importantPlaces.filter((L,C)=>C!==M)}))},re=()=>{const M={};return t.description.en.trim()||(M.description_en=n==="en"?"English description is required":"   "),t.description.mr.trim()||(M.description_mr=n==="en"?"Marathi description is required":"   "),t.population.trim()||(M.population=n==="en"?"Population is required":"  "),t.area.trim()||(M.area=n==="en"?"Area is required":"  "),t.households.trim()||(M.households=n==="en"?"Households is required":"  "),o(M),Object.keys(M).length===0},ae=async M=>{if(M.preventDefault(),re())try{x(!0),await I4(t),u(!0),setTimeout(()=>u(!1),3e3),alert(n==="en"?"About page content updated successfully!":"About     !")}catch(k){console.error("Error saving about content:",k),alert(n==="en"?"Failed to save about content":"   ")}finally{x(!1)}},G=async()=>{try{await I4(t),window.open("/about","_blank")}catch(M){console.error("Error saving before preview:",M),alert("Failed to save content before preview")}};return s.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:n==="en"?"About Page Management":"About  "}),s.jsx("p",{className:"text-gray-600 mt-1",children:n==="en"?"Edit village information, history, vision, and important places":" , ,      "})]}),s.jsxs("button",{onClick:G,className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-[#138808] text-[#138808] rounded-lg hover:bg-[#138808] hover:text-white transition-colors",children:[s.jsx(xi,{size:20}),n==="en"?"Preview Page":" "]})]}),c&&s.jsxs("div",{className:"mb-6 p-4 bg-green-50 border-2 border-green-500 rounded-lg flex items-center gap-2 text-green-700",children:[s.jsx(Qn,{size:20}),n==="en"?"Changes saved successfully!":"   !"]}),s.jsxs("form",{onSubmit:ae,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx($U,{className:"text-[#ff6b00]"}),n==="en"?"Village Hero Image":"  "]}),t.villageImage&&s.jsxs("div",{className:"mb-4 relative inline-block",children:[s.jsx("img",{src:t.villageImage,alt:"Village",className:"h-48 w-auto rounded-lg border-2 border-gray-300 object-cover",onError:M=>{M.target.src="https://via.placeholder.com/800x400?text=Image+Not+Found"}}),s.jsx("button",{type:"button",onClick:S,className:"absolute -top-2 -right-2 p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:s.jsx(ni,{size:20})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 px-6 py-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg cursor-pointer hover:from-blue-600 hover:to-blue-700 transition-all shadow-md hover:shadow-lg",children:[s.jsx(tm,{size:20}),s.jsx("span",{className:"font-medium",children:n==="en"?"Upload Village Photo":"   "})]}),s.jsx("input",{type:"file",accept:"image/*",onChange:j,className:"hidden"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:n==="en"?"Recommended: 1200x600px, Max 5MB, JPG/PNG":": 1200x600px,  5MB, JPG/PNG"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"relative",children:[s.jsx(A4,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",value:t.villageImage&&t.villageImage.startsWith("data:")?"":t.villageImage||"",onChange:M=>v("villageImage",M.target.value),placeholder:n==="en"?"Or paste image URL":"  URL  ",className:"w-full pl-10 pr-4 py-4 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"https://example.com/village-image.jpg"})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx(fr,{className:"text-[#ff6b00]"}),n==="en"?"Village Description":" "]}),s.jsxs("div",{children:[s.jsx(jn,{label:"Village Description",name:"description",type:"textarea",rows:4,value:t.description,onChange:M=>b("description",M),required:!0,placeholder:"Enter village description"}),a.description&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.description})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx(Us,{className:"text-[#ff6b00]"}),n==="en"?"Village Statistics":" "]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Population":""," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:t.population,onChange:M=>v("population",M.target.value),placeholder:"5,000+",className:`w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${a.population?"border-red-500":"border-gray-300"}`}),a.population&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.population})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Area":""," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:t.area,onChange:M=>v("area",M.target.value),placeholder:"15 sq km",className:`w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${a.area?"border-red-500":"border-gray-300"}`}),a.area&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.area})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Households":""," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:t.households,onChange:M=>v("households",M.target.value),placeholder:"800+",className:`w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${a.households?"border-red-500":"border-gray-300"}`}),a.households&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.households})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx(fr,{className:"text-[#ff6b00]"}),n==="en"?"History, Vision & Mission":",   "]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{children:s.jsx(jn,{label:"History",name:"history",type:"textarea",rows:3,value:t.history,onChange:M=>b("history",M),placeholder:"Enter village history"})}),s.jsx("div",{children:s.jsx(jn,{label:"Vision",name:"vision",type:"textarea",rows:3,value:t.vision,onChange:M=>b("vision",M),placeholder:"Enter village vision"})}),s.jsx("div",{children:s.jsx(jn,{label:"Mission",name:"mission",type:"textarea",rows:3,value:t.mission,onChange:M=>b("mission",M),placeholder:"Enter village mission"})})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[s.jsx(xl,{className:"text-[#ff6b00]"}),n==="en"?"Important Places":" "]}),s.jsxs("button",{type:"button",onClick:O,className:"flex items-center gap-2 px-4 py-2 bg-[#138808] text-white rounded-lg hover:bg-[#0f6906] transition-colors",children:[s.jsx(Ss,{size:18}),n==="en"?"Add Place":" "]})]}),s.jsx("div",{className:"space-y-6",children:t.importantPlaces.map((M,k)=>s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border-2 border-gray-200 relative",children:[s.jsx("button",{type:"button",onClick:()=>B(k),className:"absolute top-2 right-2 p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:s.jsx(ti,{size:18})}),s.jsxs("div",{className:"space-y-4 pr-10",children:[s.jsx("div",{children:s.jsx(jn,{label:"Place Name",name:`place-name-${k}`,value:M.name,onChange:L=>T(k,"name",L),placeholder:"Enter place name"})}),s.jsx("div",{children:s.jsx(jn,{label:"Description",name:`place-description-${k}`,type:"textarea",rows:2,value:M.description,onChange:L=>T(k,"description",L),placeholder:"Enter place description"})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n==="en"?"Photo":""}),M.photoUrl&&s.jsxs("div",{className:"mb-3 relative inline-block",children:[s.jsx("img",{src:M.photoUrl,alt:M.name.en,className:"h-32 w-auto rounded-lg border-2 border-gray-300 object-cover",onError:L=>{L.target.src="https://via.placeholder.com/400x300?text=Image+Not+Found"}}),s.jsx("button",{type:"button",onClick:()=>D(k),className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:s.jsx(ni,{size:16})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg cursor-pointer hover:from-blue-600 hover:to-blue-700 transition-all shadow-md hover:shadow-lg",children:[s.jsx(tm,{size:18}),s.jsx("span",{className:"text-sm font-medium",children:n==="en"?"Upload Image":"  "})]}),s.jsx("input",{type:"file",accept:"image/*",onChange:L=>E(k,L),className:"hidden"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n==="en"?"Max 5MB, JPG/PNG":" 5MB, JPG/PNG"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"relative",children:[s.jsx(A4,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),s.jsx("input",{type:"text",value:M.photoUrl&&M.photoUrl.startsWith("data:")?"":M.photoUrl||"",onChange:L=>T(k,"photoUrl",L.target.value),placeholder:n==="en"?"Or paste image URL":"  URL  ",className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"https://example.com/image.jpg"})]})]})]})]})]},M.id))})]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx("button",{type:"button",onClick:()=>e("/admin/dashboard"),className:"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:g,children:n==="en"?"Cancel":" "}),s.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-[#138808] to-[#1aa910] text-white rounded-lg hover:shadow-lg transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:g,children:[s.jsx(Bs,{size:20}),g?n==="en"?"Saving...":"  ...":n==="en"?"Save Changes":"  "]})]})]})]})},fz=()=>{const{language:n}=ms(),e=Tr(),[t,r]=W.useState({description:{en:"Education is the foundation of our village development. We are committed to providing quality education to all children and promoting literacy among adults. Our village has well-equipped schools and anganwadis that ensure holistic development of children.",mr:"      .            .             ."},schools:[{id:1,name:{en:"Government Primary School",mr:"  "},type:{en:"Primary",mr:""},classes:"1st to 7th",students:"250+",teachers:"12",facilities:{en:"Computer Lab, Library, Playground, Mid-day Meal",mr:" , ,  ,  "},description:{en:"Well-established primary school with modern facilities and dedicated teachers",mr:"       "}},{id:2,name:{en:"Zilla Parishad High School",mr:"  "},type:{en:"Secondary",mr:""},classes:"8th to 10th",students:"180+",teachers:"15",facilities:{en:"Science Lab, Computer Lab, Sports Room, Library",mr:" ,  ,  , "},description:{en:"Quality secondary education with focus on science and mathematics",mr:"        "}}],anganwadis:[{id:1,name:{en:"Anganwadi Center 1",mr:"  "},location:{en:"Main Village",mr:" "},children:"35",worker:{en:"Smt. Anita Patil",mr:"  "},helper:{en:"Smt. Sunita Bhosale",mr:"  "},services:{en:"Nutrition, Pre-school Education, Health Check-ups, Immunization",mr:", - ,  , "},description:{en:"Comprehensive child development center for children aged 0-6 years",mr:"-       "}},{id:2,name:{en:"Anganwadi Center 2",mr:"  "},location:{en:"East Hamlet",mr:" "},children:"30",worker:{en:"Smt. Rekha Kamble",mr:"  "},helper:{en:"Smt. Meera Jadhav",mr:"  "},services:{en:"Nutrition, Pre-school Education, Health Check-ups, Immunization",mr:", - ,  , "},description:{en:"Well-equipped anganwadi serving children from eastern part of village",mr:"       "}}],programs:[{id:1,name:{en:"Adult Literacy Program",mr:"  "},description:{en:"Evening classes for adults who missed formal education, focusing on basic reading, writing and numeracy skills",mr:"     ,  ,      "},timing:{en:"6 PM - 8 PM (Mon-Fri)",mr:"  -  (-)"},participants:"40+",coordinator:{en:"Mr. Suresh Deshmukh",mr:"  "}},{id:2,name:{en:"Computer Training for Youth",mr:"  "},description:{en:"Free computer training program for village youth covering basic computer skills, MS Office, and internet usage",mr:"  , MS Office           "},timing:{en:"4 PM - 6 PM (Tue-Sat)",mr:"  -  (-)"},participants:"25",coordinator:{en:"Mr. Rahul Patil",mr:"  "}},{id:3,name:{en:"Girl Child Education Support",mr:"  "},description:{en:"Scholarship and support program to encourage girl child education and reduce dropout rates",mr:"            "},beneficiaries:"50+ girls",coordinator:{en:"Mrs. Savita Shinde",mr:"  "}}],stats:{literacyRate:"78%",totalStudents:"500+",totalTeachers:"30+",schoolDropoutRate:"5%"}}),[a,o]=W.useState({}),[c,u]=W.useState(!1),[h,f]=W.useState(!0),[g,x]=W.useState(!1);W.useEffect(()=>{(async()=>{try{f(!0);const C=await kT();C&&r(C)}catch(C){console.error("Error loading education content:",C)}finally{f(!1)}})()},[]);const v=(L,C)=>{r(P=>({...P,[L]:C}))},b=(L,C)=>{r(P=>({...P,stats:{...P.stats,[L]:C}}))},T=(L,C,P)=>{const V=[...t.schools];V[L]={...V[L],[C]:P},r(oe=>({...oe,schools:V}))},E=()=>{const L={id:Date.now(),name:{en:"",mr:""},type:{en:"",mr:""},classes:"",students:"",teachers:"",facilities:{en:"",mr:""},description:{en:"",mr:""}};r(C=>({...C,schools:[...C.schools,L]}))},j=L=>{window.confirm(n==="en"?"Remove this school?":"  ?")&&r(C=>({...C,schools:C.schools.filter((P,V)=>V!==L)}))},S=(L,C,P)=>{const V=[...t.anganwadis];V[L]={...V[L],[C]:P},r(oe=>({...oe,anganwadis:V}))},D=()=>{const L={id:Date.now(),name:{en:"",mr:""},location:{en:"",mr:""},children:"",worker:{en:"",mr:""},helper:{en:"",mr:""},services:{en:"",mr:""},description:{en:"",mr:""}};r(C=>({...C,anganwadis:[...C.anganwadis,L]}))},O=L=>{window.confirm(n==="en"?"Remove this anganwadi?":"  ?")&&r(C=>({...C,anganwadis:C.anganwadis.filter((P,V)=>V!==L)}))},B=(L,C,P)=>{const V=[...t.programs];V[L]={...V[L],[C]:P},r(oe=>({...oe,programs:V}))},re=()=>{const L={id:Date.now(),name:{en:"",mr:""},description:{en:"",mr:""},timing:{en:"",mr:""},participants:"",coordinator:{en:"",mr:""}};r(C=>({...C,programs:[...C.programs,L]}))},ae=L=>{window.confirm(n==="en"?"Remove this program?":"  ?")&&r(C=>({...C,programs:C.programs.filter((P,V)=>V!==L)}))},G=()=>{const L={};return t.description.en.trim()||(L.description_en=n==="en"?"English description is required":"   "),t.description.mr.trim()||(L.description_mr=n==="en"?"Marathi description is required":"   "),o(L),Object.keys(L).length===0},M=async L=>{if(L.preventDefault(),G())try{x(!0),await k4(t),u(!0),setTimeout(()=>u(!1),3e3),alert(n==="en"?"Education page content updated successfully!":"Education     !")}catch(C){console.error("Error saving education content:",C),alert(n==="en"?"Failed to save education content":"   ")}finally{x(!1)}},k=async()=>{try{await k4(t),window.open("/education","_blank")}catch(L){console.error("Error saving before preview:",L),alert("Failed to save content before preview")}};return s.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:n==="en"?"Education Page Management":"  "}),s.jsx("p",{className:"text-gray-600 mt-1",children:n==="en"?"Edit schools, anganwadis, and educational programs":",      "})]}),s.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-[#138808] text-[#138808] rounded-lg hover:bg-[#138808] hover:text-white transition-colors",children:[s.jsx(xi,{size:20}),n==="en"?"Preview Page":" "]})]}),c&&s.jsxs("div",{className:"mb-6 p-4 bg-green-50 border-2 border-green-500 rounded-lg flex items-center gap-2 text-green-700",children:[s.jsx(Qn,{size:20}),n==="en"?"Changes saved successfully!":"   !"]}),s.jsxs("form",{onSubmit:M,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx($g,{className:"text-[#ff6b00]"}),n==="en"?"Page Description":" "]}),s.jsxs("div",{children:[s.jsx(jn,{label:"Education Page Description",name:"description",type:"textarea",rows:4,value:t.description,onChange:L=>v("description",L),required:!0,placeholder:"Enter education page description"}),a.description&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.description})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx(Us,{className:"text-[#ff6b00]"}),n==="en"?"Education Statistics":" "]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Literacy Rate":" "}),s.jsx("input",{type:"text",value:t.stats.literacyRate,onChange:L=>b("literacyRate",L.target.value),placeholder:"78%",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Total Students":" "}),s.jsx("input",{type:"text",value:t.stats.totalStudents,onChange:L=>b("totalStudents",L.target.value),placeholder:"500+",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Total Teachers":" "}),s.jsx("input",{type:"text",value:t.stats.totalTeachers,onChange:L=>b("totalTeachers",L.target.value),placeholder:"30+",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Dropout Rate":"  "}),s.jsx("input",{type:"text",value:t.stats.schoolDropoutRate,onChange:L=>b("schoolDropoutRate",L.target.value),placeholder:"5%",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[s.jsx(R2,{className:"text-[#ff6b00]"}),n==="en"?"Schools":""]}),s.jsxs("button",{type:"button",onClick:E,className:"flex items-center gap-2 px-4 py-2 bg-[#138808] text-white rounded-lg hover:bg-[#0f6906] transition-colors",children:[s.jsx(Ss,{size:18}),n==="en"?"Add School":" "]})]}),s.jsx("div",{className:"space-y-6",children:t.schools.map((L,C)=>s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border-2 border-gray-200 relative",children:[s.jsx("button",{type:"button",onClick:()=>j(C),className:"absolute top-2 right-2 p-2 text-red-600 hover:bg-red-50 rounded-lg",children:s.jsx(ti,{size:18})}),s.jsxs("div",{className:"space-y-4 pr-10",children:[s.jsx("div",{children:s.jsx(jn,{label:"School Name",name:`school-name-${C}`,value:L.name,onChange:P=>T(C,"name",P),placeholder:"Enter school name"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Classes":""}),s.jsx("input",{type:"text",value:L.classes,onChange:P=>T(C,"classes",P.target.value),placeholder:"1st to 7th",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Students":""}),s.jsx("input",{type:"text",value:L.students,onChange:P=>T(C,"students",P.target.value),placeholder:"250+",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Teachers":""}),s.jsx("input",{type:"text",value:L.teachers,onChange:P=>T(C,"teachers",P.target.value),placeholder:"12",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]}),s.jsx("div",{children:s.jsx(jn,{label:"School Type",name:`school-type-${C}`,value:L.type,onChange:P=>T(C,"type",P),placeholder:"Primary / Secondary"})})]}),s.jsx("div",{children:s.jsx(jn,{label:"Facilities",name:`school-facilities-${C}`,value:L.facilities,onChange:P=>T(C,"facilities",P),placeholder:"Enter school facilities"})}),s.jsx("div",{children:s.jsx(jn,{label:"Description",name:`school-description-${C}`,type:"textarea",rows:2,value:L.description,onChange:P=>T(C,"description",P),placeholder:"Enter school description"})})]})]},L.id))})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[s.jsx(A2,{className:"text-[#ff6b00]"}),n==="en"?"Anganwadis":""]}),s.jsxs("button",{type:"button",onClick:D,className:"flex items-center gap-2 px-4 py-2 bg-[#138808] text-white rounded-lg hover:bg-[#0f6906] transition-colors",children:[s.jsx(Ss,{size:18}),n==="en"?"Add Anganwadi":" "]})]}),s.jsx("div",{className:"space-y-6",children:t.anganwadis.map((L,C)=>s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border-2 border-gray-200 relative",children:[s.jsx("button",{type:"button",onClick:()=>O(C),className:"absolute top-2 right-2 p-2 text-red-600 hover:bg-red-50 rounded-lg",children:s.jsx(ti,{size:18})}),s.jsxs("div",{className:"space-y-4 pr-10",children:[s.jsx("div",{children:s.jsx(jn,{label:"Anganwadi Name",name:`anganwadi-name-${C}`,value:L.name,onChange:P=>S(C,"name",P),placeholder:"Enter anganwadi name"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{children:s.jsx(jn,{label:"Location",name:`anganwadi-location-${C}`,value:L.location,onChange:P=>S(C,"location",P),placeholder:"Enter location"})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Children":""}),s.jsx("input",{type:"text",value:L.children,onChange:P=>S(C,"children",P.target.value),placeholder:"35",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("div",{children:s.jsx(jn,{label:"Worker",name:`anganwadi-worker-${C}`,value:L.worker,onChange:P=>S(C,"worker",P),placeholder:"Enter worker name"})}),s.jsx("div",{children:s.jsx(jn,{label:"Helper",name:`anganwadi-helper-${C}`,value:L.helper,onChange:P=>S(C,"helper",P),placeholder:"Enter helper name"})})]}),s.jsx("div",{children:s.jsx(jn,{label:"Services",name:`anganwadi-services-${C}`,value:L.services,onChange:P=>S(C,"services",P),placeholder:"Enter services provided"})}),s.jsx("div",{children:s.jsx(jn,{label:"Description",name:`anganwadi-description-${C}`,type:"textarea",rows:2,value:L.description,onChange:P=>S(C,"description",P),placeholder:"Enter anganwadi description"})})]})]},L.id))})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[s.jsx($g,{className:"text-[#ff6b00]"}),n==="en"?"Educational Programs":" "]}),s.jsxs("button",{type:"button",onClick:re,className:"flex items-center gap-2 px-4 py-2 bg-[#138808] text-white rounded-lg hover:bg-[#0f6906] transition-colors",children:[s.jsx(Ss,{size:18}),n==="en"?"Add Program":" "]})]}),s.jsx("div",{className:"space-y-6",children:t.programs.map((L,C)=>s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border-2 border-gray-200 relative",children:[s.jsx("button",{type:"button",onClick:()=>ae(C),className:"absolute top-2 right-2 p-2 text-red-600 hover:bg-red-50 rounded-lg",children:s.jsx(ti,{size:18})}),s.jsxs("div",{className:"space-y-4 pr-10",children:[s.jsx("div",{children:s.jsx(jn,{label:"Program Name",name:`program-name-${C}`,value:L.name,onChange:P=>B(C,"name",P),placeholder:"Enter program name"})}),s.jsx("div",{children:s.jsx(jn,{label:"Description",name:`program-description-${C}`,type:"textarea",rows:2,value:L.description,onChange:P=>B(C,"description",P),placeholder:"Enter program description"})})]})]},L.id))})]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx("button",{type:"button",onClick:()=>e("/admin/dashboard"),className:"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:g,children:n==="en"?"Cancel":" "}),s.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-[#138808] to-[#1aa910] text-white rounded-lg hover:shadow-lg transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:g,children:[s.jsx(Bs,{size:20}),g?n==="en"?"Saving...":"  ...":n==="en"?"Save Changes":"  "]})]})]})]})},es={VILLAGES:$t.villages(),DEMOGRAPHICS:$t.demographics(),POPULATION_BREAKDOWNS:$t.populationBreakdowns(),VILLAGE_GROUPS:$t.villageGroups(),INFRASTRUCTURE:$t.infrastructure(),STATISTICS_YEARS:$t.statisticsYears()};async function hm(){try{console.log("Fetching villages from Firebase server (bypassing cache)...");const e=(await U9(Ht(Ke,es.VILLAGES))).docs.map(t=>{const r=t.data(),{id:a,...o}=r;return{id:t.id,...o}});return e.sort((t,r)=>{const a=t.createdAt?.toMillis?.()||0,o=r.createdAt?.toMillis?.()||0;return a-o}),console.log("Fetched from server:",e.length,"villages"),console.log("Village IDs:",e.map(t=>({docId:t.id,name:t.nameEn,createdAt:t.createdAt}))),e}catch(n){throw console.error("Error getting villages:",n),n}}async function mz(n){try{return{id:(await vs(Ht(Ke,es.VILLAGES),{...n,gramPanchayatId:n.gramPanchayatId||"default",createdAt:Xt(),updatedAt:Xt()})).id,...n}}catch(e){throw console.error("Error creating village:",e),e}}async function gz(n,e){try{return await ch(St(Ke,es.VILLAGES,n),{...e,updatedAt:Xt()},{merge:!0}),{id:n,...e}}catch(t){throw console.error("Error updating village:",t),t}}async function pz(n){try{console.log("Attempting to delete village from Firebase, ID:",n);const e=St(Ke,es.VILLAGES,n);return console.log("Village reference created:",e.path),await Bo(e),console.log("Firebase deleteDoc completed successfully for:",n),!0}catch(e){throw console.error("Error deleting village from Firebase:",e),console.error("Error code:",e.code),console.error("Error message:",e.message),e}}async function xz(n,e){try{const t=Es(Ht(Ke,es.DEMOGRAPHICS),ei("villageId","==",n),ei("year","==",e)),r=await Nr(t);if(r.empty)return null;const a=r.docs[0];return{id:a.id,...a.data()}}catch(t){throw console.error("Error getting demographics:",t),t}}async function FT(n){try{const e=Es(Ht(Ke,es.DEMOGRAPHICS),ei("year","==",n));return(await Nr(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error getting demographics by year:",e),e}}async function UT(n){try{console.log("bulkUpsertDemographics: Starting batch operation for",n.length,"records");const e=Ny(Ke);let t=0,r=0;for(const a of n){const o=await xz(a.villageId,a.year);if(o){console.log(`Updating demographics for village ${a.villageId}, year ${a.year}`);const c=St(Ke,es.DEMOGRAPHICS,o.id);e.update(c,{...a,updatedAt:Xt()}),t++}else{console.log(`Creating new demographics for village ${a.villageId}, year ${a.year}`);const c=St(Ht(Ke,es.DEMOGRAPHICS));e.set(c,{...a,createdAt:Xt(),updatedAt:Xt()}),r++}}return console.log(`Committing batch: ${r} creates, ${t} updates`),await e.commit(),console.log("Batch committed successfully to Firebase"),!0}catch(e){throw console.error("Error bulk upserting demographics:",e),e}}async function VT(n){try{const e=Es(Ht(Ke,es.POPULATION_BREAKDOWNS),ei("year","==",n));return(await Nr(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error getting breakdowns by year:",e),e}}async function yz(n){try{console.log("bulkUpsertPopulationBreakdowns: Starting batch operation for",n.length,"records");const e=Ny(Ke);let t=0,r=0;for(const a of n){const o=Es(Ht(Ke,es.POPULATION_BREAKDOWNS),ei("villageId","==",a.villageId),ei("year","==",a.year),ei("category","==",a.category)),c=await Nr(o),u=(a.maleCount||0)+(a.femaleCount||0);if(c.empty){const h=St(Ht(Ke,es.POPULATION_BREAKDOWNS));e.set(h,{...a,totalCount:u,createdAt:Xt(),updatedAt:Xt()}),r++}else{const h=c.docs[0],f=St(Ke,es.POPULATION_BREAKDOWNS,h.id);e.update(f,{...a,totalCount:u,updatedAt:Xt()}),t++}}return console.log(`Committing batch: ${r} creates, ${t} updates`),await e.commit(),console.log("Population breakdowns batch committed successfully"),!0}catch(e){throw console.error("Error bulk upserting breakdowns:",e),e}}async function bz(n,e){try{const t=Es(Ht(Ke,es.VILLAGE_GROUPS),ei("villageId","==",n),ei("year","==",e)),r=await Nr(t);if(r.empty)return null;const a=r.docs[0];return{id:a.id,...a.data()}}catch(t){throw console.error("Error getting groups:",t),t}}async function BT(n){try{const e=Es(Ht(Ke,es.VILLAGE_GROUPS),ei("year","==",n));return(await Nr(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error getting groups by year:",e),e}}async function vz(n){try{const e=Ny(Ke);for(const t of n){const r=await bz(t.villageId,t.year);if(r){const a=St(Ke,es.VILLAGE_GROUPS,r.id);e.update(a,{...t,updatedAt:Xt()})}else{const a=St(Ht(Ke,es.VILLAGE_GROUPS));e.set(a,{...t,createdAt:Xt(),updatedAt:Xt()})}}return await e.commit(),!0}catch(e){throw console.error("Error bulk upserting groups:",e),e}}async function wz(n,e){try{const t=Es(Ht(Ke,es.INFRASTRUCTURE),ei("villageId","==",n),ei("year","==",e)),r=await Nr(t);if(r.empty)return null;const a=r.docs[0];return{id:a.id,...a.data()}}catch(t){throw console.error("Error getting infrastructure:",t),t}}async function zT(n){try{const e=Es(Ht(Ke,es.INFRASTRUCTURE),ei("year","==",n));return(await Nr(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error getting infrastructure by year:",e),e}}async function Nz(n){try{const e=Ny(Ke);for(const t of n){const r=await wz(t.villageId,t.year);if(r){const a=St(Ke,es.INFRASTRUCTURE,r.id);e.update(a,{...t,updatedAt:Xt()})}else{const a=St(Ht(Ke,es.INFRASTRUCTURE));e.set(a,{...t,createdAt:Xt(),updatedAt:Xt()})}}return await e.commit(),!0}catch(e){throw console.error("Error bulk upserting infrastructure:",e),e}}async function Fx(){try{const n=Es(Ht(Ke,es.STATISTICS_YEARS),lc("year","desc"));return(await Nr(n)).docs.map(t=>t.data().year)}catch(n){throw console.error("Error getting years:",n),n}}async function jz(n){try{const e=Es(Ht(Ke,es.STATISTICS_YEARS),ei("year","==",n));if(!(await Nr(e)).empty)throw new Error("Year already exists");return await vs(Ht(Ke,es.STATISTICS_YEARS),{year:n,createdAt:Xt()}),n}catch(e){throw console.error("Error adding year:",e),e}}async function qT(){try{const n=await Fx();return n.length>0?n[0]:new Date().getFullYear()}catch(n){return console.error("Error getting latest year:",n),new Date().getFullYear()}}async function GT(n){try{const[e,t,r,a,o]=await Promise.all([hm(),FT(n),VT(n),BT(n),zT(n)]);return{year:n,villages:e,demographics:t,breakdowns:r,groups:a,infrastructure:o}}catch(e){throw console.error("Error getting summary:",e),e}}const _z=()=>{const[n,e]=W.useState([]),[t,r]=W.useState(!1),[a,o]=W.useState(null),[c,u]=W.useState({type:"",text:""}),[h,f]=W.useState({nameEn:"",nameMr:"",code:""});W.useEffect(()=>{g()},[]),W.useEffect(()=>{if(c.type==="success"&&c.text){const D=setTimeout(()=>{u({type:"",text:""})},5e3);return()=>clearTimeout(D)}},[c]);const g=async()=>{try{console.log("Loading villages from Firebase...");const D=await hm();console.log("Loaded villages count:",D.length),console.log("Villages data:",JSON.stringify(D,null,2)),e(D)}catch(D){console.error("Error loading villages:",D),u({type:"error",text:"Failed to load villages"})}},x=()=>{f({nameEn:"",nameMr:"",code:""}),r(!1),o(null)},v=(D,O)=>{f(B=>({...B,[D]:O}))},b=async()=>{if(u({type:"",text:""}),!h.nameEn.trim()||!h.nameMr.trim()){u({type:"error",text:"Village name in both English and Marathi is required"});return}try{await mz(h),await g(),x(),u({type:"success",text:`Village "${h.nameEn}" added successfully!`})}catch(D){console.error("Error adding village:",D),u({type:"error",text:"Failed to add village. Please try again."})}},T=D=>{o(D.id),f({nameEn:D.nameEn,nameMr:D.nameMr,code:D.code||""}),u({type:"",text:""})},E=async()=>{if(u({type:"",text:""}),!h.nameEn.trim()||!h.nameMr.trim()){u({type:"error",text:"Village name in both English and Marathi is required"});return}try{await gz(a,h),await g(),x(),u({type:"success",text:`Village "${h.nameEn}" updated successfully!`})}catch(D){console.error("Error updating village:",D);const O=D.message||"Failed to update village. Please try again.";u({type:"error",text:`Error: ${O}. The village may not exist in the database.`})}},j=async D=>{if(confirm(`Are you sure you want to delete "${D.nameEn}"?

Warning: This will NOT delete associated statistics data. The data will remain but won't be visible unless you recreate the village.`))try{console.log("Deleting village with ID:",D.id),await pz(D.id),console.log("Delete successful, reloading villages..."),await g(),console.log("Villages reloaded, current count:",n.length-1),u({type:"success",text:`Village "${D.nameEn}" deleted successfully!`})}catch(O){console.error("Error deleting village:",O),u({type:"error",text:`Failed to delete village: ${O.message}`})}},S=()=>{x(),u({type:"",text:""})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Village Management"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Add, edit, or delete villages in your Gram Panchayat"})]}),!t&&!a&&s.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors shadow-md",children:[s.jsx(Ss,{className:"w-4 h-4"}),"Add Village"]})]}),c.text&&s.jsxs("div",{className:`flex items-center justify-between gap-2 p-4 rounded-lg ${c.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[c.type==="success"?s.jsx(Gi,{className:"w-5 h-5"}):s.jsx(Qn,{className:"w-5 h-5"}),s.jsx("span",{children:c.text})]}),s.jsx("button",{onClick:()=>u({type:"",text:""}),className:"text-gray-500 hover:text-gray-700 transition-colors",title:"Dismiss",children:s.jsx(ni,{className:"w-4 h-4"})})]}),(t||a)&&s.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-green-50 border border-orange-200 rounded-lg p-6",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:t?"Add New Village":"Edit Village"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Village Name (English) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:h.nameEn,onChange:D=>v("nameEn",D.target.value),placeholder:"e.g., Kothrud",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Village Name (Marathi) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:h.nameMr,onChange:D=>v("nameMr",D.target.value),placeholder:"e.g., ",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Village Code (Optional)"}),s.jsx("input",{type:"text",value:h.code,onChange:D=>v("code",D.target.value),placeholder:"e.g., V001",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:t?b:E,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(Bs,{className:"w-4 h-4"}),t?"Add Village":"Update Village"]}),s.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:[s.jsx(ni,{className:"w-4 h-4"}),"Cancel"]})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Qn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"No villages found"}),s.jsx("button",{onClick:()=>r(!0),className:"px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:"Add Your First Village"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-green-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"#"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Village Name (English)"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Village Name (Marathi)"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Code"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((D,O)=>s.jsxs("tr",{className:O%2===0?"bg-white":"bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O+1}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.nameEn})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:D.nameMr})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-700",children:D.code||"-"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("button",{onClick:()=>T(D),disabled:t||a,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Edit",children:s.jsx(bp,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>j(D),disabled:t||a,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete",children:s.jsx(ti,{className:"w-4 h-4"})})]})})]},D.id))})]})})}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Qn,{className:"w-5 h-5 text-blue-600 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-semibold mb-2",children:"Important Notes:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:"Add all your villages here before entering statistics data"}),s.jsx("li",{children:"Deleting a village won't delete its statistics data (data remains orphaned)"}),s.jsx("li",{children:"Village names should be unique to avoid confusion"}),s.jsx("li",{children:"After adding villages, go to other tabs to enter their statistics"})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-4 rounded-lg border border-orange-200",children:[s.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Total Villages"}),s.jsx("div",{className:"text-2xl font-bold text-orange-900 mt-1",children:n.length})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border border-green-200",children:[s.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Villages with Code"}),s.jsx("div",{className:"text-2xl font-bold text-green-900 mt-1",children:n.filter(D=>D.code).length})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200",children:[s.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Last Added"}),s.jsx("div",{className:"text-sm font-semibold text-blue-900 mt-1",children:n.length>0?n[n.length-1].nameEn:"None"})]})]})]})},Sz=({selectedYear:n})=>{const[e,t]=W.useState([]),[r,a]=W.useState({}),[o,c]=W.useState(!0),[u,h]=W.useState(!1),[f,g]=W.useState({type:"",text:""});W.useEffect(()=>{x()},[n]);const x=async()=>{c(!0);try{const T=await hm(),E=await FT(n),j={};T.forEach(S=>{const D=E.find(re=>re.villageId===S.id),O=D?.malePopulation||0,B=D?.femalePopulation||0;j[S.id]={villageId:S.id,year:n,totalPopulation:O+B,malePopulation:O,femalePopulation:B,source:D?.source||""}}),t(T),a(j)}catch(T){console.error("Error loading demographics:",T),g({type:"error",text:"Failed to load demographics data"})}finally{c(!1)}},v=(T,E,j)=>{a(S=>{const D={...S,[T]:{...S[T],[E]:E==="source"?j:parseInt(j)||0}};if(E==="malePopulation"||E==="femalePopulation"){const O=E==="malePopulation"?parseInt(j)||0:D[T].malePopulation,B=E==="femalePopulation"?parseInt(j)||0:D[T].femalePopulation;D[T].totalPopulation=O+B}return D})},b=async()=>{h(!0),g({type:"",text:""});try{const T=Object.values(r);console.log("Saving demographics data:",T);for(const E of T)if(E.totalPopulation<0||E.malePopulation<0||E.femalePopulation<0){g({type:"error",text:"Population counts cannot be negative"}),h(!1);return}console.log("Calling bulkUpsertDemographics with",T.length,"records"),await UT(T),console.log("Demographics saved successfully to Firebase"),g({type:"success",text:`Demographics for year ${n} saved successfully!`})}catch(T){console.error("Error saving demographics:",T),g({type:"error",text:`Failed to save demographics: ${T.message}`})}finally{h(!1)}};return o?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Population Demographics - ",n]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage total, male, and female population for each village"})]}),s.jsxs("button",{onClick:b,disabled:u,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(Bs,{className:"w-4 h-4"}),u?"Saving...":"Save All"]})]}),f.text&&s.jsxs("div",{className:`flex items-center gap-2 p-4 rounded-lg ${f.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[s.jsx(Qn,{className:"w-5 h-5"}),s.jsx("span",{children:f.text})]}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-green-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Village Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:s.jsxs("div",{className:"flex items-center gap-1",children:["Total Population",s.jsx("span",{className:"text-xs normal-case text-gray-500",children:"(Auto)"})]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Male Population"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Female Population"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Data Source"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((T,E)=>s.jsxs("tr",{className:E%2===0?"bg-white":"bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:T.nameEn}),s.jsx("div",{className:"text-sm text-gray-500",children:T.nameMr})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"number",min:"0",value:r[T.id]?.totalPopulation||0,readOnly:!0,className:"w-32 px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-700 font-semibold cursor-not-allowed",title:"Auto-calculated: Male + Female"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"number",min:"0",value:r[T.id]?.malePopulation||0,onChange:j=>v(T.id,"malePopulation",j.target.value),className:"w-32 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"number",min:"0",value:r[T.id]?.femalePopulation||0,onChange:j=>v(T.id,"femalePopulation",j.target.value),className:"w-32 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"text",value:r[T.id]?.source||"",onChange:j=>v(T.id,"source",j.target.value),placeholder:"e.g., Census 2011",className:"w-48 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent"})})]},T.id))})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200",children:[s.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Population"}),s.jsx("div",{className:"text-2xl font-bold text-blue-900 mt-1",children:Object.values(r).reduce((T,E)=>T+(E.totalPopulation||0),0).toLocaleString()})]}),s.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 p-4 rounded-lg border border-indigo-200",children:[s.jsx("div",{className:"text-sm text-indigo-600 font-medium",children:"Male Population"}),s.jsx("div",{className:"text-2xl font-bold text-indigo-900 mt-1",children:Object.values(r).reduce((T,E)=>T+(E.malePopulation||0),0).toLocaleString()})]}),s.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 p-4 rounded-lg border border-pink-200",children:[s.jsx("div",{className:"text-sm text-pink-600 font-medium",children:"Female Population"}),s.jsx("div",{className:"text-2xl font-bold text-pink-900 mt-1",children:Object.values(r).reduce((T,E)=>T+(E.femalePopulation||0),0).toLocaleString()})]})]})]})},df=["ST","SC","OBC","OTHER"],Ez=({selectedYear:n})=>{const[e,t]=W.useState([]),[r,a]=W.useState({}),[o,c]=W.useState(!0),[u,h]=W.useState(!1),[f,g]=W.useState({type:"",text:""});W.useEffect(()=>{x()},[n]);const x=async()=>{c(!0);try{const j=await hm(),S=await VT(n),D={};j.forEach(O=>{D[O.id]={},df.forEach(B=>{const re=S.find(ae=>ae.villageId===O.id&&ae.category===B);D[O.id][B]={maleCount:re?.maleCount||0,femaleCount:re?.femaleCount||0}})}),t(j),a(D)}catch(j){console.error("Error loading category data:",j),g({type:"error",text:"Failed to load category data"})}finally{c(!1)}},v=(j,S,D,O)=>{a(B=>({...B,[j]:{...B[j],[S]:{...B[j][S],[D]:parseInt(O)||0}}}))},b=async()=>{h(!0),g({type:"",text:""});try{const j=[];Object.entries(r).forEach(([D,O])=>{Object.entries(O).forEach(([B,re])=>{if(re.maleCount<0||re.femaleCount<0)throw new Error("Population counts cannot be negative");j.push({villageId:D,year:n,category:B,maleCount:re.maleCount,femaleCount:re.femaleCount})})}),console.log("Saving category-wise data:",j.length,"records"),await yz(j),console.log("Category-wise data saved successfully");const S=[];Object.entries(r).forEach(([D,O])=>{let B=0,re=0;Object.values(O).forEach(ae=>{B+=ae.maleCount||0,re+=ae.femaleCount||0}),S.push({villageId:D,year:n,totalPopulation:B+re,malePopulation:B,femalePopulation:re,source:"Auto-calculated from Category-wise data"})}),console.log("Auto-updating demographics from category data:",S.length,"villages"),await UT(S),console.log("Demographics auto-updated successfully"),g({type:"success",text:` Category-wise data saved! Demographics auto-updated for ${n}.`})}catch(j){console.error("Error saving category-wise data:",j),g({type:"error",text:j.message||"Failed to save data. Please try again."})}finally{h(!1)}},T=(j,S)=>{const D=r[j]?.[S];return(D?.maleCount||0)+(D?.femaleCount||0)},E=j=>e.reduce((S,D)=>S+T(D.id,j),0);return o?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Category-wise Population - ",n]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage ST/SC/OBC/Other population breakdown for each village"})]}),s.jsxs("button",{onClick:b,disabled:u,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(Bs,{className:"w-4 h-4"}),u?"Saving...":"Save All"]})]}),f.text&&s.jsxs("div",{className:`flex items-center gap-2 p-4 rounded-lg ${f.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[s.jsx(Qn,{className:"w-5 h-5"}),s.jsx("span",{children:f.text})]}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsxs("thead",{className:"bg-gradient-to-r from-orange-50 to-green-50",children:[s.jsxs("tr",{children:[s.jsx("th",{rowSpan:"2",className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider border-r",children:"Village Name"}),df.map(j=>s.jsx("th",{colSpan:"3",className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider border-r",children:j},j))]}),s.jsx("tr",{children:df.map(j=>s.jsxs(P0.Fragment,{children:[s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-600",children:"Male"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-600",children:"Female"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-600 border-r",children:"Total"})]},j))})]}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((j,S)=>s.jsxs("tr",{className:S%2===0?"bg-white":"bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap border-r",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.nameEn}),s.jsx("div",{className:"text-sm text-gray-500",children:j.nameMr})]})}),df.map(D=>s.jsxs(P0.Fragment,{children:[s.jsx("td",{className:"px-2 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[j.id]?.[D]?.maleCount||0,onChange:O=>v(j.id,D,"maleCount",O.target.value),className:"w-20 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),s.jsx("td",{className:"px-2 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[j.id]?.[D]?.femaleCount||0,onChange:O=>v(j.id,D,"femaleCount",O.target.value),className:"w-20 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),s.jsx("td",{className:"px-2 py-4 text-center border-r",children:s.jsx("span",{className:"font-semibold text-gray-700",children:T(j.id,D)})})]},D))]},j.id))}),s.jsx("tfoot",{className:"bg-gray-100",children:s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 font-bold text-gray-900 border-r",children:"Grand Total"}),df.map(j=>s.jsxs(P0.Fragment,{children:[s.jsx("td",{className:"px-2 py-4 text-center font-semibold text-gray-700",children:e.reduce((S,D)=>S+(r[D.id]?.[j]?.maleCount||0),0)}),s.jsx("td",{className:"px-2 py-4 text-center font-semibold text-gray-700",children:e.reduce((S,D)=>S+(r[D.id]?.[j]?.femaleCount||0),0)}),s.jsx("td",{className:"px-2 py-4 text-center font-bold text-gray-900 border-r",children:E(j)})]},j))]})})]})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:df.map((j,S)=>{const D=[{from:"purple-50",to:"purple-100",border:"purple-200",text:"purple-600",value:"purple-900"},{from:"blue-50",to:"blue-100",border:"blue-200",text:"blue-600",value:"blue-900"},{from:"green-50",to:"green-100",border:"green-200",text:"green-600",value:"green-900"},{from:"amber-50",to:"amber-100",border:"amber-200",text:"amber-600",value:"amber-900"}][S];return s.jsxs("div",{className:`bg-gradient-to-br from-${D.from} to-${D.to} p-4 rounded-lg border border-${D.border}`,children:[s.jsxs("div",{className:`text-sm text-${D.text} font-medium`,children:[j," Population"]}),s.jsx("div",{className:`text-2xl font-bold text-${D.value} mt-1`,children:E(j).toLocaleString()})]},j)})})]})},Az=({selectedYear:n})=>{const[e,t]=W.useState([]),[r,a]=W.useState({}),[o,c]=W.useState(!0),[u,h]=W.useState(!1),[f,g]=W.useState({type:"",text:""});W.useEffect(()=>{x()},[n]);const x=async()=>{c(!0);try{const j=await hm(),S=await BT(n),D={};j.forEach(O=>{const B=S.find(re=>re.villageId===O.id);D[O.id]={villageId:O.id,year:n,mahilaBachatGatCount:B?.mahilaBachatGatCount||0,yuvakMandalCount:B?.yuvakMandalCount||0,kisanGatCount:B?.kisanGatCount||0,otherGroupCount:B?.otherGroupCount||0}}),t(j),a(D)}catch(j){console.error("Error loading groups data:",j),g({type:"error",text:"Failed to load groups data"})}finally{c(!1)}},v=(j,S,D)=>{a(O=>({...O,[j]:{...O[j],[S]:parseInt(D)||0}}))},b=async()=>{h(!0),g({type:"",text:""});try{const j=Object.values(r);for(const S of j)if(S.mahilaBachatGatCount<0||S.yuvakMandalCount<0||S.kisanGatCount<0||S.otherGroupCount<0)throw new Error("Group counts cannot be negative");console.log("Saving groups & committees data:",j.length,"records"),await vz(j),console.log("Groups & committees data saved successfully"),g({type:"success",text:`Groups & Committees data for ${n} saved successfully!`})}catch(j){console.error("Error saving groups data:",j),g({type:"error",text:j.message||"Failed to save data. Please try again."})}finally{h(!1)}},T=j=>{const S=r[j];return S?(S.mahilaBachatGatCount||0)+(S.yuvakMandalCount||0)+(S.kisanGatCount||0)+(S.otherGroupCount||0):0},E=j=>Object.values(r).reduce((S,D)=>S+(D[j]||0),0);return o?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Groups & Committees - ",n]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage community groups count for each village"})]}),s.jsxs("button",{onClick:b,disabled:u,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(Bs,{className:"w-4 h-4"}),u?"Saving...":"Save All"]})]}),f.text&&s.jsxs("div",{className:`flex items-center gap-2 p-4 rounded-lg ${f.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[s.jsx(Qn,{className:"w-5 h-5"}),s.jsx("span",{children:f.text})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 p-4 rounded-lg border border-pink-200",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Us,{className:"w-5 h-5 text-pink-600"}),s.jsx("div",{className:"text-sm text-pink-600 font-medium",children:"Mahila Bachat Gat"})]}),s.jsx("div",{className:"text-sm text-pink-500 mt-1",children:"Women's Self-Help Groups"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Us,{className:"w-5 h-5 text-blue-600"}),s.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Yuvak Mandal"})]}),s.jsx("div",{className:"text-sm text-blue-500 mt-1",children:"Youth Organizations"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border border-green-200",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Us,{className:"w-5 h-5 text-green-600"}),s.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Kisan Gat"})]}),s.jsx("div",{className:"text-sm text-green-500 mt-1",children:"Farmers' Groups"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg border border-purple-200",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Us,{className:"w-5 h-5 text-purple-600"}),s.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Other Groups"})]}),s.jsx("div",{className:"text-sm text-purple-500 mt-1",children:"Other Community Groups"})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-green-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Village Name"}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Mahila Bachat Gat",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:"(  )"})]}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Yuvak Mandal",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:"( )"})]}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Kisan Gat",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:"( )"})]}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Other Groups",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:"( )"})]}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Total"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((j,S)=>s.jsxs("tr",{className:S%2===0?"bg-white":"bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.nameEn}),s.jsx("div",{className:"text-sm text-gray-500",children:j.nameMr})]})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[j.id]?.mahilaBachatGatCount||0,onChange:D=>v(j.id,"mahilaBachatGatCount",D.target.value),className:"w-24 px-3 py-2 text-center border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[j.id]?.yuvakMandalCount||0,onChange:D=>v(j.id,"yuvakMandalCount",D.target.value),className:"w-24 px-3 py-2 text-center border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[j.id]?.kisanGatCount||0,onChange:D=>v(j.id,"kisanGatCount",D.target.value),className:"w-24 px-3 py-2 text-center border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[j.id]?.otherGroupCount||0,onChange:D=>v(j.id,"otherGroupCount",D.target.value),className:"w-24 px-3 py-2 text-center border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("span",{className:"font-semibold text-gray-700",children:T(j.id)})})]},j.id))}),s.jsx("tfoot",{className:"bg-gray-100",children:s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 font-bold text-gray-900",children:"Grand Total"}),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-gray-900",children:E("mahilaBachatGatCount")}),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-gray-900",children:E("yuvakMandalCount")}),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-gray-900",children:E("kisanGatCount")}),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-gray-900",children:E("otherGroupCount")}),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-gray-900",children:E("mahilaBachatGatCount")+E("yuvakMandalCount")+E("kisanGatCount")+E("otherGroupCount")})]})})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 p-4 rounded-lg border border-pink-200",children:[s.jsx("div",{className:"text-sm text-pink-600 font-medium",children:"Mahila Bachat Gat"}),s.jsx("div",{className:"text-2xl font-bold text-pink-900 mt-1",children:E("mahilaBachatGatCount")})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200",children:[s.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Yuvak Mandal"}),s.jsx("div",{className:"text-2xl font-bold text-blue-900 mt-1",children:E("yuvakMandalCount")})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border border-green-200",children:[s.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Kisan Gat"}),s.jsx("div",{className:"text-2xl font-bold text-green-900 mt-1",children:E("kisanGatCount")})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg border border-purple-200",children:[s.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Other Groups"}),s.jsx("div",{className:"text-2xl font-bold text-purple-900 mt-1",children:E("otherGroupCount")})]}),s.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-4 rounded-lg border border-orange-200",children:[s.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Total Groups"}),s.jsx("div",{className:"text-2xl font-bold text-orange-900 mt-1",children:E("mahilaBachatGatCount")+E("yuvakMandalCount")+E("kisanGatCount")+E("otherGroupCount")})]})]})]})},Tz=({selectedYear:n})=>{const[e,t]=W.useState([]),[r,a]=W.useState({}),[o,c]=W.useState(!0),[u,h]=W.useState(!1),[f,g]=W.useState({type:"",text:""});W.useEffect(()=>{x()},[n]);const x=async()=>{c(!0);try{const E=await hm(),j=await zT(n),S={};E.forEach(D=>{const O=j.find(B=>B.villageId===D.id);S[D.id]={villageId:D.id,year:n,privateWells:O?.privateWells||0,publicWells:O?.publicWells||0,nitScheme:O?.nitScheme||0,handpumps:O?.handpumps||0,waterTankCapacity:O?.waterTankCapacity||"",waterFilterPlant:O?.waterFilterPlant||0,privatePonds:O?.privatePonds||0,families:O?.families||0,oldTapConnections:O?.oldTapConnections||0,newTapConnections:O?.newTapConnections||0,totalTapConnections:O?.totalTapConnections||0,privateWellsForTap:O?.privateWellsForTap||0,pendingTapConnections:O?.pendingTapConnections||0,notes:O?.notes||""}}),t(E),a(S)}catch(E){console.error("Error loading infrastructure:",E),g({type:"error",text:"Failed to load infrastructure data"})}finally{c(!1)}},v=(E,j,S)=>{a(D=>{const O={...D,[E]:{...D[E],[j]:j==="notes"||j==="waterTankCapacity"?S:parseInt(S)||0}};if(j==="oldTapConnections"||j==="newTapConnections"){const B=j==="oldTapConnections"?parseInt(S)||0:O[E].oldTapConnections,re=j==="newTapConnections"?parseInt(S)||0:O[E].newTapConnections;O[E].totalTapConnections=B+re}return O})},b=async()=>{h(!0),g({type:"",text:""});try{const E=Object.values(r);console.log("Saving water & infrastructure data:",E.length,"records"),await Nz(E),console.log("Water & infrastructure data saved successfully"),g({type:"success",text:`Water & Infrastructure data for ${n} saved successfully!`})}catch(E){console.error("Error saving infrastructure data:",E),g({type:"error",text:E.message||"Failed to save data. Please try again."})}finally{h(!1)}},T=E=>Object.values(r).reduce((j,S)=>j+(S[E]||0),0);return o?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}):s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Water Supply Information - ",n]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"  | Manage water resources and infrastructure"})]}),s.jsxs("button",{onClick:b,disabled:u,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(Bs,{className:"w-4 h-4"}),u?"Saving...":"Save All"]})]}),f.text&&s.jsxs("div",{className:`flex items-center gap-2 p-4 rounded-lg ${f.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[s.jsx(Qn,{className:"w-5 h-5"}),s.jsx("span",{children:f.text})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 px-6 py-4",children:s.jsxs("h4",{className:"text-white font-semibold flex items-center gap-2",children:[s.jsx(Px,{className:"w-5 h-5"}),"Table 1: Water Supply Sources |   "]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-green-50",children:s.jsxs("tr",{children:[s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Sr. No.",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:".."})]}),s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Water Source",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:" "})]}),e.map(E=>s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:[E.nameEn,s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:E.nameMr})]},E.id)),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider bg-blue-50",children:["Total",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:""})]})]})}),s.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"1"}),s.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["Private Wells",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-gray-500",children:" "})]}),e.map(E=>s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[E.id]?.privateWells||0,onChange:j=>v(E.id,"privateWells",j.target.value),className:"w-20 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})},E.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:T("privateWells")})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"2"}),s.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["Public Wells",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-gray-500",children:" "})]}),e.map(E=>s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[E.id]?.publicWells||0,onChange:j=>v(E.id,"publicWells",j.target.value),className:"w-20 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})},E.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:T("publicWells")})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"3"}),s.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["NIT Scheme",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-gray-500",children:" "})]}),e.map(E=>s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[E.id]?.nitScheme||0,onChange:j=>v(E.id,"nitScheme",j.target.value),className:"w-20 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})},E.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:T("nitScheme")})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"4"}),s.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["Handpumps",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.map(E=>s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[E.id]?.handpumps||0,onChange:j=>v(E.id,"handpumps",j.target.value),className:"w-20 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})},E.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:T("handpumps")})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"5"}),s.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["Water Tank Capacity",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-gray-500",children:"  "})]}),e.map(E=>s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"text",value:r[E.id]?.waterTankCapacity||"",onChange:j=>v(E.id,"waterTankCapacity",j.target.value),placeholder:"e.g., 8 lakh liters",className:"w-32 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})},E.id)),s.jsx("td",{className:"px-6 py-4 text-center text-gray-500 bg-blue-50",children:""})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"6"}),s.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["Water Filter Plant",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-gray-500",children:"  "})]}),e.map(E=>s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[E.id]?.waterFilterPlant||0,onChange:j=>v(E.id,"waterFilterPlant",j.target.value),className:"w-20 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})},E.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:T("waterFilterPlant")})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"7"}),s.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["Private Ponds",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-gray-500",children:" "})]}),e.map(E=>s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[E.id]?.privatePonds||0,onChange:j=>v(E.id,"privatePonds",j.target.value),className:"w-20 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})},E.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:T("privatePonds")})]})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4",children:s.jsxs("h4",{className:"text-white font-semibold flex items-center gap-2",children:[s.jsx(Px,{className:"w-5 h-5"}),"Table 2: Tap Connection Details |   "]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-green-50",children:s.jsxs("tr",{children:[s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Sr. No.",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:".."})]}),s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Village",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:""})]}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Families",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:""})]}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Old Tap Connections",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:" "})]}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:["New Tap Connections",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:" "})]}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider bg-indigo-50",children:["Total Tap Connections",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:"(Auto)"})]}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Private Wells",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:" "})]}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Pending",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:""})]})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((E,j)=>s.jsxs("tr",{className:j%2===0?"bg-white":"bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:j+1}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.nameEn}),s.jsx("div",{className:"text-xs text-gray-500",children:E.nameMr})]}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[E.id]?.families||0,onChange:S=>v(E.id,"families",S.target.value),className:"w-24 px-3 py-2 text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[E.id]?.oldTapConnections||0,onChange:S=>v(E.id,"oldTapConnections",S.target.value),className:"w-24 px-3 py-2 text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[E.id]?.newTapConnections||0,onChange:S=>v(E.id,"newTapConnections",S.target.value),className:"w-24 px-3 py-2 text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})}),s.jsx("td",{className:"px-6 py-4 text-center bg-indigo-50",children:s.jsx("input",{type:"number",value:r[E.id]?.totalTapConnections||0,readOnly:!0,className:"w-24 px-3 py-2 text-center border border-gray-300 rounded bg-gray-100 font-semibold cursor-not-allowed",title:"Auto-calculated: Old + New"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[E.id]?.privateWellsForTap||0,onChange:S=>v(E.id,"privateWellsForTap",S.target.value),className:"w-24 px-3 py-2 text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[E.id]?.pendingTapConnections||0,onChange:S=>v(E.id,"pendingTapConnections",S.target.value),className:"w-24 px-3 py-2 text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})})]},E.id))}),s.jsx("tfoot",{className:"bg-indigo-50",children:s.jsxs("tr",{className:"font-bold",children:[s.jsx("td",{className:"px-6 py-4",colSpan:"2",children:"Total | "}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900",children:T("families")}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900",children:T("oldTapConnections")}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900",children:T("newTapConnections")}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900 bg-indigo-100",children:T("totalTapConnections")}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900",children:T("privateWellsForTap")}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900",children:T("pendingTapConnections")})]})})]})})]})]})},Cz="modulepreload",Iz=function(n){return"/"+n},B4={},p1=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){let h=function(f){return Promise.all(f.map(g=>Promise.resolve(g).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");a=h(t.map(f=>{if(f=Iz(f),f in B4)return;B4[f]=!0;const g=f.endsWith(".css"),x=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${x}`))return;const v=document.createElement("link");if(v.rel=g?"stylesheet":Cz,g||(v.as="script"),v.crossOrigin="",v.href=f,u&&v.setAttribute("nonce",u),document.head.appendChild(v),g)return new Promise((b,T)=>{v.addEventListener("load",b),v.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return a.then(c=>{for(const u of c||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})};function ur(n){"@babel/helpers - typeof";return ur=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ur(n)}var yl=Uint8Array,fo=Uint16Array,Sw=Int32Array,Ew=new yl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Aw=new yl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),z4=new yl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),HT=function(n,e){for(var t=new fo(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var a=new Sw(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)a[o]=o-t[r]<<5|r;return{b:t,r:a}},$T=HT(Ew,2),kz=$T.b,D2=$T.r;kz[28]=258,D2[258]=28;var Rz=HT(Aw,0),q4=Rz.r,M2=new fo(32768);for(var Dr=0;Dr<32768;++Dr){var Vu=(Dr&43690)>>1|(Dr&21845)<<1;Vu=(Vu&52428)>>2|(Vu&13107)<<2,Vu=(Vu&61680)>>4|(Vu&3855)<<4,M2[Dr]=((Vu&65280)>>8|(Vu&255)<<8)>>1}var Sg=(function(n,e,t){for(var r=n.length,a=0,o=new fo(e);a<r;++a)n[a]&&++o[n[a]-1];var c=new fo(e);for(a=1;a<e;++a)c[a]=c[a-1]+o[a-1]<<1;var u;if(t){u=new fo(1<<e);var h=15-e;for(a=0;a<r;++a)if(n[a])for(var f=a<<4|n[a],g=e-n[a],x=c[n[a]-1]++<<g,v=x|(1<<g)-1;x<=v;++x)u[M2[x]>>h]=f}else for(u=new fo(r),a=0;a<r;++a)n[a]&&(u[a]=M2[c[n[a]-1]++]>>15-n[a]);return u}),hh=new yl(288);for(var Dr=0;Dr<144;++Dr)hh[Dr]=8;for(var Dr=144;Dr<256;++Dr)hh[Dr]=9;for(var Dr=256;Dr<280;++Dr)hh[Dr]=7;for(var Dr=280;Dr<288;++Dr)hh[Dr]=8;var Ux=new yl(32);for(var Dr=0;Dr<32;++Dr)Ux[Dr]=5;var Pz=Sg(hh,9,0),Lz=Sg(Ux,5,0),WT=function(n){return(n+7)/8|0},Dz=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new yl(n.subarray(e,t))},Mc=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},rg=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},x1=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var a=t.length,o=t.slice();if(!a)return{t:YT,l:0};if(a==1){var c=new yl(t[0].s+1);return c[t[0].s]=1,{t:c,l:1}}t.sort(function(re,ae){return re.f-ae.f}),t.push({s:-1,f:25001});var u=t[0],h=t[1],f=0,g=1,x=2;for(t[0]={s:-1,f:u.f+h.f,l:u,r:h};g!=a-1;)u=t[t[f].f<t[x].f?f++:x++],h=t[f!=g&&t[f].f<t[x].f?f++:x++],t[g++]={s:-1,f:u.f+h.f,l:u,r:h};for(var v=o[0].s,r=1;r<a;++r)o[r].s>v&&(v=o[r].s);var b=new fo(v+1),T=O2(t[g-1],b,0);if(T>e){var r=0,E=0,j=T-e,S=1<<j;for(o.sort(function(ae,G){return b[G.s]-b[ae.s]||ae.f-G.f});r<a;++r){var D=o[r].s;if(b[D]>e)E+=S-(1<<T-b[D]),b[D]=e;else break}for(E>>=j;E>0;){var O=o[r].s;b[O]<e?E-=1<<e-b[O]++-1:++r}for(;r>=0&&E;--r){var B=o[r].s;b[B]==e&&(--b[B],++E)}T=e}return{t:new yl(b),l:T}},O2=function(n,e,t){return n.s==-1?Math.max(O2(n.l,e,t+1),O2(n.r,e,t+1)):e[n.s]=t},G4=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new fo(++e),r=0,a=n[0],o=1,c=function(h){t[r++]=h},u=1;u<=e;++u)if(n[u]==a&&u!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)c(32754);o>2&&(c(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(c(a),--o;o>6;o-=6)c(8304);o>2&&(c(o-3<<5|8208),o=0)}for(;o--;)c(a);o=1,a=n[u]}return{c:t.subarray(0,r),n:e}},sg=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},KT=function(n,e,t){var r=t.length,a=WT(e+2);n[a]=r&255,n[a+1]=r>>8,n[a+2]=n[a]^255,n[a+3]=n[a+1]^255;for(var o=0;o<r;++o)n[a+o+4]=t[o];return(a+4+r)*8},H4=function(n,e,t,r,a,o,c,u,h,f,g){Mc(e,g++,t),++a[256];for(var x=x1(a,15),v=x.t,b=x.l,T=x1(o,15),E=T.t,j=T.l,S=G4(v),D=S.c,O=S.n,B=G4(E),re=B.c,ae=B.n,G=new fo(19),M=0;M<D.length;++M)++G[D[M]&31];for(var M=0;M<re.length;++M)++G[re[M]&31];for(var k=x1(G,7),L=k.t,C=k.l,P=19;P>4&&!L[z4[P-1]];--P);var V=f+5<<3,oe=sg(a,hh)+sg(o,Ux)+c,Ne=sg(a,v)+sg(o,E)+c+14+3*P+sg(G,L)+2*G[16]+3*G[17]+7*G[18];if(h>=0&&V<=oe&&V<=Ne)return KT(e,g,n.subarray(h,h+f));var ue,pe,de,Se;if(Mc(e,g,1+(Ne<oe)),g+=2,Ne<oe){ue=Sg(v,b,0),pe=v,de=Sg(E,j,0),Se=E;var ze=Sg(L,C,0);Mc(e,g,O-257),Mc(e,g+5,ae-1),Mc(e,g+10,P-4),g+=14;for(var M=0;M<P;++M)Mc(e,g+3*M,L[z4[M]]);g+=3*P;for(var te=[D,re],q=0;q<2;++q)for(var Q=te[q],M=0;M<Q.length;++M){var ne=Q[M]&31;Mc(e,g,ze[ne]),g+=L[ne],ne>15&&(Mc(e,g,Q[M]>>5&127),g+=Q[M]>>12)}}else ue=Pz,pe=hh,de=Lz,Se=Ux;for(var M=0;M<u;++M){var he=r[M];if(he>255){var ne=he>>18&31;rg(e,g,ue[ne+257]),g+=pe[ne+257],ne>7&&(Mc(e,g,he>>23&31),g+=Ew[ne]);var me=he&31;rg(e,g,de[me]),g+=Se[me],me>3&&(rg(e,g,he>>5&8191),g+=Aw[me])}else rg(e,g,ue[he]),g+=pe[he]}return rg(e,g,ue[256]),g+pe[256]},Mz=new Sw([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),YT=new yl(0),Oz=function(n,e,t,r,a,o){var c=o.z||n.length,u=new yl(r+c+5*(1+Math.ceil(c/7e3))+a),h=u.subarray(r,u.length-a),f=o.l,g=(o.r||0)&7;if(e){g&&(h[0]=o.r>>3);for(var x=Mz[e-1],v=x>>13,b=x&8191,T=(1<<t)-1,E=o.p||new fo(32768),j=o.h||new fo(T+1),S=Math.ceil(t/3),D=2*S,O=function(ft){return(n[ft]^n[ft+1]<<S^n[ft+2]<<D)&T},B=new Sw(25e3),re=new fo(288),ae=new fo(32),G=0,M=0,k=o.i||0,L=0,C=o.w||0,P=0;k+2<c;++k){var V=O(k),oe=k&32767,Ne=j[V];if(E[oe]=Ne,j[V]=oe,C<=k){var ue=c-k;if((G>7e3||L>24576)&&(ue>423||!f)){g=H4(n,h,0,B,re,ae,M,L,P,k-P,g),L=G=M=0,P=k;for(var pe=0;pe<286;++pe)re[pe]=0;for(var pe=0;pe<30;++pe)ae[pe]=0}var de=2,Se=0,ze=b,te=oe-Ne&32767;if(ue>2&&V==O(k-te))for(var q=Math.min(v,ue)-1,Q=Math.min(32767,k),ne=Math.min(258,ue);te<=Q&&--ze&&oe!=Ne;){if(n[k+de]==n[k+de-te]){for(var he=0;he<ne&&n[k+he]==n[k+he-te];++he);if(he>de){if(de=he,Se=te,he>q)break;for(var me=Math.min(te,he-2),be=0,pe=0;pe<me;++pe){var Le=k-te+pe&32767,Re=E[Le],qe=Le-Re&32767;qe>be&&(be=qe,Ne=Le)}}}oe=Ne,Ne=E[oe],te+=oe-Ne&32767}if(Se){B[L++]=268435456|D2[de]<<18|q4[Se];var Je=D2[de]&31,it=q4[Se]&31;M+=Ew[Je]+Aw[it],++re[257+Je],++ae[it],C=k+de,++G}else B[L++]=n[k],++re[n[k]]}}for(k=Math.max(k,C);k<c;++k)B[L++]=n[k],++re[n[k]];g=H4(n,h,f,B,re,ae,M,L,P,k-P,g),f||(o.r=g&7|h[g/8|0]<<3,g-=7,o.h=j,o.p=E,o.i=k,o.w=C)}else{for(var k=o.w||0;k<c+f;k+=65535){var at=k+65535;at>=c&&(h[g/8|0]=f,at=c),g=KT(h,g+1,n.subarray(k,at))}o.i=c}return Dz(u,0,r+WT(g)+a)},XT=function(){var n=1,e=0;return{p:function(t){for(var r=n,a=e,o=t.length|0,c=0;c!=o;){for(var u=Math.min(c+2655,o);c<u;++c)a+=r+=t[c];r=(r&65535)+15*(r>>16),a=(a&65535)+15*(a>>16)}n=r,e=a},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},Fz=function(n,e,t,r,a){if(!a&&(a={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),c=new yl(o.length+n.length);c.set(o),c.set(n,o.length),n=c,a.w=o.length}return Oz(n,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,a)},QT=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},Uz=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var a=XT();a.p(e.dictionary),QT(n,2,a.d())}};function F2(n,e){e||(e={});var t=XT();t.p(n);var r=Fz(n,e,e.dictionary?6:2,4);return Uz(r,e),QT(r,r.length-4,t.d()),r}var Vz=typeof TextDecoder<"u"&&new TextDecoder,Bz=0;try{Vz.decode(YT,{stream:!0}),Bz=1}catch{}function zz(n){if(Array.isArray(n))return n}function qz(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,a,o,c,u=[],h=!0,f=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(h=(r=o.call(t)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,a=g}finally{try{if(!h&&t.return!=null&&(c=t.return(),Object(c)!==c))return}finally{if(f)throw a}}return u}}function $4(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Gz(n,e){if(n){if(typeof n=="string")return $4(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?$4(n,e):void 0}}function Hz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W4(n,e){return zz(n)||qz(n,e)||Gz(n,e)||Hz()}function K4(n,e="utf8"){return new TextDecoder(e).decode(n)}const $z=new TextEncoder;function Wz(n){return $z.encode(n)}const Kz=1024*8,Yz=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),y1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Tw{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=Kz,t={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const a=t.offset?t.offset>>>0:0,o=e.byteLength-a;let c=a;(ArrayBuffer.isView(e)||e instanceof Tw)&&(e.byteLength!==e.buffer.byteLength&&(c=e.byteOffset+a),e=e.buffer),r?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=c,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,c,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,a=new Uint8Array(r);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const r=y1[t].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,o=this.buffer.slice(a,a+r);if(this.littleEndian===Yz&&t!=="uint8"&&t!=="int8"){const u=new Uint8Array(this.buffer.slice(a,a+r));u.reverse();const h=new y1[t](u.buffer);return this.offset+=r,h.reverse(),h}const c=new y1[t](o);return this.offset+=r,c}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return K4(this.readBytes(e))}decodeText(e=1,t="utf8"){return K4(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(Wz(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function fm(n){let e=n.length;for(;--e>=0;)n[e]=0}const Xz=3,Qz=258,JT=29,Jz=256,Zz=Jz+1+JT,ZT=30,eq=512,tq=new Array((Zz+2)*2);fm(tq);const nq=new Array(ZT*2);fm(nq);const rq=new Array(eq);fm(rq);const sq=new Array(Qz-Xz+1);fm(sq);const aq=new Array(JT);fm(aq);const iq=new Array(ZT);fm(iq);const oq=(n,e,t,r)=>{let a=n&65535|0,o=n>>>16&65535|0,c=0;for(;t!==0;){c=t>2e3?2e3:t,t-=c;do a=a+e[r++]|0,o=o+a|0;while(--c);a%=65521,o%=65521}return a|o<<16|0};var U2=oq;const lq=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},cq=new Uint32Array(lq()),uq=(n,e,t,r)=>{const a=cq,o=r+t;n^=-1;for(let c=r;c<o;c++)n=n>>>8^a[(n^e[c])&255];return n^-1};var Hl=uq,V2={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},eC={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const dq=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var hq=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const r in t)dq(t,r)&&(n[r]=t[r])}}return n},fq=n=>{let e=0;for(let r=0,a=n.length;r<a;r++)e+=n[r].length;const t=new Uint8Array(e);for(let r=0,a=0,o=n.length;r<o;r++){let c=n[r];t.set(c,a),a+=c.length}return t},tC={assign:hq,flattenChunks:fq};let nC=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{nC=!1}const Yg=new Uint8Array(256);for(let n=0;n<256;n++)Yg[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Yg[254]=Yg[254]=1;var mq=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,a,o,c=n.length,u=0;for(a=0;a<c;a++)t=n.charCodeAt(a),(t&64512)===55296&&a+1<c&&(r=n.charCodeAt(a+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),a++)),u+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(u),o=0,a=0;o<u;a++)t=n.charCodeAt(a),(t&64512)===55296&&a+1<c&&(r=n.charCodeAt(a+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),a++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const gq=(n,e)=>{if(e<65534&&n.subarray&&nC)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t};var pq=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,a;const o=new Array(t*2);for(a=0,r=0;r<t;){let c=n[r++];if(c<128){o[a++]=c;continue}let u=Yg[c];if(u>4){o[a++]=65533,r+=u-1;continue}for(c&=u===2?31:u===3?15:7;u>1&&r<t;)c=c<<6|n[r++]&63,u--;if(u>1){o[a++]=65533;continue}c<65536?o[a++]=c:(c-=65536,o[a++]=55296|c>>10&1023,o[a++]=56320|c&1023)}return gq(o,a)},xq=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+Yg[n[t]]>e?t:e},B2={string2buf:mq,buf2string:pq,utf8border:xq};function yq(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var bq=yq;const _0=16209,vq=16191;var wq=function(e,t){let r,a,o,c,u,h,f,g,x,v,b,T,E,j,S,D,O,B,re,ae,G,M,k,L;const C=e.state;r=e.next_in,k=e.input,a=r+(e.avail_in-5),o=e.next_out,L=e.output,c=o-(t-e.avail_out),u=o+(e.avail_out-257),h=C.dmax,f=C.wsize,g=C.whave,x=C.wnext,v=C.window,b=C.hold,T=C.bits,E=C.lencode,j=C.distcode,S=(1<<C.lenbits)-1,D=(1<<C.distbits)-1;e:do{T<15&&(b+=k[r++]<<T,T+=8,b+=k[r++]<<T,T+=8),O=E[b&S];t:for(;;){if(B=O>>>24,b>>>=B,T-=B,B=O>>>16&255,B===0)L[o++]=O&65535;else if(B&16){re=O&65535,B&=15,B&&(T<B&&(b+=k[r++]<<T,T+=8),re+=b&(1<<B)-1,b>>>=B,T-=B),T<15&&(b+=k[r++]<<T,T+=8,b+=k[r++]<<T,T+=8),O=j[b&D];n:for(;;){if(B=O>>>24,b>>>=B,T-=B,B=O>>>16&255,B&16){if(ae=O&65535,B&=15,T<B&&(b+=k[r++]<<T,T+=8,T<B&&(b+=k[r++]<<T,T+=8)),ae+=b&(1<<B)-1,ae>h){e.msg="invalid distance too far back",C.mode=_0;break e}if(b>>>=B,T-=B,B=o-c,ae>B){if(B=ae-B,B>g&&C.sane){e.msg="invalid distance too far back",C.mode=_0;break e}if(G=0,M=v,x===0){if(G+=f-B,B<re){re-=B;do L[o++]=v[G++];while(--B);G=o-ae,M=L}}else if(x<B){if(G+=f+x-B,B-=x,B<re){re-=B;do L[o++]=v[G++];while(--B);if(G=0,x<re){B=x,re-=B;do L[o++]=v[G++];while(--B);G=o-ae,M=L}}}else if(G+=x-B,B<re){re-=B;do L[o++]=v[G++];while(--B);G=o-ae,M=L}for(;re>2;)L[o++]=M[G++],L[o++]=M[G++],L[o++]=M[G++],re-=3;re&&(L[o++]=M[G++],re>1&&(L[o++]=M[G++]))}else{G=o-ae;do L[o++]=L[G++],L[o++]=L[G++],L[o++]=L[G++],re-=3;while(re>2);re&&(L[o++]=L[G++],re>1&&(L[o++]=L[G++]))}}else if((B&64)===0){O=j[(O&65535)+(b&(1<<B)-1)];continue n}else{e.msg="invalid distance code",C.mode=_0;break e}break}}else if((B&64)===0){O=E[(O&65535)+(b&(1<<B)-1)];continue t}else if(B&32){C.mode=vq;break e}else{e.msg="invalid literal/length code",C.mode=_0;break e}break}}while(r<a&&o<u);re=T>>3,r-=re,T-=re<<3,b&=(1<<T)-1,e.next_in=r,e.next_out=o,e.avail_in=r<a?5+(a-r):5-(r-a),e.avail_out=o<u?257+(u-o):257-(o-u),C.hold=b,C.bits=T};const hf=15,Y4=852,X4=592,Q4=0,b1=1,J4=2,Nq=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),jq=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),_q=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Sq=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Eq=(n,e,t,r,a,o,c,u)=>{const h=u.bits;let f=0,g=0,x=0,v=0,b=0,T=0,E=0,j=0,S=0,D=0,O,B,re,ae,G,M=null,k;const L=new Uint16Array(hf+1),C=new Uint16Array(hf+1);let P=null,V,oe,Ne;for(f=0;f<=hf;f++)L[f]=0;for(g=0;g<r;g++)L[e[t+g]]++;for(b=h,v=hf;v>=1&&L[v]===0;v--);if(b>v&&(b=v),v===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,u.bits=1,0;for(x=1;x<v&&L[x]===0;x++);for(b<x&&(b=x),j=1,f=1;f<=hf;f++)if(j<<=1,j-=L[f],j<0)return-1;if(j>0&&(n===Q4||v!==1))return-1;for(C[1]=0,f=1;f<hf;f++)C[f+1]=C[f]+L[f];for(g=0;g<r;g++)e[t+g]!==0&&(c[C[e[t+g]]++]=g);if(n===Q4?(M=P=c,k=20):n===b1?(M=Nq,P=jq,k=257):(M=_q,P=Sq,k=0),D=0,g=0,f=x,G=o,T=b,E=0,re=-1,S=1<<b,ae=S-1,n===b1&&S>Y4||n===J4&&S>X4)return 1;for(;;){V=f-E,c[g]+1<k?(oe=0,Ne=c[g]):c[g]>=k?(oe=P[c[g]-k],Ne=M[c[g]-k]):(oe=96,Ne=0),O=1<<f-E,B=1<<T,x=B;do B-=O,a[G+(D>>E)+B]=V<<24|oe<<16|Ne|0;while(B!==0);for(O=1<<f-1;D&O;)O>>=1;if(O!==0?(D&=O-1,D+=O):D=0,g++,--L[f]===0){if(f===v)break;f=e[t+c[g]]}if(f>b&&(D&ae)!==re){for(E===0&&(E=b),G+=x,T=f-E,j=1<<T;T+E<v&&(j-=L[T+E],!(j<=0));)T++,j<<=1;if(S+=1<<T,n===b1&&S>Y4||n===J4&&S>X4)return 1;re=D&ae,a[re]=b<<24|T<<16|G-o|0}}return D!==0&&(a[G+D]=f-E<<24|64<<16|0),u.bits=b,0};var Eg=Eq;const Aq=0,rC=1,sC=2,{Z_FINISH:Z4,Z_BLOCK:Tq,Z_TREES:S0,Z_OK:fh,Z_STREAM_END:Cq,Z_NEED_DICT:Iq,Z_STREAM_ERROR:Go,Z_DATA_ERROR:aC,Z_MEM_ERROR:iC,Z_BUF_ERROR:kq,Z_DEFLATED:e6}=eC,Iy=16180,t6=16181,n6=16182,r6=16183,s6=16184,a6=16185,i6=16186,o6=16187,l6=16188,c6=16189,Vx=16190,Oc=16191,v1=16192,u6=16193,w1=16194,d6=16195,h6=16196,f6=16197,m6=16198,E0=16199,A0=16200,g6=16201,p6=16202,x6=16203,y6=16204,b6=16205,N1=16206,v6=16207,w6=16208,qr=16209,oC=16210,lC=16211,Rq=852,Pq=592,Lq=15,Dq=Lq,N6=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function Mq(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const vh=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<Iy||e.mode>lC?1:0},cC=n=>{if(vh(n))return Go;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=Iy,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Rq),e.distcode=e.distdyn=new Int32Array(Pq),e.sane=1,e.back=-1,fh},uC=n=>{if(vh(n))return Go;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,cC(n)},dC=(n,e)=>{let t;if(vh(n))return Go;const r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Go:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,uC(n))},hC=(n,e)=>{if(!n)return Go;const t=new Mq;n.state=t,t.strm=n,t.window=null,t.mode=Iy;const r=dC(n,e);return r!==fh&&(n.state=null),r},Oq=n=>hC(n,Dq);let j6=!0,j1,_1;const Fq=n=>{if(j6){j1=new Int32Array(512),_1=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(Eg(rC,n.lens,0,288,j1,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;Eg(sC,n.lens,0,32,_1,0,n.work,{bits:5}),j6=!1}n.lencode=j1,n.lenbits=9,n.distcode=_1,n.distbits=5},fC=(n,e,t,r)=>{let a;const o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>r&&(a=r),o.window.set(e.subarray(t-r,t-r+a),o.wnext),r-=a,r?(o.window.set(e.subarray(t-r,t),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},Uq=(n,e)=>{let t,r,a,o,c,u,h,f,g,x,v,b,T,E,j=0,S,D,O,B,re,ae,G,M;const k=new Uint8Array(4);let L,C;const P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(vh(n)||!n.output||!n.input&&n.avail_in!==0)return Go;t=n.state,t.mode===Oc&&(t.mode=v1),c=n.next_out,a=n.output,h=n.avail_out,o=n.next_in,r=n.input,u=n.avail_in,f=t.hold,g=t.bits,x=u,v=h,M=fh;e:for(;;)switch(t.mode){case Iy:if(t.wrap===0){t.mode=v1;break}for(;g<16;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}if(t.wrap&2&&f===35615){t.wbits===0&&(t.wbits=15),t.check=0,k[0]=f&255,k[1]=f>>>8&255,t.check=Hl(t.check,k,2,0),f=0,g=0,t.mode=t6;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((f&255)<<8)+(f>>8))%31){n.msg="incorrect header check",t.mode=qr;break}if((f&15)!==e6){n.msg="unknown compression method",t.mode=qr;break}if(f>>>=4,g-=4,G=(f&15)+8,t.wbits===0&&(t.wbits=G),G>15||G>t.wbits){n.msg="invalid window size",t.mode=qr;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=f&512?c6:Oc,f=0,g=0;break;case t6:for(;g<16;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}if(t.flags=f,(t.flags&255)!==e6){n.msg="unknown compression method",t.mode=qr;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=qr;break}t.head&&(t.head.text=f>>8&1),t.flags&512&&t.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,t.check=Hl(t.check,k,2,0)),f=0,g=0,t.mode=n6;case n6:for(;g<32;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}t.head&&(t.head.time=f),t.flags&512&&t.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,k[2]=f>>>16&255,k[3]=f>>>24&255,t.check=Hl(t.check,k,4,0)),f=0,g=0,t.mode=r6;case r6:for(;g<16;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}t.head&&(t.head.xflags=f&255,t.head.os=f>>8),t.flags&512&&t.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,t.check=Hl(t.check,k,2,0)),f=0,g=0,t.mode=s6;case s6:if(t.flags&1024){for(;g<16;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}t.length=f,t.head&&(t.head.extra_len=f),t.flags&512&&t.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,t.check=Hl(t.check,k,2,0)),f=0,g=0}else t.head&&(t.head.extra=null);t.mode=a6;case a6:if(t.flags&1024&&(b=t.length,b>u&&(b=u),b&&(t.head&&(G=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(o,o+b),G)),t.flags&512&&t.wrap&4&&(t.check=Hl(t.check,r,b,o)),u-=b,o+=b,t.length-=b),t.length))break e;t.length=0,t.mode=i6;case i6:if(t.flags&2048){if(u===0)break e;b=0;do G=r[o+b++],t.head&&G&&t.length<65536&&(t.head.name+=String.fromCharCode(G));while(G&&b<u);if(t.flags&512&&t.wrap&4&&(t.check=Hl(t.check,r,b,o)),u-=b,o+=b,G)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=o6;case o6:if(t.flags&4096){if(u===0)break e;b=0;do G=r[o+b++],t.head&&G&&t.length<65536&&(t.head.comment+=String.fromCharCode(G));while(G&&b<u);if(t.flags&512&&t.wrap&4&&(t.check=Hl(t.check,r,b,o)),u-=b,o+=b,G)break e}else t.head&&(t.head.comment=null);t.mode=l6;case l6:if(t.flags&512){for(;g<16;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}if(t.wrap&4&&f!==(t.check&65535)){n.msg="header crc mismatch",t.mode=qr;break}f=0,g=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=Oc;break;case c6:for(;g<32;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}n.adler=t.check=N6(f),f=0,g=0,t.mode=Vx;case Vx:if(t.havedict===0)return n.next_out=c,n.avail_out=h,n.next_in=o,n.avail_in=u,t.hold=f,t.bits=g,Iq;n.adler=t.check=1,t.mode=Oc;case Oc:if(e===Tq||e===S0)break e;case v1:if(t.last){f>>>=g&7,g-=g&7,t.mode=N1;break}for(;g<3;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}switch(t.last=f&1,f>>>=1,g-=1,f&3){case 0:t.mode=u6;break;case 1:if(Fq(t),t.mode=E0,e===S0){f>>>=2,g-=2;break e}break;case 2:t.mode=h6;break;case 3:n.msg="invalid block type",t.mode=qr}f>>>=2,g-=2;break;case u6:for(f>>>=g&7,g-=g&7;g<32;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}if((f&65535)!==(f>>>16^65535)){n.msg="invalid stored block lengths",t.mode=qr;break}if(t.length=f&65535,f=0,g=0,t.mode=w1,e===S0)break e;case w1:t.mode=d6;case d6:if(b=t.length,b){if(b>u&&(b=u),b>h&&(b=h),b===0)break e;a.set(r.subarray(o,o+b),c),u-=b,o+=b,h-=b,c+=b,t.length-=b;break}t.mode=Oc;break;case h6:for(;g<14;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}if(t.nlen=(f&31)+257,f>>>=5,g-=5,t.ndist=(f&31)+1,f>>>=5,g-=5,t.ncode=(f&15)+4,f>>>=4,g-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=qr;break}t.have=0,t.mode=f6;case f6:for(;t.have<t.ncode;){for(;g<3;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}t.lens[P[t.have++]]=f&7,f>>>=3,g-=3}for(;t.have<19;)t.lens[P[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,L={bits:t.lenbits},M=Eg(Aq,t.lens,0,19,t.lencode,0,t.work,L),t.lenbits=L.bits,M){n.msg="invalid code lengths set",t.mode=qr;break}t.have=0,t.mode=m6;case m6:for(;t.have<t.nlen+t.ndist;){for(;j=t.lencode[f&(1<<t.lenbits)-1],S=j>>>24,D=j>>>16&255,O=j&65535,!(S<=g);){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}if(O<16)f>>>=S,g-=S,t.lens[t.have++]=O;else{if(O===16){for(C=S+2;g<C;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}if(f>>>=S,g-=S,t.have===0){n.msg="invalid bit length repeat",t.mode=qr;break}G=t.lens[t.have-1],b=3+(f&3),f>>>=2,g-=2}else if(O===17){for(C=S+3;g<C;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}f>>>=S,g-=S,G=0,b=3+(f&7),f>>>=3,g-=3}else{for(C=S+7;g<C;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}f>>>=S,g-=S,G=0,b=11+(f&127),f>>>=7,g-=7}if(t.have+b>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=qr;break}for(;b--;)t.lens[t.have++]=G}}if(t.mode===qr)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=qr;break}if(t.lenbits=9,L={bits:t.lenbits},M=Eg(rC,t.lens,0,t.nlen,t.lencode,0,t.work,L),t.lenbits=L.bits,M){n.msg="invalid literal/lengths set",t.mode=qr;break}if(t.distbits=6,t.distcode=t.distdyn,L={bits:t.distbits},M=Eg(sC,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,L),t.distbits=L.bits,M){n.msg="invalid distances set",t.mode=qr;break}if(t.mode=E0,e===S0)break e;case E0:t.mode=A0;case A0:if(u>=6&&h>=258){n.next_out=c,n.avail_out=h,n.next_in=o,n.avail_in=u,t.hold=f,t.bits=g,wq(n,v),c=n.next_out,a=n.output,h=n.avail_out,o=n.next_in,r=n.input,u=n.avail_in,f=t.hold,g=t.bits,t.mode===Oc&&(t.back=-1);break}for(t.back=0;j=t.lencode[f&(1<<t.lenbits)-1],S=j>>>24,D=j>>>16&255,O=j&65535,!(S<=g);){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}if(D&&(D&240)===0){for(B=S,re=D,ae=O;j=t.lencode[ae+((f&(1<<B+re)-1)>>B)],S=j>>>24,D=j>>>16&255,O=j&65535,!(B+S<=g);){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}f>>>=B,g-=B,t.back+=B}if(f>>>=S,g-=S,t.back+=S,t.length=O,D===0){t.mode=b6;break}if(D&32){t.back=-1,t.mode=Oc;break}if(D&64){n.msg="invalid literal/length code",t.mode=qr;break}t.extra=D&15,t.mode=g6;case g6:if(t.extra){for(C=t.extra;g<C;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}t.length+=f&(1<<t.extra)-1,f>>>=t.extra,g-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=p6;case p6:for(;j=t.distcode[f&(1<<t.distbits)-1],S=j>>>24,D=j>>>16&255,O=j&65535,!(S<=g);){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}if((D&240)===0){for(B=S,re=D,ae=O;j=t.distcode[ae+((f&(1<<B+re)-1)>>B)],S=j>>>24,D=j>>>16&255,O=j&65535,!(B+S<=g);){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}f>>>=B,g-=B,t.back+=B}if(f>>>=S,g-=S,t.back+=S,D&64){n.msg="invalid distance code",t.mode=qr;break}t.offset=O,t.extra=D&15,t.mode=x6;case x6:if(t.extra){for(C=t.extra;g<C;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}t.offset+=f&(1<<t.extra)-1,f>>>=t.extra,g-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=qr;break}t.mode=y6;case y6:if(h===0)break e;if(b=v-h,t.offset>b){if(b=t.offset-b,b>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=qr;break}b>t.wnext?(b-=t.wnext,T=t.wsize-b):T=t.wnext-b,b>t.length&&(b=t.length),E=t.window}else E=a,T=c-t.offset,b=t.length;b>h&&(b=h),h-=b,t.length-=b;do a[c++]=E[T++];while(--b);t.length===0&&(t.mode=A0);break;case b6:if(h===0)break e;a[c++]=t.length,h--,t.mode=A0;break;case N1:if(t.wrap){for(;g<32;){if(u===0)break e;u--,f|=r[o++]<<g,g+=8}if(v-=h,n.total_out+=v,t.total+=v,t.wrap&4&&v&&(n.adler=t.check=t.flags?Hl(t.check,a,v,c-v):U2(t.check,a,v,c-v)),v=h,t.wrap&4&&(t.flags?f:N6(f))!==t.check){n.msg="incorrect data check",t.mode=qr;break}f=0,g=0}t.mode=v6;case v6:if(t.wrap&&t.flags){for(;g<32;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}if(t.wrap&4&&f!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=qr;break}f=0,g=0}t.mode=w6;case w6:M=Cq;break e;case qr:M=aC;break e;case oC:return iC;case lC:default:return Go}return n.next_out=c,n.avail_out=h,n.next_in=o,n.avail_in=u,t.hold=f,t.bits=g,(t.wsize||v!==n.avail_out&&t.mode<qr&&(t.mode<N1||e!==Z4))&&fC(n,n.output,n.next_out,v-n.avail_out),x-=n.avail_in,v-=n.avail_out,n.total_in+=x,n.total_out+=v,t.total+=v,t.wrap&4&&v&&(n.adler=t.check=t.flags?Hl(t.check,a,v,n.next_out-v):U2(t.check,a,v,n.next_out-v)),n.data_type=t.bits+(t.last?64:0)+(t.mode===Oc?128:0)+(t.mode===E0||t.mode===w1?256:0),(x===0&&v===0||e===Z4)&&M===fh&&(M=kq),M},Vq=n=>{if(vh(n))return Go;let e=n.state;return e.window&&(e.window=null),n.state=null,fh},Bq=(n,e)=>{if(vh(n))return Go;const t=n.state;return(t.wrap&2)===0?Go:(t.head=e,e.done=!1,fh)},zq=(n,e)=>{const t=e.length;let r,a,o;return vh(n)||(r=n.state,r.wrap!==0&&r.mode!==Vx)?Go:r.mode===Vx&&(a=1,a=U2(a,e,t,0),a!==r.check)?aC:(o=fC(n,e,t,t),o?(r.mode=oC,iC):(r.havedict=1,fh))};var qq=uC,Gq=dC,Hq=cC,$q=Oq,Wq=hC,Kq=Uq,Yq=Vq,Xq=Bq,Qq=zq,Jq="pako inflate (from Nodeca project)",Vc={inflateReset:qq,inflateReset2:Gq,inflateResetKeep:Hq,inflateInit:$q,inflateInit2:Wq,inflate:Kq,inflateEnd:Yq,inflateGetHeader:Xq,inflateSetDictionary:Qq,inflateInfo:Jq};function Zq(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var eG=Zq;const mC=Object.prototype.toString,{Z_NO_FLUSH:tG,Z_FINISH:nG,Z_OK:Xg,Z_STREAM_END:S1,Z_NEED_DICT:E1,Z_STREAM_ERROR:rG,Z_DATA_ERROR:_6,Z_MEM_ERROR:sG}=eC;function vp(n){this.options=tC.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new bq,this.strm.avail_out=0;let t=Vc.inflateInit2(this.strm,e.windowBits);if(t!==Xg)throw new Error(V2[t]);if(this.header=new eG,Vc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=B2.string2buf(e.dictionary):mC.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Vc.inflateSetDictionary(this.strm,e.dictionary),t!==Xg)))throw new Error(V2[t])}vp.prototype.push=function(n,e){const t=this.strm,r=this.options.chunkSize,a=this.options.dictionary;let o,c,u;if(this.ended)return!1;for(e===~~e?c=e:c=e===!0?nG:tG,mC.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),o=Vc.inflate(t,c),o===E1&&a&&(o=Vc.inflateSetDictionary(t,a),o===Xg?o=Vc.inflate(t,c):o===_6&&(o=E1));t.avail_in>0&&o===S1&&t.state.wrap>0&&n[t.next_in]!==0;)Vc.inflateReset(t),o=Vc.inflate(t,c);switch(o){case rG:case _6:case E1:case sG:return this.onEnd(o),this.ended=!0,!1}if(u=t.avail_out,t.next_out&&(t.avail_out===0||o===S1))if(this.options.to==="string"){let h=B2.utf8border(t.output,t.next_out),f=t.next_out-h,g=B2.buf2string(t.output,h);t.next_out=f,t.avail_out=r-f,f&&t.output.set(t.output.subarray(h,h+f),0),this.onData(g)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===Xg&&u===0)){if(o===S1)return o=Vc.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};vp.prototype.onData=function(n){this.chunks.push(n)};vp.prototype.onEnd=function(n){n===Xg&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=tC.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function aG(n,e){const t=new vp(e);if(t.push(n),t.err)throw t.msg||V2[t.err];return t.result}var iG=vp,oG=aG,lG={Inflate:iG,inflate:oG};const{Inflate:cG,inflate:uG}=lG;var S6=cG,dG=uG;const gC=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;gC[n]=e}const E6=4294967295;function hG(n,e,t){let r=n;for(let a=0;a<t;a++)r=gC[(r^e[a])&255]^r>>>8;return r}function fG(n,e){return(hG(E6,n,e)^E6)>>>0}function A6(n,e,t){const r=n.readUint32(),a=fG(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(a!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${a}`)}function pC(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function xC(n,e,t,r){let a=0;for(;a<r;a++)e[a]=n[a];for(;a<t;a++)e[a]=n[a]+e[a-r]&255}function yC(n,e,t,r){let a=0;if(t.length===0)for(;a<r;a++)e[a]=n[a];else for(;a<r;a++)e[a]=n[a]+t[a]&255}function bC(n,e,t,r,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+(e[o-a]>>1)&255}else{for(;o<a;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<r;o++)e[o]=n[o]+(e[o-a]+t[o]>>1)&255}}function vC(n,e,t,r,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+e[o-a]&255}else{for(;o<a;o++)e[o]=n[o]+t[o]&255;for(;o<r;o++)e[o]=n[o]+mG(e[o-a],t[o],t[o-a])&255}}function mG(n,e,t){const r=n+e-t,a=Math.abs(r-n),o=Math.abs(r-e),c=Math.abs(r-t);return a<=o&&a<=c?n:o<=c?e:t}function gG(n,e,t,r,a,o){switch(n){case 0:pC(e,t,a);break;case 1:xC(e,t,a,o);break;case 2:yC(e,t,r,a);break;case 3:bC(e,t,r,a,o);break;case 4:vC(e,t,r,a,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}const pG=new Uint16Array([255]),xG=new Uint8Array(pG.buffer),yG=xG[0]===255;function bG(n){const{data:e,width:t,height:r,channels:a,depth:o}=n,c=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],u=Math.ceil(o/8)*a,h=new Uint8Array(r*t*u);let f=0;for(let g=0;g<7;g++){const x=c[g],v=Math.ceil((t-x.x)/x.xStep),b=Math.ceil((r-x.y)/x.yStep);if(v<=0||b<=0)continue;const T=v*u,E=new Uint8Array(T);for(let j=0;j<b;j++){const S=e[f++],D=e.subarray(f,f+T);f+=T;const O=new Uint8Array(T);gG(S,D,O,E,T,u),E.set(O);for(let B=0;B<v;B++){const re=x.x+B*x.xStep,ae=x.y+j*x.yStep;if(!(re>=t||ae>=r))for(let G=0;G<u;G++)h[(ae*t+re)*u+G]=O[B*u+G]}}}if(o===16){const g=new Uint16Array(h.buffer);if(yG)for(let x=0;x<g.length;x++)g[x]=vG(g[x]);return g}else return h}function vG(n){return(n&255)<<8|n>>8&255}const wG=new Uint16Array([255]),NG=new Uint8Array(wG.buffer),jG=NG[0]===255,_G=new Uint8Array(0);function T6(n){const{data:e,width:t,height:r,channels:a,depth:o}=n,c=Math.ceil(o/8)*a,u=Math.ceil(o/8*a*t),h=new Uint8Array(r*u);let f=_G,g=0,x,v;for(let b=0;b<r;b++){switch(x=e.subarray(g+1,g+1+u),v=h.subarray(b*u,(b+1)*u),e[g]){case 0:pC(x,v,u);break;case 1:xC(x,v,u,c);break;case 2:yC(x,v,f,u);break;case 3:bC(x,v,f,u,c);break;case 4:vC(x,v,f,u,c);break;default:throw new Error(`Unsupported filter: ${e[g]}`)}f=v,g+=u+1}if(o===16){const b=new Uint16Array(h.buffer);if(jG)for(let T=0;T<b.length;T++)b[T]=SG(b[T]);return b}else return h}function SG(n){return(n&255)<<8|n>>8&255}const X0=Uint8Array.of(137,80,78,71,13,10,26,10);function C6(n){if(!EG(n.readBytes(X0.length)))throw new Error("wrong PNG signature")}function EG(n){if(n.length<X0.length)return!1;for(let e=0;e<X0.length;e++)if(n[e]!==X0[e])return!1;return!0}const AG="tEXt",TG=0,wC=new TextDecoder("latin1");function CG(n){if(kG(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const IG=/^[\u0000-\u00FF]*$/;function kG(n){if(!IG.test(n))throw new Error("invalid latin1 text")}function RG(n,e,t){const r=NC(e);n[r]=PG(e,t-r.length-1)}function NC(n){for(n.mark();n.readByte()!==TG;);const e=n.offset;n.reset();const t=wC.decode(n.readBytes(e-n.offset-1));return n.skip(1),CG(t),t}function PG(n,e){return wC.decode(n.readBytes(e))}const oo={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},A1={UNKNOWN:-1,DEFLATE:0},I6={UNKNOWN:-1,ADAPTIVE:0},T1={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},T0={NONE:0,BACKGROUND:1,PREVIOUS:2},C1={SOURCE:0,OVER:1};class LG extends Tw{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new S6,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=A1.UNKNOWN,this._filterMethod=I6.UNKNOWN,this._interlaceMethod=T1.UNKNOWN,this._colorType=oo.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(C6(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(C6(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case AG:RG(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?A6(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const r=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?A6(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=DG(this.readUint8());const t=this.readUint8();this._colorType=t;let r;switch(t){case oo.GREYSCALE:r=1;break;case oo.TRUECOLOUR:r=3;break;case oo.INDEXED_COLOUR:r=1;break;case oo.GREYSCALE_ALPHA:r=2;break;case oo.TRUECOLOUR_ALPHA:r=4;break;case oo.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==A1.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const r=[];this._palette=r;for(let a=0;a<t;a++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(r+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case oo.GREYSCALE:case oo.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case oo.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const r=this.readByte();this._palette[t].push(r)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case oo.UNKNOWN:case oo.GREYSCALE_ALPHA:case oo.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=NC(this),r=this.readUint8();if(r!==A1.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const a=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:dG(a)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=T6({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(r,a,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case T0.NONE:break;case T0.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const c=(a*e.width+o)*this._png.channels;for(let u=0;u<this._png.channels;u++)r.data[c+u]=0}break;case T0.PREVIOUS:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const r=1<<this._png.depth,a=(o,c)=>{const u=((o+t.yOffset)*this._png.width+t.xOffset+c)*this._png.channels,h=(o*t.width+c)*this._png.channels;return{index:u,frameIndex:h}};switch(t.blendOp){case C1.SOURCE:for(let o=0;o<t.height;o++)for(let c=0;c<t.width;c++){const{index:u,frameIndex:h}=a(o,c);for(let f=0;f<this._png.channels;f++)e.data[u+f]=t.data[h+f]}break;case C1.OVER:for(let o=0;o<t.height;o++)for(let c=0;c<t.width;c++){const{index:u,frameIndex:h}=a(o,c);for(let f=0;f<this._png.channels;f++){const g=t.data[h+this._png.channels-1]/r,x=f%(this._png.channels-1)===0?1:t.data[h+f],v=Math.floor(g*x+(1-g)*e.data[u+f]);e.data[u+f]+=v}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==I6.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===T1.NO_INTERLACE)this._png.data=T6({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===T1.ADAM7)this._png.data=bG({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:T0.NONE,blendOp:C1.SOURCE,data:e}),this._inflator=new S6,this._writingDataChunks=!1}}function DG(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var k6;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(k6||(k6={}));function MG(n,e){return new LG(n,e).decode()}var nn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function I1(){nn.console&&typeof nn.console.log=="function"&&nn.console.log.apply(nn.console,arguments)}var Ar={log:I1,warn:function(n){nn.console&&(typeof nn.console.warn=="function"?nn.console.warn.apply(nn.console,arguments):I1.call(null,arguments))},error:function(n){nn.console&&(typeof nn.console.error=="function"?nn.console.error.apply(nn.console,arguments):I1(n))}};function k1(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Fd(r.response,e,t)},r.onerror=function(){Ar.error("could not download file")},r.send()}function R6(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function C0(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Fd=nn.saveAs||((typeof window>"u"?"undefined":ur(window))!=="object"||window!==nn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=nn.URL||nn.webkitURL,a=document.createElement("a");e=e||n.name||"download",a.download=e,a.rel="noopener",typeof n=="string"?(a.href=n,a.origin!==location.origin?R6(a.href)?k1(n,e,t):C0(a,a.target="_blank"):C0(a)):(a.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(a.href)},4e4),setTimeout(function(){C0(a)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(R6(n))k1(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){C0(r)})}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:ur(o)!=="object"&&(Ar.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return k1(n,e,t);var a=n.type==="application/octet-stream",o=/constructor/i.test(nn.HTMLElement)||nn.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&o)&&(typeof FileReader>"u"?"undefined":ur(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var g=u.result;g=c?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=g:location=g,r=null},u.readAsDataURL(n)}else{var h=nn.URL||nn.webkitURL,f=h.createObjectURL(n);r?r.location=f:location.href=f,r=null,setTimeout(function(){h.revokeObjectURL(f)},4e4)}});function jC(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],r=0;r<t.length;r++){var a=t[r].re,o=t[r].process,c=a.exec(n);c&&(e=o(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),h=this.g.toString(16),f=this.b.toString(16);return u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),f.length==1&&(f="0"+f),"#"+u+h+f}}var Q0=nn.atob.bind(nn),P6=nn.btoa.bind(nn);function R1(n,e){var t=n[0],r=n[1],a=n[2],o=n[3];t=Wa(t,r,a,o,e[0],7,-680876936),o=Wa(o,t,r,a,e[1],12,-389564586),a=Wa(a,o,t,r,e[2],17,606105819),r=Wa(r,a,o,t,e[3],22,-1044525330),t=Wa(t,r,a,o,e[4],7,-176418897),o=Wa(o,t,r,a,e[5],12,1200080426),a=Wa(a,o,t,r,e[6],17,-1473231341),r=Wa(r,a,o,t,e[7],22,-45705983),t=Wa(t,r,a,o,e[8],7,1770035416),o=Wa(o,t,r,a,e[9],12,-1958414417),a=Wa(a,o,t,r,e[10],17,-42063),r=Wa(r,a,o,t,e[11],22,-1990404162),t=Wa(t,r,a,o,e[12],7,1804603682),o=Wa(o,t,r,a,e[13],12,-40341101),a=Wa(a,o,t,r,e[14],17,-1502002290),t=Ka(t,r=Wa(r,a,o,t,e[15],22,1236535329),a,o,e[1],5,-165796510),o=Ka(o,t,r,a,e[6],9,-1069501632),a=Ka(a,o,t,r,e[11],14,643717713),r=Ka(r,a,o,t,e[0],20,-373897302),t=Ka(t,r,a,o,e[5],5,-701558691),o=Ka(o,t,r,a,e[10],9,38016083),a=Ka(a,o,t,r,e[15],14,-660478335),r=Ka(r,a,o,t,e[4],20,-405537848),t=Ka(t,r,a,o,e[9],5,568446438),o=Ka(o,t,r,a,e[14],9,-1019803690),a=Ka(a,o,t,r,e[3],14,-187363961),r=Ka(r,a,o,t,e[8],20,1163531501),t=Ka(t,r,a,o,e[13],5,-1444681467),o=Ka(o,t,r,a,e[2],9,-51403784),a=Ka(a,o,t,r,e[7],14,1735328473),t=Ya(t,r=Ka(r,a,o,t,e[12],20,-1926607734),a,o,e[5],4,-378558),o=Ya(o,t,r,a,e[8],11,-2022574463),a=Ya(a,o,t,r,e[11],16,1839030562),r=Ya(r,a,o,t,e[14],23,-35309556),t=Ya(t,r,a,o,e[1],4,-1530992060),o=Ya(o,t,r,a,e[4],11,1272893353),a=Ya(a,o,t,r,e[7],16,-155497632),r=Ya(r,a,o,t,e[10],23,-1094730640),t=Ya(t,r,a,o,e[13],4,681279174),o=Ya(o,t,r,a,e[0],11,-358537222),a=Ya(a,o,t,r,e[3],16,-722521979),r=Ya(r,a,o,t,e[6],23,76029189),t=Ya(t,r,a,o,e[9],4,-640364487),o=Ya(o,t,r,a,e[12],11,-421815835),a=Ya(a,o,t,r,e[15],16,530742520),t=Xa(t,r=Ya(r,a,o,t,e[2],23,-995338651),a,o,e[0],6,-198630844),o=Xa(o,t,r,a,e[7],10,1126891415),a=Xa(a,o,t,r,e[14],15,-1416354905),r=Xa(r,a,o,t,e[5],21,-57434055),t=Xa(t,r,a,o,e[12],6,1700485571),o=Xa(o,t,r,a,e[3],10,-1894986606),a=Xa(a,o,t,r,e[10],15,-1051523),r=Xa(r,a,o,t,e[1],21,-2054922799),t=Xa(t,r,a,o,e[8],6,1873313359),o=Xa(o,t,r,a,e[15],10,-30611744),a=Xa(a,o,t,r,e[6],15,-1560198380),r=Xa(r,a,o,t,e[13],21,1309151649),t=Xa(t,r,a,o,e[4],6,-145523070),o=Xa(o,t,r,a,e[11],10,-1120210379),a=Xa(a,o,t,r,e[2],15,718787259),r=Xa(r,a,o,t,e[9],21,-343485551),n[0]=Xu(t,n[0]),n[1]=Xu(r,n[1]),n[2]=Xu(a,n[2]),n[3]=Xu(o,n[3])}function ky(n,e,t,r,a,o){return e=Xu(Xu(e,n),Xu(r,o)),Xu(e<<a|e>>>32-a,t)}function Wa(n,e,t,r,a,o,c){return ky(e&t|~e&r,n,e,a,o,c)}function Ka(n,e,t,r,a,o,c){return ky(e&r|t&~r,n,e,a,o,c)}function Ya(n,e,t,r,a,o,c){return ky(e^t^r,n,e,a,o,c)}function Xa(n,e,t,r,a,o,c){return ky(t^(e|~r),n,e,a,o,c)}function _C(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)R1(r,OG(n.substring(e-64,e)));n=n.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)a[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(R1(r,a),e=0;e<16;e++)a[e]=0;return a[14]=8*t,R1(r,a),r}function OG(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var L6="0123456789abcdef".split("");function FG(n){for(var e="",t=0;t<4;t++)e+=L6[n>>8*t+4&15]+L6[n>>8*t&15];return e}function UG(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function z2(n){return _C(n).map(UG).join("")}var VG=(function(n){for(var e=0;e<n.length;e++)n[e]=FG(n[e]);return n.join("")})(_C("hello"))!="5d41402abc4b2a76b9719d911017c592";function Xu(n,e){if(VG){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function q2(n,e){var t,r,a,o;if(n!==t){for(var c=(a=n,o=1+(256/n.length|0),new Array(o+1).join(a)),u=[],h=0;h<256;h++)u[h]=h;var f=0;for(h=0;h<256;h++){var g=u[h];f=(f+g+c.charCodeAt(h))%256,u[h]=u[f],u[f]=g}t=n,r=u}else u=r;var x=e.length,v=0,b=0,T="";for(h=0;h<x;h++)b=(b+(g=u[v=(v+1)%256]))%256,u[v]=u[b],u[b]=g,c=u[(u[v]+u[b])%256],T+=String.fromCharCode(e.charCodeAt(h)^c);return T}var D6={print:4,modify:8,copy:16,"annot-forms":32};function vf(n,e,t,r){this.v=1,this.r=2;var a=192;n.forEach(function(u){if(D6.perm!==void 0)throw new Error("Invalid permission: "+u);a+=D6[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),c=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,c),this.P=-(1+(255^a)),this.encryptionKey=z2(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=q2(this.encryptionKey,this.padding)}function wf(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var a=n.charCodeAt(r);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):n[r]}return e}function M6(n){if(ur(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,a){if(a=a||!1,typeof t!="string"||typeof r!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[r,!!a],o},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),a=[];for(var o in e[t]){var c=e[t][o];try{c[0].apply(n,r)}catch(u){nn.console&&Ar.error("jsPDF PubSub Error",u.message,u)}c[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Bx(n){if(!(this instanceof Bx))return new Bx(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function SC(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function qd(n,e,t,r,a){if(!(this instanceof qd))return new qd(n,e,t,r,a);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,SC.call(this,r,a)}function _f(n,e,t,r,a){if(!(this instanceof _f))return new _f(n,e,t,r,a);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,SC.call(this,r,a)}function kt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],a=arguments[2],o=arguments[3],c=[],u=1,h=16,f="S",g=null;ur(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,a=n.format||a,o=n.compress||n.compressPdf||o,(g=n.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),u=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(h=n.floatPrecision),f=n.defaultPathOperation||"S"),c=n.filters||(o===!0?["FlateEncode"]:c),r=r||"mm",t=(""+(t||"P")).toLowerCase();var x=n.putOnlyUsedFonts||!1,v={},b={internal:{},__private__:{}};b.__private__.PubSub=M6;var T="1.3",E=b.__private__.getPdfVersion=function(){return T};b.__private__.setPdfVersion=function(A){T=A};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return j};var S=b.__private__.getPageFormat=function(A){return j[A]};a=a||"a4";var D="compat",O="advanced",B=D;function re(){this.saveGraphicsState(),se(new Ct(en,0,0,-en,0,oi()*en).toString()+" cm"),this.setFontSize(this.getFontSize()/en),f="n",B=O}function ae(){this.restoreGraphicsState(),f="S",B=D}var G=b.__private__.combineFontStyleAndFontWeight=function(A,H){if(A=="bold"&&H=="normal"||A=="bold"&&H==400||A=="normal"&&H=="italic"||A=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(A=H==400||H==="normal"?A==="italic"?"italic":"normal":H!=700&&H!=="bold"||A!=="normal"?(H==700?"bold":H)+""+A:"bold"),A};b.advancedAPI=function(A){var H=B===D;return H&&re.call(this),typeof A!="function"||(A(this),H&&ae.call(this)),this},b.compatAPI=function(A){var H=B===O;return H&&ae.call(this),typeof A!="function"||(A(this),H&&re.call(this)),this},b.isAdvancedAPI=function(){return B===O};var M,k=function(A){if(B!==O)throw new Error(A+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},L=b.roundToPrecision=b.__private__.roundToPrecision=function(A,H){var le=e||H;if(isNaN(A)||isNaN(le))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return A.toFixed(le).replace(/0+$/,"")};M=b.hpf=b.__private__.hpf=typeof h=="number"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return L(A,h)}:h==="smart"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return L(A,A>-1&&A<1?16:5)}:function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return L(A,16)};var C=b.f2=b.__private__.f2=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f2");return L(A,2)},P=b.__private__.f3=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f3");return L(A,3)},V=b.scale=b.__private__.scale=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.scale");return B===D?A*en:B===O?A:void 0},oe=function(A){return V((function(H){return B===D?oi()-H:B===O?H:void 0})(A))};b.__private__.setPrecision=b.setPrecision=function(A){typeof parseInt(A,10)=="number"&&(e=parseInt(A,10))};var Ne,ue="00000000000000000000000000000000",pe=b.__private__.getFileId=function(){return ue},de=b.__private__.setFileId=function(A){return ue=A!==void 0&&/^[a-fA-F0-9]{32}$/.test(A)?A.toUpperCase():ue.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(jr=new vf(g.userPermissions,g.userPassword,g.ownerPassword,ue)),ue};b.setFileId=function(A){return de(A),this},b.getFileId=function(){return pe()};var Se=b.__private__.convertDateToPDFDate=function(A){var H=A.getTimezoneOffset(),le=H<0?"+":"-",ge=Math.floor(Math.abs(H/60)),we=Math.abs(H%60),Ve=[le,ne(ge),"'",ne(we),"'"].join("");return["D:",A.getFullYear(),ne(A.getMonth()+1),ne(A.getDate()),ne(A.getHours()),ne(A.getMinutes()),ne(A.getSeconds()),Ve].join("")},ze=b.__private__.convertPDFDateToDate=function(A){var H=parseInt(A.substr(2,4),10),le=parseInt(A.substr(6,2),10)-1,ge=parseInt(A.substr(8,2),10),we=parseInt(A.substr(10,2),10),Ve=parseInt(A.substr(12,2),10),Xe=parseInt(A.substr(14,2),10);return new Date(H,le,ge,we,Ve,Xe,0)},te=b.__private__.setCreationDate=function(A){var H;if(A===void 0&&(A=new Date),A instanceof Date)H=Se(A);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(A))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=A}return Ne=H},q=b.__private__.getCreationDate=function(A){var H=Ne;return A==="jsDate"&&(H=ze(Ne)),H};b.setCreationDate=function(A){return te(A),this},b.getCreationDate=function(A){return q(A)};var Q,ne=b.__private__.padd2=function(A){return("0"+parseInt(A)).slice(-2)},he=b.__private__.padd2Hex=function(A){return("00"+(A=A.toString())).substr(A.length)},me=0,be=[],Le=[],Re=0,qe=[],Je=[],it=!1,at=Le;b.__private__.setCustomOutputDestination=function(A){it=!0,at=A};var ft=function(A){it||(at=A)};b.__private__.resetCustomOutputDestination=function(){it=!1,at=Le};var se=b.__private__.out=function(A){return A=A.toString(),Re+=A.length+1,at.push(A),at},st=b.__private__.write=function(A){return se(arguments.length===1?A.toString():Array.prototype.join.call(arguments," "))},rn=b.__private__.getArrayBuffer=function(A){for(var H=A.length,le=new ArrayBuffer(H),ge=new Uint8Array(le);H--;)ge[H]=A.charCodeAt(H);return le},Pt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return Pt};var He=n.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(A){return He=B===O?A/en:A,this};var ct,lt=b.__private__.getFontSize=b.getFontSize=function(){return B===D?He:He*en},Mt=n.R2L||!1;b.__private__.setR2L=b.setR2L=function(A){return Mt=A,this},b.__private__.getR2L=b.getR2L=function(){return Mt};var Et,sn=b.__private__.setZoomMode=function(A){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(A))ct=A;else if(isNaN(A)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(A)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+A+'" is not recognized.');ct=A}else ct=parseInt(A,10)};b.__private__.getZoomMode=function(){return ct};var dn,Qt=b.__private__.setPageMode=function(A){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(A)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+A+'" is not recognized.');Et=A};b.__private__.getPageMode=function(){return Et};var pn=b.__private__.setLayoutMode=function(A){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(A)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+A+'" is not recognized.');dn=A};b.__private__.getLayoutMode=function(){return dn},b.__private__.setDisplayMode=b.setDisplayMode=function(A,H,le){return sn(A),pn(H),Qt(le),this};var on={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(A){if(Object.keys(on).indexOf(A)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return on[A]},b.__private__.getDocumentProperties=function(){return on},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(A){for(var H in on)on.hasOwnProperty(H)&&A[H]&&(on[H]=A[H]);return this},b.__private__.setDocumentProperty=function(A,H){if(Object.keys(on).indexOf(A)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return on[A]=H};var wt,en,Nt,Cr,ln,Lt={},Wt={},an=[],Tt={},zn={},zt={},qt={},Hn=null,At=0,jt=[],xn=new M6(b),qs=n.hotfixes||[],As={},yi={},gs=[],Ct=function A(H,le,ge,we,Ve,Xe){if(!(this instanceof A))return new A(H,le,ge,we,Ve,Xe);isNaN(H)&&(H=1),isNaN(le)&&(le=0),isNaN(ge)&&(ge=0),isNaN(we)&&(we=1),isNaN(Ve)&&(Ve=0),isNaN(Xe)&&(Xe=0),this._matrix=[H,le,ge,we,Ve,Xe]};Object.defineProperty(Ct.prototype,"sx",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(Ct.prototype,"shy",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(Ct.prototype,"shx",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(Ct.prototype,"sy",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(Ct.prototype,"tx",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(Ct.prototype,"ty",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(Ct.prototype,"a",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(Ct.prototype,"b",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(Ct.prototype,"c",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(Ct.prototype,"d",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(Ct.prototype,"e",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(Ct.prototype,"f",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(Ct.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ct.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ct.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ct.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ct.prototype.join=function(A){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(M).join(A)},Ct.prototype.multiply=function(A){var H=A.sx*this.sx+A.shy*this.shx,le=A.sx*this.shy+A.shy*this.sy,ge=A.shx*this.sx+A.sy*this.shx,we=A.shx*this.shy+A.sy*this.sy,Ve=A.tx*this.sx+A.ty*this.shx+this.tx,Xe=A.tx*this.shy+A.ty*this.sy+this.ty;return new Ct(H,le,ge,we,Ve,Xe)},Ct.prototype.decompose=function(){var A=this.sx,H=this.shy,le=this.shx,ge=this.sy,we=this.tx,Ve=this.ty,Xe=Math.sqrt(A*A+H*H),ht=(A/=Xe)*le+(H/=Xe)*ge;le-=A*ht,ge-=H*ht;var xt=Math.sqrt(le*le+ge*ge);return ht/=xt,A*(ge/=xt)<H*(le/=xt)&&(A=-A,H=-H,ht=-ht,Xe=-Xe),{scale:new Ct(Xe,0,0,xt,0,0),translate:new Ct(1,0,0,1,we,Ve),rotate:new Ct(A,H,-H,A,0,0),skew:new Ct(1,0,ht,1,0,0)}},Ct.prototype.toString=function(A){return this.join(" ")},Ct.prototype.inversed=function(){var A=this.sx,H=this.shy,le=this.shx,ge=this.sy,we=this.tx,Ve=this.ty,Xe=1/(A*ge-H*le),ht=ge*Xe,xt=-H*Xe,Ut=-le*Xe,It=A*Xe;return new Ct(ht,xt,Ut,It,-ht*we-Ut*Ve,-xt*we-It*Ve)},Ct.prototype.applyToPoint=function(A){var H=A.x*this.sx+A.y*this.shx+this.tx,le=A.x*this.shy+A.y*this.sy+this.ty;return new Is(H,le)},Ct.prototype.applyToRectangle=function(A){var H=this.applyToPoint(A),le=this.applyToPoint(new Is(A.x+A.w,A.y+A.h));return new vi(H.x,H.y,le.x-H.x,le.y-H.y)},Ct.prototype.clone=function(){var A=this.sx,H=this.shy,le=this.shx,ge=this.sy,we=this.tx,Ve=this.ty;return new Ct(A,H,le,ge,we,Ve)},b.Matrix=Ct;var Wi=b.matrixMult=function(A,H){return H.multiply(A)},Na=new Ct(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=Na;var ia=function(A,H){if(!zn[A]){var le=(H instanceof qd?"Sh":"P")+(Object.keys(Tt).length+1).toString(10);H.id=le,zn[A]=le,Tt[le]=H,xn.publish("addPattern",H)}};b.ShadingPattern=qd,b.TilingPattern=_f,b.addShadingPattern=function(A,H){return k("addShadingPattern()"),ia(A,H),this},b.beginTilingPattern=function(A){k("beginTilingPattern()"),wi(A.boundingBox[0],A.boundingBox[1],A.boundingBox[2]-A.boundingBox[0],A.boundingBox[3]-A.boundingBox[1],A.matrix)},b.endTilingPattern=function(A,H){k("endTilingPattern()"),H.stream=Je[Q].join(`
`),ia(A,H),xn.publish("endTilingPattern",H),gs.pop().restore()};var oa,nr=b.__private__.newObject=function(){var A=mr();return ns(A,!0),A},mr=b.__private__.newObjectDeferred=function(){return me++,be[me]=function(){return Re},me},ns=function(A,H){return H=typeof H=="boolean"&&H,be[A]=Re,H&&se(A+" 0 obj"),A},Gs=b.__private__.newAdditionalObject=function(){var A={objId:mr(),content:""};return qe.push(A),A},Ts=mr(),$n=mr(),ar=b.__private__.decodeColorString=function(A){var H=A.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length!==5||H[4]!=="k"&&H[4]!=="K"||(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var le=parseFloat(H[0]);H=[le,le,le,"r"]}for(var ge="#",we=0;we<3;we++)ge+=("0"+Math.floor(255*parseFloat(H[we])).toString(16)).slice(-2);return ge},rs=b.__private__.encodeColorString=function(A){var H;typeof A=="string"&&(A={ch1:A});var le=A.ch1,ge=A.ch2,we=A.ch3,Ve=A.ch4,Xe=A.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof le=="string"&&le.charAt(0)!=="#"){var ht=new jC(le);if(ht.ok)le=ht.toHex();else if(!/^\d*\.?\d*$/.test(le))throw new Error('Invalid color "'+le+'" passed to jsPDF.encodeColorString.')}if(typeof le=="string"&&/^#[0-9A-Fa-f]{3}$/.test(le)&&(le="#"+le[1]+le[1]+le[2]+le[2]+le[3]+le[3]),typeof le=="string"&&/^#[0-9A-Fa-f]{6}$/.test(le)){var xt=parseInt(le.substr(1),16);le=xt>>16&255,ge=xt>>8&255,we=255&xt}if(ge===void 0||Ve===void 0&&le===ge&&ge===we)H=typeof le=="string"?le+" "+Xe[0]:A.precision===2?C(le/255)+" "+Xe[0]:P(le/255)+" "+Xe[0];else if(Ve===void 0||ur(Ve)==="object"){if(Ve&&!isNaN(Ve.a)&&Ve.a===0)return["1.","1.","1.",Xe[1]].join(" ");H=typeof le=="string"?[le,ge,we,Xe[1]].join(" "):A.precision===2?[C(le/255),C(ge/255),C(we/255),Xe[1]].join(" "):[P(le/255),P(ge/255),P(we/255),Xe[1]].join(" ")}else H=typeof le=="string"?[le,ge,we,Ve,Xe[2]].join(" "):A.precision===2?[C(le),C(ge),C(we),C(Ve),Xe[2]].join(" "):[P(le),P(ge),P(we),P(Ve),Xe[2]].join(" ");return H},la=b.__private__.getFilters=function(){return c},Fa=b.__private__.putStream=function(A){var H=(A=A||{}).data||"",le=A.filters||la(),ge=A.alreadyAppliedFilters||[],we=A.addLength1||!1,Ve=H.length,Xe=A.objectId,ht=function(R){return R};if(g!==null&&Xe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&(ht=jr.encryptor(Xe,0));var xt={};le===!0&&(le=["FlateEncode"]);var Ut=A.additionalKeyValues||[],It=(xt=kt.API.processDataByFilters!==void 0?kt.API.processDataByFilters(H,le):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(ge)?ge.join(" "):ge.toString());if(xt.data.length!==0&&(Ut.push({key:"Length",value:xt.data.length}),we===!0&&Ut.push({key:"Length1",value:Ve})),It.length!=0)if(It.split("/").length-1==1)Ut.push({key:"Filter",value:It});else{Ut.push({key:"Filter",value:"["+It+"]"});for(var En=0;En<Ut.length;En+=1)if(Ut[En].key==="DecodeParms"){for(var gr=[],rr=0;rr<xt.reverseChain.split("/").length-1;rr+=1)gr.push("null");gr.push(Ut[En].value),Ut[En].value="["+gr.join(" ")+"]"}}se("<<");for(var y=0;y<Ut.length;y++)se("/"+Ut[y].key+" "+Ut[y].value);se(">>"),xt.data.length!==0&&(se("stream"),se(ht(xt.data)),se("endstream"))},yo=b.__private__.putPage=function(A){var H=A.number,le=A.data,ge=A.objId,we=A.contentsObjId;ns(ge,!0),se("<</Type /Page"),se("/Parent "+A.rootDictionaryObjId+" 0 R"),se("/Resources "+A.resourceDictionaryObjId+" 0 R"),se("/MediaBox ["+parseFloat(M(A.mediaBox.bottomLeftX))+" "+parseFloat(M(A.mediaBox.bottomLeftY))+" "+M(A.mediaBox.topRightX)+" "+M(A.mediaBox.topRightY)+"]"),A.cropBox!==null&&se("/CropBox ["+M(A.cropBox.bottomLeftX)+" "+M(A.cropBox.bottomLeftY)+" "+M(A.cropBox.topRightX)+" "+M(A.cropBox.topRightY)+"]"),A.bleedBox!==null&&se("/BleedBox ["+M(A.bleedBox.bottomLeftX)+" "+M(A.bleedBox.bottomLeftY)+" "+M(A.bleedBox.topRightX)+" "+M(A.bleedBox.topRightY)+"]"),A.trimBox!==null&&se("/TrimBox ["+M(A.trimBox.bottomLeftX)+" "+M(A.trimBox.bottomLeftY)+" "+M(A.trimBox.topRightX)+" "+M(A.trimBox.topRightY)+"]"),A.artBox!==null&&se("/ArtBox ["+M(A.artBox.bottomLeftX)+" "+M(A.artBox.bottomLeftY)+" "+M(A.artBox.topRightX)+" "+M(A.artBox.topRightY)+"]"),typeof A.userUnit=="number"&&A.userUnit!==1&&se("/UserUnit "+A.userUnit),xn.publish("putPage",{objId:ge,pageContext:jt[H],pageNumber:H,page:le}),se("/Contents "+we+" 0 R"),se(">>"),se("endobj");var Ve=le.join(`
`);return B===O&&(Ve+=`
Q`),ns(we,!0),Fa({data:Ve,filters:la(),objectId:we}),se("endobj"),ge},ri=b.__private__.putPages=function(){var A,H,le=[];for(A=1;A<=At;A++)jt[A].objId=mr(),jt[A].contentsObjId=mr();for(A=1;A<=At;A++)le.push(yo({number:A,data:Je[A],objId:jt[A].objId,contentsObjId:jt[A].contentsObjId,mediaBox:jt[A].mediaBox,cropBox:jt[A].cropBox,bleedBox:jt[A].bleedBox,trimBox:jt[A].trimBox,artBox:jt[A].artBox,userUnit:jt[A].userUnit,rootDictionaryObjId:Ts,resourceDictionaryObjId:$n}));ns(Ts,!0),se("<</Type /Pages");var ge="/Kids [";for(H=0;H<At;H++)ge+=le[H]+" 0 R ";se(ge+"]"),se("/Count "+At),se(">>"),se("endobj"),xn.publish("postPutPages")},ca=function(A){xn.publish("putFont",{font:A,out:se,newObject:nr,putStream:Fa}),A.isAlreadyPutted!==!0&&(A.objectNumber=nr(),se("<<"),se("/Type /Font"),se("/BaseFont /"+wf(A.postScriptName)),se("/Subtype /Type1"),typeof A.encoding=="string"&&se("/Encoding /"+A.encoding),se("/FirstChar 32"),se("/LastChar 255"),se(">>"),se("endobj"))},Ki=function(A){A.objectNumber=nr();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[M(A.x),M(A.y),M(A.x+A.width),M(A.y+A.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+A.matrix.toString()+"]"});var le=A.pages[1].join(`
`);Fa({data:le,additionalKeyValues:H,objectId:A.objectNumber}),se("endobj")},ja=function(A,H){H||(H=21);var le=nr(),ge=(function(Xe,ht){var xt,Ut=[],It=1/(ht-1);for(xt=0;xt<1;xt+=It)Ut.push(xt);if(Ut.push(1),Xe[0].offset!=0){var En={offset:0,color:Xe[0].color};Xe.unshift(En)}if(Xe[Xe.length-1].offset!=1){var gr={offset:1,color:Xe[Xe.length-1].color};Xe.push(gr)}for(var rr="",y=0,R=0;R<Ut.length;R++){for(xt=Ut[R];xt>Xe[y+1].offset;)y++;var z=Xe[y].offset,Z=(xt-z)/(Xe[y+1].offset-z),_e=Xe[y].color,Pe=Xe[y+1].color;rr+=he(Math.round((1-Z)*_e[0]+Z*Pe[0]).toString(16))+he(Math.round((1-Z)*_e[1]+Z*Pe[1]).toString(16))+he(Math.round((1-Z)*_e[2]+Z*Pe[2]).toString(16))}return rr.trim()})(A.colors,H),we=[];we.push({key:"FunctionType",value:"0"}),we.push({key:"Domain",value:"[0.0 1.0]"}),we.push({key:"Size",value:"["+H+"]"}),we.push({key:"BitsPerSample",value:"8"}),we.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),we.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Fa({data:ge,additionalKeyValues:we,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:le}),se("endobj"),A.objectNumber=nr(),se("<< /ShadingType "+A.type),se("/ColorSpace /DeviceRGB");var Ve="/Coords ["+M(parseFloat(A.coords[0]))+" "+M(parseFloat(A.coords[1]))+" ";A.type===2?Ve+=M(parseFloat(A.coords[2]))+" "+M(parseFloat(A.coords[3])):Ve+=M(parseFloat(A.coords[2]))+" "+M(parseFloat(A.coords[3]))+" "+M(parseFloat(A.coords[4]))+" "+M(parseFloat(A.coords[5])),se(Ve+="]"),A.matrix&&se("/Matrix ["+A.matrix.toString()+"]"),se("/Function "+le+" 0 R"),se("/Extend [true true]"),se(">>"),se("endobj")},Hs=function(A,H){var le=mr(),ge=nr();H.push({resourcesOid:le,objectOid:ge}),A.objectNumber=ge;var we=[];we.push({key:"Type",value:"/Pattern"}),we.push({key:"PatternType",value:"1"}),we.push({key:"PaintType",value:"1"}),we.push({key:"TilingType",value:"1"}),we.push({key:"BBox",value:"["+A.boundingBox.map(M).join(" ")+"]"}),we.push({key:"XStep",value:M(A.xStep)}),we.push({key:"YStep",value:M(A.yStep)}),we.push({key:"Resources",value:le+" 0 R"}),A.matrix&&we.push({key:"Matrix",value:"["+A.matrix.toString()+"]"}),Fa({data:A.stream,additionalKeyValues:we,objectId:A.objectNumber}),se("endobj")},_a=function(A){for(var H in A.objectNumber=nr(),se("<<"),A)switch(H){case"opacity":se("/ca "+C(A[H]));break;case"stroke-opacity":se("/CA "+C(A[H]))}se(">>"),se("endobj")},Ua=function(A){ns(A.resourcesOid,!0),se("<<"),se("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var H in se("/Font <<"),Lt)Lt.hasOwnProperty(H)&&(x===!1||x===!0&&v.hasOwnProperty(H))&&se("/"+H+" "+Lt[H].objectNumber+" 0 R");se(">>")})(),(function(){if(Object.keys(Tt).length>0){for(var H in se("/Shading <<"),Tt)Tt.hasOwnProperty(H)&&Tt[H]instanceof qd&&Tt[H].objectNumber>=0&&se("/"+H+" "+Tt[H].objectNumber+" 0 R");xn.publish("putShadingPatternDict"),se(">>")}})(),(function(H){if(Object.keys(Tt).length>0){for(var le in se("/Pattern <<"),Tt)Tt.hasOwnProperty(le)&&Tt[le]instanceof b.TilingPattern&&Tt[le].objectNumber>=0&&Tt[le].objectNumber<H&&se("/"+le+" "+Tt[le].objectNumber+" 0 R");xn.publish("putTilingPatternDict"),se(">>")}})(A.objectOid),(function(){if(Object.keys(zt).length>0){var H;for(H in se("/ExtGState <<"),zt)zt.hasOwnProperty(H)&&zt[H].objectNumber>=0&&se("/"+H+" "+zt[H].objectNumber+" 0 R");xn.publish("putGStateDict"),se(">>")}})(),(function(){for(var H in se("/XObject <<"),As)As.hasOwnProperty(H)&&As[H].objectNumber>=0&&se("/"+H+" "+As[H].objectNumber+" 0 R");xn.publish("putXobjectDict"),se(">>")})(),se(">>"),se("endobj")},Ir=function(A){Wt[A.fontName]=Wt[A.fontName]||{},Wt[A.fontName][A.fontStyle]=A.id},jl=function(A,H,le,ge,we){var Ve={id:"F"+(Object.keys(Lt).length+1).toString(10),postScriptName:A,fontName:H,fontStyle:le,encoding:ge,isStandardFont:we||!1,metadata:{}};return xn.publish("addFont",{font:Ve,instance:this}),Lt[Ve.id]=Ve,Ir(Ve),Ve.id},ua=b.__private__.pdfEscape=b.pdfEscape=function(A,H){return(function(le,ge){var we,Ve,Xe,ht,xt,Ut,It,En,gr;if(Xe=(ge=ge||{}).sourceEncoding||"Unicode",xt=ge.outputEncoding,(ge.autoencode||xt)&&Lt[wt].metadata&&Lt[wt].metadata[Xe]&&Lt[wt].metadata[Xe].encoding&&(ht=Lt[wt].metadata[Xe].encoding,!xt&&Lt[wt].encoding&&(xt=Lt[wt].encoding),!xt&&ht.codePages&&(xt=ht.codePages[0]),typeof xt=="string"&&(xt=ht[xt]),xt)){for(It=!1,Ut=[],we=0,Ve=le.length;we<Ve;we++)(En=xt[le.charCodeAt(we)])?Ut.push(String.fromCharCode(En)):Ut.push(le[we]),Ut[we].charCodeAt(0)>>8&&(It=!0);le=Ut.join("")}for(we=le.length;It===void 0&&we!==0;)le.charCodeAt(we-1)>>8&&(It=!0),we--;if(!It)return le;for(Ut=ge.noBOM?[]:[254,255],we=0,Ve=le.length;we<Ve;we++){if((gr=(En=le.charCodeAt(we))>>8)>>8)throw new Error("Character at position "+we+" of string '"+le+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ut.push(gr),Ut.push(En-(gr<<8))}return String.fromCharCode.apply(void 0,Ut)})(A,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Va=b.__private__.beginPage=function(A){Je[++At]=[],jt[At]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(A[0]),topRightY:Number(A[1])}},_l(At),ft(Je[Q])},si=function(A,H){var le,ge,we;switch(t=H||t,typeof A=="string"&&(le=S(A.toLowerCase()),Array.isArray(le)&&(ge=le[0],we=le[1])),Array.isArray(A)&&(ge=A[0]*en,we=A[1]*en),isNaN(ge)&&(ge=a[0],we=a[1]),(ge>14400||we>14400)&&(Ar.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ge=Math.min(14400,ge),we=Math.min(14400,we)),a=[ge,we],t.substr(0,1)){case"l":we>ge&&(a=[we,ge]);break;case"p":ge>we&&(a=[we,ge])}Va(a),Ot(ha),se(Ea),Ta!==0&&se(Ta+" J"),Wr!==0&&se(Wr+" j"),xn.publish("addPage",{pageNumber:At})},Ho=function(A){A>0&&A<=At&&(Je.splice(A,1),jt.splice(A,1),At--,Q>At&&(Q=At),this.setPage(Q))},_l=function(A){A>0&&A<=At&&(Q=A)},Sl=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return Je.length-1},uc=function(A,H,le){var ge,we=void 0;return le=le||{},A=A!==void 0?A:Lt[wt].fontName,H=H!==void 0?H:Lt[wt].fontStyle,ge=A.toLowerCase(),Wt[ge]!==void 0&&Wt[ge][H]!==void 0?we=Wt[ge][H]:Wt[A]!==void 0&&Wt[A][H]!==void 0?we=Wt[A][H]:le.disableWarning===!1&&Ar.warn("Unable to look up font label for font '"+A+"', '"+H+"'. Refer to getFontList() for available fonts."),we||le.noFallback||(we=Wt.times[H])==null&&(we=Wt.times.normal),we},Sa=b.__private__.putInfo=function(){var A=nr(),H=function(ge){return ge};for(var le in g!==null&&(H=jr.encryptor(A,0)),se("<<"),se("/Producer ("+ua(H("jsPDF "+kt.version))+")"),on)on.hasOwnProperty(le)&&on[le]&&se("/"+le.substr(0,1).toUpperCase()+le.substr(1)+" ("+ua(H(on[le]))+")");se("/CreationDate ("+ua(H(Ne))+")"),se(">>"),se("endobj")},Cs=b.__private__.putCatalog=function(A){var H=(A=A||{}).rootDictionaryObjId||Ts;switch(nr(),se("<<"),se("/Type /Catalog"),se("/Pages "+H+" 0 R"),ct||(ct="fullwidth"),ct){case"fullwidth":se("/OpenAction [3 0 R /FitH null]");break;case"fullheight":se("/OpenAction [3 0 R /FitV null]");break;case"fullpage":se("/OpenAction [3 0 R /Fit]");break;case"original":se("/OpenAction [3 0 R /XYZ null null 1]");break;default:var le=""+ct;le.substr(le.length-1)==="%"&&(ct=parseInt(ct)/100),typeof ct=="number"&&se("/OpenAction [3 0 R /XYZ null null "+C(ct)+"]")}switch(dn||(dn="continuous"),dn){case"continuous":se("/PageLayout /OneColumn");break;case"single":se("/PageLayout /SinglePage");break;case"two":case"twoleft":se("/PageLayout /TwoColumnLeft");break;case"tworight":se("/PageLayout /TwoColumnRight")}Et&&se("/PageMode /"+Et),xn.publish("putCatalog"),se(">>"),se("endobj")},Or=b.__private__.putTrailer=function(){se("trailer"),se("<<"),se("/Size "+(me+1)),se("/Root "+me+" 0 R"),se("/Info "+(me-1)+" 0 R"),g!==null&&se("/Encrypt "+jr.oid+" 0 R"),se("/ID [ <"+ue+"> <"+ue+"> ]"),se(">>")},wn=b.__private__.putHeader=function(){se("%PDF-"+T),se("%")},Yi=b.__private__.putXRef=function(){var A="0000000000";se("xref"),se("0 "+(me+1)),se("0000000000 65535 f ");for(var H=1;H<=me;H++)typeof be[H]=="function"?se((A+be[H]()).slice(-10)+" 00000 n "):be[H]!==void 0?se((A+be[H]).slice(-10)+" 00000 n "):se("0000000000 00000 n ")},Ba=b.__private__.buildDocument=function(){var A;me=0,Re=0,Le=[],be=[],qe=[],Ts=mr(),$n=mr(),ft(Le),xn.publish("buildDocument"),wn(),ri(),(function(){xn.publish("putAdditionalObjects");for(var le=0;le<qe.length;le++){var ge=qe[le];ns(ge.objId,!0),se(ge.content),se("endobj")}xn.publish("postPutAdditionalObjects")})(),A=[],(function(){for(var le in Lt)Lt.hasOwnProperty(le)&&(x===!1||x===!0&&v.hasOwnProperty(le))&&ca(Lt[le])})(),(function(){var le;for(le in zt)zt.hasOwnProperty(le)&&_a(zt[le])})(),(function(){for(var le in As)As.hasOwnProperty(le)&&Ki(As[le])})(),(function(le){var ge;for(ge in Tt)Tt.hasOwnProperty(ge)&&(Tt[ge]instanceof qd?ja(Tt[ge]):Tt[ge]instanceof _f&&Hs(Tt[ge],le))})(A),xn.publish("putResources"),A.forEach(Ua),Ua({resourcesOid:$n,objectOid:Number.MAX_SAFE_INTEGER}),xn.publish("postPutResources"),g!==null&&(jr.oid=nr(),se("<<"),se("/Filter /Standard"),se("/V "+jr.v),se("/R "+jr.r),se("/U <"+jr.toHexString(jr.U)+">"),se("/O <"+jr.toHexString(jr.O)+">"),se("/P "+jr.P),se(">>"),se("endobj")),Sa(),Cs();var H=Re;return Yi(),Or(),se("startxref"),se(""+H),se("%%EOF"),ft(Je[Q]),Le.join(`
`)},kn=b.__private__.getBlob=function(A){return new Blob([rn(A)],{type:"application/pdf"})},bo=b.output=b.__private__.output=(oa=function(A,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",A){case void 0:return Ba();case"save":b.save(H.filename);break;case"arraybuffer":return rn(Ba());case"blob":return kn(Ba());case"bloburi":case"bloburl":if(nn.URL!==void 0&&typeof nn.URL.createObjectURL=="function")return nn.URL&&nn.URL.createObjectURL(kn(Ba()))||void 0;Ar.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var le="",ge=Ba();try{le=P6(ge)}catch{le=P6(unescape(encodeURIComponent(ge)))}return"data:application/pdf;filename="+H.filename+";base64,"+le;case"pdfobjectnewwindow":if(Object.prototype.toString.call(nn)==="[object Window]"){var we="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ve=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(we=H.pdfObjectUrl,Ve="");var Xe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+we+'"'+Ve+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",ht=nn.open();return ht!==null&&ht.document.write(Xe),ht}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(nn)==="[object Window]"){var xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',Ut=nn.open();if(Ut!==null){Ut.document.write(xt);var It=this;Ut.document.documentElement.querySelector("#pdfViewer").onload=function(){Ut.document.title=H.filename,Ut.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(It.output("bloburl"))}}return Ut}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(nn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var En='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',gr=nn.open();if(gr!==null&&(gr.document.write(En),gr.document.title=H.filename),gr||typeof safari>"u")return gr;break;case"datauri":case"dataurl":return nn.document.location.href=this.output("datauristring",H);default:return null}},oa.foo=function(){try{return oa.apply(this,arguments)}catch(le){var A=le.stack||"";~A.indexOf(" at ")&&(A=A.split(" at ")[1]);var H="Error in function "+A.split(`
`)[0].split("<")[0]+": "+le.message;if(!nn.console)throw new Error(H);nn.console.error(H,le),nn.alert&&alert(H)}},oa.foo.bar=oa,oa.foo),$r=function(A){return Array.isArray(qs)===!0&&qs.indexOf(A)>-1};switch(r){case"pt":en=1;break;case"mm":en=72/25.4;break;case"cm":en=72/2.54;break;case"in":en=72;break;case"px":en=$r("px_scaling")==1?.75:96/72;break;case"pc":case"em":en=12;break;case"ex":en=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);en=r}var jr=null;te(),de();var Fr=b.__private__.getPageInfo=b.getPageInfo=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:jt[A].objId,pageNumber:A,pageContext:jt[A]}},$o=b.__private__.getPageInfoByObjId=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in jt)if(jt[H].objId===A)break;return Fr(H)},ou=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:jt[Q].objId,pageNumber:Q,pageContext:jt[Q]}};b.addPage=function(){return si.apply(this,arguments),this},b.setPage=function(){return _l.apply(this,arguments),ft.call(this,Je[Q]),this},b.insertPage=function(A){return this.addPage(),this.movePage(Q,A),this},b.movePage=function(A,H){var le,ge;if(A>H){le=Je[A],ge=jt[A];for(var we=A;we>H;we--)Je[we]=Je[we-1],jt[we]=jt[we-1];Je[H]=le,jt[H]=ge,this.setPage(H)}else if(A<H){le=Je[A],ge=jt[A];for(var Ve=A;Ve<H;Ve++)Je[Ve]=Je[Ve+1],jt[Ve]=jt[Ve+1];Je[H]=le,jt[H]=ge,this.setPage(H)}return this},b.deletePage=function(){return Ho.apply(this,arguments),this},b.__private__.text=b.text=function(A,H,le,ge,we){var Ve,Xe,ht,xt,Ut,It,En,gr,rr,y=(ge=ge||{}).scope||this;if(typeof A=="number"&&typeof H=="number"&&(typeof le=="string"||Array.isArray(le))){var R=le;le=H,H=A,A=R}if(arguments[3]instanceof Ct==0?(ht=arguments[4],xt=arguments[5],ur(En=arguments[3])==="object"&&En!==null||(typeof ht=="string"&&(xt=ht,ht=null),typeof En=="string"&&(xt=En,En=null),typeof En=="number"&&(ht=En,En=null),ge={flags:En,angle:ht,align:xt})):(k("The transform parameter of text() with a Matrix value"),rr=we),isNaN(H)||isNaN(le)||A==null)throw new Error("Invalid arguments passed to jsPDF.text");if(A.length===0)return y;var z,Z="",_e=typeof ge.lineHeightFactor=="number"?ge.lineHeightFactor:Ji,Pe=y.internal.scaleFactor;function et(qn){return qn=qn.split("	").join(Array(ge.TabLen||9).join(" ")),ua(qn,En)}function Zt(qn){for(var Mn,xr=qn.concat(),Yr=[],ko=xr.length;ko--;)typeof(Mn=xr.shift())=="string"?Yr.push(Mn):Array.isArray(qn)&&(Mn.length===1||Mn[1]===void 0&&Mn[2]===void 0)?Yr.push(Mn[0]):Yr.push([Mn[0],Mn[1],Mn[2]]);return Yr}function pr(qn,Mn){var xr;if(typeof qn=="string")xr=Mn(qn)[0];else if(Array.isArray(qn)){for(var Yr,ko,no=qn.concat(),yc=[],bd=no.length;bd--;)typeof(Yr=no.shift())=="string"?yc.push(Mn(Yr)[0]):Array.isArray(Yr)&&typeof Yr[0]=="string"&&(ko=Mn(Yr[0],Yr[1],Yr[2]),yc.push([ko[0],ko[1],ko[2]]));xr=yc}return xr}var bn=!1,Kn=!0;if(typeof A=="string")bn=!0;else if(Array.isArray(A)){var ks=A.concat();Xe=[];for(var Ws,ir=ks.length;ir--;)(typeof(Ws=ks.shift())!="string"||Array.isArray(Ws)&&typeof Ws[0]!="string")&&(Kn=!1);bn=Kn}if(bn===!1)throw new Error('Type of text must be string or Array. "'+A+'" is not recognized.');typeof A=="string"&&(A=A.match(/[\r?\n]/)?A.split(/\r\n|\r|\n/g):[A]);var Ks=He/y.internal.scaleFactor,li=Ks*(_e-1);switch(ge.baseline){case"bottom":le-=li;break;case"top":le+=Ks-li;break;case"hanging":le+=Ks-2*li;break;case"middle":le+=Ks/2-li}if((It=ge.maxWidth||0)>0&&(typeof A=="string"?A=y.splitTextToSize(A,It):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(qn,Mn){return qn.concat(y.splitTextToSize(Mn,It))},[]))),Ve={text:A,x:H,y:le,options:ge,mutex:{pdfEscape:ua,activeFontKey:wt,fonts:Lt,activeFontSize:He}},xn.publish("preProcessText",Ve),A=Ve.text,ht=(ge=Ve.options).angle,rr instanceof Ct==0&&ht&&typeof ht=="number"){ht*=Math.PI/180,ge.rotationDirection===0&&(ht=-ht),B===O&&(ht=-ht);var _o=Math.cos(ht),So=Math.sin(ht);rr=new Ct(_o,So,-So,_o,0,0)}else ht&&ht instanceof Ct&&(rr=ht);B!==O||rr||(rr=Na),(Ut=ge.charSpace||Aa)!==void 0&&(Z+=M(V(Ut))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(gr=ge.horizontalScale)!==void 0&&(Z+=M(100*gr)+` Tz
`),ge.lang;var Ia=-1,Qo=ge.renderingMode!==void 0?ge.renderingMode:ge.stroke,lu=y.internal.getCurrentPageInfo().pageContext;switch(Qo){case 0:case!1:case"fill":Ia=0;break;case 1:case!0:case"stroke":Ia=1;break;case 2:case"fillThenStroke":Ia=2;break;case 3:case"invisible":Ia=3;break;case 4:case"fillAndAddForClipping":Ia=4;break;case 5:case"strokeAndAddPathForClipping":Ia=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ia=6;break;case 7:case"addToPathForClipping":Ia=7}var xd=lu.usedRenderingMode!==void 0?lu.usedRenderingMode:-1;Ia!==-1?Z+=Ia+` Tr
`:xd!==-1&&(Z+=`0 Tr
`),Ia!==-1&&(lu.usedRenderingMode=Ia),xt=ge.align||"left";var ci,eo=He*_e,Jo=y.internal.pageSize.getWidth(),yd=Lt[wt];Ut=ge.charSpace||Aa,It=ge.maxWidth||0,En=Object.assign({autoencode:!0,noBOM:!0},ge.flags);var to=[],kl=function(qn){return y.getStringUnitWidth(qn,{font:yd,charSpace:Ut,fontSize:He,doKerning:!1})*He/Pe};if(Object.prototype.toString.call(A)==="[object Array]"){var qa;Xe=Zt(A),xt!=="left"&&(ci=Xe.map(kl));var ka,Eo=0;if(xt==="right"){H-=ci[0],A=[],ir=Xe.length;for(var Ao=0;Ao<ir;Ao++)Ao===0?(ka=xs(H),qa=ss(le)):(ka=V(Eo-ci[Ao]),qa=-eo),A.push([Xe[Ao],ka,qa]),Eo=ci[Ao]}else if(xt==="center"){H-=ci[0]/2,A=[],ir=Xe.length;for(var Zo=0;Zo<ir;Zo++)Zo===0?(ka=xs(H),qa=ss(le)):(ka=V((Eo-ci[Zo])/2),qa=-eo),A.push([Xe[Zo],ka,qa]),Eo=ci[Zo]}else if(xt==="left"){A=[],ir=Xe.length;for(var cu=0;cu<ir;cu++)A.push(Xe[cu])}else if(xt==="justify"&&yd.encoding==="Identity-H"){A=[],ir=Xe.length,It=It!==0?It:Jo;for(var uu=0,Kr=0;Kr<ir;Kr++)if(qa=Kr===0?ss(le):-eo,ka=Kr===0?xs(H):uu,Kr<ir-1){var Nh=V((It-ci[Kr])/(Xe[Kr].split(" ").length-1)),To=Xe[Kr].split(" ");A.push([To[0]+" ",ka,qa]),uu=0;for(var Co=1;Co<To.length;Co++){var Ys=(kl(To[Co-1]+" "+To[Co])-kl(To[Co]))*Pe+Nh;Co==To.length-1?A.push([To[Co],Ys,0]):A.push([To[Co]+" ",Ys,0]),uu-=Ys}}else A.push([Xe[Kr],ka,qa]);A.push(["",uu,0])}else{if(xt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(A=[],ir=Xe.length,It=It!==0?It:Jo,Kr=0;Kr<ir;Kr++){qa=Kr===0?ss(le):-eo,ka=Kr===0?xs(H):0;var el=Xe[Kr].split(" ").length-1,du=el>0?(It-ci[Kr])/el:0;Kr<ir-1?to.push(M(V(du))):to.push(0),A.push([Xe[Kr],ka,qa])}}}(typeof ge.R2L=="boolean"?ge.R2L:Mt)===!0&&(A=pr(A,function(qn,Mn,xr){return[qn.split("").reverse().join(""),Mn,xr]})),Ve={text:A,x:H,y:le,options:ge,mutex:{pdfEscape:ua,activeFontKey:wt,fonts:Lt,activeFontSize:He}},xn.publish("postProcessText",Ve),A=Ve.text,z=Ve.mutex.isHex||!1;var hu=Lt[wt].encoding;hu!=="WinAnsiEncoding"&&hu!=="StandardEncoding"||(A=pr(A,function(qn,Mn,xr){return[et(qn),Mn,xr]})),Xe=Zt(A),A=[];for(var tl,nl,Io,xc=Array.isArray(Xe[0])?1:0,ui="",rl=function(qn,Mn,xr){var Yr="";return xr instanceof Ct?(xr=typeof ge.angle=="number"?Wi(xr,new Ct(1,0,0,1,qn,Mn)):Wi(new Ct(1,0,0,1,qn,Mn),xr),B===O&&(xr=Wi(new Ct(1,0,0,-1,0,0),xr)),Yr=xr.join(" ")+` Tm
`):Yr=M(qn)+" "+M(Mn)+` Td
`,Yr},fa=0;fa<Xe.length;fa++){switch(ui="",xc){case 1:Io=(z?"<":"(")+Xe[fa][0]+(z?">":")"),tl=parseFloat(Xe[fa][1]),nl=parseFloat(Xe[fa][2]);break;case 0:Io=(z?"<":"(")+Xe[fa]+(z?">":")"),tl=xs(H),nl=ss(le)}to!==void 0&&to[fa]!==void 0&&(ui=to[fa]+` Tw
`),fa===0?A.push(ui+rl(tl,nl,rr)+Io):xc===0?A.push(ui+Io):xc===1&&A.push(ui+rl(tl,nl,rr)+Io)}A=xc===0?A.join(` Tj
T* `):A.join(` Tj
`),A+=` Tj
`;var _i=`BT
/`;return _i+=wt+" "+He+` Tf
`,_i+=M(He*_e)+` TL
`,_i+=ii+`
`,_i+=Z,_i+=A,se(_i+="ET"),v[wt]=!0,y};var dc=b.__private__.clip=b.clip=function(A){return se(A==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return dc("evenodd")},b.__private__.discardPath=b.discardPath=function(){return se("n"),this};var $s=b.__private__.isValidStyle=function(A){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(A)!==-1&&(H=!0),H};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(A){return $s(A)&&(f=A),this};var hc=b.__private__.getStyle=b.getStyle=function(A){var H=f;switch(A){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=A}return H},Xi=b.close=function(){return se("h"),this};b.stroke=function(){return se("S"),this},b.fill=function(A){return ps("f",A),this},b.fillEvenOdd=function(A){return ps("f*",A),this},b.fillStroke=function(A){return ps("B",A),this},b.fillStrokeEvenOdd=function(A){return ps("B*",A),this};var ps=function(A,H){ur(H)==="object"?mc(H,A):se(A)},vo=function(A){A===null||B===O&&A===void 0||(A=hc(A),se(A))};function fc(A,H,le,ge,we){var Ve=new _f(H||this.boundingBox,le||this.xStep,ge||this.yStep,this.gState,we||this.matrix);Ve.stream=this.stream;var Xe=A+"$$"+this.cloneIndex+++"$$";return ia(Xe,Ve),Ve}var mc=function(A,H){var le=zn[A.key],ge=Tt[le];if(ge instanceof qd)se("q"),se(El(H)),ge.gState&&b.setGState(ge.gState),se(A.matrix.toString()+" cm"),se("/"+le+" sh"),se("Q");else if(ge instanceof _f){var we=new Ct(1,0,0,-1,0,oi());A.matrix&&(we=we.multiply(A.matrix||Na),le=fc.call(ge,A.key,A.boundingBox,A.xStep,A.yStep,we).id),se("q"),se("/Pattern cs"),se("/"+le+" scn"),ge.gState&&b.setGState(ge.gState),se(H),se("Q")}},El=function(A){switch(A){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Al=b.moveTo=function(A,H){return se(M(V(A))+" "+M(oe(H))+" m"),this},Qi=b.lineTo=function(A,H){return se(M(V(A))+" "+M(oe(H))+" l"),this},da=b.curveTo=function(A,H,le,ge,we,Ve){return se([M(V(A)),M(oe(H)),M(V(le)),M(oe(ge)),M(V(we)),M(oe(Ve)),"c"].join(" ")),this};b.__private__.line=b.line=function(A,H,le,ge,we){if(isNaN(A)||isNaN(H)||isNaN(le)||isNaN(ge)||!$s(we))throw new Error("Invalid arguments passed to jsPDF.line");return B===D?this.lines([[le-A,ge-H]],A,H,[1,1],we||"S"):this.lines([[le-A,ge-H]],A,H,[1,1]).stroke()},b.__private__.lines=b.lines=function(A,H,le,ge,we,Ve){var Xe,ht,xt,Ut,It,En,gr,rr,y,R,z,Z;if(typeof A=="number"&&(Z=le,le=H,H=A,A=Z),ge=ge||[1,1],Ve=Ve||!1,isNaN(H)||isNaN(le)||!Array.isArray(A)||!Array.isArray(ge)||!$s(we)||typeof Ve!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Al(H,le),Xe=ge[0],ht=ge[1],Ut=A.length,R=H,z=le,xt=0;xt<Ut;xt++)(It=A[xt]).length===2?(R=It[0]*Xe+R,z=It[1]*ht+z,Qi(R,z)):(En=It[0]*Xe+R,gr=It[1]*ht+z,rr=It[2]*Xe+R,y=It[3]*ht+z,R=It[4]*Xe+R,z=It[5]*ht+z,da(En,gr,rr,y,R,z));return Ve&&Xi(),vo(we),this},b.path=function(A){for(var H=0;H<A.length;H++){var le=A[H],ge=le.c;switch(le.op){case"m":Al(ge[0],ge[1]);break;case"l":Qi(ge[0],ge[1]);break;case"c":da.apply(this,ge);break;case"h":Xi()}}return this},b.__private__.rect=b.rect=function(A,H,le,ge,we){if(isNaN(A)||isNaN(H)||isNaN(le)||isNaN(ge)||!$s(we))throw new Error("Invalid arguments passed to jsPDF.rect");return B===D&&(ge=-ge),se([M(V(A)),M(oe(H)),M(V(le)),M(V(ge)),"re"].join(" ")),vo(we),this},b.__private__.triangle=b.triangle=function(A,H,le,ge,we,Ve,Xe){if(isNaN(A)||isNaN(H)||isNaN(le)||isNaN(ge)||isNaN(we)||isNaN(Ve)||!$s(Xe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[le-A,ge-H],[we-le,Ve-ge],[A-we,H-Ve]],A,H,[1,1],Xe,!0),this},b.__private__.roundedRect=b.roundedRect=function(A,H,le,ge,we,Ve,Xe){if(isNaN(A)||isNaN(H)||isNaN(le)||isNaN(ge)||isNaN(we)||isNaN(Ve)||!$s(Xe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ht=4/3*(Math.SQRT2-1);return we=Math.min(we,.5*le),Ve=Math.min(Ve,.5*ge),this.lines([[le-2*we,0],[we*ht,0,we,Ve-Ve*ht,we,Ve],[0,ge-2*Ve],[0,Ve*ht,-we*ht,Ve,-we,Ve],[2*we-le,0],[-we*ht,0,-we,-Ve*ht,-we,-Ve],[0,2*Ve-ge],[0,-Ve*ht,we*ht,-Ve,we,-Ve]],A+we,H,[1,1],Xe,!0),this},b.__private__.ellipse=b.ellipse=function(A,H,le,ge,we){if(isNaN(A)||isNaN(H)||isNaN(le)||isNaN(ge)||!$s(we))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ve=4/3*(Math.SQRT2-1)*le,Xe=4/3*(Math.SQRT2-1)*ge;return Al(A+le,H),da(A+le,H-Xe,A+Ve,H-ge,A,H-ge),da(A-Ve,H-ge,A-le,H-Xe,A-le,H),da(A-le,H+Xe,A-Ve,H+ge,A,H+ge),da(A+Ve,H+ge,A+le,H+Xe,A+le,H),vo(we),this},b.__private__.circle=b.circle=function(A,H,le,ge){if(isNaN(A)||isNaN(H)||isNaN(le)||!$s(ge))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(A,H,le,le,ge)},b.setFont=function(A,H,le){return le&&(H=G(H,le)),wt=uc(A,H,{disableWarning:!1}),this};var ai=b.__private__.getFont=b.getFont=function(){return Lt[uc.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var A,H,le={};for(A in Wt)if(Wt.hasOwnProperty(A))for(H in le[A]=[],Wt[A])Wt[A].hasOwnProperty(H)&&le[A].push(H);return le},b.addFont=function(A,H,le,ge,we){var Ve=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ve.indexOf(arguments[3])!==-1?we=arguments[3]:arguments[3]&&Ve.indexOf(arguments[3])==-1&&(le=G(le,ge)),jl.call(this,A,H,le,we=we||"Identity-H")};var Ji,ha=n.lineWidth||.200025,wo=b.__private__.getLineWidth=b.getLineWidth=function(){return ha},Ot=b.__private__.setLineWidth=b.setLineWidth=function(A){return ha=A,se(M(V(A))+" w"),this};b.__private__.setLineDash=kt.API.setLineDash=kt.API.setLineDashPattern=function(A,H){if(A=A||[],H=H||0,isNaN(H)||!Array.isArray(A))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return A=A.map(function(le){return M(V(le))}).join(" "),H=M(V(H)),se("["+A+"] "+H+" d"),this};var Wo=b.__private__.getLineHeight=b.getLineHeight=function(){return He*Ji};b.__private__.getLineHeight=b.getLineHeight=function(){return He*Ji};var Tl=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(A){return typeof(A=A||1.15)=="number"&&(Ji=A),this},No=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return Ji};Tl(n.lineHeight);var xs=b.__private__.getHorizontalCoordinate=function(A){return V(A)},ss=b.__private__.getVerticalCoordinate=function(A){return B===O?A:jt[Q].mediaBox.topRightY-jt[Q].mediaBox.bottomLeftY-V(A)},Ko=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(A){return M(xs(A))},Wn=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(A){return M(ss(A))},Ea=n.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return ar(Ea)},b.__private__.setStrokeColor=b.setDrawColor=function(A,H,le,ge){return Ea=rs({ch1:A,ch2:H,ch3:le,ch4:ge,pdfColorType:"draw",precision:2}),se(Ea),this};var Yo=n.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return ar(Yo)},b.__private__.setFillColor=b.setFillColor=function(A,H,le,ge){return Yo=rs({ch1:A,ch2:H,ch3:le,ch4:ge,pdfColorType:"fill",precision:2}),se(Yo),this};var ii=n.textColor||"0 g",gc=b.__private__.getTextColor=b.getTextColor=function(){return ar(ii)};b.__private__.setTextColor=b.setTextColor=function(A,H,le,ge){return ii=rs({ch1:A,ch2:H,ch3:le,ch4:ge,pdfColorType:"text",precision:3}),this};var Aa=n.charSpace,Zi=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(Aa||0)};b.__private__.setCharSpace=b.setCharSpace=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Aa=A,this};var Ta=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(A){var H=b.CapJoinStyles[A];if(H===void 0)throw new Error("Line cap style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ta=H,se(H+" J"),this};var Wr=0;b.__private__.setLineJoin=b.setLineJoin=function(A){var H=b.CapJoinStyles[A];if(H===void 0)throw new Error("Line join style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Wr=H,se(H+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(A){if(A=A||0,isNaN(A))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return se(M(V(A))+" M"),this},b.GState=Bx,b.setGState=function(A){(A=typeof A=="string"?zt[qt[A]]:bi(null,A)).equals(Hn)||(se("/"+A.id+" gs"),Hn=A)};var bi=function(A,H){if(!A||!qt[A]){var le=!1;for(var ge in zt)if(zt.hasOwnProperty(ge)&&zt[ge].equals(H)){le=!0;break}if(le)H=zt[ge];else{var we="GS"+(Object.keys(zt).length+1).toString(10);zt[we]=H,H.id=we}return A&&(qt[A]=H.id),xn.publish("addGState",H),H}};b.addGState=function(A,H){return bi(A,H),this},b.saveGraphicsState=function(){return se("q"),an.push({key:wt,size:He,color:ii}),this},b.restoreGraphicsState=function(){se("Q");var A=an.pop();return wt=A.key,He=A.size,ii=A.color,Hn=null,this},b.setCurrentTransformationMatrix=function(A){return se(A.toString()+" cm"),this},b.comment=function(A){return se("#"+A),this};var Is=function(A,H){var le=A||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return le},set:function(Ve){isNaN(Ve)||(le=parseFloat(Ve))}});var ge=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ge},set:function(Ve){isNaN(Ve)||(ge=parseFloat(Ve))}});var we="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return we},set:function(Ve){we=Ve.toString()}}),this},vi=function(A,H,le,ge){Is.call(this,A,H),this.type="rect";var we=le||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return we},set:function(Xe){isNaN(Xe)||(we=parseFloat(Xe))}});var Ve=ge||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ve},set:function(Xe){isNaN(Xe)||(Ve=parseFloat(Xe))}}),this},jo=function(){this.page=At,this.currentPage=Q,this.pages=Je.slice(0),this.pagesContext=jt.slice(0),this.x=Nt,this.y=Cr,this.matrix=ln,this.width=za(Q),this.height=Cl(Q),this.outputDestination=at,this.id="",this.objectNumber=-1};jo.prototype.restore=function(){At=this.page,Q=this.currentPage,jt=this.pagesContext,Je=this.pages,Nt=this.x,Cr=this.y,ln=this.matrix,Xo(Q,this.width),Ca(Q,this.height),at=this.outputDestination};var wi=function(A,H,le,ge,we){gs.push(new jo),At=Q=0,Je=[],Nt=A,Cr=H,ln=we,Va([le,ge])};for(var Ni in b.beginFormObject=function(A,H,le,ge,we){return wi(A,H,le,ge,we),this},b.endFormObject=function(A){return(function(H){if(yi[H])gs.pop().restore();else{var le=new jo,ge="Xo"+(Object.keys(As).length+1).toString(10);le.id=ge,yi[H]=ge,As[ge]=le,xn.publish("addFormObject",le),gs.pop().restore()}})(A),this},b.doFormObject=function(A,H){var le=As[yi[A]];return se("q"),se(H.toString()+" cm"),se("/"+le.id+" Do"),se("Q"),this},b.getFormObject=function(A){var H=As[yi[A]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},b.save=function(A,H){return A=A||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(Fd(kn(Ba()),A),typeof Fd.unload=="function"&&nn.setTimeout&&setTimeout(Fd.unload,911),this):new Promise(function(le,ge){try{var we=Fd(kn(Ba()),A);typeof Fd.unload=="function"&&nn.setTimeout&&setTimeout(Fd.unload,911),le(we)}catch(Ve){ge(Ve.message)}})},kt.API)kt.API.hasOwnProperty(Ni)&&(Ni==="events"&&kt.API.events.length?(function(A,H){var le,ge,we;for(we=H.length-1;we!==-1;we--)le=H[we][0],ge=H[we][1],A.subscribe.apply(A,[le].concat(typeof ge=="function"?[ge]:ge))})(xn,kt.API.events):b[Ni]=kt.API[Ni]);function za(A){return jt[A].mediaBox.topRightX-jt[A].mediaBox.bottomLeftX}function Xo(A,H){jt[A].mediaBox.topRightX=H+jt[A].mediaBox.bottomLeftX}function Cl(A){return jt[A].mediaBox.topRightY-jt[A].mediaBox.bottomLeftY}function Ca(A,H){jt[A].mediaBox.topRightY=H+jt[A].mediaBox.bottomLeftY}var ji=b.getPageWidth=function(A){return za(A=A||Q)/en},pc=b.setPageWidth=function(A,H){Xo(A,H*en)},oi=b.getPageHeight=function(A){return Cl(A=A||Q)/en},Il=b.setPageHeight=function(A,H){Ca(A,H*en)};return b.internal={pdfEscape:ua,getStyle:hc,getFont:ai,getFontSize:lt,getCharSpace:Zi,getTextColor:gc,getLineHeight:Wo,getLineHeightFactor:No,getLineWidth:wo,write:st,getHorizontalCoordinate:xs,getVerticalCoordinate:ss,getCoordinateString:Ko,getVerticalCoordinateString:Wn,collections:{},newObject:nr,newAdditionalObject:Gs,newObjectDeferred:mr,newObjectDeferredBegin:ns,getFilters:la,putStream:Fa,events:xn,scaleFactor:en,pageSize:{getWidth:function(){return ji(Q)},setWidth:function(A){pc(Q,A)},getHeight:function(){return oi(Q)},setHeight:function(A){Il(Q,A)}},encryptionOptions:g,encryption:jr,getEncryptor:function(A){return g!==null?jr.encryptor(A,0):function(H){return H}},output:bo,getNumberOfPages:Sl,get pages(){return Je},out:se,f2:C,f3:P,getPageInfo:Fr,getPageInfoByObjId:$o,getCurrentPageInfo:ou,getPDFVersion:E,Point:Is,Rectangle:vi,Matrix:Ct,hasHotfix:$r},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return ji(Q)},set:function(A){pc(Q,A)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return oi(Q)},set:function(A){Il(Q,A)},enumerable:!0,configurable:!0}),(function(A){for(var H=0,le=Pt.length;H<le;H++){var ge=jl.call(this,A[H][0],A[H][1],A[H][2],Pt[H][3],!0);x===!1&&(v[ge]=!0);var we=A[H][0].split("-");Ir({id:ge,fontName:we[0],fontStyle:we[1]||""})}xn.publish("addFonts",{fonts:Lt,dictionary:Wt})}).call(b,Pt),wt="F1",si(a,t),xn.publish("initialized"),b}vf.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},vf.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},vf.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},vf.prototype.processOwnerPassword=function(n,e){return q2(z2(e).substr(0,5),n)},vf.prototype.encryptor=function(n,e){var t=z2(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return q2(t,r)}},Bx.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||ur(n)!==ur(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},kt.API={events:[]},kt.version="3.0.4";var ds=kt.API,Cw=1,wh=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ff=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},mn=function(n){return n.toFixed(2)},Bu=function(n){return n.toFixed(5)};ds.__acroform__={};var $i=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},O6=function(n){return n*Cw},$l=function(n){var e=new AC,t=bt.internal.getHeight(n)||0,r=bt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(mn(r)),Number(mn(t))],e},BG=ds.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},zG=ds.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},qG=ds.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},ws=ds.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return qG(n,e-1)},Ns=ds.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return BG(n,e-1)},js=ds.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return zG(n,e-1)},GG=ds.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,a=n[0],o=n[1],c=n[2],u=n[3],h={};return h.lowerLeft_X=t(a)||0,h.lowerLeft_Y=r(o+u)||0,h.upperRight_X=t(a+c)||0,h.upperRight_Y=r(o)||0,[Number(mn(h.lowerLeft_X)),Number(mn(h.lowerLeft_Y)),Number(mn(h.upperRight_X)),Number(mn(h.upperRight_Y))]},HG=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=G2(n,t),a=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+a+" "+mn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=$l(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},G2=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=n.multiline?a.map(function(C){return C.split(`
`)}):a.map(function(C){return[C]});var o=t,c=bt.internal.getHeight(n)||0;c=c<0?-c:c;var u=bt.internal.getWidth(n)||0;u=u<0?-u:u;var h=function(C,P,V){if(C+1<a.length){var oe=P+" "+a[C+1][0];return I0(oe,n,V).width<=u-4}return!1};o++;e:for(;o>0;){e="",o--;var f,g,x=I0("3",n,o).height,v=n.multiline?c-o:(c-x)/2,b=v+=2,T=0,E=0,j=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+I0(e,n,o=12).width+", FieldWidth:"+u+`
`;break}for(var S="",D=0,O=0;O<a.length;O++)if(a.hasOwnProperty(O)){var B=!1;if(a[O].length!==1&&j!==a[O].length-1){if((x+2)*(D+2)+2>c)continue e;S+=a[O][j],B=!0,E=O,O--}else{S=(S+=a[O][j]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var re=parseInt(O),ae=h(re,S,o),G=O>=a.length-1;if(ae&&!G){S+=" ",j=0;continue}if(ae||G){if(G)E=re;else if(n.multiline&&(x+2)*(D+2)+2>c)continue e}else{if(!n.multiline||(x+2)*(D+2)+2>c)continue e;E=re}}for(var M="",k=T;k<=E;k++){var L=a[k];if(n.multiline){if(k===E){M+=L[j]+" ",j=(j+1)%L.length;continue}if(k===T){M+=L[L.length-1]+" ";continue}}M+=L[0]+" "}switch(M=M.substr(M.length-1)==" "?M.substr(0,M.length-1):M,g=I0(M,n,o).width,n.textAlign){case"right":f=u-g-2;break;case"center":f=(u-g)/2;break;default:f=2}e+=mn(f)+" "+mn(b)+` Td
`,e+="("+wh(M)+`) Tj
`,e+=-mn(f)+` 0 Td
`,b=-(o+2),g=0,T=B?E:E+1,D++,S=""}break}return r.text=e,r.fontSize=o,r},I0=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},$G={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},WG=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},KG=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(wl.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify($G)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Cw=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new TC,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];o.objId=void 0,o.hasAnnotation&&WG(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,a){var o=!r;for(var c in r||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(c)){var u=r[c],h=[],f=u.Rect;if(u.Rect&&(u.Rect=GG(u.Rect,a)),a.internal.newObjectDeferredBegin(u.objId,!0),u.DA=bt.createDefaultAppearanceStream(u),ur(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(h=u.getKeyValueListForStream()),u.Rect=f,u.hasAppearanceStream&&!u.appearanceStreamContent){var g=HG(u);h.push({key:"AP",value:"<</N "+g+">>"}),a.internal.acroformPlugin.xForms.push(g)}if(u.appearanceStreamContent){var x="";for(var v in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(v)){var b=u.appearanceStreamContent[v];if(x+="/"+v+" ",x+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var c in b)if(b.hasOwnProperty(c)){var T=b[c];typeof T=="function"&&(T=T.call(a,u)),x+="/"+c+" "+T+" ",a.internal.acroformPlugin.xForms.indexOf(T)>=0||a.internal.acroformPlugin.xForms.push(T)}}else typeof(T=b)=="function"&&(T=T.call(a,u)),x+="/"+c+" "+T,a.internal.acroformPlugin.xForms.indexOf(T)>=0||a.internal.acroformPlugin.xForms.push(T);x+=">>"}h.push({key:"AP",value:`<<
`+x+">>"})}a.internal.putStream({additionalKeyValues:h,objectId:u.objId}),a.internal.out("endobj")}o&&(function(E,j){for(var S in E)if(E.hasOwnProperty(S)){var D=S,O=E[S];j.internal.newObjectDeferredBegin(O.objId,!0),ur(O)==="object"&&typeof O.putStream=="function"&&O.putStream(),delete E[D]}})(a.internal.acroformPlugin.xForms,a)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},EC=ds.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(c){return c};if(Array.isArray(n)){for(var a="[",o=0;o<n.length;o++)switch(o!==0&&(a+=" "),ur(n[o])){case"boolean":case"number":case"object":a+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),a+="("+wh(r(n[o].toString()))+")"):a+=n[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},P1=function(n,e,t){var r=function(a){return a};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+wh(r(n))+")"},Jl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Jl.prototype.toString=function(){return this.objId+" 0 R"},Jl.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Jl.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],a=this[r];a&&(Array.isArray(a)?n.push({key:r,value:EC(a,this.objId,this.scope)}):a instanceof Jl?(a.scope=this.scope,n.push({key:r,value:a.objId+" 0 R"})):typeof a!="function"&&n.push({key:r,value:a}))}return n};var AC=function(){Jl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};$i(AC,Jl);var TC=function(){Jl.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+wh(t(n))+")"}},set:function(t){n=t}})};$i(TC,Jl);var wl=function n(){Jl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');e=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ws(e,3)},set:function(S){S?this.F=Ns(e,3):this.F=js(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');t=S}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(S){r=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(S){r[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(S){r[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(S){r[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(S){r[3]=S}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof zx)return;o="FieldObject"+n.FieldNum++}var S=function(D){return D};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+wh(S(o))+")"},set:function(S){o=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(S){o=S}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(S){c=S}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(S){u=S}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(S){h=S}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/Cw:f},set:function(S){f=S}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(S){g=S}});var x="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!x||this instanceof zx||this instanceof Qd))return P1(x,this.objId,this.scope)},set:function(S){S=S.toString(),x=S}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof va==0?P1(v,this.objId,this.scope):v},set:function(S){S=S.toString(),v=this instanceof va==0?S.substr(0,1)==="("?ff(S.substr(1,S.length-2)):ff(S):S}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof va==1?ff(v.substr(1,v.length-1)):v},set:function(S){S=S.toString(),v=this instanceof va==1?"/"+S:S}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof va==0?P1(b,this.objId,this.scope):b},set:function(S){S=S.toString(),b=this instanceof va==0?S.substr(0,1)==="("?ff(S.substr(1,S.length-2)):ff(S):S}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof va==1?ff(b.substr(1,b.length-1)):b},set:function(S){S=S.toString(),b=this instanceof va==1?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var T,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(S){S=!!S,E=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(T)return T},set:function(S){T=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,1)},set:function(S){S?this.Ff=Ns(this.Ff,1):this.Ff=js(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,2)},set:function(S){S?this.Ff=Ns(this.Ff,2):this.Ff=js(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,3)},set:function(S){S?this.Ff=Ns(this.Ff,3):this.Ff=js(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');j=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(j){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:j=2;break;case"center":case 1:j=1;break;default:j=0}}})};$i(wl,Jl);var kf=function(){wl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return EC(e,this.objId,this.scope)},set:function(t){var r,a;a=[],typeof(r=t)=="string"&&(a=(function(o,c,u){u||(u=1);for(var h,f=[];h=c.exec(o);)f.push(h[u]);return f})(r,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,18)},set:function(t){t?this.Ff=Ns(this.Ff,18):this.Ff=js(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Ns(this.Ff,19):this.Ff=js(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,20)},set:function(t){t?(this.Ff=Ns(this.Ff,20),e.sort()):this.Ff=js(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,22)},set:function(t){t?this.Ff=Ns(this.Ff,22):this.Ff=js(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,23)},set:function(t){t?this.Ff=Ns(this.Ff,23):this.Ff=js(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,27)},set:function(t){t?this.Ff=Ns(this.Ff,27):this.Ff=js(this.Ff,27)}}),this.hasAppearanceStream=!1};$i(kf,wl);var Rf=function(){kf.call(this),this.fontName="helvetica",this.combo=!1};$i(Rf,kf);var Pf=function(){Rf.call(this),this.combo=!0};$i(Pf,Rf);var J0=function(){Pf.call(this),this.edit=!0};$i(J0,Pf);var va=function(){wl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,15)},set:function(t){t?this.Ff=Ns(this.Ff,15):this.Ff=js(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,16)},set:function(t){t?this.Ff=Ns(this.Ff,16):this.Ff=js(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,17)},set:function(t){t?this.Ff=Ns(this.Ff,17):this.Ff=js(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,26)},set:function(t){t?this.Ff=Ns(this.Ff,26):this.Ff=js(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,a=[];for(r in a.push("<<"),e)a.push("/"+r+" ("+wh(t(e[r]))+")");return a.push(">>"),a.join(`
`)}},set:function(t){ur(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};$i(va,wl);var Z0=function(){va.call(this),this.pushButton=!0};$i(Z0,va);var Lf=function(){va.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};$i(Lf,va);var zx=function(){var n,e;wl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(u){return u};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,c=[];for(o in c.push("<<"),r)c.push("/"+o+" ("+wh(a(r[o]))+")");return c.push(">>"),c.join(`
`)},set:function(a){ur(a)==="object"&&(r=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(a){typeof a=="string"&&(r.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=bt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};$i(zx,wl),Lf.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Lf.prototype.createOption=function(n){var e=new zx;return e.Parent=this,e.optionName=n,this.Kids.push(e),YG.call(this.scope,e),e};var ex=function(){va.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=bt.CheckBox.createAppearanceStream()};$i(ex,va);var Qd=function(){wl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,13)},set:function(e){e?this.Ff=Ns(this.Ff,13):this.Ff=js(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,21)},set:function(e){e?this.Ff=Ns(this.Ff,21):this.Ff=js(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,23)},set:function(e){e?this.Ff=Ns(this.Ff,23):this.Ff=js(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,24)},set:function(e){e?this.Ff=Ns(this.Ff,24):this.Ff=js(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,25)},set:function(e){e?this.Ff=Ns(this.Ff,25):this.Ff=js(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,26)},set:function(e){e?this.Ff=Ns(this.Ff,26):this.Ff=js(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};$i(Qd,wl);var tx=function(){Qd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,14)},set:function(n){n?this.Ff=Ns(this.Ff,14):this.Ff=js(this.Ff,14)}}),this.password=!0};$i(tx,Qd);var bt={CheckBox:{createAppearanceStream:function(){return{N:{On:bt.CheckBox.YesNormal},D:{On:bt.CheckBox.YesPushDown,Off:bt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=$l(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,a=n.scope.__private__.encodeColorString(n.color),o=G2(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+mn(bt.internal.getWidth(n))+" "+mn(bt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+mn(o.fontSize)+" Tf "+a),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=$l(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),a=[],o=bt.internal.getHeight(n),c=bt.internal.getWidth(n),u=G2(n,n.caption);return a.push("1 g"),a.push("0 0 "+mn(c)+" "+mn(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+mn(c-1)+" "+mn(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+mn(u.fontSize)+" Tf "+r),a.push(u.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(n){var e=$l(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+mn(bt.internal.getWidth(n))+" "+mn(bt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:bt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=bt.RadioButton.Circle.YesNormal,e.D[n]=bt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=$l(n);e.scope=n.scope;var t=[],r=bt.internal.getWidth(n)<=bt.internal.getHeight(n)?bt.internal.getWidth(n)/4:bt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var a=bt.internal.Bezier_C,o=Number((r*a).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Bu(bt.internal.getWidth(n)/2)+" "+Bu(bt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=$l(n);e.scope=n.scope;var t=[],r=bt.internal.getWidth(n)<=bt.internal.getHeight(n)?bt.internal.getWidth(n)/4:bt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),o=Number((a*bt.internal.Bezier_C).toFixed(5)),c=Number((r*bt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Bu(bt.internal.getWidth(n)/2)+" "+Bu(bt.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Bu(bt.internal.getWidth(n)/2)+" "+Bu(bt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+c+" "+c+" "+r+" 0 "+r+" c"),t.push("-"+c+" "+r+" -"+r+" "+c+" -"+r+" 0 c"),t.push("-"+r+" -"+c+" -"+c+" -"+r+" 0 -"+r+" c"),t.push(c+" -"+r+" "+r+" -"+c+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=$l(n);e.scope=n.scope;var t=[],r=bt.internal.getWidth(n)<=bt.internal.getHeight(n)?bt.internal.getWidth(n)/4:bt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),o=Number((a*bt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Bu(bt.internal.getWidth(n)/2)+" "+Bu(bt.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:bt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=bt.RadioButton.Cross.YesNormal,e.D[n]=bt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=$l(n);e.scope=n.scope;var t=[],r=bt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+mn(bt.internal.getWidth(n)-2)+" "+mn(bt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(mn(r.x1.x)+" "+mn(r.x1.y)+" m"),t.push(mn(r.x2.x)+" "+mn(r.x2.y)+" l"),t.push(mn(r.x4.x)+" "+mn(r.x4.y)+" m"),t.push(mn(r.x3.x)+" "+mn(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=$l(n);e.scope=n.scope;var t=bt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+mn(bt.internal.getWidth(n))+" "+mn(bt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+mn(bt.internal.getWidth(n)-2)+" "+mn(bt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(mn(t.x1.x)+" "+mn(t.x1.y)+" m"),r.push(mn(t.x2.x)+" "+mn(t.x2.y)+" l"),r.push(mn(t.x4.x)+" "+mn(t.x4.y)+" m"),r.push(mn(t.x3.x)+" "+mn(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=$l(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+mn(bt.internal.getWidth(n))+" "+mn(bt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};bt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=bt.internal.getWidth(n),t=bt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},bt.internal.getWidth=function(n){var e=0;return ur(n)==="object"&&(e=O6(n.Rect[2])),e},bt.internal.getHeight=function(n){var e=0;return ur(n)==="object"&&(e=O6(n.Rect[3])),e};var YG=ds.addField=function(n){if(KG(this,n),!(n instanceof wl))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};ds.AcroFormChoiceField=kf,ds.AcroFormListBox=Rf,ds.AcroFormComboBox=Pf,ds.AcroFormEditBox=J0,ds.AcroFormButton=va,ds.AcroFormPushButton=Z0,ds.AcroFormRadioButton=Lf,ds.AcroFormCheckBox=ex,ds.AcroFormTextField=Qd,ds.AcroFormPasswordField=tx,ds.AcroFormAppearance=bt,ds.AcroForm={ChoiceField:kf,ListBox:Rf,ComboBox:Pf,EditBox:J0,Button:va,PushButton:Z0,RadioButton:Lf,CheckBox:ex,TextField:Qd,PasswordField:tx,Appearance:bt},kt.AcroForm={ChoiceField:kf,ListBox:Rf,ComboBox:Pf,EditBox:J0,Button:va,PushButton:Z0,RadioButton:Lf,CheckBox:ex,TextField:Qd,PasswordField:tx,Appearance:bt};kt.AcroForm;function CC(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=n.__addimage__.getImageFileTypeByImageData=function(C,P){var V,oe,Ne,ue,pe,de=t;if((P=P||t)==="RGBA"||C.data!==void 0&&C.data instanceof Uint8ClampedArray&&"height"in C&&"width"in C)return"RGBA";if(ae(C))for(pe in r)for(Ne=r[pe],V=0;V<Ne.length;V+=1){for(ue=!0,oe=0;oe<Ne[V].length;oe+=1)if(Ne[V][oe]!==void 0&&Ne[V][oe]!==C[oe]){ue=!1;break}if(ue===!0){de=pe;break}}else for(pe in r)for(Ne=r[pe],V=0;V<Ne.length;V+=1){for(ue=!0,oe=0;oe<Ne[V].length;oe+=1)if(Ne[V][oe]!==void 0&&Ne[V][oe]!==C.charCodeAt(oe)){ue=!1;break}if(ue===!0){de=pe;break}}return de===t&&P!==t&&(de=P),de},o=function C(P){for(var V=this.internal.write,oe=this.internal.putStream,Ne=(0,this.internal.getFilters)();Ne.indexOf("FlateEncode")!==-1;)Ne.splice(Ne.indexOf("FlateEncode"),1);P.objectId=this.internal.newObject();var ue=[];if(ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Image"}),ue.push({key:"Width",value:P.width}),ue.push({key:"Height",value:P.height}),P.colorSpace===S.INDEXED?ue.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(P.palette.length/3-1)+" "+("sMask"in P&&P.sMask!==void 0?P.objectId+2:P.objectId+1)+" 0 R]"}):(ue.push({key:"ColorSpace",value:"/"+P.colorSpace}),P.colorSpace===S.DEVICE_CMYK&&ue.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ue.push({key:"BitsPerComponent",value:P.bitsPerComponent}),"decodeParameters"in P&&P.decodeParameters!==void 0&&ue.push({key:"DecodeParms",value:"<<"+P.decodeParameters+">>"}),"transparency"in P&&Array.isArray(P.transparency)&&P.transparency.length>0){for(var pe="",de=0,Se=P.transparency.length;de<Se;de++)pe+=P.transparency[de]+" "+P.transparency[de]+" ";ue.push({key:"Mask",value:"["+pe+"]"})}P.sMask!==void 0&&ue.push({key:"SMask",value:P.objectId+1+" 0 R"});var ze=P.filter!==void 0?["/"+P.filter]:void 0;if(oe({data:P.data,additionalKeyValues:ue,alreadyAppliedFilters:ze,objectId:P.objectId}),V("endobj"),"sMask"in P&&P.sMask!==void 0){var te,q=(te=P.sMaskBitsPerComponent)!==null&&te!==void 0?te:P.bitsPerComponent,Q={width:P.width,height:P.height,colorSpace:"DeviceGray",bitsPerComponent:q,data:P.sMask};"filter"in P&&(Q.decodeParameters="/Predictor ".concat(P.predictor," /Colors 1 /BitsPerComponent ").concat(q," /Columns ").concat(P.width),Q.filter=P.filter),C.call(this,Q)}if(P.colorSpace===S.INDEXED){var ne=this.internal.newObject();oe({data:M(new Uint8Array(P.palette)),objectId:ne}),V("endobj")}},c=function(){var C=this.internal.collections[e+"images"];for(var P in C)o.call(this,C[P])},u=function(){var C,P=this.internal.collections[e+"images"],V=this.internal.write;for(var oe in P)V("/I"+(C=P[oe]).index,C.objectId,"0","R")},h=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",c),this.internal.events.subscribe("putXobjectDict",u))},f=function(){var C=this.internal.collections[e+"images"];return h.call(this),C},g=function(){return Object.keys(this.internal.collections[e+"images"]).length},x=function(C){return typeof n["process"+C.toUpperCase()]=="function"},v=function(C){return ur(C)==="object"&&C.nodeType===1},b=function(C,P){if(C.nodeName==="IMG"&&C.hasAttribute("src")){var V=""+C.getAttribute("src");if(V.indexOf("data:image/")===0)return Q0(unescape(V).split("base64,").pop());var oe=n.loadFile(V,!0);if(oe!==void 0)return oe}if(C.nodeName==="CANVAS"){if(C.width===0||C.height===0)throw new Error("Given canvas must have data. Canvas width: "+C.width+", height: "+C.height);var Ne;switch(P){case"PNG":Ne="image/png";break;case"WEBP":Ne="image/webp";break;default:Ne="image/jpeg"}return Q0(C.toDataURL(Ne,1).split("base64,").pop())}},T=function(C){var P=this.internal.collections[e+"images"];if(P){for(var V in P)if(C===P[V].alias)return P[V]}},E=function(C,P,V){return C||P||(C=-96,P=-96),C<0&&(C=-1*V.width*72/C/this.internal.scaleFactor),P<0&&(P=-1*V.height*72/P/this.internal.scaleFactor),C===0&&(C=P*V.width/V.height),P===0&&(P=C*V.height/V.width),[C,P]},j=function(C,P,V,oe,Ne,ue){var pe=E.call(this,V,oe,Ne),de=this.internal.getCoordinateString,Se=this.internal.getVerticalCoordinateString,ze=f.call(this);if(V=pe[0],oe=pe[1],ze[Ne.index]=Ne,ue){ue*=Math.PI/180;var te=Math.cos(ue),q=Math.sin(ue),Q=function(he){return he.toFixed(4)},ne=[Q(te),Q(q),Q(-1*q),Q(te),0,0,"cm"]}this.internal.write("q"),ue?(this.internal.write([1,"0","0",1,de(C),Se(P+oe),"cm"].join(" ")),this.internal.write(ne.join(" ")),this.internal.write([de(V),"0","0",de(oe),"0","0","cm"].join(" "))):this.internal.write([de(V),"0","0",de(oe),de(C),Se(P+oe),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ne.index+" Do"),this.internal.write("Q")},S=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var D=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},O=n.__addimage__.sHashCode=function(C){var P,V,oe=0;if(typeof C=="string")for(V=C.length,P=0;P<V;P++)oe=(oe<<5)-oe+C.charCodeAt(P),oe|=0;else if(ae(C))for(V=C.byteLength/2,P=0;P<V;P++)oe=(oe<<5)-oe+C[P],oe|=0;return oe},B=n.__addimage__.validateStringAsBase64=function(C){(C=C||"").toString().trim();var P=!0;return C.length===0&&(P=!1),C.length%4!=0&&(P=!1),/^[A-Za-z0-9+/]+$/.test(C.substr(0,C.length-2))===!1&&(P=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(C.substr(-2))===!1&&(P=!1),P},re=n.__addimage__.extractImageFromDataUrl=function(C){if(C==null||!(C=C.trim()).startsWith("data:"))return null;var P=C.indexOf(",");return P<0?null:C.substring(0,P).trim().endsWith("base64")?C.substring(P+1):null};n.__addimage__.isArrayBuffer=function(C){return C instanceof ArrayBuffer};var ae=n.__addimage__.isArrayBufferView=function(C){return C instanceof Int8Array||C instanceof Uint8Array||C instanceof Uint8ClampedArray||C instanceof Int16Array||C instanceof Uint16Array||C instanceof Int32Array||C instanceof Uint32Array||C instanceof Float32Array||C instanceof Float64Array},G=n.__addimage__.binaryStringToUint8Array=function(C){for(var P=C.length,V=new Uint8Array(P),oe=0;oe<P;oe++)V[oe]=C.charCodeAt(oe);return V},M=n.__addimage__.arrayBufferToBinaryString=function(C){for(var P="",V=ae(C)?C:new Uint8Array(C),oe=0;oe<V.length;oe+=8192)P+=String.fromCharCode.apply(null,V.subarray(oe,oe+8192));return P};n.addImage=function(){var C,P,V,oe,Ne,ue,pe,de,Se;if(typeof arguments[1]=="number"?(P=t,V=arguments[1],oe=arguments[2],Ne=arguments[3],ue=arguments[4],pe=arguments[5],de=arguments[6],Se=arguments[7]):(P=arguments[1],V=arguments[2],oe=arguments[3],Ne=arguments[4],ue=arguments[5],pe=arguments[6],de=arguments[7],Se=arguments[8]),ur(C=arguments[0])==="object"&&!v(C)&&"imageData"in C){var ze=C;C=ze.imageData,P=ze.format||P||t,V=ze.x||V||0,oe=ze.y||oe||0,Ne=ze.w||ze.width||Ne,ue=ze.h||ze.height||ue,pe=ze.alias||pe,de=ze.compression||de,Se=ze.rotation||ze.angle||Se}var te=this.internal.getFilters();if(de===void 0&&te.indexOf("FlateEncode")!==-1&&(de="SLOW"),isNaN(V)||isNaN(oe))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var q=k.call(this,C,P,pe,de);return j.call(this,V,oe,Ne,ue,q,Se),this};var k=function(C,P,V,oe){var Ne,ue,pe;if(typeof C=="string"&&a(C)===t){C=unescape(C);var de=L(C,!1);(de!==""||(de=n.loadFile(C,!0))!==void 0)&&(C=de)}if(v(C)&&(C=b(C,P)),P=a(C,P),!x(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(((pe=V)==null||pe.length===0)&&(V=(function(Se){return typeof Se=="string"||ae(Se)?O(Se):ae(Se.data)?O(Se.data):null})(C)),(Ne=T.call(this,V))||(C instanceof Uint8Array||P==="RGBA"||(ue=C,C=G(C)),Ne=this["process"+P.toUpperCase()](C,g.call(this),V,(function(Se){return Se&&typeof Se=="string"&&(Se=Se.toUpperCase()),Se in n.image_compression?Se:D.NONE})(oe),ue)),!Ne)throw new Error("An unknown error occurred whilst processing the image.");return Ne},L=n.__addimage__.convertBase64ToBinaryString=function(C,P){P=typeof P!="boolean"||P;var V,oe="";if(typeof C=="string"){var Ne;V=(Ne=re(C))!==null&&Ne!==void 0?Ne:C;try{oe=Q0(V)}catch(ue){if(P)throw B(V)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ue.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return oe};n.getImageProperties=function(C){var P,V,oe="";if(v(C)&&(C=b(C)),typeof C=="string"&&a(C)===t&&((oe=L(C,!1))===""&&(oe=n.loadFile(C)||""),C=oe),V=a(C),!x(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(C instanceof Uint8Array||(C=G(C)),!(P=this["process"+V.toUpperCase()](C)))throw new Error("An unknown error occurred whilst processing the image");return P.fileType=V,P}})(kt.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};kt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,a,o,c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,g=!1,x=0;x<f.length&&!g;x++)switch((r=f[x]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var v=0;v<f.length;v++){r=f[v];var b=this.internal.pdfEscape,T=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(E.objId),D=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+c(r.bounds.x)+" "+u(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y)+"] ")+"/Contents ("+b(S(r.contents))+")",o+=" /Popup "+j.objId+" 0 R",o+=" /P "+h.objId+" 0 R",o+=" /T ("+b(S(D))+") >>",E.content=o;var O=E.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+c(r.bounds.x+30)+" "+u(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w+30)+" "+u(r.bounds.y)+"] ")+" /Parent "+O,r.open&&(o+=" /Open true"),o+=" >>",j.content=o,this.internal.write(E.objId,"0 R",j.objId,"0 R");break;case"freetext":a="/Rect ["+c(r.bounds.x)+" "+u(r.bounds.y)+" "+c(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y+r.bounds.h)+"] ";var B=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+b(T(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+B+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var re=this.annotations._nameMap[r.options.name];r.options.pageNumber=re.page,r.options.top=re.y}else r.options.top||(r.options.top=0);if(a="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+b(T(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;default:var ae=u(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+ae+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,a,o,c){var u=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:h(t),y:f(r),w:h(t+a),h:f(r+o)},options:c,type:"link"})},n.textWithLink=function(t,r,a,o){var c,u,h=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){u=o.maxWidth;var g=this.splitTextToSize(t,u).length;c=Math.ceil(f*g)}else u=h,c=f;return this.text(t,r,a,o),a+=.2*f,o.align==="center"&&(r-=h/2),o.align==="right"&&(r-=h),this.link(r,a-f,u,c,o),h},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(kt.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(E){return e[E.charCodeAt(0)]!==void 0},c=n.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},u=n.__arabicParser__.isArabicEndLetter=function(E){return c(E)&&o(E)&&e[E.charCodeAt(0)].length<=2},h=n.__arabicParser__.isArabicAlfLetter=function(E){return c(E)&&a.indexOf(E.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return c(E)&&o(E)&&e[E.charCodeAt(0)].length>=1};var f=n.__arabicParser__.arabicLetterHasFinalForm=function(E){return c(E)&&o(E)&&e[E.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(E){return c(E)&&o(E)&&e[E.charCodeAt(0)].length>=3};var g=n.__arabicParser__.arabicLetterHasMedialForm=function(E){return c(E)&&o(E)&&e[E.charCodeAt(0)].length==4},x=n.__arabicParser__.resolveLigatures=function(E){var j=0,S=t,D="",O=0;for(j=0;j<E.length;j+=1)S[E.charCodeAt(j)]!==void 0?(O++,typeof(S=S[E.charCodeAt(j)])=="number"&&(D+=String.fromCharCode(S),S=t,O=0),j===E.length-1&&(S=t,D+=E.charAt(j-(O-1)),j-=O-1,O=0)):(S=t,D+=E.charAt(j-O),j-=O,O=0);return D};n.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&r[E.charCodeAt(0)]!==void 0};var v=n.__arabicParser__.getCorrectForm=function(E,j,S){return c(E)?o(E)===!1?-1:!f(E)||!c(j)&&!c(S)||!c(S)&&u(j)||u(E)&&!c(j)||u(E)&&h(j)||u(E)&&u(j)?0:g(E)&&c(j)&&!u(j)&&c(S)&&f(S)?3:u(E)||!c(S)?1:2:-1},b=function(E){var j=0,S=0,D=0,O="",B="",re="",ae=(E=E||"").split("\\s+"),G=[];for(j=0;j<ae.length;j+=1){for(G.push(""),S=0;S<ae[j].length;S+=1)O=ae[j][S],B=ae[j][S-1],re=ae[j][S+1],c(O)?(D=v(O,B,re),G[j]+=D!==-1?String.fromCharCode(e[O.charCodeAt(0)][D]):O):G[j]+=O;G[j]=x(G[j])}return G.join(" ")},T=n.__arabicParser__.processArabic=n.processArabic=function(){var E,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(j)){var D=0;for(S=[],D=0;D<j.length;D+=1)Array.isArray(j[D])?S.push([b(j[D][0]),j[D][1],j[D][2]]):S.push([b(j[D])]);E=S}else E=b(j);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};n.events.push(["preProcessText",T])})(kt.API),kt.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(u){t=u}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(u){r=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(u){a=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(u){o=u}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(u){c=u}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var a;if((t=t||"2d")!=="2d")return null;for(a in r)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=r[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(kt.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(E){h=E}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(E){f=E}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(E){g=E}});var x=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return x},set:function(E){x=E}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(E){v=E}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(E){b=E}});var T=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return T},set:function(E){T=E}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(h){return r.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},n.getTextDimensions=function(h,f){r.call(this);var g=(f=f||{}).fontSize||this.getFontSize(),x=f.font||this.getFont(),v=f.scaleFactor||this.internal.scaleFactor,b=0,T=0,E=0,j=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var S=f.maxWidth;S>0?typeof h=="string"?h=this.splitTextToSize(h,S):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(O,B){return O.concat(j.splitTextToSize(B,S))},[])):h=Array.isArray(h)?h:[h];for(var D=0;D<h.length;D++)b<(E=this.getStringUnitWidth(h[D],{font:x})*g)&&(b=E);return b!==0&&(T=h.length),{w:b/=v,h:Math.max((T*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/v,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=n.cell=function(){var h;h=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var f=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,x=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===h.lineNumber?(h.x=(f.x||0)+(f.width||0),h.y=f.y||0):f.y+f.height+h.height+x.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=x.top,b&&v&&(this.printHeaderRow(h.lineNumber,!0),h.y+=v[0].height)):h.y=f.y+f.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,t===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-g,h.y+g,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+g,{align:"center",baseline:"top",maxWidth:h.width-g-g}):this.text(h.text,h.x+g,h.y+g,{align:"left",baseline:"top",maxWidth:h.width-g-g})),this.internal.__cell__.lastCell=h,this};n.table=function(h,f,g,x,v){if(r.call(this),!g)throw new Error("No data for PDF table.");var b,T,E,j,S=[],D=[],O=[],B={},re={},ae=[],G=[],M=(v=v||{}).autoSize||!1,k=v.printHeaders!==!1,L=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,C=v.margins||Object.assign({width:this.getPageWidth()},e),P=typeof v.padding=="number"?v.padding:3,V=v.headerBackgroundColor||"#c8c8c8",oe=v.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=P,this.internal.__cell__.headerBackgroundColor=V,this.internal.__cell__.headerTextColor=oe,this.setFontSize(L),x==null)D=S=Object.keys(g[0]),O=S.map(function(){return"left"});else if(Array.isArray(x)&&ur(x[0])==="object")for(S=x.map(function(ze){return ze.name}),D=x.map(function(ze){return ze.prompt||ze.name||""}),O=x.map(function(ze){return ze.align||"left"}),b=0;b<x.length;b+=1)re[x[b].name]=.7499990551181103*x[b].width;else Array.isArray(x)&&typeof x[0]=="string"&&(D=S=x,O=S.map(function(){return"left"}));if(M||Array.isArray(x)&&typeof x[0]=="string")for(b=0;b<S.length;b+=1){for(B[j=S[b]]=g.map(function(ze){return ze[j]}),this.setFont(void 0,"bold"),ae.push(this.getTextDimensions(D[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),T=B[j],this.setFont(void 0,"normal"),E=0;E<T.length;E+=1)ae.push(this.getTextDimensions(T[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);re[j]=Math.max.apply(null,ae)+P+P,ae=[]}if(k){var Ne={};for(b=0;b<S.length;b+=1)Ne[S[b]]={},Ne[S[b]].text=D[b],Ne[S[b]].align=O[b];var ue=u.call(this,Ne,re);G=S.map(function(ze){return new o(h,f,re[ze],ue,Ne[ze].text,void 0,Ne[ze].align)}),this.setTableHeaderRow(G),this.printHeaderRow(1,!1)}var pe=x.reduce(function(ze,te){return ze[te.name]=te.align,ze},{});for(b=0;b<g.length;b+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:b,data:g[b]},this);var de=u.call(this,g[b],re);for(E=0;E<S.length;E+=1){var Se=g[b][S[E]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:b,col:E,data:Se},this),c.call(this,new o(h,f,re[S[E]],de,Se,b+2,pe[S[E]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=f,this};var u=function(h,f){var g=this.internal.__cell__.padding,x=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(h).map(function(b){var T=h[b];return this.splitTextToSize(T.hasOwnProperty("text")?T.text:T,f[b]-g-g)},this).map(function(b){return this.getLineHeightFactor()*b.length*x/v+g+g},this).reduce(function(b,T){return Math.max(b,T)},0)};n.setTableHeaderRow=function(h){r.call(this),this.internal.__cell__.tableHeaderRow=h},n.printHeaderRow=function(h,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var x=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(x[0],x[1],x[2],x[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){g=this.internal.__cell__.tableHeaderRow[b].clone(),f&&(g.y=this.internal.__cell__.margins.top||0,v.push(g)),g.lineNumber=h;var T=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,g),this.setTextColor(T)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),t=!1}})(kt.API);var IC={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kC=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],H2=CC(kC),RC=[100,200,300,400,500,600,700,800,900],XG=CC(RC);function L1(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return IC[o=o||"normal"]?o:"normal"})(n.style),r=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),a=(function(o){return typeof H2[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:a,src:n.src||[],ref:n.ref||{name:e,style:[a,t,r].join(" ")}}}function F6(n,e,t,r){var a;for(a=t;a>=0&&a<e.length;a+=r)if(n[e[a]])return n[e[a]];for(a=t;a>=0&&a<e.length;a-=r)if(n[e[a]])return n[e[a]]}var QG={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},U6={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function V6(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function B6(n){return n.trimLeft()}function JG(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function ZG(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var k0,z6,q6,mf,R0,G6,H6,$6,D1=["times"];function W6(n,e,t,r,a){var o=4,c=Y6;switch(a){case kt.API.image_compression.FAST:o=1,c=K6;break;case kt.API.image_compression.MEDIUM:o=6,c=X6;break;case kt.API.image_compression.SLOW:o=9,c=Q6}n=(function(h,f,g,x){for(var v,b=h.length/f,T=new Uint8Array(h.length+b),E=[eH,K6,Y6,X6,Q6],j=0;j<b;j+=1){var S=j*f,D=h.subarray(S,S+f);if(x)T.set(x(D,g,v),S+j);else{for(var O=E.length,B=[],re=0;re<O;re+=1)B[re]=E[re](D,g,v);var ae=nH(B.concat());T.set(B[ae],S+j)}v=D}return T})(n,e,Math.ceil(t*r/8),c);var u=F2(n,{level:o});return kt.API.__addimage__.arrayBufferToBinaryString(u)}function eH(n){var e=Array.apply([],n);return e.unshift(0),e}function K6(n,e){var t=n.length,r=[];r[0]=1;for(var a=0;a<t;a+=1){var o=n[a-e]||0;r[a+1]=n[a]-o+256&255}return r}function Y6(n,e,t){var r=n.length,a=[];a[0]=2;for(var o=0;o<r;o+=1){var c=t&&t[o]||0;a[o+1]=n[o]-c+256&255}return a}function X6(n,e,t){var r=n.length,a=[];a[0]=3;for(var o=0;o<r;o+=1){var c=n[o-e]||0,u=t&&t[o]||0;a[o+1]=n[o]+256-(c+u>>>1)&255}return a}function Q6(n,e,t){var r=n.length,a=[];a[0]=4;for(var o=0;o<r;o+=1){var c=tH(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);a[o+1]=n[o]-c+256&255}return a}function tH(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),a=Math.abs(n-t),o=Math.abs(n+e-t-t);return r<=a&&r<=o?n:a<=o?e:t}function nH(n){var e=n.map(function(t){return t.reduce(function(r,a){return r+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function M1(n,e,t){var r=e*t,a=Math.floor(r/8),o=16-(r-8*a+t),c=(1<<t)-1;return PC(n,a)>>o&c}function J6(n,e,t,r){var a=t*r,o=Math.floor(a/8),c=16-(a-8*o+r),u=(1<<r)-1,h=(e&u)<<c;(function(f,g,x){if(g+1<f.byteLength)f.setUint16(g,x,!1);else{var v=x>>8&255;f.setUint8(g,v)}})(n,o,PC(n,o)&~(u<<c)&65535|h)}function PC(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function rH(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,a=n[e++],o=a>>7,c=1<<1+(7&a);n[e++],n[e++];var u=null,h=null;o&&(u=e,h=c,e+=3*c);var f=!0,g=[],x=0,v=null,b=0,T=null;for(this.width=t,this.height=r;f&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,T=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((C=n[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var E=n[e++];x=n[e++]|n[e++]<<8,v=n[e++],1&E||(v=null),b=E>>2&7,e++;break;case 254:for(;;){if(!((C=n[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var j=n[e++]|n[e++]<<8,S=n[e++]|n[e++]<<8,D=n[e++]|n[e++]<<8,O=n[e++]|n[e++]<<8,B=n[e++],re=B>>6&1,ae=1<<1+(7&B),G=u,M=h,k=!1;B>>7&&(k=!0,G=e,M=ae,e+=3*ae);var L=e;for(e++;;){var C;if(!((C=n[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}g.push({x:j,y:S,width:D,height:O,has_local_palette:k,palette_offset:G,palette_size:M,data_offset:L,data_length:e-L,transparent_index:v,interlaced:!!re,delay:x,disposal:b});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return T},this.frameInfo=function(P){if(P<0||P>=g.length)throw new Error("Frame index out of range.");return g[P]},this.decodeAndBlitFrameBGRA=function(P,V){var oe=this.frameInfo(P),Ne=oe.width*oe.height,ue=new Uint8Array(Ne);Z6(n,oe.data_offset,ue,Ne);var pe=oe.palette_offset,de=oe.transparent_index;de===null&&(de=256);var Se=oe.width,ze=t-Se,te=Se,q=4*(oe.y*t+oe.x),Q=4*((oe.y+oe.height)*t+oe.x),ne=q,he=4*ze;oe.interlaced===!0&&(he+=4*t*7);for(var me=8,be=0,Le=ue.length;be<Le;++be){var Re=ue[be];if(te===0&&(te=Se,(ne+=he)>=Q&&(he=4*ze+4*t*(me-1),ne=q+(Se+ze)*(me<<1),me>>=1)),Re===de)ne+=4;else{var qe=n[pe+3*Re],Je=n[pe+3*Re+1],it=n[pe+3*Re+2];V[ne++]=it,V[ne++]=Je,V[ne++]=qe,V[ne++]=255}--te}},this.decodeAndBlitFrameRGBA=function(P,V){var oe=this.frameInfo(P),Ne=oe.width*oe.height,ue=new Uint8Array(Ne);Z6(n,oe.data_offset,ue,Ne);var pe=oe.palette_offset,de=oe.transparent_index;de===null&&(de=256);var Se=oe.width,ze=t-Se,te=Se,q=4*(oe.y*t+oe.x),Q=4*((oe.y+oe.height)*t+oe.x),ne=q,he=4*ze;oe.interlaced===!0&&(he+=4*t*7);for(var me=8,be=0,Le=ue.length;be<Le;++be){var Re=ue[be];if(te===0&&(te=Se,(ne+=he)>=Q&&(he=4*ze+4*t*(me-1),ne=q+(Se+ze)*(me<<1),me>>=1)),Re===de)ne+=4;else{var qe=n[pe+3*Re],Je=n[pe+3*Re+1],it=n[pe+3*Re+2];V[ne++]=qe,V[ne++]=Je,V[ne++]=it,V[ne++]=255}--te}}}function Z6(n,e,t,r){for(var a=n[e++],o=1<<a,c=o+1,u=c+1,h=a+1,f=(1<<h)-1,g=0,x=0,v=0,b=n[e++],T=new Int32Array(4096),E=null;;){for(;g<16&&b!==0;)x|=n[e++]<<g,g+=8,b===1?b=n[e++]:--b;if(g<h)break;var j=x&f;if(x>>=h,g-=h,j!==o){if(j===c)break;for(var S=j<u?j:E,D=0,O=S;O>o;)O=T[O]>>8,++D;var B=O;if(v+D+(S!==j?1:0)>r)return void Ar.log("Warning, gif stream longer than expected.");t[v++]=B;var re=v+=D;for(S!==j&&(t[v++]=B),O=S;D--;)O=T[O],t[--re]=255&O,O>>=8;E!==null&&u<4096&&(T[u++]=E<<8|B,u>=f+1&&h<12&&(++h,f=f<<1|1)),E=j}else u=c+1,f=(1<<(h=a+1))-1,E=null}return v!==r&&Ar.log("Warning, gif stream shorter than expected."),t}function O1(n){var e,t,r,a,o,c=Math.floor,u=new Array(64),h=new Array(64),f=new Array(64),g=new Array(64),x=new Array(65535),v=new Array(65535),b=new Array(64),T=new Array(64),E=[],j=0,S=7,D=new Array(64),O=new Array(64),B=new Array(64),re=new Array(256),ae=new Array(2048),G=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],oe=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ne=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ue(q,Q){for(var ne=0,he=0,me=new Array,be=1;be<=16;be++){for(var Le=1;Le<=q[be];Le++)me[Q[he]]=[],me[Q[he]][0]=ne,me[Q[he]][1]=be,he++,ne++;ne*=2}return me}function pe(q){for(var Q=q[0],ne=q[1]-1;ne>=0;)Q&1<<ne&&(j|=1<<S),ne--,--S<0&&(j==255?(de(255),de(0)):de(j),S=7,j=0)}function de(q){E.push(q)}function Se(q){de(q>>8&255),de(255&q)}function ze(q,Q,ne,he,me){for(var be,Le=me[0],Re=me[240],qe=(function(He,ct){var lt,Mt,Et,sn,dn,Qt,pn,on,wt,en,Nt=0;for(wt=0;wt<8;++wt){lt=He[Nt],Mt=He[Nt+1],Et=He[Nt+2],sn=He[Nt+3],dn=He[Nt+4],Qt=He[Nt+5],pn=He[Nt+6];var Cr=lt+(on=He[Nt+7]),ln=lt-on,Lt=Mt+pn,Wt=Mt-pn,an=Et+Qt,Tt=Et-Qt,zn=sn+dn,zt=sn-dn,qt=Cr+zn,Hn=Cr-zn,At=Lt+an,jt=Lt-an;He[Nt]=qt+At,He[Nt+4]=qt-At;var xn=.707106781*(jt+Hn);He[Nt+2]=Hn+xn,He[Nt+6]=Hn-xn;var qs=.382683433*((qt=zt+Tt)-(jt=Wt+ln)),As=.5411961*qt+qs,yi=1.306562965*jt+qs,gs=.707106781*(At=Tt+Wt),Ct=ln+gs,Wi=ln-gs;He[Nt+5]=Wi+As,He[Nt+3]=Wi-As,He[Nt+1]=Ct+yi,He[Nt+7]=Ct-yi,Nt+=8}for(Nt=0,wt=0;wt<8;++wt){lt=He[Nt],Mt=He[Nt+8],Et=He[Nt+16],sn=He[Nt+24],dn=He[Nt+32],Qt=He[Nt+40],pn=He[Nt+48];var Na=lt+(on=He[Nt+56]),ia=lt-on,oa=Mt+pn,nr=Mt-pn,mr=Et+Qt,ns=Et-Qt,Gs=sn+dn,Ts=sn-dn,$n=Na+Gs,ar=Na-Gs,rs=oa+mr,la=oa-mr;He[Nt]=$n+rs,He[Nt+32]=$n-rs;var Fa=.707106781*(la+ar);He[Nt+16]=ar+Fa,He[Nt+48]=ar-Fa;var yo=.382683433*(($n=Ts+ns)-(la=nr+ia)),ri=.5411961*$n+yo,ca=1.306562965*la+yo,Ki=.707106781*(rs=ns+nr),ja=ia+Ki,Hs=ia-Ki;He[Nt+40]=Hs+ri,He[Nt+24]=Hs-ri,He[Nt+8]=ja+ca,He[Nt+56]=ja-ca,Nt++}for(wt=0;wt<64;++wt)en=He[wt]*ct[wt],b[wt]=en>0?en+.5|0:en-.5|0;return b})(q,Q),Je=0;Je<64;++Je)T[G[Je]]=qe[Je];var it=T[0]-ne;ne=T[0],it==0?pe(he[0]):(pe(he[v[be=32767+it]]),pe(x[be]));for(var at=63;at>0&&T[at]==0;)at--;if(at==0)return pe(Le),ne;for(var ft,se=1;se<=at;){for(var st=se;T[se]==0&&se<=at;)++se;var rn=se-st;if(rn>=16){ft=rn>>4;for(var Pt=1;Pt<=ft;++Pt)pe(Re);rn&=15}be=32767+T[se],pe(me[(rn<<4)+v[be]]),pe(x[be]),se++}return at!=63&&pe(Le),ne}function te(q){q=Math.min(Math.max(q,1),100),o!=q&&((function(Q){for(var ne=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],he=0;he<64;he++){var me=c((ne[he]*Q+50)/100);me=Math.min(Math.max(me,1),255),u[G[he]]=me}for(var be=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Le=0;Le<64;Le++){var Re=c((be[Le]*Q+50)/100);Re=Math.min(Math.max(Re,1),255),h[G[Le]]=Re}for(var qe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Je=0,it=0;it<8;it++)for(var at=0;at<8;at++)f[Je]=1/(u[G[Je]]*qe[it]*qe[at]*8),g[Je]=1/(h[G[Je]]*qe[it]*qe[at]*8),Je++})(q<50?Math.floor(5e3/q):Math.floor(200-2*q)),o=q)}this.encode=function(q,Q){Q&&te(Q),E=new Array,j=0,S=7,Se(65496),Se(65504),Se(16),de(74),de(70),de(73),de(70),de(0),de(1),de(1),de(0),Se(1),Se(1),de(0),de(0),(function(){Se(65499),Se(132),de(0);for(var Mt=0;Mt<64;Mt++)de(u[Mt]);de(1);for(var Et=0;Et<64;Et++)de(h[Et])})(),(function(Mt,Et){Se(65472),Se(17),de(8),Se(Et),Se(Mt),de(3),de(1),de(17),de(0),de(2),de(17),de(1),de(3),de(17),de(1)})(q.width,q.height),(function(){Se(65476),Se(418),de(0);for(var Mt=0;Mt<16;Mt++)de(M[Mt+1]);for(var Et=0;Et<=11;Et++)de(k[Et]);de(16);for(var sn=0;sn<16;sn++)de(L[sn+1]);for(var dn=0;dn<=161;dn++)de(C[dn]);de(1);for(var Qt=0;Qt<16;Qt++)de(P[Qt+1]);for(var pn=0;pn<=11;pn++)de(V[pn]);de(17);for(var on=0;on<16;on++)de(oe[on+1]);for(var wt=0;wt<=161;wt++)de(Ne[wt])})(),Se(65498),Se(12),de(3),de(1),de(0),de(2),de(17),de(3),de(17),de(0),de(63),de(0);var ne=0,he=0,me=0;j=0,S=7,this.encode.displayName="_encode_";for(var be,Le,Re,qe,Je,it,at,ft,se,st=q.data,rn=q.width,Pt=q.height,He=4*rn,ct=0;ct<Pt;){for(be=0;be<He;){for(Je=He*ct+be,at=-1,ft=0,se=0;se<64;se++)it=Je+(ft=se>>3)*He+(at=4*(7&se)),ct+ft>=Pt&&(it-=He*(ct+1+ft-Pt)),be+at>=He&&(it-=be+at-He+4),Le=st[it++],Re=st[it++],qe=st[it++],D[se]=(ae[Le]+ae[Re+256|0]+ae[qe+512|0]>>16)-128,O[se]=(ae[Le+768|0]+ae[Re+1024|0]+ae[qe+1280|0]>>16)-128,B[se]=(ae[Le+1280|0]+ae[Re+1536|0]+ae[qe+1792|0]>>16)-128;ne=ze(D,f,ne,e,r),he=ze(O,g,he,t,a),me=ze(B,g,me,t,a),be+=32}ct+=8}if(S>=0){var lt=[];lt[1]=S+1,lt[0]=(1<<S+1)-1,pe(lt)}return Se(65497),new Uint8Array(E)},n=n||50,(function(){for(var q=String.fromCharCode,Q=0;Q<256;Q++)re[Q]=q(Q)})(),e=ue(M,k),t=ue(P,V),r=ue(L,C),a=ue(oe,Ne),(function(){for(var q=1,Q=2,ne=1;ne<=15;ne++){for(var he=q;he<Q;he++)v[32767+he]=ne,x[32767+he]=[],x[32767+he][1]=ne,x[32767+he][0]=he;for(var me=-(Q-1);me<=-q;me++)v[32767+me]=ne,x[32767+me]=[],x[32767+me][1]=ne,x[32767+me][0]=Q-1+me;q<<=1,Q<<=1}})(),(function(){for(var q=0;q<256;q++)ae[q]=19595*q,ae[q+256|0]=38470*q,ae[q+512|0]=7471*q+32768,ae[q+768|0]=-11059*q,ae[q+1024|0]=-21709*q,ae[q+1280|0]=32768*q+8421375,ae[q+1536|0]=-27439*q,ae[q+1792|0]=-5329*q})(),te(n)}function hl(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function e3(n){function e(k){if(!k)throw Error("assert :P")}function t(k,L,C){for(var P=0;4>P;P++)if(k[L+P]!=C.charCodeAt(P))return!0;return!1}function r(k,L,C,P,V){for(var oe=0;oe<V;oe++)k[L+oe]=C[P+oe]}function a(k,L,C,P){for(var V=0;V<P;V++)k[L+V]=C}function o(k){return new Int32Array(k)}function c(k,L){for(var C=[],P=0;P<k;P++)C.push(new L);return C}function u(k,L){var C=[];return(function P(V,oe,Ne){for(var ue=Ne[oe],pe=0;pe<ue&&(V.push(Ne.length>oe+1?[]:new L),!(Ne.length<oe+1));pe++)P(V[pe],oe+1,Ne)})(C,0,k),C}var h=function(){var k=this;function L(p,N){for(var I=1<<N-1>>>0;p&I;)I>>>=1;return I?(p&I-1)+I:p}function C(p,N,I,F,$){e(!(F%I));do p[N+(F-=I)]=$;while(0<F)}function P(p,N,I,F,$){if(e(2328>=$),512>=$)var K=o(512);else if((K=o($))==null)return 0;return(function(Y,J,ee,ce,xe,Ce){var ie,ve,Ee=J,Fe=1<<ee,Ae=o(16),Oe=o(16);for(e(xe!=0),e(ce!=null),e(Y!=null),e(0<ee),ve=0;ve<xe;++ve){if(15<ce[ve])return 0;++Ae[ce[ve]]}if(Ae[0]==xe)return 0;for(Oe[1]=0,ie=1;15>ie;++ie){if(Ae[ie]>1<<ie)return 0;Oe[ie+1]=Oe[ie]+Ae[ie]}for(ve=0;ve<xe;++ve)ie=ce[ve],0<ce[ve]&&(Ce[Oe[ie]++]=ve);if(Oe[15]==1)return(ce=new V).g=0,ce.value=Ce[0],C(Y,Ee,1,Fe,ce),Fe;var Ge,Qe=-1,Ye=Fe-1,yt=0,ut=1,tn=1,mt=1<<ee;for(ve=0,ie=1,xe=2;ie<=ee;++ie,xe<<=1){if(ut+=tn<<=1,0>(tn-=Ae[ie]))return 0;for(;0<Ae[ie];--Ae[ie])(ce=new V).g=ie,ce.value=Ce[ve++],C(Y,Ee+yt,xe,mt,ce),yt=L(yt,ie)}for(ie=ee+1,xe=2;15>=ie;++ie,xe<<=1){if(ut+=tn<<=1,0>(tn-=Ae[ie]))return 0;for(;0<Ae[ie];--Ae[ie]){if(ce=new V,(yt&Ye)!=Qe){for(Ee+=mt,Ge=1<<(Qe=ie)-ee;15>Qe&&!(0>=(Ge-=Ae[Qe]));)++Qe,Ge<<=1;Fe+=mt=1<<(Ge=Qe-ee),Y[J+(Qe=yt&Ye)].g=Ge+ee,Y[J+Qe].value=Ee-J-Qe}ce.g=ie-ee,ce.value=Ce[ve++],C(Y,Ee+(yt>>ee),xe,mt,ce),yt=L(yt,ie)}}return ut!=2*Oe[15]-1?0:Fe})(p,N,I,F,$,K)}function V(){this.value=this.g=0}function oe(){this.value=this.g=0}function Ne(){this.G=c(5,V),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(kl,oe)}function ue(p,N,I,F){e(p!=null),e(N!=null),e(2147483648>F),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=N,p.pa=I,p.Jd=N,p.Yc=I+F,p.Zc=4<=F?I+F-4+1:I,Le(p)}function pe(p,N){for(var I=0;0<N--;)I|=qe(p,128)<<N;return I}function de(p,N){var I=pe(p,N);return Re(p)?-I:I}function Se(p,N,I,F){var $,K=0;for(e(p!=null),e(N!=null),e(4294967288>F),p.Sb=F,p.Ra=0,p.u=0,p.h=0,4<F&&(F=4),$=0;$<F;++$)K+=N[I+$]<<8*$;p.Ra=K,p.bb=F,p.oa=N,p.pa=I}function ze(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<Eo-8>>>0,++p.bb,p.u-=8;he(p)&&(p.h=1,p.u=0)}function te(p,N){if(e(0<=N),!p.h&&N<=ka){var I=ne(p)&qa[N];return p.u+=N,ze(p),I}return p.h=1,p.u=0}function q(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ne(p){return p.Ra>>>(p.u&Eo-1)>>>0}function he(p){return e(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>Eo}function me(p,N){p.u=N,p.h=he(p)}function be(p){p.u>=Ao&&(e(p.u>=Ao),ze(p))}function Le(p){e(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(e(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function Re(p){return pe(p,1)}function qe(p,N){var I=p.Ca;0>p.b&&Le(p);var F=p.b,$=I*N>>>8,K=(p.I>>>F>$)+0;for(K?(I-=$,p.I-=$+1<<F>>>0):I=$+1,F=I,$=0;256<=F;)$+=8,F>>=8;return F=7^$+Zo[F],p.b-=F,p.Ca=(I<<F)-1,K}function Je(p,N,I){p[N+0]=I>>24&255,p[N+1]=I>>16&255,p[N+2]=I>>8&255,p[N+3]=255&I}function it(p,N){return p[N+0]|p[N+1]<<8}function at(p,N){return it(p,N)|p[N+2]<<16}function ft(p,N){return it(p,N)|it(p,N+2)<<16}function se(p,N){var I=1<<N;return e(p!=null),e(0<N),p.X=o(I),p.X==null?0:(p.Mb=32-N,p.Xa=N,1)}function st(p,N){e(p!=null),e(N!=null),e(p.Xa==N.Xa),r(N.X,0,p.X,0,1<<N.Xa)}function rn(){this.X=[],this.Xa=this.Mb=0}function Pt(p,N,I,F){e(I!=null),e(F!=null);var $=I[0],K=F[0];return $==0&&($=(p*K+N/2)/N),K==0&&(K=(N*$+p/2)/p),0>=$||0>=K?0:(I[0]=$,F[0]=K,1)}function He(p,N){return p+(1<<N)-1>>>N}function ct(p,N){return((4278255360&p)+(4278255360&N)>>>0&4278255360)+((16711935&p)+(16711935&N)>>>0&16711935)>>>0}function lt(p,N){k[N]=function(I,F,$,K,Y,J,ee){var ce;for(ce=0;ce<Y;++ce){var xe=k[p](J[ee+ce-1],$,K+ce);J[ee+ce]=ct(I[F+ce],xe)}}}function Mt(){this.ud=this.hd=this.jd=0}function Et(p,N){return((4278124286&(p^N))>>>1)+(p&N)>>>0}function sn(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function dn(p,N){return sn(p+(p-N+.5>>1))}function Qt(p,N,I){return Math.abs(N-I)-Math.abs(p-I)}function pn(p,N,I,F,$,K,Y){for(F=K[Y-1],I=0;I<$;++I)K[Y+I]=F=ct(p[N+I],F)}function on(p,N,I,F,$){var K;for(K=0;K<I;++K){var Y=p[N+K],J=Y>>8&255,ee=16711935&(ee=(ee=16711935&Y)+((J<<16)+J));F[$+K]=(4278255360&Y)+ee>>>0}}function wt(p,N){N.jd=255&p,N.hd=p>>8&255,N.ud=p>>16&255}function en(p,N,I,F,$,K){var Y;for(Y=0;Y<F;++Y){var J=N[I+Y],ee=J>>>8,ce=J,xe=255&(xe=(xe=J>>>16)+((p.jd<<24>>24)*(ee<<24>>24)>>>5));ce=255&(ce=(ce+=(p.hd<<24>>24)*(ee<<24>>24)>>>5)+((p.ud<<24>>24)*(xe<<24>>24)>>>5)),$[K+Y]=(4278255360&J)+(xe<<16)+ce}}function Nt(p,N,I,F,$){k[N]=function(K,Y,J,ee,ce,xe,Ce,ie,ve){for(ee=Ce;ee<ie;++ee)for(Ce=0;Ce<ve;++Ce)ce[xe++]=$(J[F(K[Y++])])},k[p]=function(K,Y,J,ee,ce,xe,Ce){var ie=8>>K.b,ve=K.Ea,Ee=K.K[0],Fe=K.w;if(8>ie)for(K=(1<<K.b)-1,Fe=(1<<ie)-1;Y<J;++Y){var Ae,Oe=0;for(Ae=0;Ae<ve;++Ae)Ae&K||(Oe=F(ee[ce++])),xe[Ce++]=$(Ee[Oe&Fe]),Oe>>=ie}else k["VP8LMapColor"+I](ee,ce,Ee,Fe,xe,Ce,Y,J,ve)}}function Cr(p,N,I,F,$){for(I=N+I;N<I;){var K=p[N++];F[$++]=K>>16&255,F[$++]=K>>8&255,F[$++]=255&K}}function ln(p,N,I,F,$){for(I=N+I;N<I;){var K=p[N++];F[$++]=K>>16&255,F[$++]=K>>8&255,F[$++]=255&K,F[$++]=K>>24&255}}function Lt(p,N,I,F,$){for(I=N+I;N<I;){var K=(Y=p[N++])>>16&240|Y>>12&15,Y=240&Y|Y>>28&15;F[$++]=K,F[$++]=Y}}function Wt(p,N,I,F,$){for(I=N+I;N<I;){var K=(Y=p[N++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;F[$++]=K,F[$++]=Y}}function an(p,N,I,F,$){for(I=N+I;N<I;){var K=p[N++];F[$++]=255&K,F[$++]=K>>8&255,F[$++]=K>>16&255}}function Tt(p,N,I,F,$,K){if(K==0)for(I=N+I;N<I;)Je(F,((K=p[N++])[0]>>24|K[1]>>8&65280|K[2]<<8&16711680|K[3]<<24)>>>0),$+=32;else r(F,$,p,N,I)}function zn(p,N){k[N][0]=k[p+"0"],k[N][1]=k[p+"1"],k[N][2]=k[p+"2"],k[N][3]=k[p+"3"],k[N][4]=k[p+"4"],k[N][5]=k[p+"5"],k[N][6]=k[p+"6"],k[N][7]=k[p+"7"],k[N][8]=k[p+"8"],k[N][9]=k[p+"9"],k[N][10]=k[p+"10"],k[N][11]=k[p+"11"],k[N][12]=k[p+"12"],k[N][13]=k[p+"13"],k[N][14]=k[p+"0"],k[N][15]=k[p+"0"]}function zt(p){return p==Sd||p==Ah||p==mu||p==Th}function qt(){this.eb=[],this.size=this.A=this.fb=0}function Hn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function At(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new qt,this.f.kb=new Hn,this.sd=null}function jt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function xn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function qs(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function As(p,N){var I=p.T,F=N.ba.f.RGBA,$=F.eb,K=F.fb+p.ka*F.A,Y=Js[N.ba.S],J=p.y,ee=p.O,ce=p.f,xe=p.N,Ce=p.ea,ie=p.W,ve=N.cc,Ee=N.dc,Fe=N.Mc,Ae=N.Nc,Oe=p.ka,Ge=p.ka+p.T,Qe=p.U,Ye=Qe+1>>1;for(Oe==0?Y(J,ee,null,null,ce,xe,Ce,ie,ce,xe,Ce,ie,$,K,null,null,Qe):(Y(N.ec,N.fc,J,ee,ve,Ee,Fe,Ae,ce,xe,Ce,ie,$,K-F.A,$,K,Qe),++I);Oe+2<Ge;Oe+=2)ve=ce,Ee=xe,Fe=Ce,Ae=ie,xe+=p.Rc,ie+=p.Rc,K+=2*F.A,Y(J,(ee+=2*p.fa)-p.fa,J,ee,ve,Ee,Fe,Ae,ce,xe,Ce,ie,$,K-F.A,$,K,Qe);return ee+=p.fa,p.j+Ge<p.o?(r(N.ec,N.fc,J,ee,Qe),r(N.cc,N.dc,ce,xe,Ye),r(N.Mc,N.Nc,Ce,ie,Ye),I--):1&Ge||Y(J,ee,null,null,ce,xe,Ce,ie,ce,xe,Ce,ie,$,K+F.A,null,null,Qe),I}function yi(p,N,I){var F=p.F,$=[p.J];if(F!=null){var K=p.U,Y=N.ba.S,J=Y==_d||Y==mu;N=N.ba.f.RGBA;var ee=[0],ce=p.ka;ee[0]=p.T,p.Kb&&(ce==0?--ee[0]:(--ce,$[0]-=p.width),p.j+p.ka+p.T==p.o&&(ee[0]=p.o-p.j-ce));var xe=N.eb;ce=N.fb+ce*N.A,p=vd(F,$[0],p.width,K,ee,xe,ce+(J?0:3),N.A),e(I==ee),p&&zt(Y)&&bc(xe,ce,J,K,ee,N.A)}return 0}function gs(p){var N=p.ma,I=N.ba.S,F=11>I,$=I==ga||I==Ei||I==_d||I==fu||I==12||zt(I);if(N.memory=null,N.Ib=null,N.Jb=null,N.Nd=null,!Jo(N.Oa,p,$?11:12))return 0;if($&&zt(I)&&Zt(),p.da)alert("todo:use_scaling");else{if(F){if(N.Ib=qs,p.Kb){if(I=p.U+1>>1,N.memory=o(p.U+2*I),N.memory==null)return 0;N.ec=N.memory,N.fc=0,N.cc=N.ec,N.dc=N.fc+p.U,N.Mc=N.cc,N.Nc=N.dc+I,N.Ib=As,Zt()}}else alert("todo:EmitYUV");$&&(N.Jb=yi,F&&Pe())}if(F&&!Fl){for(p=0;256>p;++p)Zs[p]=89858*(p-128)+xu>>Ri,Py[p]=-22014*(p-128)+xu,Ep[p]=-45773*(p-128),Ph[p]=113618*(p-128)+xu>>Ri;for(p=jc;p<Ol;++p)N=76283*(p-16)+xu>>Ri,Ly[p-jc]=Sa(N,255),Dy[p-jc]=Sa(N+8>>4,15);Fl=1}return 1}function Ct(p){var N=p.ma,I=p.U,F=p.T;return e(!(1&p.ka)),0>=I||0>=F?0:(I=N.Ib(p,N),N.Jb!=null&&N.Jb(p,N,I),N.Dc+=I,1)}function Wi(p){p.ma.memory=null}function Na(p,N,I,F){return te(p,8)!=47?0:(N[0]=te(p,14)+1,I[0]=te(p,14)+1,F[0]=te(p,1),te(p,3)!=0?0:!p.h)}function ia(p,N){if(4>p)return p+1;var I=p-2>>1;return(2+(1&p)<<I)+te(N,I)+1}function oa(p,N){return 120<N?N-120:1<=(I=((I=Ti[N-1])>>4)*p+(8-(15&I)))?I:1;var I}function nr(p,N,I){var F=ne(I),$=p[N+=255&F].g-8;return 0<$&&(me(I,I.u+8),F=ne(I),N+=p[N].value,N+=F&(1<<$)-1),me(I,I.u+p[N].g),p[N].value}function mr(p,N,I){return I.g+=p.g,I.value+=p.value<<N>>>0,e(8>=I.g),p.g}function ns(p,N,I){var F=p.xc;return e((N=F==0?0:p.vc[p.md*(I>>F)+(N>>F)])<p.Wb),p.Ya[N]}function Gs(p,N,I,F){var $=p.ab,K=p.c*N,Y=p.C;N=Y+N;var J=I,ee=F;for(F=p.Ta,I=p.Ua;0<$--;){var ce=p.gc[$],xe=Y,Ce=N,ie=J,ve=ee,Ee=(ee=F,J=I,ce.Ea);switch(e(xe<Ce),e(Ce<=ce.nc),ce.hc){case 2:Kr(ie,ve,(Ce-xe)*Ee,ee,J);break;case 0:var Fe=xe,Ae=Ce,Oe=ee,Ge=J,Qe=(mt=ce).Ea;Fe==0&&(cu(ie,ve,null,null,1,Oe,Ge),pn(ie,ve+1,0,0,Qe-1,Oe,Ge+1),ve+=Qe,Ge+=Qe,++Fe);for(var Ye=1<<mt.b,yt=Ye-1,ut=He(Qe,mt.b),tn=mt.K,mt=mt.w+(Fe>>mt.b)*ut;Fe<Ae;){var An=tn,Sr=mt,hn=1;for(uu(ie,ve,Oe,Ge-Qe,1,Oe,Ge);hn<Qe;){var dt=(hn&~yt)+Ye;dt>Qe&&(dt=Qe),(0,el[An[Sr++]>>8&15])(ie,ve+ +hn,Oe,Ge+hn-Qe,dt-hn,Oe,Ge+hn),hn=dt}ve+=Qe,Ge+=Qe,++Fe&yt||(mt+=ut)}Ce!=ce.nc&&r(ee,J-Ee,ee,J+(Ce-xe-1)*Ee,Ee);break;case 1:for(Ee=ie,Ae=ve,Qe=(ie=ce.Ea)-(Ge=ie&~(Oe=(ve=1<<ce.b)-1)),Fe=He(ie,ce.b),Ye=ce.K,ce=ce.w+(xe>>ce.b)*Fe;xe<Ce;){for(yt=Ye,ut=ce,tn=new Mt,mt=Ae+Ge,An=Ae+ie;Ae<mt;)wt(yt[ut++],tn),du(tn,Ee,Ae,ve,ee,J),Ae+=ve,J+=ve;Ae<An&&(wt(yt[ut++],tn),du(tn,Ee,Ae,Qe,ee,J),Ae+=Qe,J+=Qe),++xe&Oe||(ce+=Fe)}break;case 3:if(ie==ee&&ve==J&&0<ce.b){for(Ae=ee,ie=Ee=J+(Ce-xe)*Ee-(Ge=(Ce-xe)*He(ce.Ea,ce.b)),ve=ee,Oe=J,Fe=[],Ge=(Qe=Ge)-1;0<=Ge;--Ge)Fe[Ge]=ve[Oe+Ge];for(Ge=Qe-1;0<=Ge;--Ge)Ae[ie+Ge]=Fe[Ge];Nh(ce,xe,Ce,ee,Ee,ee,J)}else Nh(ce,xe,Ce,ie,ve,ee,J)}J=F,ee=I}ee!=I&&r(F,I,J,ee,K)}function Ts(p,N){var I=p.V,F=p.Ba+p.c*p.C,$=N-p.C;if(e(N<=p.l.o),e(16>=$),0<$){var K=p.l,Y=p.Ta,J=p.Ua,ee=K.width;if(Gs(p,$,I,F),$=J=[J],e((I=p.C)<(F=N)),e(K.v<K.va),F>K.o&&(F=K.o),I<K.j){var ce=K.j-I;I=K.j,$[0]+=ce*ee}if(I>=F?I=0:($[0]+=4*K.v,K.ka=I-K.j,K.U=K.va-K.v,K.T=F-I,I=1),I){if(J=J[0],11>(I=p.ca).S){var xe=I.f.RGBA,Ce=(F=I.S,$=K.U,K=K.T,ce=xe.eb,xe.A),ie=K;for(xe=xe.fb+p.Ma*xe.A;0<ie--;){var ve=Y,Ee=J,Fe=$,Ae=ce,Oe=xe;switch(F){case Sh:hu(ve,Ee,Fe,Ae,Oe);break;case ga:tl(ve,Ee,Fe,Ae,Oe);break;case Sd:tl(ve,Ee,Fe,Ae,Oe),bc(Ae,Oe,0,Fe,1,0);break;case Eh:xc(ve,Ee,Fe,Ae,Oe);break;case Ei:Tt(ve,Ee,Fe,Ae,Oe,1);break;case Ah:Tt(ve,Ee,Fe,Ae,Oe,1),bc(Ae,Oe,0,Fe,1,0);break;case _d:Tt(ve,Ee,Fe,Ae,Oe,0);break;case mu:Tt(ve,Ee,Fe,Ae,Oe,0),bc(Ae,Oe,1,Fe,1,0);break;case fu:nl(ve,Ee,Fe,Ae,Oe);break;case Th:nl(ve,Ee,Fe,Ae,Oe),Si(Ae,Oe,Fe,1,0);break;case Rl:Io(ve,Ee,Fe,Ae,Oe);break;default:e(0)}J+=ee,xe+=Ce}p.Ma+=K}else alert("todo:EmitRescaledRowsYUVA");e(p.Ma<=I.height)}}p.C=N,e(p.C<=p.i)}function $n(p){var N;if(0<p.ua)return 0;for(N=0;N<p.Wb;++N){var I=p.Ya[N].G,F=p.Ya[N].H;if(0<I[1][F[1]+0].g||0<I[2][F[2]+0].g||0<I[3][F[3]+0].g)return 0}return 1}function ar(p,N,I,F,$,K){if(p.Z!=0){var Y=p.qd,J=p.rd;for(e(al[p.Z]!=null);N<I;++N)al[p.Z](Y,J,F,$,F,$,K),Y=F,J=$,$+=K;p.qd=Y,p.rd=J}}function rs(p,N){var I=p.l.ma,F=I.Z==0||I.Z==1?p.l.j:p.C;if(F=p.C<F?F:p.C,e(N<=p.l.o),N>F){var $=p.l.width,K=I.ca,Y=I.tb+$*F,J=p.V,ee=p.Ba+p.c*F,ce=p.gc;e(p.ab==1),e(ce[0].hc==3),Co(ce[0],F,N,J,ee,K,Y),ar(I,F,N,K,Y,$)}p.C=p.Ma=N}function la(p,N,I,F,$,K,Y){var J=p.$/F,ee=p.$%F,ce=p.m,xe=p.s,Ce=I+p.$,ie=Ce;$=I+F*$;var ve=I+F*K,Ee=280+xe.ua,Fe=p.Pb?J:16777216,Ae=0<xe.ua?xe.Wa:null,Oe=xe.wc,Ge=Ce<ve?ns(xe,ee,J):null;e(p.C<K),e(ve<=$);var Qe=!1;e:for(;;){for(;Qe||Ce<ve;){var Ye=0;if(J>=Fe){var yt=Ce-I;e((Fe=p).Pb),Fe.wd=Fe.m,Fe.xd=yt,0<Fe.s.ua&&st(Fe.s.Wa,Fe.s.vb),Fe=J+Pl}if(ee&Oe||(Ge=ns(xe,ee,J)),e(Ge!=null),Ge.Qb&&(N[Ce]=Ge.qb,Qe=!0),!Qe)if(be(ce),Ge.jc){Ye=ce,yt=N;var ut=Ce,tn=Ge.pd[ne(Ye)&kl-1];e(Ge.jc),256>tn.g?(me(Ye,Ye.u+tn.g),yt[ut]=tn.value,Ye=0):(me(Ye,Ye.u+tn.g-256),e(256<=tn.value),Ye=tn.value),Ye==0&&(Qe=!0)}else Ye=nr(Ge.G[0],Ge.H[0],ce);if(ce.h)break;if(Qe||256>Ye){if(!Qe)if(Ge.nd)N[Ce]=(Ge.qb|Ye<<8)>>>0;else{if(be(ce),Qe=nr(Ge.G[1],Ge.H[1],ce),be(ce),yt=nr(Ge.G[2],Ge.H[2],ce),ut=nr(Ge.G[3],Ge.H[3],ce),ce.h)break;N[Ce]=(ut<<24|Qe<<16|Ye<<8|yt)>>>0}if(Qe=!1,++Ce,++ee>=F&&(ee=0,++J,Y!=null&&J<=K&&!(J%16)&&Y(p,J),Ae!=null))for(;ie<Ce;)Ye=N[ie++],Ae.X[(506832829*Ye&4294967295)>>>Ae.Mb]=Ye}else if(280>Ye){if(Ye=ia(Ye-256,ce),yt=nr(Ge.G[4],Ge.H[4],ce),be(ce),yt=oa(F,yt=ia(yt,ce)),ce.h)break;if(Ce-I<yt||$-Ce<Ye)break e;for(ut=0;ut<Ye;++ut)N[Ce+ut]=N[Ce+ut-yt];for(Ce+=Ye,ee+=Ye;ee>=F;)ee-=F,++J,Y!=null&&J<=K&&!(J%16)&&Y(p,J);if(e(Ce<=$),ee&Oe&&(Ge=ns(xe,ee,J)),Ae!=null)for(;ie<Ce;)Ye=N[ie++],Ae.X[(506832829*Ye&4294967295)>>>Ae.Mb]=Ye}else{if(!(Ye<Ee))break e;for(Qe=Ye-280,e(Ae!=null);ie<Ce;)Ye=N[ie++],Ae.X[(506832829*Ye&4294967295)>>>Ae.Mb]=Ye;Ye=Ce,e(!(Qe>>>(yt=Ae).Xa)),N[Ye]=yt.X[Qe],Qe=!0}Qe||e(ce.h==he(ce))}if(p.Pb&&ce.h&&Ce<$)e(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&st(p.s.vb,p.s.Wa);else{if(ce.h)break e;Y?.(p,J>K?K:J),p.a=0,p.$=Ce-I}return 1}return p.a=3,0}function Fa(p){e(p!=null),p.vc=null,p.yc=null,p.Ya=null;var N=p.Wa;N!=null&&(N.X=null),p.vb=null,e(p!=null)}function yo(){var p=new Ut;return p==null?null:(p.a=0,p.xb=ym,zn("Predictor","VP8LPredictors"),zn("Predictor","VP8LPredictors_C"),zn("PredictorAdd","VP8LPredictorsAdd"),zn("PredictorAdd","VP8LPredictorsAdd_C"),Kr=on,du=en,hu=Cr,tl=ln,nl=Lt,Io=Wt,xc=an,k.VP8LMapColor32b=To,k.VP8LMapColor8b=Ys,p)}function ri(p,N,I,F,$){var K=1,Y=[p],J=[N],ee=F.m,ce=F.s,xe=null,Ce=0;e:for(;;){if(I)for(;K&&te(ee,1);){var ie=Y,ve=J,Ee=F,Fe=1,Ae=Ee.m,Oe=Ee.gc[Ee.ab],Ge=te(Ae,2);if(Ee.Oc&1<<Ge)K=0;else{switch(Ee.Oc|=1<<Ge,Oe.hc=Ge,Oe.Ea=ie[0],Oe.nc=ve[0],Oe.K=[null],++Ee.ab,e(4>=Ee.ab),Ge){case 0:case 1:Oe.b=te(Ae,3)+2,Fe=ri(He(Oe.Ea,Oe.b),He(Oe.nc,Oe.b),0,Ee,Oe.K),Oe.K=Oe.K[0];break;case 3:var Qe,Ye=te(Ae,8)+1,yt=16<Ye?0:4<Ye?1:2<Ye?2:3;if(ie[0]=He(Oe.Ea,yt),Oe.b=yt,Qe=Fe=ri(Ye,1,0,Ee,Oe.K)){var ut,tn=Ye,mt=Oe,An=1<<(8>>mt.b),Sr=o(An);if(Sr==null)Qe=0;else{var hn=mt.K[0],dt=mt.w;for(Sr[0]=mt.K[0][0],ut=1;ut<1*tn;++ut)Sr[ut]=ct(hn[dt+ut],Sr[ut-1]);for(;ut<4*An;++ut)Sr[ut]=0;mt.K[0]=null,mt.K[0]=Sr,Qe=1}}Fe=Qe;break;case 2:break;default:e(0)}K=Fe}}if(Y=Y[0],J=J[0],K&&te(ee,1)&&!(K=1<=(Ce=te(ee,4))&&11>=Ce)){F.a=3;break e}var rt;if(rt=K)t:{var kr,Kt,gn,Jn=F,ys=Y,ea=J,yr=Ce,as=I,pa=Jn.m,is=Jn.s,vn=[null],Fn=1,Rr=0,Gn=Ci[yr];n:for(;;){if(as&&te(pa,1)){var bs=te(pa,3)+2,Pr=He(ys,bs),Un=He(ea,bs),Qr=Pr*Un;if(!ri(Pr,Un,0,Jn,vn))break n;for(vn=vn[0],is.xc=bs,kr=0;kr<Qr;++kr){var Zn=vn[kr]>>8&65535;vn[kr]=Zn,Zn>=Fn&&(Fn=Zn+1)}}if(pa.h)break n;for(Kt=0;5>Kt;++Kt){var os=wc[Kt];!Kt&&0<yr&&(os+=1<<yr),Rr<os&&(Rr=os)}var ls=c(Fn*Gn,V),or=Fn,On=c(or,Ne);if(On==null)var xa=null;else e(65536>=or),xa=On;var Vr=o(Rr);if(xa==null||Vr==null||ls==null){Jn.a=1;break n}var Ft=ls;for(kr=gn=0;kr<Fn;++kr){var Vt=xa[kr],Vn=Vt.G,Ga=Vt.H,Pi=0,Pa=1,cs=0;for(Kt=0;5>Kt;++Kt){os=wc[Kt],Vn[Kt]=Ft,Ga[Kt]=gn,!Kt&&0<yr&&(os+=1<<yr);s:{var Ul,Vl=os,Dh=Jn,br=Vr,vm=Ft,wm=gn,Mh=0,il=Dh.m,My=te(il,1);if(a(br,0,0,Vl),My){var Nm=te(il,1)+1,jm=te(il,1),Oh=te(il,jm==0?1:8);br[Oh]=1,Nm==2&&(br[Oh=te(il,8)]=1);var Rs=1}else{var Br=o(19),Cd=te(il,4)+4;if(19<Cd){Dh.a=3;var Bl=0;break s}for(Ul=0;Ul<Cd;++Ul)Br[Ed[Ul]]=te(il,3);var bu=void 0,_c=void 0,Po=Dh,Fh=Br,vu=Vl,Uh=br,Vh=0,ol=Po.m,_m=8,Sm=c(128,V);r:for(;P(Sm,0,7,Fh,19);){if(te(ol,1)){var Ap=2+2*te(ol,3);if((bu=2+te(ol,Ap))>vu)break r}else bu=vu;for(_c=0;_c<vu&&bu--;){be(ol);var Em=Sm[0+(127&ne(ol))];me(ol,ol.u+Em.g);var zl=Em.value;if(16>zl)Uh[_c++]=zl,zl!=0&&(_m=zl);else{var Tp=zl==16,Cp=zl-16,Ip=gu[Cp],Am=te(ol,Ai[Cp])+Ip;if(_c+Am>vu)break r;for(var kp=Tp?_m:0;0<Am--;)Uh[_c++]=kp}}Vh=1;break r}Vh||(Po.a=3),Rs=Vh}(Rs=Rs&&!il.h)&&(Mh=P(vm,wm,8,br,Vl)),Rs&&Mh!=0?Bl=Mh:(Dh.a=3,Bl=0)}if(Bl==0)break n;if(Pa&&Ch[Kt]==1&&(Pa=Ft[gn].g==0),Pi+=Ft[gn].g,gn+=Bl,3>=Kt){var Sc,Bh=Vr[0];for(Sc=1;Sc<os;++Sc)Vr[Sc]>Bh&&(Bh=Vr[Sc]);cs+=Bh}}if(Vt.nd=Pa,Vt.Qb=0,Pa&&(Vt.qb=(Vn[3][Ga[3]+0].value<<24|Vn[1][Ga[1]+0].value<<16|Vn[2][Ga[2]+0].value)>>>0,Pi==0&&256>Vn[0][Ga[0]+0].value&&(Vt.Qb=1,Vt.qb+=Vn[0][Ga[0]+0].value<<8)),Vt.jc=!Vt.Qb&&6>cs,Vt.jc){var Id,Lo=Vt;for(Id=0;Id<kl;++Id){var ll=Id,cl=Lo.pd[ll],zh=Lo.G[0][Lo.H[0]+ll];256<=zh.value?(cl.g=zh.g+256,cl.value=zh.value):(cl.g=0,cl.value=0,ll>>=mr(zh,8,cl),ll>>=mr(Lo.G[1][Lo.H[1]+ll],16,cl),ll>>=mr(Lo.G[2][Lo.H[2]+ll],0,cl),mr(Lo.G[3][Lo.H[3]+ll],24,cl))}}}is.vc=vn,is.Wb=Fn,is.Ya=xa,is.yc=ls,rt=1;break t}rt=0}if(!(K=rt)){F.a=3;break e}if(0<Ce){if(ce.ua=1<<Ce,!se(ce.Wa,Ce)){F.a=1,K=0;break e}}else ce.ua=0;var qh=F,Ec=Y,Rp=J,wu=qh.s,Nu=wu.xc;if(qh.c=Ec,qh.i=Rp,wu.md=He(Ec,Nu),wu.wc=Nu==0?-1:(1<<Nu)-1,I){F.xb=Ll;break e}if((xe=o(Y*J))==null){F.a=1,K=0;break e}K=(K=la(F,xe,0,Y,J,J,null))&&!ee.h;break e}return K?($!=null?$[0]=xe:(e(xe==null),e(I)),F.$=0,I||Fa(ce)):Fa(ce),K}function ca(p,N){var I=p.c*p.i,F=I+N+16*N;return e(p.c<=N),p.V=o(F),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+I+N,1)}function Ki(p,N){var I=p.C,F=N-I,$=p.V,K=p.Ba+p.c*I;for(e(N<=p.l.o);0<F;){var Y=16<F?16:F,J=p.l.ma,ee=p.l.width,ce=ee*Y,xe=J.ca,Ce=J.tb+ee*I,ie=p.Ta,ve=p.Ua;Gs(p,Y,$,K),di(ie,ve,xe,Ce,ce),ar(J,I,I+Y,xe,Ce,ee),F-=Y,$+=Y*p.c,I+=Y}e(I==N),p.C=p.Ma=N}function ja(){this.ub=this.yd=this.td=this.Rb=0}function Hs(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function _a(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Ua(){this.Yb=(function(){var p=[];return(function N(I,F,$){for(var K=$[F],Y=0;Y<K&&(I.push($.length>F+1?[]:0),!($.length<F+1));Y++)N(I[Y],F+1,$)})(p,0,[3,11]),p})()}function Ir(){this.jb=o(3),this.Wc=u([4,8],Ua),this.Xc=u([4,17],Ua)}function jl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function ua(){this.ld=this.La=this.dd=this.tc=0}function Va(){this.Na=this.la=0}function si(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ho(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function _l(){this.uc=this.M=this.Nb=0,this.wa=Array(new ua),this.Y=0,this.ya=Array(new Ho),this.aa=0,this.l=new Cs}function Sl(){this.y=o(16),this.f=o(8),this.ea=o(8)}function uc(){this.cb=this.a=0,this.sc="",this.m=new q,this.Od=new ja,this.Kc=new Hs,this.ed=new jl,this.Qa=new _a,this.Ic=this.$c=this.Aa=0,this.D=new _l,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,q),this.ia=0,this.pb=c(4,si),this.Pa=new Ir,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Sl),this.Hd=0,this.rb=Array(new Va),this.sb=0,this.wa=Array(new ua),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ho),this.L=this.aa=0,this.gd=u([4,2],ua),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Sa(p,N){return 0>p?0:p>N?N:p}function Cs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Or(){var p=new uc;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,hi||(hi=kn)),p}function wn(p,N,I){return p.a==0&&(p.a=N,p.sc=I,p.cb=0),0}function Yi(p,N,I){return 3<=I&&p[N+0]==157&&p[N+1]==1&&p[N+2]==42}function Ba(p,N){if(p==null)return 0;if(p.a=0,p.sc="OK",N==null)return wn(p,2,"null VP8Io passed to VP8GetHeaders()");var I=N.data,F=N.w,$=N.ha;if(4>$)return wn(p,7,"Truncated header.");var K=I[F+0]|I[F+1]<<8|I[F+2]<<16,Y=p.Od;if(Y.Rb=!(1&K),Y.td=K>>1&7,Y.yd=K>>4&1,Y.ub=K>>5,3<Y.td)return wn(p,3,"Incorrect keyframe parameters.");if(!Y.yd)return wn(p,4,"Frame not displayable.");F+=3,$-=3;var J=p.Kc;if(Y.Rb){if(7>$)return wn(p,7,"cannot parse picture header");if(!Yi(I,F,$))return wn(p,3,"Bad code word");J.c=16383&(I[F+4]<<8|I[F+3]),J.Td=I[F+4]>>6,J.i=16383&(I[F+6]<<8|I[F+5]),J.Ud=I[F+6]>>6,F+=7,$-=7,p.za=J.c+15>>4,p.Ub=J.i+15>>4,N.width=J.c,N.height=J.i,N.Da=0,N.j=0,N.v=0,N.va=N.width,N.o=N.height,N.da=0,N.ib=N.width,N.hb=N.height,N.U=N.width,N.T=N.height,a((K=p.Pa).jb,0,255,K.jb.length),e((K=p.Qa)!=null),K.Cb=0,K.Bb=0,K.Fb=1,a(K.Zb,0,0,K.Zb.length),a(K.Lb,0,0,K.Lb)}if(Y.ub>$)return wn(p,7,"bad partition length");ue(K=p.m,I,F,Y.ub),F+=Y.ub,$-=Y.ub,Y.Rb&&(J.Ld=Re(K),J.Kd=Re(K)),J=p.Qa;var ee,ce=p.Pa;if(e(K!=null),e(J!=null),J.Cb=Re(K),J.Cb){if(J.Bb=Re(K),Re(K)){for(J.Fb=Re(K),ee=0;4>ee;++ee)J.Zb[ee]=Re(K)?de(K,7):0;for(ee=0;4>ee;++ee)J.Lb[ee]=Re(K)?de(K,6):0}if(J.Bb)for(ee=0;3>ee;++ee)ce.jb[ee]=Re(K)?pe(K,8):255}else J.Bb=0;if(K.Ka)return wn(p,3,"cannot parse segment header");if((J=p.ed).zd=Re(K),J.Tb=pe(K,6),J.wb=pe(K,3),J.Pc=Re(K),J.Pc&&Re(K)){for(ce=0;4>ce;++ce)Re(K)&&(J.vd[ce]=de(K,6));for(ce=0;4>ce;++ce)Re(K)&&(J.od[ce]=de(K,6))}if(p.L=J.Tb==0?0:J.zd?1:2,K.Ka)return wn(p,3,"cannot parse filter header");var xe=$;if($=ee=F,F=ee+xe,J=xe,p.Xb=(1<<pe(p.m,2))-1,xe<3*(ce=p.Xb))I=7;else{for(ee+=3*ce,J-=3*ce,xe=0;xe<ce;++xe){var Ce=I[$+0]|I[$+1]<<8|I[$+2]<<16;Ce>J&&(Ce=J),ue(p.Jc[+xe],I,ee,Ce),ee+=Ce,J-=Ce,$+=3}ue(p.Jc[+ce],I,ee,J),I=ee<F?0:5}if(I!=0)return wn(p,I,"cannot parse partitions");for(I=pe(ee=p.m,7),$=Re(ee)?de(ee,4):0,F=Re(ee)?de(ee,4):0,J=Re(ee)?de(ee,4):0,ce=Re(ee)?de(ee,4):0,ee=Re(ee)?de(ee,4):0,xe=p.Qa,Ce=0;4>Ce;++Ce){if(xe.Cb){var ie=xe.Zb[Ce];xe.Fb||(ie+=I)}else{if(0<Ce){p.pb[Ce]=p.pb[0];continue}ie=I}var ve=p.pb[Ce];ve.Sc[0]=Ii[Sa(ie+$,127)],ve.Sc[1]=ki[Sa(ie+0,127)],ve.Eb[0]=2*Ii[Sa(ie+F,127)],ve.Eb[1]=101581*ki[Sa(ie+J,127)]>>16,8>ve.Eb[1]&&(ve.Eb[1]=8),ve.Qc[0]=Ii[Sa(ie+ce,117)],ve.Qc[1]=ki[Sa(ie+ee,127)],ve.lc=ie+ee}if(!Y.Rb)return wn(p,4,"Not a key frame.");for(Re(K),Y=p.Pa,I=0;4>I;++I){for($=0;8>$;++$)for(F=0;3>F;++F)for(J=0;11>J;++J)ce=qe(K,_r[I][$][F][J])?pe(K,8):Sp[I][$][F][J],Y.Wc[I][$].Yb[F][J]=ce;for($=0;17>$;++$)Y.Xc[I][$]=Y.Wc[I][Tn[$]]}return p.kc=Re(K),p.kc&&(p.Bd=pe(K,8)),p.cb=1}function kn(p,N,I,F,$,K,Y){var J=N[$].Yb[I];for(I=0;16>$;++$){if(!qe(p,J[I+0]))return $;for(;!qe(p,J[I+1]);)if(J=N[++$].Yb[0],I=0,$==16)return 16;var ee=N[$+1].Yb;if(qe(p,J[I+2])){var ce=p,xe=0;if(qe(ce,(ie=J)[(Ce=I)+3]))if(qe(ce,ie[Ce+6])){for(J=0,Ce=2*(xe=qe(ce,ie[Ce+8]))+(ie=qe(ce,ie[Ce+9+xe])),xe=0,ie=_p[Ce];ie[J];++J)xe+=xe+qe(ce,ie[J]);xe+=3+(8<<Ce)}else qe(ce,ie[Ce+7])?(xe=7+2*qe(ce,165),xe+=qe(ce,145)):xe=5+qe(ce,159);else xe=qe(ce,ie[Ce+4])?3+qe(ce,ie[Ce+5]):2;J=ee[2]}else xe=1,J=ee[1];ee=Y+xm[$],0>(ce=p).b&&Le(ce);var Ce,ie=ce.b,ve=(Ce=ce.Ca>>1)-(ce.I>>ie)>>31;--ce.b,ce.Ca+=ve,ce.Ca|=1,ce.I-=(Ce+1&ve)<<ie,K[ee]=((xe^ve)-ve)*F[(0<$)+0]}return 16}function bo(p){var N=p.rb[p.sb-1];N.la=0,N.Na=0,a(p.zc,0,0,p.zc.length),p.ja=0}function $r(p,N,I,F,$){$=p[N+I+32*F]+($>>3),p[N+I+32*F]=-256&$?0>$?0:255:$}function jr(p,N,I,F,$,K){$r(p,N,0,I,F+$),$r(p,N,1,I,F+K),$r(p,N,2,I,F-K),$r(p,N,3,I,F-$)}function Fr(p){return(20091*p>>16)+p}function $o(p,N,I,F){var $,K=0,Y=o(16);for($=0;4>$;++$){var J=p[N+0]+p[N+8],ee=p[N+0]-p[N+8],ce=(35468*p[N+4]>>16)-Fr(p[N+12]),xe=Fr(p[N+4])+(35468*p[N+12]>>16);Y[K+0]=J+xe,Y[K+1]=ee+ce,Y[K+2]=ee-ce,Y[K+3]=J-xe,K+=4,N++}for($=K=0;4>$;++$)J=(p=Y[K+0]+4)+Y[K+8],ee=p-Y[K+8],ce=(35468*Y[K+4]>>16)-Fr(Y[K+12]),$r(I,F,0,0,J+(xe=Fr(Y[K+4])+(35468*Y[K+12]>>16))),$r(I,F,1,0,ee+ce),$r(I,F,2,0,ee-ce),$r(I,F,3,0,J-xe),K++,F+=32}function ou(p,N,I,F){var $=p[N+0]+4,K=35468*p[N+4]>>16,Y=Fr(p[N+4]),J=35468*p[N+1]>>16;jr(I,F,0,$+Y,p=Fr(p[N+1]),J),jr(I,F,1,$+K,p,J),jr(I,F,2,$-K,p,J),jr(I,F,3,$-Y,p,J)}function dc(p,N,I,F,$){$o(p,N,I,F),$&&$o(p,N+16,I,F+4)}function $s(p,N,I,F){rl(p,N+0,I,F,1),rl(p,N+32,I,F+128,1)}function hc(p,N,I,F){var $;for(p=p[N+0]+4,$=0;4>$;++$)for(N=0;4>N;++N)$r(I,F,N,$,p)}function Xi(p,N,I,F){p[N+0]&&qn(p,N+0,I,F),p[N+16]&&qn(p,N+16,I,F+4),p[N+32]&&qn(p,N+32,I,F+128),p[N+48]&&qn(p,N+48,I,F+128+4)}function ps(p,N,I,F){var $,K=o(16);for($=0;4>$;++$){var Y=p[N+0+$]+p[N+12+$],J=p[N+4+$]+p[N+8+$],ee=p[N+4+$]-p[N+8+$],ce=p[N+0+$]-p[N+12+$];K[0+$]=Y+J,K[8+$]=Y-J,K[4+$]=ce+ee,K[12+$]=ce-ee}for($=0;4>$;++$)Y=(p=K[0+4*$]+3)+K[3+4*$],J=K[1+4*$]+K[2+4*$],ee=K[1+4*$]-K[2+4*$],ce=p-K[3+4*$],I[F+0]=Y+J>>3,I[F+16]=ce+ee>>3,I[F+32]=Y-J>>3,I[F+48]=ce-ee>>3,F+=64}function vo(p,N,I){var F,$=N-32,K=ma,Y=255-p[$-1];for(F=0;F<I;++F){var J,ee=K,ce=Y+p[N-1];for(J=0;J<I;++J)p[N+J]=ee[ce+p[$+J]];N+=32}}function fc(p,N){vo(p,N,4)}function mc(p,N){vo(p,N,8)}function El(p,N){vo(p,N,16)}function Al(p,N){var I;for(I=0;16>I;++I)r(p,N+32*I,p,N-32,16)}function Qi(p,N){var I;for(I=16;0<I;--I)a(p,N,p[N-1],16),N+=32}function da(p,N,I){var F;for(F=0;16>F;++F)a(N,I+32*F,p,16)}function ai(p,N){var I,F=16;for(I=0;16>I;++I)F+=p[N-1+32*I]+p[N+I-32];da(F>>5,p,N)}function Ji(p,N){var I,F=8;for(I=0;16>I;++I)F+=p[N-1+32*I];da(F>>4,p,N)}function ha(p,N){var I,F=8;for(I=0;16>I;++I)F+=p[N+I-32];da(F>>4,p,N)}function wo(p,N){da(128,p,N)}function Ot(p,N,I){return p+2*N+I+2>>2}function Wo(p,N){var I,F=N-32;for(F=new Uint8Array([Ot(p[F-1],p[F+0],p[F+1]),Ot(p[F+0],p[F+1],p[F+2]),Ot(p[F+1],p[F+2],p[F+3]),Ot(p[F+2],p[F+3],p[F+4])]),I=0;4>I;++I)r(p,N+32*I,F,0,F.length)}function Tl(p,N){var I=p[N-1],F=p[N-1+32],$=p[N-1+64],K=p[N-1+96];Je(p,N+0,16843009*Ot(p[N-1-32],I,F)),Je(p,N+32,16843009*Ot(I,F,$)),Je(p,N+64,16843009*Ot(F,$,K)),Je(p,N+96,16843009*Ot($,K,K))}function No(p,N){var I,F=4;for(I=0;4>I;++I)F+=p[N+I-32]+p[N-1+32*I];for(F>>=3,I=0;4>I;++I)a(p,N+32*I,F,4)}function xs(p,N){var I=p[N-1+0],F=p[N-1+32],$=p[N-1+64],K=p[N-1-32],Y=p[N+0-32],J=p[N+1-32],ee=p[N+2-32],ce=p[N+3-32];p[N+0+96]=Ot(F,$,p[N-1+96]),p[N+1+96]=p[N+0+64]=Ot(I,F,$),p[N+2+96]=p[N+1+64]=p[N+0+32]=Ot(K,I,F),p[N+3+96]=p[N+2+64]=p[N+1+32]=p[N+0+0]=Ot(Y,K,I),p[N+3+64]=p[N+2+32]=p[N+1+0]=Ot(J,Y,K),p[N+3+32]=p[N+2+0]=Ot(ee,J,Y),p[N+3+0]=Ot(ce,ee,J)}function ss(p,N){var I=p[N+1-32],F=p[N+2-32],$=p[N+3-32],K=p[N+4-32],Y=p[N+5-32],J=p[N+6-32],ee=p[N+7-32];p[N+0+0]=Ot(p[N+0-32],I,F),p[N+1+0]=p[N+0+32]=Ot(I,F,$),p[N+2+0]=p[N+1+32]=p[N+0+64]=Ot(F,$,K),p[N+3+0]=p[N+2+32]=p[N+1+64]=p[N+0+96]=Ot($,K,Y),p[N+3+32]=p[N+2+64]=p[N+1+96]=Ot(K,Y,J),p[N+3+64]=p[N+2+96]=Ot(Y,J,ee),p[N+3+96]=Ot(J,ee,ee)}function Ko(p,N){var I=p[N-1+0],F=p[N-1+32],$=p[N-1+64],K=p[N-1-32],Y=p[N+0-32],J=p[N+1-32],ee=p[N+2-32],ce=p[N+3-32];p[N+0+0]=p[N+1+64]=K+Y+1>>1,p[N+1+0]=p[N+2+64]=Y+J+1>>1,p[N+2+0]=p[N+3+64]=J+ee+1>>1,p[N+3+0]=ee+ce+1>>1,p[N+0+96]=Ot($,F,I),p[N+0+64]=Ot(F,I,K),p[N+0+32]=p[N+1+96]=Ot(I,K,Y),p[N+1+32]=p[N+2+96]=Ot(K,Y,J),p[N+2+32]=p[N+3+96]=Ot(Y,J,ee),p[N+3+32]=Ot(J,ee,ce)}function Wn(p,N){var I=p[N+0-32],F=p[N+1-32],$=p[N+2-32],K=p[N+3-32],Y=p[N+4-32],J=p[N+5-32],ee=p[N+6-32],ce=p[N+7-32];p[N+0+0]=I+F+1>>1,p[N+1+0]=p[N+0+64]=F+$+1>>1,p[N+2+0]=p[N+1+64]=$+K+1>>1,p[N+3+0]=p[N+2+64]=K+Y+1>>1,p[N+0+32]=Ot(I,F,$),p[N+1+32]=p[N+0+96]=Ot(F,$,K),p[N+2+32]=p[N+1+96]=Ot($,K,Y),p[N+3+32]=p[N+2+96]=Ot(K,Y,J),p[N+3+64]=Ot(Y,J,ee),p[N+3+96]=Ot(J,ee,ce)}function Ea(p,N){var I=p[N-1+0],F=p[N-1+32],$=p[N-1+64],K=p[N-1+96];p[N+0+0]=I+F+1>>1,p[N+2+0]=p[N+0+32]=F+$+1>>1,p[N+2+32]=p[N+0+64]=$+K+1>>1,p[N+1+0]=Ot(I,F,$),p[N+3+0]=p[N+1+32]=Ot(F,$,K),p[N+3+32]=p[N+1+64]=Ot($,K,K),p[N+3+64]=p[N+2+64]=p[N+0+96]=p[N+1+96]=p[N+2+96]=p[N+3+96]=K}function Yo(p,N){var I=p[N-1+0],F=p[N-1+32],$=p[N-1+64],K=p[N-1+96],Y=p[N-1-32],J=p[N+0-32],ee=p[N+1-32],ce=p[N+2-32];p[N+0+0]=p[N+2+32]=I+Y+1>>1,p[N+0+32]=p[N+2+64]=F+I+1>>1,p[N+0+64]=p[N+2+96]=$+F+1>>1,p[N+0+96]=K+$+1>>1,p[N+3+0]=Ot(J,ee,ce),p[N+2+0]=Ot(Y,J,ee),p[N+1+0]=p[N+3+32]=Ot(I,Y,J),p[N+1+32]=p[N+3+64]=Ot(F,I,Y),p[N+1+64]=p[N+3+96]=Ot($,F,I),p[N+1+96]=Ot(K,$,F)}function ii(p,N){var I;for(I=0;8>I;++I)r(p,N+32*I,p,N-32,8)}function gc(p,N){var I;for(I=0;8>I;++I)a(p,N,p[N-1],8),N+=32}function Aa(p,N,I){var F;for(F=0;8>F;++F)a(N,I+32*F,p,8)}function Zi(p,N){var I,F=8;for(I=0;8>I;++I)F+=p[N+I-32]+p[N-1+32*I];Aa(F>>4,p,N)}function Ta(p,N){var I,F=4;for(I=0;8>I;++I)F+=p[N+I-32];Aa(F>>3,p,N)}function Wr(p,N){var I,F=4;for(I=0;8>I;++I)F+=p[N-1+32*I];Aa(F>>3,p,N)}function bi(p,N){Aa(128,p,N)}function Is(p,N,I){var F=p[N-I],$=p[N+0],K=3*($-F)+sl[1020+p[N-2*I]-p[N+I]],Y=jd[112+(K+4>>3)];p[N-I]=ma[255+F+jd[112+(K+3>>3)]],p[N+0]=ma[255+$-Y]}function vi(p,N,I,F){var $=p[N+0],K=p[N+I];return Xs[255+p[N-2*I]-p[N-I]]>F||Xs[255+K-$]>F}function jo(p,N,I,F){return 4*Xs[255+p[N-I]-p[N+0]]+Xs[255+p[N-2*I]-p[N+I]]<=F}function wi(p,N,I,F,$){var K=p[N-3*I],Y=p[N-2*I],J=p[N-I],ee=p[N+0],ce=p[N+I],xe=p[N+2*I],Ce=p[N+3*I];return 4*Xs[255+J-ee]+Xs[255+Y-ce]>F?0:Xs[255+p[N-4*I]-K]<=$&&Xs[255+K-Y]<=$&&Xs[255+Y-J]<=$&&Xs[255+Ce-xe]<=$&&Xs[255+xe-ce]<=$&&Xs[255+ce-ee]<=$}function Ni(p,N,I,F){var $=2*F+1;for(F=0;16>F;++F)jo(p,N+F,I,$)&&Is(p,N+F,I)}function za(p,N,I,F){var $=2*F+1;for(F=0;16>F;++F)jo(p,N+F*I,1,$)&&Is(p,N+F*I,1)}function Xo(p,N,I,F){var $;for($=3;0<$;--$)Ni(p,N+=4*I,I,F)}function Cl(p,N,I,F){var $;for($=3;0<$;--$)za(p,N+=4,I,F)}function Ca(p,N,I,F,$,K,Y,J){for(K=2*K+1;0<$--;){if(wi(p,N,I,K,Y))if(vi(p,N,I,J))Is(p,N,I);else{var ee=p,ce=N,xe=I,Ce=ee[ce-2*xe],ie=ee[ce-xe],ve=ee[ce+0],Ee=ee[ce+xe],Fe=ee[ce+2*xe],Ae=27*(Ge=sl[1020+3*(ve-ie)+sl[1020+Ce-Ee]])+63>>7,Oe=18*Ge+63>>7,Ge=9*Ge+63>>7;ee[ce-3*xe]=ma[255+ee[ce-3*xe]+Ge],ee[ce-2*xe]=ma[255+Ce+Oe],ee[ce-xe]=ma[255+ie+Ae],ee[ce+0]=ma[255+ve-Ae],ee[ce+xe]=ma[255+Ee-Oe],ee[ce+2*xe]=ma[255+Fe-Ge]}N+=F}}function ji(p,N,I,F,$,K,Y,J){for(K=2*K+1;0<$--;){if(wi(p,N,I,K,Y))if(vi(p,N,I,J))Is(p,N,I);else{var ee=p,ce=N,xe=I,Ce=ee[ce-xe],ie=ee[ce+0],ve=ee[ce+xe],Ee=jd[112+(4+(Fe=3*(ie-Ce))>>3)],Fe=jd[112+(Fe+3>>3)],Ae=Ee+1>>1;ee[ce-2*xe]=ma[255+ee[ce-2*xe]+Ae],ee[ce-xe]=ma[255+Ce+Fe],ee[ce+0]=ma[255+ie-Ee],ee[ce+xe]=ma[255+ve-Ae]}N+=F}}function pc(p,N,I,F,$,K){Ca(p,N,I,1,16,F,$,K)}function oi(p,N,I,F,$,K){Ca(p,N,1,I,16,F,$,K)}function Il(p,N,I,F,$,K){var Y;for(Y=3;0<Y;--Y)ji(p,N+=4*I,I,1,16,F,$,K)}function A(p,N,I,F,$,K){var Y;for(Y=3;0<Y;--Y)ji(p,N+=4,1,I,16,F,$,K)}function H(p,N,I,F,$,K,Y,J){Ca(p,N,$,1,8,K,Y,J),Ca(I,F,$,1,8,K,Y,J)}function le(p,N,I,F,$,K,Y,J){Ca(p,N,1,$,8,K,Y,J),Ca(I,F,1,$,8,K,Y,J)}function ge(p,N,I,F,$,K,Y,J){ji(p,N+4*$,$,1,8,K,Y,J),ji(I,F+4*$,$,1,8,K,Y,J)}function we(p,N,I,F,$,K,Y,J){ji(p,N+4,1,$,8,K,Y,J),ji(I,F+4,1,$,8,K,Y,J)}function Ve(){this.ba=new At,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new xn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Xe(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ht(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function xt(){this.ua=0,this.Wa=new rn,this.vb=new rn,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ne,this.yc=new V}function Ut(){this.xb=this.a=0,this.l=new Cs,this.ca=new At,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Q,this.Pb=0,this.wd=new Q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new xt,this.ab=0,this.gc=c(4,ht),this.Oc=0}function It(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Cs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function En(p,N,I,F,$,K,Y){for(p=p==null?0:p[N+0],N=0;N<Y;++N)$[K+N]=p+I[F+N]&255,p=$[K+N]}function gr(p,N,I,F,$,K,Y){var J;if(p==null)En(null,null,I,F,$,K,Y);else for(J=0;J<Y;++J)$[K+J]=p[N+J]+I[F+J]&255}function rr(p,N,I,F,$,K,Y){if(p==null)En(null,null,I,F,$,K,Y);else{var J,ee=p[N+0],ce=ee,xe=ee;for(J=0;J<Y;++J)ce=xe+(ee=p[N+J])-ce,xe=I[F+J]+(-256&ce?0>ce?0:255:ce)&255,ce=ee,$[K+J]=xe}}function y(p,N,I,F){var $=N.width,K=N.o;if(e(p!=null&&N!=null),0>I||0>=F||I+F>K)return null;if(!p.Cc){if(p.ga==null){var Y;if(p.ga=new It,(Y=p.ga==null)||(Y=N.width*N.o,e(p.Gb.length==0),p.Gb=o(Y),p.Uc=0,p.Gb==null?Y=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,Y=1),Y=!Y),!Y){Y=p.ga;var J=p.Fa,ee=p.P,ce=p.qc,xe=p.mb,Ce=p.nb,ie=ee+1,ve=ce-1,Ee=Y.l;if(e(J!=null&&xe!=null&&N!=null),al[0]=null,al[1]=En,al[2]=gr,al[3]=rr,Y.ca=xe,Y.tb=Ce,Y.c=N.width,Y.i=N.height,e(0<Y.c&&0<Y.i),1>=ce)N=0;else if(Y.$a=3&J[ee+0],Y.Z=J[ee+0]>>2&3,Y.Lc=J[ee+0]>>4&3,ee=J[ee+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||ee)N=0;else if(Ee.put=Ct,Ee.ac=gs,Ee.bc=Wi,Ee.ma=Y,Ee.width=N.width,Ee.height=N.height,Ee.Da=N.Da,Ee.v=N.v,Ee.va=N.va,Ee.j=N.j,Ee.o=N.o,Y.$a)e:{e(Y.$a==1),N=yo();t:for(;;){if(N==null){N=0;break e}if(e(Y!=null),Y.mc=N,N.c=Y.c,N.i=Y.i,N.l=Y.l,N.l.ma=Y,N.l.width=Y.c,N.l.height=Y.i,N.a=0,Se(N.m,J,ie,ve),!ri(Y.c,Y.i,1,N,null)||(N.ab==1&&N.gc[0].hc==3&&$n(N.s)?(Y.ic=1,J=N.c*N.i,N.Ta=null,N.Ua=0,N.V=o(J),N.Ba=0,N.V==null?(N.a=1,N=0):N=1):(Y.ic=0,N=ca(N,Y.c)),!N))break t;N=1;break e}Y.mc=null,N=0}else N=ve>=Y.c*Y.i;Y=!N}if(Y)return null;p.ga.Lc!=1?p.Ga=0:F=K-I}e(p.ga!=null),e(I+F<=K);e:{if(N=(J=p.ga).c,K=J.l.o,J.$a==0){if(ie=p.rc,ve=p.Vc,Ee=p.Fa,ee=p.P+1+I*N,ce=p.mb,xe=p.nb+I*N,e(ee<=p.P+p.qc),J.Z!=0)for(e(al[J.Z]!=null),Y=0;Y<F;++Y)al[J.Z](ie,ve,Ee,ee,ce,xe,N),ie=ce,ve=xe,xe+=N,ee+=N;else for(Y=0;Y<F;++Y)r(ce,xe,Ee,ee,N),ie=ce,ve=xe,xe+=N,ee+=N;p.rc=ie,p.Vc=ve}else{if(e(J.mc!=null),N=I+F,e((Y=J.mc)!=null),e(N<=Y.i),Y.C>=N)N=1;else if(J.ic||Pe(),J.ic){J=Y.V,ie=Y.Ba,ve=Y.c;var Fe=Y.i,Ae=(Ee=1,ee=Y.$/ve,ce=Y.$%ve,xe=Y.m,Ce=Y.s,Y.$),Oe=ve*Fe,Ge=ve*N,Qe=Ce.wc,Ye=Ae<Ge?ns(Ce,ce,ee):null;e(Ae<=Oe),e(N<=Fe),e($n(Ce));t:for(;;){for(;!xe.h&&Ae<Ge;){if(ce&Qe||(Ye=ns(Ce,ce,ee)),e(Ye!=null),be(xe),256>(Fe=nr(Ye.G[0],Ye.H[0],xe)))J[ie+Ae]=Fe,++Ae,++ce>=ve&&(ce=0,++ee<=N&&!(ee%16)&&rs(Y,ee));else{if(!(280>Fe)){Ee=0;break t}Fe=ia(Fe-256,xe);var yt,ut=nr(Ye.G[4],Ye.H[4],xe);if(be(xe),!(Ae>=(ut=oa(ve,ut=ia(ut,xe)))&&Oe-Ae>=Fe)){Ee=0;break t}for(yt=0;yt<Fe;++yt)J[ie+Ae+yt]=J[ie+Ae+yt-ut];for(Ae+=Fe,ce+=Fe;ce>=ve;)ce-=ve,++ee<=N&&!(ee%16)&&rs(Y,ee);Ae<Ge&&ce&Qe&&(Ye=ns(Ce,ce,ee))}e(xe.h==he(xe))}rs(Y,ee>N?N:ee);break t}!Ee||xe.h&&Ae<Oe?(Ee=0,Y.a=xe.h?5:3):Y.$=Ae,N=Ee}else N=la(Y,Y.V,Y.Ba,Y.c,Y.i,N,Ki);if(!N){F=0;break e}}I+F>=K&&(p.Cc=1),F=1}if(!F)return null;if(p.Cc&&((F=p.ga)!=null&&(F.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+I*$}function R(p,N,I,F,$,K){for(;0<$--;){var Y,J=p,ee=N+(I?1:0),ce=p,xe=N+(I?0:3);for(Y=0;Y<F;++Y){var Ce=ce[xe+4*Y];Ce!=255&&(Ce*=32897,J[ee+4*Y+0]=J[ee+4*Y+0]*Ce>>23,J[ee+4*Y+1]=J[ee+4*Y+1]*Ce>>23,J[ee+4*Y+2]=J[ee+4*Y+2]*Ce>>23)}N+=K}}function z(p,N,I,F,$){for(;0<F--;){var K;for(K=0;K<I;++K){var Y=p[N+2*K+0],J=15&(ce=p[N+2*K+1]),ee=4369*J,ce=(240&ce|ce>>4)*ee>>16;p[N+2*K+0]=(240&Y|Y>>4)*ee>>16&240|(15&Y|Y<<4)*ee>>16>>4&15,p[N+2*K+1]=240&ce|J}N+=$}}function Z(p,N,I,F,$,K,Y,J){var ee,ce,xe=255;for(ce=0;ce<$;++ce){for(ee=0;ee<F;++ee){var Ce=p[N+ee];K[Y+4*ee]=Ce,xe&=Ce}N+=I,Y+=J}return xe!=255}function _e(p,N,I,F,$){var K;for(K=0;K<$;++K)I[F+K]=p[N+K]>>8}function Pe(){bc=R,Si=z,vd=Z,di=_e}function et(p,N,I){k[p]=function(F,$,K,Y,J,ee,ce,xe,Ce,ie,ve,Ee,Fe,Ae,Oe,Ge,Qe){var Ye,yt=Qe-1>>1,ut=J[ee+0]|ce[xe+0]<<16,tn=Ce[ie+0]|ve[Ee+0]<<16;e(F!=null);var mt=3*ut+tn+131074>>2;for(N(F[$+0],255&mt,mt>>16,Fe,Ae),K!=null&&(mt=3*tn+ut+131074>>2,N(K[Y+0],255&mt,mt>>16,Oe,Ge)),Ye=1;Ye<=yt;++Ye){var An=J[ee+Ye]|ce[xe+Ye]<<16,Sr=Ce[ie+Ye]|ve[Ee+Ye]<<16,hn=ut+An+tn+Sr+524296,dt=hn+2*(An+tn)>>3;mt=dt+ut>>1,ut=(hn=hn+2*(ut+Sr)>>3)+An>>1,N(F[$+2*Ye-1],255&mt,mt>>16,Fe,Ae+(2*Ye-1)*I),N(F[$+2*Ye-0],255&ut,ut>>16,Fe,Ae+(2*Ye-0)*I),K!=null&&(mt=hn+tn>>1,ut=dt+Sr>>1,N(K[Y+2*Ye-1],255&mt,mt>>16,Oe,Ge+(2*Ye-1)*I),N(K[Y+2*Ye+0],255&ut,ut>>16,Oe,Ge+(2*Ye+0)*I)),ut=An,tn=Sr}1&Qe||(mt=3*ut+tn+131074>>2,N(F[$+Qe-1],255&mt,mt>>16,Fe,Ae+(Qe-1)*I),K!=null&&(mt=3*tn+ut+131074>>2,N(K[Y+Qe-1],255&mt,mt>>16,Oe,Ge+(Qe-1)*I)))}}function Zt(){Js[Sh]=Nc,Js[ga]=pu,Js[Eh]=bm,Js[Ei]=kh,Js[_d]=Dl,Js[fu]=Ro,Js[Rl]=Ml,Js[Sd]=pu,Js[Ah]=kh,Js[mu]=Dl,Js[Th]=Ro}function pr(p){return p&-16384?0>p?0:255:p>>Rh}function bn(p,N){return pr((19077*p>>8)+(26149*N>>8)-14234)}function Kn(p,N,I){return pr((19077*p>>8)-(6419*N>>8)-(13320*I>>8)+8708)}function ks(p,N){return pr((19077*p>>8)+(33050*N>>8)-17685)}function Ws(p,N,I,F,$){F[$+0]=bn(p,I),F[$+1]=Kn(p,N,I),F[$+2]=ks(p,N)}function ir(p,N,I,F,$){F[$+0]=ks(p,N),F[$+1]=Kn(p,N,I),F[$+2]=bn(p,I)}function Ks(p,N,I,F,$){var K=Kn(p,N,I);N=K<<3&224|ks(p,N)>>3,F[$+0]=248&bn(p,I)|K>>5,F[$+1]=N}function li(p,N,I,F,$){var K=240&ks(p,N)|15;F[$+0]=240&bn(p,I)|Kn(p,N,I)>>4,F[$+1]=K}function _o(p,N,I,F,$){F[$+0]=255,Ws(p,N,I,F,$+1)}function So(p,N,I,F,$){ir(p,N,I,F,$),F[$+3]=255}function Ia(p,N,I,F,$){Ws(p,N,I,F,$),F[$+3]=255}function Qo(p,N,I){k[p]=function(F,$,K,Y,J,ee,ce,xe,Ce){for(var ie=xe+(-2&Ce)*I;xe!=ie;)N(F[$+0],K[Y+0],J[ee+0],ce,xe),N(F[$+1],K[Y+0],J[ee+0],ce,xe+I),$+=2,++Y,++ee,xe+=2*I;1&Ce&&N(F[$+0],K[Y+0],J[ee+0],ce,xe)}}function lu(p,N,I){return I==0?p==0?N==0?6:5:N==0?4:0:I}function xd(p,N,I,F,$){switch(p>>>30){case 3:rl(N,I,F,$,0);break;case 2:fa(N,I,F,$);break;case 1:qn(N,I,F,$)}}function ci(p,N){var I,F,$=N.M,K=N.Nb,Y=p.oc,J=p.pc+40,ee=p.oc,ce=p.pc+584,xe=p.oc,Ce=p.pc+600;for(I=0;16>I;++I)Y[J+32*I-1]=129;for(I=0;8>I;++I)ee[ce+32*I-1]=129,xe[Ce+32*I-1]=129;for(0<$?Y[J-1-32]=ee[ce-1-32]=xe[Ce-1-32]=129:(a(Y,J-32-1,127,21),a(ee,ce-32-1,127,9),a(xe,Ce-32-1,127,9)),F=0;F<p.za;++F){var ie=N.ya[N.aa+F];if(0<F){for(I=-1;16>I;++I)r(Y,J+32*I-4,Y,J+32*I+12,4);for(I=-1;8>I;++I)r(ee,ce+32*I-4,ee,ce+32*I+4,4),r(xe,Ce+32*I-4,xe,Ce+32*I+4,4)}var ve=p.Gd,Ee=p.Hd+F,Fe=ie.ad,Ae=ie.Hc;if(0<$&&(r(Y,J-32,ve[Ee].y,0,16),r(ee,ce-32,ve[Ee].f,0,8),r(xe,Ce-32,ve[Ee].ea,0,8)),ie.Za){var Oe=Y,Ge=J-32+16;for(0<$&&(F>=p.za-1?a(Oe,Ge,ve[Ee].y[15],4):r(Oe,Ge,ve[Ee+1].y,0,4)),I=0;4>I;I++)Oe[Ge+128+I]=Oe[Ge+256+I]=Oe[Ge+384+I]=Oe[Ge+0+I];for(I=0;16>I;++I,Ae<<=2)Oe=Y,Ge=J+Xr[I],Ur[ie.Ob[I]](Oe,Ge),xd(Ae,Fe,16*+I,Oe,Ge)}else if(Oe=lu(F,$,ie.Ob[0]),Ra[Oe](Y,J),Ae!=0)for(I=0;16>I;++I,Ae<<=2)xd(Ae,Fe,16*+I,Y,J+Xr[I]);for(I=ie.Gc,Oe=lu(F,$,ie.Dd),ro[Oe](ee,ce),ro[Oe](xe,Ce),Ae=Fe,Oe=ee,Ge=ce,255&(ie=0|I)&&(170&ie?_i(Ae,256,Oe,Ge):Mn(Ae,256,Oe,Ge)),ie=xe,Ae=Ce,255&(I>>=8)&&(170&I?_i(Fe,320,ie,Ae):Mn(Fe,320,ie,Ae)),$<p.Ub-1&&(r(ve[Ee].y,0,Y,J+480,16),r(ve[Ee].f,0,ee,ce+224,8),r(ve[Ee].ea,0,xe,Ce+224,8)),I=8*K*p.B,ve=p.sa,Ee=p.ta+16*F+16*K*p.R,Fe=p.qa,ie=p.ra+8*F+I,Ae=p.Ha,Oe=p.Ia+8*F+I,I=0;16>I;++I)r(ve,Ee+I*p.R,Y,J+32*I,16);for(I=0;8>I;++I)r(Fe,ie+I*p.B,ee,ce+32*I,8),r(Ae,Oe+I*p.B,xe,Ce+32*I,8)}}function eo(p,N,I,F,$,K,Y,J,ee){var ce=[0],xe=[0],Ce=0,ie=ee!=null?ee.kd:0,ve=ee??new Xe;if(p==null||12>I)return 7;ve.data=p,ve.w=N,ve.ha=I,N=[N],I=[I],ve.gb=[ve.gb];e:{var Ee=N,Fe=I,Ae=ve.gb;if(e(p!=null),e(Fe!=null),e(Ae!=null),Ae[0]=0,12<=Fe[0]&&!t(p,Ee[0],"RIFF")){if(t(p,Ee[0]+8,"WEBP")){Ae=3;break e}var Oe=ft(p,Ee[0]+4);if(12>Oe||4294967286<Oe){Ae=3;break e}if(ie&&Oe>Fe[0]-8){Ae=7;break e}Ae[0]=Oe,Ee[0]+=12,Fe[0]-=12}Ae=0}if(Ae!=0)return Ae;for(Oe=0<ve.gb[0],I=I[0];;){e:{var Ge=p;Fe=N,Ae=I;var Qe=ce,Ye=xe,yt=Ee=[0];if((mt=Ce=[Ce])[0]=0,8>Ae[0])Ae=7;else{if(!t(Ge,Fe[0],"VP8X")){if(ft(Ge,Fe[0]+4)!=10){Ae=3;break e}if(18>Ae[0]){Ae=7;break e}var ut=ft(Ge,Fe[0]+8),tn=1+at(Ge,Fe[0]+12);if(2147483648<=tn*(Ge=1+at(Ge,Fe[0]+15))){Ae=3;break e}yt!=null&&(yt[0]=ut),Qe!=null&&(Qe[0]=tn),Ye!=null&&(Ye[0]=Ge),Fe[0]+=18,Ae[0]-=18,mt[0]=1}Ae=0}}if(Ce=Ce[0],Ee=Ee[0],Ae!=0)return Ae;if(Fe=!!(2&Ee),!Oe&&Ce)return 3;if(K!=null&&(K[0]=!!(16&Ee)),Y!=null&&(Y[0]=Fe),J!=null&&(J[0]=0),Y=ce[0],Ee=xe[0],Ce&&Fe&&ee==null){Ae=0;break}if(4>I){Ae=7;break}if(Oe&&Ce||!Oe&&!Ce&&!t(p,N[0],"ALPH")){I=[I],ve.na=[ve.na],ve.P=[ve.P],ve.Sa=[ve.Sa];e:{ut=p,Ae=N,Oe=I;var mt=ve.gb;Qe=ve.na,Ye=ve.P,yt=ve.Sa,tn=22,e(ut!=null),e(Oe!=null),Ge=Ae[0];var An=Oe[0];for(e(Qe!=null),e(yt!=null),Qe[0]=null,Ye[0]=null,yt[0]=0;;){if(Ae[0]=Ge,Oe[0]=An,8>An){Ae=7;break e}var Sr=ft(ut,Ge+4);if(4294967286<Sr){Ae=3;break e}var hn=8+Sr+1&-2;if(tn+=hn,0<mt&&tn>mt){Ae=3;break e}if(!t(ut,Ge,"VP8 ")||!t(ut,Ge,"VP8L")){Ae=0;break e}if(An[0]<hn){Ae=7;break e}t(ut,Ge,"ALPH")||(Qe[0]=ut,Ye[0]=Ge+8,yt[0]=Sr),Ge+=hn,An-=hn}}if(I=I[0],ve.na=ve.na[0],ve.P=ve.P[0],ve.Sa=ve.Sa[0],Ae!=0)break}I=[I],ve.Ja=[ve.Ja],ve.xa=[ve.xa];e:if(mt=p,Ae=N,Oe=I,Qe=ve.gb[0],Ye=ve.Ja,yt=ve.xa,ut=Ae[0],Ge=!t(mt,ut,"VP8 "),tn=!t(mt,ut,"VP8L"),e(mt!=null),e(Oe!=null),e(Ye!=null),e(yt!=null),8>Oe[0])Ae=7;else{if(Ge||tn){if(mt=ft(mt,ut+4),12<=Qe&&mt>Qe-12){Ae=3;break e}if(ie&&mt>Oe[0]-8){Ae=7;break e}Ye[0]=mt,Ae[0]+=8,Oe[0]-=8,yt[0]=tn}else yt[0]=5<=Oe[0]&&mt[ut+0]==47&&!(mt[ut+4]>>5),Ye[0]=Oe[0];Ae=0}if(I=I[0],ve.Ja=ve.Ja[0],ve.xa=ve.xa[0],N=N[0],Ae!=0)break;if(4294967286<ve.Ja)return 3;if(J==null||Fe||(J[0]=ve.xa?2:1),Y=[Y],Ee=[Ee],ve.xa){if(5>I){Ae=7;break}J=Y,ie=Ee,Fe=K,p==null||5>I?p=0:5<=I&&p[N+0]==47&&!(p[N+4]>>5)?(Oe=[0],mt=[0],Qe=[0],Se(Ye=new Q,p,N,I),Na(Ye,Oe,mt,Qe)?(J!=null&&(J[0]=Oe[0]),ie!=null&&(ie[0]=mt[0]),Fe!=null&&(Fe[0]=Qe[0]),p=1):p=0):p=0}else{if(10>I){Ae=7;break}J=Ee,p==null||10>I||!Yi(p,N+3,I-3)?p=0:(ie=p[N+0]|p[N+1]<<8|p[N+2]<<16,Fe=16383&(p[N+7]<<8|p[N+6]),p=16383&(p[N+9]<<8|p[N+8]),1&ie||3<(ie>>1&7)||!(ie>>4&1)||ie>>5>=ve.Ja||!Fe||!p?p=0:(Y&&(Y[0]=Fe),J&&(J[0]=p),p=1))}if(!p||(Y=Y[0],Ee=Ee[0],Ce&&(ce[0]!=Y||xe[0]!=Ee)))return 3;ee!=null&&(ee[0]=ve,ee.offset=N-ee.w,e(4294967286>N-ee.w),e(ee.offset==ee.ha-I));break}return Ae==0||Ae==7&&Ce&&ee==null?(K!=null&&(K[0]|=ve.na!=null&&0<ve.na.length),F!=null&&(F[0]=Y),$!=null&&($[0]=Ee),0):Ae}function Jo(p,N,I){var F=N.width,$=N.height,K=0,Y=0,J=F,ee=$;if(N.Da=p!=null&&0<p.Da,N.Da&&(J=p.cd,ee=p.bd,K=p.v,Y=p.j,11>I||(K&=-2,Y&=-2),0>K||0>Y||0>=J||0>=ee||K+J>F||Y+ee>$))return 0;if(N.v=K,N.j=Y,N.va=K+J,N.o=Y+ee,N.U=J,N.T=ee,N.da=p!=null&&0<p.da,N.da){if(!Pt(J,ee,I=[p.ib],K=[p.hb]))return 0;N.ib=I[0],N.hb=K[0]}return N.ob=p!=null&&p.ob,N.Kb=p==null||!p.Sd,N.da&&(N.ob=N.ib<3*F/4&&N.hb<3*$/4,N.Kb=0),1}function yd(p){if(p==null)return 2;if(11>p.S){var N=p.f.RGBA;N.fb+=(p.height-1)*N.A,N.A=-N.A}else N=p.f.kb,p=p.height,N.O+=(p-1)*N.fa,N.fa=-N.fa,N.N+=(p-1>>1)*N.Ab,N.Ab=-N.Ab,N.W+=(p-1>>1)*N.Db,N.Db=-N.Db,N.F!=null&&(N.J+=(p-1)*N.lb,N.lb=-N.lb);return 0}function to(p,N,I,F){if(F==null||0>=p||0>=N)return 2;if(I!=null){if(I.Da){var $=I.cd,K=I.bd,Y=-2&I.v,J=-2&I.j;if(0>Y||0>J||0>=$||0>=K||Y+$>p||J+K>N)return 2;p=$,N=K}if(I.da){if(!Pt(p,N,$=[I.ib],K=[I.hb]))return 2;p=$[0],N=K[0]}}F.width=p,F.height=N;e:{var ee=F.width,ce=F.height;if(p=F.S,0>=ee||0>=ce||!(p>=Sh&&13>p))p=2;else{if(0>=F.Rd&&F.sd==null){Y=K=$=N=0;var xe=(J=ee*Lh[p])*ce;if(11>p||(K=(ce+1)/2*(N=(ee+1)/2),p==12&&(Y=($=ee)*ce)),(ce=o(xe+2*K+Y))==null){p=1;break e}F.sd=ce,11>p?((ee=F.f.RGBA).eb=ce,ee.fb=0,ee.A=J,ee.size=xe):((ee=F.f.kb).y=ce,ee.O=0,ee.fa=J,ee.Fd=xe,ee.f=ce,ee.N=0+xe,ee.Ab=N,ee.Cd=K,ee.ea=ce,ee.W=0+xe+K,ee.Db=N,ee.Ed=K,p==12&&(ee.F=ce,ee.J=0+xe+2*K),ee.Tc=Y,ee.lb=$)}if(N=1,$=F.S,K=F.width,Y=F.height,$>=Sh&&13>$)if(11>$)p=F.f.RGBA,N&=(J=Math.abs(p.A))*(Y-1)+K<=p.size,N&=J>=K*Lh[$],N&=p.eb!=null;else{p=F.f.kb,J=(K+1)/2,xe=(Y+1)/2,ee=Math.abs(p.fa),ce=Math.abs(p.Ab);var Ce=Math.abs(p.Db),ie=Math.abs(p.lb),ve=ie*(Y-1)+K;N&=ee*(Y-1)+K<=p.Fd,N&=ce*(xe-1)+J<=p.Cd,N=(N&=Ce*(xe-1)+J<=p.Ed)&ee>=K&ce>=J&Ce>=J,N&=p.y!=null,N&=p.f!=null,N&=p.ea!=null,$==12&&(N&=ie>=K,N&=ve<=p.Tc,N&=p.F!=null)}else N=0;p=N?0:2}}return p!=0||I!=null&&I.fd&&(p=yd(F)),p}var kl=64,qa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ka=24,Eo=32,Ao=8,Zo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];lt("Predictor0","PredictorAdd0"),k.Predictor0=function(){return 4278190080},k.Predictor1=function(p){return p},k.Predictor2=function(p,N,I){return N[I+0]},k.Predictor3=function(p,N,I){return N[I+1]},k.Predictor4=function(p,N,I){return N[I-1]},k.Predictor5=function(p,N,I){return Et(Et(p,N[I+1]),N[I+0])},k.Predictor6=function(p,N,I){return Et(p,N[I-1])},k.Predictor7=function(p,N,I){return Et(p,N[I+0])},k.Predictor8=function(p,N,I){return Et(N[I-1],N[I+0])},k.Predictor9=function(p,N,I){return Et(N[I+0],N[I+1])},k.Predictor10=function(p,N,I){return Et(Et(p,N[I-1]),Et(N[I+0],N[I+1]))},k.Predictor11=function(p,N,I){var F=N[I+0];return 0>=Qt(F>>24&255,p>>24&255,(N=N[I-1])>>24&255)+Qt(F>>16&255,p>>16&255,N>>16&255)+Qt(F>>8&255,p>>8&255,N>>8&255)+Qt(255&F,255&p,255&N)?F:p},k.Predictor12=function(p,N,I){var F=N[I+0];return(sn((p>>24&255)+(F>>24&255)-((N=N[I-1])>>24&255))<<24|sn((p>>16&255)+(F>>16&255)-(N>>16&255))<<16|sn((p>>8&255)+(F>>8&255)-(N>>8&255))<<8|sn((255&p)+(255&F)-(255&N)))>>>0},k.Predictor13=function(p,N,I){var F=N[I-1];return(dn((p=Et(p,N[I+0]))>>24&255,F>>24&255)<<24|dn(p>>16&255,F>>16&255)<<16|dn(p>>8&255,F>>8&255)<<8|dn(255&p,255&F))>>>0};var cu=k.PredictorAdd0;k.PredictorAdd1=pn,lt("Predictor2","PredictorAdd2"),lt("Predictor3","PredictorAdd3"),lt("Predictor4","PredictorAdd4"),lt("Predictor5","PredictorAdd5"),lt("Predictor6","PredictorAdd6"),lt("Predictor7","PredictorAdd7"),lt("Predictor8","PredictorAdd8"),lt("Predictor9","PredictorAdd9"),lt("Predictor10","PredictorAdd10"),lt("Predictor11","PredictorAdd11"),lt("Predictor12","PredictorAdd12"),lt("Predictor13","PredictorAdd13");var uu=k.PredictorAdd2;Nt("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),Nt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var Kr,Nh=k.ColorIndexInverseTransform,To=k.MapARGB,Co=k.VP8LColorIndexInverseTransformAlpha,Ys=k.MapAlpha,el=k.VP8LPredictorsAdd=[];el.length=16,(k.VP8LPredictors=[]).length=16,(k.VP8LPredictorsAdd_C=[]).length=16,(k.VP8LPredictors_C=[]).length=16;var du,hu,tl,nl,Io,xc,ui,rl,fa,_i,qn,Mn,xr,Yr,ko,no,yc,bd,mm,wp,Np,jp,gm,pm,bc,Si,vd,di,vc=o(511),jh=o(2041),wd=o(225),Nd=o(767),_h=0,sl=jh,jd=wd,ma=Nd,Xs=vc,Sh=0,ga=1,Eh=2,Ei=3,_d=4,fu=5,Rl=6,Sd=7,Ah=8,mu=9,Th=10,Ai=[2,3,7],gu=[3,3,11],wc=[280,256,256,256,40],Ch=[0,1,1,1,0],Ed=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ti=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ci=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Pl=8,Ii=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ki=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],hi=null,_p=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],xm=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ih=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Sp=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Qs=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],_r=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Tn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ra=[],Ur=[],ro=[],Ll=1,ym=2,al=[],Js=[];et("UpsampleRgbLinePair",Ws,3),et("UpsampleBgrLinePair",ir,3),et("UpsampleRgbaLinePair",Ia,4),et("UpsampleBgraLinePair",So,4),et("UpsampleArgbLinePair",_o,4),et("UpsampleRgba4444LinePair",li,2),et("UpsampleRgb565LinePair",Ks,2);var Nc=k.UpsampleRgbLinePair,bm=k.UpsampleBgrLinePair,pu=k.UpsampleRgbaLinePair,kh=k.UpsampleBgraLinePair,Dl=k.UpsampleArgbLinePair,Ro=k.UpsampleRgba4444LinePair,Ml=k.UpsampleRgb565LinePair,Ri=16,xu=1<<Ri-1,jc=-227,Ol=482,Rh=6,Fl=0,Zs=o(256),Ph=o(256),Ep=o(256),Py=o(256),Ly=o(Ol-jc),Dy=o(Ol-jc);Qo("YuvToRgbRow",Ws,3),Qo("YuvToBgrRow",ir,3),Qo("YuvToRgbaRow",Ia,4),Qo("YuvToBgraRow",So,4),Qo("YuvToArgbRow",_o,4),Qo("YuvToRgba4444Row",li,2),Qo("YuvToRgb565Row",Ks,2);var Xr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],yu=[0,2,8],Ad=[8,7,6,4,4,2,2,2,1,1,1,1],Td=1;this.WebPDecodeRGBA=function(p,N,I,F,$){var K=ga,Y=new Ve,J=new At;Y.ba=J,J.S=K,J.width=[J.width],J.height=[J.height];var ee=J.width,ce=J.height,xe=new jt;if(xe==null||p==null)var Ce=2;else e(xe!=null),Ce=eo(p,N,I,xe.width,xe.height,xe.Pd,xe.Qd,xe.format,null);if(Ce!=0?ee=0:(ee!=null&&(ee[0]=xe.width[0]),ce!=null&&(ce[0]=xe.height[0]),ee=1),ee){J.width=J.width[0],J.height=J.height[0],F!=null&&(F[0]=J.width),$!=null&&($[0]=J.height);e:{if(F=new Cs,($=new Xe).data=p,$.w=N,$.ha=I,$.kd=1,N=[0],e($!=null),((p=eo($.data,$.w,$.ha,null,null,null,N,null,$))==0||p==7)&&N[0]&&(p=4),(N=p)==0){if(e(Y!=null),F.data=$.data,F.w=$.w+$.offset,F.ha=$.ha-$.offset,F.put=Ct,F.ac=gs,F.bc=Wi,F.ma=Y,$.xa){if((p=yo())==null){Y=1;break e}if((function(ie,ve){var Ee=[0],Fe=[0],Ae=[0];t:for(;;){if(ie==null)return 0;if(ve==null)return ie.a=2,0;if(ie.l=ve,ie.a=0,Se(ie.m,ve.data,ve.w,ve.ha),!Na(ie.m,Ee,Fe,Ae)){ie.a=3;break t}if(ie.xb=ym,ve.width=Ee[0],ve.height=Fe[0],!ri(Ee[0],Fe[0],1,ie,null))break t;return 1}return e(ie.a!=0),0})(p,F)){if(F=(N=to(F.width,F.height,Y.Oa,Y.ba))==0){t:{F=p;n:for(;;){if(F==null){F=0;break t}if(e(F.s.yc!=null),e(F.s.Ya!=null),e(0<F.s.Wb),e((I=F.l)!=null),e(($=I.ma)!=null),F.xb!=0){if(F.ca=$.ba,F.tb=$.tb,e(F.ca!=null),!Jo($.Oa,I,Ei)){F.a=2;break n}if(!ca(F,I.width)||I.da)break n;if((I.da||zt(F.ca.S))&&Pe(),11>F.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),F.ca.f.kb.F!=null&&Pe()),F.Pb&&0<F.s.ua&&F.s.vb.X==null&&!se(F.s.vb,F.s.Wa.Xa)){F.a=1;break n}F.xb=0}if(!la(F,F.V,F.Ba,F.c,F.i,I.o,Ts))break n;$.Dc=F.Ma,F=1;break t}e(F.a!=0),F=0}F=!F}F&&(N=p.a)}else N=p.a}else{if((p=new Or)==null){Y=1;break e}if(p.Fa=$.na,p.P=$.P,p.qc=$.Sa,Ba(p,F)){if((N=to(F.width,F.height,Y.Oa,Y.ba))==0){if(p.Aa=0,I=Y.Oa,e(($=p)!=null),I!=null){if(0<(ee=0>(ee=I.Md)?0:100<ee?255:255*ee/100)){for(ce=xe=0;4>ce;++ce)12>(Ce=$.pb[ce]).lc&&(Ce.ia=ee*Ad[0>Ce.lc?0:Ce.lc]>>3),xe|=Ce.ia;xe&&(alert("todo:VP8InitRandom"),$.ia=1)}$.Ga=I.Id,100<$.Ga?$.Ga=100:0>$.Ga&&($.Ga=0)}(function(ie,ve){if(ie==null)return 0;if(ve==null)return wn(ie,2,"NULL VP8Io parameter in VP8Decode().");if(!ie.cb&&!Ba(ie,ve))return 0;if(e(ie.cb),ve.ac==null||ve.ac(ve)){ve.ob&&(ie.L=0);var Ee=yu[ie.L];if(ie.L==2?(ie.yb=0,ie.zb=0):(ie.yb=ve.v-Ee>>4,ie.zb=ve.j-Ee>>4,0>ie.yb&&(ie.yb=0),0>ie.zb&&(ie.zb=0)),ie.Va=ve.o+15+Ee>>4,ie.Hb=ve.va+15+Ee>>4,ie.Hb>ie.za&&(ie.Hb=ie.za),ie.Va>ie.Ub&&(ie.Va=ie.Ub),0<ie.L){var Fe=ie.ed;for(Ee=0;4>Ee;++Ee){var Ae;if(ie.Qa.Cb){var Oe=ie.Qa.Lb[Ee];ie.Qa.Fb||(Oe+=Fe.Tb)}else Oe=Fe.Tb;for(Ae=0;1>=Ae;++Ae){var Ge=ie.gd[Ee][Ae],Qe=Oe;if(Fe.Pc&&(Qe+=Fe.vd[0],Ae&&(Qe+=Fe.od[0])),0<(Qe=0>Qe?0:63<Qe?63:Qe)){var Ye=Qe;0<Fe.wb&&(Ye=4<Fe.wb?Ye>>2:Ye>>1)>9-Fe.wb&&(Ye=9-Fe.wb),1>Ye&&(Ye=1),Ge.dd=Ye,Ge.tc=2*Qe+Ye,Ge.ld=40<=Qe?2:15<=Qe?1:0}else Ge.tc=0;Ge.La=Ae}}}Ee=0}else wn(ie,6,"Frame setup failed"),Ee=ie.a;if(Ee=Ee==0){if(Ee){ie.$c=0,0<ie.Aa||(ie.Ic=Td);t:{Ee=ie.Ic,Fe=4*(Ye=ie.za);var yt=32*Ye,ut=Ye+1,tn=0<ie.L?Ye*(0<ie.Aa?2:1):0,mt=(ie.Aa==2?2:1)*Ye;if((Ge=Fe+832+(Ae=3*(16*Ee+yu[ie.L])/2*yt)+(Oe=ie.Fa!=null&&0<ie.Fa.length?ie.Kc.c*ie.Kc.i:0))!=Ge)Ee=0;else{if(Ge>ie.Vb){if(ie.Vb=0,ie.Ec=o(Ge),ie.Fc=0,ie.Ec==null){Ee=wn(ie,1,"no memory during frame initialization.");break t}ie.Vb=Ge}Ge=ie.Ec,Qe=ie.Fc,ie.Ac=Ge,ie.Bc=Qe,Qe+=Fe,ie.Gd=c(yt,Sl),ie.Hd=0,ie.rb=c(ut+1,Va),ie.sb=1,ie.wa=tn?c(tn,ua):null,ie.Y=0,ie.D.Nb=0,ie.D.wa=ie.wa,ie.D.Y=ie.Y,0<ie.Aa&&(ie.D.Y+=Ye),e(!0),ie.oc=Ge,ie.pc=Qe,Qe+=832,ie.ya=c(mt,Ho),ie.aa=0,ie.D.ya=ie.ya,ie.D.aa=ie.aa,ie.Aa==2&&(ie.D.aa+=Ye),ie.R=16*Ye,ie.B=8*Ye,Ye=(yt=yu[ie.L])*ie.R,yt=yt/2*ie.B,ie.sa=Ge,ie.ta=Qe+Ye,ie.qa=ie.sa,ie.ra=ie.ta+16*Ee*ie.R+yt,ie.Ha=ie.qa,ie.Ia=ie.ra+8*Ee*ie.B+yt,ie.$c=0,Qe+=Ae,ie.mb=Oe?Ge:null,ie.nb=Oe?Qe:null,e(Qe+Oe<=ie.Fc+ie.Vb),bo(ie),a(ie.Ac,ie.Bc,0,Fe),Ee=1}}if(Ee){if(ve.ka=0,ve.y=ie.sa,ve.O=ie.ta,ve.f=ie.qa,ve.N=ie.ra,ve.ea=ie.Ha,ve.Vd=ie.Ia,ve.fa=ie.R,ve.Rc=ie.B,ve.F=null,ve.J=0,!_h){for(Ee=-255;255>=Ee;++Ee)vc[255+Ee]=0>Ee?-Ee:Ee;for(Ee=-1020;1020>=Ee;++Ee)jh[1020+Ee]=-128>Ee?-128:127<Ee?127:Ee;for(Ee=-112;112>=Ee;++Ee)wd[112+Ee]=-16>Ee?-16:15<Ee?15:Ee;for(Ee=-255;510>=Ee;++Ee)Nd[255+Ee]=0>Ee?0:255<Ee?255:Ee;_h=1}ui=ps,rl=dc,_i=$s,qn=hc,Mn=Xi,fa=ou,xr=pc,Yr=oi,ko=H,no=le,yc=Il,bd=A,mm=ge,wp=we,Np=Ni,jp=za,gm=Xo,pm=Cl,Ur[0]=No,Ur[1]=fc,Ur[2]=Wo,Ur[3]=Tl,Ur[4]=xs,Ur[5]=Ko,Ur[6]=ss,Ur[7]=Wn,Ur[8]=Yo,Ur[9]=Ea,Ra[0]=ai,Ra[1]=El,Ra[2]=Al,Ra[3]=Qi,Ra[4]=Ji,Ra[5]=ha,Ra[6]=wo,ro[0]=Zi,ro[1]=mc,ro[2]=ii,ro[3]=gc,ro[4]=Wr,ro[5]=Ta,ro[6]=bi,Ee=1}else Ee=0}Ee&&(Ee=(function(An,Sr){for(An.M=0;An.M<An.Va;++An.M){var hn,dt=An.Jc[An.M&An.Xb],rt=An.m,kr=An;for(hn=0;hn<kr.za;++hn){var Kt=rt,gn=kr,Jn=gn.Ac,ys=gn.Bc+4*hn,ea=gn.zc,yr=gn.ya[gn.aa+hn];if(gn.Qa.Bb?yr.$b=qe(Kt,gn.Pa.jb[0])?2+qe(Kt,gn.Pa.jb[2]):qe(Kt,gn.Pa.jb[1]):yr.$b=0,gn.kc&&(yr.Ad=qe(Kt,gn.Bd)),yr.Za=!qe(Kt,145)+0,yr.Za){var as=yr.Ob,pa=0;for(gn=0;4>gn;++gn){var is,vn=ea[0+gn];for(is=0;4>is;++is){vn=Qs[Jn[ys+is]][vn];for(var Fn=Ih[qe(Kt,vn[0])];0<Fn;)Fn=Ih[2*Fn+qe(Kt,vn[Fn])];vn=-Fn,Jn[ys+is]=vn}r(as,pa,Jn,ys,4),pa+=4,ea[0+gn]=vn}}else vn=qe(Kt,156)?qe(Kt,128)?1:3:qe(Kt,163)?2:0,yr.Ob[0]=vn,a(Jn,ys,vn,4),a(ea,0,vn,4);yr.Dd=qe(Kt,142)?qe(Kt,114)?qe(Kt,183)?1:3:2:0}if(kr.m.Ka)return wn(An,7,"Premature end-of-partition0 encountered.");for(;An.ja<An.za;++An.ja){if(kr=dt,Kt=(rt=An).rb[rt.sb-1],Jn=rt.rb[rt.sb+rt.ja],hn=rt.ya[rt.aa+rt.ja],ys=rt.kc?hn.Ad:0)Kt.la=Jn.la=0,hn.Za||(Kt.Na=Jn.Na=0),hn.Hc=0,hn.Gc=0,hn.ia=0;else{var Rr,Gn;if(Kt=Jn,Jn=kr,ys=rt.Pa.Xc,ea=rt.ya[rt.aa+rt.ja],yr=rt.pb[ea.$b],gn=ea.ad,as=0,pa=rt.rb[rt.sb-1],vn=is=0,a(gn,as,0,384),ea.Za)var bs=0,Pr=ys[3];else{Fn=o(16);var Un=Kt.Na+pa.Na;if(Un=hi(Jn,ys[1],Un,yr.Eb,0,Fn,0),Kt.Na=pa.Na=(0<Un)+0,1<Un)ui(Fn,0,gn,as);else{var Qr=Fn[0]+3>>3;for(Fn=0;256>Fn;Fn+=16)gn[as+Fn]=Qr}bs=1,Pr=ys[0]}var Zn=15&Kt.la,os=15&pa.la;for(Fn=0;4>Fn;++Fn){var ls=1&os;for(Qr=Gn=0;4>Qr;++Qr)Zn=Zn>>1|(ls=(Un=hi(Jn,Pr,Un=ls+(1&Zn),yr.Sc,bs,gn,as))>bs)<<7,Gn=Gn<<2|(3<Un?3:1<Un?2:gn[as+0]!=0),as+=16;Zn>>=4,os=os>>1|ls<<7,is=(is<<8|Gn)>>>0}for(Pr=Zn,bs=os>>4,Rr=0;4>Rr;Rr+=2){for(Gn=0,Zn=Kt.la>>4+Rr,os=pa.la>>4+Rr,Fn=0;2>Fn;++Fn){for(ls=1&os,Qr=0;2>Qr;++Qr)Un=ls+(1&Zn),Zn=Zn>>1|(ls=0<(Un=hi(Jn,ys[2],Un,yr.Qc,0,gn,as)))<<3,Gn=Gn<<2|(3<Un?3:1<Un?2:gn[as+0]!=0),as+=16;Zn>>=2,os=os>>1|ls<<5}vn|=Gn<<4*Rr,Pr|=Zn<<4<<Rr,bs|=(240&os)<<Rr}Kt.la=Pr,pa.la=bs,ea.Hc=is,ea.Gc=vn,ea.ia=43690&vn?0:yr.ia,ys=!(is|vn)}if(0<rt.L&&(rt.wa[rt.Y+rt.ja]=rt.gd[hn.$b][hn.Za],rt.wa[rt.Y+rt.ja].La|=!ys),kr.Ka)return wn(An,7,"Premature end-of-file encountered.")}if(bo(An),rt=Sr,kr=1,hn=(dt=An).D,Kt=0<dt.L&&dt.M>=dt.zb&&dt.M<=dt.Va,dt.Aa==0)t:{if(hn.M=dt.M,hn.uc=Kt,ci(dt,hn),kr=1,hn=(Gn=dt.D).Nb,Kt=(vn=yu[dt.L])*dt.R,Jn=vn/2*dt.B,Fn=16*hn*dt.R,Qr=8*hn*dt.B,ys=dt.sa,ea=dt.ta-Kt+Fn,yr=dt.qa,gn=dt.ra-Jn+Qr,as=dt.Ha,pa=dt.Ia-Jn+Qr,os=(Zn=Gn.M)==0,is=Zn>=dt.Va-1,dt.Aa==2&&ci(dt,Gn),Gn.uc)for(ls=(Un=dt).D.M,e(Un.D.uc),Gn=Un.yb;Gn<Un.Hb;++Gn){bs=Gn,Pr=ls;var or=(On=(cs=Un).D).Nb;Rr=cs.R;var On=On.wa[On.Y+bs],xa=cs.sa,Vr=cs.ta+16*or*Rr+16*bs,Ft=On.dd,Vt=On.tc;if(Vt!=0)if(e(3<=Vt),cs.L==1)0<bs&&jp(xa,Vr,Rr,Vt+4),On.La&&pm(xa,Vr,Rr,Vt),0<Pr&&Np(xa,Vr,Rr,Vt+4),On.La&&gm(xa,Vr,Rr,Vt);else{var Vn=cs.B,Ga=cs.qa,Pi=cs.ra+8*or*Vn+8*bs,Pa=cs.Ha,cs=cs.Ia+8*or*Vn+8*bs;or=On.ld,0<bs&&(Yr(xa,Vr,Rr,Vt+4,Ft,or),no(Ga,Pi,Pa,cs,Vn,Vt+4,Ft,or)),On.La&&(bd(xa,Vr,Rr,Vt,Ft,or),wp(Ga,Pi,Pa,cs,Vn,Vt,Ft,or)),0<Pr&&(xr(xa,Vr,Rr,Vt+4,Ft,or),ko(Ga,Pi,Pa,cs,Vn,Vt+4,Ft,or)),On.La&&(yc(xa,Vr,Rr,Vt,Ft,or),mm(Ga,Pi,Pa,cs,Vn,Vt,Ft,or))}}if(dt.ia&&alert("todo:DitherRow"),rt.put!=null){if(Gn=16*Zn,Zn=16*(Zn+1),os?(rt.y=dt.sa,rt.O=dt.ta+Fn,rt.f=dt.qa,rt.N=dt.ra+Qr,rt.ea=dt.Ha,rt.W=dt.Ia+Qr):(Gn-=vn,rt.y=ys,rt.O=ea,rt.f=yr,rt.N=gn,rt.ea=as,rt.W=pa),is||(Zn-=vn),Zn>rt.o&&(Zn=rt.o),rt.F=null,rt.J=null,dt.Fa!=null&&0<dt.Fa.length&&Gn<Zn&&(rt.J=y(dt,rt,Gn,Zn-Gn),rt.F=dt.mb,rt.F==null&&rt.F.length==0)){kr=wn(dt,3,"Could not decode alpha data.");break t}Gn<rt.j&&(vn=rt.j-Gn,Gn=rt.j,e(!(1&vn)),rt.O+=dt.R*vn,rt.N+=dt.B*(vn>>1),rt.W+=dt.B*(vn>>1),rt.F!=null&&(rt.J+=rt.width*vn)),Gn<Zn&&(rt.O+=rt.v,rt.N+=rt.v>>1,rt.W+=rt.v>>1,rt.F!=null&&(rt.J+=rt.v),rt.ka=Gn-rt.j,rt.U=rt.va-rt.v,rt.T=Zn-Gn,kr=rt.put(rt))}hn+1!=dt.Ic||is||(r(dt.sa,dt.ta-Kt,ys,ea+16*dt.R,Kt),r(dt.qa,dt.ra-Jn,yr,gn+8*dt.B,Jn),r(dt.Ha,dt.Ia-Jn,as,pa+8*dt.B,Jn))}if(!kr)return wn(An,6,"Output aborted.")}return 1})(ie,ve)),ve.bc!=null&&ve.bc(ve),Ee&=1}return Ee?(ie.cb=0,Ee):0})(p,F)||(N=p.a)}}else N=p.a}N==0&&Y.Oa!=null&&Y.Oa.fd&&(N=yd(Y.ba))}Y=N}K=Y!=0?null:11>K?J.f.RGBA.eb:J.f.kb.y}else K=null;return K};var Lh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(k,L){for(var C="",P=0;P<4;P++)C+=String.fromCharCode(k[L++]);return C}function g(k,L){return k[L+0]|k[L+1]<<8}function x(k,L){return(k[L+0]|k[L+1]<<8|k[L+2]<<16)>>>0}function v(k,L){return(k[L+0]|k[L+1]<<8|k[L+2]<<16|k[L+3]<<24)>>>0}new h;var b=[0],T=[0],E=[],j=new h,S=n,D=(function(k,L){var C={},P=0,V=!1,oe=0,Ne=0;if(C.frames=[],!(function(q,Q){for(var ne=0;ne<4;ne++)if(q[Q+ne]!="RIFF".charCodeAt(ne))return!0;return!1})(k,L)){for(v(k,L+=4),L+=8;L<k.length;){var ue=f(k,L),pe=v(k,L+=4);L+=4;var de=pe+(1&pe);switch(ue){case"VP8 ":case"VP8L":C.frames[P]===void 0&&(C.frames[P]={}),(te=C.frames[P]).src_off=V?Ne:L-8,te.src_size=oe+pe+8,P++,V&&(V=!1,oe=0,Ne=0);break;case"VP8X":(te=C.header={}).feature_flags=k[L];var Se=L+4;te.canvas_width=1+x(k,Se),Se+=3,te.canvas_height=1+x(k,Se),Se+=3;break;case"ALPH":V=!0,oe=de+8,Ne=L-8;break;case"ANIM":(te=C.header).bgcolor=v(k,L),Se=L+4,te.loop_count=g(k,Se),Se+=2;break;case"ANMF":var ze,te;(te=C.frames[P]={}).offset_x=2*x(k,L),L+=3,te.offset_y=2*x(k,L),L+=3,te.width=1+x(k,L),L+=3,te.height=1+x(k,L),L+=3,te.duration=x(k,L),L+=3,ze=k[L++],te.dispose=1&ze,te.blend=ze>>1&1}ue!="ANMF"&&(L+=de)}return C}})(S,0);D.response=S,D.rgbaoutput=!0,D.dataurl=!1;var O=D.header?D.header:null,B=D.frames?D.frames:null;if(O){O.loop_counter=O.loop_count,b=[O.canvas_height],T=[O.canvas_width];for(var re=0;re<B.length&&B[re].blend!=0;re++);}var ae=B[0],G=j.WebPDecodeRGBA(S,ae.src_off,ae.src_size,T,b);ae.rgba=G,ae.imgwidth=T[0],ae.imgheight=b[0];for(var M=0;M<T[0]*b[0]*4;M++)E[M]=G[M];return this.width=T,this.height=b,this.data=E,this}(function(n){var e,t,r,a,o,c,u,h,f,g=function(q){return q=q||{},this.isStrokeTransparent=q.isStrokeTransparent||!1,this.strokeOpacity=q.strokeOpacity||1,this.strokeStyle=q.strokeStyle||"#000000",this.fillStyle=q.fillStyle||"#000000",this.isFillTransparent=q.isFillTransparent||!1,this.fillOpacity=q.fillOpacity||1,this.font=q.font||"10px sans-serif",this.textBaseline=q.textBaseline||"alphabetic",this.textAlign=q.textAlign||"left",this.lineWidth=q.lineWidth||1,this.lineJoin=q.lineJoin||"miter",this.lineCap=q.lineCap||"butt",this.path=q.path||[],this.transform=q.transform!==void 0?q.transform.clone():new h,this.globalCompositeOperation=q.globalCompositeOperation||"normal",this.globalAlpha=q.globalAlpha||1,this.clip_path=q.clip_path||[],this.currentPoint=q.currentPoint||new c,this.miterLimit=q.miterLimit||10,this.lastPoint=q.lastPoint||new c,this.lineDashOffset=q.lineDashOffset||0,this.lineDash=q.lineDash||[],this.margin=q.margin||[0,0,0,0],this.prevPageLastElemOffset=q.prevPageLastElemOffset||0,this.ignoreClearRect=typeof q.ignoreClearRect!="boolean"||q.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new x(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,c=this.internal.Point,u=this.internal.Rectangle,h=this.internal.Matrix,f=new g}]);var x=function(q){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Q=q;Object.defineProperty(this,"pdf",{get:function(){return Q}});var ne=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ne},set:function(se){ne=!!se}});var he=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return he},set:function(se){he=!!se}});var me=0;Object.defineProperty(this,"posX",{get:function(){return me},set:function(se){isNaN(se)||(me=se)}});var be=0;Object.defineProperty(this,"posY",{get:function(){return be},set:function(se){isNaN(se)||(be=se)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(se){var st;typeof se=="number"?st=[se,se,se,se]:((st=new Array(4))[0]=se[0],st[1]=se.length>=2?se[1]:st[0],st[2]=se.length>=3?se[2]:st[0],st[3]=se.length>=4?se[3]:st[1]),f.margin=st}});var Le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Le},set:function(se){Le=se}});var Re=0;Object.defineProperty(this,"lastBreak",{get:function(){return Re},set:function(se){Re=se}});var qe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return qe},set:function(se){qe=se}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(se){se instanceof g&&(f=se)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(se){f.path=se}});var Je=[];Object.defineProperty(this,"ctxStack",{get:function(){return Je},set:function(se){Je=se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(se){var st;st=v(se),this.ctx.fillStyle=st.style,this.ctx.isFillTransparent=st.a===0,this.ctx.fillOpacity=st.a,this.pdf.setFillColor(st.r,st.g,st.b,{a:st.a}),this.pdf.setTextColor(st.r,st.g,st.b,{a:st.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(se){var st=v(se);this.ctx.strokeStyle=st.style,this.ctx.isStrokeTransparent=st.a===0,this.ctx.strokeOpacity=st.a,st.a===0?this.pdf.setDrawColor(255,255,255):(st.a,this.pdf.setDrawColor(st.r,st.g,st.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(se){["butt","round","square"].indexOf(se)!==-1&&(this.ctx.lineCap=se,this.pdf.setLineCap(se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(se){isNaN(se)||(this.ctx.lineWidth=se,this.pdf.setLineWidth(se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(se){["bevel","round","miter"].indexOf(se)!==-1&&(this.ctx.lineJoin=se,this.pdf.setLineJoin(se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(se){isNaN(se)||(this.ctx.miterLimit=se,this.pdf.setMiterLimit(se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(se){this.ctx.textBaseline=se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(se){["right","end","center","left","start"].indexOf(se)!==-1&&(this.ctx.textAlign=se)}});var it=null,at=null,ft=null;Object.defineProperty(this,"fontFaces",{get:function(){return ft},set:function(se){it=null,at=null,ft=se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(se){var st;if(this.ctx.font=se,(st=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(se))!==null){var rn=st[1];st[2];var Pt=st[3],He=st[4];st[5];var ct=st[6],lt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(He)[2];He=Math.floor(lt==="px"?parseFloat(He)*this.pdf.internal.scaleFactor:lt==="em"?parseFloat(He)*this.pdf.getFontSize():parseFloat(He)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(He);var Mt=(function(Nt){var Cr,ln,Lt=[],Wt=Nt.trim();if(Wt==="")return D1;if(Wt in U6)return[U6[Wt]];for(;Wt!=="";){switch(ln=null,Cr=(Wt=B6(Wt)).charAt(0)){case'"':case"'":ln=JG(Wt.substring(1),Cr);break;default:ln=ZG(Wt)}if(ln===null||(Lt.push(ln[0]),(Wt=B6(ln[1]))!==""&&Wt.charAt(0)!==","))return D1;Wt=Wt.replace(/^,/,"")}return Lt})(ct);if(this.fontFaces){var Et=(function(Nt,Cr){var ln=Nt.getFontList(),Lt=JSON.stringify(ln);if(it===null||at!==Lt){var Wt=(function(an){var Tt=[];return Object.keys(an).forEach(function(zn){an[zn].forEach(function(zt){var qt=null;switch(zt){case"bold":qt={family:zn,weight:"bold"};break;case"italic":qt={family:zn,style:"italic"};break;case"bolditalic":qt={family:zn,weight:"bold",style:"italic"};break;case"":case"normal":qt={family:zn}}qt!==null&&(qt.ref={name:zn,style:zt},Tt.push(qt))})}),Tt})(ln);it=(function(an){for(var Tt={},zn=0;zn<an.length;++zn){var zt=L1(an[zn]),qt=zt.family,Hn=zt.stretch,At=zt.style,jt=zt.weight;Tt[qt]=Tt[qt]||{},Tt[qt][Hn]=Tt[qt][Hn]||{},Tt[qt][Hn][At]=Tt[qt][Hn][At]||{},Tt[qt][Hn][At][jt]=zt}return Tt})(Wt.concat(Cr)),at=Lt}return it})(this.pdf,this.fontFaces),sn=Mt.map(function(Nt){return{family:Nt,stretch:"normal",weight:Pt,style:rn}}),dn=(function(Nt,Cr,ln){for(var Lt=(ln=ln||{}).defaultFontFamily||"times",Wt=Object.assign({},QG,ln.genericFontFamilies||{}),an=null,Tt=null,zn=0;zn<Cr.length;++zn)if(Wt[(an=L1(Cr[zn])).family]&&(an.family=Wt[an.family]),Nt.hasOwnProperty(an.family)){Tt=Nt[an.family];break}if(!(Tt=Tt||Nt[Lt]))throw new Error("Could not find a font-family for the rule '"+V6(an)+"' and default family '"+Lt+"'.");if(Tt=(function(zt,qt){if(qt[zt])return qt[zt];var Hn=H2[zt],At=Hn<=H2.normal?-1:1,jt=F6(qt,kC,Hn,At);if(!jt)throw new Error("Could not find a matching font-stretch value for "+zt);return jt})(an.stretch,Tt),Tt=(function(zt,qt){if(qt[zt])return qt[zt];for(var Hn=IC[zt],At=0;At<Hn.length;++At)if(qt[Hn[At]])return qt[Hn[At]];throw new Error("Could not find a matching font-style for "+zt)})(an.style,Tt),!(Tt=(function(zt,qt){if(qt[zt])return qt[zt];if(zt===400&&qt[500])return qt[500];if(zt===500&&qt[400])return qt[400];var Hn=XG[zt],At=F6(qt,RC,Hn,zt<400?-1:1);if(!At)throw new Error("Could not find a matching font-weight for value "+zt);return At})(an.weight,Tt)))throw new Error("Failed to resolve a font for the rule '"+V6(an)+"'.");return Tt})(Et,sn);this.pdf.setFont(dn.ref.name,dn.ref.style)}else{var Qt="";(Pt==="bold"||parseInt(Pt,10)>=700||rn==="bold")&&(Qt="bold"),rn==="italic"&&(Qt+="italic"),Qt.length===0&&(Qt="normal");for(var pn="",on={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},wt=0;wt<Mt.length;wt++){if(this.pdf.internal.getFont(Mt[wt],Qt,{noFallback:!0,disableWarning:!0})!==void 0){pn=Mt[wt];break}if(Qt==="bolditalic"&&this.pdf.internal.getFont(Mt[wt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)pn=Mt[wt],Qt="bold";else if(this.pdf.internal.getFont(Mt[wt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){pn=Mt[wt],Qt="normal";break}}if(pn===""){for(var en=0;en<Mt.length;en++)if(on[Mt[en]]){pn=on[Mt[en]];break}}pn=pn===""?"Times":pn,this.pdf.setFont(pn,Qt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(se){this.ctx.globalCompositeOperation=se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(se){this.ctx.globalAlpha=se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(se){this.ctx.lineDashOffset=se,te.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(se){this.ctx.lineDash=se,te.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(se){this.ctx.ignoreClearRect=!!se}})};x.prototype.setLineDash=function(q){this.lineDash=q},x.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},x.prototype.fill=function(){B.call(this,"fill",!1)},x.prototype.stroke=function(){B.call(this,"stroke",!1)},x.prototype.beginPath=function(){this.path=[{type:"begin"}]},x.prototype.moveTo=function(q,Q){if(isNaN(q)||isNaN(Q))throw Ar.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ne=this.ctx.transform.applyToPoint(new c(q,Q));this.path.push({type:"mt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new c(q,Q)},x.prototype.closePath=function(){var q=new c(0,0),Q=0;for(Q=this.path.length-1;Q!==-1;Q--)if(this.path[Q].type==="begin"&&ur(this.path[Q+1])==="object"&&typeof this.path[Q+1].x=="number"){q=new c(this.path[Q+1].x,this.path[Q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(q.x,q.y)},x.prototype.lineTo=function(q,Q){if(isNaN(q)||isNaN(Q))throw Ar.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ne=this.ctx.transform.applyToPoint(new c(q,Q));this.path.push({type:"lt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new c(ne.x,ne.y)},x.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),B.call(this,null,!0)},x.prototype.quadraticCurveTo=function(q,Q,ne,he){if(isNaN(ne)||isNaN(he)||isNaN(q)||isNaN(Q))throw Ar.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var me=this.ctx.transform.applyToPoint(new c(ne,he)),be=this.ctx.transform.applyToPoint(new c(q,Q));this.path.push({type:"qct",x1:be.x,y1:be.y,x:me.x,y:me.y}),this.ctx.lastPoint=new c(me.x,me.y)},x.prototype.bezierCurveTo=function(q,Q,ne,he,me,be){if(isNaN(me)||isNaN(be)||isNaN(q)||isNaN(Q)||isNaN(ne)||isNaN(he))throw Ar.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Le=this.ctx.transform.applyToPoint(new c(me,be)),Re=this.ctx.transform.applyToPoint(new c(q,Q)),qe=this.ctx.transform.applyToPoint(new c(ne,he));this.path.push({type:"bct",x1:Re.x,y1:Re.y,x2:qe.x,y2:qe.y,x:Le.x,y:Le.y}),this.ctx.lastPoint=new c(Le.x,Le.y)},x.prototype.arc=function(q,Q,ne,he,me,be){if(isNaN(q)||isNaN(Q)||isNaN(ne)||isNaN(he)||isNaN(me))throw Ar.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(be=!!be,!this.ctx.transform.isIdentity){var Le=this.ctx.transform.applyToPoint(new c(q,Q));q=Le.x,Q=Le.y;var Re=this.ctx.transform.applyToPoint(new c(0,ne)),qe=this.ctx.transform.applyToPoint(new c(0,0));ne=Math.sqrt(Math.pow(Re.x-qe.x,2)+Math.pow(Re.y-qe.y,2))}Math.abs(me-he)>=2*Math.PI&&(he=0,me=2*Math.PI),this.path.push({type:"arc",x:q,y:Q,radius:ne,startAngle:he,endAngle:me,counterclockwise:be})},x.prototype.arcTo=function(q,Q,ne,he,me){throw new Error("arcTo not implemented.")},x.prototype.rect=function(q,Q,ne,he){if(isNaN(q)||isNaN(Q)||isNaN(ne)||isNaN(he))throw Ar.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(q,Q),this.lineTo(q+ne,Q),this.lineTo(q+ne,Q+he),this.lineTo(q,Q+he),this.lineTo(q,Q),this.lineTo(q+ne,Q),this.lineTo(q,Q)},x.prototype.fillRect=function(q,Q,ne,he){if(isNaN(q)||isNaN(Q)||isNaN(ne)||isNaN(he))throw Ar.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var me={};this.lineCap!=="butt"&&(me.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(me.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(q,Q,ne,he),this.fill(),me.hasOwnProperty("lineCap")&&(this.lineCap=me.lineCap),me.hasOwnProperty("lineJoin")&&(this.lineJoin=me.lineJoin)}},x.prototype.strokeRect=function(q,Q,ne,he){if(isNaN(q)||isNaN(Q)||isNaN(ne)||isNaN(he))throw Ar.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");T.call(this)||(this.beginPath(),this.rect(q,Q,ne,he),this.stroke())},x.prototype.clearRect=function(q,Q,ne,he){if(isNaN(q)||isNaN(Q)||isNaN(ne)||isNaN(he))throw Ar.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(q,Q,ne,he))},x.prototype.save=function(q){q=typeof q!="boolean"||q;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("q");if(this.pdf.setPage(Q),q){this.ctx.fontSize=this.pdf.internal.getFontSize();var he=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=he}},x.prototype.restore=function(q){q=typeof q!="boolean"||q;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("Q");this.pdf.setPage(Q),q&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},x.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(q){var Q,ne,he,me;if(q.isCanvasGradient===!0&&(q=q.getColor()),!q)return{r:0,g:0,b:0,a:0,style:q};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(q))Q=0,ne=0,he=0,me=0;else{var be=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(q);if(be!==null)Q=parseInt(be[1]),ne=parseInt(be[2]),he=parseInt(be[3]),me=1;else if((be=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(q))!==null)Q=parseInt(be[1]),ne=parseInt(be[2]),he=parseInt(be[3]),me=parseFloat(be[4]);else{if(me=1,typeof q=="string"&&q.charAt(0)!=="#"){var Le=new jC(q);q=Le.ok?Le.toHex():"#000000"}q.length===4?(Q=q.substring(1,2),Q+=Q,ne=q.substring(2,3),ne+=ne,he=q.substring(3,4),he+=he):(Q=q.substring(1,3),ne=q.substring(3,5),he=q.substring(5,7)),Q=parseInt(Q,16),ne=parseInt(ne,16),he=parseInt(he,16)}}return{r:Q,g:ne,b:he,a:me,style:q}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},T=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};x.prototype.fillText=function(q,Q,ne,he){if(isNaN(Q)||isNaN(ne)||typeof q!="string")throw Ar.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(he=isNaN(he)?void 0:he,!b.call(this)){var me=de(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;P.call(this,{text:q,x:Q,y:ne,scale:be,angle:me,align:this.textAlign,maxWidth:he})}},x.prototype.strokeText=function(q,Q,ne,he){if(isNaN(Q)||isNaN(ne)||typeof q!="string")throw Ar.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!T.call(this)){he=isNaN(he)?void 0:he;var me=de(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;P.call(this,{text:q,x:Q,y:ne,scale:be,renderingMode:"stroke",angle:me,align:this.textAlign,maxWidth:he})}},x.prototype.measureText=function(q){if(typeof q!="string")throw Ar.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Q=this.pdf,ne=this.pdf.internal.scaleFactor,he=Q.internal.getFontSize(),me=Q.getStringUnitWidth(q)*he/Q.internal.scaleFactor;return new function(be){var Le=(be=be||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Le}}),this}({width:me*=Math.round(96*ne/72*1e4)/1e4})},x.prototype.scale=function(q,Q){if(isNaN(q)||isNaN(Q))throw Ar.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ne=new h(q,0,0,Q,0,0);this.ctx.transform=this.ctx.transform.multiply(ne)},x.prototype.rotate=function(q){if(isNaN(q))throw Ar.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Q=new h(Math.cos(q),Math.sin(q),-Math.sin(q),Math.cos(q),0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},x.prototype.translate=function(q,Q){if(isNaN(q)||isNaN(Q))throw Ar.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ne=new h(1,0,0,1,q,Q);this.ctx.transform=this.ctx.transform.multiply(ne)},x.prototype.transform=function(q,Q,ne,he,me,be){if(isNaN(q)||isNaN(Q)||isNaN(ne)||isNaN(he)||isNaN(me)||isNaN(be))throw Ar.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Le=new h(q,Q,ne,he,me,be);this.ctx.transform=this.ctx.transform.multiply(Le)},x.prototype.setTransform=function(q,Q,ne,he,me,be){q=isNaN(q)?1:q,Q=isNaN(Q)?0:Q,ne=isNaN(ne)?0:ne,he=isNaN(he)?1:he,me=isNaN(me)?0:me,be=isNaN(be)?0:be,this.ctx.transform=new h(q,Q,ne,he,me,be)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};x.prototype.drawImage=function(q,Q,ne,he,me,be,Le,Re,qe){var Je=this.pdf.getImageProperties(q),it=1,at=1,ft=1,se=1;he!==void 0&&Re!==void 0&&(ft=Re/he,se=qe/me,it=Je.width/he*Re/he,at=Je.height/me*qe/me),be===void 0&&(be=Q,Le=ne,Q=0,ne=0),he!==void 0&&Re===void 0&&(Re=he,qe=me),he===void 0&&Re===void 0&&(Re=Je.width,qe=Je.height);var st=this.ctx.transform.decompose(),rn=de(st.rotate.shx),Pt=new h,He=(Pt=(Pt=(Pt=Pt.multiply(st.translate)).multiply(st.skew)).multiply(st.scale)).applyToRectangle(new u(be-Q*ft,Le-ne*se,he*it,me*at));if(this.autoPaging){for(var ct,lt=j.call(this,He),Mt=[],Et=0;Et<lt.length;Et+=1)Mt.indexOf(lt[Et])===-1&&Mt.push(lt[Et]);O(Mt);for(var sn=Mt[0],dn=Mt[Mt.length-1],Qt=sn;Qt<dn+1;Qt++){this.pdf.setPage(Qt);var pn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],on=Qt===1?this.posY+this.margin[0]:this.margin[0],wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],en=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Nt=Qt===1?0:wt+(Qt-2)*en;if(this.ctx.clip_path.length!==0){var Cr=this.path;ct=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(ct,this.posX+this.margin[3],-Nt+on+this.ctx.prevPageLastElemOffset),re.call(this,"fill",!0),this.path=Cr}var ln=JSON.parse(JSON.stringify(He));ln=D([ln],this.posX+this.margin[3],-Nt+on+this.ctx.prevPageLastElemOffset)[0];var Lt=(Qt>sn||Qt<dn)&&E.call(this);Lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pn,en,null).clip().discardPath()),this.pdf.addImage(q,"JPEG",ln.x,ln.y,ln.w,ln.h,null,null,rn),Lt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(q,"JPEG",He.x,He.y,He.w,He.h,null,null,rn)};var j=function(q,Q,ne){var he=[];Q=Q||this.pdf.internal.pageSize.width,ne=ne||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var me=this.posY+this.ctx.prevPageLastElemOffset;switch(q.type){default:case"mt":case"lt":he.push(Math.floor((q.y+me)/ne)+1);break;case"arc":he.push(Math.floor((q.y+me-q.radius)/ne)+1),he.push(Math.floor((q.y+me+q.radius)/ne)+1);break;case"qct":var be=Se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,q.x1,q.y1,q.x,q.y);he.push(Math.floor((be.y+me)/ne)+1),he.push(Math.floor((be.y+be.h+me)/ne)+1);break;case"bct":var Le=ze(this.ctx.lastPoint.x,this.ctx.lastPoint.y,q.x1,q.y1,q.x2,q.y2,q.x,q.y);he.push(Math.floor((Le.y+me)/ne)+1),he.push(Math.floor((Le.y+Le.h+me)/ne)+1);break;case"rect":he.push(Math.floor((q.y+me)/ne)+1),he.push(Math.floor((q.y+q.h+me)/ne)+1)}for(var Re=0;Re<he.length;Re+=1)for(;this.pdf.internal.getNumberOfPages()<he[Re];)S.call(this);return he},S=function(){var q=this.fillStyle,Q=this.strokeStyle,ne=this.font,he=this.lineCap,me=this.lineWidth,be=this.lineJoin;this.pdf.addPage(),this.fillStyle=q,this.strokeStyle=Q,this.font=ne,this.lineCap=he,this.lineWidth=me,this.lineJoin=be},D=function(q,Q,ne){for(var he=0;he<q.length;he++)switch(q[he].type){case"bct":q[he].x2+=Q,q[he].y2+=ne;case"qct":q[he].x1+=Q,q[he].y1+=ne;default:q[he].x+=Q,q[he].y+=ne}return q},O=function(q){return q.sort(function(Q,ne){return Q-ne})},B=function(q,Q){var ne=this.fillStyle,he=this.strokeStyle,me=this.lineCap,be=this.lineWidth,Le=Math.abs(be*this.ctx.transform.scaleX),Re=this.lineJoin;if(this.autoPaging){for(var qe,Je,it=JSON.parse(JSON.stringify(this.path)),at=JSON.parse(JSON.stringify(this.path)),ft=[],se=0;se<at.length;se++)if(at[se].x!==void 0)for(var st=j.call(this,at[se]),rn=0;rn<st.length;rn+=1)ft.indexOf(st[rn])===-1&&ft.push(st[rn]);for(var Pt=0;Pt<ft.length;Pt++)for(;this.pdf.internal.getNumberOfPages()<ft[Pt];)S.call(this);O(ft);for(var He=ft[0],ct=ft[ft.length-1],lt=He;lt<ct+1;lt++){this.pdf.setPage(lt),this.fillStyle=ne,this.strokeStyle=he,this.lineCap=me,this.lineWidth=Le,this.lineJoin=Re;var Mt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Et=lt===1?this.posY+this.margin[0]:this.margin[0],sn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],dn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qt=lt===1?0:sn+(lt-2)*dn;if(this.ctx.clip_path.length!==0){var pn=this.path;qe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(qe,this.posX+this.margin[3],-Qt+Et+this.ctx.prevPageLastElemOffset),re.call(this,q,!0),this.path=pn}if(Je=JSON.parse(JSON.stringify(it)),this.path=D(Je,this.posX+this.margin[3],-Qt+Et+this.ctx.prevPageLastElemOffset),Q===!1||lt===0){var on=(lt>He||lt<ct)&&E.call(this);on&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Mt,dn,null).clip().discardPath()),re.call(this,q,Q),on&&this.pdf.restoreGraphicsState()}this.lineWidth=be}this.path=it}else this.lineWidth=Le,re.call(this,q,Q),this.lineWidth=be},re=function(q,Q){if((q!=="stroke"||Q||!T.call(this))&&(q==="stroke"||Q||!b.call(this))){for(var ne,he,me=[],be=this.path,Le=0;Le<be.length;Le++){var Re=be[Le];switch(Re.type){case"begin":me.push({begin:!0});break;case"close":me.push({close:!0});break;case"mt":me.push({start:Re,deltas:[],abs:[]});break;case"lt":var qe=me.length;if(be[Le-1]&&!isNaN(be[Le-1].x)&&(ne=[Re.x-be[Le-1].x,Re.y-be[Le-1].y],qe>0)){for(;qe>=0;qe--)if(me[qe-1].close!==!0&&me[qe-1].begin!==!0){me[qe-1].deltas.push(ne),me[qe-1].abs.push(Re);break}}break;case"bct":ne=[Re.x1-be[Le-1].x,Re.y1-be[Le-1].y,Re.x2-be[Le-1].x,Re.y2-be[Le-1].y,Re.x-be[Le-1].x,Re.y-be[Le-1].y],me[me.length-1].deltas.push(ne);break;case"qct":var Je=be[Le-1].x+2/3*(Re.x1-be[Le-1].x),it=be[Le-1].y+2/3*(Re.y1-be[Le-1].y),at=Re.x+2/3*(Re.x1-Re.x),ft=Re.y+2/3*(Re.y1-Re.y),se=Re.x,st=Re.y;ne=[Je-be[Le-1].x,it-be[Le-1].y,at-be[Le-1].x,ft-be[Le-1].y,se-be[Le-1].x,st-be[Le-1].y],me[me.length-1].deltas.push(ne);break;case"arc":me.push({deltas:[],abs:[],arc:!0}),Array.isArray(me[me.length-1].abs)&&me[me.length-1].abs.push(Re)}}he=Q?null:q==="stroke"?"stroke":"fill";for(var rn=!1,Pt=0;Pt<me.length;Pt++)if(me[Pt].arc)for(var He=me[Pt].abs,ct=0;ct<He.length;ct++){var lt=He[ct];lt.type==="arc"?M.call(this,lt.x,lt.y,lt.radius,lt.startAngle,lt.endAngle,lt.counterclockwise,void 0,Q,!rn):V.call(this,lt.x,lt.y),rn=!0}else if(me[Pt].close===!0)this.pdf.internal.out("h"),rn=!1;else if(me[Pt].begin!==!0){var Mt=me[Pt].start.x,Et=me[Pt].start.y;oe.call(this,me[Pt].deltas,Mt,Et),rn=!0}he&&k.call(this,he),Q&&L.call(this)}},ae=function(q){var Q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ne=Q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return q-ne;case"top":return q+Q-ne;case"hanging":return q+Q-2*ne;case"middle":return q+Q/2-ne;default:return q}},G=function(q){return q+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};x.prototype.createLinearGradient=function(){var q=function(){};return q.colorStops=[],q.addColorStop=function(Q,ne){this.colorStops.push([Q,ne])},q.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},q.isCanvasGradient=!0,q},x.prototype.createPattern=function(){return this.createLinearGradient()},x.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(q,Q,ne,he,me,be,Le,Re,qe){for(var Je=ue.call(this,ne,he,me,be),it=0;it<Je.length;it++){var at=Je[it];it===0&&(qe?C.call(this,at.x1+q,at.y1+Q):V.call(this,at.x1+q,at.y1+Q)),Ne.call(this,q,Q,at.x2,at.y2,at.x3,at.y3,at.x4,at.y4)}Re?L.call(this):k.call(this,Le)},k=function(q){switch(q){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},C=function(q,Q){this.pdf.internal.out(t(q)+" "+r(Q)+" m")},P=function(q){var Q;switch(q.align){case"right":case"end":Q="right";break;case"center":Q="center";break;default:Q="left"}var ne,he,me,be=this.pdf.getTextDimensions(q.text),Le=ae.call(this,q.y),Re=G.call(this,Le)-be.h,qe=this.ctx.transform.applyToPoint(new c(q.x,Le));if(this.autoPaging){var Je=this.ctx.transform.decompose(),it=new h;it=(it=(it=it.multiply(Je.translate)).multiply(Je.skew)).multiply(Je.scale);for(var at=this.ctx.transform.applyToRectangle(new u(q.x,Le,be.w,be.h)),ft=it.applyToRectangle(new u(q.x,Re,be.w,be.h)),se=j.call(this,ft),st=[],rn=0;rn<se.length;rn+=1)st.indexOf(se[rn])===-1&&st.push(se[rn]);O(st);for(var Pt=st[0],He=st[st.length-1],ct=Pt;ct<He+1;ct++){this.pdf.setPage(ct);var lt=ct===1?this.posY+this.margin[0]:this.margin[0],Mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Et=this.pdf.internal.pageSize.height-this.margin[2],sn=Et-this.margin[0],dn=this.pdf.internal.pageSize.width-this.margin[1],Qt=dn-this.margin[3],pn=ct===1?0:Mt+(ct-2)*sn;if(this.ctx.clip_path.length!==0){var on=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(ne,this.posX+this.margin[3],-1*pn+lt),re.call(this,"fill",!0),this.path=on}var wt=D([JSON.parse(JSON.stringify(ft))],this.posX+this.margin[3],-pn+lt+this.ctx.prevPageLastElemOffset)[0];q.scale>=.01&&(he=this.pdf.internal.getFontSize(),this.pdf.setFontSize(he*q.scale),me=this.lineWidth,this.lineWidth=me*q.scale);var en=this.autoPaging!=="text";if(en||wt.y+wt.h<=Et){if(en||wt.y>=lt&&wt.x<=dn){var Nt=en?q.text:this.pdf.splitTextToSize(q.text,q.maxWidth||dn-wt.x)[0],Cr=D([JSON.parse(JSON.stringify(at))],this.posX+this.margin[3],-pn+lt+this.ctx.prevPageLastElemOffset)[0],ln=en&&(ct>Pt||ct<He)&&E.call(this);ln&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qt,sn,null).clip().discardPath()),this.pdf.text(Nt,Cr.x,Cr.y,{angle:q.angle,align:Q,renderingMode:q.renderingMode}),ln&&this.pdf.restoreGraphicsState()}}else wt.y<Et&&(this.ctx.prevPageLastElemOffset+=Et-wt.y);q.scale>=.01&&(this.pdf.setFontSize(he),this.lineWidth=me)}}else q.scale>=.01&&(he=this.pdf.internal.getFontSize(),this.pdf.setFontSize(he*q.scale),me=this.lineWidth,this.lineWidth=me*q.scale),this.pdf.text(q.text,qe.x+this.posX,qe.y+this.posY,{angle:q.angle,align:Q,renderingMode:q.renderingMode,maxWidth:q.maxWidth}),q.scale>=.01&&(this.pdf.setFontSize(he),this.lineWidth=me)},V=function(q,Q,ne,he){ne=ne||0,he=he||0,this.pdf.internal.out(t(q+ne)+" "+r(Q+he)+" l")},oe=function(q,Q,ne){return this.pdf.lines(q,Q,ne,null,null)},Ne=function(q,Q,ne,he,me,be,Le,Re){this.pdf.internal.out([e(a(ne+q)),e(o(he+Q)),e(a(me+q)),e(o(be+Q)),e(a(Le+q)),e(o(Re+Q)),"c"].join(" "))},ue=function(q,Q,ne,he){for(var me=2*Math.PI,be=Math.PI/2;Q>ne;)Q-=me;var Le=Math.abs(ne-Q);Le<me&&he&&(Le=me-Le);for(var Re=[],qe=he?-1:1,Je=Q;Le>1e-5;){var it=Je+qe*Math.min(Le,be);Re.push(pe.call(this,q,Je,it)),Le-=Math.abs(it-Je),Je=it}return Re},pe=function(q,Q,ne){var he=(ne-Q)/2,me=q*Math.cos(he),be=q*Math.sin(he),Le=me,Re=-be,qe=Le*Le+Re*Re,Je=qe+Le*me+Re*be,it=4/3*(Math.sqrt(2*qe*Je)-Je)/(Le*be-Re*me),at=Le-it*Re,ft=Re+it*Le,se=at,st=-ft,rn=he+Q,Pt=Math.cos(rn),He=Math.sin(rn);return{x1:q*Math.cos(Q),y1:q*Math.sin(Q),x2:at*Pt-ft*He,y2:at*He+ft*Pt,x3:se*Pt-st*He,y3:se*He+st*Pt,x4:q*Math.cos(ne),y4:q*Math.sin(ne)}},de=function(q){return 180*q/Math.PI},Se=function(q,Q,ne,he,me,be){var Le=q+.5*(ne-q),Re=Q+.5*(he-Q),qe=me+.5*(ne-me),Je=be+.5*(he-be),it=Math.min(q,me,Le,qe),at=Math.max(q,me,Le,qe),ft=Math.min(Q,be,Re,Je),se=Math.max(Q,be,Re,Je);return new u(it,ft,at-it,se-ft)},ze=function(q,Q,ne,he,me,be,Le,Re){var qe,Je,it,at,ft,se,st,rn,Pt,He,ct,lt,Mt,Et,sn=ne-q,dn=he-Q,Qt=me-ne,pn=be-he,on=Le-me,wt=Re-be;for(Je=0;Je<41;Je++)Pt=(st=(it=q+(qe=Je/40)*sn)+qe*((ft=ne+qe*Qt)-it))+qe*(ft+qe*(me+qe*on-ft)-st),He=(rn=(at=Q+qe*dn)+qe*((se=he+qe*pn)-at))+qe*(se+qe*(be+qe*wt-se)-rn),Je==0?(ct=Pt,lt=He,Mt=Pt,Et=He):(ct=Math.min(ct,Pt),lt=Math.min(lt,He),Mt=Math.max(Mt,Pt),Et=Math.max(Et,He));return new u(Math.round(ct),Math.round(lt),Math.round(Mt-ct),Math.round(Et-lt))},te=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var q,Q,ne=(q=this.ctx.lineDash,Q=this.ctx.lineDashOffset,JSON.stringify({lineDash:q,lineDashOffset:Q}));this.prevLineDash!==ne&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ne)}}})(kt.API),(function(n){var e=function(c){var u,h,f,g,x,v,b,T,E,j;for(h=[],f=0,g=(c+=u="\0\0\0\0".slice(c.length%4||4)).length;g>f;f+=4)(x=(c.charCodeAt(f)<<24)+(c.charCodeAt(f+1)<<16)+(c.charCodeAt(f+2)<<8)+c.charCodeAt(f+3))!==0?(v=(x=((x=((x=((x=(x-(j=x%85))/85)-(E=x%85))/85)-(T=x%85))/85)-(b=x%85))/85)%85,h.push(v+33,b+33,T+33,E+33,j+33)):h.push(122);return(function(S,D){for(var O=D;O>0;O--)S.pop()})(h,u.length),String.fromCharCode.apply(String,h)+"~>"},t=function(c){var u,h,f,g,x,v=String,b="length",T=255,E="charCodeAt",j="slice",S="replace";for(c[j](-2),c=c[j](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),f=[],g=0,x=(c+=u="uuuuu"[j](c[b]%5||5))[b];x>g;g+=5)h=52200625*(c[E](g)-33)+614125*(c[E](g+1)-33)+7225*(c[E](g+2)-33)+85*(c[E](g+3)-33)+(c[E](g+4)-33),f.push(T&h>>24,T&h>>16,T&h>>8,T&h);return(function(D,O){for(var B=O;B>0;B--)D.pop()})(f,u[b]),v.fromCharCode.apply(v,f)},r=function(c){return c.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(c){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((c=c.replace(/\s/g,"")).indexOf(">")!==-1&&(c=c.substr(0,c.indexOf(">"))),c.length%2&&(c+="0"),u.test(c)===!1)return"";for(var h="",f=0;f<c.length;f+=2)h+=String.fromCharCode("0x"+(c[f]+c[f+1]));return h},o=function(c){for(var u=new Uint8Array(c.length),h=c.length;h--;)u[h]=c.charCodeAt(h);return(u=F2(u)).reduce(function(f,g){return f+String.fromCharCode(g)},"")};n.processDataByFilters=function(c,u){var h=0,f=c||"",g=[];for(typeof(u=u||[])=="string"&&(u=[u]),h=0;h<u.length;h+=1)switch(u[h]){case"ASCII85Decode":case"/ASCII85Decode":f=t(f),g.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=e(f),g.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=a(f),g.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=r(f),g.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=o(f),g.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[h]+'" is not implemented')}return{data:f,reverseChain:g.reverse().join(" ")}}})(kt.API),(function(n){n.loadFile=function(e,t,r){return(function(a,o,c){o=o!==!1,c=typeof c=="function"?c:function(){};var u=void 0;try{u=(function(h,f,g){var x=new XMLHttpRequest,v=0,b=function(T){var E=T.length,j=[],S=String.fromCharCode;for(v=0;v<E;v+=1)j.push(S(255&T.charCodeAt(v)));return j.join("")};if(x.open("GET",h,!f),x.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(x.onload=function(){x.status===200?g(b(this.responseText)):g(void 0)}),x.send(null),f&&x.status===200)return b(x.responseText)})(a,o,c)}catch{}return u})(e,t,r)},n.loadImageFile=n.loadFile})(kt.API),(function(n){function e(){return(nn.html2canvas?Promise.resolve(nn.html2canvas):p1(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function t(){return(nn.DOMPurify?Promise.resolve(nn.DOMPurify):p1(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var r=function(u){var h=ur(u);return h==="undefined"?"undefined":h==="string"||u instanceof String?"string":h==="number"||u instanceof Number?"number":h==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":h==="object"?"object":"unknown"},a=function(u,h){var f=document.createElement(u);for(var g in h.className&&(f.className=h.className),h.innerHTML&&h.dompurify&&(f.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)f.style[g]=h.style[g];return f},o=function u(h,f){for(var g=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),x=h.firstChild;x;x=x.nextSibling)f!==!0&&x.nodeType===1&&x.nodeName==="SCRIPT"||g.appendChild(u(x,f));return h.nodeType===1&&(h.nodeName==="CANVAS"?(g.width=h.width,g.height=h.height,g.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(g.value=h.value),g.addEventListener("load",function(){g.scrollTop=h.scrollTop,g.scrollLeft=h.scrollLeft},!0)),g},c=function u(h){var f=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),g=u.convert(Promise.resolve(),f);return(g=g.setProgress(1,u,1,[u])).set(h)};(c.prototype=Object.create(Promise.prototype)).constructor=c,c.convert=function(u,h){return u.__proto__=h||c.prototype,u},c.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},c.prototype.from=function(u,h){return this.then(function(){switch(h=h||(function(f){switch(r(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(u),h){case"string":return this.then(t).then(function(f){return this.set({src:a("div",{innerHTML:u,dompurify:f})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},c.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},c.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},c.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(h){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,h(this.prop.container,f)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},c.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(h){var f=this.opt.jsPDF,g=this.opt.fontFaces,x=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:x,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=g,g)for(var b=0;b<g.length;++b){var T=g[b],E=T.src.find(function(j){return j.format==="truetype"});E&&f.addFont(E.url,T.ref.name,T.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,f.context2d.save(!0),h(this.prop.container,v)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},c.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},c.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},c.prototype.output=function(u,h,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(u,h):this.outputPdf(u,h)},c.prototype.outputPdf=function(u,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,h)})},c.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},c.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},c.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},c.prototype.set=function(u){if(r(u)!=="object")return this;var h=Object.keys(u||{}).map(function(f){if(f in c.template.prop)return function(){this.prop[f]=u[f]};switch(f){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[f]=u[f]}}},this);return this.then(function(){return this.thenList(h)})},c.prototype.get=function(u,h){return this.then(function(){var f=u in c.template.prop?this.prop[u]:this.opt[u];return h?h(f):f})},c.prototype.setMargin=function(u){return this.then(function(){switch(r(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},c.prototype.setPageSize=function(u){function h(f,g){return Math.floor(f*g/72*96)}return this.then(function(){(u=u||kt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:h(u.inner.width,u.k),height:h(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},c.prototype.setProgress=function(u,h,f,g){return u!=null&&(this.progress.val=u),h!=null&&(this.progress.state=h),f!=null&&(this.progress.n=f),g!=null&&(this.progress.stack=g),this.progress.ratio=this.progress.val/this.progress.state,this},c.prototype.updateProgress=function(u,h,f,g){return this.setProgress(u?this.progress.val+u:null,h||null,f?this.progress.n+f:null,g?this.progress.stack.concat(g):null)},c.prototype.then=function(u,h){var f=this;return this.thenCore(u,h,function(g,x){return f.updateProgress(null,null,1,[g]),Promise.prototype.then.call(this,function(v){return f.updateProgress(null,g),v}).then(g,x).then(function(v){return f.updateProgress(1),v})})},c.prototype.thenCore=function(u,h,f){f=f||Promise.prototype.then;var g=this;u&&(u=u.bind(g)),h&&(h=h.bind(g));var x=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?g:c.convert(Object.assign({},g),Promise.prototype),v=f.call(x,u,h);return c.convert(v,g.__proto__)},c.prototype.thenExternal=function(u,h){return Promise.prototype.then.call(this,u,h)},c.prototype.thenList=function(u){var h=this;return u.forEach(function(f){h=h.thenCore(f)}),h},c.prototype.catch=function(u){u&&(u=u.bind(this));var h=Promise.prototype.catch.call(this,u);return c.convert(h,this)},c.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},c.prototype.error=function(u){return this.then(function(){throw new Error(u)})},c.prototype.using=c.prototype.set,c.prototype.saveAs=c.prototype.save,c.prototype.export=c.prototype.output,c.prototype.run=c.prototype.then,kt.getPageSize=function(u,h,f){if(ur(u)==="object"){var g=u;u=g.orientation,h=g.unit||h,f=g.format||f}h=h||"mm",f=f||"a4",u=(""+(u||"P")).toLowerCase();var x,v=(""+f).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":x=1;break;case"mm":x=72/25.4;break;case"cm":x=72/2.54;break;case"in":x=72;break;case"px":x=.75;break;case"pc":case"em":x=12;break;case"ex":x=6;break;default:throw"Invalid unit: "+h}var T,E=0,j=0;if(b.hasOwnProperty(v))E=b[v][1]/x,j=b[v][0]/x;else try{E=f[1],j=f[0]}catch{throw new Error("Invalid format: "+f)}if(u==="p"||u==="portrait")u="p",j>E&&(T=j,j=E,E=T);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",E>j&&(T=j,j=E,E=T)}return{width:j,height:E,unit:h,k:x,orientation:u}},n.html=function(u,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(L1):null;var f=new c(h);return h.worker?f:f.from(u).doCallback()}})(kt.API),kt.API.addJS=function(n){return q6=n,this.internal.events.subscribe("postPutResources",function(){k0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(k0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),z6=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+q6+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){k0!==void 0&&z6!==void 0&&this.internal.out("/Names <</JavaScript "+k0+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),o=0;o<a.length;o++){var c=a[o],u=r.exec(c);if(u!=null){var h=u[1];t.internal.newObjectDeferredBegin(h,!1)}t.internal.write(c)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,g=[];for(o=0;o<f;o++){var x=t.internal.newObject();g.push(x);var v=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var b=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<g.length;o++)t.internal.write("(page_"+(o+1)+")"+g[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+b+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,a,o){var c={title:a,options:o,children:[]};return r==null&&(r=this.root),r.children.push(c),c},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var a=0;a<r.children.length;a++)this.genIds_r(r.children[a])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var c=r.children[o];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var u=this.count=this.count_r({count:0},c);if(u>0&&this.line("/Count "+u),c.options&&c.options.pageNumber){var h=t.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,a){for(var o=0;o<a.children.length;o++)r.count++,this.count_r(r,a.children[o]);return r.count}}])})(kt.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,a,o,c,u){var h,f=this.decode.DCT_DECODE,g=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=c||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,h=(function(x){for(var v,b=256*x.charCodeAt(4)+x.charCodeAt(5),T=x.length,E={width:0,height:0,numcomponents:1},j=4;j<T;j+=2){if(j+=b,e.indexOf(x.charCodeAt(j+1))!==-1){v=256*x.charCodeAt(j+5)+x.charCodeAt(j+6),E={width:256*x.charCodeAt(j+7)+x.charCodeAt(j+8),height:v,numcomponents:x.charCodeAt(j+9)};break}b=256*x.charCodeAt(j+2)+x.charCodeAt(j+3)}return E})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),h.numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}g={data:t,width:h.width,height:h.height,colorSpace:u,bitsPerComponent:8,filter:f,index:r,alias:a}}return g}})(kt.API),kt.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var a,o=MG(n,{checkCrc:!0}),c=o.width,u=o.height,h=o.channels,f=o.palette,g=o.depth;a=f&&h===1?(function(M){for(var k=M.width,L=M.height,C=M.data,P=M.palette,V=M.depth,oe=!1,Ne=[],ue=[],pe=void 0,de=!1,Se=0,ze=0;ze<P.length;ze++){var te=W4(P[ze],4),q=te[0],Q=te[1],ne=te[2],he=te[3];Ne.push(q,Q,ne),he!=null&&(he===0?(Se++,ue.length<1&&ue.push(ze)):he<255&&(de=!0))}if(de||Se>1){oe=!0,ue=void 0;var me=k*L;pe=new Uint8Array(me);for(var be=new DataView(C.buffer),Le=0;Le<me;Le++){var Re=M1(be,Le,V),qe=W4(P[Re],4)[3];pe[Le]=qe}}else Se===0&&(ue=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:oe?8:void 0,colorBytes:C,alphaBytes:pe,needSMask:oe,palette:Ne,mask:ue}})(o):h===2||h===4?(function(M){for(var k=M.data,L=M.width,C=M.height,P=M.channels,V=M.depth,oe=P===2?"DeviceGray":"DeviceRGB",Ne=P-1,ue=L*C,pe=Ne,de=ue*pe,Se=1*ue,ze=Math.ceil(de*V/8),te=Math.ceil(Se*V/8),q=new Uint8Array(ze),Q=new Uint8Array(te),ne=new DataView(k.buffer),he=new DataView(q.buffer),me=new DataView(Q.buffer),be=!1,Le=0;Le<ue;Le++){for(var Re=Le*P,qe=0;qe<pe;qe++)J6(he,M1(ne,Re+qe,V),Le*pe+qe,V);var Je=M1(ne,Re+pe,V);Je<(1<<V)-1&&(be=!0),J6(me,Je,1*Le,V)}return{colorSpace:oe,colorsPerPixel:Ne,sMaskBitsPerComponent:be?V:void 0,colorBytes:q,alphaBytes:Q,needSMask:be}})(o):(function(M){var k=M.data,L=M.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:L,colorsPerPixel:L==="DeviceGray"?1:3,colorBytes:k instanceof Uint16Array?(function(C){for(var P=C.length,V=new Uint8Array(2*P),oe=new DataView(V.buffer,V.byteOffset,V.byteLength),Ne=0;Ne<P;Ne++)oe.setUint16(2*Ne,C[Ne],!1);return V})(k):k,needSMask:!1}})(o);var x,v,b,T=a,E=T.colorSpace,j=T.colorsPerPixel,S=T.sMaskBitsPerComponent,D=T.colorBytes,O=T.alphaBytes,B=T.needSMask,re=T.palette,ae=T.mask,G=null;return r!==kt.API.image_compression.NONE&&typeof F2=="function"?(G=(function(M){var k;switch(M){case kt.API.image_compression.FAST:k=11;break;case kt.API.image_compression.MEDIUM:k=13;break;case kt.API.image_compression.SLOW:k=14;break;default:k=12}return k})(r),x=this.decode.FLATE_DECODE,v="/Predictor ".concat(G," /Colors ").concat(j," /BitsPerComponent ").concat(g," /Columns ").concat(c),n=W6(D,Math.ceil(c*j*g/8),j,g,r),B&&(b=W6(O,Math.ceil(c*S/8),1,S,r))):(x=void 0,v=void 0,n=D,B&&(b=O)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(b&&this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),{alias:t,data:n,index:e,filter:x,decodeParameters:v,transparency:ae,palette:re,sMask:b,predictor:G,width:c,height:u,bitsPerComponent:g,sMaskBitsPerComponent:S,colorSpace:E}}},(function(n){n.processGIF89A=function(e,t,r,a){var o=new rH(e),c=o.width,u=o.height,h=[];o.decodeAndBlitFrameRGBA(0,h);var f={data:h,width:c,height:u},g=new O1(100).encode(f,100);return n.processJPEG.call(this,g,t,r,a)},n.processGIF87A=n.processGIF89A})(kt.API),hl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:r,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},hl.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Ar.log("bit decode error:"+t)}},hl.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<e;a++)for(var o=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+8*a*4,u=0;u<8&&8*a+u<this.width;u++){var h=this.palette[o>>7-u&1];this.data[c+4*u]=h.blue,this.data[c+4*u+1]=h.green,this.data[c+4*u+2]=h.red,this.data[c+4*u+3]=255}t!==0&&(this.pos+=4-t)}},hl.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<n;a++){var o=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+2*a*4,u=o>>4,h=15&o,f=this.palette[u];if(this.data[c]=f.blue,this.data[c+1]=f.green,this.data[c+2]=f.red,this.data[c+3]=255,2*a+1>=this.width)break;f=this.palette[h],this.data[c+4]=f.blue,this.data[c+4+1]=f.green,this.data[c+4+2]=f.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},hl.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;if(a<this.palette.length){var c=this.palette[a];this.data[o]=c.red,this.data[o+1]=c.green,this.data[o+2]=c.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},hl.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(o&e)/e*255|0,u=(o>>5&e)/e*255|0,h=(o>>10&e)/e*255|0,f=o>>15?255:0,g=r*this.width*4+4*a;this.data[g]=h,this.data[g+1]=u,this.data[g+2]=c,this.data[g+3]=f}this.pos+=n}},hl.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(c&e)/e*255|0,h=(c>>5&t)/t*255|0,f=(c>>11)/e*255|0,g=a*this.width*4+4*o;this.data[g]=f,this.data[g+1]=h,this.data[g+2]=u,this.data[g+3]=255}this.pos+=n}},hl.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=o,this.data[c+1]=a,this.data[c+2]=r,this.data[c+3]=255}this.pos+=this.width%4}},hl.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=o,this.data[u+1]=a,this.data[u+2]=r,this.data[u+3]=c}},hl.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,a){var o=new hl(e,!1),c=o.width,u=o.height,h={data:o.getData(),width:c,height:u},f=new O1(100).encode(h,100);return n.processJPEG.call(this,f,t,r,a)}})(kt.API),e3.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,a){var o=new e3(e),c=o.width,u=o.height,h={data:o.getData(),width:c,height:u},f=new O1(100).encode(h,100);return n.processJPEG.call(this,f,t,r,a)}})(kt.API),kt.API.processRGBA=function(n,e,t){for(var r=n.data,a=r.length,o=new Uint8Array(a/4*3),c=new Uint8Array(a/4),u=0,h=0,f=0;f<a;f+=4){var g=r[f],x=r[f+1],v=r[f+2],b=r[f+3];o[u++]=g,o[u++]=x,o[u++]=v,c[h++]=b}var T=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:T,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},kt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},mf=kt.API,R0=mf.getCharWidthsArray=function(n,e){var t,r,a=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),u=e.widths?e.widths:a.metadata.Unicode.widths,h=u.fof?u.fof:1,f=e.kerning?e.kerning:a.metadata.Unicode.kerning,g=f.fof?f.fof:1,x=e.doKerning!==!1,v=0,b=n.length,T=0,E=u[0]||h,j=[];for(t=0;t<b;t++)r=n.charCodeAt(t),typeof a.metadata.widthOfString=="function"?j.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(r))+c*(1e3/o)||0)/1e3):(v=x&&ur(f[r])==="object"&&!isNaN(parseInt(f[r][T],10))?f[r][T]/g:0,j.push((u[r]||E)/h+v)),T=r;return j},G6=mf.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return mf.processArabic&&(n=mf.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,a)/t:R0.apply(this,arguments).reduce(function(o,c){return o+c},0)},H6=function(n,e,t,r){for(var a=[],o=0,c=n.length,u=0;o!==c&&u+e[o]<t;)u+=e[o],o++;a.push(n.slice(0,o));var h=o;for(u=0;o!==c;)u+e[o]>r&&(a.push(n.slice(h,o)),u=0,h=o),u+=e[o],o++;return h!==o&&a.push(n.slice(h,o)),a},$6=function(n,e,t){t||(t={});var r,a,o,c,u,h,f,g=[],x=[g],v=t.textIndent||0,b=0,T=0,E=n.split(" "),j=R0.apply(this,[" ",t])[0];if(h=t.lineIndent===-1?E[0].length+2:t.lineIndent||0){var S=Array(h).join(" "),D=[];E.map(function(B){(B=B.split(/\s*\n/)).length>1?D=D.concat(B.map(function(re,ae){return(ae&&re.length?`
`:"")+re})):D.push(B[0])}),E=D,h=G6.apply(this,[S,t])}for(o=0,c=E.length;o<c;o++){var O=0;if(r=E[o],h&&r[0]==`
`&&(r=r.substr(1),O=1),v+b+(T=(a=R0.apply(this,[r,t])).reduce(function(B,re){return B+re},0))>e||O){if(T>e){for(u=H6.apply(this,[r,a,e-(v+b),e]),g.push(u.shift()),g=[u.pop()];u.length;)x.push([u.shift()]);T=a.slice(r.length-(g[0]?g[0].length:0)).reduce(function(B,re){return B+re},0)}else g=[r];x.push(g),v=T+h,b=j}else g.push(r),v+=b+T,b=j}return f=h?function(B,re){return(re?S:"")+B.join(" ")}:function(B){return B.join(" ")},x.map(f)},mf.splitTextToSize=function(n,e,t){var r,a=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var x=this.internal.getFont(g.fontName,g.fontStyle),v="Unicode";return x.metadata[v]?{widths:x.metadata[v].widths||{0:1},kerning:x.metadata[v].kerning||{}}:{font:x.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/a;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=t.lineIndent;var u,h,f=[];for(u=0,h=r.length;u<h;u++)f=f.concat($6.apply(this,[r[u],c,o]));return f},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},a={},o=0;o<16;o++)r[t[o]]=e[o],a[e[o]]=t[o];var c=function(v){return"0x"+parseInt(v,10).toString(16)},u=n.__fontmetrics__.compress=function(v){var b,T,E,j,S=["{"];for(var D in v){if(b=v[D],isNaN(parseInt(D,10))?T="'"+D+"'":(D=parseInt(D,10),T=(T=c(D).slice(2)).slice(0,-1)+a[T.slice(-1)]),typeof b=="number")b<0?(E=c(b).slice(3),j="-"):(E=c(b).slice(2),j=""),E=j+E.slice(0,-1)+a[E.slice(-1)];else{if(ur(b)!=="object")throw new Error("Don't know what to do with value type "+ur(b)+".");E=u(b)}S.push(T+E)}return S.push("}"),S.join("")},h=n.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,T,E,j,S={},D=1,O=S,B=[],re="",ae="",G=v.length-1,M=1;M<G;M+=1)(j=v[M])=="'"?b?(E=b.join(""),b=void 0):b=[]:b?b.push(j):j=="{"?(B.push([O,E]),O={},E=void 0):j=="}"?((T=B.pop())[0][T[1]]=O,E=void 0,O=T[0]):j=="-"?D=-1:E===void 0?r.hasOwnProperty(j)?(re+=r[j],E=parseInt(re,16)*D,D=1,re=""):re+=j:r.hasOwnProperty(j)?(ae+=r[j],O[E]=parseInt(ae,16)*D,D=1,E=void 0,ae=""):ae+=j;return S},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},g={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},x={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(v){var b=v.font,T=x.Unicode[b.postScriptName];T&&(b.metadata.Unicode={},b.metadata.Unicode.widths=T.widths,b.metadata.Unicode.kerning=T.kerning);var E=g.Unicode[b.postScriptName];E&&(b.metadata.Unicode.encoding=E,b.encoding=E.codePages[0])}])})(kt.API),(function(n){var e=function(t){for(var r=t.length,a=new Uint8Array(r),o=0;o<r;o++)a[o]=t.charCodeAt(o);return a};n.API.events.push(["addFont",function(t){var r=void 0,a=t.font,o=t.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(r=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(c,u){u=/^\x00\x01\x00\x00/.test(u)?e(u):e(Q0(u)),c.metadata=n.API.TTFFont.open(u),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(a,r)}}])})(kt),kt.API.addSvgAsImage=function(n,e,t,r,a,o,c,u){if(isNaN(e)||isNaN(t))throw Ar.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(a))throw Ar.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=r,h.height=a;var f=h.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,h.width,h.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},x=this;return(nn.canvg?Promise.resolve(nn.canvg):p1(()=>import("./index.es-BSiwmU2s.js"),[])).catch(function(v){return Promise.reject(new Error("Could not load canvg: "+v))}).then(function(v){return v.default?v.default:v}).then(function(v){return v.fromString(f,n,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(g)}).then(function(){x.addImage(h.toDataURL("image/jpeg",1),e,t,r,a,c,u)})},kt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var a=0;a<this.internal.pages[r].length;a++)this.internal.pages[r][a]=this.internal.pages[r][a].replace(e,t);return this},kt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,a,o,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(c),h=[],f=0,g=0,x=0;function v(T,E){var j,S=!1;for(j=0;j<T.length;j+=1)T[j]===E&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var b=u.length;for(x=0;x<b;x+=1)t[u[x]].value=t[u[x]].defaultValue,t[u[x]].explicitSet=!1}if(ur(n)==="object"){for(a in n)if(o=n[a],v(u,a)&&o!==void 0){if(t[a].type==="boolean"&&typeof o=="boolean")t[a].value=o;else if(t[a].type==="name"&&v(t[a].valueSet,o))t[a].value=o;else if(t[a].type==="integer"&&Number.isInteger(o))t[a].value=o;else if(t[a].type==="array"){for(f=0;f<o.length;f+=1)if(r=!0,o[f].length===1&&typeof o[f][0]=="number")h.push(String(o[f]-1));else if(o[f].length>1){for(g=0;g<o[f].length;g+=1)typeof o[f][g]!="number"&&(r=!1);r===!0&&h.push([o[f][0]-1,o[f][1]-1].join(" "))}t[a].value="["+h.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var T,E=[];for(T in t)t[T].explicitSet===!0&&(t[T].type==="name"?E.push("/"+T+" /"+t[T].value):E.push("/"+T+" "+t[T].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),f=o.length+c.length+u.length+a.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(a+o+c+u+h),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(kt.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,c){for(var u,h=c.metadata.Unicode.widths,f=["","0","00","000","0000"],g=[""],x=0,v=o.length;x<v;++x){if(u=c.metadata.characterToGlyph(o.charCodeAt(x)),c.metadata.glyIdsUsed.push(u),c.metadata.toUnicode[u]=o.charCodeAt(x),h.indexOf(u)==-1&&(h.push(u),h.push([parseInt(c.metadata.widthOfGlyph(u),10)])),u=="0")return g.join("");u=u.toString(16),g.push(f[4-u.length],u)}return g.join("")},r=function(o){var c,u,h,f,g,x,v;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],x=0,v=(u=Object.keys(o).sort(function(b,T){return b-T})).length;x<v;x++)c=u[x],h.length>=100&&(g+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),o[c]!==void 0&&o[c]!==null&&typeof o[c].toString=="function"&&(f=("0000"+o[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),h.push("<"+c+"><"+f+">"));return h.length&&(g+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),g+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(c){var u=c.font,h=c.out,f=c.newObject,g=c.putStream;if(u.metadata instanceof n.API.TTFFont&&u.encoding==="Identity-H"){for(var x=u.metadata.Unicode.widths,v=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),b="",T=0;T<v.length;T++)b+=String.fromCharCode(v[T]);var E=f();g({data:b,addLength1:!0,objectId:E}),h("endobj");var j=f();g({data:r(u.metadata.toUnicode),addLength1:!0,objectId:j}),h("endobj");var S=f();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+wf(u.fontName)),h("/FontFile2 "+E+" 0 R"),h("/FontBBox "+n.API.PDFObject.convert(u.metadata.bbox)),h("/Flags "+u.metadata.flags),h("/StemV "+u.metadata.stemV),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h(">>"),h("endobj");var D=f();h("<<"),h("/Type /Font"),h("/BaseFont /"+wf(u.fontName)),h("/FontDescriptor "+S+" 0 R"),h("/W "+n.API.PDFObject.convert(x)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+u.encoding+")"),h(">>"),h(">>"),h("endobj"),u.objectNumber=f(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+j+" 0 R"),h("/BaseFont /"+wf(u.fontName)),h("/Encoding /"+u.encoding),h("/DescendantFonts ["+D+" 0 R]"),h(">>"),h("endobj"),u.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(c){var u=c.font,h=c.out,f=c.newObject,g=c.putStream;if(u.metadata instanceof n.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var x=u.metadata.rawData,v="",b=0;b<x.length;b++)v+=String.fromCharCode(x[b]);var T=f();g({data:v,addLength1:!0,objectId:T}),h("endobj");var E=f();g({data:r(u.metadata.toUnicode),addLength1:!0,objectId:E}),h("endobj");var j=f();h("<<"),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h("/StemV "+u.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+T+" 0 R"),h("/Flags 96"),h("/FontBBox "+n.API.PDFObject.convert(u.metadata.bbox)),h("/FontName /"+wf(u.fontName)),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h(">>"),h("endobj"),u.objectNumber=f();for(var S=0;S<u.metadata.hmtx.widths.length;S++)u.metadata.hmtx.widths[S]=parseInt(u.metadata.hmtx.widths[S]*(1e3/u.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+wf(u.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),h("endobj"),u.isAlreadyPutted=!0}})(o)}]);var a=function(o){var c,u=o.text||"",h=o.x,f=o.y,g=o.options||{},x=o.mutex||{},v=x.pdfEscape,b=x.activeFontKey,T=x.fonts,E=b,j="",S=0,D="",O=T[E].encoding;if(T[E].encoding!=="Identity-H")return{text:u,x:h,y:f,options:g,mutex:x};for(D=u,E=b,Array.isArray(u)&&(D=u[0]),S=0;S<D.length;S+=1)T[E].metadata.hasOwnProperty("cmap")&&(c=T[E].metadata.cmap.unicode.codeMap[D[S].charCodeAt(0)]),c||D[S].charCodeAt(0)<256&&T[E].metadata.hasOwnProperty("Unicode")?j+=D[S]:j+="";var B="";return parseInt(E.slice(1))<14||O==="WinAnsiEncoding"?B=v(j,E).split("").map(function(re){return re.charCodeAt(0).toString(16)}).join(""):O==="Identity-H"&&(B=t(j,T[E])),x.isHex=!0,{text:B,x:h,y:f,options:g,mutex:x}};e.events.push(["postProcessText",function(o){var c=o.text||"",u=[],h={text:c,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(c)){var f=0;for(f=0;f<c.length;f+=1)Array.isArray(c[f])&&c[f].length===3?u.push([a(Object.assign({},h,{text:c[f][0]})).text,c[f][1],c[f][2]]):u.push(a(Object.assign({},h,{text:c[f]})).text);o.text=u}else o.text=a(Object.assign({},h,{text:c})).text}])})(kt),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(kt.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var a,o,c,u,h,f,g,x=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],T={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),D=!1,O=0;this.__bidiEngine__={};var B=function(C){var P=C.charCodeAt(),V=P>>8,oe=E[V];return oe!==void 0?x[256*oe+(255&P)]:V===252||V===253?"AL":S.test(V)?"L":V===8?"R":"N"},re=function(C){for(var P,V=0;V<C.length;V++){if((P=B(C.charAt(V)))==="L")return!1;if(P==="R")return!0}return!1},ae=function(C,P,V,oe){var Ne,ue,pe,de,Se=P[oe];switch(Se){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":D=!1;break;case"N":case"AN":break;case"EN":D&&(Se="AN");break;case"AL":D=!0,Se="R";break;case"WS":case"BN":Se="N";break;case"CS":oe<1||oe+1>=P.length||(Ne=V[oe-1])!=="EN"&&Ne!=="AN"||(ue=P[oe+1])!=="EN"&&ue!=="AN"?Se="N":D&&(ue="AN"),Se=ue===Ne?ue:"N";break;case"ES":Se=(Ne=oe>0?V[oe-1]:"B")==="EN"&&oe+1<P.length&&P[oe+1]==="EN"?"EN":"N";break;case"ET":if(oe>0&&V[oe-1]==="EN"){Se="EN";break}if(D){Se="N";break}for(pe=oe+1,de=P.length;pe<de&&P[pe]==="ET";)pe++;Se=pe<de&&P[pe]==="EN"?"EN":"N";break;case"NSM":if(c&&!u){for(de=P.length,pe=oe+1;pe<de&&P[pe]==="NSM";)pe++;if(pe<de){var ze=C[oe],te=ze>=1425&&ze<=2303||ze===64286;if(Ne=P[pe],te&&(Ne==="R"||Ne==="AL")){Se="R";break}}}Se=oe<1||(Ne=P[oe-1])==="B"?"N":V[oe-1];break;case"B":D=!1,a=!0,Se=O;break;case"S":o=!0,Se="N"}return Se},G=function(C,P,V){var oe=C.split("");return V&&M(oe,V,{hiLevel:O}),oe.reverse(),P&&P.reverse(),oe.join("")},M=function(C,P,V){var oe,Ne,ue,pe,de,Se=-1,ze=C.length,te=0,q=[],Q=O?b:v,ne=[];for(D=!1,a=!1,o=!1,Ne=0;Ne<ze;Ne++)ne[Ne]=B(C[Ne]);for(ue=0;ue<ze;ue++){if(de=te,q[ue]=ae(C,ne,q,ue),oe=240&(te=Q[de][T[q[ue]]]),te&=15,P[ue]=pe=Q[te][5],oe>0)if(oe===16){for(Ne=Se;Ne<ue;Ne++)P[Ne]=1;Se=-1}else Se=-1;if(Q[te][6])Se===-1&&(Se=ue);else if(Se>-1){for(Ne=Se;Ne<ue;Ne++)P[Ne]=pe;Se=-1}ne[ue]==="B"&&(P[ue]=0),V.hiLevel|=pe}o&&(function(he,me,be){for(var Le=0;Le<be;Le++)if(he[Le]==="S"){me[Le]=O;for(var Re=Le-1;Re>=0&&he[Re]==="WS";Re--)me[Re]=O}})(ne,P,ze)},k=function(C,P,V,oe,Ne){if(!(Ne.hiLevel<C)){if(C===1&&O===1&&!a)return P.reverse(),void(V&&V.reverse());for(var ue,pe,de,Se,ze=P.length,te=0;te<ze;){if(oe[te]>=C){for(de=te+1;de<ze&&oe[de]>=C;)de++;for(Se=te,pe=de-1;Se<pe;Se++,pe--)ue=P[Se],P[Se]=P[pe],P[pe]=ue,V&&(ue=V[Se],V[Se]=V[pe],V[pe]=ue);te=de}te++}}},L=function(C,P,V){var oe=C.split(""),Ne={hiLevel:O};return V||(V=[]),M(oe,V,Ne),(function(ue,pe,de){if(de.hiLevel!==0&&g)for(var Se,ze=0;ze<ue.length;ze++)pe[ze]===1&&(Se=j.indexOf(ue[ze]))>=0&&(ue[ze]=j[Se+1])})(oe,V,Ne),k(2,oe,P,V,Ne),k(1,oe,P,V,Ne),oe.join("")};return this.__bidiEngine__.doBidiReorder=function(C,P,V){if((function(Ne,ue){if(ue)for(var pe=0;pe<Ne.length;pe++)ue[pe]=pe;u===void 0&&(u=re(Ne)),f===void 0&&(f=re(Ne))})(C,P),c||!h||f)if(c&&h&&u^f)O=u?1:0,C=G(C,P,V);else if(!c&&h&&f)O=u?1:0,C=L(C,P,V),C=G(C,P);else if(!c||u||h||f){if(c&&!h&&u^f)C=G(C,P),u?(O=0,C=L(C,P,V)):(O=1,C=L(C,P,V),C=G(C,P));else if(c&&u&&!h&&f)O=1,C=L(C,P,V),C=G(C,P);else if(!c&&!h&&u^f){var oe=g;u?(O=1,C=L(C,P,V),O=0,g=!1,C=L(C,P,V),g=oe):(O=0,C=L(C,P,V),C=G(C,P),O=1,g=!1,C=L(C,P,V),g=oe,C=G(C,P))}}else O=0,C=L(C,P,V);else O=u?1:0,C=L(C,P,V);return C},this.__bidiEngine__.setOptions=function(C){C&&(c=C.isInputVisual,h=C.isOutputVisual,u=C.isInputRtl,f=C.isOutputRtl,g=C.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var a=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var c=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var u=0;for(c=[],u=0;u<a.length;u+=1)Object.prototype.toString.call(a[u])==="[object Array]"?c.push([t.doBidiReorder(a[u][0]),a[u][1],a[u][2]]):c.push([t.doBidiReorder(a[u])]);r.text=c}else r.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])})(kt),kt.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new dd(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new yH(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new sH(this.contents),this.head=new iH(this),this.name=new dH(this),this.cmap=new LC(this),this.toUnicode={},this.hhea=new oH(this),this.maxp=new hH(this),this.hmtx=new fH(this),this.post=new cH(this),this.os2=new lH(this),this.loca=new xH(this),this.glyf=new mH(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,u,h,f;for(f=[],c=0,u=(h=this.bbox).length;c<u;c++)e=h[c],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var a,o,c,u;for(c=0,o=0,u=(e=""+e).length;0<=u?o<u:o>u;o=0<=u?++o:--o)a=e.charCodeAt(o),c+=this.widthOfGlyph(this.characterToGlyph(a))+r*(1e3/t)||0;return c*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var Nl,dd=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,a;for(a=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,a,o,c,u,h;return e=this.readByte(),t=this.readByte(),r=this.readByte(),a=this.readByte(),o=this.readByte(),c=this.readByte(),u=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^a)+16777216*(255^o)+65536*(255^c)+256*(255^u)+(255^h)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*a+16777216*o+65536*c+256*u+h},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,a,o;for(o=[],r=0,a=e.length;r<a;r++)t=e[r],o.push(this.writeByte(t));return o},n})(),sH=(function(){var n;function e(t){var r,a,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,a,o,c,u,h,f,g,x,v,b,T,E;for(E in b=Object.keys(t).length,h=Math.log(2),x=16*Math.floor(Math.log(b)/h),c=Math.floor(x/h),g=16*b-x,(a=new dd).writeInt(this.scalarType),a.writeShort(b),a.writeShort(x),a.writeShort(c),a.writeShort(g),o=16*b,f=a.pos+o,u=null,T=[],t)for(v=t[E],a.writeString(E),a.writeInt(n(v)),a.writeInt(f),a.writeInt(v.length),T=T.concat(v),E==="head"&&(u=f),f+=v.length;f%4;)T.push(0),f++;return a.write(T),r=2981146554-n(a.data),a.pos=u+8,a.writeUInt32(r),a.data},n=function(t){var r,a,o,c;for(t=DC.call(t);t.length%4;)t.push(0);for(o=new dd(t),a=0,r=0,c=t.length;r<c;r=r+=4)a+=o.readUInt32();return 4294967295&a},e})(),aH={}.hasOwnProperty,cc=function(n,e){for(var t in e)aH.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Nl=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var iH=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return cc(n,Nl),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new dd).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),t3=(function(){function n(e,t){var r,a,o,c,u,h,f,g,x,v,b,T,E,j,S,D,O;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),x=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(b=e.readUInt16(),v=b/2,e.pos+=6,o=(function(){var B,re;for(re=[],h=B=0;0<=v?B<v:B>v;h=0<=v?++B:--B)re.push(e.readUInt16());return re})(),e.pos+=2,E=(function(){var B,re;for(re=[],h=B=0;0<=v?B<v:B>v;h=0<=v?++B:--B)re.push(e.readUInt16());return re})(),f=(function(){var B,re;for(re=[],h=B=0;0<=v?B<v:B>v;h=0<=v?++B:--B)re.push(e.readUInt16());return re})(),g=(function(){var B,re;for(re=[],h=B=0;0<=v?B<v:B>v;h=0<=v?++B:--B)re.push(e.readUInt16());return re})(),a=(this.length-e.pos+this.offset)/2,u=(function(){var B,re;for(re=[],h=B=0;0<=a?B<a:B>a;h=0<=a?++B:--B)re.push(e.readUInt16());return re})(),h=S=0,O=o.length;S<O;h=++S)for(j=o[h],r=D=T=E[h];T<=j?D<=j:D>=j;r=T<=j?++D:--D)g[h]===0?c=r+f[h]:(c=u[g[h]/2+(r-T)-(v-h)]||0)!==0&&(c+=f[h]),this.codeMap[r]=65535&c}e.pos=x}return n.encode=function(e,t){var r,a,o,c,u,h,f,g,x,v,b,T,E,j,S,D,O,B,re,ae,G,M,k,L,C,P,V,oe,Ne,ue,pe,de,Se,ze,te,q,Q,ne,he,me,be,Le,Re,qe,Je,it;switch(oe=new dd,c=Object.keys(e).sort(function(at,ft){return at-ft}),t){case"macroman":for(E=0,j=(function(){var at=[];for(T=0;T<256;++T)at.push(0);return at})(),D={0:0},o={},Ne=0,Se=c.length;Ne<Se;Ne++)D[Re=e[a=c[Ne]]]==null&&(D[Re]=++E),o[a]={old:e[a],new:D[e[a]]},j[a]=D[e[a]];return oe.writeUInt16(1),oe.writeUInt16(0),oe.writeUInt32(12),oe.writeUInt16(0),oe.writeUInt16(262),oe.writeUInt16(0),oe.write(j),{charMap:o,subtable:oe.data,maxGlyphID:E+1};case"unicode":for(P=[],x=[],O=0,D={},r={},S=f=null,ue=0,ze=c.length;ue<ze;ue++)D[re=e[a=c[ue]]]==null&&(D[re]=++O),r[a]={old:re,new:D[re]},u=D[re]-a,S!=null&&u===f||(S&&x.push(S),P.push(a),f=u),S=a;for(S&&x.push(S),x.push(65535),P.push(65535),L=2*(k=P.length),M=2*Math.pow(Math.log(k)/Math.LN2,2),v=Math.log(M/2)/Math.LN2,G=2*k-M,h=[],ae=[],b=[],T=pe=0,te=P.length;pe<te;T=++pe){if(C=P[T],g=x[T],C===65535){h.push(0),ae.push(0);break}if(C-(V=r[C].new)>=32768)for(h.push(0),ae.push(2*(b.length+k-T)),a=de=C;C<=g?de<=g:de>=g;a=C<=g?++de:--de)b.push(r[a].new);else h.push(V-C),ae.push(0)}for(oe.writeUInt16(3),oe.writeUInt16(1),oe.writeUInt32(12),oe.writeUInt16(4),oe.writeUInt16(16+8*k+2*b.length),oe.writeUInt16(0),oe.writeUInt16(L),oe.writeUInt16(M),oe.writeUInt16(v),oe.writeUInt16(G),be=0,q=x.length;be<q;be++)a=x[be],oe.writeUInt16(a);for(oe.writeUInt16(0),Le=0,Q=P.length;Le<Q;Le++)a=P[Le],oe.writeUInt16(a);for(qe=0,ne=h.length;qe<ne;qe++)u=h[qe],oe.writeUInt16(u);for(Je=0,he=ae.length;Je<he;Je++)B=ae[Je],oe.writeUInt16(B);for(it=0,me=b.length;it<me;it++)E=b[it],oe.writeUInt16(E);return{charMap:r,subtable:oe.data,maxGlyphID:O+1}}},n})(),LC=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return cc(n,Nl),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=a?r<a:r>a;r=0<=a?++r:--r)t=new t3(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,a;return t==null&&(t="macroman"),r=t3.encode(e,t),(a=new dd).writeUInt16(0),a.writeUInt16(1),r.table=a.data.concat(r.subtable),r},n})(),oH=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return cc(n,Nl),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),lH=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return cc(n,Nl),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r})(),this.charRange=(function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),cH=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return cc(n,Nl),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(r=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)t=e.readByte(),a.push(this.names.push(e.readString(t)));return a;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var c,u,h;for(h=[],o=c=0,u=this.file.maxp.numGlyphs;0<=u?c<u:c>u;o=0<=u?++c:--c)h.push(e.readUInt32());return h}).call(this)}},n})(),uH=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},dH=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return cc(n,Nl),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,a,o,c,u,h,f,g,x,v;for(e.pos=this.offset,e.readShort(),t=e.readShort(),u=e.readShort(),r=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+u+e.readShort()});for(h={},o=g=0,x=r.length;g<x;o=++g)a=r[o],e.pos=a.offset,f=e.readString(a.length),c=new uH(f,a),h[v=a.nameID]==null&&(h[v]=[]),h[a.nameID].push(c);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},n})(),hH=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return cc(n,Nl),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),fH=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return cc(n,Nl),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,a,o,c,u,h;for(e.pos=this.offset,this.metrics=[],t=0,u=this.file.hhea.numberOfMetrics;0<=u?t<u:t>u;t=0<=u?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,g;for(g=[],t=f=0;0<=a?f<a:f>a;t=0<=a?++f:--f)g.push(e.readInt16());return g})(),this.widths=(function(){var f,g,x,v;for(v=[],f=0,g=(x=this.metrics).length;f<g;f++)o=x[f],v.push(o.advance);return v}).call(this),r=this.widths[this.widths.length-1],h=[],t=c=0;0<=a?c<a:c>a;t=0<=a?++c:--c)h.push(this.widths.push(r));return h},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),DC=[].slice,mH=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return cc(n,Nl),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,a,o,c,u,h,f,g,x;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,r=o.indexOf(e),(a=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,c=(u=new dd(t.read(a))).readShort(),f=u.readShort(),x=u.readShort(),h=u.readShort(),g=u.readShort(),this.cache[e]=c===-1?new pH(u,f,x,h,g):new gH(u,c,f,x,h,g),this.cache[e]))},n.prototype.encode=function(e,t,r){var a,o,c,u,h;for(c=[],o=[],u=0,h=t.length;u<h;u++)a=e[t[u]],o.push(c.length),a&&(c=c.concat(a.encode(r)));return o.push(c.length),{table:c,offsets:o}},n})(),gH=(function(){function n(e,t,r,a,o,c){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=a,this.xMax=o,this.yMax=c,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),pH=(function(){function n(e,t,r,a,o){var c,u;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;u=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&u;)c.pos+=1&u?4:2,128&u?c.pos+=8:64&u?c.pos+=4:8&u&&(c.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new dd(DC.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),xH=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return cc(n,Nl),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var a,o;for(o=[],r=0,a=this.length;r<a;r+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],r=0,a=this.length;r<a;r+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),a=0,o=0,c=0;c<r.length;++c)if(r[c]=a,o<t.length&&t[o]==c){++o,r[c]=a;var u=this.offsets[c],h=this.offsets[c+1]-u;h>0&&(a+=h)}for(var f=new Array(4*r.length),g=0;g<r.length;++g)f[4*g+3]=255&r[g],f[4*g+2]=(65280&r[g])>>8,f[4*g+1]=(16711680&r[g])>>16,f[4*g]=(4278190080&r[g])>>24;return f},n})(),yH=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,a,o;for(t in a=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[t],e[t]=a[r];return e},n.prototype.glyphsFor=function(e){var t,r,a,o,c,u,h;for(a={},c=0,u=e.length;c<u;c++)a[o=e[c]]=this.font.glyf.glyphFor(o);for(o in t=[],a)(r=a[o])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(o in h=this.glyphsFor(t))r=h[o],a[o]=r;return a},n.prototype.encode=function(e,t){var r,a,o,c,u,h,f,g,x,v,b,T,E,j,S;for(a in r=LC.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),b={0:0},S=r.charMap)b[(h=S[a]).old]=h.new;for(T in v=r.maxGlyphID,c)T in b||(b[T]=v++);return g=(function(D){var O,B;for(O in B={},D)B[D[O]]=O;return B})(b),x=Object.keys(g).sort(function(D,O){return D-O}),E=(function(){var D,O,B;for(B=[],D=0,O=x.length;D<O;D++)u=x[D],B.push(g[u]);return B})(),o=this.font.glyf.encode(c,E,b),f=this.font.loca.encode(o.offsets,E),j={cmap:this.font.cmap.raw(),glyf:o.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},n})();kt.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,a,o,c;if(Array.isArray(t))return"["+(function(){var u,h,f;for(f=[],u=0,h=t.length;u<h;u++)r=t[u],f.push(e.convert(r));return f})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(a in o=["<<"],t)c=t[a],o.push("/"+a+" "+e.convert(c));return o.push(">>"),o.join(`
`)}return""+t},e})();function MC(n,e,t,r,a){r=r||{};var o=1.15,c=a.internal.scaleFactor,u=a.internal.getFontSize()/c,h=a.getLineHeightFactor?a.getLineHeightFactor():o,f=u*h,g=/\r\n|\r|\n/g,x="",v=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(x=typeof n=="string"?n.split(g):n,v=x.length||1),t+=u*(2-o),r.valign==="middle"?t-=v/2*f:r.valign==="bottom"&&(t-=v*f),r.halign==="center"||r.halign==="right"){var b=u;if(r.halign==="center"&&(b*=.5),x&&v>=1){for(var T=0;T<x.length;T++)a.text(x[T],e-a.getStringUnitWidth(x[T])*b,t),t+=f;return a}e-=a.getStringUnitWidth(n)*b}return r.halign==="justify"?a.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):a.text(n,e,t),a}var n3={},Df=(function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:n3=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,a,o;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var c=this.jsPDFDocument.internal.getFont(),u=c.fontStyle,h=c.fontName;if(e.font&&(h=e.font),e.fontStyle){u=e.fontStyle;var f=this.getFontList()[h];f&&f.indexOf(u)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(f[0]),u=f[0])}if(this.jsPDFDocument.setFont(h,u),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var g=n.unifyColor(e.fillColor);g&&(r=this.jsPDFDocument).setFillColor.apply(r,g),g=n.unifyColor(e.textColor),g&&(a=this.jsPDFDocument).setTextColor.apply(a,g),g=n.unifyColor(e.lineColor),g&&(o=this.jsPDFDocument).setDrawColor.apply(o,g),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,a,o){return this.jsPDFDocument.rect(e,t,r,a,o)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return n3||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n})(),$2=function(n,e){return $2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},$2(n,e)};function OC(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");$2(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var FC=(function(n){OC(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e})(Array);function bH(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function vH(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function qx(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],a=r.map(function(o){return t.getTextWidth(o)}).reduce(function(o,c){return Math.max(o,c)},0);return a}function UC(n,e,t,r){var a=e.settings.tableLineWidth,o=e.settings.tableLineColor;n.applyStyles({lineWidth:a,lineColor:o});var c=VC(a,!1);c&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,c)}function VC(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function Ry(n,e){var t,r,a,o;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(a=n.right)!==null&&a!==void 0?a:e,bottom:(o=n.bottom)!==null&&o!==void 0?o:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function BC(n,e){var t=Ry(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function wH(n,e,t,r,a){var o={},c=1.3333333333333333,u=F1(e,function(O){return a.getComputedStyle(O).backgroundColor});u!=null&&(o.fillColor=u);var h=F1(e,function(O){return a.getComputedStyle(O).color});h!=null&&(o.textColor=h);var f=jH(r,t);f&&(o.cellPadding=f);var g="borderTopColor",x=c*t,v=r.borderTopWidth;if(r.borderBottomWidth===v&&r.borderRightWidth===v&&r.borderLeftWidth===v){var b=(parseFloat(v)||0)/x;b&&(o.lineWidth=b)}else o.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/x,right:(parseFloat(r.borderRightWidth)||0)/x,bottom:(parseFloat(r.borderBottomWidth)||0)/x,left:(parseFloat(r.borderLeftWidth)||0)/x},o.lineWidth.top||(o.lineWidth.right?g="borderRightColor":o.lineWidth.bottom?g="borderBottomColor":o.lineWidth.left&&(g="borderLeftColor"));var T=F1(e,function(O){return a.getComputedStyle(O)[g]});T!=null&&(o.lineColor=T);var E=["left","right","center","justify"];E.indexOf(r.textAlign)!==-1&&(o.halign=r.textAlign),E=["middle","bottom","top"],E.indexOf(r.verticalAlign)!==-1&&(o.valign=r.verticalAlign);var j=parseInt(r.fontSize||"");isNaN(j)||(o.fontSize=j/c);var S=NH(r);S&&(o.fontStyle=S);var D=(r.fontFamily||"").toLowerCase();return n.indexOf(D)!==-1&&(o.font=D),o}function NH(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function F1(n,e){var t=zC(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var a=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],o=parseInt(r[4]);return o===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function zC(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:zC(n.parentElement,e):t}function jH(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),a=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,o=t.map(function(u){return parseInt(u||"0")/r}),c=Ry(o,0);return a>c.top&&(c.top=a),a>c.bottom&&(c.bottom=a),c}function qC(n,e,t,r,a){var o,c;r===void 0&&(r=!1),a===void 0&&(a=!1);var u;typeof e=="string"?u=t.document.querySelector(e):u=e;var h=Object.keys(n.getFontList()),f=n.scaleFactor(),g=[],x=[],v=[];if(!u)return console.error("Html table could not be found with input: ",e),{head:g,body:x,foot:v};for(var b=0;b<u.rows.length;b++){var T=u.rows[b],E=(c=(o=T?.parentElement)===null||o===void 0?void 0:o.tagName)===null||c===void 0?void 0:c.toLowerCase(),j=_H(h,f,t,T,r,a);j&&(E==="thead"?g.push(j):E==="tfoot"?v.push(j):x.push(j))}return{head:g,body:x,foot:v}}function _H(n,e,t,r,a,o){for(var c=new FC(r),u=0;u<r.cells.length;u++){var h=r.cells[u],f=t.getComputedStyle(h);if(a||f.display!=="none"){var g=void 0;o&&(g=wH(n,h,e,f,t)),c.push({rowSpan:h.rowSpan,colSpan:h.colSpan,styles:g,_element:h,content:SH(h)})}}var x=t.getComputedStyle(r);if(c.length>0&&(a||x.display!=="none"))return c}function SH(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function EH(n,e,t){for(var r=0,a=[n,e,t];r<a.length;r++){var o=a[r];o&&typeof o!="object"&&console.error("The options parameter should be of type object, is: "+typeof o),o.startY&&typeof o.startY!="number"&&(console.error("Invalid value for startY option",o.startY),delete o.startY)}}function Hc(n,e,t,r,a){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(n),c=1;c<arguments.length;c++){var u=arguments[c];if(u!=null)for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(o[h]=u[h])}return o}function AH(n,e){var t=new Df(n),r=t.getDocumentOptions(),a=t.getGlobalOptions();EH(a,r,e);var o=Hc({},a,r,e),c;typeof window<"u"&&(c=window);var u=TH(a,r,e),h=CH(a,r,e),f=IH(t,o),g=RH(t,o,c);return{id:e.tableId,content:g,hooks:h,styles:u,settings:f}}function TH(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(h){if(h==="columnStyles"){var f=n[h],g=e[h],x=t[h];r.columnStyles=Hc({},f,g,x)}else{var v=[n,e,t],b=v.map(function(T){return T[h]||{}});r[h]=Hc({},b[0],b[1],b[2])}},o=0,c=Object.keys(r);o<c.length;o++){var u=c[o];a(u)}return r}function CH(n,e,t){for(var r=[n,e,t],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},o=0,c=r;o<c.length;o++){var u=c[o];u.didParseCell&&a.didParseCell.push(u.didParseCell),u.willDrawCell&&a.willDrawCell.push(u.willDrawCell),u.didDrawCell&&a.didDrawCell.push(u.didDrawCell),u.willDrawPage&&a.willDrawPage.push(u.willDrawPage),u.didDrawPage&&a.didDrawPage.push(u.didDrawPage)}return a}function IH(n,e){var t,r,a,o,c,u,h,f,g,x,v,b,T=Ry(e.margin,40/n.scaleFactor()),E=(t=kH(n,e.startY))!==null&&t!==void 0?t:T.top,j;e.showFoot===!0?j="everyPage":e.showFoot===!1?j="never":j=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var S;e.showHead===!0?S="everyPage":e.showHead===!1?S="never":S=(a=e.showHead)!==null&&a!==void 0?a:"everyPage";var D=(o=e.useCss)!==null&&o!==void 0?o:!1,O=e.theme||(D?"plain":"striped"),B=!!e.horizontalPageBreak,re=(c=e.horizontalPageBreakRepeat)!==null&&c!==void 0?c:null;return{includeHiddenHtml:(u=e.includeHiddenHtml)!==null&&u!==void 0?u:!1,useCss:D,theme:O,startY:E,margin:T,pageBreak:(h=e.pageBreak)!==null&&h!==void 0?h:"auto",rowPageBreak:(f=e.rowPageBreak)!==null&&f!==void 0?f:"auto",tableWidth:(g=e.tableWidth)!==null&&g!==void 0?g:"auto",showHead:S,showFoot:j,tableLineWidth:(x=e.tableLineWidth)!==null&&x!==void 0?x:0,tableLineColor:(v=e.tableLineColor)!==null&&v!==void 0?v:200,horizontalPageBreak:B,horizontalPageBreakRepeat:re,horizontalPageBreakBehaviour:(b=e.horizontalPageBreakBehaviour)!==null&&b!==void 0?b:"afterAllRows"}}function kH(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),a=n.pageNumber(),o=!1;if(t&&t.startPageNumber){var c=t.startPageNumber+t.pageNumber-1;o=c===a}return typeof e=="number"?e:(e==null||e===!1)&&o&&t?.finalY!=null?t.finalY+20/r:null}function RH(n,e,t){var r=e.head||[],a=e.body||[],o=e.foot||[];if(e.html){var c=e.includeHiddenHtml;if(t){var u=qC(n,e.html,t,c,e.useCss)||{};r=u.head||r,a=u.body||r,o=u.foot||r}else console.error("Cannot parse html in non browser environment")}var h=e.columns||PH(r,a,o);return{columns:h,head:r,body:a,foot:o}}function PH(n,e,t){var r=n[0]||e[0]||t[0]||[],a=[];return Object.keys(r).filter(function(o){return o!=="_element"}).forEach(function(o){var c=1,u;Array.isArray(r)?u=r[parseInt(o)]:u=r[o],typeof u=="object"&&!Array.isArray(u)&&(c=u?.colSpan||1);for(var h=0;h<c;h++){var f=void 0;Array.isArray(r)?f=a.length:f=o+(h>0?"_".concat(h):"");var g={dataKey:f};a.push(g)}}),a}var W2=(function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n})(),LH=(function(n){OC(e,n);function e(t,r,a,o,c,u){var h=n.call(this,t,r,u)||this;return h.cell=a,h.row=o,h.column=c,h.section=o.section,h}return e})(W2),DH=(function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,a,o,c){for(var u=0,h=t;u<h.length;u++){var f=h[u],g=new LH(e,this,r,a,o,c),x=f(g)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],x)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,a=this.hooks.didDrawPage;r<a.length;r++){var o=a[r];o(new W2(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,a=this.hooks.willDrawPage;r<a.length;r++){var o=a[r];o(new W2(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(a,o){return a+o.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n})(),GC=(function(){function n(e,t,r,a,o){o===void 0&&(o=!1),this.height=0,this.raw=e,e instanceof FC&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=a,this.spansMultiplePages=o}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,a){var o;return Math.max(r,((o=t.cells[a.index])===null||o===void 0?void 0:o.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var a=t.cells[r.index];return a?a.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(a,o){var c=r.cells[o.index];if(!c)return 0;var u=t.getLineHeight(c.styles.fontSize),h=c.padding("vertical"),f=h+u;return f>a?f:a},0)},n})(),HC=(function(){function n(e,t,r){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var o=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,o=(a=e.content)!==null&&a!==void 0?a:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var c=o!=null?""+o:"",u=/\r\n|\r|\n/g;this.text=c.split(u)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");r=this.x+a/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/e*t,o=r*a+this.padding("vertical");return Math.max(o,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=Ry(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n})(),MH=(function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,a=e.allRows();r<a.length;r++){var o=a[r],c=o.cells[this.index];c&&typeof c.styles.cellWidth=="number"&&(t=Math.max(t,c.styles.cellWidth))}return t},n})();function OH(n,e){FH(n,e);var t=[],r=0;e.columns.forEach(function(o){var c=o.getMaxCustomCellWidth(e);c?o.width=c:(o.width=o.wrappedWidth,t.push(o)),r+=o.width});var a=e.getWidth(n.pageSize().width)-r;a&&(a=K2(t,a,function(o){return Math.max(o.minReadableWidth,o.minWidth)})),a&&(a=K2(t,a,function(o){return o.minWidth})),a=Math.abs(a),!e.settings.horizontalPageBreak&&a>.1/n.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),VH(e),BH(e,n),UH(e)}function FH(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,a=BC(n,e);e.allRows().forEach(function(o){for(var c=0,u=e.columns;c<u.length;c++){var h=u[c],f=o.cells[h.index];if(f){var g=e.hooks.didParseCell;e.callCellHooks(n,g,f,o,h,null);var x=f.padding("horizontal");f.contentWidth=qx(f.text,f.styles,n)+x;var v=qx(f.text.join(" ").split(/[^\S\u00A0]+/),f.styles,n);if(f.minReadableWidth=v+f.padding("horizontal"),typeof f.styles.cellWidth=="number")f.minWidth=f.styles.cellWidth,f.wrappedWidth=f.styles.cellWidth;else if(f.styles.cellWidth==="wrap"||r===!0)f.contentWidth>a?(f.minWidth=a,f.wrappedWidth=a):(f.minWidth=f.contentWidth,f.wrappedWidth=f.contentWidth);else{var b=10/t;f.minWidth=f.styles.minCellWidth||b,f.wrappedWidth=f.contentWidth,f.minWidth>f.wrappedWidth&&(f.wrappedWidth=f.minWidth)}}}}),e.allRows().forEach(function(o){for(var c=0,u=e.columns;c<u.length;c++){var h=u[c],f=o.cells[h.index];if(f&&f.colSpan===1)h.wrappedWidth=Math.max(h.wrappedWidth,f.wrappedWidth),h.minWidth=Math.max(h.minWidth,f.minWidth),h.minReadableWidth=Math.max(h.minReadableWidth,f.minReadableWidth);else{var g=e.styles.columnStyles[h.dataKey]||e.styles.columnStyles[h.index]||{},x=g.cellWidth||g.minCellWidth;x&&typeof x=="number"&&(h.minWidth=x,h.wrappedWidth=x)}f&&(f.colSpan>1&&!h.minWidth&&(h.minWidth=f.minWidth),f.colSpan>1&&!h.wrappedWidth&&(h.wrappedWidth=f.minWidth))}})}function K2(n,e,t){for(var r=e,a=n.reduce(function(b,T){return b+T.wrappedWidth},0),o=0;o<n.length;o++){var c=n[o],u=c.wrappedWidth/a,h=r*u,f=c.width+h,g=t(c),x=f<g?g:f;e-=x-c.width,c.width=x}if(e=Math.round(e*1e10)/1e10,e){var v=n.filter(function(b){return e<0?b.width>t(b):!0});v.length&&(e=K2(v,e,t))}return e}function UH(n){for(var e={},t=1,r=n.allRows(),a=0;a<r.length;a++)for(var o=r[a],c=0,u=n.columns;c<u.length;c++){var h=u[c],f=e[h.index];if(t>1)t--,delete o.cells[h.index];else if(f)f.cell.height+=o.height,t=f.cell.colSpan,delete o.cells[h.index],f.left--,f.left<=1&&delete e[h.index];else{var g=o.cells[h.index];if(!g)continue;if(g.height=o.height,g.rowSpan>1){var x=r.length-a,v=g.rowSpan>x?x:g.rowSpan;e[h.index]={cell:g,left:v,row:o}}}}}function VH(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],a=null,o=0,c=0,u=0;u<n.columns.length;u++){var h=n.columns[u];if(c-=1,c>1&&n.columns[u+1])o+=h.width,delete r.cells[h.index];else if(a){var f=a;delete r.cells[h.index],a=null,f.width=h.width+o}else{var f=r.cells[h.index];if(!f)continue;if(c=f.colSpan,o=0,f.colSpan>1){a=f,o+=h.width;continue}f.width=h.width+o}}}function BH(n,e){for(var t={count:0,height:0},r=0,a=n.allRows();r<a.length;r++){for(var o=a[r],c=0,u=n.columns;c<u.length;c++){var h=u[c],f=o.cells[h.index];if(f){e.applyStyles(f.styles,!0);var g=f.width-f.padding("horizontal");if(f.styles.overflow==="linebreak")f.text=e.splitTextToSize(f.text,g+1/e.scaleFactor(),{fontSize:f.styles.fontSize});else if(f.styles.overflow==="ellipsize")f.text=r3(f.text,g,f.styles,e,"...");else if(f.styles.overflow==="hidden")f.text=r3(f.text,g,f.styles,e,"");else if(typeof f.styles.overflow=="function"){var x=f.styles.overflow(f.text,g);typeof x=="string"?f.text=[x]:f.text=x}f.contentHeight=f.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var v=f.contentHeight/f.rowSpan;f.rowSpan>1&&t.count*t.height<v*f.rowSpan?t={height:v,count:f.rowSpan}:t&&t.count>0&&t.height>v&&(v=t.height),v>o.height&&(o.height=v)}}t.count--}}function r3(n,e,t,r,a){return n.map(function(o){return zH(o,e,t,r,a)})}function zH(n,e,t,r,a){var o=1e4*r.scaleFactor();if(e=Math.ceil(e*o)/o,e>=qx(n,t,r))return n;for(;e<qx(n+a,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+a}function qH(n,e){var t=new Df(n),r=GH(e,t.scaleFactor()),a=new DH(e,r);return OH(t,a),t.applyStyles(t.userStyles),a}function GH(n,e){var t=n.content,r=$H(t.columns);if(t.head.length===0){var a=s3(r,"head");a&&t.head.push(a)}if(t.foot.length===0){var a=s3(r,"foot");a&&t.foot.push(a)}var o=n.settings.theme,c=n.styles;return{columns:r,head:U1("head",t.head,r,c,o,e),body:U1("body",t.body,r,c,o,e),foot:U1("foot",t.foot,r,c,o,e)}}function U1(n,e,t,r,a,o){var c={},u=e.map(function(h,f){for(var g=0,x={},v=0,b=0,T=0,E=t;T<E.length;T++){var j=E[T];if(c[j.index]==null||c[j.index].left===0)if(b===0){var S=void 0;Array.isArray(h)?S=h[j.index-v-g]:S=h[j.dataKey];var D={};typeof S=="object"&&!Array.isArray(S)&&(D=S?.styles||{});var O=WH(n,j,f,a,r,o,D),B=new HC(S,O,n);x[j.dataKey]=B,x[j.index]=B,b=B.colSpan-1,c[j.index]={left:B.rowSpan-1,times:b}}else b--,v++;else c[j.index].left--,b=c[j.index].times,g++}return new GC(h,f,n,x)});return u}function s3(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var a=HH(e,r.raw);a!=null&&(t[r.dataKey]=a)}}),Object.keys(t).length>0?t:null}function HH(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function $H(n){return n.map(function(e,t){var r,a;return typeof e=="object"?a=(r=e.dataKey)!==null&&r!==void 0?r:t:a=t,new MH(a,e,t)})}function WH(n,e,t,r,a,o,c){var u=vH(r),h;n==="head"?h=a.headStyles:n==="body"?h=a.bodyStyles:n==="foot"&&(h=a.footStyles);var f=Hc({},u.table,u[n],a.styles,h),g=a.columnStyles[e.dataKey]||a.columnStyles[e.index]||{},x=n==="body"?g:{},v=n==="body"&&t%2===0?Hc({},u.alternateRow,a.alternateRowStyles):{},b=bH(o),T=Hc({},b,f,v,x);return Hc(T,c)}function KH(n,e,t){var r;t===void 0&&(t={});var a=BC(n,e),o=new Map,c=[],u=[],h=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?h=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(h=[e.settings.horizontalPageBreakRepeat]),h.forEach(function(v){var b=e.columns.find(function(T){return T.dataKey===v||T.index===v});b&&!o.has(b.index)&&(o.set(b.index,!0),c.push(b.index),u.push(e.columns[b.index]),a-=b.wrappedWidth)});for(var f=!0,g=(r=t?.start)!==null&&r!==void 0?r:0;g<e.columns.length;){if(o.has(g)){g++;continue}var x=e.columns[g].wrappedWidth;if(f||a>=x)f=!1,c.push(g),u.push(e.columns[g]),a-=x;else break;g++}return{colIndexes:c,columns:u,lastIndex:g-1}}function YH(n,e){for(var t=[],r=0;r<e.columns.length;r++){var a=KH(n,e,{start:r});a.columns.length&&(t.push(a),r=a.lastIndex)}return t}function XH(n,e){var t=e.settings,r=t.startY,a=t.margin,o={x:a.left,y:r},c=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),u=r+a.bottom+c;if(t.pageBreak==="avoid"){var h=e.body,f=h.reduce(function(v,b){return v+b.height},0);u+=f}var g=new Df(n);(t.pageBreak==="always"||t.startY!=null&&u>g.pageSize().height)&&(WC(g),o.y=a.top),e.callWillDrawPageHooks(g,o);var x=Hc({},o);e.startPageNumber=g.pageNumber(),t.horizontalPageBreak?QH(g,e,x,o):(g.applyStyles(g.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(v){return eu(g,e,v,o,e.columns)}),g.applyStyles(g.userStyles),e.body.forEach(function(v,b){var T=b===e.body.length-1;Gx(g,e,v,T,x,o,e.columns)}),g.applyStyles(g.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(v){return eu(g,e,v,o,e.columns)})),UC(g,e,x,o),e.callEndPageHooks(g,o),e.finalY=o.y,n.lastAutoTable=e,g.applyStyles(g.userStyles)}function QH(n,e,t,r){var a=YH(n,e),o=e.settings;if(o.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(f,g){n.applyStyles(n.userStyles),g>0?Ag(n,e,t,r,f.columns,!0):a3(n,e,r,f.columns),JH(n,e,t,r,f.columns),V1(n,e,r,f.columns)});else for(var c=-1,u=a[0],h=function(){var f=c;if(u){n.applyStyles(n.userStyles);var g=u.columns;c>=0?Ag(n,e,t,r,g,!0):a3(n,e,r,g),f=i3(n,e,c+1,r,g),V1(n,e,r,g)}var x=f-c;a.slice(1).forEach(function(v){n.applyStyles(n.userStyles),Ag(n,e,t,r,v.columns,!0),i3(n,e,c+1,r,v.columns,x),V1(n,e,r,v.columns)}),c=f};c<e.body.length-1;)h()}function a3(n,e,t,r){var a=e.settings;n.applyStyles(n.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&e.head.forEach(function(o){return eu(n,e,o,t,r)})}function JH(n,e,t,r,a){n.applyStyles(n.userStyles),e.body.forEach(function(o,c){var u=c===e.body.length-1;Gx(n,e,o,u,t,r,a)})}function i3(n,e,t,r,a,o){n.applyStyles(n.userStyles),o=o??e.body.length;var c=Math.min(t+o,e.body.length),u=-1;return e.body.slice(t,c).forEach(function(h,f){var g=t+f===e.body.length-1,x=$C(n,e,g,r);h.canEntireRowFit(x,a)&&(eu(n,e,h,r,a),u=t+f)}),u}function V1(n,e,t,r){var a=e.settings;n.applyStyles(n.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&e.foot.forEach(function(o){return eu(n,e,o,t,r)})}function ZH(n,e,t){var r=t.getLineHeight(n.styles.fontSize),a=n.padding("vertical"),o=Math.floor((e-a)/r);return Math.max(0,o)}function e$(n,e,t,r){var a={};n.spansMultiplePages=!0,n.height=0;for(var o=0,c=0,u=t.columns;c<u.length;c++){var h=u[c],f=n.cells[h.index];if(f){Array.isArray(f.text)||(f.text=[f.text]);var g=new HC(f.raw,f.styles,f.section);g=Hc(g,f),g.text=[];var x=ZH(f,e,r);f.text.length>x&&(g.text=f.text.splice(x,f.text.length));var v=r.scaleFactor(),b=r.getLineHeightFactor();f.contentHeight=f.getContentHeight(v,b),f.contentHeight>=e&&(f.contentHeight=e,g.styles.minCellHeight-=e),f.contentHeight>n.height&&(n.height=f.contentHeight),g.contentHeight=g.getContentHeight(v,b),g.contentHeight>o&&(o=g.contentHeight),a[h.index]=g}}var T=new GC(n.raw,-1,n.section,a,!0);T.height=o;for(var E=0,j=t.columns;E<j.length;E++){var h=j[E],g=T.cells[h.index];g&&(g.height=T.height);var f=n.cells[h.index];f&&(f.height=n.height)}return T}function t$(n,e,t,r){var a=n.pageSize().height,o=r.settings.margin,c=o.top+o.bottom,u=a-c;e.section==="body"&&(u-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var h=e.getMinimumRowHeight(r.columns,n),f=h<t;if(h>u)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!f)return!1;var g=e.hasRowSpan(r.columns),x=e.getMaxCellHeight(r.columns)>u;return x?(g&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(g||r.settings.rowPageBreak==="avoid")}function Gx(n,e,t,r,a,o,c){var u=$C(n,e,r,o);if(t.canEntireRowFit(u,c))eu(n,e,t,o,c);else if(t$(n,t,u,e)){var h=e$(t,u,e,n);eu(n,e,t,o,c),Ag(n,e,a,o,c),Gx(n,e,h,r,a,o,c)}else Ag(n,e,a,o,c),Gx(n,e,t,r,a,o,c)}function eu(n,e,t,r,a){r.x=e.settings.margin.left;for(var o=0,c=a;o<c.length;o++){var u=c[o],h=t.cells[u.index];if(!h){r.x+=u.width;continue}n.applyStyles(h.styles),h.x=r.x,h.y=r.y;var f=e.callCellHooks(n,e.hooks.willDrawCell,h,t,u,r);if(f===!1){r.x+=u.width;continue}n$(n,h,r);var g=h.getTextPos();MC(h.text,g.x,g.y,{halign:h.styles.halign,valign:h.styles.valign,maxWidth:Math.ceil(h.width-h.padding("left")-h.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,h,t,u,r),r.x+=u.width}r.y+=t.height}function n$(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var a=VC(r.lineWidth,r.fillColor);a&&n.rect(e.x,t.y,e.width,e.height,a)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),r$(n,e,t,r.lineWidth))}function r$(n,e,t,r){var a,o,c,u;r.top&&(a=t.x,o=t.y,c=t.x+e.width,u=t.y,r.right&&(c+=.5*r.right),r.left&&(a-=.5*r.left),h(r.top,a,o,c,u)),r.bottom&&(a=t.x,o=t.y+e.height,c=t.x+e.width,u=t.y+e.height,r.right&&(c+=.5*r.right),r.left&&(a-=.5*r.left),h(r.bottom,a,o,c,u)),r.left&&(a=t.x,o=t.y,c=t.x,u=t.y+e.height,r.top&&(o-=.5*r.top),r.bottom&&(u+=.5*r.bottom),h(r.left,a,o,c,u)),r.right&&(a=t.x+e.width,o=t.y,c=t.x+e.width,u=t.y+e.height,r.top&&(o-=.5*r.top),r.bottom&&(u+=.5*r.bottom),h(r.right,a,o,c,u));function h(f,g,x,v,b){n.getDocument().setLineWidth(f),n.getDocument().line(g,x,v,b,"S")}}function $C(n,e,t,r){var a=e.settings.margin.bottom,o=e.settings.showFoot;return(o==="everyPage"||o==="lastPage"&&t)&&(a+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-a}function Ag(n,e,t,r,a,o){a===void 0&&(a=[]),o===void 0&&(o=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!o&&e.foot.forEach(function(u){return eu(n,e,u,r,a)}),e.callEndPageHooks(n,r);var c=e.settings.margin;UC(n,e,t,r),WC(n),e.pageNumber++,r.x=c.left,r.y=c.top,t.y=c.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(u){return eu(n,e,u,r,a)}),n.applyStyles(n.userStyles))}function WC(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function s$(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],a=AH(this,r),o=qH(this,a);return XH(this,o),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,a){MC(e,t,r,a,this)},n.API.autoTableSetDefaults=function(e){return Df.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){Df.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Df(this),o=qC(a,e,window,t,!1),c=o.head,u=o.body,h=((r=c[0])===null||r===void 0?void 0:r.map(function(f){return f.content}))||[];return{columns:h,rows:u,data:u}}}var B1;try{if(typeof window<"u"&&window){var o3=window,l3=o3.jsPDF||((B1=o3.jspdf)===null||B1===void 0?void 0:B1.jsPDF);l3&&s$(l3)}}catch(n){console.error("Could not apply autoTable plugin",n)}const KC=async(n,e={})=>{const{orientation:t="landscape",title:r="Village Statistics Report",gramPanchayatName:a="Gram Panchayat"}=e,o=await GT(n);if(o.length===0)throw new Error(`No data available for year ${n}`);const c=new kt({orientation:t,unit:"mm",format:"a4"}),u=c.internal.pageSize.getWidth(),h=c.internal.pageSize.getHeight();let f=20;const g=()=>(c.setFillColor(255,107,0),c.rect(0,0,u,3,"F"),c.setFillColor(255,255,255),c.rect(0,3,u,3,"F"),c.setFillColor(19,136,8),c.rect(0,6,u,3,"F"),c.setFontSize(18),c.setTextColor(0,0,0),c.setFont("helvetica","bold"),c.text(r,u/2,18,{align:"center"}),c.setFontSize(12),c.setFont("helvetica","normal"),c.text(a,u/2,25,{align:"center"}),c.setFontSize(10),c.text(`Year: ${n}`,u/2,31,{align:"center"}),38);f=g(),c.setFontSize(14),c.setFont("helvetica","bold"),c.setTextColor(255,107,0),c.text("1. Population Demographics",14,f),f+=8;const x=o.map(k=>[k.village.nameEn||"-",(k.demographics.totalPopulation||0).toLocaleString(),(k.demographics.malePopulation||0).toLocaleString(),(k.demographics.femalePopulation||0).toLocaleString(),k.demographics.source||"-"]),v=o.reduce((k,L)=>k+(L.demographics.totalPopulation||0),0),b=o.reduce((k,L)=>k+(L.demographics.malePopulation||0),0),T=o.reduce((k,L)=>k+(L.demographics.femalePopulation||0),0);x.push(["TOTAL",v.toLocaleString(),b.toLocaleString(),T.toLocaleString(),""]),c.autoTable({startY:f,head:[["Village","Total Population","Male","Female","Source"]],body:x,theme:"grid",headStyles:{fillColor:[255,107,0],textColor:255,fontStyle:"bold"},footStyles:{fillColor:[240,240,240],fontStyle:"bold"},alternateRowStyles:{fillColor:[252,248,245]},styles:{fontSize:9,cellPadding:3}}),f=c.lastAutoTable.finalY+10,f>h-60&&(c.addPage(),f=g()),c.setFontSize(14),c.setFont("helvetica","bold"),c.setTextColor(255,107,0),c.text("2. Category-wise Population Breakdown",14,f),f+=8;const E=[];o.forEach(k=>{const L=k.breakdowns.find(oe=>oe.category==="ST")||{},C=k.breakdowns.find(oe=>oe.category==="SC")||{},P=k.breakdowns.find(oe=>oe.category==="OBC")||{},V=k.breakdowns.find(oe=>oe.category==="OTHER")||{};E.push([k.village.nameEn||"-",(L.maleCount||0).toLocaleString(),(L.femaleCount||0).toLocaleString(),((L.maleCount||0)+(L.femaleCount||0)).toLocaleString(),(C.maleCount||0).toLocaleString(),(C.femaleCount||0).toLocaleString(),((C.maleCount||0)+(C.femaleCount||0)).toLocaleString(),(P.maleCount||0).toLocaleString(),(P.femaleCount||0).toLocaleString(),((P.maleCount||0)+(P.femaleCount||0)).toLocaleString(),(V.maleCount||0).toLocaleString(),(V.femaleCount||0).toLocaleString(),((V.maleCount||0)+(V.femaleCount||0)).toLocaleString()])});const j={male:0,female:0},S={male:0,female:0},D={male:0,female:0},O={male:0,female:0};o.forEach(k=>{k.breakdowns.forEach(L=>{L.category==="ST"?(j.male+=L.maleCount||0,j.female+=L.femaleCount||0):L.category==="SC"?(S.male+=L.maleCount||0,S.female+=L.femaleCount||0):L.category==="OBC"?(D.male+=L.maleCount||0,D.female+=L.femaleCount||0):L.category==="OTHER"&&(O.male+=L.maleCount||0,O.female+=L.femaleCount||0)})}),E.push(["TOTAL",j.male.toLocaleString(),j.female.toLocaleString(),(j.male+j.female).toLocaleString(),S.male.toLocaleString(),S.female.toLocaleString(),(S.male+S.female).toLocaleString(),D.male.toLocaleString(),D.female.toLocaleString(),(D.male+D.female).toLocaleString(),O.male.toLocaleString(),O.female.toLocaleString(),(O.male+O.female).toLocaleString()]),c.autoTable({startY:f,head:[["Village",{content:"ST",colSpan:3},{content:"SC",colSpan:3},{content:"OBC",colSpan:3},{content:"OTHER",colSpan:3}],["","M","F","T","M","F","T","M","F","T","M","F","T"]],body:E,theme:"grid",headStyles:{fillColor:[255,107,0],textColor:255,fontStyle:"bold",fontSize:8},footStyles:{fillColor:[240,240,240],fontStyle:"bold"},alternateRowStyles:{fillColor:[252,248,245]},styles:{fontSize:7,cellPadding:2}}),f=c.lastAutoTable.finalY+10,f>h-60&&(c.addPage(),f=g()),c.setFontSize(14),c.setFont("helvetica","bold"),c.setTextColor(255,107,0),c.text("3. Groups & Committees",14,f),f+=8;const B=o.map(k=>[k.village.nameEn||"-",(k.groups.mahilaBachatGatCount||0).toString(),(k.groups.yuvakMandalCount||0).toString(),(k.groups.kisanGatCount||0).toString(),(k.groups.otherGroupCount||0).toString(),((k.groups.mahilaBachatGatCount||0)+(k.groups.yuvakMandalCount||0)+(k.groups.kisanGatCount||0)+(k.groups.otherGroupCount||0)).toString()]),re=o.reduce((k,L)=>({mbg:k.mbg+(L.groups.mahilaBachatGatCount||0),ym:k.ym+(L.groups.yuvakMandalCount||0),kg:k.kg+(L.groups.kisanGatCount||0),og:k.og+(L.groups.otherGroupCount||0)}),{mbg:0,ym:0,kg:0,og:0});B.push(["TOTAL",re.mbg.toString(),re.ym.toString(),re.kg.toString(),re.og.toString(),(re.mbg+re.ym+re.kg+re.og).toString()]),c.autoTable({startY:f,head:[["Village","Mahila Bachat Gat","Yuvak Mandal","Kisan Gat","Other Groups","Total"]],body:B,theme:"grid",headStyles:{fillColor:[255,107,0],textColor:255,fontStyle:"bold"},footStyles:{fillColor:[240,240,240],fontStyle:"bold"},alternateRowStyles:{fillColor:[252,248,245]},styles:{fontSize:9,cellPadding:3}}),f=c.lastAutoTable.finalY+10,f>h-60&&(c.addPage(),f=g()),c.setFontSize(14),c.setFont("helvetica","bold"),c.setTextColor(255,107,0),c.text("4. Water & Infrastructure",14,f),f+=8;const ae=o.map(k=>[k.village.nameEn||"-",(k.infrastructure.wellsCount||0).toString(),(k.infrastructure.borewellsCount||0).toString(),(k.infrastructure.handpumpsCount||0).toString(),(k.infrastructure.tapConnectionsCount||0).toString(),((k.infrastructure.wellsCount||0)+(k.infrastructure.borewellsCount||0)+(k.infrastructure.handpumpsCount||0)+(k.infrastructure.tapConnectionsCount||0)).toString()]),G=o.reduce((k,L)=>({wells:k.wells+(L.infrastructure.wellsCount||0),bore:k.bore+(L.infrastructure.borewellsCount||0),hand:k.hand+(L.infrastructure.handpumpsCount||0),tap:k.tap+(L.infrastructure.tapConnectionsCount||0)}),{wells:0,bore:0,hand:0,tap:0});ae.push(["TOTAL",G.wells.toString(),G.bore.toString(),G.hand.toString(),G.tap.toString(),(G.wells+G.bore+G.hand+G.tap).toString()]),c.autoTable({startY:f,head:[["Village","Wells","Borewells","Handpumps","Tap Connections","Total"]],body:ae,theme:"grid",headStyles:{fillColor:[255,107,0],textColor:255,fontStyle:"bold"},footStyles:{fillColor:[240,240,240],fontStyle:"bold"},alternateRowStyles:{fillColor:[252,248,245]},styles:{fontSize:9,cellPadding:3}});const M=new Date().toLocaleDateString("en-IN");return c.setFontSize(8),c.setTextColor(100,100,100),c.text(`Generated on: ${M}`,14,h-10),c.text(`Page ${c.internal.getNumberOfPages()}`,u-30,h-10),c},a$=async(n,e={})=>{const r=(await KC(n,e)).output("blob"),a=URL.createObjectURL(r);window.open(a,"_blank")},YC=async(n,e={})=>{const t=await KC(n,e),r=`Village_Statistics_${n}_${Date.now()}.pdf`;t.save(r)},i$=({selectedYear:n})=>{const{settings:e}=iu(),[t,r]=W.useState(!1),[a,o]=W.useState({type:"",text:""}),c=async()=>{r(!0),o({type:"",text:""});try{const h={title:"Village Statistics Report",gramPanchayatName:e?.title?.en||"Gram Panchayat",orientation:"landscape"};await a$(n,h),o({type:"success",text:"PDF opened in new tab successfully!"})}catch(h){o({type:"error",text:h.message||"Failed to generate PDF. Please ensure data is available for the selected year."})}finally{r(!1)}},u=async()=>{r(!0),o({type:"",text:""});try{const h={title:"Village Statistics Report",gramPanchayatName:e?.title?.en||"Gram Panchayat",orientation:"landscape"};await YC(n,h),o({type:"success",text:`PDF for year ${n} downloaded successfully!`})}catch(h){o({type:"error",text:h.message||"Failed to generate PDF. Please ensure data is available for the selected year."})}finally{r(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["PDF Reports & Downloads - ",n]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Generate comprehensive PDF reports with all village statistics"})]}),a.text&&s.jsxs("div",{className:`flex items-center gap-2 p-4 rounded-lg ${a.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[a.type==="success"?s.jsx(Gi,{className:"w-5 h-5"}):s.jsx(Qn,{className:"w-5 h-5"}),s.jsx("span",{children:a.text})]}),s.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-green-50 border border-orange-200 rounded-lg p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 bg-white rounded-lg shadow-sm",children:s.jsx(fr,{className:"w-8 h-8 text-orange-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Comprehensive Village Statistics Report"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["This PDF report includes all village statistics data for year ",s.jsx("strong",{children:n}),":"]}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Population Demographics:"})," Total, Male, Female population per village"]})]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Category-wise Breakdown:"})," ST, SC, OBC, Other population distribution"]})]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Groups & Committees:"})," Mahila Bachat Gat, Yuvak Mandal, Kisan Gat counts"]})]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Water & Infrastructure:"})," Wells, Borewells, Handpumps, Tap Connections"]})]})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("button",{onClick:c,disabled:t,className:"flex items-center justify-center gap-3 px-6 py-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-md hover:shadow-lg",children:[s.jsx(xi,{className:"w-5 h-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-semibold",children:"Preview PDF"}),s.jsx("div",{className:"text-xs text-blue-100",children:"Open in new tab"})]})]}),s.jsxs("button",{onClick:u,disabled:t,className:"flex items-center justify-center gap-3 px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-md hover:shadow-lg",children:[s.jsx(zo,{className:"w-5 h-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-semibold",children:"Download PDF"}),s.jsx("div",{className:"text-xs text-green-100",children:"Save to computer"})]})]})]}),t&&s.jsxs("div",{className:"flex items-center justify-center gap-3 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),s.jsx("span",{className:"text-blue-700 font-medium",children:"Generating PDF report..."})]}),s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[s.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[s.jsx(Qn,{className:"w-5 h-5 text-gray-600"}),"Instructions"]}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-orange-600 font-bold",children:"1."}),s.jsxs("span",{children:["Ensure all data tabs (Demographics, Category-wise, Groups, Infrastructure) are filled with accurate data for year ",n,"."]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-orange-600 font-bold",children:"2."}),s.jsxs("span",{children:["Click ",s.jsx("strong",{children:'"Preview PDF"'})," to review the report in a new browser tab before downloading."]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-orange-600 font-bold",children:"3."}),s.jsxs("span",{children:["Click ",s.jsx("strong",{children:'"Download PDF"'})," to save the report to your computer."]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-orange-600 font-bold",children:"4."}),s.jsx("span",{children:"The PDF will include all villages with their complete statistics in a government-standard format."})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-orange-600 font-bold",children:"5."}),s.jsx("span",{children:"If no data is available for the selected year, you'll receive an error message. Please add data first."})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("h5",{className:"font-semibold text-gray-800",children:"Professional Format"})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Government-standard layout with Indian flag colors and proper tables"})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),s.jsx("h5",{className:"font-semibold text-gray-800",children:"Comprehensive Data"})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"All statistics sections included with totals and subtotals"})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),s.jsx("h5",{className:"font-semibold text-gray-800",children:"Easy Sharing"})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Download and share with officials, stakeholders, or publish online"})]})]})]})},o$=[{id:"villages",label:"Manage Villages",labelMr:"  "},{id:"demographics",label:"Demographics",labelMr:""},{id:"categories",label:"Category-wise",labelMr:""},{id:"groups",label:"Groups & Committees",labelMr:"  "},{id:"infrastructure",label:"Water & Infrastructure",labelMr:"   "},{id:"reports",label:"PDF / Reports",labelMr:"PDF / "}],l$=()=>{const[n,e]=W.useState("villages"),[t,r]=W.useState([]),[a,o]=W.useState(null),[c,u]=W.useState(!1),[h,f]=W.useState(""),[g,x]=W.useState(!0);W.useEffect(()=>{v()},[]);const v=async()=>{x(!0);try{const j=await Fx();r(j);const S=await qT();S?o(S):j.length>0&&o(j[0])}catch(j){console.error("Error loading data:",j)}finally{x(!1)}},b=async()=>{const j=parseInt(h);if(!j||j<1900||j>2100){alert("Please enter a valid year between 1900 and 2100");return}try{await jz(j);const S=await Fx();r(S),o(j),f(""),u(!1)}catch(S){alert(S.message||"Failed to add year")}},T=j=>{o(parseInt(j.target.value))},E=()=>{if(n==="villages")return s.jsx(_z,{});if(!a)return s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Zr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"No year selected. Please add a year to get started."})]});switch(n){case"demographics":return s.jsx(Sz,{selectedYear:a});case"categories":return s.jsx(Ez,{selectedYear:a});case"groups":return s.jsx(Az,{selectedYear:a});case"infrastructure":return s.jsx(Tz,{selectedYear:a});case"reports":return s.jsx(i$,{selectedYear:a});default:return null}};return g?s.jsx("div",{className:"flex justify-center items-center h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-orange-600"})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-green-600 text-white",children:s.jsxs("div",{className:"container mx-auto px-4 py-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(vT,{className:"w-8 h-8"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Village Statistics"}),s.jsx("p",{className:"text-sm text-orange-100",children:" "})]})]}),s.jsx("p",{className:"text-sm text-white/90 mt-2",children:"Manage census data, population breakdowns, groups, and infrastructure year-wise"})]})}),s.jsxs("div",{className:"container mx-auto px-4 py-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Year /  "}),s.jsx("select",{value:a||"",onChange:T,className:"w-full md:w-64 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:t.length===0?s.jsx("option",{value:"",children:"No years available"}):t.map(j=>s.jsx("option",{value:j,children:j},j))})]}),s.jsx("div",{children:c?s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"number",value:h,onChange:j=>f(j.target.value),placeholder:"Enter year (e.g., 2025)",className:"w-48 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",onKeyPress:j=>j.key==="Enter"&&b()}),s.jsx("button",{onClick:b,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Add"}),s.jsx("button",{onClick:()=>{u(!1),f("")},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]}):s.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:[s.jsx(Ss,{className:"w-4 h-4"}),"Add Year"]})})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-6",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("div",{className:"flex overflow-x-auto",children:o$.map(j=>s.jsx("button",{onClick:()=>e(j.id),className:`flex-shrink-0 px-6 py-4 text-sm font-medium transition-colors border-b-2 ${n===j.id?"border-orange-600 text-orange-600":"border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300"}`,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{children:j.label}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:j.labelMr})]})},j.id))})}),s.jsx("div",{className:"p-6",children:E()})]})]})]})},c$=()=>{const{language:n}=ms(),{settings:e}=iu(),[t,r]=W.useState([]),[a,o]=W.useState(null),[c,u]=W.useState([]),[h,f]=W.useState(!0),[g,x]=W.useState(!1);W.useEffect(()=>{v()},[]),W.useEffect(()=>{a&&b()},[a]);const v=async()=>{try{const j=await Fx();r(j);const S=await qT();S?o(S):j.length>0&&o(j[0])}catch(j){console.error("Error loading initial data:",j)}finally{f(!1)}},b=async()=>{try{const j=await GT(a);if(console.log("Raw data from Firebase:",j),j&&j.villages&&Array.isArray(j.villages)){const S=j.villages.map(D=>{const O=j.demographics?.find(G=>G.villageId===D.id)||{},B=j.breakdowns?.filter(G=>G.villageId===D.id)||[],re=j.groups?.find(G=>G.villageId===D.id)||{},ae=j.infrastructure?.find(G=>G.villageId===D.id)||{};return{village:D,demographics:O,breakdowns:B,groups:re,infrastructure:ae}});console.log("Transformed summary array:",S),u(S)}else console.log("No villages found in data"),u([])}catch(j){console.error("Error loading statistics:",j),u([])}},T=async()=>{x(!0);try{const j={title:"Village Statistics Report",gramPanchayatName:e?.title?.en||"Gram Panchayat",orientation:"landscape"};await YC(a,j)}catch{alert("Failed to generate PDF. Please try again.")}finally{x(!1)}};if(h)return s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-orange-600"})});if(t.length===0)return s.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Zr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:n==="en"?"No Data Available":"  "}),s.jsx("p",{className:"text-gray-600",children:n==="en"?"Village statistics data has not been added yet.":"      ."})]})})});const E=["ST","SC","OBC","OTHER"];return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-green-600 text-white py-12",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx(vT,{className:"w-12 h-12"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:n==="en"?"Village Statistics":" "}),s.jsx("p",{className:"text-orange-100 mt-1",children:n==="en"?"Census & Infrastructure Data":"    "})]})]})})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n==="en"?"Select Year":" "}),s.jsx("select",{value:a||"",onChange:j=>o(parseInt(j.target.value)),className:"w-full md:w-64 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:t.map(j=>s.jsx("option",{value:j,children:j},j))})]}),s.jsxs("button",{onClick:T,disabled:g,className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-md",children:[s.jsx(zo,{className:"w-5 h-5"}),g?n==="en"?"Generating...":"  ...":n==="en"?"Download Full Report (PDF)":"    (PDF)"]})]})}),c.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[s.jsx(Zr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:n==="en"?`No data available for year ${a}`:`${a}    `})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx(Us,{className:"w-6 h-6 text-orange-600"}),s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:n==="en"?"Population Overview":" "})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-green-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Village":""}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Total Population":" "}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Male":""}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Female":""})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((j,S)=>s.jsxs("tr",{className:S%2===0?"bg-white":"bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:n==="en"?j.village.nameEn:j.village.nameMr})}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-900 font-semibold",children:(j.demographics.totalPopulation||0).toLocaleString()}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:(j.demographics.malePopulation||0).toLocaleString()}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:(j.demographics.femalePopulation||0).toLocaleString()})]},j.village.id))}),s.jsx("tfoot",{className:"bg-gray-100",children:s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 font-bold text-gray-900",children:n==="en"?"TOTAL":""}),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-gray-900",children:c.reduce((j,S)=>j+(S.demographics.totalPopulation||0),0).toLocaleString()}),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-gray-900",children:c.reduce((j,S)=>j+(S.demographics.malePopulation||0),0).toLocaleString()}),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-gray-900",children:c.reduce((j,S)=>j+(S.demographics.femalePopulation||0),0).toLocaleString()})]})})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:n==="en"?"Category-wise Population":" "}),c.map((j,S)=>s.jsxs("div",{className:`mb-6 ${S!==c.length-1?"pb-6 border-b border-gray-200":""}`,children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:n==="en"?j.village.nameEn:j.village.nameMr}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-700 uppercase",children:n==="en"?"Category":""}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-700 uppercase",children:n==="en"?"Male":""}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-700 uppercase",children:n==="en"?"Female":""}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-700 uppercase",children:n==="en"?"Total":""})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(D=>{const O=j.breakdowns.find(B=>B.category===D)||{};return s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:D}),s.jsx("td",{className:"px-4 py-2 text-center text-sm text-gray-700",children:(O.maleCount||0).toLocaleString()}),s.jsx("td",{className:"px-4 py-2 text-center text-sm text-gray-700",children:(O.femaleCount||0).toLocaleString()}),s.jsx("td",{className:"px-4 py-2 text-center text-sm font-semibold text-gray-900",children:((O.maleCount||0)+(O.femaleCount||0)).toLocaleString()})]},D)})})]})})]},j.village.id))]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:n==="en"?"Groups & Committees":"  "}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-green-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Village":""}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Mahila Bachat Gat":"  "}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Yuvak Mandal":" "}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Kisan Gat":" "}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Other Groups":" "})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((j,S)=>s.jsxs("tr",{className:S%2===0?"bg-white":"bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:n==="en"?j.village.nameEn:j.village.nameMr}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.groups.mahilaBachatGatCount||0}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.groups.yuvakMandalCount||0}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.groups.kisanGatCount||0}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.groups.otherGroupCount||0})]},j.village.id))})]})})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 px-6 py-4",children:s.jsxs("h2",{className:"text-white font-semibold flex items-center gap-2",children:[s.jsx(Px,{className:"w-5 h-5"}),n==="en"?"Water Supply Sources":"  "]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-green-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Sr. No.":".."}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Water Source":" "}),c.map(j=>s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?j.village.nameEn:j.village.nameMr},j.village.id)),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider bg-blue-50",children:n==="en"?"Total":""})]})}),s.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"1"}),s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:n==="en"?"Private Wells":" "}),c.map(j=>s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.privateWells||0},j.village.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:c.reduce((j,S)=>j+(S.infrastructure.privateWells||0),0)})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"2"}),s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:n==="en"?"Public Wells":" "}),c.map(j=>s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.publicWells||0},j.village.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:c.reduce((j,S)=>j+(S.infrastructure.publicWells||0),0)})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"3"}),s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:n==="en"?"NIT Scheme":" "}),c.map(j=>s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.nitScheme||0},j.village.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:c.reduce((j,S)=>j+(S.infrastructure.nitScheme||0),0)})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"4"}),s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:n==="en"?"Handpumps":""}),c.map(j=>s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.handpumps||0},j.village.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:c.reduce((j,S)=>j+(S.infrastructure.handpumps||0),0)})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"5"}),s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:n==="en"?"Water Tank Capacity":"  "}),c.map(j=>s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.waterTankCapacity||""},j.village.id)),s.jsx("td",{className:"px-6 py-4 text-center text-gray-500 bg-blue-50",children:""})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"6"}),s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:n==="en"?"Water Filter Plant":"  "}),c.map(j=>s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.waterFilterPlant||0},j.village.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:c.reduce((j,S)=>j+(S.infrastructure.waterFilterPlant||0),0)})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"7"}),s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:n==="en"?"Private Ponds":" "}),c.map(j=>s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.privatePonds||0},j.village.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:c.reduce((j,S)=>j+(S.infrastructure.privatePonds||0),0)})]})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4",children:s.jsxs("h2",{className:"text-white font-semibold flex items-center gap-2",children:[s.jsx(Px,{className:"w-5 h-5"}),n==="en"?"Tap Connection Details":"  "]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-green-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Sr. No.":".."}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Village":""}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Families":""}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Old Connections":" "}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"New Connections":" "}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider bg-indigo-50",children:n==="en"?"Total Connections":" "}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Private Wells":" "}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Pending":""})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((j,S)=>s.jsxs("tr",{className:S%2===0?"bg-white":"bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:S+1}),s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:n==="en"?j.village.nameEn:j.village.nameMr}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.families||0}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.oldTapConnections||0}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.newTapConnections||0}),s.jsx("td",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-900 bg-indigo-50",children:j.infrastructure.totalTapConnections||0}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.privateWellsForTap||0}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.pendingTapConnections||0})]},j.village.id))}),s.jsx("tfoot",{className:"bg-indigo-50",children:s.jsxs("tr",{className:"font-bold",children:[s.jsx("td",{className:"px-6 py-4",colSpan:"2",children:n==="en"?"Total":""}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900",children:c.reduce((j,S)=>j+(S.infrastructure.families||0),0)}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900",children:c.reduce((j,S)=>j+(S.infrastructure.oldTapConnections||0),0)}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900",children:c.reduce((j,S)=>j+(S.infrastructure.newTapConnections||0),0)}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900 bg-indigo-100",children:c.reduce((j,S)=>j+(S.infrastructure.totalTapConnections||0),0)}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900",children:c.reduce((j,S)=>j+(S.infrastructure.privateWellsForTap||0),0)}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900",children:c.reduce((j,S)=>j+(S.infrastructure.pendingTapConnections||0),0)})]})})]})})]})]})]})]})]})};function u$(){const[n,e]=W.useState([]),[t,r]=W.useState(!0),[a,o]=W.useState(""),[c,u]=W.useState("all"),{getContent:h}=ms();W.useEffect(()=>{f()},[]);const f=async()=>{try{r(!0);const E=await XV();e(E)}catch(E){console.error("Error loading announcements:",E),alert("Failed to load announcements")}finally{r(!1)}},g=async E=>{if(window.confirm("Are you sure you want to delete this announcement?"))try{await eB(E),e(n.filter(j=>j.id!==E)),alert("Announcement deleted successfully")}catch(j){console.error("Error deleting announcement:",j),alert("Failed to delete announcement")}},x=async(E,j)=>{try{await tB(E,!j),e(n.map(S=>S.id===E?{...S,isActive:!j}:S))}catch(S){console.error("Error toggling status:",S),alert("Failed to update status")}},v=n.filter(E=>{const j=h(E.title).toLowerCase().includes(a.toLowerCase())||h(E.message).toLowerCase().includes(a.toLowerCase()),S=c==="all"||c==="active"&&E.isActive||c==="inactive"&&!E.isActive||c===E.type;return j&&S}),b={info:"bg-blue-100 text-blue-800",warning:"bg-yellow-100 text-yellow-800",alert:"bg-red-100 text-red-800",success:"bg-green-100 text-green-800"},T={high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-gray-100 text-gray-800"};return t?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[s.jsx(qi,{className:"text-orange-600"}),"Announcements Management"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage scrolling announcements for homepage"})]}),s.jsxs(_n,{to:"/admin/announcements/new",className:"inline-flex items-center gap-2 bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white px-6 py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all",children:[s.jsx(Ss,{size:20}),"Add Announcement"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white p-6 rounded-xl shadow-lg",children:[s.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total"}),s.jsx("p",{className:"text-3xl font-bold",children:n.length})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white p-6 rounded-xl shadow-lg",children:[s.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Active"}),s.jsx("p",{className:"text-3xl font-bold",children:n.filter(E=>E.isActive).length})]}),s.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white p-6 rounded-xl shadow-lg",children:[s.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Inactive"}),s.jsx("p",{className:"text-3xl font-bold",children:n.filter(E=>!E.isActive).length})]}),s.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white p-6 rounded-xl shadow-lg",children:[s.jsx("p",{className:"text-sm opacity-90 mb-1",children:"High Priority"}),s.jsx("p",{className:"text-3xl font-bold",children:n.filter(E=>E.priority==="high").length})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-md p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Hi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search announcements...",value:a,onChange:E=>o(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),s.jsxs("select",{value:c,onChange:E=>u(E.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"active",children:"Active Only"}),s.jsx("option",{value:"inactive",children:"Inactive Only"}),s.jsx("option",{value:"info",children:"Info"}),s.jsx("option",{value:"warning",children:"Warning"}),s.jsx("option",{value:"alert",children:"Alert"}),s.jsx("option",{value:"success",children:"Success"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:v.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(qi,{className:"mx-auto text-gray-400 mb-4",size:48}),s.jsx("p",{className:"text-gray-500 text-lg",children:"No announcements found"}),s.jsx(_n,{to:"/admin/announcements/new",className:"inline-block mt-4 text-orange-600 hover:text-orange-700 font-semibold",children:"Create your first announcement"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Title & Message"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Priority"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:v.map(E=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-900",children:h(E.title)}),s.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mt-1",children:h(E.message)})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold ${b[E.type]||b.info}`,children:[E.type==="alert"&&s.jsx(Qn,{size:14}),E.type]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${T[E.priority]||T.low}`,children:E.priority})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("button",{onClick:()=>x(E.id,E.isActive),className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold transition-colors ${E.isActive?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:E.isActive?s.jsxs(s.Fragment,{children:[s.jsx(xi,{size:14}),"Active"]}):s.jsxs(s.Fragment,{children:[s.jsx(bh,{size:14}),"Inactive"]})})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_n,{to:`/admin/announcements/edit/${E.id}`,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:s.jsx(ud,{size:18})}),s.jsx("button",{onClick:()=>g(E.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:s.jsx(ti,{size:18})})]})})]},E.id))})]})})})]})}function c3(){const{id:n}=bl(),e=Tr(),[t,r]=W.useState(!1),[a,o]=W.useState({title:{en:"",mr:""},message:{en:"",mr:""},type:"info",priority:"medium",link:"",isActive:!0});W.useEffect(()=>{n&&c()},[n]);const c=async()=>{try{r(!0);const f=await JV(n);f&&o({title:f.title||{en:"",mr:""},message:f.message||{en:"",mr:""},type:f.type||"info",priority:f.priority||"medium",link:f.link||"",isActive:f.isActive!==void 0?f.isActive:!0})}catch(f){console.error("Error loading announcement:",f),alert("Failed to load announcement")}finally{r(!1)}},u=async f=>{if(f.preventDefault(),!a.title.en.trim()||!a.message.en.trim()){alert("Please fill in required fields (English title and message)");return}try{r(!0),n?(await AT(n,a),alert("Announcement updated successfully!")):(await ZV(a),alert("Announcement created successfully!")),e("/admin/announcements")}catch(g){console.error("Error saving announcement:",g),alert("Failed to save announcement")}finally{r(!1)}},h=(f,g)=>{o(x=>({...x,[f]:g}))};return t&&n?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary-600"})}):s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("button",{onClick:()=>e("/admin/announcements"),className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[s.jsx(xo,{size:20}),"Back to Announcements"]}),s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[s.jsx(qi,{className:"text-orange-600"}),n?"Edit Announcement":"Create New Announcement"]})]}),s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Announcement Title"}),s.jsx(jn,{label:"Title",value:a.title,onChange:f=>h("title",f),placeholder:{en:"Enter title in English",mr:"   "},required:!0})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Announcement Message"}),s.jsx(jn,{label:"Message",value:a.message,onChange:f=>h("message",f),placeholder:{en:"Enter message in English",mr:"   "},rows:4,required:!0})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Settings"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Type *"}),s.jsxs("select",{value:a.type,onChange:f=>h("type",f.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"info",children:"Info"}),s.jsx("option",{value:"warning",children:"Warning"}),s.jsx("option",{value:"alert",children:"Alert"}),s.jsx("option",{value:"success",children:"Success"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Determines the color scheme"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Priority *"}),s.jsxs("select",{value:a.priority,onChange:f=>h("priority",f.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Higher priority shows first"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status"}),s.jsxs("label",{className:"flex items-center gap-3 px-4 py-2.5 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:a.isActive,onChange:f=>h("isActive",f.target.checked),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),s.jsx("span",{className:"text-gray-700 font-medium",children:"Show on Homepage"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enable to display in banner"})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Link (Optional)"}),s.jsx("input",{type:"url",value:a.link,onChange:f=>h("link",f.target.value),placeholder:"https://example.com/details",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Optional: Add a link for "Read More" button'})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-blue-50 rounded-xl shadow-md p-6 border-2 border-dashed border-orange-200",children:[s.jsxs("h2",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center gap-2",children:[s.jsx(qi,{size:20,className:"text-orange-600"}),"Preview (English)"]}),s.jsxs("div",{className:`p-4 rounded-lg border-l-4 ${a.type==="info"?"bg-blue-50 border-blue-500":a.type==="warning"?"bg-yellow-50 border-yellow-500":a.type==="alert"?"bg-red-50 border-red-500":"bg-green-50 border-green-500"}`,children:[s.jsx("p",{className:"font-bold text-gray-900",children:a.title.en||"Title will appear here"}),s.jsx("p",{className:"text-gray-700 text-sm mt-1",children:a.message.en||"Message will appear here"}),a.link&&s.jsx("a",{href:a.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-sm mt-2 inline-block hover:underline",children:"Read More "})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("button",{type:"submit",disabled:t,className:"flex-1 inline-flex items-center justify-center gap-2 bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white px-8 py-4 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Bs,{size:20}),t?"Saving...":n?"Update Announcement":"Create Announcement"]}),s.jsx("button",{type:"button",onClick:()=>e("/admin/announcements"),className:"px-8 py-4 border-2 border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]})}async function d$(){console.log(" Starting data migration from localStorage to Firebase..."),console.log("====================================================");const n={villages:0,demographics:0,breakdowns:0,groups:0,infrastructure:0,years:0,news:0,schemes:0,achievements:0,complaints:0,errors:[]};try{console.log(`
 Migrating Villages...`);const e=JSON.parse(localStorage.getItem("VILLAGES")||"[]");for(const x of e)try{await vs(Ht(Ke,"villages"),{...x,createdAt:Xt(),updatedAt:Xt()}),n.villages++}catch(v){n.errors.push({type:"village",data:x,error:v.message})}console.log(` Migrated ${n.villages} villages`),console.log(`
 Migrating Demographics...`);const t=JSON.parse(localStorage.getItem("VILLAGE_DEMOGRAPHICS")||"[]");for(const x of t)try{await vs(Ht(Ke,"demographics"),{...x,createdAt:Xt(),updatedAt:Xt()}),n.demographics++}catch(v){n.errors.push({type:"demographics",data:x,error:v.message})}console.log(` Migrated ${n.demographics} demographics records`),console.log(`
 Migrating Population Breakdowns...`);const r=JSON.parse(localStorage.getItem("VILLAGE_POPULATION_BREAKDOWNS")||"[]");for(const x of r)try{await vs(Ht(Ke,"populationBreakdowns"),{...x,createdAt:Xt(),updatedAt:Xt()}),n.breakdowns++}catch(v){n.errors.push({type:"breakdown",data:x,error:v.message})}console.log(` Migrated ${n.breakdowns} population breakdowns`),console.log(`
 Migrating Village Groups...`);const a=JSON.parse(localStorage.getItem("VILLAGE_GROUPS")||"[]");for(const x of a)try{await vs(Ht(Ke,"villageGroups"),{...x,createdAt:Xt(),updatedAt:Xt()}),n.groups++}catch(v){n.errors.push({type:"groups",data:x,error:v.message})}console.log(` Migrated ${n.groups} village groups`),console.log(`
  Migrating Infrastructure...`);const o=JSON.parse(localStorage.getItem("VILLAGE_INFRASTRUCTURE")||"[]");for(const x of o)try{await vs(Ht(Ke,"infrastructure"),{...x,createdAt:Xt(),updatedAt:Xt()}),n.infrastructure++}catch(v){n.errors.push({type:"infrastructure",data:x,error:v.message})}console.log(` Migrated ${n.infrastructure} infrastructure records`),console.log(`
 Migrating Years...`);const c=JSON.parse(localStorage.getItem("STATISTICS_YEARS")||"[]");for(const x of c)try{await vs(Ht(Ke,"statisticsYears"),{year:x,createdAt:Xt()}),n.years++}catch(v){n.errors.push({type:"year",data:x,error:v.message})}console.log(` Migrated ${n.years} years`),console.log(`
 Migrating News...`);const u=JSON.parse(localStorage.getItem("NEWS")||"[]");for(const x of u)try{await vs(Ht(Ke,"news"),{...x,createdAt:Xt(),updatedAt:Xt()}),n.news++}catch(v){n.errors.push({type:"news",data:x,error:v.message})}console.log(` Migrated ${n.news} news items`),console.log(`
 Migrating Schemes...`);const h=JSON.parse(localStorage.getItem("SCHEMES")||"[]");for(const x of h)try{await vs(Ht(Ke,"schemes"),{...x,createdAt:Xt(),updatedAt:Xt()}),n.schemes++}catch(v){n.errors.push({type:"scheme",data:x,error:v.message})}console.log(` Migrated ${n.schemes} schemes`),console.log(`
 Migrating Achievements...`);const f=JSON.parse(localStorage.getItem("ACHIEVEMENTS")||"[]");for(const x of f)try{await vs(Ht(Ke,"achievements"),{...x,createdAt:Xt(),updatedAt:Xt()}),n.achievements++}catch(v){n.errors.push({type:"achievement",data:x,error:v.message})}console.log(` Migrated ${n.achievements} achievements`),console.log(`
 Migrating Complaints...`);const g=JSON.parse(localStorage.getItem("COMPLAINTS")||"[]");for(const x of g)try{await vs(Ht(Ke,"complaints"),{...x,createdAt:Xt(),updatedAt:Xt()}),n.complaints++}catch(v){n.errors.push({type:"complaint",data:x,error:v.message})}return console.log(` Migrated ${n.complaints} complaints`),console.log(`
====================================================`),console.log(" MIGRATION SUMMARY:"),console.log("===================================================="),console.log(`Villages:            ${n.villages}`),console.log(`Demographics:        ${n.demographics}`),console.log(`Breakdowns:          ${n.breakdowns}`),console.log(`Groups:              ${n.groups}`),console.log(`Infrastructure:      ${n.infrastructure}`),console.log(`Years:               ${n.years}`),console.log(`News:                ${n.news}`),console.log(`Schemes:             ${n.schemes}`),console.log(`Achievements:        ${n.achievements}`),console.log(`Complaints:          ${n.complaints}`),console.log("===================================================="),console.log(`Total migrated:      ${Object.values(n).reduce((x,v)=>typeof v=="number"?x+v:x,0)}`),console.log(`Errors:              ${n.errors.length}`),console.log("===================================================="),n.errors.length>0&&(console.log(`
 Errors encountered:`),n.errors.forEach((x,v)=>{console.log(`${v+1}. ${x.type}:`,x.error)})),console.log(`
 Migration complete!`),console.log("  IMPORTANT: After verifying data in Firebase Console,"),console.log("    you can safely clear localStorage."),n}catch(e){throw console.error(" Migration failed:",e),e}}function h$(){return confirm(" WARNING: This will clear all localStorage data. Have you verified data in Firebase? This cannot be undone!")?(localStorage.removeItem("VILLAGES"),localStorage.removeItem("VILLAGE_DEMOGRAPHICS"),localStorage.removeItem("VILLAGE_POPULATION_BREAKDOWNS"),localStorage.removeItem("VILLAGE_GROUPS"),localStorage.removeItem("VILLAGE_INFRASTRUCTURE"),localStorage.removeItem("STATISTICS_YEARS"),localStorage.removeItem("NEWS"),localStorage.removeItem("SCHEMES"),localStorage.removeItem("ACHIEVEMENTS"),localStorage.removeItem("COMPLAINTS"),localStorage.removeItem("ADMIN_USER"),localStorage.removeItem("SITE_SETTINGS"),console.log(" localStorage cleared"),!0):!1}async function f$(){try{console.log(" Testing Firebase connection...");const n=await vs(Ht(Ke,"test"),{message:"Firebase connection test",timestamp:Xt()});return console.log(" Firebase connected successfully!"),console.log("   Test document ID:",n.id),!0}catch(n){return console.error(" Firebase connection failed:",n),console.error("   Check your .env file and Firebase configuration"),!1}}const m$=()=>{const[n,e]=W.useState(""),[t,r]=W.useState(!1),[a,o]=W.useState("admin@grampanchayat.com"),[c,u]=W.useState(""),h=async()=>{r(!0),e(" Testing Firebase connection...");try{const v=await f$();e(v?" Firebase connected successfully! Check console for details.":" Connection failed. Check console for errors.")}catch(v){e(` Error: ${v.message}`)}finally{r(!1)}},f=async()=>{if(confirm(" This will migrate all localStorage data to Firebase. Continue?")){r(!0),e(" Migrating data to Firebase... Check console for progress.");try{const v=await d$();e(` Migration complete! Migrated ${JSON.stringify(v)} records. Check console for details.`)}catch(v){e(` Migration failed: ${v.message}`)}finally{r(!1)}}},g=async()=>{if(!a||!c){e(" Please enter email and password");return}if(c.length<6){e(" Password must be at least 6 characters");return}r(!0),e(" Creating admin user...");try{await dF(a,c,{name:"Admin",role:"admin"}),e(` Admin user created successfully! Email: ${a}`),u("")}catch(v){v.code==="auth/email-already-in-use"?e(" Email already in use. Admin user already exists."):e(` Error: ${v.message}`)}finally{r(!1)}},x=()=>{h$()&&e(" localStorage cleared successfully!")};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-green-50 p-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:" Firebase Setup & Migration"}),s.jsx("p",{className:"text-gray-600",children:"Configure Firebase and migrate your data from localStorage"})]}),n&&s.jsx("div",{className:"bg-white rounded-lg shadow-lg p-4 mb-6",children:s.jsx("p",{className:"text-sm font-mono whitespace-pre-wrap",children:n})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Step 1: Test Firebase Connection"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Verify that Firebase is configured correctly."}),s.jsx("button",{onClick:h,disabled:t,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Testing...":" Test Connection"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Step 2: Create Admin User"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Create an admin account for Firebase Authentication."}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Email"}),s.jsx("input",{type:"email",value:a,onChange:v=>o(v.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2",placeholder:"admin@grampanchayat.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Password (min 6 characters)"}),s.jsx("input",{type:"password",value:c,onChange:v=>u(v.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2",placeholder:"Enter secure password"})]}),s.jsx("button",{onClick:g,disabled:t,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Creating...":" Create Admin User"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Step 3: Migrate Data from localStorage"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Transfer all existing data from localStorage to Firebase Firestore."}),s.jsx("button",{onClick:f,disabled:t,className:"bg-orange-600 hover:bg-orange-700 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Migrating...":" Migrate Data to Firebase"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Step 4: Clear localStorage (Optional)"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"After verifying data in Firebase Console, you can clear localStorage."}),s.jsx("button",{onClick:x,disabled:t,className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:" Clear localStorage"})]}),s.jsxs("div",{className:"bg-gradient-to-r from-orange-100 to-green-100 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:" Setup Instructions"}),s.jsxs("ol",{className:"space-y-2 text-gray-700",children:[s.jsxs("li",{children:["1. Enable ",s.jsx("b",{children:"Firestore Database"})," in Firebase Console (Test mode)"]}),s.jsxs("li",{children:["2. Enable ",s.jsx("b",{children:"Authentication"}),"  Email/Password"]}),s.jsxs("li",{children:["3. Enable ",s.jsx("b",{children:"Storage"})," (Test mode)"]}),s.jsx("li",{children:'4. Click "Test Connection" above'}),s.jsx("li",{children:"5. Create admin user with email and password"}),s.jsx("li",{children:"6. Migrate your data (if you have existing data)"}),s.jsx("li",{children:"7. Verify data in Firebase Console"}),s.jsxs("li",{children:["8. Deploy security rules from ",s.jsx("code",{children:"firestore.rules"})," and ",s.jsx("code",{children:"storage.rules"})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-300",children:s.jsxs("p",{className:"text-sm text-gray-600",children:[" Firebase Console: ",s.jsx("a",{href:"https://console.firebase.google.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"https://console.firebase.google.com/"})]})})]})]})})};function g$(){const n=Tr(),[e,t]=W.useState({email:"",password:""}),[r,a]=W.useState(!1),[o,c]=W.useState(""),[u,h]=W.useState(!1),f=async x=>{x.preventDefault(),a(!0),c("");try{const v=await uS(ac,e.email,e.password);await hT(v.user.uid)?n("/superadmin/dashboard"):(await ac.signOut(),c("Unauthorized. You do not have super admin access."))}catch(v){console.error("Login error:",v);let b="Login failed. Please try again.";v.code==="auth/user-not-found"?b="No account found with this email.":v.code==="auth/wrong-password"?b="Incorrect password.":v.code==="auth/invalid-email"?b="Invalid email address.":v.code==="auth/too-many-requests"&&(b="Too many failed attempts. Please try again later."),c(b)}finally{a(!1)}},g=x=>{t({...e,[x.target.name]:x.target.value}),c("")};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-800 flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm"}),s.jsxs("div",{className:"relative z-10 w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white/10 backdrop-blur-md rounded-full mb-4 border border-white/20",children:s.jsx(Ql,{className:"w-10 h-10 text-white"})}),s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Super Admin Panel"}),s.jsx("p",{className:"text-indigo-200",children:"Gram Panchayat Multi-Tenant Management"})]}),s.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 shadow-2xl border border-white/20",children:s.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o&&s.jsxs("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-4 flex items-start gap-3",children:[s.jsx(Qn,{className:"w-5 h-5 text-red-200 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-red-100",children:o})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(go,{className:"h-5 w-5 text-indigo-300"})}),s.jsx("input",{type:"email",name:"email",value:e.email,onChange:g,required:!0,placeholder:"superadmin@grampanchayat.in",className:"block w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent transition",disabled:r})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(k2,{className:"h-5 w-5 text-indigo-300"})}),s.jsx("input",{type:u?"text":"password",name:"password",value:e.password,onChange:g,required:!0,placeholder:"Enter your password",className:"block w-full pl-10 pr-12 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent transition",disabled:r}),s.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-indigo-300 hover:text-white transition",children:u?s.jsx(bh,{className:"h-5 w-5"}):s.jsx(xi,{className:"h-5 w-5"})})]})]}),s.jsx("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold py-3 px-4 rounded-lg hover:from-indigo-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg",children:r?s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Signing in..."]}):"Sign In"}),s.jsx("p",{className:"text-xs text-center text-indigo-200",children:"Super Admin access only. Unauthorized access is prohibited."})]})}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("button",{onClick:()=>n("/"),className:"text-sm text-indigo-200 hover:text-white transition",children:" Back to Main Site"})}),s.jsx("div",{className:"mt-8 bg-yellow-500/20 border border-yellow-500/50 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ql,{className:"w-5 h-5 text-yellow-200 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-yellow-100 mb-1",children:"Security Notice"}),s.jsx("p",{className:"text-xs text-yellow-200",children:"All login attempts are logged and monitored. Only authorized personnel should access this panel."})]})]})})]})]})}function p$(){const n=Tr(),{superAdmin:e}=yT(),[t,r]=W.useState(null),[a,o]=W.useState([]),[c,u]=W.useState(!0),[h,f]=W.useState("overview");W.useEffect(()=>{g()},[]);const g=async()=>{try{u(!0);const[v,b]=await Promise.all([KF(),Ey()]);r(v),o(b)}catch(v){console.error("Error loading dashboard:",v)}finally{u(!1)}},x=async()=>{confirm("Are you sure you want to logout?")&&(await ac.signOut(),n("/superadmin/login"))};return c?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[s.jsx(em,{className:"w-6 h-6 animate-spin"}),s.jsx("p",{children:"Loading dashboard..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-indigo-600 rounded-lg",children:s.jsx(Ql,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Super Admin Panel"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Multi-Tenant Management"})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:e?.displayName||"Super Admin"}),s.jsx("p",{className:"text-xs text-gray-500",children:e?.email})]}),s.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition",children:[s.jsx(wT,{className:"w-4 h-4"}),"Logout"]})]})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Welcome back, ",e?.displayName?.split(" ")[0]||"Admin","! "]}),s.jsx("p",{className:"text-gray-600",children:"Manage all Gram Panchayats from this central dashboard."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:s.jsx(gl,{className:"w-6 h-6 text-indigo-600"})})}),s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Gram Panchayats"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t?.totalGPs||0})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(Gi,{className:"w-6 h-6 text-green-600"})})}),s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Active GPs"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t?.activeGPs||0})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(Us,{className:"w-6 h-6 text-purple-600"})})}),s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Admin Users"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t?.totalUsers||0})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:s.jsx(Zf,{className:"w-6 h-6 text-orange-600"})})}),s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Custom Domains"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t?.customDomains||0})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("button",{onClick:()=>n("/superadmin/gram-panchayats/add"),className:"flex items-center gap-3 p-4 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg hover:from-indigo-600 hover:to-purple-700 transition shadow-md",children:[s.jsx(Ss,{className:"w-5 h-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-semibold",children:"Add New GP"}),s.jsx("p",{className:"text-sm text-indigo-100",children:"Create a new Gram Panchayat"})]})]}),s.jsxs("button",{onClick:()=>n("/superadmin/gram-panchayats"),className:"flex items-center gap-3 p-4 bg-white border-2 border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition",children:[s.jsx(gl,{className:"w-5 h-5 text-gray-600"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-semibold text-gray-900",children:"Manage GPs"}),s.jsx("p",{className:"text-sm text-gray-600",children:"View and edit all GPs"})]})]}),s.jsxs("button",{onClick:()=>n("/superadmin/users"),className:"flex items-center gap-3 p-4 bg-white border-2 border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition",children:[s.jsx(Us,{className:"w-5 h-5 text-gray-600"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-semibold text-gray-900",children:"Manage Users"}),s.jsx("p",{className:"text-sm text-gray-600",children:"View all admin users"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Gram Panchayats"}),s.jsx("button",{onClick:()=>n("/superadmin/gram-panchayats"),className:"text-sm text-indigo-600 hover:text-indigo-700 font-medium",children:"View All "})]}),a.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(gl,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"No Gram Panchayats yet"}),s.jsx("button",{onClick:()=>n("/superadmin/gram-panchayats/add"),className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"Add your first Gram Panchayat "})]}):s.jsx("div",{className:"space-y-3",children:a.slice(0,5).map(v=>s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition cursor-pointer",onClick:()=>n(`/superadmin/gram-panchayats/${v.id}`),children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold",children:v.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:v.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:[v.district,", ",v.state]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[v.customDomain&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Zf,{className:"w-4 h-4"}),v.customDomain]}),s.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${v.active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:v.active?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Gi,{className:"w-3 h-3"}),"Active"]}):s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(dh,{className:"w-3 h-3"}),"Inactive"]})})]})]},v.id))})]})]})]})}function x$(){const n=Tr(),[e,t]=W.useState(!1),[r,a]=W.useState(!1),[o,c]=W.useState(""),[u,h]=W.useState(!1),[f,g]=W.useState(null),[x,v]=W.useState({name:"",nameMarathi:"",district:"",state:"Maharashtra",email:"",phone:"",address:"",pincode:"",customDomain:"",subdomain:"",adminEmail:"",adminPassword:"",adminName:"",active:!0}),b=O=>{const{name:B,value:re,type:ae,checked:G}=O.target;v({...x,[B]:ae==="checkbox"?G:re}),c("")},T=()=>{const O=pT(12);v({...x,adminPassword:O})},E=()=>{const B=`gp-${x.name.toLowerCase().replace(/[^a-z0-9]/g,"").substring(0,20)}`;v({...x,subdomain:B})},j=()=>x.name.trim()?x.district.trim()?!x.customDomain&&!x.subdomain?(c("Either custom domain or subdomain is required"),!1):!x.adminEmail.trim()||!x.adminEmail.includes("@")?(c("Valid admin email is required"),!1):!x.adminPassword||x.adminPassword.length<6?(c("Admin password must be at least 6 characters"),!1):x.adminName.trim()?!0:(c("Admin name is required"),!1):(c("District is required"),!1):(c("GP name is required"),!1),S=async O=>{if(O.preventDefault(),!!j()){t(!0),c("");try{const B=x.name.toLowerCase().replace(/[^a-z0-9]/g,"").substring(0,20);let ae=`gp-${B}`;if(x.subdomain){const L=x.subdomain.toLowerCase().trim();/^-?[a-z0-9-]+-gpmulti$/.test(L)?ae=`${L.replace(/-gpmulti$/,"").replace(/-/g,"").replace(/[^a-z0-9]/g,"").substring(0,20)}-gpmulti`:/^gp-[a-z0-9-]+$/.test(L)?ae=`gp-${L.replace(/^gp-/,"").replace(/[^a-z0-9]/g,"").substring(0,20)}`:ae=`gp-${L.replace(/-/g,"").replace(/[^a-z0-9]/g,"").substring(0,20)}`}const G=x.customDomain||`${ae}.web.app`,M={...x,id:B,subdomain:ae,domain:G},k=await qF(M);g({gpName:x.name,adminEmail:x.adminEmail,adminPassword:x.adminPassword,gpId:k.gpId}),a(!0),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{n(`/superadmin/gram-panchayats/${k.gpId}`)},5e3)}catch(B){console.error("Error creating GP:",B);let re="Failed to create Gram Panchayat. ";B.code==="permission-denied"?re+="Permission denied. Please ensure you are logged in as a Super Admin and Firestore rules are deployed.":B.message?re+=B.message:re+="Please try again or contact support.",B.message&&B.message.includes("already exists")&&(re="A Gram Panchayat with a similar name already exists. Please choose a different name."),c(re),window.scrollTo({top:0,behavior:"smooth"})}finally{t(!1)}}},D=()=>{a(!1),g(null),v({name:"",nameMarathi:"",district:"",state:"Maharashtra",email:"",phone:"",address:"",pincode:"",customDomain:"",subdomain:"",adminEmail:"",adminPassword:"",adminName:"",active:!0})};return r&&f?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Add Gram Panchayat"}),s.jsx("button",{onClick:()=>n("/superadmin/dashboard"),className:"text-gray-600 hover:text-gray-900",children:"Close"})]})})}),s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:s.jsx(Gi,{className:"w-8 h-8 text-green-600"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Gram Panchayat Created Successfully! "}),s.jsxs("p",{className:"text-gray-600",children:[f.gpName," has been added to the system."]})]}),s.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-6 mb-6",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(Qn,{className:"w-5 h-5 text-indigo-600"}),"Admin Credentials (Save These!)"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Admin Email"}),s.jsx("p",{className:"font-mono font-semibold text-gray-900",children:f.adminEmail})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Admin Password"}),s.jsx("p",{className:"font-mono font-semibold text-gray-900",children:f.adminPassword})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"GP ID"}),s.jsx("p",{className:"font-mono font-semibold text-gray-900",children:f.gpId})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",s.jsx("strong",{children:"Important:"})," Save these credentials securely. The admin will need them to login."]})})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:" What's Happening Next:"}),s.jsxs("ol",{className:"space-y-2 text-gray-700",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-semibold text-indigo-600",children:"1."}),s.jsx("span",{children:"GitHub Actions is deploying the GP site (takes ~2-3 minutes)"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-semibold text-indigo-600",children:"2."}),s.jsx("span",{children:"The actual domain URL will be updated automatically in Firestore"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-semibold text-indigo-600",children:"3."}),s.jsx("span",{children:"You'll be redirected to the GP page where you can see the live domain"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-semibold text-indigo-600",children:"4."}),s.jsx("span",{children:"Share the admin credentials with the GP administrator"})]})]}),s.jsxs("div",{className:"mt-4 p-3 bg-indigo-50 border border-indigo-200 rounded-lg flex items-start gap-2",children:[s.jsx(em,{className:"w-4 h-4 text-indigo-600 animate-spin mt-0.5 flex-shrink-0"}),s.jsxs("p",{className:"text-sm text-indigo-800",children:[s.jsx("strong",{children:"Auto-redirecting in 5 seconds..."})," You'll see the deployment progress on the GP details page."]})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("button",{onClick:()=>n(`/superadmin/gram-panchayats/${f.gpId}`),className:"flex-1 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition font-semibold flex items-center justify-center gap-2",children:[s.jsx(xi,{className:"w-5 h-5"}),"View GP Details"]}),s.jsx("button",{onClick:D,className:"flex-1 bg-white border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition font-semibold",children:"Add Another GP"})]})]})})]}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>n("/superadmin/dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:s.jsx(xo,{className:"w-5 h-5 text-gray-600"})}),s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Add New Gram Panchayat"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(gl,{className:"w-4 h-4"}),"Create GP"]})]})})}),s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("form",{onSubmit:S,className:"space-y-6",children:[o&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[s.jsx(Qn,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-red-900 mb-1",children:"Error"}),s.jsx("p",{className:"text-sm text-red-700",children:o})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(gl,{className:"w-5 h-5 text-indigo-600"}),"Basic Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Gram Panchayat Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"name",value:x.name,onChange:b,onBlur:E,placeholder:"e.g., Pindkepar Lodha",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name in Marathi (Optional)"}),s.jsx("input",{type:"text",name:"nameMarathi",value:x.nameMarathi,onChange:b,placeholder:" ",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["District ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"district",value:x.district,onChange:b,placeholder:"e.g., Gondia",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["State ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"state",value:x.state,onChange:b,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"Maharashtra",children:"Maharashtra"}),s.jsx("option",{value:"Andhra Pradesh",children:"Andhra Pradesh"}),s.jsx("option",{value:"Gujarat",children:"Gujarat"}),s.jsx("option",{value:"Karnataka",children:"Karnataka"}),s.jsx("option",{value:"Madhya Pradesh",children:"Madhya Pradesh"}),s.jsx("option",{value:"Rajasthan",children:"Rajasthan"}),s.jsx("option",{value:"Tamil Nadu",children:"Tamil Nadu"}),s.jsx("option",{value:"Uttar Pradesh",children:"Uttar Pradesh"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(go,{className:"w-5 h-5 text-indigo-600"}),"Contact Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",name:"email",value:x.email,onChange:b,placeholder:"gp@example.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),s.jsx("input",{type:"tel",name:"phone",value:x.phone,onChange:b,placeholder:"+91 1234567890",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),s.jsx("textarea",{name:"address",value:x.address,onChange:b,placeholder:"Full address",rows:"2",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pincode"}),s.jsx("input",{type:"text",name:"pincode",value:x.pincode,onChange:b,placeholder:"441614",maxLength:"6",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(Zf,{className:"w-5 h-5 text-indigo-600"}),"Domain Configuration"]}),s.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:" Tip:"})," We'll try to create a clean FREE Firebase URL like ",s.jsxs("code",{children:["gp-",s.jsx("em",{children:"gpname"}),".web.app"]}),"to avoid random suffix collisions. If unavailable, a variant will be used. Custom domains can be added later!"]})}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Subdomain ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",name:"subdomain",value:x.subdomain,onChange:b,placeholder:"gp-pindkeparlodha",required:!0,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),s.jsx("button",{type:"button",onClick:E,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition",title:"Auto-generate from GP name",children:s.jsx(Ox,{className:"w-5 h-5"})})]}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[" ",s.jsx("strong",{children:"Suggested FREE URL:"})," ",s.jsxs("code",{className:"bg-gray-100 px-2 py-1 rounded",children:[x.subdomain||"gp-gpname",".web.app"]})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This will be your GP's website address. You can create a Firebase hosting site for this later."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Domain (Optional - Can add later)"}),s.jsx("input",{type:"text",name:"customDomain",value:x.customDomain,onChange:b,placeholder:"grampanchyatpindkepaarlodha.in",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:" Requires purchasing domain. Can be configured in Firebase Hosting console later."})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(nm,{className:"w-5 h-5 text-indigo-600"}),"Admin User"]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Admin Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"adminName",value:x.adminName,onChange:b,placeholder:"Full name of the administrator",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Admin Email ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"email",name:"adminEmail",value:x.adminEmail,onChange:b,placeholder:"admin@example.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This email will be used to login to the admin panel"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Admin Password ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("input",{type:u?"text":"password",name:"adminPassword",value:x.adminPassword,onChange:b,placeholder:"Minimum 6 characters",className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,minLength:"6"}),s.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?s.jsx(bh,{className:"w-5 h-5"}):s.jsx(xi,{className:"w-5 h-5"})})]}),s.jsx("button",{type:"button",onClick:T,className:"px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition font-semibold",children:"Generate"})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:'Use a strong password. Click "Generate" for a secure random password.'})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",name:"active",id:"active",checked:x.active,onChange:b,className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),s.jsx("label",{htmlFor:"active",className:"text-sm text-gray-700",children:"Activate this Gram Panchayat immediately"})]})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{type:"button",onClick:()=>n("/superadmin/dashboard"),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition font-semibold",disabled:e,children:"Cancel"}),s.jsx("button",{type:"submit",disabled:e,className:"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-3 rounded-lg hover:from-indigo-700 hover:to-purple-700 transition font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:e?s.jsxs(s.Fragment,{children:[s.jsx(em,{className:"w-5 h-5 animate-spin"}),"Creating Gram Panchayat..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Bs,{className:"w-5 h-5"}),"Create Gram Panchayat"]})})]})]})})]})}function y$(){const n=Tr(),[e,t]=W.useState([]),[r,a]=W.useState([]),[o,c]=W.useState(!0),[u,h]=W.useState(""),[f,g]=W.useState("all"),[x,v]=W.useState("");W.useEffect(()=>{b()},[]),W.useEffect(()=>{T()},[u,f,e]);const b=async()=>{try{c(!0);const S=await Ey();t(S),a(S)}catch(S){console.error("Error loading GPs:",S),v("Failed to load Gram Panchayats")}finally{c(!1)}},T=()=>{let S=e;u.trim()&&(S=S.filter(D=>D.name.toLowerCase().includes(u.toLowerCase())||D.district.toLowerCase().includes(u.toLowerCase())||D.state.toLowerCase().includes(u.toLowerCase())||D.customDomain&&D.customDomain.toLowerCase().includes(u.toLowerCase()))),f==="active"?S=S.filter(D=>D.active):f==="inactive"&&(S=S.filter(D=>!D.active)),a(S)},E=async(S,D)=>{if(confirm(`Are you sure you want to ${D?"deactivate":"activate"} this Gram Panchayat?`))try{await fT(S,!D),await b()}catch(B){console.error("Error toggling GP status:",B),alert("Failed to update GP status")}},j=async(S,D)=>{if(!confirm(`Are you sure you want to delete "${D}"?

This will remove the GP from the system but preserve its data.`))return;if(prompt(`Type "${D}" to confirm deletion:`)!==D){alert("GP name did not match. Deletion cancelled.");return}try{await mT(S),await b()}catch(B){console.error("Error deleting GP:",B),alert("Failed to delete GP")}};return o?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[s.jsx(em,{className:"w-6 h-6 animate-spin"}),s.jsx("p",{children:"Loading Gram Panchayats..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>n("/superadmin/dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:s.jsx(xo,{className:"w-5 h-5 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Manage Gram Panchayats"}),s.jsxs("p",{className:"text-sm text-gray-500",children:[e.length," total GPs"]})]})]}),s.jsxs("button",{onClick:()=>n("/superadmin/gram-panchayats/add"),className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition",children:[s.jsx(Ss,{className:"w-5 h-5"}),"Add New GP"]})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Hi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search by name, district, state, or domain...",value:u,onChange:S=>h(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>g("all"),className:`px-4 py-2 rounded-lg font-medium transition ${f==="all"?"bg-indigo-100 text-indigo-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["All (",e.length,")"]}),s.jsxs("button",{onClick:()=>g("active"),className:`px-4 py-2 rounded-lg font-medium transition ${f==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["Active (",e.filter(S=>S.active).length,")"]}),s.jsxs("button",{onClick:()=>g("inactive"),className:`px-4 py-2 rounded-lg font-medium transition ${f==="inactive"?"bg-gray-200 text-gray-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["Inactive (",e.filter(S=>!S.active).length,")"]})]})]})}),x&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center gap-3",children:[s.jsx(Qn,{className:"w-5 h-5 text-red-600"}),s.jsx("p",{className:"text-red-700",children:x})]}),r.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[s.jsx(gl,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:u||f!=="all"?"No GPs Found":"No Gram Panchayats Yet"}),s.jsx("p",{className:"text-gray-600 mb-6",children:u||f!=="all"?"Try adjusting your filters":"Add your first Gram Panchayat to get started"}),!u&&f==="all"&&s.jsxs("button",{onClick:()=>n("/superadmin/gram-panchayats/add"),className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition font-semibold",children:[s.jsx(Ss,{className:"w-5 h-5"}),"Add First GP"]})]}):s.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.map(S=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold text-2xl flex-shrink-0",children:S.name.charAt(0)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:S.name}),S.nameMarathi&&s.jsx("p",{className:"text-sm text-gray-500",children:S.nameMarathi})]}),s.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${S.active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:S.active?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Gi,{className:"w-3 h-3"}),"Active"]}):s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(dh,{className:"w-3 h-3"}),"Inactive"]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xl,{className:"w-4 h-4"}),S.district,", ",S.state]}),S.email&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(go,{className:"w-4 h-4"}),S.email]}),S.phone&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(co,{className:"w-4 h-4"}),S.phone]}),S.customDomain&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Zf,{className:"w-4 h-4"}),S.customDomain]})]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Created: ",new Date(S.createdAt.seconds*1e3).toLocaleDateString("en-IN"),S.updatedAt&&s.jsxs("span",{className:"ml-4",children:["Updated: ",new Date(S.updatedAt.seconds*1e3).toLocaleDateString("en-IN")]})]})]})]})})}),s.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-200",children:[s.jsxs("button",{onClick:()=>n(`/superadmin/gram-panchayats/edit/${S.id}`),className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 text-indigo-700 rounded-lg hover:bg-indigo-100 transition font-medium",children:[s.jsx(ud,{className:"w-4 h-4"}),"Edit"]}),s.jsxs("button",{onClick:()=>E(S.id,S.active),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition ${S.active?"bg-yellow-50 text-yellow-700 hover:bg-yellow-100":"bg-green-50 text-green-700 hover:bg-green-100"}`,children:[s.jsx(jT,{className:"w-4 h-4"}),S.active?"Deactivate":"Activate"]}),s.jsxs("button",{onClick:()=>j(S.id,S.name),className:"flex items-center gap-2 px-4 py-2 bg-red-50 text-red-700 rounded-lg hover:bg-red-100 transition font-medium ml-auto",children:[s.jsx(ti,{className:"w-4 h-4"}),"Delete"]})]})]},S.id))})]})]})}const b$=()=>{const{id:n}=bl(),e=Tr(),[t,r]=W.useState(null),[a,o]=W.useState([]),[c,u]=W.useState(null),[h,f]=W.useState(!0),[g,x]=W.useState(""),[v,b]=W.useState({}),[T,E]=W.useState(!1),[j,S]=W.useState(!1);W.useEffect(()=>{if(!n)return;const M=zF(n,k=>{k&&r(L=>(L&&L.domain!==k.domain&&(S(!1),console.log(" Domain updated:",k.domain)),k))});return()=>{M&&M()}},[n]),W.useEffect(()=>{D()},[n]);const D=async()=>{try{f(!0),x("");const M=await pw(n);if(!M){x("Gram Panchayat not found");return}r(M);try{const k=await YF(n);o(k||[])}catch(k){console.error("Error loading users:",k),o([])}try{const k=await XF(n);u(k)}catch(k){console.error("Error loading stats:",k),u(null)}}catch(M){console.error("Error loading GP:",M),x(M.message||"Failed to load Gram Panchayat details")}finally{f(!1)}},O=async()=>{if(confirm(`Are you sure you want to ${t.active?"deactivate":"activate"} this Gram Panchayat?`))try{E(!0),await fT(n,!t.active),r({...t,active:!t.active})}catch(M){alert("Failed to update status: "+M.message)}finally{E(!1)}},B=async()=>{if(!confirm(" WARNING: This will permanently delete the Gram Panchayat and all its data. This action cannot be undone. Are you sure?"))return;if(prompt('Type "DELETE" to confirm deletion:')!=="DELETE"){alert("Deletion cancelled");return}try{E(!0);const k=await mT(n);alert(k.message+`

`+(k.note||"")),e("/superadmin/gram-panchayats")}catch(k){alert("Failed to delete: "+k.message),E(!1)}},re=M=>{b(k=>({...k,[M]:!k[M]}))},ae=(M,k)=>{navigator.clipboard.writeText(M),alert(`${k} copied to clipboard!`)},G=M=>{try{return atob(M)}catch{return"****"}};return h?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ox,{className:"w-12 h-12 text-indigo-600 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading Gram Panchayat details..."})]})}):g||!t?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(dh,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error"}),s.jsx("p",{className:"text-gray-600 mb-6",children:g||"Gram Panchayat not found"}),s.jsx("button",{onClick:()=>e("/superadmin/gram-panchayats"),className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Back to List"})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("button",{onClick:()=>e("/superadmin/gram-panchayats"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[s.jsx(xo,{className:"w-5 h-5"}),"Back to Gram Panchayats"]}),s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t.name}),t.active?s.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium flex items-center gap-1",children:[s.jsx(Gi,{className:"w-4 h-4"}),"Active"]}):s.jsxs("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-medium flex items-center gap-1",children:[s.jsx(dh,{className:"w-4 h-4"}),"Inactive"]})]}),t.nameMarathi&&s.jsx("p",{className:"text-xl text-gray-600",children:t.nameMarathi}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["ID: ",t.id]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:O,disabled:T,className:`px-4 py-2 rounded-lg font-medium flex items-center gap-2 ${t.active?"bg-yellow-100 text-yellow-700 hover:bg-yellow-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:[s.jsx(jT,{className:"w-4 h-4"}),t.active?"Deactivate":"Activate"]}),s.jsxs("button",{onClick:()=>e(`/superadmin/gram-panchayats/edit/${n}`),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium flex items-center gap-2",children:[s.jsx(ud,{className:"w-4 h-4"}),"Edit"]}),s.jsxs("button",{onClick:B,disabled:T,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium flex items-center gap-2",children:[s.jsx(ti,{className:"w-4 h-4"}),"Delete"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Zf,{className:"w-5 h-5 text-gray-400 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Domain"}),s.jsx("div",{className:"flex items-center gap-2",children:j?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(em,{className:"w-4 h-4 text-indigo-600 animate-spin"}),s.jsx("p",{className:"text-gray-600 italic",children:"Deploying..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-gray-900 font-medium",children:t.domain||"Not configured"}),t.domain&&s.jsx("button",{onClick:()=>window.open(`https://${t.domain}`,"_blank"),className:"text-indigo-600 hover:text-indigo-800",title:"Open site in new tab",children:s.jsx(Lx,{className:"w-4 h-4"})})]})}),t.subdomain&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Subdomain: ",t.subdomain]}),t.domainStatus&&s.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full mt-1 inline-block ${t.domainStatus==="active"?"bg-green-100 text-green-700":t.domainStatus==="pending"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:t.domainStatus}),!t.domain&&!j&&s.jsx("p",{className:"text-xs text-amber-600 mt-1",children:" Deployment in progress... Domain will appear here automatically."})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(xl,{className:"w-5 h-5 text-gray-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Location"}),s.jsx("p",{className:"text-gray-900 font-medium",children:[t.district,t.state].filter(Boolean).join(", ")||"Not specified"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(go,{className:"w-5 h-5 text-gray-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Admin Email"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"text-gray-900 font-medium",children:t.adminEmail}),s.jsx("button",{onClick:()=>ae(t.adminEmail,"Email"),className:"text-gray-400 hover:text-gray-600",children:s.jsx(T2,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Zr,{className:"w-5 h-5 text-gray-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Created"}),s.jsx("p",{className:"text-gray-900 font-medium",children:t.createdAt?.toDate?.().toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})||"Unknown"})]})]})]}),(t.pincode||t.contactNumber||t.address)&&s.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Additional Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.pincode&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Pincode"}),s.jsx("p",{className:"text-gray-900",children:t.pincode})]}),t.contactNumber&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Contact Number"}),s.jsx("p",{className:"text-gray-900",children:t.contactNumber})]}),t.address&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Address"}),s.jsx("p",{className:"text-gray-900",children:t.address})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(Us,{className:"w-5 h-5"}),"Admin Users (",a.length,")"]}),a.length===0?s.jsx("p",{className:"text-gray-500 text-center py-8",children:"No users found"}):s.jsx("div",{className:"space-y-4",children:a.map(M=>s.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-indigo-300 transition",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("p",{className:"font-medium text-gray-900",children:M.email}),s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${M.role==="admin"?"bg-purple-100 text-purple-700":M.role==="superAdmin"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:M.role}),M.active===!1&&s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-700",children:"Inactive"})]}),M.initialPassword&&s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Password:"}),s.jsx("code",{className:"px-2 py-1 bg-gray-100 rounded text-sm font-mono",children:v[M.id]?G(M.initialPassword):""}),s.jsx("button",{onClick:()=>re(M.id),className:"text-gray-400 hover:text-gray-600",children:v[M.id]?s.jsx(bh,{className:"w-4 h-4"}):s.jsx(xi,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>ae(G(M.initialPassword),"Password"),className:"text-gray-400 hover:text-gray-600",children:s.jsx(T2,{className:"w-4 h-4"})})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Created: ",M.createdAt?.toDate?.().toLocaleDateString("en-IN")||"Unknown"]})]})})},M.id))})]})]}),s.jsxs("div",{className:"space-y-6",children:[c&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Statistics"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Total Users"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.totalUsers||0})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Total Notices"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.totalNotices||0})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Total Grievances"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.totalGrievances||0})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Storage Used"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.storageUsed?`${(c.storageUsed/1024/1024).toFixed(2)} MB`:"0 MB"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>e(`/superadmin/gram-panchayats/edit/${n}`),className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium flex items-center justify-center gap-2",children:[s.jsx(ud,{className:"w-4 h-4"}),"Edit Details"]}),s.jsxs("button",{onClick:()=>e(`/superadmin/users?gp=${n}`),className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium flex items-center justify-center gap-2",children:[s.jsx(Us,{className:"w-4 h-4"}),"Manage Users"]}),t.domain&&s.jsxs("button",{onClick:()=>window.open(`https://${t.domain}`,"_blank"),className:"w-full px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 font-medium flex items-center justify-center gap-2",children:[s.jsx(Lx,{className:"w-4 h-4"}),"Visit Website"]}),s.jsxs("button",{onClick:D,className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium flex items-center justify-center gap-2",children:[s.jsx(Ox,{className:"w-4 h-4"}),"Refresh Data"]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Metadata"}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Created At"}),s.jsx("p",{className:"text-gray-900",children:t.createdAt?.toDate?.().toLocaleString("en-IN")||"Unknown"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Last Updated"}),s.jsx("p",{className:"text-gray-900",children:t.updatedAt?.toDate?.().toLocaleString("en-IN")||"Never"})]}),t.createdBy&&s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Created By"}),s.jsx("p",{className:"text-gray-900",children:t.createdBy})]})]})]})]})]})]})})};function v$(){const{id:n}=bl(),e=Tr(),[t,r]=W.useState(!0),[a,o]=W.useState(!1),[c,u]=W.useState(""),[h,f]=W.useState(""),[g,x]=W.useState(!1),[v,b]=W.useState({name:"",nameMarathi:"",district:"",state:"Maharashtra",email:"",phone:"",address:"",pincode:"",contactNumber:"",adminEmail:"",adminPassword:"",adminName:"",active:!0});W.useEffect(()=>{T()},[n]);const T=async()=>{try{r(!0);const S=await pw(n);if(!S){u("Gram Panchayat not found");return}b({name:S.name||"",nameMarathi:S.nameMarathi||"",district:S.district||"",state:S.state||"Maharashtra",email:S.email||"",phone:S.phone||"",address:S.address||"",pincode:S.pincode||"",contactNumber:S.contactNumber||"",adminEmail:S.adminEmail||"",adminPassword:S.adminPassword||"",adminName:S.adminName||"",active:S.active!==!1})}catch(S){console.error("Error loading GP:",S),u("Failed to load Gram Panchayat details")}finally{r(!1)}},E=S=>{const{name:D,value:O,type:B,checked:re}=S.target;b(ae=>({...ae,[D]:B==="checkbox"?re:O}))},j=async S=>{S.preventDefault();try{o(!0),u(""),f(""),await GF(n,v),f("Gram Panchayat updated successfully!"),setTimeout(()=>{e(`/superadmin/gram-panchayats/${n}`)},2e3)}catch(D){console.error("Error updating GP:",D),u(D.message||"Failed to update Gram Panchayat")}finally{o(!1)}};return t?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Gram Panchayat..."})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("button",{onClick:()=>e(`/superadmin/gram-panchayats/${n}`),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[s.jsx(xo,{className:"h-5 w-5 mr-2"}),"Back to GP Details"]}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Gram Panchayat"}),s.jsxs("p",{className:"mt-2 text-gray-600",children:["Update details for ",v.name]})]}),c&&s.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start",children:[s.jsx(ni,{className:"h-5 w-5 mr-2 flex-shrink-0 mt-0.5"}),s.jsx("span",{children:c})]}),h&&s.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-start",children:[s.jsx(Bs,{className:"h-5 w-5 mr-2 flex-shrink-0 mt-0.5"}),s.jsx("span",{children:h})]}),s.jsxs("form",{onSubmit:j,className:"bg-white shadow-md rounded-lg p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GP Name (English) *"}),s.jsx("input",{type:"text",name:"name",value:v.name,onChange:E,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GP Name (Marathi)"}),s.jsx("input",{type:"text",name:"nameMarathi",value:v.nameMarathi,onChange:E,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"District *"}),s.jsx("input",{type:"text",name:"district",value:v.district,onChange:E,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),s.jsx("input",{type:"text",name:"state",value:v.state,onChange:E,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Contact Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",name:"email",value:v.email,onChange:E,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),s.jsx("input",{type:"tel",name:"phone",value:v.phone,onChange:E,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Number"}),s.jsx("input",{type:"tel",name:"contactNumber",value:v.contactNumber,onChange:E,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pincode"}),s.jsx("input",{type:"text",name:"pincode",value:v.pincode,onChange:E,pattern:"[0-9]{6}",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),s.jsx("textarea",{name:"address",value:v.address,onChange:E,rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Admin Credentials"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Name"}),s.jsx("input",{type:"text",name:"adminName",value:v.adminName,onChange:E,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Email"}),s.jsx("input",{type:"email",name:"adminEmail",value:v.adminEmail,onChange:E,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Password (Plain Text)"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:g?"text":"password",name:"adminPassword",value:v.adminPassword,onChange:E,className:"w-full px-4 py-2 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsx("button",{type:"button",onClick:()=>x(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:g?s.jsx(bh,{className:"h-5 w-5"}):s.jsx(xi,{className:"h-5 w-5"})})]}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Password is stored in plain text for easy access"})]})]})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Status"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"active",id:"active",checked:v.active,onChange:E,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"active",className:"ml-2 block text-sm text-gray-700",children:"Active (GP is accessible to users)"})]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t",children:[s.jsx("button",{type:"button",onClick:()=>e(`/superadmin/gram-panchayats/${n}`),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500",disabled:a,children:"Cancel"}),s.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:a?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Bs,{className:"h-5 w-5 mr-2"}),"Save Changes"]})})]})]})]})})}function w$(){const n=Tr(),[e,t]=W.useState([]),[r,a]=W.useState(!0),[o,c]=W.useState(""),[u,h]=W.useState(""),[f,g]=W.useState("all"),[x,v]=W.useState({}),[b,T]=W.useState(""),[E,j]=W.useState(!1),[S,D]=W.useState(null),[O,B]=W.useState(null),[re,ae]=W.useState(!1),[G,M]=W.useState(!1),k=[...new Set(e.map(de=>de.gpName))].sort();W.useEffect(()=>{L()},[]);const L=async()=>{try{a(!0),c("");const de=await gT();t(de)}catch(de){console.error("Error fetching users:",de),c("Failed to load users. Please try again.")}finally{a(!1)}},C=async(de,Se)=>{if(confirm(`Send password reset email to ${de}?`))try{v({...x,[Se]:!0}),await HF(de),T(`Password reset email sent to ${de}`),setTimeout(()=>T(""),5e3)}catch(ze){console.error("Error resetting password:",ze),alert("Failed to send password reset email. Please try again.")}finally{v({...x,[Se]:!1})}},P=async de=>{try{D(de),j(!0),ae(!0),M(!1);const Se=await $F(de.gpId,de.id);B(Se)}catch(Se){console.error("Error fetching password:",Se),alert("Failed to fetch password. It may not be available."),j(!1)}finally{ae(!1)}},V=async()=>{if(confirm("Generate a new password for this user? This will update the stored password."))try{ae(!0);const de=await WF(S.gpId,S.id,S.email);B({password:de.password,passwordLastChanged:new Date,isNew:!0}),T(`New password generated for ${S.email}`),setTimeout(()=>T(""),5e3)}catch(de){console.error("Error generating password:",de),alert("Failed to generate new password. Please try again.")}finally{ae(!1)}},oe=de=>{navigator.clipboard.writeText(de),T("Password copied to clipboard!"),setTimeout(()=>T(""),3e3)},Ne=()=>{j(!1),D(null),B(null),M(!1)},ue=()=>{const de=pe.map(he=>({Name:he.displayName||"N/A",Email:he.email,"Gram Panchayat":he.gpName,Role:he.role,"Created At":new Date(he.createdAt?.toDate()).toLocaleDateString("en-IN"),"Last Login":he.lastLogin?new Date(he.lastLogin.toDate()).toLocaleDateString("en-IN"):"Never"})),Se=Object.keys(de[0]).join(","),ze=de.map(he=>Object.values(he).join(",")),te=[Se,...ze].join(`
`),q=new Blob([te],{type:"text/csv"}),Q=window.URL.createObjectURL(q),ne=document.createElement("a");ne.href=Q,ne.download=`admin-users-${new Date().toISOString().split("T")[0]}.csv`,ne.click()},pe=e.filter(de=>{const Se=de.displayName?.toLowerCase().includes(u.toLowerCase())||de.email?.toLowerCase().includes(u.toLowerCase())||de.gpName?.toLowerCase().includes(u.toLowerCase()),ze=f==="all"||de.gpName===f;return Se&&ze});return r?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading users..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>n("/superadmin/dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(xo,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Manage Admin Users"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[pe.length," of ",e.length," users"]})]})]}),s.jsxs("button",{onClick:ue,disabled:pe.length===0,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(zo,{className:"w-4 h-4"}),"Export CSV"]})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[b&&s.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4 flex items-center gap-3",children:[s.jsx(Gi,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),s.jsx("p",{className:"text-green-800",children:b})]}),o&&s.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-3",children:[s.jsx(Qn,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),s.jsx("p",{className:"text-red-800",children:o})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Hi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search by name, email, or GP...",value:u,onChange:de=>h(de.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Ty,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsxs("select",{value:f,onChange:de=>g(de.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent appearance-none bg-white",children:[s.jsx("option",{value:"all",children:"All Gram Panchayats"}),k.map(de=>s.jsx("option",{value:de,children:de},de))]})]})]})}),pe.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[s.jsx(nm,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No users found"}),s.jsx("p",{className:"text-gray-600",children:u||f!=="all"?"Try adjusting your search or filters":"No admin users have been created yet"})]}):s.jsx("div",{className:"space-y-4",children:pe.map(de=>s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center",children:s.jsx(nm,{className:"w-6 h-6 text-indigo-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:de.displayName||"No Name"}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(go,{className:"w-4 h-4"}),de.email]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gl,{className:"w-4 h-4 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Gram Panchayat"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:de.gpName})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ql,{className:"w-4 h-4 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Role"}),s.jsx("p",{className:"text-sm font-medium text-gray-900 capitalize",children:de.role})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Zr,{className:"w-4 h-4 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Created"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:de.createdAt?new Date(de.createdAt.toDate()).toLocaleDateString("en-IN"):"N/A"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[de.lastLogin?s.jsx(Gi,{className:"w-4 h-4 text-green-500"}):s.jsx(dh,{className:"w-4 h-4 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Last Login"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:de.lastLogin?new Date(de.lastLogin.toDate()).toLocaleDateString("en-IN"):"Never"})]})]})]})]}),s.jsxs("div",{className:"ml-4 flex flex-col gap-2",children:[s.jsxs("button",{onClick:()=>P(de),className:"flex items-center gap-2 px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(xi,{className:"w-4 h-4"}),"View Password"]}),s.jsxs("button",{onClick:()=>C(de.email,de.id),disabled:x[de.id],className:"flex items-center gap-2 px-4 py-2 text-sm bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(ZU,{className:"w-4 h-4"}),x[de.id]?"Sending...":"Reset Password"]})]})]})},de.id))})]}),E&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"User Password"}),s.jsx("button",{onClick:Ne,className:"text-gray-400 hover:text-gray-600",children:s.jsx(dh,{className:"w-6 h-6"})})]}),S&&s.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"User"}),s.jsx("p",{className:"font-semibold text-gray-900",children:S.displayName||"No Name"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:S.email}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["GP: ",S.gpName]})]}),re?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Loading password..."})]}):O?s.jsxs("div",{children:[O.isNew&&s.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-yellow-800",children:" New password generated. A password reset email has been sent."})}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:G?"text":"password",value:O.password||"Not available",readOnly:!0,className:"w-full px-4 py-2 pr-20 border border-gray-300 rounded-lg bg-gray-50 font-mono"}),s.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex gap-1",children:[s.jsx("button",{onClick:()=>M(!G),className:"p-1.5 hover:bg-gray-200 rounded transition-colors",title:G?"Hide":"Show",children:G?s.jsx(bh,{className:"w-4 h-4 text-gray-600"}):s.jsx(xi,{className:"w-4 h-4 text-gray-600"})}),O.password&&s.jsx("button",{onClick:()=>oe(O.password),className:"p-1.5 hover:bg-gray-200 rounded transition-colors",title:"Copy",children:s.jsx(T2,{className:"w-4 h-4 text-gray-600"})})]})]})]}),O.passwordLastChanged&&s.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:["Last changed: ",new Date(O.passwordLastChanged.toDate?.()||O.passwordLastChanged).toLocaleString("en-IN")]}),s.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 mb-4",children:s.jsxs("p",{className:"text-xs text-amber-800",children:[" ",s.jsx("strong",{children:"Security Notice:"})," This password is stored in encoded format (not encrypted). Users should change their password after first login for security."]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:V,disabled:re,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors",children:[s.jsx(Ox,{className:"w-4 h-4"}),"Generate New"]}),s.jsx("button",{onClick:Ne,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Close"})]})]}):s.jsx("div",{className:"text-center py-4",children:s.jsx("p",{className:"text-gray-600",children:"Password not available"})})]})})]})}function N$(){const n=window.location.hostname.includes("superadmin-grampanchayat");return s.jsx(gk,{children:s.jsx(UF,{children:s.jsx(DF,{children:s.jsx(OF,{children:s.jsx(vk,{children:s.jsxs(QF,{children:[s.jsxs(lk,{children:[n&&s.jsx(Dt,{path:"/",element:s.jsx(tv,{to:"/superadmin/login",replace:!0})}),s.jsx(Dt,{path:"/superadmin/login",element:s.jsx(g$,{})}),s.jsx(Dt,{path:"/superadmin/dashboard",element:s.jsx(uf,{children:s.jsx(p$,{})})}),s.jsx(Dt,{path:"/superadmin/gram-panchayats",element:s.jsx(uf,{children:s.jsx(y$,{})})}),s.jsx(Dt,{path:"/superadmin/gram-panchayats/add",element:s.jsx(uf,{children:s.jsx(x$,{})})}),s.jsx(Dt,{path:"/superadmin/gram-panchayats/edit/:id",element:s.jsx(uf,{children:s.jsx(v$,{})})}),s.jsx(Dt,{path:"/superadmin/gram-panchayats/:id",element:s.jsx(uf,{children:s.jsx(b$,{})})}),s.jsx(Dt,{path:"/superadmin/users",element:s.jsx(uf,{children:s.jsx(w$,{})})}),s.jsxs(Dt,{path:"/",element:s.jsx(rB,{}),children:[s.jsx(Dt,{index:!0,element:s.jsx(oB,{})}),s.jsx(Dt,{path:"about",element:s.jsx(lB,{})}),s.jsx(Dt,{path:"panchayat",element:s.jsx(mB,{})}),s.jsx(Dt,{path:"services",element:s.jsx(bB,{})}),s.jsx(Dt,{path:"schemes",element:s.jsx(_B,{})}),s.jsx(Dt,{path:"downloads",element:s.jsx(IB,{})}),s.jsx(Dt,{path:"education",element:s.jsx(kB,{})}),s.jsx(Dt,{path:"gallery",element:s.jsx(OB,{})}),s.jsx(Dt,{path:"financials",element:s.jsx(zB,{})}),s.jsx(Dt,{path:"notices",element:s.jsx(KB,{})}),s.jsx(Dt,{path:"contact",element:s.jsx(YB,{})}),s.jsx(Dt,{path:"village-statistics",element:s.jsx(c$,{})})]}),s.jsx(Dt,{path:"/firebase-setup",element:s.jsx(m$,{})}),s.jsx(Dt,{path:"/admin/login",element:s.jsx(XB,{})}),s.jsxs(Dt,{path:"/admin",element:s.jsx(sB,{children:s.jsx(aB,{})}),children:[s.jsx(Dt,{path:"dashboard",element:s.jsx(QB,{})}),s.jsx(Dt,{path:"members",element:s.jsx(JB,{})}),s.jsx(Dt,{path:"members/new",element:s.jsx(P4,{})}),s.jsx(Dt,{path:"members/edit/:id",element:s.jsx(P4,{})}),s.jsx(Dt,{path:"services",element:s.jsx(ez,{})}),s.jsx(Dt,{path:"services/new",element:s.jsx(L4,{})}),s.jsx(Dt,{path:"services/edit/:id",element:s.jsx(L4,{})}),s.jsx(Dt,{path:"schemes",element:s.jsx(tz,{})}),s.jsx(Dt,{path:"schemes/new",element:s.jsx(D4,{})}),s.jsx(Dt,{path:"schemes/edit/:id",element:s.jsx(D4,{})}),s.jsx(Dt,{path:"notices",element:s.jsx(nz,{})}),s.jsx(Dt,{path:"notices/new",element:s.jsx(M4,{})}),s.jsx(Dt,{path:"notices/edit/:id",element:s.jsx(M4,{})}),s.jsx(Dt,{path:"announcements",element:s.jsx(u$,{})}),s.jsx(Dt,{path:"announcements/new",element:s.jsx(c3,{})}),s.jsx(Dt,{path:"announcements/edit/:id",element:s.jsx(c3,{})}),s.jsx(Dt,{path:"gallery",element:s.jsx(rz,{})}),s.jsx(Dt,{path:"gallery/new",element:s.jsx(O4,{})}),s.jsx(Dt,{path:"gallery/edit/:id",element:s.jsx(O4,{})}),s.jsx(Dt,{path:"forms",element:s.jsx(iz,{})}),s.jsx(Dt,{path:"forms/new",element:s.jsx(F4,{})}),s.jsx(Dt,{path:"forms/edit/:id",element:s.jsx(F4,{})}),s.jsx(Dt,{path:"settings",element:s.jsx(lz,{})}),s.jsx(Dt,{path:"grievances",element:s.jsx(uz,{})}),s.jsx(Dt,{path:"grievances/new",element:s.jsx(U4,{})}),s.jsx(Dt,{path:"grievances/edit/:id",element:s.jsx(U4,{})}),s.jsx(Dt,{path:"financials",element:s.jsx(dz,{})}),s.jsx(Dt,{path:"financials/new",element:s.jsx(V4,{})}),s.jsx(Dt,{path:"financials/edit/:id",element:s.jsx(V4,{})}),s.jsx(Dt,{path:"content/about",element:s.jsx(hz,{})}),s.jsx(Dt,{path:"content/education",element:s.jsx(fz,{})}),s.jsx(Dt,{path:"village-statistics",element:s.jsx(l$,{})})]})]}),s.jsx(iB,{})]})})})})})})}m8.createRoot(document.getElementById("root")).render(s.jsx(W.StrictMode,{children:s.jsx(N$,{})}));export{ur as _,j$ as c,s8 as g};
