function DI(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in n)){const o=Object.getOwnPropertyDescriptor(r,a);o&&Object.defineProperty(n,a,o.get?o:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var RG=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function MI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Pb={exports:{}},Bm={};var CN;function OI(){if(CN)return Bm;CN=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:o}}return Bm.Fragment=e,Bm.jsx=t,Bm.jsxs=t,Bm}var IN;function FI(){return IN||(IN=1,Pb.exports=OI()),Pb.exports}var s=FI(),Lb={exports:{}},fn={};var RN;function VI(){if(RN)return fn;RN=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),w=Symbol.iterator;function b(ne){return ne===null||typeof ne!="object"?null:(ne=w&&ne[w]||ne["@@iterator"],typeof ne=="function"?ne:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,j={};function E(ne,q,Q){this.props=ne,this.context=q,this.refs=j,this.updater=Q||T}E.prototype.isReactComponent={},E.prototype.setState=function(ne,q){if(typeof ne!="object"&&typeof ne!="function"&&ne!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ne,q,"setState")},E.prototype.forceUpdate=function(ne){this.updater.enqueueForceUpdate(this,ne,"forceUpdate")};function L(){}L.prototype=E.prototype;function D(ne,q,Q){this.props=ne,this.context=q,this.refs=j,this.updater=Q||T}var O=D.prototype=new L;O.constructor=D,S(O,E.prototype),O.isPureReactComponent=!0;var te=Array.isArray;function ae(){}var H={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function k(ne,q,Q){var re=Q.ref;return{$$typeof:n,type:ne,key:q,ref:re!==void 0?re:null,props:Q}}function F(ne,q){return k(ne.type,q,ne.props)}function I(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===n}function P(ne){var q={"=":"=0",":":"=2"};return"$"+ne.replace(/[=:]/g,function(Q){return q[Q]})}var B=/\/+/g;function ue(ne,q){return typeof ne=="object"&&ne!==null&&ne.key!=null?P(""+ne.key):q.toString(36)}function Ne(ne){switch(ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason;default:switch(typeof ne.status=="string"?ne.then(ae,ae):(ne.status="pending",ne.then(function(q){ne.status==="pending"&&(ne.status="fulfilled",ne.value=q)},function(q){ne.status==="pending"&&(ne.status="rejected",ne.reason=q)})),ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason}}throw ne}function ce(ne,q,Q,re,he){var me=typeof ne;(me==="undefined"||me==="boolean")&&(ne=null);var be=!1;if(ne===null)be=!0;else switch(me){case"bigint":case"string":case"number":be=!0;break;case"object":switch(ne.$$typeof){case n:case e:be=!0;break;case g:return be=ne._init,ce(be(ne._payload),q,Q,re,he)}}if(be)return he=he(ne),be=re===""?"."+ue(ne,0):re,te(he)?(Q="",be!=null&&(Q=be.replace(B,"$&/")+"/"),ce(he,q,Q,"",function(qe){return qe})):he!=null&&(I(he)&&(he=F(he,Q+(he.key==null||ne&&ne.key===he.key?"":(""+he.key).replace(B,"$&/")+"/")+be)),q.push(he)),1;be=0;var Le=re===""?".":re+":";if(te(ne))for(var ke=0;ke<ne.length;ke++)re=ne[ke],me=Le+ue(re,ke),be+=ce(re,q,Q,me,he);else if(ke=b(ne),typeof ke=="function")for(ne=ke.call(ne),ke=0;!(re=ne.next()).done;)re=re.value,me=Le+ue(re,ke++),be+=ce(re,q,Q,me,he);else if(me==="object"){if(typeof ne.then=="function")return ce(Ne(ne),q,Q,re,he);throw q=String(ne),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(ne).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return be}function pe(ne,q,Q){if(ne==null)return ne;var re=[],he=0;return ce(ne,re,"","",function(me){return q.call(Q,me,he++)}),re}function de(ne){if(ne._status===-1){var q=ne._result;q=q(),q.then(function(Q){(ne._status===0||ne._status===-1)&&(ne._status=1,ne._result=Q)},function(Q){(ne._status===0||ne._status===-1)&&(ne._status=2,ne._result=Q)}),ne._status===-1&&(ne._status=0,ne._result=q)}if(ne._status===1)return ne._result.default;throw ne._result}var Se=typeof reportError=="function"?reportError:function(ne){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ne=="object"&&ne!==null&&typeof ne.message=="string"?String(ne.message):String(ne),error:ne});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ne);return}console.error(ne)},ze={map:pe,forEach:function(ne,q,Q){pe(ne,function(){q.apply(this,arguments)},Q)},count:function(ne){var q=0;return pe(ne,function(){q++}),q},toArray:function(ne){return pe(ne,function(q){return q})||[]},only:function(ne){if(!I(ne))throw Error("React.Children.only expected to receive a single React element child.");return ne}};return fn.Activity=y,fn.Children=ze,fn.Component=E,fn.Fragment=t,fn.Profiler=a,fn.PureComponent=D,fn.StrictMode=r,fn.Suspense=h,fn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,fn.__COMPILER_RUNTIME={__proto__:null,c:function(ne){return H.H.useMemoCache(ne)}},fn.cache=function(ne){return function(){return ne.apply(null,arguments)}},fn.cacheSignal=function(){return null},fn.cloneElement=function(ne,q,Q){if(ne==null)throw Error("The argument must be a React element, but you passed "+ne+".");var re=S({},ne.props),he=ne.key;if(q!=null)for(me in q.key!==void 0&&(he=""+q.key),q)!V.call(q,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&q.ref===void 0||(re[me]=q[me]);var me=arguments.length-2;if(me===1)re.children=Q;else if(1<me){for(var be=Array(me),Le=0;Le<me;Le++)be[Le]=arguments[Le+2];re.children=be}return k(ne.type,he,re)},fn.createContext=function(ne){return ne={$$typeof:c,_currentValue:ne,_currentValue2:ne,_threadCount:0,Provider:null,Consumer:null},ne.Provider=ne,ne.Consumer={$$typeof:o,_context:ne},ne},fn.createElement=function(ne,q,Q){var re,he={},me=null;if(q!=null)for(re in q.key!==void 0&&(me=""+q.key),q)V.call(q,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(he[re]=q[re]);var be=arguments.length-2;if(be===1)he.children=Q;else if(1<be){for(var Le=Array(be),ke=0;ke<be;ke++)Le[ke]=arguments[ke+2];he.children=Le}if(ne&&ne.defaultProps)for(re in be=ne.defaultProps,be)he[re]===void 0&&(he[re]=be[re]);return k(ne,me,he)},fn.createRef=function(){return{current:null}},fn.forwardRef=function(ne){return{$$typeof:u,render:ne}},fn.isValidElement=I,fn.lazy=function(ne){return{$$typeof:g,_payload:{_status:-1,_result:ne},_init:de}},fn.memo=function(ne,q){return{$$typeof:f,type:ne,compare:q===void 0?null:q}},fn.startTransition=function(ne){var q=H.T,Q={};H.T=Q;try{var re=ne(),he=H.S;he!==null&&he(Q,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(ae,Se)}catch(me){Se(me)}finally{q!==null&&Q.types!==null&&(q.types=Q.types),H.T=q}},fn.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},fn.use=function(ne){return H.H.use(ne)},fn.useActionState=function(ne,q,Q){return H.H.useActionState(ne,q,Q)},fn.useCallback=function(ne,q){return H.H.useCallback(ne,q)},fn.useContext=function(ne){return H.H.useContext(ne)},fn.useDebugValue=function(){},fn.useDeferredValue=function(ne,q){return H.H.useDeferredValue(ne,q)},fn.useEffect=function(ne,q){return H.H.useEffect(ne,q)},fn.useEffectEvent=function(ne){return H.H.useEffectEvent(ne)},fn.useId=function(){return H.H.useId()},fn.useImperativeHandle=function(ne,q,Q){return H.H.useImperativeHandle(ne,q,Q)},fn.useInsertionEffect=function(ne,q){return H.H.useInsertionEffect(ne,q)},fn.useLayoutEffect=function(ne,q){return H.H.useLayoutEffect(ne,q)},fn.useMemo=function(ne,q){return H.H.useMemo(ne,q)},fn.useOptimistic=function(ne,q){return H.H.useOptimistic(ne,q)},fn.useReducer=function(ne,q,Q){return H.H.useReducer(ne,q,Q)},fn.useRef=function(ne){return H.H.useRef(ne)},fn.useState=function(ne){return H.H.useState(ne)},fn.useSyncExternalStore=function(ne,q,Q){return H.H.useSyncExternalStore(ne,q,Q)},fn.useTransition=function(){return H.H.useTransition()},fn.version="19.2.0",fn}var kN;function M2(){return kN||(kN=1,Lb.exports=VI()),Lb.exports}var K=M2();const E0=MI(K),UI=DI({__proto__:null,default:E0},[K]);var Db={exports:{}},zm={},Mb={exports:{}},Ob={};var PN;function BI(){return PN||(PN=1,(function(n){function e(ce,pe){var de=ce.length;ce.push(pe);e:for(;0<de;){var Se=de-1>>>1,ze=ce[Se];if(0<a(ze,pe))ce[Se]=pe,ce[de]=ze,de=Se;else break e}}function t(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var pe=ce[0],de=ce.pop();if(de!==pe){ce[0]=de;e:for(var Se=0,ze=ce.length,ne=ze>>>1;Se<ne;){var q=2*(Se+1)-1,Q=ce[q],re=q+1,he=ce[re];if(0>a(Q,de))re<ze&&0>a(he,Q)?(ce[Se]=he,ce[re]=de,Se=re):(ce[Se]=Q,ce[q]=de,Se=q);else if(re<ze&&0>a(he,de))ce[Se]=he,ce[re]=de,Se=re;else break e}}return pe}function a(ce,pe){var de=ce.sortIndex-pe.sortIndex;return de!==0?de:ce.id-pe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var h=[],f=[],g=1,y=null,w=3,b=!1,T=!1,S=!1,j=!1,E=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function O(ce){for(var pe=t(f);pe!==null;){if(pe.callback===null)r(f);else if(pe.startTime<=ce)r(f),pe.sortIndex=pe.expirationTime,e(h,pe);else break;pe=t(f)}}function te(ce){if(S=!1,O(ce),!T)if(t(h)!==null)T=!0,ae||(ae=!0,P());else{var pe=t(f);pe!==null&&Ne(te,pe.startTime-ce)}}var ae=!1,H=-1,V=5,k=-1;function F(){return j?!0:!(n.unstable_now()-k<V)}function I(){if(j=!1,ae){var ce=n.unstable_now();k=ce;var pe=!0;try{e:{T=!1,S&&(S=!1,L(H),H=-1),b=!0;var de=w;try{t:{for(O(ce),y=t(h);y!==null&&!(y.expirationTime>ce&&F());){var Se=y.callback;if(typeof Se=="function"){y.callback=null,w=y.priorityLevel;var ze=Se(y.expirationTime<=ce);if(ce=n.unstable_now(),typeof ze=="function"){y.callback=ze,O(ce),pe=!0;break t}y===t(h)&&r(h),O(ce)}else r(h);y=t(h)}if(y!==null)pe=!0;else{var ne=t(f);ne!==null&&Ne(te,ne.startTime-ce),pe=!1}}break e}finally{y=null,w=de,b=!1}pe=void 0}}finally{pe?P():ae=!1}}}var P;if(typeof D=="function")P=function(){D(I)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,ue=B.port2;B.port1.onmessage=I,P=function(){ue.postMessage(null)}}else P=function(){E(I,0)};function Ne(ce,pe){H=E(function(){ce(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ce){ce.callback=null},n.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<ce?Math.floor(1e3/ce):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(ce){switch(w){case 1:case 2:case 3:var pe=3;break;default:pe=w}var de=w;w=pe;try{return ce()}finally{w=de}},n.unstable_requestPaint=function(){j=!0},n.unstable_runWithPriority=function(ce,pe){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var de=w;w=ce;try{return pe()}finally{w=de}},n.unstable_scheduleCallback=function(ce,pe,de){var Se=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Se+de:Se):de=Se,ce){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=de+ze,ce={id:g++,callback:pe,priorityLevel:ce,startTime:de,expirationTime:ze,sortIndex:-1},de>Se?(ce.sortIndex=de,e(f,ce),t(h)===null&&ce===t(f)&&(S?(L(H),H=-1):S=!0,Ne(te,de-Se))):(ce.sortIndex=ze,e(h,ce),T||b||(T=!0,ae||(ae=!0,P()))),ce},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(ce){var pe=w;return function(){var de=w;w=pe;try{return ce.apply(this,arguments)}finally{w=de}}}})(Ob)),Ob}var LN;function zI(){return LN||(LN=1,Mb.exports=BI()),Mb.exports}var Fb={exports:{}},Ha={};var DN;function qI(){if(DN)return Ha;DN=1;var n=M2();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(h,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:h,containerInfo:f,implementation:g}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ha.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ha.createPortal=function(h,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(h,f,null,g)},Ha.flushSync=function(h){var f=c.T,g=r.p;try{if(c.T=null,r.p=2,h)return h()}finally{c.T=f,r.p=g,r.d.f()}},Ha.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(h,f))},Ha.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Ha.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin),w=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?r.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:w,fetchPriority:b}):g==="script"&&r.d.X(h,{crossOrigin:y,integrity:w,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ha.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);r.d.M(h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(h)},Ha.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin);r.d.L(h,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ha.preloadModule=function(h,f){if(typeof h=="string")if(f){var g=u(f.as,f.crossOrigin);r.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(h)},Ha.requestFormReset=function(h){r.d.r(h)},Ha.unstable_batchedUpdates=function(h,f){return h(f)},Ha.useFormState=function(h,f,g){return c.H.useFormState(h,f,g)},Ha.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ha.version="19.2.0",Ha}var MN;function B6(){if(MN)return Fb.exports;MN=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Fb.exports=qI(),Fb.exports}var ON;function HI(){if(ON)return zm;ON=1;var n=zI(),e=M2(),t=B6();function r(i){var l="https://react.dev/errors/"+i;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var l=i,d=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(d=l.return),i=l.return;while(i)}return l.tag===3?d:null}function c(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function u(i){if(i.tag===31){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function h(i){if(o(i)!==i)throw Error(r(188))}function f(i){var l=i.alternate;if(!l){if(l=o(i),l===null)throw Error(r(188));return l!==i?null:i}for(var d=i,m=l;;){var v=d.return;if(v===null)break;var _=v.alternate;if(_===null){if(m=v.return,m!==null){d=m;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===d)return h(v),i;if(_===m)return h(v),l;_=_.sibling}throw Error(r(188))}if(d.return!==m.return)d=v,m=_;else{for(var U=!1,X=v.child;X;){if(X===d){U=!0,d=v,m=_;break}if(X===m){U=!0,m=v,d=_;break}X=X.sibling}if(!U){for(X=_.child;X;){if(X===d){U=!0,d=_,m=v;break}if(X===m){U=!0,m=_,d=v;break}X=X.sibling}if(!U)throw Error(r(189))}}if(d.alternate!==m)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?i:l}function g(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i;for(i=i.child;i!==null;){if(l=g(i),l!==null)return l;i=i.sibling}return null}var y=Object.assign,w=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),D=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function P(i){return i===null||typeof i!="object"?null:(i=I&&i[I]||i["@@iterator"],typeof i=="function"?i:null)}var B=Symbol.for("react.client.reference");function ue(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===B?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case S:return"Fragment";case E:return"Profiler";case j:return"StrictMode";case te:return"Suspense";case ae:return"SuspenseList";case k:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case T:return"Portal";case D:return i.displayName||"Context";case L:return(i._context.displayName||"Context")+".Consumer";case O:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case H:return l=i.displayName||null,l!==null?l:ue(i.type)||"Memo";case V:l=i._payload,i=i._init;try{return ue(i(l))}catch{}}return null}var Ne=Array.isArray,ce=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Se=[],ze=-1;function ne(i){return{current:i}}function q(i){0>ze||(i.current=Se[ze],Se[ze]=null,ze--)}function Q(i,l){ze++,Se[ze]=i.current,i.current=l}var re=ne(null),he=ne(null),me=ne(null),be=ne(null);function Le(i,l){switch(Q(me,l),Q(he,i),Q(re,null),l.nodeType){case 9:case 11:i=(i=l.documentElement)&&(i=i.namespaceURI)?J5(i):0;break;default:if(i=l.tagName,l=l.namespaceURI)l=J5(l),i=Z5(l,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}q(re),Q(re,i)}function ke(){q(re),q(he),q(me)}function qe(i){i.memoizedState!==null&&Q(be,i);var l=re.current,d=Z5(l,i.type);l!==d&&(Q(he,i),Q(re,d))}function Je(i){he.current===i&&(q(re),q(he)),be.current===i&&(q(be),Om._currentValue=de)}var it,at;function ft(i){if(it===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);it=l&&l[1]||"",at=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+it+i+at}var se=!1;function st(i,l){if(!i||se)return"";se=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var We=function(){throw Error()};if(Object.defineProperty(We.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(We,[])}catch(Me){var De=Me}Reflect.construct(i,[],We)}else{try{We.call()}catch(Me){De=Me}i.call(We.prototype)}}else{try{throw Error()}catch(Me){De=Me}(We=i())&&typeof We.catch=="function"&&We.catch(function(){})}}catch(Me){if(Me&&De&&typeof Me.stack=="string")return[Me.stack,De.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=m.DetermineComponentFrameRoot(),U=_[0],X=_[1];if(U&&X){var fe=U.split(`
`),Re=X.split(`
`);for(v=m=0;m<fe.length&&!fe[m].includes("DetermineComponentFrameRoot");)m++;for(;v<Re.length&&!Re[v].includes("DetermineComponentFrameRoot");)v++;if(m===fe.length||v===Re.length)for(m=fe.length-1,v=Re.length-1;1<=m&&0<=v&&fe[m]!==Re[v];)v--;for(;1<=m&&0<=v;m--,v--)if(fe[m]!==Re[v]){if(m!==1||v!==1)do if(m--,v--,0>v||fe[m]!==Re[v]){var Be=`
`+fe[m].replace(" at new "," at ");return i.displayName&&Be.includes("<anonymous>")&&(Be=Be.replace("<anonymous>",i.displayName)),Be}while(1<=m&&0<=v);break}}}finally{se=!1,Error.prepareStackTrace=d}return(d=i?i.displayName||i.name:"")?ft(d):""}function rn(i,l){switch(i.tag){case 26:case 27:case 5:return ft(i.type);case 16:return ft("Lazy");case 13:return i.child!==l&&l!==null?ft("Suspense Fallback"):ft("Suspense");case 19:return ft("SuspenseList");case 0:case 15:return st(i.type,!1);case 11:return st(i.type.render,!1);case 1:return st(i.type,!0);case 31:return ft("Activity");default:return""}}function Pt(i){try{var l="",d=null;do l+=rn(i,d),d=i,i=i.return;while(i);return l}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Ge=Object.prototype.hasOwnProperty,ct=n.unstable_scheduleCallback,lt=n.unstable_cancelCallback,Dt=n.unstable_shouldYield,St=n.unstable_requestPaint,sn=n.unstable_now,dn=n.unstable_getCurrentPriorityLevel,Xt=n.unstable_ImmediatePriority,pn=n.unstable_UserBlockingPriority,on=n.unstable_NormalPriority,wt=n.unstable_LowPriority,en=n.unstable_IdlePriority,Nt=n.log,Er=n.unstable_setDisableYieldValue,ln=null,Lt=null;function $t(i){if(typeof Nt=="function"&&Er(i),Lt&&typeof Lt.setStrictMode=="function")try{Lt.setStrictMode(ln,i)}catch{}}var an=Math.clz32?Math.clz32:zt,Tt=Math.log,zn=Math.LN2;function zt(i){return i>>>=0,i===0?32:31-(Tt(i)/zn|0)|0}var qt=256,Gn=262144,Et=4194304;function jt(i){var l=i&42;if(l!==0)return l;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function xn(i,l,d){var m=i.pendingLanes;if(m===0)return 0;var v=0,_=i.suspendedLanes,U=i.pingedLanes;i=i.warmLanes;var X=m&134217727;return X!==0?(m=X&~_,m!==0?v=jt(m):(U&=X,U!==0?v=jt(U):d||(d=X&~i,d!==0&&(v=jt(d))))):(X=m&~_,X!==0?v=jt(X):U!==0?v=jt(U):d||(d=m&~i,d!==0&&(v=jt(d)))),v===0?0:l!==0&&l!==v&&(l&_)===0&&(_=v&-v,d=l&-l,_>=d||_===32&&(d&4194048)!==0)?l:v}function Bs(i,l){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&l)===0}function As(i,l){switch(i){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pi(){var i=Et;return Et<<=1,(Et&62914560)===0&&(Et=4194304),i}function ms(i){for(var l=[],d=0;31>d;d++)l.push(i);return l}function Ct(i,l){i.pendingLanes|=l,l!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function qi(i,l,d,m,v,_){var U=i.pendingLanes;i.pendingLanes=d,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=d,i.entangledLanes&=d,i.errorRecoveryDisabledLanes&=d,i.shellSuspendCounter=0;var X=i.entanglements,fe=i.expirationTimes,Re=i.hiddenUpdates;for(d=U&~d;0<d;){var Be=31-an(d),We=1<<Be;X[Be]=0,fe[Be]=-1;var De=Re[Be];if(De!==null)for(Re[Be]=null,Be=0;Be<De.length;Be++){var Me=De[Be];Me!==null&&(Me.lane&=-536870913)}d&=~We}m!==0&&va(i,m,0),_!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=_&~(U&~l))}function va(i,l,d){i.pendingLanes|=l,i.suspendedLanes&=~l;var m=31-an(l);i.entangledLanes|=l,i.entanglements[m]=i.entanglements[m]|1073741824|d&261930}function ra(i,l){var d=i.entangledLanes|=l;for(i=i.entanglements;d;){var m=31-an(d),v=1<<m;v&l|i[m]&l&&(i[m]|=l),d&=~v}}function sa(i,l){var d=l&-l;return d=(d&42)!==0?1:nr(d),(d&(i.suspendedLanes|l))!==0?0:d}function nr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function fr(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function es(){var i=pe.p;return i!==0?i:(i=window.event,i===void 0?32:NN(i.type))}function zs(i,l){var d=pe.p;try{return pe.p=i,l()}finally{pe.p=d}}var Ts=Math.random().toString(36).slice(2),$n="__reactFiber$"+Ts,sr="__reactProps$"+Ts,ts="__reactContainer$"+Ts,aa="__reactEvents$"+Ts,Oa="__reactListeners$"+Ts,fo="__reactHandles$"+Ts,ei="__reactResources$"+Ts,ia="__reactMarker$"+Ts;function Hi(i){delete i[$n],delete i[sr],delete i[aa],delete i[Oa],delete i[fo]}function wa(i){var l=i[$n];if(l)return l;for(var d=i.parentNode;d;){if(l=d[ts]||d[$n]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(i=iN(i);i!==null;){if(d=i[$n])return d;i=iN(i)}return l}i=d,d=i.parentNode}return null}function qs(i){if(i=i[$n]||i[ts]){var l=i.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return i}return null}function Na(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i.stateNode;throw Error(r(33))}function Fa(i){var l=i[ei];return l||(l=i[ei]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Tr(i){i[ia]=!0}var yl=new Set,oa={};function Va(i,l){ti(i,l),ti(i+"Capture",l)}function ti(i,l){for(oa[i]=l,i=0;i<l.length;i++)yl.add(l[i])}var Uo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bl={},vl={};function oc(i){return Ge.call(vl,i)?!0:Ge.call(bl,i)?!1:Uo.test(i)?vl[i]=!0:(bl[i]=!0,!1)}function ja(i,l,d){if(oc(l))if(d===null)i.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":i.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){i.removeAttribute(l);return}}i.setAttribute(l,""+d)}}function Cs(i,l,d){if(d===null)i.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttribute(l,""+d)}}function Mr(i,l,d,m){if(m===null)i.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(d);return}i.setAttributeNS(l,d,""+m)}}function wn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Gi(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ua(i,l,d){var m=Object.getOwnPropertyDescriptor(i.constructor.prototype,l);if(!i.hasOwnProperty(l)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var v=m.get,_=m.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return v.call(this)},set:function(U){d=""+U,_.call(this,U)}}),Object.defineProperty(i,l,{enumerable:m.enumerable}),{getValue:function(){return d},setValue:function(U){d=""+U},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function Rn(i){if(!i._valueTracker){var l=Gi(i)?"checked":"value";i._valueTracker=Ua(i,l,""+i[l])}}function mo(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var d=l.getValue(),m="";return i&&(m=Gi(i)?i.checked?"true":"false":i.value),i=m,i!==d?(l.setValue(i),!0):!1}function Gr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var wr=/[\n"\\]/g;function Or(i){return i.replace(wr,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Bo(i,l,d,m,v,_,U,X){i.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?i.type=U:i.removeAttribute("type"),l!=null?U==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+wn(l)):i.value!==""+wn(l)&&(i.value=""+wn(l)):U!=="submit"&&U!=="reset"||i.removeAttribute("value"),l!=null?lc(i,U,wn(l)):d!=null?lc(i,U,wn(d)):m!=null&&i.removeAttribute("value"),v==null&&_!=null&&(i.defaultChecked=!!_),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?i.name=""+wn(X):i.removeAttribute("name")}function nu(i,l,d,m,v,_,U,X){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),l!=null||d!=null){if(!(_!=="submit"&&_!=="reset"||l!=null)){Rn(i);return}d=d!=null?""+wn(d):"",l=l!=null?""+wn(l):d,X||l===i.value||(i.value=l),i.defaultValue=l}m=m??v,m=typeof m!="function"&&typeof m!="symbol"&&!!m,i.checked=X?i.checked:!!m,i.defaultChecked=!!m,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(i.name=U),Rn(i)}function lc(i,l,d){l==="number"&&Gr(i.ownerDocument)===i||i.defaultValue===""+d||(i.defaultValue=""+d)}function Hs(i,l,d,m){if(i=i.options,l){l={};for(var v=0;v<d.length;v++)l["$"+d[v]]=!0;for(d=0;d<i.length;d++)v=l.hasOwnProperty("$"+i[d].value),i[d].selected!==v&&(i[d].selected=v),v&&m&&(i[d].defaultSelected=!0)}else{for(d=""+wn(d),l=null,v=0;v<i.length;v++){if(i[v].value===d){i[v].selected=!0,m&&(i[v].defaultSelected=!0);return}l!==null||i[v].disabled||(l=i[v])}l!==null&&(l.selected=!0)}}function cc(i,l,d){if(l!=null&&(l=""+wn(l),l!==i.value&&(i.value=l),d==null)){i.defaultValue!==l&&(i.defaultValue=l);return}i.defaultValue=d!=null?""+wn(d):""}function $i(i,l,d,m){if(l==null){if(m!=null){if(d!=null)throw Error(r(92));if(Ne(m)){if(1<m.length)throw Error(r(93));m=m[0]}d=m}d==null&&(d=""),l=d}d=wn(l),i.defaultValue=d,m=i.textContent,m===d&&m!==""&&m!==null&&(i.value=m),Rn(i)}function gs(i,l){if(l){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=l;return}}i.textContent=l}var go=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function uc(i,l,d){var m=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?m?i.setProperty(l,""):l==="float"?i.cssFloat="":i[l]="":m?i.setProperty(l,d):typeof d!="number"||d===0||go.has(l)?l==="float"?i.cssFloat=d:i[l]=(""+d).trim():i[l]=d+"px"}function dc(i,l,d){if(l!=null&&typeof l!="object")throw Error(r(62));if(i=i.style,d!=null){for(var m in d)!d.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?i.setProperty(m,""):m==="float"?i.cssFloat="":i[m]="");for(var v in l)m=l[v],l.hasOwnProperty(v)&&d[v]!==m&&uc(i,v,m)}else for(var _ in l)l.hasOwnProperty(_)&&uc(i,_,l[_])}function wl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function la(i){return Wi.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ni(){}var Ki=null;function ca(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var po=null,Mt=null;function zo(i){var l=qs(i);if(l&&(i=l.stateNode)){var d=i[sr]||null;e:switch(i=l.stateNode,l.type){case"input":if(Bo(i,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Or(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var m=d[l];if(m!==i&&m.form===i.form){var v=m[sr]||null;if(!v)throw Error(r(90));Bo(m,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(l=0;l<d.length;l++)m=d[l],m.form===i.form&&mo(m)}break e;case"textarea":cc(i,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&Hs(i,!!d.multiple,l,!1)}}}var jl=!1;function xo(i,l,d){if(jl)return i(l,d);jl=!0;try{var m=i(l);return m}finally{if(jl=!1,(po!==null||Mt!==null)&&(Op(),po&&(l=po,i=Mt,Mt=po=null,zo(l),i)))for(l=0;l<i.length;l++)zo(i[l])}}function ps(i,l){var d=i.stateNode;if(d===null)return null;var m=d[sr]||null;if(m===null)return null;d=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(r(231,l,typeof d));return d}var ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qo=!1;if(ns)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){qo=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{qo=!1}var _a=null,Ho=null,ri=null;function hc(){if(ri)return ri;var i,l=Ho,d=l.length,m,v="value"in _a?_a.value:_a.textContent,_=v.length;for(i=0;i<d&&l[i]===v[i];i++);var U=d-i;for(m=1;m<=U&&l[d-m]===v[_-m];m++);return ri=v.slice(i,1<m?1-m:void 0)}function Sa(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function Yi(){return!0}function Ea(){return!1}function $r(i){function l(d,m,v,_,U){this._reactName=d,this._targetInst=v,this.type=m,this.nativeEvent=_,this.target=U,this.currentTarget=null;for(var X in i)i.hasOwnProperty(X)&&(d=i[X],this[X]=d?d(_):_[X]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Yi:Ea,this.isPropagationStopped=Ea,this}return y(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Yi)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Yi)},persist:function(){},isPersistent:Yi}),l}var xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Is=$r(xi),yi=y({},xi,{view:0,detail:0}),yo=$r(yi),bi,vi,Ba,Go=y({},yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ft,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ba&&(Ba&&i.type==="mousemove"?(bi=i.screenX-Ba.screenX,vi=i.screenY-Ba.screenY):vi=bi=0,Ba=i),bi)},movementY:function(i){return"movementY"in i?i.movementY:vi}}),_l=$r(Go),Aa=y({},Go,{dataTransfer:0}),wi=$r(Aa),fc=y({},yi,{relatedTarget:0}),si=$r(fc),Sl=y({},xi,{animationName:0,elapsedTime:0,pseudoElement:0}),A=$r(Sl),G=y({},xi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),oe=$r(G),ge=y({},xi,{data:0}),we=$r(ge),Ue={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ye={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ht={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pt(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=ht[i])?!!l[i]:!1}function Ft(){return pt}var It=y({},yi,{key:function(i){if(i.key){var l=Ue[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=Sa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ye[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ft,charCode:function(i){return i.type==="keypress"?Sa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Sa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),En=$r(It),mr=y({},Go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rr=$r(mr),x=y({},yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ft}),R=$r(x),z=y({},xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Z=$r(z),_e=y({},Go,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Pe=$r(_e),et=y({},xi,{newState:0,oldState:0}),Jt=$r(et),gr=[9,13,27,32],bn=ns&&"CompositionEvent"in window,Kn=null;ns&&"documentMode"in document&&(Kn=document.documentMode);var Rs=ns&&"TextEvent"in window&&!Kn,Gs=ns&&(!bn||Kn&&8<Kn&&11>=Kn),ar=" ",$s=!1;function ai(i,l){switch(i){case"keyup":return gr.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bo(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var vo=!1;function Ta(i,l){switch(i){case"compositionend":return bo(l);case"keypress":return l.which!==32?null:($s=!0,ar);case"textInput":return i=l.data,i===ar&&$s?null:i;default:return null}}function $o(i,l){if(vo)return i==="compositionend"||!bn&&ai(i,l)?(i=hc(),ri=Ho=_a=null,vo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Gs&&l.locale!=="ko"?null:l.data;default:return null}}var ru={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fd(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!ru[i.type]:l==="textarea"}function ii(i,l,d,m){po?Mt?Mt.push(m):Mt=[m]:po=m,l=Hp(l,"onChange"),0<l.length&&(d=new Is("onChange","change",null,d,m),i.push({event:d,listeners:l}))}var Xi=null,Wo=null;function md(i){$5(i,0)}function Qi(i){var l=Na(i);if(mo(l))return i}function El(i,l){if(i==="change")return l}var za=!1;if(ns){var Ca;if(ns){var wo="oninput"in document;if(!wo){var No=document.createElement("div");No.setAttribute("oninput","return;"),wo=typeof No.oninput=="function"}Ca=wo}else Ca=!1;za=Ca&&(!document.documentMode||9<document.documentMode)}function Ko(){Xi&&(Xi.detachEvent("onpropertychange",su),Wo=Xi=null)}function su(i){if(i.propertyName==="value"&&Qi(Wo)){var l=[];ii(l,Wo,i,ca(i)),xo(md,l)}}function au(i,l,d){i==="focusin"?(Ko(),Xi=l,Wo=d,Xi.attachEvent("onpropertychange",su)):i==="focusout"&&Ko()}function Wr(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Qi(Wo)}function xh(i,l){if(i==="click")return Qi(l)}function jo(i,l){if(i==="input"||i==="change")return Qi(l)}function _o(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var Ws=typeof Object.is=="function"?Object.is:_o;function Yo(i,l){if(Ws(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var d=Object.keys(i),m=Object.keys(l);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var v=d[m];if(!Ge.call(l,v)||!Ws(i[v],l[v]))return!1}return!0}function iu(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ou(i,l){var d=iu(i);i=0;for(var m;d;){if(d.nodeType===3){if(m=i+d.textContent.length,i<=l&&m>=l)return{node:d,offset:l-i};i=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=iu(d)}}function Xo(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?Xo(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function Qo(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var l=Gr(i.document);l instanceof i.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)i=l.contentWindow;else break;l=Gr(i.document)}return l}function So(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}var mc=ns&&"documentMode"in document&&11>=document.documentMode,oi=null,Jo=null,ua=null,Ni=!1;function qn(i,l,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Ni||oi==null||oi!==Gr(m)||(m=oi,"selectionStart"in m&&So(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),ua&&Yo(ua,m)||(ua=m,m=Hp(Jo,"onSelect"),0<m.length&&(l=new Is("onSelect","select",null,l,d),i.push({event:l,listeners:m}),l.target=oi)))}function Mn(i,l){var d={};return d[i.toLowerCase()]=l.toLowerCase(),d["Webkit"+i]="webkit"+l,d["Moz"+i]="moz"+l,d}var pr={animationend:Mn("Animation","AnimationEnd"),animationiteration:Mn("Animation","AnimationIteration"),animationstart:Mn("Animation","AnimationStart"),transitionrun:Mn("Transition","TransitionRun"),transitionstart:Mn("Transition","TransitionStart"),transitioncancel:Mn("Transition","TransitionCancel"),transitionend:Mn("Transition","TransitionEnd")},Kr={},Eo={};ns&&(Eo=document.createElement("div").style,"AnimationEvent"in window||(delete pr.animationend.animation,delete pr.animationiteration.animation,delete pr.animationstart.animation),"TransitionEvent"in window||delete pr.transitionend.transition);function Ji(i){if(Kr[i])return Kr[i];if(!pr[i])return i;var l=pr[i],d;for(d in l)if(l.hasOwnProperty(d)&&d in Eo)return Kr[i]=l[d];return i}var gc=Ji("animationend"),gd=Ji("animationiteration"),im=Ji("animationstart"),fp=Ji("transitionrun"),mp=Ji("transitionstart"),gp=Ji("transitioncancel"),om=Ji("transitionend"),lm=new Map,pc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pc.push("scrollEnd");function ji(i,l){lm.set(i,l),Va(l,[i])}var pd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},li=[],xc=0,yh=0;function xd(){for(var i=xc,l=yh=xc=0;l<i;){var d=li[l];li[l++]=null;var m=li[l];li[l++]=null;var v=li[l];li[l++]=null;var _=li[l];if(li[l++]=null,m!==null&&v!==null){var U=m.pending;U===null?v.next=v:(v.next=U.next,U.next=v),m.pending=v}_!==0&&bd(d,v,_)}}function yd(i,l,d,m){li[xc++]=i,li[xc++]=l,li[xc++]=d,li[xc++]=m,yh|=m,i.lanes|=m,i=i.alternate,i!==null&&(i.lanes|=m)}function bh(i,l,d,m){return yd(i,l,d,m),da(i)}function Zo(i,l){return yd(i,null,null,l),da(i)}function bd(i,l,d){i.lanes|=d;var m=i.alternate;m!==null&&(m.lanes|=d);for(var v=!1,_=i.return;_!==null;)_.childLanes|=d,m=_.alternate,m!==null&&(m.childLanes|=d),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(v=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,v&&l!==null&&(v=31-an(d),i=_.hiddenUpdates,m=i[v],m===null?i[v]=[l]:m.push(l),l.lane=d|536870912),_):null}function da(i){if(50<Im)throw Im=0,rb=null,Error(r(185));for(var l=i.return;l!==null;)i=l,l=i.return;return i.tag===3?i.stateNode:null}var Ks={};function vh(i,l,d,m){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ha(i,l,d,m){return new vh(i,l,d,m)}function wh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function _i(i,l){var d=i.alternate;return d===null?(d=ha(i.tag,l,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=l,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&65011712,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,l=i.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d.refCleanup=i.refCleanup,d}function vd(i,l){i.flags&=65011714;var d=i.alternate;return d===null?(i.childLanes=0,i.lanes=l,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=d.childLanes,i.lanes=d.lanes,i.child=d.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=d.memoizedProps,i.memoizedState=d.memoizedState,i.updateQueue=d.updateQueue,i.type=d.type,l=d.dependencies,i.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),i}function lu(i,l,d,m,v,_){var U=0;if(m=i,typeof i=="function")wh(i)&&(U=1);else if(typeof i=="string")U=jI(i,d,re.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case k:return i=ha(31,d,l,v),i.elementType=k,i.lanes=_,i;case S:return Al(d.children,v,_,l);case j:U=8,v|=24;break;case E:return i=ha(12,d,l,v|2),i.elementType=E,i.lanes=_,i;case te:return i=ha(13,d,l,v),i.elementType=te,i.lanes=_,i;case ae:return i=ha(19,d,l,v),i.elementType=ae,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case D:U=10;break e;case L:U=9;break e;case O:U=11;break e;case H:U=14;break e;case V:U=16,m=null;break e}U=29,d=Error(r(130,i===null?"null":typeof i,"")),m=null}return l=ha(U,d,l,v),l.elementType=i,l.type=m,l.lanes=_,l}function Al(i,l,d,m){return i=ha(7,i,m,l),i.lanes=d,i}function wd(i,l,d){return i=ha(6,i,null,l),i.lanes=d,i}function Nh(i){var l=ha(18,null,null,0);return l.stateNode=i,l}function cu(i,l,d){return l=ha(4,i.children!==null?i.children:[],i.key,l),l.lanes=d,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}var jh=new WeakMap;function Si(i,l){if(typeof i=="object"&&i!==null){var d=jh.get(i);return d!==void 0?d:(l={value:i,source:l,stack:Pt(l)},jh.set(i,l),l)}return{value:i,source:l,stack:Pt(l)}}var uu=[],yc=0,_h=null,Nd=0,Ei=[],Ai=0,Tl=null,Ti=1,Ci="";function ci(i,l){uu[yc++]=Nd,uu[yc++]=_h,_h=i,Nd=l}function pp(i,l,d){Ei[Ai++]=Ti,Ei[Ai++]=Ci,Ei[Ai++]=Tl,Tl=i;var m=Ti;i=Ci;var v=32-an(m)-1;m&=~(1<<v),d+=1;var _=32-an(l)+v;if(30<_){var U=v-v%5;_=(m&(1<<U)-1).toString(32),m>>=U,v-=U,Ti=1<<32-an(l)+v|d<<v|m,Ci=_+i}else Ti=1<<_|d<<v|m,Ci=i}function cm(i){i.return!==null&&(ci(i,1),pp(i,1,0))}function Sh(i){for(;i===_h;)_h=uu[--yc],uu[yc]=null,Nd=uu[--yc],uu[yc]=null;for(;i===Tl;)Tl=Ei[--Ai],Ei[Ai]=null,Ci=Ei[--Ai],Ei[Ai]=null,Ti=Ei[--Ai],Ei[Ai]=null}function xp(i,l){Ei[Ai++]=Ti,Ei[Ai++]=Ci,Ei[Ai++]=Tl,Ti=l.id,Ci=l.overflow,Tl=i}var Ys=null,Nr=null,Tn=!1,Ia=null,Fr=!1,Zi=Error(r(519));function Cl(i){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw du(Si(l,i)),Zi}function um(i){var l=i.stateNode,d=i.type,m=i.memoizedProps;switch(l[$n]=i,l[sr]=m,d){case"dialog":In("cancel",l),In("close",l);break;case"iframe":case"object":case"embed":In("load",l);break;case"video":case"audio":for(d=0;d<km.length;d++)In(km[d],l);break;case"source":In("error",l);break;case"img":case"image":case"link":In("error",l),In("load",l);break;case"details":In("toggle",l);break;case"input":In("invalid",l),nu(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":In("invalid",l);break;case"textarea":In("invalid",l),$i(l,m.value,m.defaultValue,m.children)}d=m.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||m.suppressHydrationWarning===!0||X5(l.textContent,d)?(m.popover!=null&&(In("beforetoggle",l),In("toggle",l)),m.onScroll!=null&&In("scroll",l),m.onScrollEnd!=null&&In("scrollend",l),m.onClick!=null&&(l.onclick=ni),l=!0):l=!1,l||Cl(i,!0)}function el(i){for(Ys=i.return;Ys;)switch(Ys.tag){case 5:case 31:case 13:Fr=!1;return;case 27:case 3:Fr=!0;return;default:Ys=Ys.return}}function Xs(i){if(i!==Ys)return!1;if(!Tn)return el(i),Tn=!0,!1;var l=i.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=i.type,d=!(d!=="form"&&d!=="button")||yb(i.type,i.memoizedProps)),d=!d),d&&Nr&&Cl(i),el(i),l===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Nr=aN(i)}else if(l===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Nr=aN(i)}else l===27?(l=Nr,Su(i.type)?(i=jb,jb=null,Nr=i):Nr=l):Nr=Ys?Io(i.stateNode.nextSibling):null;return!0}function bc(){Nr=Ys=null,Tn=!1}function dm(){var i=Ia;return i!==null&&(Di===null?Di=i:Di.push.apply(Di,i),Ia=null),i}function du(i){Ia===null?Ia=[i]:Ia.push(i)}var Eh=ne(null),Il=null,Ao=null;function Rl(i,l,d){Q(Eh,l._currentValue),l._currentValue=d}function Ii(i){i._currentValue=Eh.current,q(Eh)}function hu(i,l,d){for(;i!==null;){var m=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),i===d)break;i=i.return}}function vc(i,l,d,m){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var _=v.dependencies;if(_!==null){var U=v.child;_=_.firstContext;e:for(;_!==null;){var X=_;_=v;for(var fe=0;fe<l.length;fe++)if(X.context===l[fe]){_.lanes|=d,X=_.alternate,X!==null&&(X.lanes|=d),hu(_.return,d,i),m||(U=null);break e}_=X.next}}else if(v.tag===18){if(U=v.return,U===null)throw Error(r(341));U.lanes|=d,_=U.alternate,_!==null&&(_.lanes|=d),hu(U,d,i),U=null}else U=v.child;if(U!==null)U.return=v;else for(U=v;U!==null;){if(U===i){U=null;break}if(v=U.sibling,v!==null){v.return=U.return,U=v;break}U=U.return}v=U}}function kl(i,l,d,m){i=null;for(var v=l,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var U=v.alternate;if(U===null)throw Error(r(387));if(U=U.memoizedProps,U!==null){var X=v.type;Ws(v.pendingProps.value,U.value)||(i!==null?i.push(X):i=[X])}}else if(v===be.current){if(U=v.alternate,U===null)throw Error(r(387));U.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(Om):i=[Om])}v=v.return}i!==null&&vc(l,i,d,m),l.flags|=262144}function Ah(i){for(i=i.firstContext;i!==null;){if(!Ws(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Pl(i){Il=i,Ao=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Qs(i){return yp(Il,i)}function Th(i,l){return Il===null&&Pl(i),yp(i,l)}function yp(i,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},Ao===null){if(i===null)throw Error(r(308));Ao=l,i.dependencies={lanes:0,firstContext:l},i.flags|=524288}else Ao=Ao.next=l;return d}var Ny=typeof AbortController<"u"?AbortController:function(){var i=[],l=this.signal={aborted:!1,addEventListener:function(d,m){i.push(m)}};this.abort=function(){l.aborted=!0,i.forEach(function(d){return d()})}},jy=n.unstable_scheduleCallback,_y=n.unstable_NormalPriority,Yr={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fu(){return{controller:new Ny,data:new Map,refCount:0}}function jd(i){i.refCount--,i.refCount===0&&jy(_y,function(){i.controller.abort()})}var _d=null,Ch=0,p=0,N=null;function C(i,l){if(_d===null){var d=_d=[];Ch=0,p=cb(),N={status:"pending",value:void 0,then:function(m){d.push(m)}}}return Ch++,l.then(M,M),l}function M(){if(--Ch===0&&_d!==null){N!==null&&(N.status="fulfilled");var i=_d;_d=null,p=0,N=null;for(var l=0;l<i.length;l++)(0,i[l])()}}function $(i,l){var d=[],m={status:"pending",value:null,reason:null,then:function(v){d.push(v)}};return i.then(function(){m.status="fulfilled",m.value=l;for(var v=0;v<d.length;v++)(0,d[v])(l)},function(v){for(m.status="rejected",m.reason=v,v=0;v<d.length;v++)(0,d[v])(void 0)}),m}var W=ce.S;ce.S=function(i,l){v5=sn(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&C(i,l),W!==null&&W(i,l)};var Y=ne(null);function J(){var i=Y.current;return i!==null?i:_r.pooledCache}function ee(i,l){l===null?Q(Y,Y.current):Q(Y,l.pool)}function le(){var i=J();return i===null?null:{parent:Yr._currentValue,pool:i}}var xe=Error(r(460)),Ce=Error(r(474)),ie=Error(r(542)),ve={then:function(){}};function Ee(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Fe(i,l,d){switch(d=i[d],d===void 0?i.push(l):d!==l&&(l.then(ni,ni),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,Qe(i),i;default:if(typeof l.status=="string")l.then(ni,ni);else{if(i=_r,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=l,i.status="pending",i.then(function(m){if(l.status==="pending"){var v=l;v.status="fulfilled",v.value=m}},function(m){if(l.status==="pending"){var v=l;v.status="rejected",v.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,Qe(i),i}throw Oe=l,xe}}function Ae(i){try{var l=i._init;return l(i._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(Oe=d,xe):d}}var Oe=null;function He(){if(Oe===null)throw Error(r(459));var i=Oe;return Oe=null,i}function Qe(i){if(i===xe||i===ie)throw Error(r(483))}var Ke=null,xt=0;function ut(i){var l=xt;return xt+=1,Ke===null&&(Ke=[]),Fe(Ke,i,l)}function tn(i,l){l=l.props.ref,i.ref=l!==void 0?l:null}function mt(i,l){throw l.$$typeof===w?Error(r(525)):(i=Object.prototype.toString.call(l),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i)))}function An(i){function l(je,ye){if(i){var Ie=je.deletions;Ie===null?(je.deletions=[ye],je.flags|=16):Ie.push(ye)}}function d(je,ye){if(!i)return null;for(;ye!==null;)l(je,ye),ye=ye.sibling;return null}function m(je){for(var ye=new Map;je!==null;)je.key!==null?ye.set(je.key,je):ye.set(je.index,je),je=je.sibling;return ye}function v(je,ye){return je=_i(je,ye),je.index=0,je.sibling=null,je}function _(je,ye,Ie){return je.index=Ie,i?(Ie=je.alternate,Ie!==null?(Ie=Ie.index,Ie<ye?(je.flags|=67108866,ye):Ie):(je.flags|=67108866,ye)):(je.flags|=1048576,ye)}function U(je){return i&&je.alternate===null&&(je.flags|=67108866),je}function X(je,ye,Ie,$e){return ye===null||ye.tag!==6?(ye=wd(Ie,je.mode,$e),ye.return=je,ye):(ye=v(ye,Ie),ye.return=je,ye)}function fe(je,ye,Ie,$e){var Ut=Ie.type;return Ut===S?Be(je,ye,Ie.props.children,$e,Ie.key):ye!==null&&(ye.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===V&&Ae(Ut)===ye.type)?(ye=v(ye,Ie.props),tn(ye,Ie),ye.return=je,ye):(ye=lu(Ie.type,Ie.key,Ie.props,null,je.mode,$e),tn(ye,Ie),ye.return=je,ye)}function Re(je,ye,Ie,$e){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Ie.containerInfo||ye.stateNode.implementation!==Ie.implementation?(ye=cu(Ie,je.mode,$e),ye.return=je,ye):(ye=v(ye,Ie.children||[]),ye.return=je,ye)}function Be(je,ye,Ie,$e,Ut){return ye===null||ye.tag!==7?(ye=Al(Ie,je.mode,$e,Ut),ye.return=je,ye):(ye=v(ye,Ie),ye.return=je,ye)}function We(je,ye,Ie){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ye=wd(""+ye,je.mode,Ie),ye.return=je,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case b:return Ie=lu(ye.type,ye.key,ye.props,null,je.mode,Ie),tn(Ie,ye),Ie.return=je,Ie;case T:return ye=cu(ye,je.mode,Ie),ye.return=je,ye;case V:return ye=Ae(ye),We(je,ye,Ie)}if(Ne(ye)||P(ye))return ye=Al(ye,je.mode,Ie,null),ye.return=je,ye;if(typeof ye.then=="function")return We(je,ut(ye),Ie);if(ye.$$typeof===D)return We(je,Th(je,ye),Ie);mt(je,ye)}return null}function De(je,ye,Ie,$e){var Ut=ye!==null?ye.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Ut!==null?null:X(je,ye,""+Ie,$e);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case b:return Ie.key===Ut?fe(je,ye,Ie,$e):null;case T:return Ie.key===Ut?Re(je,ye,Ie,$e):null;case V:return Ie=Ae(Ie),De(je,ye,Ie,$e)}if(Ne(Ie)||P(Ie))return Ut!==null?null:Be(je,ye,Ie,$e,null);if(typeof Ie.then=="function")return De(je,ye,ut(Ie),$e);if(Ie.$$typeof===D)return De(je,ye,Th(je,Ie),$e);mt(je,Ie)}return null}function Me(je,ye,Ie,$e,Ut){if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return je=je.get(Ie)||null,X(ye,je,""+$e,Ut);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case b:return je=je.get($e.key===null?Ie:$e.key)||null,fe(ye,je,$e,Ut);case T:return je=je.get($e.key===null?Ie:$e.key)||null,Re(ye,je,$e,Ut);case V:return $e=Ae($e),Me(je,ye,Ie,$e,Ut)}if(Ne($e)||P($e))return je=je.get(Ie)||null,Be(ye,je,$e,Ut,null);if(typeof $e.then=="function")return Me(je,ye,Ie,ut($e),Ut);if($e.$$typeof===D)return Me(je,ye,Ie,Th(ye,$e),Ut);mt(ye,$e)}return null}function gt(je,ye,Ie,$e){for(var Ut=null,Yn=null,_t=ye,yn=ye=0,Pn=null;_t!==null&&yn<Ie.length;yn++){_t.index>yn?(Pn=_t,_t=null):Pn=_t.sibling;var Xn=De(je,_t,Ie[yn],$e);if(Xn===null){_t===null&&(_t=Pn);break}i&&_t&&Xn.alternate===null&&l(je,_t),ye=_(Xn,ye,yn),Yn===null?Ut=Xn:Yn.sibling=Xn,Yn=Xn,_t=Pn}if(yn===Ie.length)return d(je,_t),Tn&&ci(je,yn),Ut;if(_t===null){for(;yn<Ie.length;yn++)_t=We(je,Ie[yn],$e),_t!==null&&(ye=_(_t,ye,yn),Yn===null?Ut=_t:Yn.sibling=_t,Yn=_t);return Tn&&ci(je,yn),Ut}for(_t=m(_t);yn<Ie.length;yn++)Pn=Me(_t,je,yn,Ie[yn],$e),Pn!==null&&(i&&Pn.alternate!==null&&_t.delete(Pn.key===null?yn:Pn.key),ye=_(Pn,ye,yn),Yn===null?Ut=Pn:Yn.sibling=Pn,Yn=Pn);return i&&_t.forEach(function(Iu){return l(je,Iu)}),Tn&&ci(je,yn),Ut}function Kt(je,ye,Ie,$e){if(Ie==null)throw Error(r(151));for(var Ut=null,Yn=null,_t=ye,yn=ye=0,Pn=null,Xn=Ie.next();_t!==null&&!Xn.done;yn++,Xn=Ie.next()){_t.index>yn?(Pn=_t,_t=null):Pn=_t.sibling;var Iu=De(je,_t,Xn.value,$e);if(Iu===null){_t===null&&(_t=Pn);break}i&&_t&&Iu.alternate===null&&l(je,_t),ye=_(Iu,ye,yn),Yn===null?Ut=Iu:Yn.sibling=Iu,Yn=Iu,_t=Pn}if(Xn.done)return d(je,_t),Tn&&ci(je,yn),Ut;if(_t===null){for(;!Xn.done;yn++,Xn=Ie.next())Xn=We(je,Xn.value,$e),Xn!==null&&(ye=_(Xn,ye,yn),Yn===null?Ut=Xn:Yn.sibling=Xn,Yn=Xn);return Tn&&ci(je,yn),Ut}for(_t=m(_t);!Xn.done;yn++,Xn=Ie.next())Xn=Me(_t,je,yn,Xn.value,$e),Xn!==null&&(i&&Xn.alternate!==null&&_t.delete(Xn.key===null?yn:Xn.key),ye=_(Xn,ye,yn),Yn===null?Ut=Xn:Yn.sibling=Xn,Yn=Xn);return i&&_t.forEach(function(LI){return l(je,LI)}),Tn&&ci(je,yn),Ut}function vr(je,ye,Ie,$e){if(typeof Ie=="object"&&Ie!==null&&Ie.type===S&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case b:e:{for(var Ut=Ie.key;ye!==null;){if(ye.key===Ut){if(Ut=Ie.type,Ut===S){if(ye.tag===7){d(je,ye.sibling),$e=v(ye,Ie.props.children),$e.return=je,je=$e;break e}}else if(ye.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===V&&Ae(Ut)===ye.type){d(je,ye.sibling),$e=v(ye,Ie.props),tn($e,Ie),$e.return=je,je=$e;break e}d(je,ye);break}else l(je,ye);ye=ye.sibling}Ie.type===S?($e=Al(Ie.props.children,je.mode,$e,Ie.key),$e.return=je,je=$e):($e=lu(Ie.type,Ie.key,Ie.props,null,je.mode,$e),tn($e,Ie),$e.return=je,je=$e)}return U(je);case T:e:{for(Ut=Ie.key;ye!==null;){if(ye.key===Ut)if(ye.tag===4&&ye.stateNode.containerInfo===Ie.containerInfo&&ye.stateNode.implementation===Ie.implementation){d(je,ye.sibling),$e=v(ye,Ie.children||[]),$e.return=je,je=$e;break e}else{d(je,ye);break}else l(je,ye);ye=ye.sibling}$e=cu(Ie,je.mode,$e),$e.return=je,je=$e}return U(je);case V:return Ie=Ae(Ie),vr(je,ye,Ie,$e)}if(Ne(Ie))return gt(je,ye,Ie,$e);if(P(Ie)){if(Ut=P(Ie),typeof Ut!="function")throw Error(r(150));return Ie=Ut.call(Ie),Kt(je,ye,Ie,$e)}if(typeof Ie.then=="function")return vr(je,ye,ut(Ie),$e);if(Ie.$$typeof===D)return vr(je,ye,Th(je,Ie),$e);mt(je,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint"?(Ie=""+Ie,ye!==null&&ye.tag===6?(d(je,ye.sibling),$e=v(ye,Ie),$e.return=je,je=$e):(d(je,ye),$e=wd(Ie,je.mode,$e),$e.return=je,je=$e),U(je)):d(je,ye)}return function(je,ye,Ie,$e){try{xt=0;var Ut=vr(je,ye,Ie,$e);return Ke=null,Ut}catch(_t){if(_t===xe||_t===ie)throw _t;var Yn=ha(29,_t,null,je.mode);return Yn.lanes=$e,Yn.return=je,Yn}finally{}}}var jr=An(!0),hn=An(!1),dt=!1;function rt(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cr(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Wt(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function gn(i,l,d){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(er&2)!==0){var v=m.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),m.pending=l,l=da(i),bd(i,null,d),l}return yd(i,m,l,d),da(i)}function Jn(i,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var m=l.lanes;m&=i.pendingLanes,d|=m,l.lanes=d,ra(i,d)}}function xs(i,l){var d=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var v=null,_=null;if(d=d.firstBaseUpdate,d!==null){do{var U={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};_===null?v=_=U:_=_.next=U,d=d.next}while(d!==null);_===null?v=_=l:_=_.next=l}else v=_=l;d={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:m.shared,callbacks:m.callbacks},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=l:i.next=l,d.lastBaseUpdate=l}var Js=!1;function xr(){if(Js){var i=N;if(i!==null)throw i}}function rs(i,l,d,m){Js=!1;var v=i.updateQueue;dt=!1;var _=v.firstBaseUpdate,U=v.lastBaseUpdate,X=v.shared.pending;if(X!==null){v.shared.pending=null;var fe=X,Re=fe.next;fe.next=null,U===null?_=Re:U.next=Re,U=fe;var Be=i.alternate;Be!==null&&(Be=Be.updateQueue,X=Be.lastBaseUpdate,X!==U&&(X===null?Be.firstBaseUpdate=Re:X.next=Re,Be.lastBaseUpdate=fe))}if(_!==null){var We=v.baseState;U=0,Be=Re=fe=null,X=_;do{var De=X.lane&-536870913,Me=De!==X.lane;if(Me?(kn&De)===De:(m&De)===De){De!==0&&De===p&&(Js=!0),Be!==null&&(Be=Be.next={lane:0,tag:X.tag,payload:X.payload,callback:null,next:null});e:{var gt=i,Kt=X;De=l;var vr=d;switch(Kt.tag){case 1:if(gt=Kt.payload,typeof gt=="function"){We=gt.call(vr,We,De);break e}We=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=Kt.payload,De=typeof gt=="function"?gt.call(vr,We,De):gt,De==null)break e;We=y({},We,De);break e;case 2:dt=!0}}De=X.callback,De!==null&&(i.flags|=64,Me&&(i.flags|=8192),Me=v.callbacks,Me===null?v.callbacks=[De]:Me.push(De))}else Me={lane:De,tag:X.tag,payload:X.payload,callback:X.callback,next:null},Be===null?(Re=Be=Me,fe=We):Be=Be.next=Me,U|=De;if(X=X.next,X===null){if(X=v.shared.pending,X===null)break;Me=X,X=Me.next,Me.next=null,v.lastBaseUpdate=Me,v.shared.pending=null}}while(!0);Be===null&&(fe=We),v.baseState=fe,v.firstBaseUpdate=Re,v.lastBaseUpdate=Be,_===null&&(v.shared.lanes=0),vu|=U,i.lanes=U,i.memoizedState=We}}function fa(i,l){if(typeof i!="function")throw Error(r(191,i));i.call(l)}function ss(i,l){var d=i.callbacks;if(d!==null)for(i.callbacks=null,i=0;i<d.length;i++)fa(d[i],l)}var vn=ne(null),Fn=ne(0);function Ir(i,l){i=Ic,Q(Fn,i),Q(vn,l),Ic=i|l.baseLanes}function Hn(){Q(Fn,Ic),Q(vn,vn.current)}function ys(){Ic=Fn.current,q(vn),q(Fn)}var Rr=ne(null),Vn=null;function Xr(i){var l=i.alternate;Q(On,On.current&1),Q(Rr,i),Vn===null&&(l===null||vn.current!==null||l.memoizedState!==null)&&(Vn=i)}function Zn(i){Q(On,On.current),Q(Rr,i),Vn===null&&(Vn=i)}function as(i){i.tag===22?(Q(On,On.current),Q(Rr,i),Vn===null&&(Vn=i)):is()}function is(){Q(On,On.current),Q(Rr,Rr.current)}function ir(i){q(Rr),Vn===i&&(Vn=null),q(On)}var On=ne(0);function ma(i){for(var l=i;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||wb(d)||Nb(d)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Vr=0,Ot=null,Vt=null,Un=null,qa=!1,Ri=!1,Ra=!1,os=0,Ll=0,Dl=null,Ih=0;function yr(){throw Error(r(321))}function hm(i,l){if(l===null)return!1;for(var d=0;d<l.length&&d<i.length;d++)if(!Ws(i[d],l[d]))return!1;return!0}function fm(i,l,d,m,v,_){return Vr=_,Ot=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,ce.H=i===null||i.memoizedState===null?Rw:ky,Ra=!1,_=d(m,v),Ra=!1,Ri&&(_=tl(l,d,m,v)),Rh(i),_}function Rh(i){ce.H=wm;var l=Vt!==null&&Vt.next!==null;if(Vr=0,Un=Vt=Ot=null,qa=!1,Ll=0,Dl=null,l)throw Error(r(300));i===null||Ps||(i=i.dependencies,i!==null&&Ah(i)&&(Ps=!0))}function tl(i,l,d,m){Ot=i;var v=0;do{if(Ri&&(Dl=null),Ll=0,Ri=!1,25<=v)throw Error(r(301));if(v+=1,Un=Vt=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}ce.H=kw,_=l(d,m)}while(Ri);return _}function Sy(){var i=ce.H,l=i.useState()[0];return l=typeof l.then=="function"?Ml(l):l,i=i.useState()[0],(Vt!==null?Vt.memoizedState:null)!==i&&(Ot.flags|=1024),l}function mm(){var i=os!==0;return os=0,i}function gm(i,l,d){l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~d}function kh(i){if(qa){for(i=i.memoizedState;i!==null;){var l=i.queue;l!==null&&(l.pending=null),i=i.next}qa=!1}Vr=0,Un=Vt=Ot=null,Ri=!1,Ll=os=0,Dl=null}function ks(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?Ot.memoizedState=Un=i:Un=Un.next=i,Un}function Ur(){if(Vt===null){var i=Ot.alternate;i=i!==null?i.memoizedState:null}else i=Vt.next;var l=Un===null?Ot.memoizedState:Un.next;if(l!==null)Un=l,Vt=i;else{if(i===null)throw Ot.alternate===null?Error(r(467)):Error(r(310));Vt=i,i={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Un===null?Ot.memoizedState=Un=i:Un=Un.next=i}return Un}function Sd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ml(i){var l=Ll;return Ll+=1,Dl===null&&(Dl=[]),i=Fe(Dl,i,l),l=Ot,(Un===null?l.memoizedState:Un.next)===null&&(l=l.alternate,ce.H=l===null||l.memoizedState===null?Rw:ky),i}function mu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ml(i);if(i.$$typeof===D)return Qs(i)}throw Error(r(438,String(i)))}function wc(i){var l=null,d=Ot.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var m=Ot.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(v){return v.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=Sd(),Ot.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(i),m=0;m<i;m++)d[m]=F;return l.index++,d}function To(i,l){return typeof l=="function"?l(i):l}function Ph(i){var l=Ur();return gu(l,Vt,i)}function gu(i,l,d){var m=i.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=d;var v=i.baseQueue,_=m.pending;if(_!==null){if(v!==null){var U=v.next;v.next=_.next,_.next=U}l.baseQueue=v=_,m.pending=null}if(_=i.baseState,v===null)i.memoizedState=_;else{l=v.next;var X=U=null,fe=null,Re=l,Be=!1;do{var We=Re.lane&-536870913;if(We!==Re.lane?(kn&We)===We:(Vr&We)===We){var De=Re.revertLane;if(De===0)fe!==null&&(fe=fe.next={lane:0,revertLane:0,gesture:null,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),We===p&&(Be=!0);else if((Vr&De)===De){Re=Re.next,De===p&&(Be=!0);continue}else We={lane:0,revertLane:Re.revertLane,gesture:null,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null},fe===null?(X=fe=We,U=_):fe=fe.next=We,Ot.lanes|=De,vu|=De;We=Re.action,Ra&&d(_,We),_=Re.hasEagerState?Re.eagerState:d(_,We)}else De={lane:We,revertLane:Re.revertLane,gesture:Re.gesture,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null},fe===null?(X=fe=De,U=_):fe=fe.next=De,Ot.lanes|=We,vu|=We;Re=Re.next}while(Re!==null&&Re!==l);if(fe===null?U=_:fe.next=X,!Ws(_,i.memoizedState)&&(Ps=!0,Be&&(d=N,d!==null)))throw d;i.memoizedState=_,i.baseState=U,i.baseQueue=fe,m.lastRenderedState=_}return v===null&&(m.lanes=0),[i.memoizedState,m.dispatch]}function Lh(i){var l=Ur(),d=l.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=i;var m=d.dispatch,v=d.pending,_=l.memoizedState;if(v!==null){d.pending=null;var U=v=v.next;do _=i(_,U.action),U=U.next;while(U!==v);Ws(_,l.memoizedState)||(Ps=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),d.lastRenderedState=_}return[_,m]}function Dh(i,l,d){var m=Ot,v=Ur(),_=Tn;if(_){if(d===void 0)throw Error(r(407));d=d()}else d=l();var U=!Ws((Vt||v).memoizedState,d);if(U&&(v.memoizedState=d,Ps=!0),v=v.queue,Ey(xm.bind(null,m,v,i),[i]),v.getSnapshot!==l||U||Un!==null&&Un.memoizedState.tag&1){if(m.flags|=2048,jc(9,{destroy:void 0},pm.bind(null,m,v,d,l),null),_r===null)throw Error(r(349));_||(Vr&127)!==0||nl(m,l,d)}return d}function nl(i,l,d){i.flags|=16384,i={getSnapshot:l,value:d},l=Ot.updateQueue,l===null?(l=Sd(),Ot.updateQueue=l,l.stores=[i]):(d=l.stores,d===null?l.stores=[i]:d.push(i))}function pm(i,l,d,m){l.value=d,l.getSnapshot=m,bp(l)&&ym(i)}function xm(i,l,d){return d(function(){bp(l)&&ym(i)})}function bp(i){var l=i.getSnapshot;i=i.value;try{var d=l();return!Ws(i,d)}catch{return!0}}function ym(i){var l=Zo(i,2);l!==null&&Mi(l,i,2)}function Ol(i){var l=ks();if(typeof i=="function"){var d=i;if(i=d(),Ra){$t(!0);try{d()}finally{$t(!1)}}}return l.memoizedState=l.baseState=i,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:i},l}function vp(i,l,d,m){return i.baseState=d,gu(i,Vt,typeof m=="function"?m:To)}function wp(i,l,d,m,v){if(Sp(i))throw Error(r(485));if(i=l.action,i!==null){var _={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){_.listeners.push(U)}};ce.T!==null?d(!0):_.isTransition=!1,m(_),d=l.pending,d===null?(_.next=l.pending=_,Np(l,_)):(_.next=d.next,l.pending=d.next=_)}}function Np(i,l){var d=l.action,m=l.payload,v=i.state;if(l.isTransition){var _=ce.T,U={};ce.T=U;try{var X=d(v,m),fe=ce.S;fe!==null&&fe(U,X),bm(i,l,X)}catch(Re){Nc(i,l,Re)}finally{_!==null&&U.types!==null&&(_.types=U.types),ce.T=_}}else try{_=d(v,m),bm(i,l,_)}catch(Re){Nc(i,l,Re)}}function bm(i,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){jp(i,l,m)},function(m){return Nc(i,l,m)}):jp(i,l,d)}function jp(i,l,d){l.status="fulfilled",l.value=d,Mh(l),i.state=d,l=i.pending,l!==null&&(d=l.next,d===l?i.pending=null:(d=d.next,l.next=d,Np(i,d)))}function Nc(i,l,d){var m=i.pending;if(i.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=d,Mh(l),l=l.next;while(l!==m)}i.action=null}function Mh(i){i=i.listeners;for(var l=0;l<i.length;l++)(0,i[l])()}function Ed(i,l){return l}function Co(i,l){if(Tn){var d=_r.formState;if(d!==null){e:{var m=Ot;if(Tn){if(Nr){t:{for(var v=Nr,_=Fr;v.nodeType!==8;){if(!_){v=null;break t}if(v=Io(v.nextSibling),v===null){v=null;break t}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){Nr=Io(v.nextSibling),m=v.data==="F!";break e}}Cl(m)}m=!1}m&&(l=d[0])}}return d=ks(),d.memoizedState=d.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ed,lastRenderedState:l},d.queue=m,d=Tw.bind(null,Ot,m),m.dispatch=d,m=Ol(!1),_=Ry.bind(null,Ot,!1,m.queue),m=ks(),v={state:l,dispatch:null,action:i,pending:null},m.queue=v,d=wp.bind(null,Ot,v,_,d),v.dispatch=d,m.memoizedState=i,[l,d,!1]}function rl(i){var l=Ur();return sl(l,Vt,i)}function sl(i,l,d){if(l=gu(i,l,Ed)[0],i=Ph(To)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var m=Ml(l)}catch(U){throw U===xe?ie:U}else m=l;l=Ur();var v=l.queue,_=v.dispatch;return d!==l.memoizedState&&(Ot.flags|=2048,jc(9,{destroy:void 0},Oh.bind(null,v,d),null)),[m,_,i]}function Oh(i,l){i.action=l}function Fh(i){var l=Ur(),d=Vt;if(d!==null)return sl(l,d,i);Ur(),l=l.memoizedState,d=Ur();var m=d.queue.dispatch;return d.memoizedState=i,[l,m,!1]}function jc(i,l,d,m){return i={tag:i,create:d,deps:m,inst:l,next:null},l=Ot.updateQueue,l===null&&(l=Sd(),Ot.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=i.next=i:(m=d.next,d.next=i,i.next=m,l.lastEffect=i),i}function _p(){return Ur().memoizedState}function pu(i,l,d,m){var v=ks();Ot.flags|=i,v.memoizedState=jc(1|l,{destroy:void 0},d,m===void 0?null:m)}function xu(i,l,d,m){var v=Ur();m=m===void 0?null:m;var _=v.memoizedState.inst;Vt!==null&&m!==null&&hm(m,Vt.memoizedState.deps)?v.memoizedState=jc(l,_,d,m):(Ot.flags|=i,v.memoizedState=jc(1|l,_,d,m))}function mw(i,l){pu(8390656,8,i,l)}function Ey(i,l){xu(2048,8,i,l)}function TC(i){Ot.flags|=4;var l=Ot.updateQueue;if(l===null)l=Sd(),Ot.updateQueue=l,l.events=[i];else{var d=l.events;d===null?l.events=[i]:d.push(i)}}function gw(i){var l=Ur().memoizedState;return TC({ref:l,nextImpl:i}),function(){if((er&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function pw(i,l){return xu(4,2,i,l)}function xw(i,l){return xu(4,4,i,l)}function yw(i,l){if(typeof l=="function"){i=i();var d=l(i);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function bw(i,l,d){d=d!=null?d.concat([i]):null,xu(4,4,yw.bind(null,l,i),d)}function Ay(){}function vw(i,l){var d=Ur();l=l===void 0?null:l;var m=d.memoizedState;return l!==null&&hm(l,m[1])?m[0]:(d.memoizedState=[i,l],i)}function ww(i,l){var d=Ur();l=l===void 0?null:l;var m=d.memoizedState;if(l!==null&&hm(l,m[1]))return m[0];if(m=i(),Ra){$t(!0);try{i()}finally{$t(!1)}}return d.memoizedState=[m,l],m}function Ty(i,l,d){return d===void 0||(Vr&1073741824)!==0&&(kn&261930)===0?i.memoizedState=l:(i.memoizedState=d,i=N5(),Ot.lanes|=i,vu|=i,d)}function Nw(i,l,d,m){return Ws(d,l)?d:vn.current!==null?(i=Ty(i,d,m),Ws(i,l)||(Ps=!0),i):(Vr&42)===0||(Vr&1073741824)!==0&&(kn&261930)===0?(Ps=!0,i.memoizedState=d):(i=N5(),Ot.lanes|=i,vu|=i,l)}function jw(i,l,d,m,v){var _=pe.p;pe.p=_!==0&&8>_?_:8;var U=ce.T,X={};ce.T=X,Ry(i,!1,l,d);try{var fe=v(),Re=ce.S;if(Re!==null&&Re(X,fe),fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var Be=$(fe,m);vm(i,l,Be,no(i))}else vm(i,l,m,no(i))}catch(We){vm(i,l,{then:function(){},status:"rejected",reason:We},no())}finally{pe.p=_,U!==null&&X.types!==null&&(U.types=X.types),ce.T=U}}function CC(){}function Cy(i,l,d,m){if(i.tag!==5)throw Error(r(476));var v=_w(i).queue;jw(i,v,l,de,d===null?CC:function(){return Sw(i),d(m)})}function _w(i){var l=i.memoizedState;if(l!==null)return l;l={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:de},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:d},next:null},i.memoizedState=l,i=i.alternate,i!==null&&(i.memoizedState=l),l}function Sw(i){var l=_w(i);l.next===null&&(l=i.alternate.memoizedState),vm(i,l.next.queue,{},no())}function Iy(){return Qs(Om)}function Ew(){return Ur().memoizedState}function Aw(){return Ur().memoizedState}function IC(i){for(var l=i.return;l!==null;){switch(l.tag){case 24:case 3:var d=no();i=Wt(d);var m=gn(l,i,d);m!==null&&(Mi(m,l,d),Jn(m,l,d)),l={cache:fu()},i.payload=l;return}l=l.return}}function RC(i,l,d){var m=no();d={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Sp(i)?Cw(l,d):(d=bh(i,l,d,m),d!==null&&(Mi(d,i,m),Iw(d,l,m)))}function Tw(i,l,d){var m=no();vm(i,l,d,m)}function vm(i,l,d,m){var v={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(Sp(i))Cw(l,v);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var U=l.lastRenderedState,X=_(U,d);if(v.hasEagerState=!0,v.eagerState=X,Ws(X,U))return yd(i,l,v,0),_r===null&&xd(),!1}catch{}finally{}if(d=bh(i,l,v,m),d!==null)return Mi(d,i,m),Iw(d,l,m),!0}return!1}function Ry(i,l,d,m){if(m={lane:2,revertLane:cb(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Sp(i)){if(l)throw Error(r(479))}else l=bh(i,d,m,2),l!==null&&Mi(l,i,2)}function Sp(i){var l=i.alternate;return i===Ot||l!==null&&l===Ot}function Cw(i,l){Ri=qa=!0;var d=i.pending;d===null?l.next=l:(l.next=d.next,d.next=l),i.pending=l}function Iw(i,l,d){if((d&4194048)!==0){var m=l.lanes;m&=i.pendingLanes,d|=m,l.lanes=d,ra(i,d)}}var wm={readContext:Qs,use:mu,useCallback:yr,useContext:yr,useEffect:yr,useImperativeHandle:yr,useLayoutEffect:yr,useInsertionEffect:yr,useMemo:yr,useReducer:yr,useRef:yr,useState:yr,useDebugValue:yr,useDeferredValue:yr,useTransition:yr,useSyncExternalStore:yr,useId:yr,useHostTransitionStatus:yr,useFormState:yr,useActionState:yr,useOptimistic:yr,useMemoCache:yr,useCacheRefresh:yr};wm.useEffectEvent=yr;var Rw={readContext:Qs,use:mu,useCallback:function(i,l){return ks().memoizedState=[i,l===void 0?null:l],i},useContext:Qs,useEffect:mw,useImperativeHandle:function(i,l,d){d=d!=null?d.concat([i]):null,pu(4194308,4,yw.bind(null,l,i),d)},useLayoutEffect:function(i,l){return pu(4194308,4,i,l)},useInsertionEffect:function(i,l){pu(4,2,i,l)},useMemo:function(i,l){var d=ks();l=l===void 0?null:l;var m=i();if(Ra){$t(!0);try{i()}finally{$t(!1)}}return d.memoizedState=[m,l],m},useReducer:function(i,l,d){var m=ks();if(d!==void 0){var v=d(l);if(Ra){$t(!0);try{d(l)}finally{$t(!1)}}}else v=l;return m.memoizedState=m.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},m.queue=i,i=i.dispatch=RC.bind(null,Ot,i),[m.memoizedState,i]},useRef:function(i){var l=ks();return i={current:i},l.memoizedState=i},useState:function(i){i=Ol(i);var l=i.queue,d=Tw.bind(null,Ot,l);return l.dispatch=d,[i.memoizedState,d]},useDebugValue:Ay,useDeferredValue:function(i,l){var d=ks();return Ty(d,i,l)},useTransition:function(){var i=Ol(!1);return i=jw.bind(null,Ot,i.queue,!0,!1),ks().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,l,d){var m=Ot,v=ks();if(Tn){if(d===void 0)throw Error(r(407));d=d()}else{if(d=l(),_r===null)throw Error(r(349));(kn&127)!==0||nl(m,l,d)}v.memoizedState=d;var _={value:d,getSnapshot:l};return v.queue=_,mw(xm.bind(null,m,_,i),[i]),m.flags|=2048,jc(9,{destroy:void 0},pm.bind(null,m,_,d,l),null),d},useId:function(){var i=ks(),l=_r.identifierPrefix;if(Tn){var d=Ci,m=Ti;d=(m&~(1<<32-an(m)-1)).toString(32)+d,l="_"+l+"R_"+d,d=os++,0<d&&(l+="H"+d.toString(32)),l+="_"}else d=Ih++,l="_"+l+"r_"+d.toString(32)+"_";return i.memoizedState=l},useHostTransitionStatus:Iy,useFormState:Co,useActionState:Co,useOptimistic:function(i){var l=ks();l.memoizedState=l.baseState=i;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=Ry.bind(null,Ot,!0,d),d.dispatch=l,[i,l]},useMemoCache:wc,useCacheRefresh:function(){return ks().memoizedState=IC.bind(null,Ot)},useEffectEvent:function(i){var l=ks(),d={impl:i};return l.memoizedState=d,function(){if((er&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}},ky={readContext:Qs,use:mu,useCallback:vw,useContext:Qs,useEffect:Ey,useImperativeHandle:bw,useInsertionEffect:pw,useLayoutEffect:xw,useMemo:ww,useReducer:Ph,useRef:_p,useState:function(){return Ph(To)},useDebugValue:Ay,useDeferredValue:function(i,l){var d=Ur();return Nw(d,Vt.memoizedState,i,l)},useTransition:function(){var i=Ph(To)[0],l=Ur().memoizedState;return[typeof i=="boolean"?i:Ml(i),l]},useSyncExternalStore:Dh,useId:Ew,useHostTransitionStatus:Iy,useFormState:rl,useActionState:rl,useOptimistic:function(i,l){var d=Ur();return vp(d,Vt,i,l)},useMemoCache:wc,useCacheRefresh:Aw};ky.useEffectEvent=gw;var kw={readContext:Qs,use:mu,useCallback:vw,useContext:Qs,useEffect:Ey,useImperativeHandle:bw,useInsertionEffect:pw,useLayoutEffect:xw,useMemo:ww,useReducer:Lh,useRef:_p,useState:function(){return Lh(To)},useDebugValue:Ay,useDeferredValue:function(i,l){var d=Ur();return Vt===null?Ty(d,i,l):Nw(d,Vt.memoizedState,i,l)},useTransition:function(){var i=Lh(To)[0],l=Ur().memoizedState;return[typeof i=="boolean"?i:Ml(i),l]},useSyncExternalStore:Dh,useId:Ew,useHostTransitionStatus:Iy,useFormState:Fh,useActionState:Fh,useOptimistic:function(i,l){var d=Ur();return Vt!==null?vp(d,Vt,i,l):(d.baseState=i,[i,d.queue.dispatch])},useMemoCache:wc,useCacheRefresh:Aw};kw.useEffectEvent=gw;function Py(i,l,d,m){l=i.memoizedState,d=d(m,l),d=d==null?l:y({},l,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var Ly={enqueueSetState:function(i,l,d){i=i._reactInternals;var m=no(),v=Wt(m);v.payload=l,d!=null&&(v.callback=d),l=gn(i,v,m),l!==null&&(Mi(l,i,m),Jn(l,i,m))},enqueueReplaceState:function(i,l,d){i=i._reactInternals;var m=no(),v=Wt(m);v.tag=1,v.payload=l,d!=null&&(v.callback=d),l=gn(i,v,m),l!==null&&(Mi(l,i,m),Jn(l,i,m))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var d=no(),m=Wt(d);m.tag=2,l!=null&&(m.callback=l),l=gn(i,m,d),l!==null&&(Mi(l,i,d),Jn(l,i,d))}};function Pw(i,l,d,m,v,_,U){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,_,U):l.prototype&&l.prototype.isPureReactComponent?!Yo(d,m)||!Yo(v,_):!0}function Lw(i,l,d,m){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,m),l.state!==i&&Ly.enqueueReplaceState(l,l.state,null)}function Ad(i,l){var d=l;if("ref"in l){d={};for(var m in l)m!=="ref"&&(d[m]=l[m])}if(i=i.defaultProps){d===l&&(d=y({},d));for(var v in i)d[v]===void 0&&(d[v]=i[v])}return d}function Dw(i){pd(i)}function Mw(i){console.error(i)}function Ow(i){pd(i)}function Ep(i,l){try{var d=i.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function Fw(i,l,d){try{var m=i.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Dy(i,l,d){return d=Wt(d),d.tag=3,d.payload={element:null},d.callback=function(){Ep(i,l)},d}function Vw(i){return i=Wt(i),i.tag=3,i}function Uw(i,l,d,m){var v=d.type.getDerivedStateFromError;if(typeof v=="function"){var _=m.value;i.payload=function(){return v(_)},i.callback=function(){Fw(l,d,m)}}var U=d.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(i.callback=function(){Fw(l,d,m),typeof v!="function"&&(wu===null?wu=new Set([this]):wu.add(this));var X=m.stack;this.componentDidCatch(m.value,{componentStack:X!==null?X:""})})}function kC(i,l,d,m,v){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=d.alternate,l!==null&&kl(l,d,v,!0),d=Rr.current,d!==null){switch(d.tag){case 31:case 13:return Vn===null?Fp():d.alternate===null&&ls===0&&(ls=3),d.flags&=-257,d.flags|=65536,d.lanes=v,m===ve?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([m]):l.add(m),ib(i,m,v)),!1;case 22:return d.flags|=65536,m===ve?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([m]):d.add(m)),ib(i,m,v)),!1}throw Error(r(435,d.tag))}return ib(i,m,v),Fp(),!1}if(Tn)return l=Rr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=v,m!==Zi&&(i=Error(r(422),{cause:m}),du(Si(i,d)))):(m!==Zi&&(l=Error(r(423),{cause:m}),du(Si(l,d))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,m=Si(m,d),v=Dy(i.stateNode,m,v),xs(i,v),ls!==4&&(ls=2)),!1;var _=Error(r(520),{cause:m});if(_=Si(_,d),Cm===null?Cm=[_]:Cm.push(_),ls!==4&&(ls=2),l===null)return!0;m=Si(m,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,i=v&-v,d.lanes|=i,i=Dy(d.stateNode,m,i),xs(d,i),!1;case 1:if(l=d.type,_=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(wu===null||!wu.has(_))))return d.flags|=65536,v&=-v,d.lanes|=v,v=Vw(v),Uw(v,i,d,m),xs(d,v),!1}d=d.return}while(d!==null);return!1}var My=Error(r(461)),Ps=!1;function ka(i,l,d,m){l.child=i===null?hn(l,null,d,m):jr(l,i.child,d,m)}function Bw(i,l,d,m,v){d=d.render;var _=l.ref;if("ref"in m){var U={};for(var X in m)X!=="ref"&&(U[X]=m[X])}else U=m;return Pl(l),m=fm(i,l,d,U,_,v),X=mm(),i!==null&&!Ps?(gm(i,l,v),_c(i,l,v)):(Tn&&X&&cm(l),l.flags|=1,ka(i,l,m,v),l.child)}function zw(i,l,d,m,v){if(i===null){var _=d.type;return typeof _=="function"&&!wh(_)&&_.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=_,qw(i,l,_,m,v)):(i=lu(d.type,null,m,l,l.mode,v),i.ref=l.ref,i.return=l,l.child=i)}if(_=i.child,!Hy(i,v)){var U=_.memoizedProps;if(d=d.compare,d=d!==null?d:Yo,d(U,m)&&i.ref===l.ref)return _c(i,l,v)}return l.flags|=1,i=_i(_,m),i.ref=l.ref,i.return=l,l.child=i}function qw(i,l,d,m,v){if(i!==null){var _=i.memoizedProps;if(Yo(_,m)&&i.ref===l.ref)if(Ps=!1,l.pendingProps=m=_,Hy(i,v))(i.flags&131072)!==0&&(Ps=!0);else return l.lanes=i.lanes,_c(i,l,v)}return Oy(i,l,d,m,v)}function Hw(i,l,d,m){var v=m.children,_=i!==null?i.memoizedState:null;if(i===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((l.flags&128)!==0){if(_=_!==null?_.baseLanes|d:d,i!==null){for(m=l.child=i.child,v=0;m!==null;)v=v|m.lanes|m.childLanes,m=m.sibling;m=v&~_}else m=0,l.child=null;return Gw(i,l,_,d,m)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},i!==null&&ee(l,_!==null?_.cachePool:null),_!==null?Ir(l,_):Hn(),as(l);else return m=l.lanes=536870912,Gw(i,l,_!==null?_.baseLanes|d:d,d,m)}else _!==null?(ee(l,_.cachePool),Ir(l,_),is(),l.memoizedState=null):(i!==null&&ee(l,null),Hn(),is());return ka(i,l,v,d),l.child}function Nm(i,l){return i!==null&&i.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function Gw(i,l,d,m,v){var _=J();return _=_===null?null:{parent:Yr._currentValue,pool:_},l.memoizedState={baseLanes:d,cachePool:_},i!==null&&ee(l,null),Hn(),as(l),i!==null&&kl(i,l,m,!0),l.childLanes=v,null}function Ap(i,l){return l=Cp({mode:l.mode,children:l.children},i.mode),l.ref=i.ref,i.child=l,l.return=i,l}function $w(i,l,d){return jr(l,i.child,null,d),i=Ap(l,l.pendingProps),i.flags|=2,ir(l),l.memoizedState=null,i}function PC(i,l,d){var m=l.pendingProps,v=(l.flags&128)!==0;if(l.flags&=-129,i===null){if(Tn){if(m.mode==="hidden")return i=Ap(l,m),l.lanes=536870912,Nm(null,i);if(Zn(l),(i=Nr)?(i=sN(i,Fr),i=i!==null&&i.data==="&"?i:null,i!==null&&(l.memoizedState={dehydrated:i,treeContext:Tl!==null?{id:Ti,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},d=Nh(i),d.return=l,l.child=d,Ys=l,Nr=null)):i=null,i===null)throw Cl(l);return l.lanes=536870912,null}return Ap(l,m)}var _=i.memoizedState;if(_!==null){var U=_.dehydrated;if(Zn(l),v)if(l.flags&256)l.flags&=-257,l=$w(i,l,d);else if(l.memoizedState!==null)l.child=i.child,l.flags|=128,l=null;else throw Error(r(558));else if(Ps||kl(i,l,d,!1),v=(d&i.childLanes)!==0,Ps||v){if(m=_r,m!==null&&(U=sa(m,d),U!==0&&U!==_.retryLane))throw _.retryLane=U,Zo(i,U),Mi(m,i,U),My;Fp(),l=$w(i,l,d)}else i=_.treeContext,Nr=Io(U.nextSibling),Ys=l,Tn=!0,Ia=null,Fr=!1,i!==null&&xp(l,i),l=Ap(l,m),l.flags|=4096;return l}return i=_i(i.child,{mode:m.mode,children:m.children}),i.ref=l.ref,l.child=i,i.return=l,i}function Tp(i,l){var d=l.ref;if(d===null)i!==null&&i.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(i===null||i.ref!==d)&&(l.flags|=4194816)}}function Oy(i,l,d,m,v){return Pl(l),d=fm(i,l,d,m,void 0,v),m=mm(),i!==null&&!Ps?(gm(i,l,v),_c(i,l,v)):(Tn&&m&&cm(l),l.flags|=1,ka(i,l,d,v),l.child)}function Ww(i,l,d,m,v,_){return Pl(l),l.updateQueue=null,d=tl(l,m,d,v),Rh(i),m=mm(),i!==null&&!Ps?(gm(i,l,_),_c(i,l,_)):(Tn&&m&&cm(l),l.flags|=1,ka(i,l,d,_),l.child)}function Kw(i,l,d,m,v){if(Pl(l),l.stateNode===null){var _=Ks,U=d.contextType;typeof U=="object"&&U!==null&&(_=Qs(U)),_=new d(m,_),l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Ly,l.stateNode=_,_._reactInternals=l,_=l.stateNode,_.props=m,_.state=l.memoizedState,_.refs={},rt(l),U=d.contextType,_.context=typeof U=="object"&&U!==null?Qs(U):Ks,_.state=l.memoizedState,U=d.getDerivedStateFromProps,typeof U=="function"&&(Py(l,d,U,m),_.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(U=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),U!==_.state&&Ly.enqueueReplaceState(_,_.state,null),rs(l,m,_,v),xr(),_.state=l.memoizedState),typeof _.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(i===null){_=l.stateNode;var X=l.memoizedProps,fe=Ad(d,X);_.props=fe;var Re=_.context,Be=d.contextType;U=Ks,typeof Be=="object"&&Be!==null&&(U=Qs(Be));var We=d.getDerivedStateFromProps;Be=typeof We=="function"||typeof _.getSnapshotBeforeUpdate=="function",X=l.pendingProps!==X,Be||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(X||Re!==U)&&Lw(l,_,m,U),dt=!1;var De=l.memoizedState;_.state=De,rs(l,m,_,v),xr(),Re=l.memoizedState,X||De!==Re||dt?(typeof We=="function"&&(Py(l,d,We,m),Re=l.memoizedState),(fe=dt||Pw(l,d,fe,m,De,Re,U))?(Be||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(l.flags|=4194308)):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=Re),_.props=m,_.state=Re,_.context=U,m=fe):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{_=l.stateNode,Cr(i,l),U=l.memoizedProps,Be=Ad(d,U),_.props=Be,We=l.pendingProps,De=_.context,Re=d.contextType,fe=Ks,typeof Re=="object"&&Re!==null&&(fe=Qs(Re)),X=d.getDerivedStateFromProps,(Re=typeof X=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(U!==We||De!==fe)&&Lw(l,_,m,fe),dt=!1,De=l.memoizedState,_.state=De,rs(l,m,_,v),xr();var Me=l.memoizedState;U!==We||De!==Me||dt||i!==null&&i.dependencies!==null&&Ah(i.dependencies)?(typeof X=="function"&&(Py(l,d,X,m),Me=l.memoizedState),(Be=dt||Pw(l,d,Be,m,De,Me,fe)||i!==null&&i.dependencies!==null&&Ah(i.dependencies))?(Re||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(m,Me,fe),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(m,Me,fe)),typeof _.componentDidUpdate=="function"&&(l.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof _.componentDidUpdate!="function"||U===i.memoizedProps&&De===i.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||U===i.memoizedProps&&De===i.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=Me),_.props=m,_.state=Me,_.context=fe,m=Be):(typeof _.componentDidUpdate!="function"||U===i.memoizedProps&&De===i.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||U===i.memoizedProps&&De===i.memoizedState||(l.flags|=1024),m=!1)}return _=m,Tp(i,l),m=(l.flags&128)!==0,_||m?(_=l.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:_.render(),l.flags|=1,i!==null&&m?(l.child=jr(l,i.child,null,v),l.child=jr(l,null,d,v)):ka(i,l,d,v),l.memoizedState=_.state,i=l.child):i=_c(i,l,v),i}function Yw(i,l,d,m){return bc(),l.flags|=256,ka(i,l,d,m),l.child}var Fy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vy(i){return{baseLanes:i,cachePool:le()}}function Uy(i,l,d){return i=i!==null?i.childLanes&~d:0,l&&(i|=to),i}function Xw(i,l,d){var m=l.pendingProps,v=!1,_=(l.flags&128)!==0,U;if((U=_)||(U=i!==null&&i.memoizedState===null?!1:(On.current&2)!==0),U&&(v=!0,l.flags&=-129),U=(l.flags&32)!==0,l.flags&=-33,i===null){if(Tn){if(v?Xr(l):is(),(i=Nr)?(i=sN(i,Fr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(l.memoizedState={dehydrated:i,treeContext:Tl!==null?{id:Ti,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},d=Nh(i),d.return=l,l.child=d,Ys=l,Nr=null)):i=null,i===null)throw Cl(l);return Nb(i)?l.lanes=32:l.lanes=536870912,null}var X=m.children;return m=m.fallback,v?(is(),v=l.mode,X=Cp({mode:"hidden",children:X},v),m=Al(m,v,d,null),X.return=l,m.return=l,X.sibling=m,l.child=X,m=l.child,m.memoizedState=Vy(d),m.childLanes=Uy(i,U,d),l.memoizedState=Fy,Nm(null,m)):(Xr(l),By(l,X))}var fe=i.memoizedState;if(fe!==null&&(X=fe.dehydrated,X!==null)){if(_)l.flags&256?(Xr(l),l.flags&=-257,l=zy(i,l,d)):l.memoizedState!==null?(is(),l.child=i.child,l.flags|=128,l=null):(is(),X=m.fallback,v=l.mode,m=Cp({mode:"visible",children:m.children},v),X=Al(X,v,d,null),X.flags|=2,m.return=l,X.return=l,m.sibling=X,l.child=m,jr(l,i.child,null,d),m=l.child,m.memoizedState=Vy(d),m.childLanes=Uy(i,U,d),l.memoizedState=Fy,l=Nm(null,m));else if(Xr(l),Nb(X)){if(U=X.nextSibling&&X.nextSibling.dataset,U)var Re=U.dgst;U=Re,m=Error(r(419)),m.stack="",m.digest=U,du({value:m,source:null,stack:null}),l=zy(i,l,d)}else if(Ps||kl(i,l,d,!1),U=(d&i.childLanes)!==0,Ps||U){if(U=_r,U!==null&&(m=sa(U,d),m!==0&&m!==fe.retryLane))throw fe.retryLane=m,Zo(i,m),Mi(U,i,m),My;wb(X)||Fp(),l=zy(i,l,d)}else wb(X)?(l.flags|=192,l.child=i.child,l=null):(i=fe.treeContext,Nr=Io(X.nextSibling),Ys=l,Tn=!0,Ia=null,Fr=!1,i!==null&&xp(l,i),l=By(l,m.children),l.flags|=4096);return l}return v?(is(),X=m.fallback,v=l.mode,fe=i.child,Re=fe.sibling,m=_i(fe,{mode:"hidden",children:m.children}),m.subtreeFlags=fe.subtreeFlags&65011712,Re!==null?X=_i(Re,X):(X=Al(X,v,d,null),X.flags|=2),X.return=l,m.return=l,m.sibling=X,l.child=m,Nm(null,m),m=l.child,X=i.child.memoizedState,X===null?X=Vy(d):(v=X.cachePool,v!==null?(fe=Yr._currentValue,v=v.parent!==fe?{parent:fe,pool:fe}:v):v=le(),X={baseLanes:X.baseLanes|d,cachePool:v}),m.memoizedState=X,m.childLanes=Uy(i,U,d),l.memoizedState=Fy,Nm(i.child,m)):(Xr(l),d=i.child,i=d.sibling,d=_i(d,{mode:"visible",children:m.children}),d.return=l,d.sibling=null,i!==null&&(U=l.deletions,U===null?(l.deletions=[i],l.flags|=16):U.push(i)),l.child=d,l.memoizedState=null,d)}function By(i,l){return l=Cp({mode:"visible",children:l},i.mode),l.return=i,i.child=l}function Cp(i,l){return i=ha(22,i,null,l),i.lanes=0,i}function zy(i,l,d){return jr(l,i.child,null,d),i=By(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function Qw(i,l,d){i.lanes|=l;var m=i.alternate;m!==null&&(m.lanes|=l),hu(i.return,l,d)}function qy(i,l,d,m,v,_){var U=i.memoizedState;U===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:v,treeForkCount:_}:(U.isBackwards=l,U.rendering=null,U.renderingStartTime=0,U.last=m,U.tail=d,U.tailMode=v,U.treeForkCount=_)}function Jw(i,l,d){var m=l.pendingProps,v=m.revealOrder,_=m.tail;m=m.children;var U=On.current,X=(U&2)!==0;if(X?(U=U&1|2,l.flags|=128):U&=1,Q(On,U),ka(i,l,m,d),m=Tn?Nd:0,!X&&i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Qw(i,d,l);else if(i.tag===19)Qw(i,d,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(v){case"forwards":for(d=l.child,v=null;d!==null;)i=d.alternate,i!==null&&ma(i)===null&&(v=d),d=d.sibling;d=v,d===null?(v=l.child,l.child=null):(v=d.sibling,d.sibling=null),qy(l,!1,v,d,_,m);break;case"backwards":case"unstable_legacy-backwards":for(d=null,v=l.child,l.child=null;v!==null;){if(i=v.alternate,i!==null&&ma(i)===null){l.child=v;break}i=v.sibling,v.sibling=d,d=v,v=i}qy(l,!0,d,null,_,m);break;case"together":qy(l,!1,null,null,void 0,m);break;default:l.memoizedState=null}return l.child}function _c(i,l,d){if(i!==null&&(l.dependencies=i.dependencies),vu|=l.lanes,(d&l.childLanes)===0)if(i!==null){if(kl(i,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(i!==null&&l.child!==i.child)throw Error(r(153));if(l.child!==null){for(i=l.child,d=_i(i,i.pendingProps),l.child=d,d.return=l;i.sibling!==null;)i=i.sibling,d=d.sibling=_i(i,i.pendingProps),d.return=l;d.sibling=null}return l.child}function Hy(i,l){return(i.lanes&l)!==0?!0:(i=i.dependencies,!!(i!==null&&Ah(i)))}function LC(i,l,d){switch(l.tag){case 3:Le(l,l.stateNode.containerInfo),Rl(l,Yr,i.memoizedState.cache),bc();break;case 27:case 5:qe(l);break;case 4:Le(l,l.stateNode.containerInfo);break;case 10:Rl(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Zn(l),null;break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(Xr(l),l.flags|=128,null):(d&l.child.childLanes)!==0?Xw(i,l,d):(Xr(l),i=_c(i,l,d),i!==null?i.sibling:null);Xr(l);break;case 19:var v=(i.flags&128)!==0;if(m=(d&l.childLanes)!==0,m||(kl(i,l,d,!1),m=(d&l.childLanes)!==0),v){if(m)return Jw(i,l,d);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Q(On,On.current),m)break;return null;case 22:return l.lanes=0,Hw(i,l,d,l.pendingProps);case 24:Rl(l,Yr,i.memoizedState.cache)}return _c(i,l,d)}function Zw(i,l,d){if(i!==null)if(i.memoizedProps!==l.pendingProps)Ps=!0;else{if(!Hy(i,d)&&(l.flags&128)===0)return Ps=!1,LC(i,l,d);Ps=(i.flags&131072)!==0}else Ps=!1,Tn&&(l.flags&1048576)!==0&&pp(l,Nd,l.index);switch(l.lanes=0,l.tag){case 16:e:{var m=l.pendingProps;if(i=Ae(l.elementType),l.type=i,typeof i=="function")wh(i)?(m=Ad(i,m),l.tag=1,l=Kw(null,l,i,m,d)):(l.tag=0,l=Oy(null,l,i,m,d));else{if(i!=null){var v=i.$$typeof;if(v===O){l.tag=11,l=Bw(null,l,i,m,d);break e}else if(v===H){l.tag=14,l=zw(null,l,i,m,d);break e}}throw l=ue(i)||i,Error(r(306,l,""))}}return l;case 0:return Oy(i,l,l.type,l.pendingProps,d);case 1:return m=l.type,v=Ad(m,l.pendingProps),Kw(i,l,m,v,d);case 3:e:{if(Le(l,l.stateNode.containerInfo),i===null)throw Error(r(387));m=l.pendingProps;var _=l.memoizedState;v=_.element,Cr(i,l),rs(l,m,null,d);var U=l.memoizedState;if(m=U.cache,Rl(l,Yr,m),m!==_.cache&&vc(l,[Yr],d,!0),xr(),m=U.element,_.isDehydrated)if(_={element:m,isDehydrated:!1,cache:U.cache},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&256){l=Yw(i,l,m,d);break e}else if(m!==v){v=Si(Error(r(424)),l),du(v),l=Yw(i,l,m,d);break e}else{switch(i=l.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Nr=Io(i.firstChild),Ys=l,Tn=!0,Ia=null,Fr=!0,d=hn(l,null,m,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(bc(),m===v){l=_c(i,l,d);break e}ka(i,l,m,d)}l=l.child}return l;case 26:return Tp(i,l),i===null?(d=uN(l.type,null,l.pendingProps,null))?l.memoizedState=d:Tn||(d=l.type,i=l.pendingProps,m=Gp(me.current).createElement(d),m[$n]=l,m[sr]=i,Pa(m,d,i),Tr(m),l.stateNode=m):l.memoizedState=uN(l.type,i.memoizedProps,l.pendingProps,i.memoizedState),null;case 27:return qe(l),i===null&&Tn&&(m=l.stateNode=oN(l.type,l.pendingProps,me.current),Ys=l,Fr=!0,v=Nr,Su(l.type)?(jb=v,Nr=Io(m.firstChild)):Nr=v),ka(i,l,l.pendingProps.children,d),Tp(i,l),i===null&&(l.flags|=4194304),l.child;case 5:return i===null&&Tn&&((v=m=Nr)&&(m=uI(m,l.type,l.pendingProps,Fr),m!==null?(l.stateNode=m,Ys=l,Nr=Io(m.firstChild),Fr=!1,v=!0):v=!1),v||Cl(l)),qe(l),v=l.type,_=l.pendingProps,U=i!==null?i.memoizedProps:null,m=_.children,yb(v,_)?m=null:U!==null&&yb(v,U)&&(l.flags|=32),l.memoizedState!==null&&(v=fm(i,l,Sy,null,null,d),Om._currentValue=v),Tp(i,l),ka(i,l,m,d),l.child;case 6:return i===null&&Tn&&((i=d=Nr)&&(d=dI(d,l.pendingProps,Fr),d!==null?(l.stateNode=d,Ys=l,Nr=null,i=!0):i=!1),i||Cl(l)),null;case 13:return Xw(i,l,d);case 4:return Le(l,l.stateNode.containerInfo),m=l.pendingProps,i===null?l.child=jr(l,null,m,d):ka(i,l,m,d),l.child;case 11:return Bw(i,l,l.type,l.pendingProps,d);case 7:return ka(i,l,l.pendingProps,d),l.child;case 8:return ka(i,l,l.pendingProps.children,d),l.child;case 12:return ka(i,l,l.pendingProps.children,d),l.child;case 10:return m=l.pendingProps,Rl(l,l.type,m.value),ka(i,l,m.children,d),l.child;case 9:return v=l.type._context,m=l.pendingProps.children,Pl(l),v=Qs(v),m=m(v),l.flags|=1,ka(i,l,m,d),l.child;case 14:return zw(i,l,l.type,l.pendingProps,d);case 15:return qw(i,l,l.type,l.pendingProps,d);case 19:return Jw(i,l,d);case 31:return PC(i,l,d);case 22:return Hw(i,l,d,l.pendingProps);case 24:return Pl(l),m=Qs(Yr),i===null?(v=J(),v===null&&(v=_r,_=fu(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=d),v=_),l.memoizedState={parent:m,cache:v},rt(l),Rl(l,Yr,v)):((i.lanes&d)!==0&&(Cr(i,l),rs(l,null,null,d),xr()),v=i.memoizedState,_=l.memoizedState,v.parent!==m?(v={parent:m,cache:m},l.memoizedState=v,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=v),Rl(l,Yr,m)):(m=_.cache,Rl(l,Yr,m),m!==v.cache&&vc(l,[Yr],d,!0))),ka(i,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Sc(i){i.flags|=4}function Gy(i,l,d,m,v){if((l=(i.mode&32)!==0)&&(l=!1),l){if(i.flags|=16777216,(v&335544128)===v)if(i.stateNode.complete)i.flags|=8192;else if(E5())i.flags|=8192;else throw Oe=ve,Ce}else i.flags&=-16777217}function e5(i,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!gN(l))if(E5())i.flags|=8192;else throw Oe=ve,Ce}function Ip(i,l){l!==null&&(i.flags|=4),i.flags&16384&&(l=i.tag!==22?pi():536870912,i.lanes|=l,zh|=l)}function jm(i,l){if(!Tn)switch(i.tailMode){case"hidden":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function kr(i){var l=i.alternate!==null&&i.alternate.child===i.child,d=0,m=0;if(l)for(var v=i.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags&65011712,m|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=m,i.childLanes=d,l}function DC(i,l,d){var m=l.pendingProps;switch(Sh(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kr(l),null;case 1:return kr(l),null;case 3:return d=l.stateNode,m=null,i!==null&&(m=i.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),Ii(Yr),ke(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(Xs(l)?Sc(l):i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,dm())),kr(l),null;case 26:var v=l.type,_=l.memoizedState;return i===null?(Sc(l),_!==null?(kr(l),e5(l,_)):(kr(l),Gy(l,v,null,m,d))):_?_!==i.memoizedState?(Sc(l),kr(l),e5(l,_)):(kr(l),l.flags&=-16777217):(i=i.memoizedProps,i!==m&&Sc(l),kr(l),Gy(l,v,i,m,d)),null;case 27:if(Je(l),d=me.current,v=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==m&&Sc(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return kr(l),null}i=re.current,Xs(l)?um(l):(i=oN(v,m,d),l.stateNode=i,Sc(l))}return kr(l),null;case 5:if(Je(l),v=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==m&&Sc(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return kr(l),null}if(_=re.current,Xs(l))um(l);else{var U=Gp(me.current);switch(_){case 1:_=U.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:_=U.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":_=U.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":_=U.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":_=U.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof m.is=="string"?U.createElement("select",{is:m.is}):U.createElement("select"),m.multiple?_.multiple=!0:m.size&&(_.size=m.size);break;default:_=typeof m.is=="string"?U.createElement(v,{is:m.is}):U.createElement(v)}}_[$n]=l,_[sr]=m;e:for(U=l.child;U!==null;){if(U.tag===5||U.tag===6)_.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===l)break e;for(;U.sibling===null;){if(U.return===null||U.return===l)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}l.stateNode=_;e:switch(Pa(_,v,m),v){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Sc(l)}}return kr(l),Gy(l,l.type,i===null?null:i.memoizedProps,l.pendingProps,d),null;case 6:if(i&&l.stateNode!=null)i.memoizedProps!==m&&Sc(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(r(166));if(i=me.current,Xs(l)){if(i=l.stateNode,d=l.memoizedProps,m=null,v=Ys,v!==null)switch(v.tag){case 27:case 5:m=v.memoizedProps}i[$n]=l,i=!!(i.nodeValue===d||m!==null&&m.suppressHydrationWarning===!0||X5(i.nodeValue,d)),i||Cl(l,!0)}else i=Gp(i).createTextNode(m),i[$n]=l,l.stateNode=i}return kr(l),null;case 31:if(d=l.memoizedState,i===null||i.memoizedState!==null){if(m=Xs(l),d!==null){if(i===null){if(!m)throw Error(r(318));if(i=l.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[$n]=l}else bc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;kr(l),i=!1}else d=dm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=d),i=!0;if(!i)return l.flags&256?(ir(l),l):(ir(l),null);if((l.flags&128)!==0)throw Error(r(558))}return kr(l),null;case 13:if(m=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=Xs(l),m!==null&&m.dehydrated!==null){if(i===null){if(!v)throw Error(r(318));if(v=l.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[$n]=l}else bc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;kr(l),v=!1}else v=dm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return l.flags&256?(ir(l),l):(ir(l),null)}return ir(l),(l.flags&128)!==0?(l.lanes=d,l):(d=m!==null,i=i!==null&&i.memoizedState!==null,d&&(m=l.child,v=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(v=m.alternate.memoizedState.cachePool.pool),_=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(_=m.memoizedState.cachePool.pool),_!==v&&(m.flags|=2048)),d!==i&&d&&(l.child.flags|=8192),Ip(l,l.updateQueue),kr(l),null);case 4:return ke(),i===null&&fb(l.stateNode.containerInfo),kr(l),null;case 10:return Ii(l.type),kr(l),null;case 19:if(q(On),m=l.memoizedState,m===null)return kr(l),null;if(v=(l.flags&128)!==0,_=m.rendering,_===null)if(v)jm(m,!1);else{if(ls!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(_=ma(i),_!==null){for(l.flags|=128,jm(m,!1),i=_.updateQueue,l.updateQueue=i,Ip(l,i),l.subtreeFlags=0,i=d,d=l.child;d!==null;)vd(d,i),d=d.sibling;return Q(On,On.current&1|2),Tn&&ci(l,m.treeForkCount),l.child}i=i.sibling}m.tail!==null&&sn()>Dp&&(l.flags|=128,v=!0,jm(m,!1),l.lanes=4194304)}else{if(!v)if(i=ma(_),i!==null){if(l.flags|=128,v=!0,i=i.updateQueue,l.updateQueue=i,Ip(l,i),jm(m,!0),m.tail===null&&m.tailMode==="hidden"&&!_.alternate&&!Tn)return kr(l),null}else 2*sn()-m.renderingStartTime>Dp&&d!==536870912&&(l.flags|=128,v=!0,jm(m,!1),l.lanes=4194304);m.isBackwards?(_.sibling=l.child,l.child=_):(i=m.last,i!==null?i.sibling=_:l.child=_,m.last=_)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=sn(),i.sibling=null,d=On.current,Q(On,v?d&1|2:d&1),Tn&&ci(l,m.treeForkCount),i):(kr(l),null);case 22:case 23:return ir(l),ys(),m=l.memoizedState!==null,i!==null?i.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(d&536870912)!==0&&(l.flags&128)===0&&(kr(l),l.subtreeFlags&6&&(l.flags|=8192)):kr(l),d=l.updateQueue,d!==null&&Ip(l,d.retryQueue),d=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048),i!==null&&q(Y),null;case 24:return d=null,i!==null&&(d=i.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Ii(Yr),kr(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function MC(i,l){switch(Sh(l),l.tag){case 1:return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return Ii(Yr),ke(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 26:case 27:case 5:return Je(l),null;case 31:if(l.memoizedState!==null){if(ir(l),l.alternate===null)throw Error(r(340));bc()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 13:if(ir(l),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(r(340));bc()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return q(On),null;case 4:return ke(),null;case 10:return Ii(l.type),null;case 22:case 23:return ir(l),ys(),i!==null&&q(Y),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 24:return Ii(Yr),null;case 25:return null;default:return null}}function t5(i,l){switch(Sh(l),l.tag){case 3:Ii(Yr),ke();break;case 26:case 27:case 5:Je(l);break;case 4:ke();break;case 31:l.memoizedState!==null&&ir(l);break;case 13:ir(l);break;case 19:q(On);break;case 10:Ii(l.type);break;case 22:case 23:ir(l),ys(),i!==null&&q(Y);break;case 24:Ii(Yr)}}function _m(i,l){try{var d=l.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var v=m.next;d=v;do{if((d.tag&i)===i){m=void 0;var _=d.create,U=d.inst;m=_(),U.destroy=m}d=d.next}while(d!==v)}}catch(X){lr(l,l.return,X)}}function yu(i,l,d){try{var m=l.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var _=v.next;m=_;do{if((m.tag&i)===i){var U=m.inst,X=U.destroy;if(X!==void 0){U.destroy=void 0,v=l;var fe=d,Re=X;try{Re()}catch(Be){lr(v,fe,Be)}}}m=m.next}while(m!==_)}}catch(Be){lr(l,l.return,Be)}}function n5(i){var l=i.updateQueue;if(l!==null){var d=i.stateNode;try{ss(l,d)}catch(m){lr(i,i.return,m)}}}function r5(i,l,d){d.props=Ad(i.type,i.memoizedProps),d.state=i.memoizedState;try{d.componentWillUnmount()}catch(m){lr(i,l,m)}}function Sm(i,l){try{var d=i.ref;if(d!==null){switch(i.tag){case 26:case 27:case 5:var m=i.stateNode;break;case 30:m=i.stateNode;break;default:m=i.stateNode}typeof d=="function"?i.refCleanup=d(m):d.current=m}}catch(v){lr(i,l,v)}}function Fl(i,l){var d=i.ref,m=i.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(v){lr(i,l,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(v){lr(i,l,v)}else d.current=null}function s5(i){var l=i.type,d=i.memoizedProps,m=i.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&m.focus();break e;case"img":d.src?m.src=d.src:d.srcSet&&(m.srcset=d.srcSet)}}catch(v){lr(i,i.return,v)}}function $y(i,l,d){try{var m=i.stateNode;sI(m,i.type,d,l),m[sr]=l}catch(v){lr(i,i.return,v)}}function a5(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Su(i.type)||i.tag===4}function Wy(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||a5(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Su(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ky(i,l,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(i,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(i),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=ni));else if(m!==4&&(m===27&&Su(i.type)&&(d=i.stateNode,l=null),i=i.child,i!==null))for(Ky(i,l,d),i=i.sibling;i!==null;)Ky(i,l,d),i=i.sibling}function Rp(i,l,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,l?d.insertBefore(i,l):d.appendChild(i);else if(m!==4&&(m===27&&Su(i.type)&&(d=i.stateNode),i=i.child,i!==null))for(Rp(i,l,d),i=i.sibling;i!==null;)Rp(i,l,d),i=i.sibling}function i5(i){var l=i.stateNode,d=i.memoizedProps;try{for(var m=i.type,v=l.attributes;v.length;)l.removeAttributeNode(v[0]);Pa(l,m,d),l[$n]=i,l[sr]=d}catch(_){lr(i,i.return,_)}}var Ec=!1,Ls=!1,Yy=!1,o5=typeof WeakSet=="function"?WeakSet:Set,ga=null;function OC(i,l){if(i=i.containerInfo,pb=Jp,i=Qo(i),So(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var v=m.anchorOffset,_=m.focusNode;m=m.focusOffset;try{d.nodeType,_.nodeType}catch{d=null;break e}var U=0,X=-1,fe=-1,Re=0,Be=0,We=i,De=null;t:for(;;){for(var Me;We!==d||v!==0&&We.nodeType!==3||(X=U+v),We!==_||m!==0&&We.nodeType!==3||(fe=U+m),We.nodeType===3&&(U+=We.nodeValue.length),(Me=We.firstChild)!==null;)De=We,We=Me;for(;;){if(We===i)break t;if(De===d&&++Re===v&&(X=U),De===_&&++Be===m&&(fe=U),(Me=We.nextSibling)!==null)break;We=De,De=We.parentNode}We=Me}d=X===-1||fe===-1?null:{start:X,end:fe}}else d=null}d=d||{start:0,end:0}}else d=null;for(xb={focusedElem:i,selectionRange:d},Jp=!1,ga=l;ga!==null;)if(l=ga,i=l.child,(l.subtreeFlags&1028)!==0&&i!==null)i.return=l,ga=i;else for(;ga!==null;){switch(l=ga,_=l.alternate,i=l.flags,l.tag){case 0:if((i&4)!==0&&(i=l.updateQueue,i=i!==null?i.events:null,i!==null))for(d=0;d<i.length;d++)v=i[d],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,d=l,v=_.memoizedProps,_=_.memoizedState,m=d.stateNode;try{var gt=Ad(d.type,v);i=m.getSnapshotBeforeUpdate(gt,_),m.__reactInternalSnapshotBeforeUpdate=i}catch(Kt){lr(d,d.return,Kt)}}break;case 3:if((i&1024)!==0){if(i=l.stateNode.containerInfo,d=i.nodeType,d===9)vb(i);else if(d===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":vb(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=l.sibling,i!==null){i.return=l.return,ga=i;break}ga=l.return}}function l5(i,l,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:Tc(i,d),m&4&&_m(5,d);break;case 1:if(Tc(i,d),m&4)if(i=d.stateNode,l===null)try{i.componentDidMount()}catch(U){lr(d,d.return,U)}else{var v=Ad(d.type,l.memoizedProps);l=l.memoizedState;try{i.componentDidUpdate(v,l,i.__reactInternalSnapshotBeforeUpdate)}catch(U){lr(d,d.return,U)}}m&64&&n5(d),m&512&&Sm(d,d.return);break;case 3:if(Tc(i,d),m&64&&(i=d.updateQueue,i!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{ss(i,l)}catch(U){lr(d,d.return,U)}}break;case 27:l===null&&m&4&&i5(d);case 26:case 5:Tc(i,d),l===null&&m&4&&s5(d),m&512&&Sm(d,d.return);break;case 12:Tc(i,d);break;case 31:Tc(i,d),m&4&&d5(i,d);break;case 13:Tc(i,d),m&4&&h5(i,d),m&64&&(i=d.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(d=$C.bind(null,d),hI(i,d))));break;case 22:if(m=d.memoizedState!==null||Ec,!m){l=l!==null&&l.memoizedState!==null||Ls,v=Ec;var _=Ls;Ec=m,(Ls=l)&&!_?Cc(i,d,(d.subtreeFlags&8772)!==0):Tc(i,d),Ec=v,Ls=_}break;case 30:break;default:Tc(i,d)}}function c5(i){var l=i.alternate;l!==null&&(i.alternate=null,c5(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&Hi(l)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Br=null,ki=!1;function Ac(i,l,d){for(d=d.child;d!==null;)u5(i,l,d),d=d.sibling}function u5(i,l,d){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(ln,d)}catch{}switch(d.tag){case 26:Ls||Fl(d,l),Ac(i,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Ls||Fl(d,l);var m=Br,v=ki;Su(d.type)&&(Br=d.stateNode,ki=!1),Ac(i,l,d),Lm(d.stateNode),Br=m,ki=v;break;case 5:Ls||Fl(d,l);case 6:if(m=Br,v=ki,Br=null,Ac(i,l,d),Br=m,ki=v,Br!==null)if(ki)try{(Br.nodeType===9?Br.body:Br.nodeName==="HTML"?Br.ownerDocument.body:Br).removeChild(d.stateNode)}catch(_){lr(d,l,_)}else try{Br.removeChild(d.stateNode)}catch(_){lr(d,l,_)}break;case 18:Br!==null&&(ki?(i=Br,nN(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,d.stateNode),Xh(i)):nN(Br,d.stateNode));break;case 4:m=Br,v=ki,Br=d.stateNode.containerInfo,ki=!0,Ac(i,l,d),Br=m,ki=v;break;case 0:case 11:case 14:case 15:yu(2,d,l),Ls||yu(4,d,l),Ac(i,l,d);break;case 1:Ls||(Fl(d,l),m=d.stateNode,typeof m.componentWillUnmount=="function"&&r5(d,l,m)),Ac(i,l,d);break;case 21:Ac(i,l,d);break;case 22:Ls=(m=Ls)||d.memoizedState!==null,Ac(i,l,d),Ls=m;break;default:Ac(i,l,d)}}function d5(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Xh(i)}catch(d){lr(l,l.return,d)}}}function h5(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Xh(i)}catch(d){lr(l,l.return,d)}}function FC(i){switch(i.tag){case 31:case 13:case 19:var l=i.stateNode;return l===null&&(l=i.stateNode=new o5),l;case 22:return i=i.stateNode,l=i._retryCache,l===null&&(l=i._retryCache=new o5),l;default:throw Error(r(435,i.tag))}}function kp(i,l){var d=FC(i);l.forEach(function(m){if(!d.has(m)){d.add(m);var v=WC.bind(null,i,m);m.then(v,v)}})}function Pi(i,l){var d=l.deletions;if(d!==null)for(var m=0;m<d.length;m++){var v=d[m],_=i,U=l,X=U;e:for(;X!==null;){switch(X.tag){case 27:if(Su(X.type)){Br=X.stateNode,ki=!1;break e}break;case 5:Br=X.stateNode,ki=!1;break e;case 3:case 4:Br=X.stateNode.containerInfo,ki=!0;break e}X=X.return}if(Br===null)throw Error(r(160));u5(_,U,v),Br=null,ki=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)f5(l,i),l=l.sibling}var al=null;function f5(i,l){var d=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Pi(l,i),Li(i),m&4&&(yu(3,i,i.return),_m(3,i),yu(5,i,i.return));break;case 1:Pi(l,i),Li(i),m&512&&(Ls||d===null||Fl(d,d.return)),m&64&&Ec&&(i=i.updateQueue,i!==null&&(m=i.callbacks,m!==null&&(d=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:var v=al;if(Pi(l,i),Li(i),m&512&&(Ls||d===null||Fl(d,d.return)),m&4){var _=d!==null?d.memoizedState:null;if(m=i.memoizedState,d===null)if(m===null)if(i.stateNode===null){e:{m=i.type,d=i.memoizedProps,v=v.ownerDocument||v;t:switch(m){case"title":_=v.getElementsByTagName("title")[0],(!_||_[ia]||_[$n]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(m),v.head.insertBefore(_,v.querySelector("head > title"))),Pa(_,m,d),_[$n]=i,Tr(_),m=_;break e;case"link":var U=fN("link","href",v).get(m+(d.href||""));if(U){for(var X=0;X<U.length;X++)if(_=U[X],_.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&_.getAttribute("rel")===(d.rel==null?null:d.rel)&&_.getAttribute("title")===(d.title==null?null:d.title)&&_.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){U.splice(X,1);break t}}_=v.createElement(m),Pa(_,m,d),v.head.appendChild(_);break;case"meta":if(U=fN("meta","content",v).get(m+(d.content||""))){for(X=0;X<U.length;X++)if(_=U[X],_.getAttribute("content")===(d.content==null?null:""+d.content)&&_.getAttribute("name")===(d.name==null?null:d.name)&&_.getAttribute("property")===(d.property==null?null:d.property)&&_.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&_.getAttribute("charset")===(d.charSet==null?null:d.charSet)){U.splice(X,1);break t}}_=v.createElement(m),Pa(_,m,d),v.head.appendChild(_);break;default:throw Error(r(468,m))}_[$n]=i,Tr(_),m=_}i.stateNode=m}else mN(v,i.type,i.stateNode);else i.stateNode=hN(v,m,i.memoizedProps);else _!==m?(_===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):_.count--,m===null?mN(v,i.type,i.stateNode):hN(v,m,i.memoizedProps)):m===null&&i.stateNode!==null&&$y(i,i.memoizedProps,d.memoizedProps)}break;case 27:Pi(l,i),Li(i),m&512&&(Ls||d===null||Fl(d,d.return)),d!==null&&m&4&&$y(i,i.memoizedProps,d.memoizedProps);break;case 5:if(Pi(l,i),Li(i),m&512&&(Ls||d===null||Fl(d,d.return)),i.flags&32){v=i.stateNode;try{gs(v,"")}catch(gt){lr(i,i.return,gt)}}m&4&&i.stateNode!=null&&(v=i.memoizedProps,$y(i,v,d!==null?d.memoizedProps:v)),m&1024&&(Yy=!0);break;case 6:if(Pi(l,i),Li(i),m&4){if(i.stateNode===null)throw Error(r(162));m=i.memoizedProps,d=i.stateNode;try{d.nodeValue=m}catch(gt){lr(i,i.return,gt)}}break;case 3:if(Kp=null,v=al,al=$p(l.containerInfo),Pi(l,i),al=v,Li(i),m&4&&d!==null&&d.memoizedState.isDehydrated)try{Xh(l.containerInfo)}catch(gt){lr(i,i.return,gt)}Yy&&(Yy=!1,m5(i));break;case 4:m=al,al=$p(i.stateNode.containerInfo),Pi(l,i),Li(i),al=m;break;case 12:Pi(l,i),Li(i);break;case 31:Pi(l,i),Li(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,kp(i,m)));break;case 13:Pi(l,i),Li(i),i.child.flags&8192&&i.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Lp=sn()),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,kp(i,m)));break;case 22:v=i.memoizedState!==null;var fe=d!==null&&d.memoizedState!==null,Re=Ec,Be=Ls;if(Ec=Re||v,Ls=Be||fe,Pi(l,i),Ls=Be,Ec=Re,Li(i),m&8192)e:for(l=i.stateNode,l._visibility=v?l._visibility&-2:l._visibility|1,v&&(d===null||fe||Ec||Ls||Td(i)),d=null,l=i;;){if(l.tag===5||l.tag===26){if(d===null){fe=d=l;try{if(_=fe.stateNode,v)U=_.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{X=fe.stateNode;var We=fe.memoizedProps.style,De=We!=null&&We.hasOwnProperty("display")?We.display:null;X.style.display=De==null||typeof De=="boolean"?"":(""+De).trim()}}catch(gt){lr(fe,fe.return,gt)}}}else if(l.tag===6){if(d===null){fe=l;try{fe.stateNode.nodeValue=v?"":fe.memoizedProps}catch(gt){lr(fe,fe.return,gt)}}}else if(l.tag===18){if(d===null){fe=l;try{var Me=fe.stateNode;v?rN(Me,!0):rN(fe.stateNode,!1)}catch(gt){lr(fe,fe.return,gt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===i)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break e;for(;l.sibling===null;){if(l.return===null||l.return===i)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=i.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,kp(i,d))));break;case 19:Pi(l,i),Li(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,kp(i,m)));break;case 30:break;case 21:break;default:Pi(l,i),Li(i)}}function Li(i){var l=i.flags;if(l&2){try{for(var d,m=i.return;m!==null;){if(a5(m)){d=m;break}m=m.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var v=d.stateNode,_=Wy(i);Rp(i,_,v);break;case 5:var U=d.stateNode;d.flags&32&&(gs(U,""),d.flags&=-33);var X=Wy(i);Rp(i,X,U);break;case 3:case 4:var fe=d.stateNode.containerInfo,Re=Wy(i);Ky(i,Re,fe);break;default:throw Error(r(161))}}catch(Be){lr(i,i.return,Be)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function m5(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var l=i;m5(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),i=i.sibling}}function Tc(i,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)l5(i,l.alternate,l),l=l.sibling}function Td(i){for(i=i.child;i!==null;){var l=i;switch(l.tag){case 0:case 11:case 14:case 15:yu(4,l,l.return),Td(l);break;case 1:Fl(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&r5(l,l.return,d),Td(l);break;case 27:Lm(l.stateNode);case 26:case 5:Fl(l,l.return),Td(l);break;case 22:l.memoizedState===null&&Td(l);break;case 30:Td(l);break;default:Td(l)}i=i.sibling}}function Cc(i,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,v=i,_=l,U=_.flags;switch(_.tag){case 0:case 11:case 15:Cc(v,_,d),_m(4,_);break;case 1:if(Cc(v,_,d),m=_,v=m.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(Re){lr(m,m.return,Re)}if(m=_,v=m.updateQueue,v!==null){var X=m.stateNode;try{var fe=v.shared.hiddenCallbacks;if(fe!==null)for(v.shared.hiddenCallbacks=null,v=0;v<fe.length;v++)fa(fe[v],X)}catch(Re){lr(m,m.return,Re)}}d&&U&64&&n5(_),Sm(_,_.return);break;case 27:i5(_);case 26:case 5:Cc(v,_,d),d&&m===null&&U&4&&s5(_),Sm(_,_.return);break;case 12:Cc(v,_,d);break;case 31:Cc(v,_,d),d&&U&4&&d5(v,_);break;case 13:Cc(v,_,d),d&&U&4&&h5(v,_);break;case 22:_.memoizedState===null&&Cc(v,_,d),Sm(_,_.return);break;case 30:break;default:Cc(v,_,d)}l=l.sibling}}function Xy(i,l){var d=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),i=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(i=l.memoizedState.cachePool.pool),i!==d&&(i!=null&&i.refCount++,d!=null&&jd(d))}function Qy(i,l){i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&jd(i))}function il(i,l,d,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)g5(i,l,d,m),l=l.sibling}function g5(i,l,d,m){var v=l.flags;switch(l.tag){case 0:case 11:case 15:il(i,l,d,m),v&2048&&_m(9,l);break;case 1:il(i,l,d,m);break;case 3:il(i,l,d,m),v&2048&&(i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&jd(i)));break;case 12:if(v&2048){il(i,l,d,m),i=l.stateNode;try{var _=l.memoizedProps,U=_.id,X=_.onPostCommit;typeof X=="function"&&X(U,l.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(fe){lr(l,l.return,fe)}}else il(i,l,d,m);break;case 31:il(i,l,d,m);break;case 13:il(i,l,d,m);break;case 23:break;case 22:_=l.stateNode,U=l.alternate,l.memoizedState!==null?_._visibility&2?il(i,l,d,m):Em(i,l):_._visibility&2?il(i,l,d,m):(_._visibility|=2,Vh(i,l,d,m,(l.subtreeFlags&10256)!==0||!1)),v&2048&&Xy(U,l);break;case 24:il(i,l,d,m),v&2048&&Qy(l.alternate,l);break;default:il(i,l,d,m)}}function Vh(i,l,d,m,v){for(v=v&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var _=i,U=l,X=d,fe=m,Re=U.flags;switch(U.tag){case 0:case 11:case 15:Vh(_,U,X,fe,v),_m(8,U);break;case 23:break;case 22:var Be=U.stateNode;U.memoizedState!==null?Be._visibility&2?Vh(_,U,X,fe,v):Em(_,U):(Be._visibility|=2,Vh(_,U,X,fe,v)),v&&Re&2048&&Xy(U.alternate,U);break;case 24:Vh(_,U,X,fe,v),v&&Re&2048&&Qy(U.alternate,U);break;default:Vh(_,U,X,fe,v)}l=l.sibling}}function Em(i,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=i,m=l,v=m.flags;switch(m.tag){case 22:Em(d,m),v&2048&&Xy(m.alternate,m);break;case 24:Em(d,m),v&2048&&Qy(m.alternate,m);break;default:Em(d,m)}l=l.sibling}}var Am=8192;function Uh(i,l,d){if(i.subtreeFlags&Am)for(i=i.child;i!==null;)p5(i,l,d),i=i.sibling}function p5(i,l,d){switch(i.tag){case 26:Uh(i,l,d),i.flags&Am&&i.memoizedState!==null&&_I(d,al,i.memoizedState,i.memoizedProps);break;case 5:Uh(i,l,d);break;case 3:case 4:var m=al;al=$p(i.stateNode.containerInfo),Uh(i,l,d),al=m;break;case 22:i.memoizedState===null&&(m=i.alternate,m!==null&&m.memoizedState!==null?(m=Am,Am=16777216,Uh(i,l,d),Am=m):Uh(i,l,d));break;default:Uh(i,l,d)}}function x5(i){var l=i.alternate;if(l!==null&&(i=l.child,i!==null)){l.child=null;do l=i.sibling,i.sibling=null,i=l;while(i!==null)}}function Tm(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];ga=m,b5(m,i)}x5(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)y5(i),i=i.sibling}function y5(i){switch(i.tag){case 0:case 11:case 15:Tm(i),i.flags&2048&&yu(9,i,i.return);break;case 3:Tm(i);break;case 12:Tm(i);break;case 22:var l=i.stateNode;i.memoizedState!==null&&l._visibility&2&&(i.return===null||i.return.tag!==13)?(l._visibility&=-3,Pp(i)):Tm(i);break;default:Tm(i)}}function Pp(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];ga=m,b5(m,i)}x5(i)}for(i=i.child;i!==null;){switch(l=i,l.tag){case 0:case 11:case 15:yu(8,l,l.return),Pp(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,Pp(l));break;default:Pp(l)}i=i.sibling}}function b5(i,l){for(;ga!==null;){var d=ga;switch(d.tag){case 0:case 11:case 15:yu(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:jd(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,ga=m;else e:for(d=i;ga!==null;){m=ga;var v=m.sibling,_=m.return;if(c5(m),m===d){ga=null;break e}if(v!==null){v.return=_,ga=v;break e}ga=_}}}var VC={getCacheForType:function(i){var l=Qs(Yr),d=l.data.get(i);return d===void 0&&(d=i(),l.data.set(i,d)),d},cacheSignal:function(){return Qs(Yr).controller.signal}},UC=typeof WeakMap=="function"?WeakMap:Map,er=0,_r=null,Cn=null,kn=0,or=0,eo=null,bu=!1,Bh=!1,Jy=!1,Ic=0,ls=0,vu=0,Cd=0,Zy=0,to=0,zh=0,Cm=null,Di=null,eb=!1,Lp=0,v5=0,Dp=1/0,Mp=null,wu=null,Zs=0,Nu=null,qh=null,Rc=0,tb=0,nb=null,w5=null,Im=0,rb=null;function no(){return(er&2)!==0&&kn!==0?kn&-kn:ce.T!==null?cb():es()}function N5(){if(to===0)if((kn&536870912)===0||Tn){var i=Gn;Gn<<=1,(Gn&3932160)===0&&(Gn=262144),to=i}else to=536870912;return i=Rr.current,i!==null&&(i.flags|=32),to}function Mi(i,l,d){(i===_r&&(or===2||or===9)||i.cancelPendingCommit!==null)&&(Hh(i,0),ju(i,kn,to,!1)),Ct(i,d),((er&2)===0||i!==_r)&&(i===_r&&((er&2)===0&&(Cd|=d),ls===4&&ju(i,kn,to,!1)),Vl(i))}function j5(i,l,d){if((er&6)!==0)throw Error(r(327));var m=!d&&(l&127)===0&&(l&i.expiredLanes)===0||Bs(i,l),v=m?qC(i,l):ab(i,l,!0),_=m;do{if(v===0){Bh&&!m&&ju(i,l,0,!1);break}else{if(d=i.current.alternate,_&&!BC(d)){v=ab(i,l,!1),_=!1;continue}if(v===2){if(_=l,i.errorRecoveryDisabledLanes&_)var U=0;else U=i.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){l=U;e:{var X=i;v=Cm;var fe=X.current.memoizedState.isDehydrated;if(fe&&(Hh(X,U).flags|=256),U=ab(X,U,!1),U!==2){if(Jy&&!fe){X.errorRecoveryDisabledLanes|=_,Cd|=_,v=4;break e}_=Di,Di=v,_!==null&&(Di===null?Di=_:Di.push.apply(Di,_))}v=U}if(_=!1,v!==2)continue}}if(v===1){Hh(i,0),ju(i,l,0,!0);break}e:{switch(m=i,_=v,_){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:ju(m,l,to,!bu);break e;case 2:Di=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(v=Lp+300-sn(),10<v)){if(ju(m,l,to,!bu),xn(m,0,!0)!==0)break e;Rc=l,m.timeoutHandle=eN(_5.bind(null,m,d,Di,Mp,eb,l,to,Cd,zh,bu,_,"Throttled",-0,0),v);break e}_5(m,d,Di,Mp,eb,l,to,Cd,zh,bu,_,null,-0,0)}}break}while(!0);Vl(i)}function _5(i,l,d,m,v,_,U,X,fe,Re,Be,We,De,Me){if(i.timeoutHandle=-1,We=l.subtreeFlags,We&8192||(We&16785408)===16785408){We={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ni},p5(l,_,We);var gt=(_&62914560)===_?Lp-sn():(_&4194048)===_?v5-sn():0;if(gt=SI(We,gt),gt!==null){Rc=_,i.cancelPendingCommit=gt(k5.bind(null,i,l,_,d,m,v,U,X,fe,Be,We,null,De,Me)),ju(i,_,U,!Re);return}}k5(i,l,_,d,m,v,U,X,fe)}function BC(i){for(var l=i;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var v=d[m],_=v.getSnapshot;v=v.value;try{if(!Ws(_(),v))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function ju(i,l,d,m){l&=~Zy,l&=~Cd,i.suspendedLanes|=l,i.pingedLanes&=~l,m&&(i.warmLanes|=l),m=i.expirationTimes;for(var v=l;0<v;){var _=31-an(v),U=1<<_;m[_]=-1,v&=~U}d!==0&&va(i,d,l)}function Op(){return(er&6)===0?(Rm(0),!1):!0}function sb(){if(Cn!==null){if(or===0)var i=Cn.return;else i=Cn,Ao=Il=null,kh(i),Ke=null,xt=0,i=Cn;for(;i!==null;)t5(i.alternate,i),i=i.return;Cn=null}}function Hh(i,l){var d=i.timeoutHandle;d!==-1&&(i.timeoutHandle=-1,oI(d)),d=i.cancelPendingCommit,d!==null&&(i.cancelPendingCommit=null,d()),Rc=0,sb(),_r=i,Cn=d=_i(i.current,null),kn=l,or=0,eo=null,bu=!1,Bh=Bs(i,l),Jy=!1,zh=to=Zy=Cd=vu=ls=0,Di=Cm=null,eb=!1,(l&8)!==0&&(l|=l&32);var m=i.entangledLanes;if(m!==0)for(i=i.entanglements,m&=l;0<m;){var v=31-an(m),_=1<<v;l|=i[v],m&=~_}return Ic=l,xd(),d}function S5(i,l){Ot=null,ce.H=wm,l===xe||l===ie?(l=He(),or=3):l===Ce?(l=He(),or=4):or=l===My?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,eo=l,Cn===null&&(ls=1,Ep(i,Si(l,i.current)))}function E5(){var i=Rr.current;return i===null?!0:(kn&4194048)===kn?Vn===null:(kn&62914560)===kn||(kn&536870912)!==0?i===Vn:!1}function A5(){var i=ce.H;return ce.H=wm,i===null?wm:i}function T5(){var i=ce.A;return ce.A=VC,i}function Fp(){ls=4,bu||(kn&4194048)!==kn&&Rr.current!==null||(Bh=!0),(vu&134217727)===0&&(Cd&134217727)===0||_r===null||ju(_r,kn,to,!1)}function ab(i,l,d){var m=er;er|=2;var v=A5(),_=T5();(_r!==i||kn!==l)&&(Mp=null,Hh(i,l)),l=!1;var U=ls;e:do try{if(or!==0&&Cn!==null){var X=Cn,fe=eo;switch(or){case 8:sb(),U=6;break e;case 3:case 2:case 9:case 6:Rr.current===null&&(l=!0);var Re=or;if(or=0,eo=null,Gh(i,X,fe,Re),d&&Bh){U=0;break e}break;default:Re=or,or=0,eo=null,Gh(i,X,fe,Re)}}zC(),U=ls;break}catch(Be){S5(i,Be)}while(!0);return l&&i.shellSuspendCounter++,Ao=Il=null,er=m,ce.H=v,ce.A=_,Cn===null&&(_r=null,kn=0,xd()),U}function zC(){for(;Cn!==null;)C5(Cn)}function qC(i,l){var d=er;er|=2;var m=A5(),v=T5();_r!==i||kn!==l?(Mp=null,Dp=sn()+500,Hh(i,l)):Bh=Bs(i,l);e:do try{if(or!==0&&Cn!==null){l=Cn;var _=eo;t:switch(or){case 1:or=0,eo=null,Gh(i,l,_,1);break;case 2:case 9:if(Ee(_)){or=0,eo=null,I5(l);break}l=function(){or!==2&&or!==9||_r!==i||(or=7),Vl(i)},_.then(l,l);break e;case 3:or=7;break e;case 4:or=5;break e;case 7:Ee(_)?(or=0,eo=null,I5(l)):(or=0,eo=null,Gh(i,l,_,7));break;case 5:var U=null;switch(Cn.tag){case 26:U=Cn.memoizedState;case 5:case 27:var X=Cn;if(U?gN(U):X.stateNode.complete){or=0,eo=null;var fe=X.sibling;if(fe!==null)Cn=fe;else{var Re=X.return;Re!==null?(Cn=Re,Vp(Re)):Cn=null}break t}}or=0,eo=null,Gh(i,l,_,5);break;case 6:or=0,eo=null,Gh(i,l,_,6);break;case 8:sb(),ls=6;break e;default:throw Error(r(462))}}HC();break}catch(Be){S5(i,Be)}while(!0);return Ao=Il=null,ce.H=m,ce.A=v,er=d,Cn!==null?0:(_r=null,kn=0,xd(),ls)}function HC(){for(;Cn!==null&&!Dt();)C5(Cn)}function C5(i){var l=Zw(i.alternate,i,Ic);i.memoizedProps=i.pendingProps,l===null?Vp(i):Cn=l}function I5(i){var l=i,d=l.alternate;switch(l.tag){case 15:case 0:l=Ww(d,l,l.pendingProps,l.type,void 0,kn);break;case 11:l=Ww(d,l,l.pendingProps,l.type.render,l.ref,kn);break;case 5:kh(l);default:t5(d,l),l=Cn=vd(l,Ic),l=Zw(d,l,Ic)}i.memoizedProps=i.pendingProps,l===null?Vp(i):Cn=l}function Gh(i,l,d,m){Ao=Il=null,kh(l),Ke=null,xt=0;var v=l.return;try{if(kC(i,v,l,d,kn)){ls=1,Ep(i,Si(d,i.current)),Cn=null;return}}catch(_){if(v!==null)throw Cn=v,_;ls=1,Ep(i,Si(d,i.current)),Cn=null;return}l.flags&32768?(Tn||m===1?i=!0:Bh||(kn&536870912)!==0?i=!1:(bu=i=!0,(m===2||m===9||m===3||m===6)&&(m=Rr.current,m!==null&&m.tag===13&&(m.flags|=16384))),R5(l,i)):Vp(l)}function Vp(i){var l=i;do{if((l.flags&32768)!==0){R5(l,bu);return}i=l.return;var d=DC(l.alternate,l,Ic);if(d!==null){Cn=d;return}if(l=l.sibling,l!==null){Cn=l;return}Cn=l=i}while(l!==null);ls===0&&(ls=5)}function R5(i,l){do{var d=MC(i.alternate,i);if(d!==null){d.flags&=32767,Cn=d;return}if(d=i.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(i=i.sibling,i!==null)){Cn=i;return}Cn=i=d}while(i!==null);ls=6,Cn=null}function k5(i,l,d,m,v,_,U,X,fe){i.cancelPendingCommit=null;do Up();while(Zs!==0);if((er&6)!==0)throw Error(r(327));if(l!==null){if(l===i.current)throw Error(r(177));if(_=l.lanes|l.childLanes,_|=yh,qi(i,d,_,U,X,fe),i===_r&&(Cn=_r=null,kn=0),qh=l,Nu=i,Rc=d,tb=_,nb=v,w5=m,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,KC(on,function(){return O5(),null})):(i.callbackNode=null,i.callbackPriority=0),m=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||m){m=ce.T,ce.T=null,v=pe.p,pe.p=2,U=er,er|=4;try{OC(i,l,d)}finally{er=U,pe.p=v,ce.T=m}}Zs=1,P5(),L5(),D5()}}function P5(){if(Zs===1){Zs=0;var i=Nu,l=qh,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=ce.T,ce.T=null;var m=pe.p;pe.p=2;var v=er;er|=4;try{f5(l,i);var _=xb,U=Qo(i.containerInfo),X=_.focusedElem,fe=_.selectionRange;if(U!==X&&X&&X.ownerDocument&&Xo(X.ownerDocument.documentElement,X)){if(fe!==null&&So(X)){var Re=fe.start,Be=fe.end;if(Be===void 0&&(Be=Re),"selectionStart"in X)X.selectionStart=Re,X.selectionEnd=Math.min(Be,X.value.length);else{var We=X.ownerDocument||document,De=We&&We.defaultView||window;if(De.getSelection){var Me=De.getSelection(),gt=X.textContent.length,Kt=Math.min(fe.start,gt),vr=fe.end===void 0?Kt:Math.min(fe.end,gt);!Me.extend&&Kt>vr&&(U=vr,vr=Kt,Kt=U);var je=ou(X,Kt),ye=ou(X,vr);if(je&&ye&&(Me.rangeCount!==1||Me.anchorNode!==je.node||Me.anchorOffset!==je.offset||Me.focusNode!==ye.node||Me.focusOffset!==ye.offset)){var Ie=We.createRange();Ie.setStart(je.node,je.offset),Me.removeAllRanges(),Kt>vr?(Me.addRange(Ie),Me.extend(ye.node,ye.offset)):(Ie.setEnd(ye.node,ye.offset),Me.addRange(Ie))}}}}for(We=[],Me=X;Me=Me.parentNode;)Me.nodeType===1&&We.push({element:Me,left:Me.scrollLeft,top:Me.scrollTop});for(typeof X.focus=="function"&&X.focus(),X=0;X<We.length;X++){var $e=We[X];$e.element.scrollLeft=$e.left,$e.element.scrollTop=$e.top}}Jp=!!pb,xb=pb=null}finally{er=v,pe.p=m,ce.T=d}}i.current=l,Zs=2}}function L5(){if(Zs===2){Zs=0;var i=Nu,l=qh,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=ce.T,ce.T=null;var m=pe.p;pe.p=2;var v=er;er|=4;try{l5(i,l.alternate,l)}finally{er=v,pe.p=m,ce.T=d}}Zs=3}}function D5(){if(Zs===4||Zs===3){Zs=0,St();var i=Nu,l=qh,d=Rc,m=w5;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Zs=5:(Zs=0,qh=Nu=null,M5(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(wu=null),fr(d),l=l.stateNode,Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(ln,l,void 0,(l.current.flags&128)===128)}catch{}if(m!==null){l=ce.T,v=pe.p,pe.p=2,ce.T=null;try{for(var _=i.onRecoverableError,U=0;U<m.length;U++){var X=m[U];_(X.value,{componentStack:X.stack})}}finally{ce.T=l,pe.p=v}}(Rc&3)!==0&&Up(),Vl(i),v=i.pendingLanes,(d&261930)!==0&&(v&42)!==0?i===rb?Im++:(Im=0,rb=i):Im=0,Rm(0)}}function M5(i,l){(i.pooledCacheLanes&=l)===0&&(l=i.pooledCache,l!=null&&(i.pooledCache=null,jd(l)))}function Up(){return P5(),L5(),D5(),O5()}function O5(){if(Zs!==5)return!1;var i=Nu,l=tb;tb=0;var d=fr(Rc),m=ce.T,v=pe.p;try{pe.p=32>d?32:d,ce.T=null,d=nb,nb=null;var _=Nu,U=Rc;if(Zs=0,qh=Nu=null,Rc=0,(er&6)!==0)throw Error(r(331));var X=er;if(er|=4,y5(_.current),g5(_,_.current,U,d),er=X,Rm(0,!1),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(ln,_)}catch{}return!0}finally{pe.p=v,ce.T=m,M5(i,l)}}function F5(i,l,d){l=Si(d,l),l=Dy(i.stateNode,l,2),i=gn(i,l,2),i!==null&&(Ct(i,2),Vl(i))}function lr(i,l,d){if(i.tag===3)F5(i,i,d);else for(;l!==null;){if(l.tag===3){F5(l,i,d);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(wu===null||!wu.has(m))){i=Si(d,i),d=Vw(2),m=gn(l,d,2),m!==null&&(Uw(d,m,l,i),Ct(m,2),Vl(m));break}}l=l.return}}function ib(i,l,d){var m=i.pingCache;if(m===null){m=i.pingCache=new UC;var v=new Set;m.set(l,v)}else v=m.get(l),v===void 0&&(v=new Set,m.set(l,v));v.has(d)||(Jy=!0,v.add(d),i=GC.bind(null,i,l,d),l.then(i,i))}function GC(i,l,d){var m=i.pingCache;m!==null&&m.delete(l),i.pingedLanes|=i.suspendedLanes&d,i.warmLanes&=~d,_r===i&&(kn&d)===d&&(ls===4||ls===3&&(kn&62914560)===kn&&300>sn()-Lp?(er&2)===0&&Hh(i,0):Zy|=d,zh===kn&&(zh=0)),Vl(i)}function V5(i,l){l===0&&(l=pi()),i=Zo(i,l),i!==null&&(Ct(i,l),Vl(i))}function $C(i){var l=i.memoizedState,d=0;l!==null&&(d=l.retryLane),V5(i,d)}function WC(i,l){var d=0;switch(i.tag){case 31:case 13:var m=i.stateNode,v=i.memoizedState;v!==null&&(d=v.retryLane);break;case 19:m=i.stateNode;break;case 22:m=i.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(l),V5(i,d)}function KC(i,l){return ct(i,l)}var Bp=null,$h=null,ob=!1,zp=!1,lb=!1,_u=0;function Vl(i){i!==$h&&i.next===null&&($h===null?Bp=$h=i:$h=$h.next=i),zp=!0,ob||(ob=!0,XC())}function Rm(i,l){if(!lb&&zp){lb=!0;do for(var d=!1,m=Bp;m!==null;){if(i!==0){var v=m.pendingLanes;if(v===0)var _=0;else{var U=m.suspendedLanes,X=m.pingedLanes;_=(1<<31-an(42|i)+1)-1,_&=v&~(U&~X),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(d=!0,q5(m,_))}else _=kn,_=xn(m,m===_r?_:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(_&3)===0||Bs(m,_)||(d=!0,q5(m,_));m=m.next}while(d);lb=!1}}function YC(){U5()}function U5(){zp=ob=!1;var i=0;_u!==0&&iI()&&(i=_u);for(var l=sn(),d=null,m=Bp;m!==null;){var v=m.next,_=B5(m,l);_===0?(m.next=null,d===null?Bp=v:d.next=v,v===null&&($h=d)):(d=m,(i!==0||(_&3)!==0)&&(zp=!0)),m=v}Zs!==0&&Zs!==5||Rm(i),_u!==0&&(_u=0)}function B5(i,l){for(var d=i.suspendedLanes,m=i.pingedLanes,v=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var U=31-an(_),X=1<<U,fe=v[U];fe===-1?((X&d)===0||(X&m)!==0)&&(v[U]=As(X,l)):fe<=l&&(i.expiredLanes|=X),_&=~X}if(l=_r,d=kn,d=xn(i,i===l?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m=i.callbackNode,d===0||i===l&&(or===2||or===9)||i.cancelPendingCommit!==null)return m!==null&&m!==null&&lt(m),i.callbackNode=null,i.callbackPriority=0;if((d&3)===0||Bs(i,d)){if(l=d&-d,l===i.callbackPriority)return l;switch(m!==null&&lt(m),fr(d)){case 2:case 8:d=pn;break;case 32:d=on;break;case 268435456:d=en;break;default:d=on}return m=z5.bind(null,i),d=ct(d,m),i.callbackPriority=l,i.callbackNode=d,l}return m!==null&&m!==null&&lt(m),i.callbackPriority=2,i.callbackNode=null,2}function z5(i,l){if(Zs!==0&&Zs!==5)return i.callbackNode=null,i.callbackPriority=0,null;var d=i.callbackNode;if(Up()&&i.callbackNode!==d)return null;var m=kn;return m=xn(i,i===_r?m:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m===0?null:(j5(i,m,l),B5(i,sn()),i.callbackNode!=null&&i.callbackNode===d?z5.bind(null,i):null)}function q5(i,l){if(Up())return null;j5(i,l,!0)}function XC(){lI(function(){(er&6)!==0?ct(Xt,YC):U5()})}function cb(){if(_u===0){var i=p;i===0&&(i=qt,qt<<=1,(qt&261888)===0&&(qt=256)),_u=i}return _u}function H5(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:la(""+i)}function G5(i,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,i.id&&d.setAttribute("form",i.id),l.parentNode.insertBefore(d,l),i=new FormData(i),d.parentNode.removeChild(d),i}function QC(i,l,d,m,v){if(l==="submit"&&d&&d.stateNode===v){var _=H5((v[sr]||null).action),U=m.submitter;U&&(l=(l=U[sr]||null)?H5(l.formAction):U.getAttribute("formAction"),l!==null&&(_=l,U=null));var X=new Is("action","action",null,m,v);i.push({event:X,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(_u!==0){var fe=U?G5(v,U):new FormData(v);Cy(d,{pending:!0,data:fe,method:v.method,action:_},null,fe)}}else typeof _=="function"&&(X.preventDefault(),fe=U?G5(v,U):new FormData(v),Cy(d,{pending:!0,data:fe,method:v.method,action:_},_,fe))},currentTarget:v}]})}}for(var ub=0;ub<pc.length;ub++){var db=pc[ub],JC=db.toLowerCase(),ZC=db[0].toUpperCase()+db.slice(1);ji(JC,"on"+ZC)}ji(gc,"onAnimationEnd"),ji(gd,"onAnimationIteration"),ji(im,"onAnimationStart"),ji("dblclick","onDoubleClick"),ji("focusin","onFocus"),ji("focusout","onBlur"),ji(fp,"onTransitionRun"),ji(mp,"onTransitionStart"),ji(gp,"onTransitionCancel"),ji(om,"onTransitionEnd"),ti("onMouseEnter",["mouseout","mouseover"]),ti("onMouseLeave",["mouseout","mouseover"]),ti("onPointerEnter",["pointerout","pointerover"]),ti("onPointerLeave",["pointerout","pointerover"]),Va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Va("onBeforeInput",["compositionend","keypress","textInput","paste"]),Va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var km="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(km));function $5(i,l){l=(l&4)!==0;for(var d=0;d<i.length;d++){var m=i[d],v=m.event;m=m.listeners;e:{var _=void 0;if(l)for(var U=m.length-1;0<=U;U--){var X=m[U],fe=X.instance,Re=X.currentTarget;if(X=X.listener,fe!==_&&v.isPropagationStopped())break e;_=X,v.currentTarget=Re;try{_(v)}catch(Be){pd(Be)}v.currentTarget=null,_=fe}else for(U=0;U<m.length;U++){if(X=m[U],fe=X.instance,Re=X.currentTarget,X=X.listener,fe!==_&&v.isPropagationStopped())break e;_=X,v.currentTarget=Re;try{_(v)}catch(Be){pd(Be)}v.currentTarget=null,_=fe}}}}function In(i,l){var d=l[aa];d===void 0&&(d=l[aa]=new Set);var m=i+"__bubble";d.has(m)||(W5(l,i,2,!1),d.add(m))}function hb(i,l,d){var m=0;l&&(m|=4),W5(d,i,m,l)}var qp="_reactListening"+Math.random().toString(36).slice(2);function fb(i){if(!i[qp]){i[qp]=!0,yl.forEach(function(d){d!=="selectionchange"&&(eI.has(d)||hb(d,!1,i),hb(d,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[qp]||(l[qp]=!0,hb("selectionchange",!1,l))}}function W5(i,l,d,m){switch(NN(l)){case 2:var v=TI;break;case 8:v=CI;break;default:v=Tb}d=v.bind(null,l,d,i),v=void 0,!qo||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),m?v!==void 0?i.addEventListener(l,d,{capture:!0,passive:v}):i.addEventListener(l,d,!0):v!==void 0?i.addEventListener(l,d,{passive:v}):i.addEventListener(l,d,!1)}function mb(i,l,d,m,v){var _=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var U=m.tag;if(U===3||U===4){var X=m.stateNode.containerInfo;if(X===v)break;if(U===4)for(U=m.return;U!==null;){var fe=U.tag;if((fe===3||fe===4)&&U.stateNode.containerInfo===v)return;U=U.return}for(;X!==null;){if(U=wa(X),U===null)return;if(fe=U.tag,fe===5||fe===6||fe===26||fe===27){m=_=U;continue e}X=X.parentNode}}m=m.return}xo(function(){var Re=_,Be=ca(d),We=[];e:{var De=lm.get(i);if(De!==void 0){var Me=Is,gt=i;switch(i){case"keypress":if(Sa(d)===0)break e;case"keydown":case"keyup":Me=En;break;case"focusin":gt="focus",Me=si;break;case"focusout":gt="blur",Me=si;break;case"beforeblur":case"afterblur":Me=si;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=_l;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=wi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=R;break;case gc:case gd:case im:Me=A;break;case om:Me=Z;break;case"scroll":case"scrollend":Me=yo;break;case"wheel":Me=Pe;break;case"copy":case"cut":case"paste":Me=oe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=rr;break;case"toggle":case"beforetoggle":Me=Jt}var Kt=(l&4)!==0,vr=!Kt&&(i==="scroll"||i==="scrollend"),je=Kt?De!==null?De+"Capture":null:De;Kt=[];for(var ye=Re,Ie;ye!==null;){var $e=ye;if(Ie=$e.stateNode,$e=$e.tag,$e!==5&&$e!==26&&$e!==27||Ie===null||je===null||($e=ps(ye,je),$e!=null&&Kt.push(Pm(ye,$e,Ie))),vr)break;ye=ye.return}0<Kt.length&&(De=new Me(De,gt,null,d,Be),We.push({event:De,listeners:Kt}))}}if((l&7)===0){e:{if(De=i==="mouseover"||i==="pointerover",Me=i==="mouseout"||i==="pointerout",De&&d!==Ki&&(gt=d.relatedTarget||d.fromElement)&&(wa(gt)||gt[ts]))break e;if((Me||De)&&(De=Be.window===Be?Be:(De=Be.ownerDocument)?De.defaultView||De.parentWindow:window,Me?(gt=d.relatedTarget||d.toElement,Me=Re,gt=gt?wa(gt):null,gt!==null&&(vr=o(gt),Kt=gt.tag,gt!==vr||Kt!==5&&Kt!==27&&Kt!==6)&&(gt=null)):(Me=null,gt=Re),Me!==gt)){if(Kt=_l,$e="onMouseLeave",je="onMouseEnter",ye="mouse",(i==="pointerout"||i==="pointerover")&&(Kt=rr,$e="onPointerLeave",je="onPointerEnter",ye="pointer"),vr=Me==null?De:Na(Me),Ie=gt==null?De:Na(gt),De=new Kt($e,ye+"leave",Me,d,Be),De.target=vr,De.relatedTarget=Ie,$e=null,wa(Be)===Re&&(Kt=new Kt(je,ye+"enter",gt,d,Be),Kt.target=Ie,Kt.relatedTarget=vr,$e=Kt),vr=$e,Me&&gt)t:{for(Kt=tI,je=Me,ye=gt,Ie=0,$e=je;$e;$e=Kt($e))Ie++;$e=0;for(var Ut=ye;Ut;Ut=Kt(Ut))$e++;for(;0<Ie-$e;)je=Kt(je),Ie--;for(;0<$e-Ie;)ye=Kt(ye),$e--;for(;Ie--;){if(je===ye||ye!==null&&je===ye.alternate){Kt=je;break t}je=Kt(je),ye=Kt(ye)}Kt=null}else Kt=null;Me!==null&&K5(We,De,Me,Kt,!1),gt!==null&&vr!==null&&K5(We,vr,gt,Kt,!0)}}e:{if(De=Re?Na(Re):window,Me=De.nodeName&&De.nodeName.toLowerCase(),Me==="select"||Me==="input"&&De.type==="file")var Yn=El;else if(fd(De))if(za)Yn=jo;else{Yn=Wr;var _t=au}else Me=De.nodeName,!Me||Me.toLowerCase()!=="input"||De.type!=="checkbox"&&De.type!=="radio"?Re&&wl(Re.elementType)&&(Yn=El):Yn=xh;if(Yn&&(Yn=Yn(i,Re))){ii(We,Yn,d,Be);break e}_t&&_t(i,De,Re),i==="focusout"&&Re&&De.type==="number"&&Re.memoizedProps.value!=null&&lc(De,"number",De.value)}switch(_t=Re?Na(Re):window,i){case"focusin":(fd(_t)||_t.contentEditable==="true")&&(oi=_t,Jo=Re,ua=null);break;case"focusout":ua=Jo=oi=null;break;case"mousedown":Ni=!0;break;case"contextmenu":case"mouseup":case"dragend":Ni=!1,qn(We,d,Be);break;case"selectionchange":if(mc)break;case"keydown":case"keyup":qn(We,d,Be)}var yn;if(bn)e:{switch(i){case"compositionstart":var Pn="onCompositionStart";break e;case"compositionend":Pn="onCompositionEnd";break e;case"compositionupdate":Pn="onCompositionUpdate";break e}Pn=void 0}else vo?ai(i,d)&&(Pn="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(Pn="onCompositionStart");Pn&&(Gs&&d.locale!=="ko"&&(vo||Pn!=="onCompositionStart"?Pn==="onCompositionEnd"&&vo&&(yn=hc()):(_a=Be,Ho="value"in _a?_a.value:_a.textContent,vo=!0)),_t=Hp(Re,Pn),0<_t.length&&(Pn=new we(Pn,i,null,d,Be),We.push({event:Pn,listeners:_t}),yn?Pn.data=yn:(yn=bo(d),yn!==null&&(Pn.data=yn)))),(yn=Rs?Ta(i,d):$o(i,d))&&(Pn=Hp(Re,"onBeforeInput"),0<Pn.length&&(_t=new we("onBeforeInput","beforeinput",null,d,Be),We.push({event:_t,listeners:Pn}),_t.data=yn)),QC(We,i,Re,d,Be)}$5(We,l)})}function Pm(i,l,d){return{instance:i,listener:l,currentTarget:d}}function Hp(i,l){for(var d=l+"Capture",m=[];i!==null;){var v=i,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=ps(i,d),v!=null&&m.unshift(Pm(i,v,_)),v=ps(i,l),v!=null&&m.push(Pm(i,v,_))),i.tag===3)return m;i=i.return}return[]}function tI(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function K5(i,l,d,m,v){for(var _=l._reactName,U=[];d!==null&&d!==m;){var X=d,fe=X.alternate,Re=X.stateNode;if(X=X.tag,fe!==null&&fe===m)break;X!==5&&X!==26&&X!==27||Re===null||(fe=Re,v?(Re=ps(d,_),Re!=null&&U.unshift(Pm(d,Re,fe))):v||(Re=ps(d,_),Re!=null&&U.push(Pm(d,Re,fe)))),d=d.return}U.length!==0&&i.push({event:l,listeners:U})}var nI=/\r\n?/g,rI=/\u0000|\uFFFD/g;function Y5(i){return(typeof i=="string"?i:""+i).replace(nI,`
`).replace(rI,"")}function X5(i,l){return l=Y5(l),Y5(i)===l}function br(i,l,d,m,v,_){switch(d){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||gs(i,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&gs(i,""+m);break;case"className":Cs(i,"class",m);break;case"tabIndex":Cs(i,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Cs(i,d,m);break;case"style":dc(i,m,_);break;case"data":if(l!=="object"){Cs(i,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||d!=="href")){i.removeAttribute(d);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(d);break}m=la(""+m),i.setAttribute(d,m);break;case"action":case"formAction":if(typeof m=="function"){i.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(d==="formAction"?(l!=="input"&&br(i,l,"name",v.name,v,null),br(i,l,"formEncType",v.formEncType,v,null),br(i,l,"formMethod",v.formMethod,v,null),br(i,l,"formTarget",v.formTarget,v,null)):(br(i,l,"encType",v.encType,v,null),br(i,l,"method",v.method,v,null),br(i,l,"target",v.target,v,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(d);break}m=la(""+m),i.setAttribute(d,m);break;case"onClick":m!=null&&(i.onclick=ni);break;case"onScroll":m!=null&&In("scroll",i);break;case"onScrollEnd":m!=null&&In("scrollend",i);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=d}}break;case"multiple":i.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":i.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){i.removeAttribute("xlink:href");break}d=la(""+m),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(d,""+m):i.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(d,""):i.removeAttribute(d);break;case"capture":case"download":m===!0?i.setAttribute(d,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(d,m):i.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?i.setAttribute(d,m):i.removeAttribute(d);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?i.removeAttribute(d):i.setAttribute(d,m);break;case"popover":In("beforetoggle",i),In("toggle",i),ja(i,"popover",m);break;case"xlinkActuate":Mr(i,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Mr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Mr(i,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Mr(i,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Mr(i,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Mr(i,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Mr(i,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Mr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Mr(i,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":ja(i,"is",m);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=Nl.get(d)||d,ja(i,d,m))}}function gb(i,l,d,m,v,_){switch(d){case"style":dc(i,m,_);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=d}}break;case"children":typeof m=="string"?gs(i,m):(typeof m=="number"||typeof m=="bigint")&&gs(i,""+m);break;case"onScroll":m!=null&&In("scroll",i);break;case"onScrollEnd":m!=null&&In("scrollend",i);break;case"onClick":m!=null&&(i.onclick=ni);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oa.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(v=d.endsWith("Capture"),l=d.slice(2,v?d.length-7:void 0),_=i[sr]||null,_=_!=null?_[d]:null,typeof _=="function"&&i.removeEventListener(l,_,v),typeof m=="function")){typeof _!="function"&&_!==null&&(d in i?i[d]=null:i.hasAttribute(d)&&i.removeAttribute(d)),i.addEventListener(l,m,v);break e}d in i?i[d]=m:m===!0?i.setAttribute(d,""):ja(i,d,m)}}}function Pa(i,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":In("error",i),In("load",i);var m=!1,v=!1,_;for(_ in d)if(d.hasOwnProperty(_)){var U=d[_];if(U!=null)switch(_){case"src":m=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:br(i,l,_,U,d,null)}}v&&br(i,l,"srcSet",d.srcSet,d,null),m&&br(i,l,"src",d.src,d,null);return;case"input":In("invalid",i);var X=_=U=v=null,fe=null,Re=null;for(m in d)if(d.hasOwnProperty(m)){var Be=d[m];if(Be!=null)switch(m){case"name":v=Be;break;case"type":U=Be;break;case"checked":fe=Be;break;case"defaultChecked":Re=Be;break;case"value":_=Be;break;case"defaultValue":X=Be;break;case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(r(137,l));break;default:br(i,l,m,Be,d,null)}}nu(i,_,X,fe,Re,U,v,!1);return;case"select":In("invalid",i),m=U=_=null;for(v in d)if(d.hasOwnProperty(v)&&(X=d[v],X!=null))switch(v){case"value":_=X;break;case"defaultValue":U=X;break;case"multiple":m=X;default:br(i,l,v,X,d,null)}l=_,d=U,i.multiple=!!m,l!=null?Hs(i,!!m,l,!1):d!=null&&Hs(i,!!m,d,!0);return;case"textarea":In("invalid",i),_=v=m=null;for(U in d)if(d.hasOwnProperty(U)&&(X=d[U],X!=null))switch(U){case"value":m=X;break;case"defaultValue":v=X;break;case"children":_=X;break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(91));break;default:br(i,l,U,X,d,null)}$i(i,m,v,_);return;case"option":for(fe in d)if(d.hasOwnProperty(fe)&&(m=d[fe],m!=null))switch(fe){case"selected":i.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:br(i,l,fe,m,d,null)}return;case"dialog":In("beforetoggle",i),In("toggle",i),In("cancel",i),In("close",i);break;case"iframe":case"object":In("load",i);break;case"video":case"audio":for(m=0;m<km.length;m++)In(km[m],i);break;case"image":In("error",i),In("load",i);break;case"details":In("toggle",i);break;case"embed":case"source":case"link":In("error",i),In("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Re in d)if(d.hasOwnProperty(Re)&&(m=d[Re],m!=null))switch(Re){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:br(i,l,Re,m,d,null)}return;default:if(wl(l)){for(Be in d)d.hasOwnProperty(Be)&&(m=d[Be],m!==void 0&&gb(i,l,Be,m,d,void 0));return}}for(X in d)d.hasOwnProperty(X)&&(m=d[X],m!=null&&br(i,l,X,m,d,null))}function sI(i,l,d,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,U=null,X=null,fe=null,Re=null,Be=null;for(Me in d){var We=d[Me];if(d.hasOwnProperty(Me)&&We!=null)switch(Me){case"checked":break;case"value":break;case"defaultValue":fe=We;default:m.hasOwnProperty(Me)||br(i,l,Me,null,m,We)}}for(var De in m){var Me=m[De];if(We=d[De],m.hasOwnProperty(De)&&(Me!=null||We!=null))switch(De){case"type":_=Me;break;case"name":v=Me;break;case"checked":Re=Me;break;case"defaultChecked":Be=Me;break;case"value":U=Me;break;case"defaultValue":X=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(r(137,l));break;default:Me!==We&&br(i,l,De,Me,m,We)}}Bo(i,U,X,fe,Re,Be,_,v);return;case"select":Me=U=X=De=null;for(_ in d)if(fe=d[_],d.hasOwnProperty(_)&&fe!=null)switch(_){case"value":break;case"multiple":Me=fe;default:m.hasOwnProperty(_)||br(i,l,_,null,m,fe)}for(v in m)if(_=m[v],fe=d[v],m.hasOwnProperty(v)&&(_!=null||fe!=null))switch(v){case"value":De=_;break;case"defaultValue":X=_;break;case"multiple":U=_;default:_!==fe&&br(i,l,v,_,m,fe)}l=X,d=U,m=Me,De!=null?Hs(i,!!d,De,!1):!!m!=!!d&&(l!=null?Hs(i,!!d,l,!0):Hs(i,!!d,d?[]:"",!1));return;case"textarea":Me=De=null;for(X in d)if(v=d[X],d.hasOwnProperty(X)&&v!=null&&!m.hasOwnProperty(X))switch(X){case"value":break;case"children":break;default:br(i,l,X,null,m,v)}for(U in m)if(v=m[U],_=d[U],m.hasOwnProperty(U)&&(v!=null||_!=null))switch(U){case"value":De=v;break;case"defaultValue":Me=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==_&&br(i,l,U,v,m,_)}cc(i,De,Me);return;case"option":for(var gt in d)if(De=d[gt],d.hasOwnProperty(gt)&&De!=null&&!m.hasOwnProperty(gt))switch(gt){case"selected":i.selected=!1;break;default:br(i,l,gt,null,m,De)}for(fe in m)if(De=m[fe],Me=d[fe],m.hasOwnProperty(fe)&&De!==Me&&(De!=null||Me!=null))switch(fe){case"selected":i.selected=De&&typeof De!="function"&&typeof De!="symbol";break;default:br(i,l,fe,De,m,Me)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Kt in d)De=d[Kt],d.hasOwnProperty(Kt)&&De!=null&&!m.hasOwnProperty(Kt)&&br(i,l,Kt,null,m,De);for(Re in m)if(De=m[Re],Me=d[Re],m.hasOwnProperty(Re)&&De!==Me&&(De!=null||Me!=null))switch(Re){case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(r(137,l));break;default:br(i,l,Re,De,m,Me)}return;default:if(wl(l)){for(var vr in d)De=d[vr],d.hasOwnProperty(vr)&&De!==void 0&&!m.hasOwnProperty(vr)&&gb(i,l,vr,void 0,m,De);for(Be in m)De=m[Be],Me=d[Be],!m.hasOwnProperty(Be)||De===Me||De===void 0&&Me===void 0||gb(i,l,Be,De,m,Me);return}}for(var je in d)De=d[je],d.hasOwnProperty(je)&&De!=null&&!m.hasOwnProperty(je)&&br(i,l,je,null,m,De);for(We in m)De=m[We],Me=d[We],!m.hasOwnProperty(We)||De===Me||De==null&&Me==null||br(i,l,We,De,m,Me)}function Q5(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function aI(){if(typeof performance.getEntriesByType=="function"){for(var i=0,l=0,d=performance.getEntriesByType("resource"),m=0;m<d.length;m++){var v=d[m],_=v.transferSize,U=v.initiatorType,X=v.duration;if(_&&X&&Q5(U)){for(U=0,X=v.responseEnd,m+=1;m<d.length;m++){var fe=d[m],Re=fe.startTime;if(Re>X)break;var Be=fe.transferSize,We=fe.initiatorType;Be&&Q5(We)&&(fe=fe.responseEnd,U+=Be*(fe<X?1:(X-Re)/(fe-Re)))}if(--m,l+=8*(_+U)/(v.duration/1e3),i++,10<i)break}}if(0<i)return l/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var pb=null,xb=null;function Gp(i){return i.nodeType===9?i:i.ownerDocument}function J5(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Z5(i,l){if(i===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&l==="foreignObject"?0:i}function yb(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var bb=null;function iI(){var i=window.event;return i&&i.type==="popstate"?i===bb?!1:(bb=i,!0):(bb=null,!1)}var eN=typeof setTimeout=="function"?setTimeout:void 0,oI=typeof clearTimeout=="function"?clearTimeout:void 0,tN=typeof Promise=="function"?Promise:void 0,lI=typeof queueMicrotask=="function"?queueMicrotask:typeof tN<"u"?function(i){return tN.resolve(null).then(i).catch(cI)}:eN;function cI(i){setTimeout(function(){throw i})}function Su(i){return i==="head"}function nN(i,l){var d=l,m=0;do{var v=d.nextSibling;if(i.removeChild(d),v&&v.nodeType===8)if(d=v.data,d==="/$"||d==="/&"){if(m===0){i.removeChild(v),Xh(l);return}m--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")m++;else if(d==="html")Lm(i.ownerDocument.documentElement);else if(d==="head"){d=i.ownerDocument.head,Lm(d);for(var _=d.firstChild;_;){var U=_.nextSibling,X=_.nodeName;_[ia]||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&_.rel.toLowerCase()==="stylesheet"||d.removeChild(_),_=U}}else d==="body"&&Lm(i.ownerDocument.body);d=v}while(d);Xh(l)}function rN(i,l){var d=i;i=0;do{var m=d.nextSibling;if(d.nodeType===1?l?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(l?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),m&&m.nodeType===8)if(d=m.data,d==="/$"){if(i===0)break;i--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||i++;d=m}while(d)}function vb(i){var l=i.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":vb(d),Hi(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}i.removeChild(d)}}function uI(i,l,d,m){for(;i.nodeType===1;){var v=d;if(i.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(m){if(!i[ia])switch(l){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(l==="input"&&i.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Io(i.nextSibling),i===null)break}return null}function dI(i,l,d){if(l==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!d||(i=Io(i.nextSibling),i===null))return null;return i}function sN(i,l){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Io(i.nextSibling),i===null))return null;return i}function wb(i){return i.data==="$?"||i.data==="$~"}function Nb(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function hI(i,l){var d=i.ownerDocument;if(i.data==="$~")i._reactRetry=l;else if(i.data!=="$?"||d.readyState!=="loading")l();else{var m=function(){l(),d.removeEventListener("DOMContentLoaded",m)};d.addEventListener("DOMContentLoaded",m),i._reactRetry=m}}function Io(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return i}var jb=null;function aN(i){i=i.nextSibling;for(var l=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"||d==="/&"){if(l===0)return Io(i.nextSibling);l--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||l++}i=i.nextSibling}return null}function iN(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(l===0)return i;l--}else d!=="/$"&&d!=="/&"||l++}i=i.previousSibling}return null}function oN(i,l,d){switch(l=Gp(d),i){case"html":if(i=l.documentElement,!i)throw Error(r(452));return i;case"head":if(i=l.head,!i)throw Error(r(453));return i;case"body":if(i=l.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Lm(i){for(var l=i.attributes;l.length;)i.removeAttributeNode(l[0]);Hi(i)}var Ro=new Map,lN=new Set;function $p(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var kc=pe.d;pe.d={f:fI,r:mI,D:gI,C:pI,L:xI,m:yI,X:vI,S:bI,M:wI};function fI(){var i=kc.f(),l=Op();return i||l}function mI(i){var l=qs(i);l!==null&&l.tag===5&&l.type==="form"?Sw(l):kc.r(i)}var Wh=typeof document>"u"?null:document;function cN(i,l,d){var m=Wh;if(m&&typeof l=="string"&&l){var v=Or(l);v='link[rel="'+i+'"][href="'+v+'"]',typeof d=="string"&&(v+='[crossorigin="'+d+'"]'),lN.has(v)||(lN.add(v),i={rel:i,crossOrigin:d,href:l},m.querySelector(v)===null&&(l=m.createElement("link"),Pa(l,"link",i),Tr(l),m.head.appendChild(l)))}}function gI(i){kc.D(i),cN("dns-prefetch",i,null)}function pI(i,l){kc.C(i,l),cN("preconnect",i,l)}function xI(i,l,d){kc.L(i,l,d);var m=Wh;if(m&&i&&l){var v='link[rel="preload"][as="'+Or(l)+'"]';l==="image"&&d&&d.imageSrcSet?(v+='[imagesrcset="'+Or(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(v+='[imagesizes="'+Or(d.imageSizes)+'"]')):v+='[href="'+Or(i)+'"]';var _=v;switch(l){case"style":_=Kh(i);break;case"script":_=Yh(i)}Ro.has(_)||(i=y({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:i,as:l},d),Ro.set(_,i),m.querySelector(v)!==null||l==="style"&&m.querySelector(Dm(_))||l==="script"&&m.querySelector(Mm(_))||(l=m.createElement("link"),Pa(l,"link",i),Tr(l),m.head.appendChild(l)))}}function yI(i,l){kc.m(i,l);var d=Wh;if(d&&i){var m=l&&typeof l.as=="string"?l.as:"script",v='link[rel="modulepreload"][as="'+Or(m)+'"][href="'+Or(i)+'"]',_=v;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Yh(i)}if(!Ro.has(_)&&(i=y({rel:"modulepreload",href:i},l),Ro.set(_,i),d.querySelector(v)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Mm(_)))return}m=d.createElement("link"),Pa(m,"link",i),Tr(m),d.head.appendChild(m)}}}function bI(i,l,d){kc.S(i,l,d);var m=Wh;if(m&&i){var v=Fa(m).hoistableStyles,_=Kh(i);l=l||"default";var U=v.get(_);if(!U){var X={loading:0,preload:null};if(U=m.querySelector(Dm(_)))X.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":l},d),(d=Ro.get(_))&&_b(i,d);var fe=U=m.createElement("link");Tr(fe),Pa(fe,"link",i),fe._p=new Promise(function(Re,Be){fe.onload=Re,fe.onerror=Be}),fe.addEventListener("load",function(){X.loading|=1}),fe.addEventListener("error",function(){X.loading|=2}),X.loading|=4,Wp(U,l,m)}U={type:"stylesheet",instance:U,count:1,state:X},v.set(_,U)}}}function vI(i,l){kc.X(i,l);var d=Wh;if(d&&i){var m=Fa(d).hoistableScripts,v=Yh(i),_=m.get(v);_||(_=d.querySelector(Mm(v)),_||(i=y({src:i,async:!0},l),(l=Ro.get(v))&&Sb(i,l),_=d.createElement("script"),Tr(_),Pa(_,"link",i),d.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(v,_))}}function wI(i,l){kc.M(i,l);var d=Wh;if(d&&i){var m=Fa(d).hoistableScripts,v=Yh(i),_=m.get(v);_||(_=d.querySelector(Mm(v)),_||(i=y({src:i,async:!0,type:"module"},l),(l=Ro.get(v))&&Sb(i,l),_=d.createElement("script"),Tr(_),Pa(_,"link",i),d.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(v,_))}}function uN(i,l,d,m){var v=(v=me.current)?$p(v):null;if(!v)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=Kh(d.href),d=Fa(v).hoistableStyles,m=d.get(l),m||(m={type:"style",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){i=Kh(d.href);var _=Fa(v).hoistableStyles,U=_.get(i);if(U||(v=v.ownerDocument||v,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,U),(_=v.querySelector(Dm(i)))&&!_._p&&(U.instance=_,U.state.loading=5),Ro.has(i)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Ro.set(i,d),_||NI(v,i,d,U.state))),l&&m===null)throw Error(r(528,""));return U}if(l&&m!==null)throw Error(r(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Yh(d),d=Fa(v).hoistableScripts,m=d.get(l),m||(m={type:"script",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Kh(i){return'href="'+Or(i)+'"'}function Dm(i){return'link[rel="stylesheet"]['+i+"]"}function dN(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function NI(i,l,d,m){i.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=i.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),Pa(l,"link",d),Tr(l),i.head.appendChild(l))}function Yh(i){return'[src="'+Or(i)+'"]'}function Mm(i){return"script[async]"+i}function hN(i,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var m=i.querySelector('style[data-href~="'+Or(d.href)+'"]');if(m)return l.instance=m,Tr(m),m;var v=y({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return m=(i.ownerDocument||i).createElement("style"),Tr(m),Pa(m,"style",v),Wp(m,d.precedence,i),l.instance=m;case"stylesheet":v=Kh(d.href);var _=i.querySelector(Dm(v));if(_)return l.state.loading|=4,l.instance=_,Tr(_),_;m=dN(d),(v=Ro.get(v))&&_b(m,v),_=(i.ownerDocument||i).createElement("link"),Tr(_);var U=_;return U._p=new Promise(function(X,fe){U.onload=X,U.onerror=fe}),Pa(_,"link",m),l.state.loading|=4,Wp(_,d.precedence,i),l.instance=_;case"script":return _=Yh(d.src),(v=i.querySelector(Mm(_)))?(l.instance=v,Tr(v),v):(m=d,(v=Ro.get(_))&&(m=y({},d),Sb(m,v)),i=i.ownerDocument||i,v=i.createElement("script"),Tr(v),Pa(v,"link",m),i.head.appendChild(v),l.instance=v);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,Wp(m,d.precedence,i));return l.instance}function Wp(i,l,d){for(var m=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=m.length?m[m.length-1]:null,_=v,U=0;U<m.length;U++){var X=m[U];if(X.dataset.precedence===l)_=X;else if(_!==v)break}_?_.parentNode.insertBefore(i,_.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(i,l.firstChild))}function _b(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.title==null&&(i.title=l.title)}function Sb(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.integrity==null&&(i.integrity=l.integrity)}var Kp=null;function fN(i,l,d){if(Kp===null){var m=new Map,v=Kp=new Map;v.set(d,m)}else v=Kp,m=v.get(d),m||(m=new Map,v.set(d,m));if(m.has(i))return m;for(m.set(i,null),d=d.getElementsByTagName(i),v=0;v<d.length;v++){var _=d[v];if(!(_[ia]||_[$n]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var U=_.getAttribute(l)||"";U=i+U;var X=m.get(U);X?X.push(_):m.set(U,[_])}}return m}function mN(i,l,d){i=i.ownerDocument||i,i.head.insertBefore(d,l==="title"?i.querySelector("head > title"):null)}function jI(i,l,d){if(d===1||l.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return i=l.disabled,typeof l.precedence=="string"&&i==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function gN(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function _I(i,l,d,m){if(d.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var v=Kh(m.href),_=l.querySelector(Dm(v));if(_){l=_._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(i.count++,i=Yp.bind(i),l.then(i,i)),d.state.loading|=4,d.instance=_,Tr(_);return}_=l.ownerDocument||l,m=dN(m),(v=Ro.get(v))&&_b(m,v),_=_.createElement("link"),Tr(_);var U=_;U._p=new Promise(function(X,fe){U.onload=X,U.onerror=fe}),Pa(_,"link",m),d.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(i.count++,d=Yp.bind(i),l.addEventListener("load",d),l.addEventListener("error",d))}}var Eb=0;function SI(i,l){return i.stylesheets&&i.count===0&&Qp(i,i.stylesheets),0<i.count||0<i.imgCount?function(d){var m=setTimeout(function(){if(i.stylesheets&&Qp(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+l);0<i.imgBytes&&Eb===0&&(Eb=62500*aI());var v=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Qp(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>Eb?50:800)+l);return i.unsuspend=d,function(){i.unsuspend=null,clearTimeout(m),clearTimeout(v)}}:null}function Yp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qp(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Xp=null;function Qp(i,l){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Xp=new Map,l.forEach(EI,i),Xp=null,Yp.call(i))}function EI(i,l){if(!(l.state.loading&4)){var d=Xp.get(i);if(d)var m=d.get(null);else{d=new Map,Xp.set(i,d);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var U=v[_];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(d.set(U.dataset.precedence,U),m=U)}m&&d.set(null,m)}v=l.instance,U=v.getAttribute("data-precedence"),_=d.get(U)||m,_===m&&d.set(null,v),d.set(U,v),this.count++,m=Yp.bind(this),v.addEventListener("load",m),v.addEventListener("error",m),_?_.parentNode.insertBefore(v,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),l.state.loading|=4}}var Om={$$typeof:D,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function AI(i,l,d,m,v,_,U,X,fe){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ms(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ms(0),this.hiddenUpdates=ms(null),this.identifierPrefix=m,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=fe,this.incompleteTransitions=new Map}function pN(i,l,d,m,v,_,U,X,fe,Re,Be,We){return i=new AI(i,l,d,U,fe,Re,Be,We,X),l=1,_===!0&&(l|=24),_=ha(3,null,null,l),i.current=_,_.stateNode=i,l=fu(),l.refCount++,i.pooledCache=l,l.refCount++,_.memoizedState={element:m,isDehydrated:d,cache:l},rt(_),i}function xN(i){return i?(i=Ks,i):Ks}function yN(i,l,d,m,v,_){v=xN(v),m.context===null?m.context=v:m.pendingContext=v,m=Wt(l),m.payload={element:d},_=_===void 0?null:_,_!==null&&(m.callback=_),d=gn(i,m,l),d!==null&&(Mi(d,i,l),Jn(d,i,l))}function bN(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<l?d:l}}function Ab(i,l){bN(i,l),(i=i.alternate)&&bN(i,l)}function vN(i){if(i.tag===13||i.tag===31){var l=Zo(i,67108864);l!==null&&Mi(l,i,67108864),Ab(i,67108864)}}function wN(i){if(i.tag===13||i.tag===31){var l=no();l=nr(l);var d=Zo(i,l);d!==null&&Mi(d,i,l),Ab(i,l)}}var Jp=!0;function TI(i,l,d,m){var v=ce.T;ce.T=null;var _=pe.p;try{pe.p=2,Tb(i,l,d,m)}finally{pe.p=_,ce.T=v}}function CI(i,l,d,m){var v=ce.T;ce.T=null;var _=pe.p;try{pe.p=8,Tb(i,l,d,m)}finally{pe.p=_,ce.T=v}}function Tb(i,l,d,m){if(Jp){var v=Cb(m);if(v===null)mb(i,l,m,Zp,d),jN(i,m);else if(RI(v,i,l,d,m))m.stopPropagation();else if(jN(i,m),l&4&&-1<II.indexOf(i)){for(;v!==null;){var _=qs(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var U=jt(_.pendingLanes);if(U!==0){var X=_;for(X.pendingLanes|=2,X.entangledLanes|=2;U;){var fe=1<<31-an(U);X.entanglements[1]|=fe,U&=~fe}Vl(_),(er&6)===0&&(Dp=sn()+500,Rm(0))}}break;case 31:case 13:X=Zo(_,2),X!==null&&Mi(X,_,2),Op(),Ab(_,2)}if(_=Cb(m),_===null&&mb(i,l,m,Zp,d),_===v)break;v=_}v!==null&&m.stopPropagation()}else mb(i,l,m,null,d)}}function Cb(i){return i=ca(i),Ib(i)}var Zp=null;function Ib(i){if(Zp=null,i=wa(i),i!==null){var l=o(i);if(l===null)i=null;else{var d=l.tag;if(d===13){if(i=c(l),i!==null)return i;i=null}else if(d===31){if(i=u(l),i!==null)return i;i=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null)}}return Zp=i,null}function NN(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(dn()){case Xt:return 2;case pn:return 8;case on:case wt:return 32;case en:return 268435456;default:return 32}default:return 32}}var Rb=!1,Eu=null,Au=null,Tu=null,Fm=new Map,Vm=new Map,Cu=[],II="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jN(i,l){switch(i){case"focusin":case"focusout":Eu=null;break;case"dragenter":case"dragleave":Au=null;break;case"mouseover":case"mouseout":Tu=null;break;case"pointerover":case"pointerout":Fm.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vm.delete(l.pointerId)}}function Um(i,l,d,m,v,_){return i===null||i.nativeEvent!==_?(i={blockedOn:l,domEventName:d,eventSystemFlags:m,nativeEvent:_,targetContainers:[v]},l!==null&&(l=qs(l),l!==null&&vN(l)),i):(i.eventSystemFlags|=m,l=i.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),i)}function RI(i,l,d,m,v){switch(l){case"focusin":return Eu=Um(Eu,i,l,d,m,v),!0;case"dragenter":return Au=Um(Au,i,l,d,m,v),!0;case"mouseover":return Tu=Um(Tu,i,l,d,m,v),!0;case"pointerover":var _=v.pointerId;return Fm.set(_,Um(Fm.get(_)||null,i,l,d,m,v)),!0;case"gotpointercapture":return _=v.pointerId,Vm.set(_,Um(Vm.get(_)||null,i,l,d,m,v)),!0}return!1}function _N(i){var l=wa(i.target);if(l!==null){var d=o(l);if(d!==null){if(l=d.tag,l===13){if(l=c(d),l!==null){i.blockedOn=l,zs(i.priority,function(){wN(d)});return}}else if(l===31){if(l=u(d),l!==null){i.blockedOn=l,zs(i.priority,function(){wN(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function e0(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var d=Cb(i.nativeEvent);if(d===null){d=i.nativeEvent;var m=new d.constructor(d.type,d);Ki=m,d.target.dispatchEvent(m),Ki=null}else return l=qs(d),l!==null&&vN(l),i.blockedOn=d,!1;l.shift()}return!0}function SN(i,l,d){e0(i)&&d.delete(l)}function kI(){Rb=!1,Eu!==null&&e0(Eu)&&(Eu=null),Au!==null&&e0(Au)&&(Au=null),Tu!==null&&e0(Tu)&&(Tu=null),Fm.forEach(SN),Vm.forEach(SN)}function t0(i,l){i.blockedOn===l&&(i.blockedOn=null,Rb||(Rb=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,kI)))}var n0=null;function EN(i){n0!==i&&(n0=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){n0===i&&(n0=null);for(var l=0;l<i.length;l+=3){var d=i[l],m=i[l+1],v=i[l+2];if(typeof m!="function"){if(Ib(m||d)===null)continue;break}var _=qs(d);_!==null&&(i.splice(l,3),l-=3,Cy(_,{pending:!0,data:v,method:d.method,action:m},m,v))}}))}function Xh(i){function l(fe){return t0(fe,i)}Eu!==null&&t0(Eu,i),Au!==null&&t0(Au,i),Tu!==null&&t0(Tu,i),Fm.forEach(l),Vm.forEach(l);for(var d=0;d<Cu.length;d++){var m=Cu[d];m.blockedOn===i&&(m.blockedOn=null)}for(;0<Cu.length&&(d=Cu[0],d.blockedOn===null);)_N(d),d.blockedOn===null&&Cu.shift();if(d=(i.ownerDocument||i).$$reactFormReplay,d!=null)for(m=0;m<d.length;m+=3){var v=d[m],_=d[m+1],U=v[sr]||null;if(typeof _=="function")U||EN(d);else if(U){var X=null;if(_&&_.hasAttribute("formAction")){if(v=_,U=_[sr]||null)X=U.formAction;else if(Ib(v)!==null)continue}else X=U.action;typeof X=="function"?d[m+1]=X:(d.splice(m,3),m-=3),EN(d)}}}function AN(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(U){return v=U})},focusReset:"manual",scroll:"manual"})}function l(){v!==null&&(v(),v=null),m||setTimeout(d,20)}function d(){if(!m&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,v=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(d,100),function(){m=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),v!==null&&(v(),v=null)}}}function kb(i){this._internalRoot=i}r0.prototype.render=kb.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(r(409));var d=l.current,m=no();yN(d,m,i,l,null,null)},r0.prototype.unmount=kb.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;yN(i.current,2,null,i,null,null),Op(),l[ts]=null}};function r0(i){this._internalRoot=i}r0.prototype.unstable_scheduleHydration=function(i){if(i){var l=es();i={blockedOn:null,target:i,priority:l};for(var d=0;d<Cu.length&&l!==0&&l<Cu[d].priority;d++);Cu.splice(d,0,i),d===0&&_N(i)}};var TN=e.version;if(TN!=="19.2.0")throw Error(r(527,TN,"19.2.0"));pe.findDOMNode=function(i){var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=f(l),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var PI={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ce,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var s0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!s0.isDisabled&&s0.supportsFiber)try{ln=s0.inject(PI),Lt=s0}catch{}}return zm.createRoot=function(i,l){if(!a(i))throw Error(r(299));var d=!1,m="",v=Dw,_=Mw,U=Ow;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(U=l.onRecoverableError)),l=pN(i,1,!1,null,null,d,m,null,v,_,U,AN),i[ts]=l.current,fb(i),new kb(l)},zm.hydrateRoot=function(i,l,d){if(!a(i))throw Error(r(299));var m=!1,v="",_=Dw,U=Mw,X=Ow,fe=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onUncaughtError!==void 0&&(_=d.onUncaughtError),d.onCaughtError!==void 0&&(U=d.onCaughtError),d.onRecoverableError!==void 0&&(X=d.onRecoverableError),d.formState!==void 0&&(fe=d.formState)),l=pN(i,1,!0,l,d??null,m,v,fe,_,U,X,AN),l.context=xN(null),d=l.current,m=no(),m=nr(m),v=Wt(m),v.callback=null,gn(d,v,m),d=m,l.current.lanes=d,Ct(l,d),Vl(l),i[ts]=l.current,fb(i),new r0(l)},zm.version="19.2.0",zm}var FN;function GI(){if(FN)return Db.exports;FN=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Db.exports=HI(),Db.exports}var $I=GI();B6();function vg(){return vg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},vg.apply(this,arguments)}var qu;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(qu||(qu={}));const VN="popstate";function WI(n){n===void 0&&(n={});function e(r,a){let{pathname:o,search:c,hash:u}=r.location;return R1("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:Y0(a)}return YI(e,t,null,n)}function _s(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function O2(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KI(){return Math.random().toString(36).substr(2,8)}function UN(n,e){return{usr:n.state,key:n.key,idx:e}}function R1(n,e,t,r){return t===void 0&&(t=null),vg({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Kf(e):e,{state:t,key:e&&e.key||r||KI()})}function Y0(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Kf(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function YI(n,e,t,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:o=!1}=r,c=a.history,u=qu.Pop,h=null,f=g();f==null&&(f=0,c.replaceState(vg({},c.state,{idx:f}),""));function g(){return(c.state||{idx:null}).idx}function y(){u=qu.Pop;let j=g(),E=j==null?null:j-f;f=j,h&&h({action:u,location:S.location,delta:E})}function w(j,E){u=qu.Push;let L=R1(S.location,j,E);f=g()+1;let D=UN(L,f),O=S.createHref(L);try{c.pushState(D,"",O)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;a.location.assign(O)}o&&h&&h({action:u,location:S.location,delta:1})}function b(j,E){u=qu.Replace;let L=R1(S.location,j,E);f=g();let D=UN(L,f),O=S.createHref(L);c.replaceState(D,"",O),o&&h&&h({action:u,location:S.location,delta:0})}function T(j){let E=a.location.origin!=="null"?a.location.origin:a.location.href,L=typeof j=="string"?j:Y0(j);return L=L.replace(/ $/,"%20"),_s(E,"No window.location.(origin|href) available to create URL for href: "+L),new URL(L,E)}let S={get action(){return u},get location(){return n(a,c)},listen(j){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(VN,y),h=j,()=>{a.removeEventListener(VN,y),h=null}},createHref(j){return e(a,j)},createURL:T,encodeLocation(j){let E=T(j);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:w,replace:b,go(j){return c.go(j)}};return S}var BN;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(BN||(BN={}));function XI(n,e,t){return t===void 0&&(t="/"),QI(n,e,t)}function QI(n,e,t,r){let a=typeof e=="string"?Kf(e):e,o=F2(a.pathname||"/",t);if(o==null)return null;let c=z6(n);JI(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let f=u8(o);u=o8(c[h],f)}return u}function z6(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let a=(o,c,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};h.relativePath.startsWith("/")&&(_s(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let f=$u([r,h.relativePath]),g=t.concat(h);o.children&&o.children.length>0&&(_s(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),z6(o.children,e,g,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:a8(f,o.index),routesMeta:g})};return n.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))a(o,c);else for(let h of q6(o.path))a(o,c,h)}),e}function q6(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return a?[o,""]:[o];let c=q6(r.join("/")),u=[];return u.push(...c.map(h=>h===""?o:[o,h].join("/"))),a&&u.push(...c),u.map(h=>n.startsWith("/")&&h===""?"/":h)}function JI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:i8(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const ZI=/^:[\w-]+$/,e8=3,t8=2,n8=1,r8=10,s8=-2,zN=n=>n==="*";function a8(n,e){let t=n.split("/"),r=t.length;return t.some(zN)&&(r+=s8),e&&(r+=t8),t.filter(a=>!zN(a)).reduce((a,o)=>a+(ZI.test(o)?e8:o===""?n8:r8),r)}function i8(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function o8(n,e,t){let{routesMeta:r}=n,a={},o="/",c=[];for(let u=0;u<r.length;++u){let h=r[u],f=u===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",y=l8({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),w=h.route;if(!y)return null;Object.assign(a,y.params),c.push({params:a,pathname:$u([o,y.pathname]),pathnameBase:g8($u([o,y.pathnameBase])),route:w}),y.pathnameBase!=="/"&&(o=$u([o,y.pathnameBase]))}return c}function l8(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=c8(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:r.reduce((f,g,y)=>{let{paramName:w,isOptional:b}=g;if(w==="*"){let S=u[y]||"";c=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const T=u[y];return b&&!T?f[w]=void 0:f[w]=(T||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:n}}function c8(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),O2(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function u8(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return O2(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function F2(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const d8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,h8=n=>d8.test(n);function f8(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?Kf(n):n,o;if(t)if(h8(t))o=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),O2(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+t))}t.startsWith("/")?o=qN(t.substring(1),"/"):o=qN(t,e)}else o=e;return{pathname:o,search:p8(r),hash:x8(a)}}function qN(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Vb(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function m8(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function V2(n,e){let t=m8(n);return e?t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function U2(n,e,t,r){r===void 0&&(r=!1);let a;typeof n=="string"?a=Kf(n):(a=vg({},n),_s(!a.pathname||!a.pathname.includes("?"),Vb("?","pathname","search",a)),_s(!a.pathname||!a.pathname.includes("#"),Vb("#","pathname","hash",a)),_s(!a.search||!a.search.includes("#"),Vb("#","search","hash",a)));let o=n===""||a.pathname==="",c=o?"/":a.pathname,u;if(c==null)u=t;else{let y=e.length-1;if(!r&&c.startsWith("..")){let w=c.split("/");for(;w[0]==="..";)w.shift(),y-=1;a.pathname=w.join("/")}u=y>=0?e[y]:"/"}let h=f8(a,u),f=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}const $u=n=>n.join("/").replace(/\/\/+/g,"/"),g8=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),p8=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,x8=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function y8(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const H6=["post","put","patch","delete"];new Set(H6);const b8=["get",...H6];new Set(b8);function wg(){return wg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},wg.apply(this,arguments)}const B2=K.createContext(null),v8=K.createContext(null),id=K.createContext(null),Px=K.createContext(null),nc=K.createContext({outlet:null,matches:[],isDataRoute:!1}),G6=K.createContext(null);function w8(n,e){let{relative:t}=e===void 0?{}:e;Yf()||_s(!1);let{basename:r,navigator:a}=K.useContext(id),{hash:o,pathname:c,search:u}=W6(n,{relative:t}),h=c;return r!=="/"&&(h=c==="/"?r:$u([r,c])),a.createHref({pathname:h,search:u,hash:o})}function Yf(){return K.useContext(Px)!=null}function od(){return Yf()||_s(!1),K.useContext(Px).location}function $6(n){K.useContext(id).static||K.useLayoutEffect(n)}function Dr(){let{isDataRoute:n}=K.useContext(nc);return n?M8():N8()}function N8(){Yf()||_s(!1);let n=K.useContext(B2),{basename:e,future:t,navigator:r}=K.useContext(id),{matches:a}=K.useContext(nc),{pathname:o}=od(),c=JSON.stringify(V2(a,t.v7_relativeSplatPath)),u=K.useRef(!1);return $6(()=>{u.current=!0}),K.useCallback(function(f,g){if(g===void 0&&(g={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let y=U2(f,JSON.parse(c),o,g.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:$u([e,y.pathname])),(g.replace?r.replace:r.push)(y,g.state,g)},[e,r,c,o,n])}const j8=K.createContext(null);function _8(n){let e=K.useContext(nc).outlet;return e&&K.createElement(j8.Provider,{value:n},e)}function Xc(){let{matches:n}=K.useContext(nc),e=n[n.length-1];return e?e.params:{}}function W6(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=K.useContext(id),{matches:a}=K.useContext(nc),{pathname:o}=od(),c=JSON.stringify(V2(a,r.v7_relativeSplatPath));return K.useMemo(()=>U2(n,JSON.parse(c),o,t==="path"),[n,c,o,t])}function S8(n,e){return E8(n,e)}function E8(n,e,t,r){Yf()||_s(!1);let{navigator:a}=K.useContext(id),{matches:o}=K.useContext(nc),c=o[o.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let f=od(),g;if(e){var y;let j=typeof e=="string"?Kf(e):e;h==="/"||(y=j.pathname)!=null&&y.startsWith(h)||_s(!1),g=j}else g=f;let w=g.pathname||"/",b=w;if(h!=="/"){let j=h.replace(/^\//,"").split("/");b="/"+w.replace(/^\//,"").split("/").slice(j.length).join("/")}let T=XI(n,{pathname:b}),S=R8(T&&T.map(j=>Object.assign({},j,{params:Object.assign({},u,j.params),pathname:$u([h,a.encodeLocation?a.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?h:$u([h,a.encodeLocation?a.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),o,t,r);return e&&S?K.createElement(Px.Provider,{value:{location:wg({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:qu.Pop}},S):S}function A8(){let n=D8(),e=y8(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:a},t):null,null)}const T8=K.createElement(A8,null);class C8 extends K.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?K.createElement(nc.Provider,{value:this.props.routeContext},K.createElement(G6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function I8(n){let{routeContext:e,match:t,children:r}=n,a=K.useContext(B2);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),K.createElement(nc.Provider,{value:e},r)}function R8(n,e,t,r){var a;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var o;if(!t)return null;if(t.errors)n=t.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,u=(a=t)==null?void 0:a.errors;if(u!=null){let g=c.findIndex(y=>y.route.id&&u?.[y.route.id]!==void 0);g>=0||_s(!1),c=c.slice(0,Math.min(c.length,g+1))}let h=!1,f=-1;if(t&&r&&r.v7_partialHydration)for(let g=0;g<c.length;g++){let y=c[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=g),y.route.id){let{loaderData:w,errors:b}=t,T=y.route.loader&&w[y.route.id]===void 0&&(!b||b[y.route.id]===void 0);if(y.route.lazy||T){h=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((g,y,w)=>{let b,T=!1,S=null,j=null;t&&(b=u&&y.route.id?u[y.route.id]:void 0,S=y.route.errorElement||T8,h&&(f<0&&w===0?(O8("route-fallback"),T=!0,j=null):f===w&&(T=!0,j=y.route.hydrateFallbackElement||null)));let E=e.concat(c.slice(0,w+1)),L=()=>{let D;return b?D=S:T?D=j:y.route.Component?D=K.createElement(y.route.Component,null):y.route.element?D=y.route.element:D=g,K.createElement(I8,{match:y,routeContext:{outlet:g,matches:E,isDataRoute:t!=null},children:D})};return t&&(y.route.ErrorBoundary||y.route.errorElement||w===0)?K.createElement(C8,{location:t.location,revalidation:t.revalidation,component:S,error:b,children:L(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):L()},null)}var K6=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(K6||{}),Y6=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(Y6||{});function k8(n){let e=K.useContext(B2);return e||_s(!1),e}function P8(n){let e=K.useContext(v8);return e||_s(!1),e}function L8(n){let e=K.useContext(nc);return e||_s(!1),e}function X6(n){let e=L8(),t=e.matches[e.matches.length-1];return t.route.id||_s(!1),t.route.id}function D8(){var n;let e=K.useContext(G6),t=P8(),r=X6();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function M8(){let{router:n}=k8(K6.UseNavigateStable),e=X6(Y6.UseNavigateStable),t=K.useRef(!1);return $6(()=>{t.current=!0}),K.useCallback(function(a,o){o===void 0&&(o={}),t.current&&(typeof a=="number"?n.navigate(a):n.navigate(a,wg({fromRouteId:e},o)))},[n,e])}const HN={};function O8(n,e,t){HN[n]||(HN[n]=!0)}function F8(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function z2(n){let{to:e,replace:t,state:r,relative:a}=n;Yf()||_s(!1);let{future:o,static:c}=K.useContext(id),{matches:u}=K.useContext(nc),{pathname:h}=od(),f=Dr(),g=U2(e,V2(u,o.v7_relativeSplatPath),h,a==="path"),y=JSON.stringify(g);return K.useEffect(()=>f(JSON.parse(y),{replace:t,state:r,relative:a}),[f,y,a,t,r]),null}function Q6(n){return _8(n.context)}function Bt(n){_s(!1)}function V8(n){let{basename:e="/",children:t=null,location:r,navigationType:a=qu.Pop,navigator:o,static:c=!1,future:u}=n;Yf()&&_s(!1);let h=e.replace(/^\/*/,"/"),f=K.useMemo(()=>({basename:h,navigator:o,static:c,future:wg({v7_relativeSplatPath:!1},u)}),[h,u,o,c]);typeof r=="string"&&(r=Kf(r));let{pathname:g="/",search:y="",hash:w="",state:b=null,key:T="default"}=r,S=K.useMemo(()=>{let j=F2(g,h);return j==null?null:{location:{pathname:j,search:y,hash:w,state:b,key:T},navigationType:a}},[h,g,y,w,b,T,a]);return S==null?null:K.createElement(id.Provider,{value:f},K.createElement(Px.Provider,{children:t,value:S}))}function U8(n){let{children:e,location:t}=n;return S8(k1(e),t)}new Promise(()=>{});function k1(n,e){e===void 0&&(e=[]);let t=[];return K.Children.forEach(n,(r,a)=>{if(!K.isValidElement(r))return;let o=[...e,a];if(r.type===K.Fragment){t.push.apply(t,k1(r.props.children,o));return}r.type!==Bt&&_s(!1),!r.props.index||!r.props.children||_s(!1);let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=k1(r.props.children,o)),t.push(c)}),t}function P1(){return P1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},P1.apply(this,arguments)}function B8(n,e){if(n==null)return{};var t={},r=Object.keys(n),a,o;for(o=0;o<r.length;o++)a=r[o],!(e.indexOf(a)>=0)&&(t[a]=n[a]);return t}function z8(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function q8(n,e){return n.button===0&&(!e||e==="_self")&&!z8(n)}const H8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],G8="6";try{window.__reactRouterVersion=G8}catch{}const $8="startTransition",GN=UI[$8];function W8(n){let{basename:e,children:t,future:r,window:a}=n,o=K.useRef();o.current==null&&(o.current=WI({window:a,v5Compat:!0}));let c=o.current,[u,h]=K.useState({action:c.action,location:c.location}),{v7_startTransition:f}=r||{},g=K.useCallback(y=>{f&&GN?GN(()=>h(y)):h(y)},[h,f]);return K.useLayoutEffect(()=>c.listen(g),[c,g]),K.useEffect(()=>F8(r),[r]),K.createElement(V8,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:c,future:r})}const K8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Y8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_n=K.forwardRef(function(e,t){let{onClick:r,relative:a,reloadDocument:o,replace:c,state:u,target:h,to:f,preventScrollReset:g,viewTransition:y}=e,w=B8(e,H8),{basename:b}=K.useContext(id),T,S=!1;if(typeof f=="string"&&Y8.test(f)&&(T=f,K8))try{let D=new URL(window.location.href),O=f.startsWith("//")?new URL(D.protocol+f):new URL(f),te=F2(O.pathname,b);O.origin===D.origin&&te!=null?f=te+O.search+O.hash:S=!0}catch{}let j=w8(f,{relative:a}),E=X8(f,{replace:c,state:u,target:h,preventScrollReset:g,relative:a,viewTransition:y});function L(D){r&&r(D),D.defaultPrevented||E(D)}return K.createElement("a",P1({},w,{href:T||j,onClick:S||o?r:L,ref:t,target:h}))});var $N;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})($N||($N={}));var WN;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(WN||(WN={}));function X8(n,e){let{target:t,replace:r,state:a,preventScrollReset:o,relative:c,viewTransition:u}=e===void 0?{}:e,h=Dr(),f=od(),g=W6(n,{relative:c});return K.useCallback(y=>{if(q8(y,t)){y.preventDefault();let w=r!==void 0?r:Y0(f)===Y0(g);h(n,{replace:w,state:a,preventScrollReset:o,relative:c,viewTransition:u})}},[f,h,g,r,a,t,n,o,c,u])}const Q8={en:{nav:{home:"Home",about:"About Village",panchayat:"Gram Panchayat",services:"Services",schemes:"Schemes",downloads:"Forms & Downloads",education:"Education & Anganwadi",gallery:"Gallery",financials:"Financials",notices:"Notices & Tenders",contact:"Contact"},home:{welcomeTitle:"Welcome to",knowMore:"Know More",quickInfo:"Quick Information",phone:"Phone",email:"Email",address:"Address",timings:"Office Timings",quickLinks:"Quick Links",payPropertyTax:"Pay Property Tax",payWaterTax:"Pay Water Tax",viewSchemes:"View Schemes",downloadForms:"Download Forms",latestNotices:"Latest Notices",viewAllNotices:"View All Notices",highlights:"Highlights",members:"Gram Panchayat Members",popularSchemes:"Popular Schemes",importantServices:"Important Services",recentPrograms:"Recent Programs & Events",viewAllPrograms:"View All Programs"},common:{learnMore:"Learn More",readMore:"Read More",viewDetails:"View Details",download:"Download",submit:"Submit",cancel:"Cancel",search:"Search",filter:"Filter",all:"All",active:"Active",closed:"Closed",upcoming:"Upcoming",loading:"Loading...",noResults:"No results found"},footer:{contactUs:"Contact Us",quickLinks:"Quick Links",importantLinks:"Important Links",followUs:"Follow Us",copyright:"All rights reserved"}},mr:{nav:{home:"",about:"",panchayat:"",services:"",schemes:"",downloads:"  ",education:"  ",gallery:"",financials:" ",notices:"  ",contact:""},home:{welcomeTitle:"  ",knowMore:" ",quickInfo:" ",phone:"",email:"",address:"",timings:" ",quickLinks:" ",payPropertyTax:"  ",payWaterTax:"  ",viewSchemes:" ",downloadForms:"  ",latestNotices:" ",viewAllNotices:"  ",highlights:" ",members:" ",popularSchemes:" ",importantServices:" ",recentPrograms:" ",viewAllPrograms:"  "},common:{learnMore:"  ",readMore:" ",viewDetails:" ",download:"",submit:" ",cancel:" ",search:"",filter:"",all:"",active:"",closed:"",upcoming:"",loading:"  ...",noResults:"   "},footer:{contactUs:"  ",quickLinks:" ",importantLinks:" ",followUs:"  ",copyright:"  "}}},J6=K.createContext(),hs=()=>{const n=K.useContext(J6);if(!n)throw new Error("useLanguage must be used within a LanguageProvider");return n},J8=({children:n})=>{const[e,t]=K.useState(()=>localStorage.getItem("language")||"mr");K.useEffect(()=>{localStorage.setItem("language",e),document.documentElement.lang=e},[e]);const c={language:e,setLanguage:t,toggleLanguage:()=>{t(u=>u==="en"?"mr":"en")},t:u=>{const h=u.split(".");let f=Q8[e];for(const g of h)f=f?.[g];return f||u},getContent:u=>u?typeof u=="string"?u:u[e]||u.en||u.mr||"":""};return s.jsx(J6.Provider,{value:c,children:n})},Z8=()=>{};var KN={};const Z6=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},eR=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const o=n[t++];e[r++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=n[t++],c=n[t++],u=n[t++],h=((a&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],c=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(o&63)<<6|c&63)}}return e.join("")},e3={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const o=n[a],c=a+1<n.length,u=c?n[a+1]:0,h=a+2<n.length,f=h?n[a+2]:0,g=o>>2,y=(o&3)<<4|u>>4;let w=(u&15)<<2|f>>6,b=f&63;h||(b=64,c||(w=64)),r.push(t[g],t[y],t[w],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Z6(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):eR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const o=t[n.charAt(a++)],u=a<n.length?t[n.charAt(a)]:0;++a;const f=a<n.length?t[n.charAt(a)]:64;++a;const y=a<n.length?t[n.charAt(a)]:64;if(++a,o==null||u==null||f==null||y==null)throw new tR;const w=o<<2|u>>4;if(r.push(w),f!==64){const b=u<<4&240|f>>2;if(r.push(b),y!==64){const T=f<<6&192|y;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class tR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nR=function(n){const e=Z6(n);return e3.encodeByteArray(e,!0)},X0=function(n){return nR(n).replace(/\./g,"")},t3=function(n){try{return e3.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function n3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const rR=()=>n3().__FIREBASE_DEFAULTS__,sR=()=>{if(typeof process>"u"||typeof KN>"u")return;const n=KN.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},aR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&t3(n[1]);return e&&JSON.parse(e)},Lx=()=>{try{return Z8()||rR()||sR()||aR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},r3=n=>Lx()?.emulatorHosts?.[n],s3=n=>{const e=r3(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},a3=()=>Lx()?.config,i3=n=>Lx()?.[`_${n}`];class iR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function ld(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function q2(n){return(await fetch(n,{credentials:"include"})).ok}function o3(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[X0(JSON.stringify(t)),X0(JSON.stringify(c)),""].join(".")}const sg={};function oR(){const n={prod:[],emulator:[]};for(const e of Object.keys(sg))sg[e]?n.emulator.push(e):n.prod.push(e);return n}function lR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let YN=!1;function H2(n,e){if(typeof window>"u"||typeof document>"u"||!ld(window.location.host)||sg[n]===e||sg[n]||YN)return;sg[n]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",o=oR().prod.length>0;function c(){const w=document.getElementById(r);w&&w.remove()}function u(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function h(w,b){w.setAttribute("width","24"),w.setAttribute("id",b),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function f(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{YN=!0,c()},w}function g(w,b){w.setAttribute("id",b),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function y(){const w=lR(r),b=t("text"),T=document.getElementById(b)||document.createElement("span"),S=t("learnmore"),j=document.getElementById(S)||document.createElement("a"),E=t("preprendIcon"),L=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const D=w.element;u(D),g(j,S);const O=f();h(L,E),D.append(L,T,j,O),document.body.appendChild(D)}o?(T.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function ta(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ta())}function l3(){const n=Lx()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function hR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fR(){const n=ta();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function c3(){return!l3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function u3(){return!l3()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function d3(){try{return typeof indexedDB=="object"}catch{return!1}}function mR(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const gR="FirebaseError";class rc extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=gR,Object.setPrototypeOf(this,rc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qg.prototype.create)}}class qg{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,o=this.errors[e],c=o?pR(o,r):"Error",u=`${this.serviceName}: ${c} (${a}).`;return new rc(a,u,r)}}function pR(n,e){return n.replace(xR,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const xR=/\{\$([^}]+)}/g;function yR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Yd(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const o=n[a],c=e[a];if(XN(o)&&XN(c)){if(!Yd(o,c))return!1}else if(o!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function XN(n){return n!==null&&typeof n=="object"}function Hg(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Qm(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,o]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(o)}}),e}function Jm(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function bR(n,e){const t=new vR(n,e);return t.subscribe.bind(t)}class vR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");wR(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Ub),a.error===void 0&&(a.error=Ub),a.complete===void 0&&(a.complete=Ub);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ub(){}function Ar(n){return n&&n._delegate?n._delegate:n}class Zu{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Rd="[DEFAULT]";class NR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new iR;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_R(e))try{this.getOrInitializeService({instanceIdentifier:Rd})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:a});r.resolve(o)}catch{}}}}clearInstance(e=Rd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Rd){return this.instances.has(e)}getOptions(e=Rd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const o=this.instances.get(r);return o&&e(o,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Rd){return this.component?this.component.multipleInstances?e:Rd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jR(n){return n===Rd?void 0:n}function _R(n){return n.instantiationMode==="EAGER"}class SR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new NR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ln;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ln||(Ln={}));const ER={debug:Ln.DEBUG,verbose:Ln.VERBOSE,info:Ln.INFO,warn:Ln.WARN,error:Ln.ERROR,silent:Ln.SILENT},AR=Ln.INFO,TR={[Ln.DEBUG]:"log",[Ln.VERBOSE]:"log",[Ln.INFO]:"info",[Ln.WARN]:"warn",[Ln.ERROR]:"error"},CR=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=TR[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class G2{constructor(e){this.name=e,this._logLevel=AR,this._logHandler=CR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ln))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ER[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ln.DEBUG,...e),this._logHandler(this,Ln.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ln.VERBOSE,...e),this._logHandler(this,Ln.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ln.INFO,...e),this._logHandler(this,Ln.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ln.WARN,...e),this._logHandler(this,Ln.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ln.ERROR,...e),this._logHandler(this,Ln.ERROR,...e)}}const IR=(n,e)=>e.some(t=>n instanceof t);let QN,JN;function RR(){return QN||(QN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kR(){return JN||(JN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h3=new WeakMap,L1=new WeakMap,f3=new WeakMap,Bb=new WeakMap,$2=new WeakMap;function PR(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(Wu(n.result)),a()},c=()=>{r(n.error),a()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&h3.set(t,n)}).catch(()=>{}),$2.set(e,n),e}function LR(n){if(L1.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),a()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});L1.set(n,e)}let D1={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return L1.get(n);if(e==="objectStoreNames")return n.objectStoreNames||f3.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wu(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function DR(n){D1=n(D1)}function MR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(zb(this),e,...t);return f3.set(r,e.sort?e.sort():[e]),Wu(r)}:kR().includes(n)?function(...e){return n.apply(zb(this),e),Wu(h3.get(this))}:function(...e){return Wu(n.apply(zb(this),e))}}function OR(n){return typeof n=="function"?MR(n):(n instanceof IDBTransaction&&LR(n),IR(n,RR())?new Proxy(n,D1):n)}function Wu(n){if(n instanceof IDBRequest)return PR(n);if(Bb.has(n))return Bb.get(n);const e=OR(n);return e!==n&&(Bb.set(n,e),$2.set(e,n)),e}const zb=n=>$2.get(n);function FR(n,e,{blocked:t,upgrade:r,blocking:a,terminated:o}={}){const c=indexedDB.open(n,e),u=Wu(c);return r&&c.addEventListener("upgradeneeded",h=>{r(Wu(c.result),h.oldVersion,h.newVersion,Wu(c.transaction),h)}),t&&c.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),a&&h.addEventListener("versionchange",f=>a(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const VR=["get","getKey","getAll","getAllKeys","count"],UR=["put","add","delete","clear"],qb=new Map;function ZN(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(qb.get(e))return qb.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=UR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||VR.includes(t)))return;const o=async function(c,...u){const h=this.transaction(c,a?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),a&&h.done]))[0]};return qb.set(e,o),o}DR(n=>({...n,get:(e,t,r)=>ZN(e,t)||n.get(e,t,r),has:(e,t)=>!!ZN(e,t)||n.has(e,t)}));class BR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(zR(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function zR(n){return n.getComponent()?.type==="VERSION"}const M1="@firebase/app",ej="0.14.6";const Gc=new G2("@firebase/app"),qR="@firebase/app-compat",HR="@firebase/analytics-compat",GR="@firebase/analytics",$R="@firebase/app-check-compat",WR="@firebase/app-check",KR="@firebase/auth",YR="@firebase/auth-compat",XR="@firebase/database",QR="@firebase/data-connect",JR="@firebase/database-compat",ZR="@firebase/functions",ek="@firebase/functions-compat",tk="@firebase/installations",nk="@firebase/installations-compat",rk="@firebase/messaging",sk="@firebase/messaging-compat",ak="@firebase/performance",ik="@firebase/performance-compat",ok="@firebase/remote-config",lk="@firebase/remote-config-compat",ck="@firebase/storage",uk="@firebase/storage-compat",dk="@firebase/firestore",hk="@firebase/ai",fk="@firebase/firestore-compat",mk="firebase",gk="12.6.0";const O1="[DEFAULT]",pk={[M1]:"fire-core",[qR]:"fire-core-compat",[GR]:"fire-analytics",[HR]:"fire-analytics-compat",[WR]:"fire-app-check",[$R]:"fire-app-check-compat",[KR]:"fire-auth",[YR]:"fire-auth-compat",[XR]:"fire-rtdb",[QR]:"fire-data-connect",[JR]:"fire-rtdb-compat",[ZR]:"fire-fn",[ek]:"fire-fn-compat",[tk]:"fire-iid",[nk]:"fire-iid-compat",[rk]:"fire-fcm",[sk]:"fire-fcm-compat",[ak]:"fire-perf",[ik]:"fire-perf-compat",[ok]:"fire-rc",[lk]:"fire-rc-compat",[ck]:"fire-gcs",[uk]:"fire-gcs-compat",[dk]:"fire-fst",[fk]:"fire-fst-compat",[hk]:"fire-vertex","fire-js":"fire-js",[mk]:"fire-js-all"};const Q0=new Map,xk=new Map,F1=new Map;function tj(n,e){try{n.container.addComponent(e)}catch(t){Gc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Xd(n){const e=n.name;if(F1.has(e))return Gc.debug(`There were multiple attempts to register component ${e}.`),!1;F1.set(e,n);for(const t of Q0.values())tj(t,n);for(const t of xk.values())tj(t,n);return!0}function Dx(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ao(n){return n==null?!1:n.settings!==void 0}const yk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ku=new qg("app","Firebase",yk);class bk{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ku.create("app-deleted",{appName:this._name})}}const dh=gk;function m3(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:O1,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw Ku.create("bad-app-name",{appName:String(a)});if(t||(t=a3()),!t)throw Ku.create("no-options");const o=Q0.get(a);if(o){if(Yd(t,o.options)&&Yd(r,o.config))return o;throw Ku.create("duplicate-app",{appName:a})}const c=new SR(a);for(const h of F1.values())c.addComponent(h);const u=new bk(t,r,c);return Q0.set(a,u),u}function W2(n=O1){const e=Q0.get(n);if(!e&&n===O1&&a3())return m3();if(!e)throw Ku.create("no-app",{appName:n});return e}function Kl(n,e,t){let r=pk[n]??n;t&&(r+=`-${t}`);const a=r.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gc.warn(c.join(" "));return}Xd(new Zu(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const vk="firebase-heartbeat-database",wk=1,Ng="firebase-heartbeat-store";let Hb=null;function g3(){return Hb||(Hb=FR(vk,wk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ng)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ku.create("idb-open",{originalErrorMessage:n.message})})),Hb}async function Nk(n){try{const t=(await g3()).transaction(Ng),r=await t.objectStore(Ng).get(p3(n));return await t.done,r}catch(e){if(e instanceof rc)Gc.warn(e.message);else{const t=Ku.create("idb-get",{originalErrorMessage:e?.message});Gc.warn(t.message)}}}async function nj(n,e){try{const r=(await g3()).transaction(Ng,"readwrite");await r.objectStore(Ng).put(e,p3(n)),await r.done}catch(t){if(t instanceof rc)Gc.warn(t.message);else{const r=Ku.create("idb-set",{originalErrorMessage:t?.message});Gc.warn(r.message)}}}function p3(n){return`${n.name}!${n.options.appId}`}const jk=1024,_k=30;class Sk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ak(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=rj();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>_k){const a=Tk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Gc.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=rj(),{heartbeatsToSend:t,unsentEntries:r}=Ek(this._heartbeatsCache.heartbeats),a=X0(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Gc.warn(e),""}}}function rj(){return new Date().toISOString().substring(0,10)}function Ek(n,e=jk){const t=[];let r=n.slice();for(const a of n){const o=t.find(c=>c.agent===a.agent);if(o){if(o.dates.push(a.date),sj(t)>e){o.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),sj(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Ak{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return d3()?mR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Nk(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return nj(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return nj(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function sj(n){return X0(JSON.stringify({version:2,heartbeats:n})).length}function Tk(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Ck(n){Xd(new Zu("platform-logger",e=>new BR(e),"PRIVATE")),Xd(new Zu("heartbeat",e=>new Sk(e),"PRIVATE")),Kl(M1,ej,n),Kl(M1,ej,"esm2020"),Kl("fire-js","")}Ck("");function x3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ik=x3,y3=new qg("auth","Firebase",x3());const J0=new G2("@firebase/auth");function Rk(n,...e){J0.logLevel<=Ln.WARN&&J0.warn(`Auth (${dh}): ${n}`,...e)}function A0(n,...e){J0.logLevel<=Ln.ERROR&&J0.error(`Auth (${dh}): ${n}`,...e)}function dl(n,...e){throw K2(n,...e)}function Yl(n,...e){return K2(n,...e)}function b3(n,e,t){const r={...Ik(),[e]:t};return new qg("auth","Firebase",r).create(e,{appName:n.name})}function qc(n){return b3(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function K2(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return y3.create(n,...e)}function Qt(n,e,...t){if(!n)throw K2(e,...t)}function Vc(n){const e="INTERNAL ASSERTION FAILED: "+n;throw A0(e),new Error(e)}function $c(n,e){n||Vc(e)}function V1(){return typeof self<"u"&&self.location?.href||""}function kk(){return aj()==="http:"||aj()==="https:"}function aj(){return typeof self<"u"&&self.location?.protocol||null}function Pk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kk()||dR()||"connection"in navigator)?navigator.onLine:!0}function Lk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Gg{constructor(e,t){this.shortDelay=e,this.longDelay=t,$c(t>e,"Short delay should be less than long delay!"),this.isMobile=cR()||hR()}get(){return Pk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Y2(n,e){$c(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class v3{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Dk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Mk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ok=new Gg(3e4,6e4);function Qc(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Jc(n,e,t,r,a={}){return w3(n,a,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const u=Hg({key:n.config.apiKey,...c}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:h,...o};return uR()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&ld(n.emulatorConfig.host)&&(f.credentials="include"),v3.fetch()(await N3(n,n.config.apiHost,t,u),f)})}async function w3(n,e,t){n._canInitEmulator=!1;const r={...Dk,...e};try{const a=new Vk(n),o=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw a0(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw a0(n,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw a0(n,"email-already-in-use",c);if(h==="USER_DISABLED")throw a0(n,"user-disabled",c);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw b3(n,g,f);dl(n,g)}}catch(a){if(a instanceof rc)throw a;dl(n,"network-request-failed",{message:String(a)})}}async function $g(n,e,t,r,a={}){const o=await Jc(n,e,t,r,a);return"mfaPendingCredential"in o&&dl(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function N3(n,e,t,r){const a=`${e}${t}?${r}`,o=n,c=o.config.emulator?Y2(n.config,a):`${n.config.apiScheme}://${a}`;return Mk.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function Fk(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Vk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Yl(this.auth,"network-request-failed")),Ok.get())})}}function a0(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Yl(n,e,r);return a.customData._tokenResponse=t,a}function ij(n){return n!==void 0&&n.enterprise!==void 0}class Uk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Fk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Bk(n,e){return Jc(n,"GET","/v2/recaptchaConfig",Qc(n,e))}async function zk(n,e){return Jc(n,"POST","/v1/accounts:delete",e)}async function Z0(n,e){return Jc(n,"POST","/v1/accounts:lookup",e)}function ag(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qk(n,e=!1){const t=Ar(n),r=await t.getIdToken(e),a=X2(r);Qt(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,c=o?.sign_in_provider;return{claims:a,token:r,authTime:ag(Gb(a.auth_time)),issuedAtTime:ag(Gb(a.iat)),expirationTime:ag(Gb(a.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Gb(n){return Number(n)*1e3}function X2(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return A0("JWT malformed, contained fewer than 3 sections"),null;try{const a=t3(t);return a?JSON.parse(a):(A0("Failed to decode base64 JWT payload"),null)}catch(a){return A0("Caught error parsing JWT payload as JSON",a?.toString()),null}}function oj(n){const e=X2(n);return Qt(e,"internal-error"),Qt(typeof e.exp<"u","internal-error"),Qt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function jg(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof rc&&Hk(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Hk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class Gk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class U1{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ag(this.lastLoginAt),this.creationTime=ag(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ex(n){const e=n.auth,t=await n.getIdToken(),r=await jg(n,Z0(e,{idToken:t}));Qt(r?.users.length,e,"internal-error");const a=r.users[0];n._notifyReloadListener(a);const o=a.providerUserInfo?.length?j3(a.providerUserInfo):[],c=Wk(n.providerData,o),u=n.isAnonymous,h=!(n.email&&a.passwordHash)&&!c?.length,f=u?h:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new U1(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(n,g)}async function $k(n){const e=Ar(n);await ex(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Wk(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function j3(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Kk(n,e){const t=await w3(n,{},async()=>{const r=Hg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:o}=n.config,c=await N3(n,a,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return n.emulatorConfig&&ld(n.emulatorConfig.host)&&(h.credentials="include"),v3.fetch()(c,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Yk(n,e){return Jc(n,"POST","/v2/accounts:revokeToken",Qc(n,e))}class bf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qt(e.idToken,"internal-error"),Qt(typeof e.idToken<"u","internal-error"),Qt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oj(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Qt(e.length!==0,"internal-error");const t=oj(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Qt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:o}=await Kk(e,t);this.updateTokensAndExpiration(r,a,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:o}=t,c=new bf;return r&&(Qt(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(Qt(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),o&&(Qt(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bf,this.toJSON())}_performRefresh(){return Vc("not implemented")}}function Ru(n,e){Qt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class cl{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new Gk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new U1(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await jg(this,this.stsTokenManager.getToken(this.auth,e));return Qt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return qk(this,e)}reload(){return $k(this)}_assign(e){this!==e&&(Qt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new cl({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Qt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ex(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ao(this.auth.app))return Promise.reject(qc(this.auth));const e=await this.getIdToken();return await jg(this,zk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,u=t.tenantId??void 0,h=t._redirectEventId??void 0,f=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:T,stsTokenManager:S}=t;Qt(y&&S,e,"internal-error");const j=bf.fromJSON(this.name,S);Qt(typeof y=="string",e,"internal-error"),Ru(r,e.name),Ru(a,e.name),Qt(typeof w=="boolean",e,"internal-error"),Qt(typeof b=="boolean",e,"internal-error"),Ru(o,e.name),Ru(c,e.name),Ru(u,e.name),Ru(h,e.name),Ru(f,e.name),Ru(g,e.name);const E=new cl({uid:y,auth:e,email:a,emailVerified:w,displayName:r,isAnonymous:b,photoURL:c,phoneNumber:o,tenantId:u,stsTokenManager:j,createdAt:f,lastLoginAt:g});return T&&Array.isArray(T)&&(E.providerData=T.map(L=>({...L}))),h&&(E._redirectEventId=h),E}static async _fromIdTokenResponse(e,t,r=!1){const a=new bf;a.updateFromServerResponse(t);const o=new cl({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await ex(o),o}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];Qt(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?j3(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!o?.length,u=new bf;u.updateFromIdToken(r);const h=new cl({uid:a.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new U1(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!o?.length};return Object.assign(h,f),h}}const lj=new Map;function Uc(n){$c(n instanceof Function,"Expected a class definition");let e=lj.get(n);return e?($c(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,lj.set(n,e),e)}class _3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}_3.type="NONE";const cj=_3;function T0(n,e,t){return`firebase:${n}:${e}:${t}`}class vf{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:o}=this.auth;this.fullUserKey=T0(this.userKey,a.apiKey,o),this.fullPersistenceKey=T0("persistence",a.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Z0(this.auth,{idToken:e}).catch(()=>{});return t?cl._fromGetAccountInfoResponse(this.auth,t,e):null}return cl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new vf(Uc(cj),e,r);const a=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=a[0]||Uc(cj);const c=T0(r,e.config.apiKey,e.name);let u=null;for(const f of t)try{const g=await f._get(c);if(g){let y;if(typeof g=="string"){const w=await Z0(e,{idToken:g}).catch(()=>{});if(!w)break;y=await cl._fromGetAccountInfoResponse(e,w,g)}else y=cl._fromJSON(e,g);f!==o&&(u=y),o=f;break}}catch{}const h=a.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new vf(o,e,r):(o=h[0],u&&await o._set(c,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new vf(o,e,r))}}function uj(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(T3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(S3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(I3(e))return"Blackberry";if(R3(e))return"Webos";if(E3(e))return"Safari";if((e.includes("chrome/")||A3(e))&&!e.includes("edge/"))return"Chrome";if(C3(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function S3(n=ta()){return/firefox\//i.test(n)}function E3(n=ta()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function A3(n=ta()){return/crios\//i.test(n)}function T3(n=ta()){return/iemobile/i.test(n)}function C3(n=ta()){return/android/i.test(n)}function I3(n=ta()){return/blackberry/i.test(n)}function R3(n=ta()){return/webos/i.test(n)}function Q2(n=ta()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Xk(n=ta()){return Q2(n)&&!!window.navigator?.standalone}function Qk(){return fR()&&document.documentMode===10}function k3(n=ta()){return Q2(n)||C3(n)||R3(n)||I3(n)||/windows phone/i.test(n)||T3(n)}function P3(n,e=[]){let t;switch(n){case"Browser":t=uj(ta());break;case"Worker":t=`${uj(ta())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${dh}/${r}`}class Jk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((c,u)=>{try{const h=e(o);c(h)}catch(h){u(h)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function Zk(n,e={}){return Jc(n,"GET","/v2/passwordPolicy",Qc(n,e))}const eP=6;class tP{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??eP,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class nP{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dj(this),this.idTokenSubscription=new dj(this),this.beforeStateQueue=new Jk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=y3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Uc(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await vf.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Z0(this,{idToken:e}),r=await cl._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ao(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(r=u.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Qt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ex(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Lk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ao(this.app))return Promise.reject(qc(this));const t=e?Ar(e):null;return t&&Qt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Qt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ao(this.app)?Promise.reject(qc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ao(this.app)?Promise.reject(qc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Uc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Zk(this),t=new tP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qg("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Yk(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Uc(e)||this._popupRedirectResolver;Qt(t,this,"argument-error"),this.redirectPersistenceManager=await vf.create(this,[Uc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qt(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,a);return()=>{c=!0,h()}}else{const h=e.addObserver(t);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=P3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ao(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Rk(`Error while retrieving App Check token: ${e.error}`),e?.token}}function cd(n){return Ar(n)}class dj{constructor(e){this.auth=e,this.observer=null,this.addObserver=bR(t=>this.observer=t)}get next(){return Qt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Mx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rP(n){Mx=n}function L3(n){return Mx.loadJS(n)}function sP(){return Mx.recaptchaEnterpriseScript}function aP(){return Mx.gapiScript}function iP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class oP{constructor(){this.enterprise=new lP}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class lP{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const cP="recaptcha-enterprise",D3="NO_RECAPTCHA";class uP{constructor(e){this.type=cP,this.auth=cd(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,u)=>{Bk(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new Uk(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(h=>{u(h)})})}function a(o,c,u){const h=window.grecaptcha;ij(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(D3)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new oP().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{r(this.auth).then(u=>{if(!t&&ij(window.grecaptcha))a(u,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=sP();h.length!==0&&(h+=u),L3(h).then(()=>{a(u,o,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function hj(n,e,t,r=!1,a=!1){const o=new uP(n);let c;if(a)c=D3;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function tx(n,e,t,r,a){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await hj(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await hj(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(o)})}function dP(n,e){const t=Dx(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),o=t.getOptions();if(Yd(o,e??{}))return a;dl(a,"already-initialized")}return t.initialize({options:e})}function hP(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Uc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function fP(n,e,t){const r=cd(n);Qt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,o=M3(e),{host:c,port:u}=mP(e),h=u===null?"":`:${u}`,f={url:`${o}//${c}${h}/`},g=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Qt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Qt(Yd(f,r.config.emulator)&&Yd(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,ld(c)?(q2(`${o}//${c}${h}`),H2("Auth",!0)):gP()}function M3(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function mP(n){const e=M3(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const o=a[1];return{host:o,port:fj(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:fj(c)}}}function fj(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function gP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class J2{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vc("not implemented")}_getIdTokenResponse(e){return Vc("not implemented")}_linkToIdToken(e,t){return Vc("not implemented")}_getReauthenticationResolver(e){return Vc("not implemented")}}async function pP(n,e){return Jc(n,"POST","/v1/accounts:signUp",e)}async function xP(n,e){return $g(n,"POST","/v1/accounts:signInWithPassword",Qc(n,e))}async function yP(n,e){return Jc(n,"POST","/v1/accounts:sendOobCode",Qc(n,e))}async function bP(n,e){return yP(n,e)}async function vP(n,e){return $g(n,"POST","/v1/accounts:signInWithEmailLink",Qc(n,e))}async function wP(n,e){return $g(n,"POST","/v1/accounts:signInWithEmailLink",Qc(n,e))}class _g extends J2{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new _g(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new _g(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tx(e,t,"signInWithPassword",xP);case"emailLink":return vP(e,{email:this._email,oobCode:this._password});default:dl(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tx(e,r,"signUpPassword",pP);case"emailLink":return wP(e,{idToken:t,email:this._email,oobCode:this._password});default:dl(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function wf(n,e){return $g(n,"POST","/v1/accounts:signInWithIdp",Qc(n,e))}const NP="http://localhost";class Qd extends J2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Qd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dl("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...o}=t;if(!r||!a)return null;const c=new Qd(r,a);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return wf(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,wf(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wf(e,t)}buildRequest(){const e={requestUri:NP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Hg(t)}return e}}function jP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _P(n){const e=Qm(Jm(n)).link,t=e?Qm(Jm(e)).deep_link_id:null,r=Qm(Jm(n)).deep_link_id;return(r?Qm(Jm(r)).link:null)||r||t||e||n}class Z2{constructor(e){const t=Qm(Jm(e)),r=t.apiKey??null,a=t.oobCode??null,o=jP(t.mode??null);Qt(r&&a&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=_P(e);try{return new Z2(t)}catch{return null}}}class Xf{constructor(){this.providerId=Xf.PROVIDER_ID}static credential(e,t){return _g._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Z2.parseLink(t);return Qt(r,"argument-error"),_g._fromEmailAndCode(e,r.code,r.tenantId)}}Xf.PROVIDER_ID="password";Xf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class O3{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Wg extends O3{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ou extends Wg{constructor(){super("facebook.com")}static credential(e){return Qd._fromParams({providerId:Ou.PROVIDER_ID,signInMethod:Ou.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ou.credentialFromTaggedObject(e)}static credentialFromError(e){return Ou.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ou.credential(e.oauthAccessToken)}catch{return null}}}Ou.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ou.PROVIDER_ID="facebook.com";class Fu extends Wg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Qd._fromParams({providerId:Fu.PROVIDER_ID,signInMethod:Fu.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Fu.credentialFromTaggedObject(e)}static credentialFromError(e){return Fu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Fu.credential(t,r)}catch{return null}}}Fu.GOOGLE_SIGN_IN_METHOD="google.com";Fu.PROVIDER_ID="google.com";class Vu extends Wg{constructor(){super("github.com")}static credential(e){return Qd._fromParams({providerId:Vu.PROVIDER_ID,signInMethod:Vu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vu.credentialFromTaggedObject(e)}static credentialFromError(e){return Vu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vu.credential(e.oauthAccessToken)}catch{return null}}}Vu.GITHUB_SIGN_IN_METHOD="github.com";Vu.PROVIDER_ID="github.com";class Uu extends Wg{constructor(){super("twitter.com")}static credential(e,t){return Qd._fromParams({providerId:Uu.PROVIDER_ID,signInMethod:Uu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Uu.credentialFromTaggedObject(e)}static credentialFromError(e){return Uu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Uu.credential(t,r)}catch{return null}}}Uu.TWITTER_SIGN_IN_METHOD="twitter.com";Uu.PROVIDER_ID="twitter.com";async function SP(n,e){return $g(n,"POST","/v1/accounts:signUp",Qc(n,e))}class Jd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const o=await cl._fromIdTokenResponse(e,r,a),c=mj(r);return new Jd({user:o,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=mj(r);return new Jd({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function mj(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class nx extends rc{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,nx.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new nx(e,t,r,a)}}function F3(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?nx._fromErrorAndOperation(n,o,e,r):o})}async function EP(n,e,t=!1){const r=await jg(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Jd._forOperation(n,"link",r)}async function AP(n,e,t=!1){const{auth:r}=n;if(ao(r.app))return Promise.reject(qc(r));const a="reauthenticate";try{const o=await jg(n,F3(r,a,e,n),t);Qt(o.idToken,r,"internal-error");const c=X2(o.idToken);Qt(c,r,"internal-error");const{sub:u}=c;return Qt(n.uid===u,r,"user-mismatch"),Jd._forOperation(n,a,o)}catch(o){throw o?.code==="auth/user-not-found"&&dl(r,"user-mismatch"),o}}async function V3(n,e,t=!1){if(ao(n.app))return Promise.reject(qc(n));const r="signIn",a=await F3(n,r,e),o=await Jd._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(o.user),o}async function TP(n,e){return V3(cd(n),e)}async function U3(n){const e=cd(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function B3(n,e,t){const r=cd(n);await tx(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",bP)}async function z3(n,e,t){if(ao(n.app))return Promise.reject(qc(n));const r=cd(n),c=await tx(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SP).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&U3(n),h}),u=await Jd._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(u.user),u}function q3(n,e,t){return ao(n.app)?Promise.reject(qc(n)):TP(Ar(n),Xf.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&U3(n),r})}function CP(n,e,t,r){return Ar(n).onIdTokenChanged(e,t,r)}function IP(n,e,t){return Ar(n).beforeAuthStateChanged(e,t)}function H3(n,e,t,r){return Ar(n).onAuthStateChanged(e,t,r)}function RP(n){return Ar(n).signOut()}const rx="__sak";class G3{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(rx,"1"),this.storage.removeItem(rx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const kP=1e3,PP=10;class $3 extends G3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=k3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);Qk()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,PP):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},kP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$3.type="LOCAL";const LP=$3;class W3 extends G3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}W3.type="SESSION";const K3=W3;function DP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Ox{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Ox(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:o}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const u=Array.from(c).map(async f=>f(t.origin,o)),h=await DP(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ox.receivers=[];function ev(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class MP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,c;return new Promise((u,h)=>{const f=ev("",20);a.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(y){const w=y;if(w.data.eventId===f)switch(w.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(w.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Xl(){return window}function OP(n){Xl().location.href=n}function Y3(){return typeof Xl().WorkerGlobalScope<"u"&&typeof Xl().importScripts=="function"}async function FP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VP(){return navigator?.serviceWorker?.controller||null}function UP(){return Y3()?self:null}const X3="firebaseLocalStorageDb",BP=1,sx="firebaseLocalStorage",Q3="fbase_key";class Kg{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Fx(n,e){return n.transaction([sx],e?"readwrite":"readonly").objectStore(sx)}function zP(){const n=indexedDB.deleteDatabase(X3);return new Kg(n).toPromise()}function B1(){const n=indexedDB.open(X3,BP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(sx,{keyPath:Q3})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(sx)?e(r):(r.close(),await zP(),e(await B1()))})})}async function gj(n,e,t){const r=Fx(n,!0).put({[Q3]:e,value:t});return new Kg(r).toPromise()}async function qP(n,e){const t=Fx(n,!1).get(e),r=await new Kg(t).toPromise();return r===void 0?null:r.value}function pj(n,e){const t=Fx(n,!0).delete(e);return new Kg(t).toPromise()}const HP=800,GP=3;class J3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await B1(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>GP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Y3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ox._getInstance(UP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await FP(),!this.activeServiceWorker)return;this.sender=new MP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await B1();return await gj(e,rx,"1"),await pj(e,rx),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>gj(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>qP(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>pj(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const o=Fx(a,!1).getAll();return new Kg(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:o}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),HP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}J3.type="LOCAL";const $P=J3;new Gg(3e4,6e4);function WP(n,e){return e?Uc(e):(Qt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class tv extends J2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wf(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function KP(n){return V3(n.auth,new tv(n),n.bypassAuthState)}function YP(n){const{auth:e,user:t}=n;return Qt(t,e,"internal-error"),AP(t,new tv(n),n.bypassAuthState)}async function XP(n){const{auth:e,user:t}=n;return Qt(t,e,"internal-error"),EP(t,new tv(n),n.bypassAuthState)}class Z3{constructor(e,t,r,a,o=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KP;case"linkViaPopup":case"linkViaRedirect":return XP;case"reauthViaPopup":case"reauthViaRedirect":return YP;default:dl(this.auth,"internal-error")}}resolve(e){$c(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$c(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const QP=new Gg(2e3,1e4);class pf extends Z3{constructor(e,t,r,a,o){super(e,t,a,o),this.provider=r,this.authWindow=null,this.pollId=null,pf.currentPopupAction&&pf.currentPopupAction.cancel(),pf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qt(e,this.auth,"internal-error"),e}async onExecution(){$c(this.filter.length===1,"Popup operations only handle one event");const e=ev();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Yl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Yl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pf.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,QP.get())};e()}}pf.currentPopupAction=null;const JP="pendingRedirect",C0=new Map;class ZP extends Z3{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=C0.get(this.auth._key());if(!e){try{const r=await eL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}C0.set(this.auth._key(),e)}return this.bypassAuthState||C0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eL(n,e){const t=rL(e),r=nL(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function tL(n,e){C0.set(n._key(),e)}function nL(n){return Uc(n._redirectPersistence)}function rL(n){return T0(JP,n.config.apiKey,n.name)}async function sL(n,e,t=!1){if(ao(n.app))return Promise.reject(qc(n));const r=cd(n),a=WP(r,e),c=await new ZP(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const aL=600*1e3;class iL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!eS(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Yl(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aL&&this.cachedEventUids.clear(),this.cachedEventUids.has(xj(e))}saveEventToCache(e){this.cachedEventUids.add(xj(e)),this.lastProcessedEventTime=Date.now()}}function xj(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function eS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function oL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eS(n);default:return!1}}async function lL(n,e={}){return Jc(n,"GET","/v1/projects",e)}const cL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uL=/^https?/;async function dL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await lL(n);for(const t of e)try{if(hL(t))return}catch{}dl(n,"unauthorized-domain")}function hL(n){const e=V1(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!uL.test(t))return!1;if(cL.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const fL=new Gg(3e4,6e4);function yj(){const n=Xl().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function mL(n){return new Promise((e,t)=>{function r(){yj(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yj(),t(Yl(n,"network-request-failed"))},timeout:fL.get()})}if(Xl().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Xl().gapi?.load)r();else{const a=iP("iframefcb");return Xl()[a]=()=>{gapi.load?r():t(Yl(n,"network-request-failed"))},L3(`${aP()}?onload=${a}`).catch(o=>t(o))}}).catch(e=>{throw I0=null,e})}let I0=null;function gL(n){return I0=I0||mL(n),I0}const pL=new Gg(5e3,15e3),xL="__/auth/iframe",yL="emulator/auth/iframe",bL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wL(n){const e=n.config;Qt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Y2(e,yL):`https://${n.config.authDomain}/${xL}`,r={apiKey:e.apiKey,appName:n.name,v:dh},a=vL.get(n.config.apiHost);a&&(r.eid=a);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Hg(r).slice(1)}`}async function NL(n){const e=await gL(n),t=Xl().gapi;return Qt(t,n,"internal-error"),e.open({where:document.body,url:wL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bL,dontclear:!0},r=>new Promise(async(a,o)=>{await r.restyle({setHideOnLeave:!1});const c=Yl(n,"network-request-failed"),u=Xl().setTimeout(()=>{o(c)},pL.get());function h(){Xl().clearTimeout(u),a(r)}r.ping(h).then(h,()=>{o(c)})}))}const jL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_L=500,SL=600,EL="_blank",AL="http://localhost";class bj{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TL(n,e,t,r=_L,a=SL){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h={...jL,width:r.toString(),height:a.toString(),top:o,left:c},f=ta().toLowerCase();t&&(u=A3(f)?EL:t),S3(f)&&(e=e||AL,h.scrollbars="yes");const g=Object.entries(h).reduce((w,[b,T])=>`${w}${b}=${T},`,"");if(Xk(f)&&u!=="_self")return CL(e||"",u),new bj(null);const y=window.open(e||"",u,g);Qt(y,n,"popup-blocked");try{y.focus()}catch{}return new bj(y)}function CL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const IL="__/auth/handler",RL="emulator/auth/handler",kL=encodeURIComponent("fac");async function vj(n,e,t,r,a,o){Qt(n.config.authDomain,n,"auth-domain-config-required"),Qt(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:dh,eventId:a};if(e instanceof O3){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",yR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof Wg){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await n._getAppCheckToken(),f=h?`#${kL}=${encodeURIComponent(h)}`:"";return`${PL(n)}?${Hg(u).slice(1)}${f}`}function PL({config:n}){return n.emulator?Y2(n,RL):`https://${n.authDomain}/${IL}`}const $b="webStorageSupport";class LL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=K3,this._completeRedirectFn=sL,this._overrideRedirectResult=tL}async _openPopup(e,t,r,a){$c(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await vj(e,t,r,V1(),a);return TL(e,o,ev())}async _openRedirect(e,t,r,a){await this._originValidation(e);const o=await vj(e,t,r,V1(),a);return OP(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:o}=this.eventManagers[t];return a?Promise.resolve(a):($c(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await NL(e),r=new iL(e);return t.register("authEvent",a=>(Qt(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($b,{type:$b},a=>{const o=a?.[0]?.[$b];o!==void 0&&t(!!o),dl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return k3()||E3()||Q2()}}const DL=LL;var wj="@firebase/auth",Nj="1.11.1";class ML{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Qt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function OL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FL(n){Xd(new Zu("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;Qt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:P3(n)},f=new nP(r,a,o,h);return hP(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Xd(new Zu("auth-internal",e=>{const t=cd(e.getProvider("auth").getImmediate());return(r=>new ML(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kl(wj,Nj,OL(n)),Kl(wj,Nj,"esm2020")}const VL=300,UL=i3("authIdTokenMaxAge")||VL;let jj=null;const BL=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>UL)return;const a=t?.token;jj!==a&&(jj=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function zL(n=W2()){const e=Dx(n,"auth");if(e.isInitialized())return e.getImmediate();const t=dP(n,{popupRedirectResolver:DL,persistence:[$P,LP,K3]}),r=i3("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=BL(o.toString());IP(t,c,()=>c(t.currentUser)),CP(t,u=>c(u))}}const a=r3("auth");return a&&fP(t,`http://${a}`),t}function qL(){return document.getElementsByTagName("head")?.[0]??document}rP({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const o=Yl("internal-error");o.customData=a,t(o)},r.type="text/javascript",r.charset="UTF-8",qL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FL("Browser");var _j=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Yu,tS;(function(){var n;function e(H,V){function k(){}k.prototype=V.prototype,H.F=V.prototype,H.prototype=new k,H.prototype.constructor=H,H.D=function(F,I,P){for(var B=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)B[ue-2]=arguments[ue];return V.prototype[I].apply(F,B)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(H,V,k){k||(k=0);const F=Array(16);if(typeof V=="string")for(var I=0;I<16;++I)F[I]=V.charCodeAt(k++)|V.charCodeAt(k++)<<8|V.charCodeAt(k++)<<16|V.charCodeAt(k++)<<24;else for(I=0;I<16;++I)F[I]=V[k++]|V[k++]<<8|V[k++]<<16|V[k++]<<24;V=H.g[0],k=H.g[1],I=H.g[2];let P=H.g[3],B;B=V+(P^k&(I^P))+F[0]+3614090360&4294967295,V=k+(B<<7&4294967295|B>>>25),B=P+(I^V&(k^I))+F[1]+3905402710&4294967295,P=V+(B<<12&4294967295|B>>>20),B=I+(k^P&(V^k))+F[2]+606105819&4294967295,I=P+(B<<17&4294967295|B>>>15),B=k+(V^I&(P^V))+F[3]+3250441966&4294967295,k=I+(B<<22&4294967295|B>>>10),B=V+(P^k&(I^P))+F[4]+4118548399&4294967295,V=k+(B<<7&4294967295|B>>>25),B=P+(I^V&(k^I))+F[5]+1200080426&4294967295,P=V+(B<<12&4294967295|B>>>20),B=I+(k^P&(V^k))+F[6]+2821735955&4294967295,I=P+(B<<17&4294967295|B>>>15),B=k+(V^I&(P^V))+F[7]+4249261313&4294967295,k=I+(B<<22&4294967295|B>>>10),B=V+(P^k&(I^P))+F[8]+1770035416&4294967295,V=k+(B<<7&4294967295|B>>>25),B=P+(I^V&(k^I))+F[9]+2336552879&4294967295,P=V+(B<<12&4294967295|B>>>20),B=I+(k^P&(V^k))+F[10]+4294925233&4294967295,I=P+(B<<17&4294967295|B>>>15),B=k+(V^I&(P^V))+F[11]+2304563134&4294967295,k=I+(B<<22&4294967295|B>>>10),B=V+(P^k&(I^P))+F[12]+1804603682&4294967295,V=k+(B<<7&4294967295|B>>>25),B=P+(I^V&(k^I))+F[13]+4254626195&4294967295,P=V+(B<<12&4294967295|B>>>20),B=I+(k^P&(V^k))+F[14]+2792965006&4294967295,I=P+(B<<17&4294967295|B>>>15),B=k+(V^I&(P^V))+F[15]+1236535329&4294967295,k=I+(B<<22&4294967295|B>>>10),B=V+(I^P&(k^I))+F[1]+4129170786&4294967295,V=k+(B<<5&4294967295|B>>>27),B=P+(k^I&(V^k))+F[6]+3225465664&4294967295,P=V+(B<<9&4294967295|B>>>23),B=I+(V^k&(P^V))+F[11]+643717713&4294967295,I=P+(B<<14&4294967295|B>>>18),B=k+(P^V&(I^P))+F[0]+3921069994&4294967295,k=I+(B<<20&4294967295|B>>>12),B=V+(I^P&(k^I))+F[5]+3593408605&4294967295,V=k+(B<<5&4294967295|B>>>27),B=P+(k^I&(V^k))+F[10]+38016083&4294967295,P=V+(B<<9&4294967295|B>>>23),B=I+(V^k&(P^V))+F[15]+3634488961&4294967295,I=P+(B<<14&4294967295|B>>>18),B=k+(P^V&(I^P))+F[4]+3889429448&4294967295,k=I+(B<<20&4294967295|B>>>12),B=V+(I^P&(k^I))+F[9]+568446438&4294967295,V=k+(B<<5&4294967295|B>>>27),B=P+(k^I&(V^k))+F[14]+3275163606&4294967295,P=V+(B<<9&4294967295|B>>>23),B=I+(V^k&(P^V))+F[3]+4107603335&4294967295,I=P+(B<<14&4294967295|B>>>18),B=k+(P^V&(I^P))+F[8]+1163531501&4294967295,k=I+(B<<20&4294967295|B>>>12),B=V+(I^P&(k^I))+F[13]+2850285829&4294967295,V=k+(B<<5&4294967295|B>>>27),B=P+(k^I&(V^k))+F[2]+4243563512&4294967295,P=V+(B<<9&4294967295|B>>>23),B=I+(V^k&(P^V))+F[7]+1735328473&4294967295,I=P+(B<<14&4294967295|B>>>18),B=k+(P^V&(I^P))+F[12]+2368359562&4294967295,k=I+(B<<20&4294967295|B>>>12),B=V+(k^I^P)+F[5]+4294588738&4294967295,V=k+(B<<4&4294967295|B>>>28),B=P+(V^k^I)+F[8]+2272392833&4294967295,P=V+(B<<11&4294967295|B>>>21),B=I+(P^V^k)+F[11]+1839030562&4294967295,I=P+(B<<16&4294967295|B>>>16),B=k+(I^P^V)+F[14]+4259657740&4294967295,k=I+(B<<23&4294967295|B>>>9),B=V+(k^I^P)+F[1]+2763975236&4294967295,V=k+(B<<4&4294967295|B>>>28),B=P+(V^k^I)+F[4]+1272893353&4294967295,P=V+(B<<11&4294967295|B>>>21),B=I+(P^V^k)+F[7]+4139469664&4294967295,I=P+(B<<16&4294967295|B>>>16),B=k+(I^P^V)+F[10]+3200236656&4294967295,k=I+(B<<23&4294967295|B>>>9),B=V+(k^I^P)+F[13]+681279174&4294967295,V=k+(B<<4&4294967295|B>>>28),B=P+(V^k^I)+F[0]+3936430074&4294967295,P=V+(B<<11&4294967295|B>>>21),B=I+(P^V^k)+F[3]+3572445317&4294967295,I=P+(B<<16&4294967295|B>>>16),B=k+(I^P^V)+F[6]+76029189&4294967295,k=I+(B<<23&4294967295|B>>>9),B=V+(k^I^P)+F[9]+3654602809&4294967295,V=k+(B<<4&4294967295|B>>>28),B=P+(V^k^I)+F[12]+3873151461&4294967295,P=V+(B<<11&4294967295|B>>>21),B=I+(P^V^k)+F[15]+530742520&4294967295,I=P+(B<<16&4294967295|B>>>16),B=k+(I^P^V)+F[2]+3299628645&4294967295,k=I+(B<<23&4294967295|B>>>9),B=V+(I^(k|~P))+F[0]+4096336452&4294967295,V=k+(B<<6&4294967295|B>>>26),B=P+(k^(V|~I))+F[7]+1126891415&4294967295,P=V+(B<<10&4294967295|B>>>22),B=I+(V^(P|~k))+F[14]+2878612391&4294967295,I=P+(B<<15&4294967295|B>>>17),B=k+(P^(I|~V))+F[5]+4237533241&4294967295,k=I+(B<<21&4294967295|B>>>11),B=V+(I^(k|~P))+F[12]+1700485571&4294967295,V=k+(B<<6&4294967295|B>>>26),B=P+(k^(V|~I))+F[3]+2399980690&4294967295,P=V+(B<<10&4294967295|B>>>22),B=I+(V^(P|~k))+F[10]+4293915773&4294967295,I=P+(B<<15&4294967295|B>>>17),B=k+(P^(I|~V))+F[1]+2240044497&4294967295,k=I+(B<<21&4294967295|B>>>11),B=V+(I^(k|~P))+F[8]+1873313359&4294967295,V=k+(B<<6&4294967295|B>>>26),B=P+(k^(V|~I))+F[15]+4264355552&4294967295,P=V+(B<<10&4294967295|B>>>22),B=I+(V^(P|~k))+F[6]+2734768916&4294967295,I=P+(B<<15&4294967295|B>>>17),B=k+(P^(I|~V))+F[13]+1309151649&4294967295,k=I+(B<<21&4294967295|B>>>11),B=V+(I^(k|~P))+F[4]+4149444226&4294967295,V=k+(B<<6&4294967295|B>>>26),B=P+(k^(V|~I))+F[11]+3174756917&4294967295,P=V+(B<<10&4294967295|B>>>22),B=I+(V^(P|~k))+F[2]+718787259&4294967295,I=P+(B<<15&4294967295|B>>>17),B=k+(P^(I|~V))+F[9]+3951481745&4294967295,H.g[0]=H.g[0]+V&4294967295,H.g[1]=H.g[1]+(I+(B<<21&4294967295|B>>>11))&4294967295,H.g[2]=H.g[2]+I&4294967295,H.g[3]=H.g[3]+P&4294967295}r.prototype.v=function(H,V){V===void 0&&(V=H.length);const k=V-this.blockSize,F=this.C;let I=this.h,P=0;for(;P<V;){if(I==0)for(;P<=k;)a(this,H,P),P+=this.blockSize;if(typeof H=="string"){for(;P<V;)if(F[I++]=H.charCodeAt(P++),I==this.blockSize){a(this,F),I=0;break}}else for(;P<V;)if(F[I++]=H[P++],I==this.blockSize){a(this,F),I=0;break}}this.h=I,this.o+=V},r.prototype.A=function(){var H=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);H[0]=128;for(var V=1;V<H.length-8;++V)H[V]=0;V=this.o*8;for(var k=H.length-8;k<H.length;++k)H[k]=V&255,V/=256;for(this.v(H),H=Array(16),V=0,k=0;k<4;++k)for(let F=0;F<32;F+=8)H[V++]=this.g[k]>>>F&255;return H};function o(H,V){var k=u;return Object.prototype.hasOwnProperty.call(k,H)?k[H]:k[H]=V(H)}function c(H,V){this.h=V;const k=[];let F=!0;for(let I=H.length-1;I>=0;I--){const P=H[I]|0;F&&P==V||(k[I]=P,F=!1)}this.g=k}var u={};function h(H){return-128<=H&&H<128?o(H,function(V){return new c([V|0],V<0?-1:0)}):new c([H|0],H<0?-1:0)}function f(H){if(isNaN(H)||!isFinite(H))return y;if(H<0)return j(f(-H));const V=[];let k=1;for(let F=0;H>=k;F++)V[F]=H/k|0,k*=4294967296;return new c(V,0)}function g(H,V){if(H.length==0)throw Error("number format error: empty string");if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(H.charAt(0)=="-")return j(g(H.substring(1),V));if(H.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=f(Math.pow(V,8));let F=y;for(let P=0;P<H.length;P+=8){var I=Math.min(8,H.length-P);const B=parseInt(H.substring(P,P+I),V);I<8?(I=f(Math.pow(V,I)),F=F.j(I).add(f(B))):(F=F.j(k),F=F.add(f(B)))}return F}var y=h(0),w=h(1),b=h(16777216);n=c.prototype,n.m=function(){if(S(this))return-j(this).m();let H=0,V=1;for(let k=0;k<this.g.length;k++){const F=this.i(k);H+=(F>=0?F:4294967296+F)*V,V*=4294967296}return H},n.toString=function(H){if(H=H||10,H<2||36<H)throw Error("radix out of range: "+H);if(T(this))return"0";if(S(this))return"-"+j(this).toString(H);const V=f(Math.pow(H,6));var k=this;let F="";for(;;){const I=O(k,V).g;k=E(k,I.j(V));let P=((k.g.length>0?k.g[0]:k.h)>>>0).toString(H);if(k=I,T(k))return P+F;for(;P.length<6;)P="0"+P;F=P+F}},n.i=function(H){return H<0?0:H<this.g.length?this.g[H]:this.h};function T(H){if(H.h!=0)return!1;for(let V=0;V<H.g.length;V++)if(H.g[V]!=0)return!1;return!0}function S(H){return H.h==-1}n.l=function(H){return H=E(this,H),S(H)?-1:T(H)?0:1};function j(H){const V=H.g.length,k=[];for(let F=0;F<V;F++)k[F]=~H.g[F];return new c(k,~H.h).add(w)}n.abs=function(){return S(this)?j(this):this},n.add=function(H){const V=Math.max(this.g.length,H.g.length),k=[];let F=0;for(let I=0;I<=V;I++){let P=F+(this.i(I)&65535)+(H.i(I)&65535),B=(P>>>16)+(this.i(I)>>>16)+(H.i(I)>>>16);F=B>>>16,P&=65535,B&=65535,k[I]=B<<16|P}return new c(k,k[k.length-1]&-2147483648?-1:0)};function E(H,V){return H.add(j(V))}n.j=function(H){if(T(this)||T(H))return y;if(S(this))return S(H)?j(this).j(j(H)):j(j(this).j(H));if(S(H))return j(this.j(j(H)));if(this.l(b)<0&&H.l(b)<0)return f(this.m()*H.m());const V=this.g.length+H.g.length,k=[];for(var F=0;F<2*V;F++)k[F]=0;for(F=0;F<this.g.length;F++)for(let I=0;I<H.g.length;I++){const P=this.i(F)>>>16,B=this.i(F)&65535,ue=H.i(I)>>>16,Ne=H.i(I)&65535;k[2*F+2*I]+=B*Ne,L(k,2*F+2*I),k[2*F+2*I+1]+=P*Ne,L(k,2*F+2*I+1),k[2*F+2*I+1]+=B*ue,L(k,2*F+2*I+1),k[2*F+2*I+2]+=P*ue,L(k,2*F+2*I+2)}for(H=0;H<V;H++)k[H]=k[2*H+1]<<16|k[2*H];for(H=V;H<2*V;H++)k[H]=0;return new c(k,0)};function L(H,V){for(;(H[V]&65535)!=H[V];)H[V+1]+=H[V]>>>16,H[V]&=65535,V++}function D(H,V){this.g=H,this.h=V}function O(H,V){if(T(V))throw Error("division by zero");if(T(H))return new D(y,y);if(S(H))return V=O(j(H),V),new D(j(V.g),j(V.h));if(S(V))return V=O(H,j(V)),new D(j(V.g),V.h);if(H.g.length>30){if(S(H)||S(V))throw Error("slowDivide_ only works with positive integers.");for(var k=w,F=V;F.l(H)<=0;)k=te(k),F=te(F);var I=ae(k,1),P=ae(F,1);for(F=ae(F,2),k=ae(k,2);!T(F);){var B=P.add(F);B.l(H)<=0&&(I=I.add(k),P=B),F=ae(F,1),k=ae(k,1)}return V=E(H,I.j(V)),new D(I,V)}for(I=y;H.l(V)>=0;){for(k=Math.max(1,Math.floor(H.m()/V.m())),F=Math.ceil(Math.log(k)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),P=f(k),B=P.j(V);S(B)||B.l(H)>0;)k-=F,P=f(k),B=P.j(V);T(P)&&(P=w),I=I.add(P),H=E(H,B)}return new D(I,H)}n.B=function(H){return O(this,H).h},n.and=function(H){const V=Math.max(this.g.length,H.g.length),k=[];for(let F=0;F<V;F++)k[F]=this.i(F)&H.i(F);return new c(k,this.h&H.h)},n.or=function(H){const V=Math.max(this.g.length,H.g.length),k=[];for(let F=0;F<V;F++)k[F]=this.i(F)|H.i(F);return new c(k,this.h|H.h)},n.xor=function(H){const V=Math.max(this.g.length,H.g.length),k=[];for(let F=0;F<V;F++)k[F]=this.i(F)^H.i(F);return new c(k,this.h^H.h)};function te(H){const V=H.g.length+1,k=[];for(let F=0;F<V;F++)k[F]=H.i(F)<<1|H.i(F-1)>>>31;return new c(k,H.h)}function ae(H,V){const k=V>>5;V%=32;const F=H.g.length-k,I=[];for(let P=0;P<F;P++)I[P]=V>0?H.i(P+k)>>>V|H.i(P+k+1)<<32-V:H.i(P+k);return new c(I,H.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,tS=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=g,Yu=c}).apply(typeof _j<"u"?_j:typeof self<"u"?self:typeof window<"u"?window:{});var i0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var nS,Zm,rS,R0,z1,sS,aS,iS;(function(){var n,e=Object.defineProperty;function t(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof i0=="object"&&i0];for(var R=0;R<x.length;++R){var z=x[R];if(z&&z.Math==Math)return z}throw Error("Cannot find global object")}var r=t(this);function a(x,R){if(R)e:{var z=r;x=x.split(".");for(var Z=0;Z<x.length-1;Z++){var _e=x[Z];if(!(_e in z))break e;z=z[_e]}x=x[x.length-1],Z=z[x],R=R(Z),R!=Z&&R!=null&&e(z,x,{configurable:!0,writable:!0,value:R})}}a("Symbol.dispose",function(x){return x||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(x){return x||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(x){return x||function(R){var z=[],Z;for(Z in R)Object.prototype.hasOwnProperty.call(R,Z)&&z.push([Z,R[Z]]);return z}});var o=o||{},c=this||self;function u(x){var R=typeof x;return R=="object"&&x!=null||R=="function"}function h(x,R,z){return x.call.apply(x.bind,arguments)}function f(x,R,z){return f=h,f.apply(null,arguments)}function g(x,R){var z=Array.prototype.slice.call(arguments,1);return function(){var Z=z.slice();return Z.push.apply(Z,arguments),x.apply(this,Z)}}function y(x,R){function z(){}z.prototype=R.prototype,x.Z=R.prototype,x.prototype=new z,x.prototype.constructor=x,x.Ob=function(Z,_e,Pe){for(var et=Array(arguments.length-2),Jt=2;Jt<arguments.length;Jt++)et[Jt-2]=arguments[Jt];return R.prototype[_e].apply(Z,et)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?x=>x&&AsyncContext.Snapshot.wrap(x):x=>x;function b(x){const R=x.length;if(R>0){const z=Array(R);for(let Z=0;Z<R;Z++)z[Z]=x[Z];return z}return[]}function T(x,R){for(let Z=1;Z<arguments.length;Z++){const _e=arguments[Z];var z=typeof _e;if(z=z!="object"?z:_e?Array.isArray(_e)?"array":z:"null",z=="array"||z=="object"&&typeof _e.length=="number"){z=x.length||0;const Pe=_e.length||0;x.length=z+Pe;for(let et=0;et<Pe;et++)x[z+et]=_e[et]}else x.push(_e)}}class S{constructor(R,z){this.i=R,this.j=z,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function j(x){c.setTimeout(()=>{throw x},0)}function E(){var x=H;let R=null;return x.g&&(R=x.g,x.g=x.g.next,x.g||(x.h=null),R.next=null),R}class L{constructor(){this.h=this.g=null}add(R,z){const Z=D.get();Z.set(R,z),this.h?this.h.next=Z:this.g=Z,this.h=Z}}var D=new S(()=>new O,x=>x.reset());class O{constructor(){this.next=this.g=this.h=null}set(R,z){this.h=R,this.g=z,this.next=null}reset(){this.next=this.g=this.h=null}}let te,ae=!1,H=new L,V=()=>{const x=Promise.resolve(void 0);te=()=>{x.then(k)}};function k(){for(var x;x=E();){try{x.h.call(x.g)}catch(z){j(z)}var R=D;R.j(x),R.h<100&&(R.h++,x.next=R.g,R.g=x)}ae=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(x,R){this.type=x,this.g=this.target=R,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var x=!1,R=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const z=()=>{};c.addEventListener("test",z,R),c.removeEventListener("test",z,R)}catch{}return x})();function B(x){return/^[\s\xa0]*$/.test(x)}function ue(x,R){I.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x&&this.init(x,R)}y(ue,I),ue.prototype.init=function(x,R){const z=this.type=x.type,Z=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;this.target=x.target||x.srcElement,this.g=R,R=x.relatedTarget,R||(z=="mouseover"?R=x.fromElement:z=="mouseout"&&(R=x.toElement)),this.relatedTarget=R,Z?(this.clientX=Z.clientX!==void 0?Z.clientX:Z.pageX,this.clientY=Z.clientY!==void 0?Z.clientY:Z.pageY,this.screenX=Z.screenX||0,this.screenY=Z.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=x.pointerType,this.state=x.state,this.i=x,x.defaultPrevented&&ue.Z.h.call(this)},ue.prototype.h=function(){ue.Z.h.call(this);const x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var Ne="closure_listenable_"+(Math.random()*1e6|0),ce=0;function pe(x,R,z,Z,_e){this.listener=x,this.proxy=null,this.src=R,this.type=z,this.capture=!!Z,this.ha=_e,this.key=++ce,this.da=this.fa=!1}function de(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Se(x,R,z){for(const Z in x)R.call(z,x[Z],Z,x)}function ze(x,R){for(const z in x)R.call(void 0,x[z],z,x)}function ne(x){const R={};for(const z in x)R[z]=x[z];return R}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(x,R){let z,Z;for(let _e=1;_e<arguments.length;_e++){Z=arguments[_e];for(z in Z)x[z]=Z[z];for(let Pe=0;Pe<q.length;Pe++)z=q[Pe],Object.prototype.hasOwnProperty.call(Z,z)&&(x[z]=Z[z])}}function re(x){this.src=x,this.g={},this.h=0}re.prototype.add=function(x,R,z,Z,_e){const Pe=x.toString();x=this.g[Pe],x||(x=this.g[Pe]=[],this.h++);const et=me(x,R,Z,_e);return et>-1?(R=x[et],z||(R.fa=!1)):(R=new pe(R,this.src,Pe,!!Z,_e),R.fa=z,x.push(R)),R};function he(x,R){const z=R.type;if(z in x.g){var Z=x.g[z],_e=Array.prototype.indexOf.call(Z,R,void 0),Pe;(Pe=_e>=0)&&Array.prototype.splice.call(Z,_e,1),Pe&&(de(R),x.g[z].length==0&&(delete x.g[z],x.h--))}}function me(x,R,z,Z){for(let _e=0;_e<x.length;++_e){const Pe=x[_e];if(!Pe.da&&Pe.listener==R&&Pe.capture==!!z&&Pe.ha==Z)return _e}return-1}var be="closure_lm_"+(Math.random()*1e6|0),Le={};function ke(x,R,z,Z,_e){if(Array.isArray(R)){for(let Pe=0;Pe<R.length;Pe++)ke(x,R[Pe],z,Z,_e);return null}return z=Pt(z),x&&x[Ne]?x.J(R,z,u(Z)?!!Z.capture:!1,_e):qe(x,R,z,!1,Z,_e)}function qe(x,R,z,Z,_e,Pe){if(!R)throw Error("Invalid event type");const et=u(_e)?!!_e.capture:!!_e;let Jt=st(x);if(Jt||(x[be]=Jt=new re(x)),z=Jt.add(R,z,Z,et,Pe),z.proxy)return z;if(Z=Je(),z.proxy=Z,Z.src=x,Z.listener=z,x.addEventListener)P||(_e=et),_e===void 0&&(_e=!1),x.addEventListener(R.toString(),Z,_e);else if(x.attachEvent)x.attachEvent(ft(R.toString()),Z);else if(x.addListener&&x.removeListener)x.addListener(Z);else throw Error("addEventListener and attachEvent are unavailable.");return z}function Je(){function x(z){return R.call(x.src,x.listener,z)}const R=se;return x}function it(x,R,z,Z,_e){if(Array.isArray(R))for(var Pe=0;Pe<R.length;Pe++)it(x,R[Pe],z,Z,_e);else Z=u(Z)?!!Z.capture:!!Z,z=Pt(z),x&&x[Ne]?(x=x.i,Pe=String(R).toString(),Pe in x.g&&(R=x.g[Pe],z=me(R,z,Z,_e),z>-1&&(de(R[z]),Array.prototype.splice.call(R,z,1),R.length==0&&(delete x.g[Pe],x.h--)))):x&&(x=st(x))&&(R=x.g[R.toString()],x=-1,R&&(x=me(R,z,Z,_e)),(z=x>-1?R[x]:null)&&at(z))}function at(x){if(typeof x!="number"&&x&&!x.da){var R=x.src;if(R&&R[Ne])he(R.i,x);else{var z=x.type,Z=x.proxy;R.removeEventListener?R.removeEventListener(z,Z,x.capture):R.detachEvent?R.detachEvent(ft(z),Z):R.addListener&&R.removeListener&&R.removeListener(Z),(z=st(R))?(he(z,x),z.h==0&&(z.src=null,R[be]=null)):de(x)}}}function ft(x){return x in Le?Le[x]:Le[x]="on"+x}function se(x,R){if(x.da)x=!0;else{R=new ue(R,this);const z=x.listener,Z=x.ha||x.src;x.fa&&at(x),x=z.call(Z,R)}return x}function st(x){return x=x[be],x instanceof re?x:null}var rn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Pt(x){return typeof x=="function"?x:(x[rn]||(x[rn]=function(R){return x.handleEvent(R)}),x[rn])}function Ge(){F.call(this),this.i=new re(this),this.M=this,this.G=null}y(Ge,F),Ge.prototype[Ne]=!0,Ge.prototype.removeEventListener=function(x,R,z,Z){it(this,x,R,z,Z)};function ct(x,R){var z,Z=x.G;if(Z)for(z=[];Z;Z=Z.G)z.push(Z);if(x=x.M,Z=R.type||R,typeof R=="string")R=new I(R,x);else if(R instanceof I)R.target=R.target||x;else{var _e=R;R=new I(Z,x),Q(R,_e)}_e=!0;let Pe,et;if(z)for(et=z.length-1;et>=0;et--)Pe=R.g=z[et],_e=lt(Pe,Z,!0,R)&&_e;if(Pe=R.g=x,_e=lt(Pe,Z,!0,R)&&_e,_e=lt(Pe,Z,!1,R)&&_e,z)for(et=0;et<z.length;et++)Pe=R.g=z[et],_e=lt(Pe,Z,!1,R)&&_e}Ge.prototype.N=function(){if(Ge.Z.N.call(this),this.i){var x=this.i;for(const R in x.g){const z=x.g[R];for(let Z=0;Z<z.length;Z++)de(z[Z]);delete x.g[R],x.h--}}this.G=null},Ge.prototype.J=function(x,R,z,Z){return this.i.add(String(x),R,!1,z,Z)},Ge.prototype.K=function(x,R,z,Z){return this.i.add(String(x),R,!0,z,Z)};function lt(x,R,z,Z){if(R=x.i.g[String(R)],!R)return!0;R=R.concat();let _e=!0;for(let Pe=0;Pe<R.length;++Pe){const et=R[Pe];if(et&&!et.da&&et.capture==z){const Jt=et.listener,gr=et.ha||et.src;et.fa&&he(x.i,et),_e=Jt.call(gr,Z)!==!1&&_e}}return _e&&!Z.defaultPrevented}function Dt(x,R){if(typeof x!="function")if(x&&typeof x.handleEvent=="function")x=f(x.handleEvent,x);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:c.setTimeout(x,R||0)}function St(x){x.g=Dt(()=>{x.g=null,x.i&&(x.i=!1,St(x))},x.l);const R=x.h;x.h=null,x.m.apply(null,R)}class sn extends F{constructor(R,z){super(),this.m=R,this.l=z,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:St(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dn(x){F.call(this),this.h=x,this.g={}}y(dn,F);var Xt=[];function pn(x){Se(x.g,function(R,z){this.g.hasOwnProperty(z)&&at(R)},x),x.g={}}dn.prototype.N=function(){dn.Z.N.call(this),pn(this)},dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var on=c.JSON.stringify,wt=c.JSON.parse,en=class{stringify(x){return c.JSON.stringify(x,void 0)}parse(x){return c.JSON.parse(x,void 0)}};function Nt(){}function Er(){}var ln={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Lt(){I.call(this,"d")}y(Lt,I);function $t(){I.call(this,"c")}y($t,I);var an={},Tt=null;function zn(){return Tt=Tt||new Ge}an.Ia="serverreachability";function zt(x){I.call(this,an.Ia,x)}y(zt,I);function qt(x){const R=zn();ct(R,new zt(R))}an.STAT_EVENT="statevent";function Gn(x,R){I.call(this,an.STAT_EVENT,x),this.stat=R}y(Gn,I);function Et(x){const R=zn();ct(R,new Gn(R,x))}an.Ja="timingevent";function jt(x,R){I.call(this,an.Ja,x),this.size=R}y(jt,I);function xn(x,R){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){x()},R)}function Bs(){this.g=!0}Bs.prototype.ua=function(){this.g=!1};function As(x,R,z,Z,_e,Pe){x.info(function(){if(x.g)if(Pe){var et="",Jt=Pe.split("&");for(let bn=0;bn<Jt.length;bn++){var gr=Jt[bn].split("=");if(gr.length>1){const Kn=gr[0];gr=gr[1];const Rs=Kn.split("_");et=Rs.length>=2&&Rs[1]=="type"?et+(Kn+"="+gr+"&"):et+(Kn+"=redacted&")}}}else et=null;else et=Pe;return"XMLHTTP REQ ("+Z+") [attempt "+_e+"]: "+R+`
`+z+`
`+et})}function pi(x,R,z,Z,_e,Pe,et){x.info(function(){return"XMLHTTP RESP ("+Z+") [ attempt "+_e+"]: "+R+`
`+z+`
`+Pe+" "+et})}function ms(x,R,z,Z){x.info(function(){return"XMLHTTP TEXT ("+R+"): "+qi(x,z)+(Z?" "+Z:"")})}function Ct(x,R){x.info(function(){return"TIMEOUT: "+R})}Bs.prototype.info=function(){};function qi(x,R){if(!x.g)return R;if(!R)return null;try{const Pe=JSON.parse(R);if(Pe){for(x=0;x<Pe.length;x++)if(Array.isArray(Pe[x])){var z=Pe[x];if(!(z.length<2)){var Z=z[1];if(Array.isArray(Z)&&!(Z.length<1)){var _e=Z[0];if(_e!="noop"&&_e!="stop"&&_e!="close")for(let et=1;et<Z.length;et++)Z[et]=""}}}}return on(Pe)}catch{return R}}var va={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ra={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},sa;function nr(){}y(nr,Nt),nr.prototype.g=function(){return new XMLHttpRequest},sa=new nr;function fr(x){return encodeURIComponent(String(x))}function es(x){var R=1;x=x.split(":");const z=[];for(;R>0&&x.length;)z.push(x.shift()),R--;return x.length&&z.push(x.join(":")),z}function zs(x,R,z,Z){this.j=x,this.i=R,this.l=z,this.S=Z||1,this.V=new dn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ts}function Ts(){this.i=null,this.g="",this.h=!1}var $n={},sr={};function ts(x,R,z){x.M=1,x.A=mo(Mr(R)),x.u=z,x.R=!0,aa(x,null)}function aa(x,R){x.F=Date.now(),ia(x),x.B=Mr(x.A);var z=x.B,Z=x.S;Array.isArray(Z)||(Z=[String(Z)]),wl(z.i,"t",Z),x.C=0,z=x.j.L,x.h=new Ts,x.g=ht(x.j,z?R:null,!x.u),x.P>0&&(x.O=new sn(f(x.Y,x,x.g),x.P)),R=x.V,z=x.g,Z=x.ba;var _e="readystatechange";Array.isArray(_e)||(_e&&(Xt[0]=_e.toString()),_e=Xt);for(let Pe=0;Pe<_e.length;Pe++){const et=ke(z,_e[Pe],Z||R.handleEvent,!1,R.h||R);if(!et)break;R.g[et.key]=et}R=x.J?ne(x.J):{},x.u?(x.v||(x.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.B,x.v,x.u,R)):(x.v="GET",x.g.ea(x.B,x.v,null,R)),qt(),As(x.i,x.v,x.B,x.l,x.S,x.u)}zs.prototype.ba=function(x){x=x.target;const R=this.O;R&&Ea(x)==3?R.j():this.Y(x)},zs.prototype.Y=function(x){try{if(x==this.g)e:{const Jt=Ea(this.g),gr=this.g.ya(),bn=this.g.ca();if(!(Jt<3)&&(Jt!=3||this.g&&(this.h.h||this.g.la()||$r(this.g)))){this.K||Jt!=4||gr==7||(gr==8||bn<=0?qt(3):qt(2)),wa(this);var R=this.g.ca();this.X=R;var z=Oa(this);if(this.o=R==200,pi(this.i,this.v,this.B,this.l,this.S,Jt,R),this.o){if(this.U&&!this.L){t:{if(this.g){var Z,_e=this.g;if((Z=_e.g?_e.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Z)){var Pe=Z;break t}}Pe=null}if(x=Pe)ms(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Fa(this,x);else{this.o=!1,this.m=3,Et(12),Na(this),qs(this);break e}}if(this.R){x=!0;let Kn;for(;!this.K&&this.C<z.length;)if(Kn=ei(this,z),Kn==sr){Jt==4&&(this.m=4,Et(14),x=!1),ms(this.i,this.l,null,"[Incomplete Response]");break}else if(Kn==$n){this.m=4,Et(15),ms(this.i,this.l,z,"[Invalid Chunk]"),x=!1;break}else ms(this.i,this.l,Kn,null),Fa(this,Kn);if(fo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||z.length!=0||this.h.h||(this.m=1,Et(16),x=!1),this.o=this.o&&x,!x)ms(this.i,this.l,z,"[Invalid Chunked Response]"),Na(this),qs(this);else if(z.length>0&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.aa&&!et.P&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Sl(et),et.P=!0,Et(11))}}else ms(this.i,this.l,z,null),Fa(this,z);Jt==4&&Na(this),this.o&&!this.K&&(Jt==4?oe(this.j,this):(this.o=!1,ia(this)))}else xi(this.g),R==400&&z.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),Na(this),qs(this)}}}catch{}finally{}};function Oa(x){if(!fo(x))return x.g.la();const R=$r(x.g);if(R==="")return"";let z="";const Z=R.length,_e=Ea(x.g)==4;if(!x.h.i){if(typeof TextDecoder>"u")return Na(x),qs(x),"";x.h.i=new c.TextDecoder}for(let Pe=0;Pe<Z;Pe++)x.h.h=!0,z+=x.h.i.decode(R[Pe],{stream:!(_e&&Pe==Z-1)});return R.length=0,x.h.g+=z,x.C=0,x.h.g}function fo(x){return x.g?x.v=="GET"&&x.M!=2&&x.j.Aa:!1}function ei(x,R){var z=x.C,Z=R.indexOf(`
`,z);return Z==-1?sr:(z=Number(R.substring(z,Z)),isNaN(z)?$n:(Z+=1,Z+z>R.length?sr:(R=R.slice(Z,Z+z),x.C=Z+z,R)))}zs.prototype.cancel=function(){this.K=!0,Na(this)};function ia(x){x.T=Date.now()+x.H,Hi(x,x.H)}function Hi(x,R){if(x.D!=null)throw Error("WatchDog timer not null");x.D=xn(f(x.aa,x),R)}function wa(x){x.D&&(c.clearTimeout(x.D),x.D=null)}zs.prototype.aa=function(){this.D=null;const x=Date.now();x-this.T>=0?(Ct(this.i,this.B),this.M!=2&&(qt(),Et(17)),Na(this),this.m=2,qs(this)):Hi(this,this.T-x)};function qs(x){x.j.I==0||x.K||oe(x.j,x)}function Na(x){wa(x);var R=x.O;R&&typeof R.dispose=="function"&&R.dispose(),x.O=null,pn(x.V),x.g&&(R=x.g,x.g=null,R.abort(),R.dispose())}function Fa(x,R){try{var z=x.j;if(z.I!=0&&(z.g==x||ti(z.h,x))){if(!x.L&&ti(z.h,x)&&z.I==3){try{var Z=z.Ba.g.parse(R)}catch{Z=null}if(Array.isArray(Z)&&Z.length==3){var _e=Z;if(_e[0]==0){e:if(!z.v){if(z.g)if(z.g.F+3e3<x.F)G(z),bi(z);else break e;si(z),Et(18)}}else z.xa=_e[1],0<z.xa-z.K&&_e[2]<37500&&z.F&&z.A==0&&!z.C&&(z.C=xn(f(z.Va,z),6e3));Va(z.h)<=1&&z.ta&&(z.ta=void 0)}else we(z,11)}else if((x.L||z.g==x)&&G(z),!B(R))for(_e=z.Ba.g.parse(R),R=0;R<_e.length;R++){let bn=_e[R];const Kn=bn[0];if(!(Kn<=z.K))if(z.K=Kn,bn=bn[1],z.I==2)if(bn[0]=="c"){z.M=bn[1],z.ba=bn[2];const Rs=bn[3];Rs!=null&&(z.ka=Rs,z.j.info("VER="+z.ka));const Gs=bn[4];Gs!=null&&(z.za=Gs,z.j.info("SVER="+z.za));const ar=bn[5];ar!=null&&typeof ar=="number"&&ar>0&&(Z=1.5*ar,z.O=Z,z.j.info("backChannelRequestTimeoutMs_="+Z)),Z=z;const $s=x.g;if($s){const ai=$s.g?$s.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ai){var Pe=Z.h;Pe.g||ai.indexOf("spdy")==-1&&ai.indexOf("quic")==-1&&ai.indexOf("h2")==-1||(Pe.j=Pe.l,Pe.g=new Set,Pe.h&&(Uo(Pe,Pe.h),Pe.h=null))}if(Z.G){const bo=$s.g?$s.g.getResponseHeader("X-HTTP-Session-Id"):null;bo&&(Z.wa=bo,Rn(Z.J,Z.G,bo))}}z.I=3,z.l&&z.l.ra(),z.aa&&(z.T=Date.now()-x.F,z.j.info("Handshake RTT: "+z.T+"ms")),Z=z;var et=x;if(Z.na=Ye(Z,Z.L?Z.ba:null,Z.W),et.L){bl(Z.h,et);var Jt=et,gr=Z.O;gr&&(Jt.H=gr),Jt.D&&(wa(Jt),ia(Jt)),Z.g=et}else fc(Z);z.i.length>0&&Ba(z)}else bn[0]!="stop"&&bn[0]!="close"||we(z,7);else z.I==3&&(bn[0]=="stop"||bn[0]=="close"?bn[0]=="stop"?we(z,7):yo(z):bn[0]!="noop"&&z.l&&z.l.qa(bn),z.A=0)}}qt(4)}catch{}}var Tr=class{constructor(x,R){this.g=x,this.map=R}};function yl(x){this.l=x||10,c.PerformanceNavigationTiming?(x=c.performance.getEntriesByType("navigation"),x=x.length>0&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function oa(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Va(x){return x.h?1:x.g?x.g.size:0}function ti(x,R){return x.h?x.h==R:x.g?x.g.has(R):!1}function Uo(x,R){x.g?x.g.add(R):x.h=R}function bl(x,R){x.h&&x.h==R?x.h=null:x.g&&x.g.has(R)&&x.g.delete(R)}yl.prototype.cancel=function(){if(this.i=vl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function vl(x){if(x.h!=null)return x.i.concat(x.h.G);if(x.g!=null&&x.g.size!==0){let R=x.i;for(const z of x.g.values())R=R.concat(z.G);return R}return b(x.i)}var oc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ja(x,R){if(x){x=x.split("&");for(let z=0;z<x.length;z++){const Z=x[z].indexOf("=");let _e,Pe=null;Z>=0?(_e=x[z].substring(0,Z),Pe=x[z].substring(Z+1)):_e=x[z],R(_e,Pe?decodeURIComponent(Pe.replace(/\+/g," ")):"")}}}function Cs(x){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;x instanceof Cs?(this.l=x.l,wn(this,x.j),this.o=x.o,this.g=x.g,Gi(this,x.u),this.h=x.h,Ua(this,Nl(x.i)),this.m=x.m):x&&(R=String(x).match(oc))?(this.l=!1,wn(this,R[1]||"",!0),this.o=Gr(R[2]||""),this.g=Gr(R[3]||"",!0),Gi(this,R[4]),this.h=Gr(R[5]||"",!0),Ua(this,R[6]||"",!0),this.m=Gr(R[7]||"")):(this.l=!1,this.i=new $i(null,this.l))}Cs.prototype.toString=function(){const x=[];var R=this.j;R&&x.push(wr(R,Bo,!0),":");var z=this.g;return(z||R=="file")&&(x.push("//"),(R=this.o)&&x.push(wr(R,Bo,!0),"@"),x.push(fr(z).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),z=this.u,z!=null&&x.push(":",String(z))),(z=this.h)&&(this.g&&z.charAt(0)!="/"&&x.push("/"),x.push(wr(z,z.charAt(0)=="/"?lc:nu,!0))),(z=this.i.toString())&&x.push("?",z),(z=this.m)&&x.push("#",wr(z,cc)),x.join("")},Cs.prototype.resolve=function(x){const R=Mr(this);let z=!!x.j;z?wn(R,x.j):z=!!x.o,z?R.o=x.o:z=!!x.g,z?R.g=x.g:z=x.u!=null;var Z=x.h;if(z)Gi(R,x.u);else if(z=!!x.h){if(Z.charAt(0)!="/")if(this.g&&!this.h)Z="/"+Z;else{var _e=R.h.lastIndexOf("/");_e!=-1&&(Z=R.h.slice(0,_e+1)+Z)}if(_e=Z,_e==".."||_e==".")Z="";else if(_e.indexOf("./")!=-1||_e.indexOf("/.")!=-1){Z=_e.lastIndexOf("/",0)==0,_e=_e.split("/");const Pe=[];for(let et=0;et<_e.length;){const Jt=_e[et++];Jt=="."?Z&&et==_e.length&&Pe.push(""):Jt==".."?((Pe.length>1||Pe.length==1&&Pe[0]!="")&&Pe.pop(),Z&&et==_e.length&&Pe.push("")):(Pe.push(Jt),Z=!0)}Z=Pe.join("/")}else Z=_e}return z?R.h=Z:z=x.i.toString()!=="",z?Ua(R,Nl(x.i)):z=!!x.m,z&&(R.m=x.m),R};function Mr(x){return new Cs(x)}function wn(x,R,z){x.j=z?Gr(R,!0):R,x.j&&(x.j=x.j.replace(/:$/,""))}function Gi(x,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);x.u=R}else x.u=null}function Ua(x,R,z){R instanceof $i?(x.i=R,la(x.i,x.l)):(z||(R=wr(R,Hs)),x.i=new $i(R,x.l))}function Rn(x,R,z){x.i.set(R,z)}function mo(x){return Rn(x,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),x}function Gr(x,R){return x?R?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function wr(x,R,z){return typeof x=="string"?(x=encodeURI(x).replace(R,Or),z&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Or(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var Bo=/[#\/\?@]/g,nu=/[#\?:]/g,lc=/[#\?]/g,Hs=/[#\?@]/g,cc=/#/g;function $i(x,R){this.h=this.g=null,this.i=x||null,this.j=!!R}function gs(x){x.g||(x.g=new Map,x.h=0,x.i&&ja(x.i,function(R,z){x.add(decodeURIComponent(R.replace(/\+/g," ")),z)}))}n=$i.prototype,n.add=function(x,R){gs(this),this.i=null,x=Wi(this,x);let z=this.g.get(x);return z||this.g.set(x,z=[]),z.push(R),this.h+=1,this};function go(x,R){gs(x),R=Wi(x,R),x.g.has(R)&&(x.i=null,x.h-=x.g.get(R).length,x.g.delete(R))}function uc(x,R){return gs(x),R=Wi(x,R),x.g.has(R)}n.forEach=function(x,R){gs(this),this.g.forEach(function(z,Z){z.forEach(function(_e){x.call(R,_e,Z,this)},this)},this)};function dc(x,R){gs(x);let z=[];if(typeof R=="string")uc(x,R)&&(z=z.concat(x.g.get(Wi(x,R))));else for(x=Array.from(x.g.values()),R=0;R<x.length;R++)z=z.concat(x[R]);return z}n.set=function(x,R){return gs(this),this.i=null,x=Wi(this,x),uc(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[R]),this.h+=1,this},n.get=function(x,R){return x?(x=dc(this,x),x.length>0?String(x[0]):R):R};function wl(x,R,z){go(x,R),z.length>0&&(x.i=null,x.g.set(Wi(x,R),b(z)),x.h+=z.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],R=Array.from(this.g.keys());for(let Z=0;Z<R.length;Z++){var z=R[Z];const _e=fr(z);z=dc(this,z);for(let Pe=0;Pe<z.length;Pe++){let et=_e;z[Pe]!==""&&(et+="="+fr(z[Pe])),x.push(et)}}return this.i=x.join("&")};function Nl(x){const R=new $i;return R.i=x.i,x.g&&(R.g=new Map(x.g),R.h=x.h),R}function Wi(x,R){return R=String(R),x.j&&(R=R.toLowerCase()),R}function la(x,R){R&&!x.j&&(gs(x),x.i=null,x.g.forEach(function(z,Z){const _e=Z.toLowerCase();Z!=_e&&(go(this,Z),wl(this,_e,z))},x)),x.j=R}function ni(x,R){const z=new Bs;if(c.Image){const Z=new Image;Z.onload=g(ca,z,"TestLoadImage: loaded",!0,R,Z),Z.onerror=g(ca,z,"TestLoadImage: error",!1,R,Z),Z.onabort=g(ca,z,"TestLoadImage: abort",!1,R,Z),Z.ontimeout=g(ca,z,"TestLoadImage: timeout",!1,R,Z),c.setTimeout(function(){Z.ontimeout&&Z.ontimeout()},1e4),Z.src=x}else R(!1)}function Ki(x,R){const z=new Bs,Z=new AbortController,_e=setTimeout(()=>{Z.abort(),ca(z,"TestPingServer: timeout",!1,R)},1e4);fetch(x,{signal:Z.signal}).then(Pe=>{clearTimeout(_e),Pe.ok?ca(z,"TestPingServer: ok",!0,R):ca(z,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(_e),ca(z,"TestPingServer: error",!1,R)})}function ca(x,R,z,Z,_e){try{_e&&(_e.onload=null,_e.onerror=null,_e.onabort=null,_e.ontimeout=null),Z(z)}catch{}}function po(){this.g=new en}function Mt(x){this.i=x.Sb||null,this.h=x.ab||!1}y(Mt,Nt),Mt.prototype.g=function(){return new zo(this.i,this.h)};function zo(x,R){Ge.call(this),this.H=x,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(zo,Ge),n=zo.prototype,n.open=function(x,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=x,this.D=R,this.readyState=1,ps(this)},n.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};x&&(R.body=x),(this.H||c).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,xo(this)),this.readyState=0},n.Pa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,ps(this)),this.g&&(this.readyState=3,ps(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;jl(this)}else x.text().then(this.Oa.bind(this),this.ga.bind(this))};function jl(x){x.j.read().then(x.Ma.bind(x)).catch(x.ga.bind(x))}n.Ma=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var R=x.value?x.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!x.done}))&&(this.response=this.responseText+=R)}x.done?xo(this):ps(this),this.readyState==3&&jl(this)}},n.Oa=function(x){this.g&&(this.response=this.responseText=x,xo(this))},n.Na=function(x){this.g&&(this.response=x,xo(this))},n.ga=function(){this.g&&xo(this)};function xo(x){x.readyState=4,x.l=null,x.j=null,x.B=null,ps(x)}n.setRequestHeader=function(x,R){this.A.append(x,R)},n.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],R=this.h.entries();for(var z=R.next();!z.done;)z=z.value,x.push(z[0]+": "+z[1]),z=R.next();return x.join(`\r
`)};function ps(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(zo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function ns(x){let R="";return Se(x,function(z,Z){R+=Z,R+=":",R+=z,R+=`\r
`}),R}function qo(x,R,z){e:{for(Z in z){var Z=!1;break e}Z=!0}Z||(z=ns(z),typeof x=="string"?z!=null&&fr(z):Rn(x,R,z))}function Wn(x){Ge.call(this),this.headers=new Map,this.L=x||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(Wn,Ge);var _a=/^https?$/i,Ho=["POST","PUT"];n=Wn.prototype,n.Fa=function(x){this.H=x},n.ea=function(x,R,z,Z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);R=R?R.toUpperCase():"GET",this.D=x,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():sa.g(),this.g.onreadystatechange=w(f(this.Ca,this));try{this.B=!0,this.g.open(R,String(x),!0),this.B=!1}catch(Pe){ri(this,Pe);return}if(x=z||"",z=new Map(this.headers),Z)if(Object.getPrototypeOf(Z)===Object.prototype)for(var _e in Z)z.set(_e,Z[_e]);else if(typeof Z.keys=="function"&&typeof Z.get=="function")for(const Pe of Z.keys())z.set(Pe,Z.get(Pe));else throw Error("Unknown input type for opt_headers: "+String(Z));Z=Array.from(z.keys()).find(Pe=>Pe.toLowerCase()=="content-type"),_e=c.FormData&&x instanceof c.FormData,!(Array.prototype.indexOf.call(Ho,R,void 0)>=0)||Z||_e||z.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Pe,et]of z)this.g.setRequestHeader(Pe,et);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(x),this.v=!1}catch(Pe){ri(this,Pe)}};function ri(x,R){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=R,x.o=5,hc(x),Yi(x)}function hc(x){x.A||(x.A=!0,ct(x,"complete"),ct(x,"error"))}n.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=x||7,ct(this,"complete"),ct(this,"abort"),Yi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yi(this,!0)),Wn.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Sa(this):this.Xa())},n.Xa=function(){Sa(this)};function Sa(x){if(x.h&&typeof o<"u"){if(x.v&&Ea(x)==4)setTimeout(x.Ca.bind(x),0);else if(ct(x,"readystatechange"),Ea(x)==4){x.h=!1;try{const Pe=x.ca();e:switch(Pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var z;if(!(z=R)){var Z;if(Z=Pe===0){let et=String(x.D).match(oc)[1]||null;!et&&c.self&&c.self.location&&(et=c.self.location.protocol.slice(0,-1)),Z=!_a.test(et?et.toLowerCase():"")}z=Z}if(z)ct(x,"complete"),ct(x,"success");else{x.o=6;try{var _e=Ea(x)>2?x.g.statusText:""}catch{_e=""}x.l=_e+" ["+x.ca()+"]",hc(x)}}finally{Yi(x)}}}}function Yi(x,R){if(x.g){x.m&&(clearTimeout(x.m),x.m=null);const z=x.g;x.g=null,R||ct(x,"ready");try{z.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ea(x){return x.g?x.g.readyState:0}n.ca=function(){try{return Ea(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(x){if(this.g){var R=this.g.responseText;return x&&R.indexOf(x)==0&&(R=R.substring(x.length)),wt(R)}};function $r(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.F){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function xi(x){const R={};x=(x.g&&Ea(x)>=2&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let Z=0;Z<x.length;Z++){if(B(x[Z]))continue;var z=es(x[Z]);const _e=z[0];if(z=z[1],typeof z!="string")continue;z=z.trim();const Pe=R[_e]||[];R[_e]=Pe,Pe.push(z)}ze(R,function(Z){return Z.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Is(x,R,z){return z&&z.internalChannelParams&&z.internalChannelParams[x]||R}function yi(x){this.za=0,this.i=[],this.j=new Bs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Is("failFast",!1,x),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Is("baseRetryDelayMs",5e3,x),this.Za=Is("retryDelaySeedMs",1e4,x),this.Ta=Is("forwardChannelMaxRetries",2,x),this.va=Is("forwardChannelRequestTimeoutMs",2e4,x),this.ma=x&&x.xmlHttpFactory||void 0,this.Ua=x&&x.Rb||void 0,this.Aa=x&&x.useFetchStreams||!1,this.O=void 0,this.L=x&&x.supportsCrossDomainXhr||!1,this.M="",this.h=new yl(x&&x.concurrentRequestLimit),this.Ba=new po,this.S=x&&x.fastHandshake||!1,this.R=x&&x.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=x&&x.Pb||!1,x&&x.ua&&this.j.ua(),x&&x.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&x&&x.detectBufferingProxy||!1,this.ia=void 0,x&&x.longPollingTimeout&&x.longPollingTimeout>0&&(this.ia=x.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=yi.prototype,n.ka=8,n.I=1,n.connect=function(x,R,z,Z){Et(0),this.W=x,this.H=R||{},z&&Z!==void 0&&(this.H.OSID=z,this.H.OAID=Z),this.F=this.X,this.J=Ye(this,null,this.W),Ba(this)};function yo(x){if(vi(x),x.I==3){var R=x.V++,z=Mr(x.J);if(Rn(z,"SID",x.M),Rn(z,"RID",R),Rn(z,"TYPE","terminate"),Aa(x,z),R=new zs(x,x.j,R),R.M=2,R.A=mo(Mr(z)),z=!1,c.navigator&&c.navigator.sendBeacon)try{z=c.navigator.sendBeacon(R.A.toString(),"")}catch{}!z&&c.Image&&(new Image().src=R.A,z=!0),z||(R.g=ht(R.j,null),R.g.ea(R.A)),R.F=Date.now(),ia(R)}Ue(x)}function bi(x){x.g&&(Sl(x),x.g.cancel(),x.g=null)}function vi(x){bi(x),x.v&&(c.clearTimeout(x.v),x.v=null),G(x),x.h.cancel(),x.m&&(typeof x.m=="number"&&c.clearTimeout(x.m),x.m=null)}function Ba(x){if(!oa(x.h)&&!x.m){x.m=!0;var R=x.Ea;te||V(),ae||(te(),ae=!0),H.add(R,x),x.D=0}}function Go(x,R){return Va(x.h)>=x.h.j-(x.m?1:0)?!1:x.m?(x.i=R.G.concat(x.i),!0):x.I==1||x.I==2||x.D>=(x.Sa?0:x.Ta)?!1:(x.m=xn(f(x.Ea,x,R),ge(x,x.D)),x.D++,!0)}n.Ea=function(x){if(this.m)if(this.m=null,this.I==1){if(!x){this.V=Math.floor(Math.random()*1e5),x=this.V++;const _e=new zs(this,this.j,x);let Pe=this.o;if(this.U&&(Pe?(Pe=ne(Pe),Q(Pe,this.U)):Pe=this.U),this.u!==null||this.R||(_e.J=Pe,Pe=null),this.S)e:{for(var R=0,z=0;z<this.i.length;z++){t:{var Z=this.i[z];if("__data__"in Z.map&&(Z=Z.map.__data__,typeof Z=="string")){Z=Z.length;break t}Z=void 0}if(Z===void 0)break;if(R+=Z,R>4096){R=z;break e}if(R===4096||z===this.i.length-1){R=z+1;break e}}R=1e3}else R=1e3;R=wi(this,_e,R),z=Mr(this.J),Rn(z,"RID",x),Rn(z,"CVER",22),this.G&&Rn(z,"X-HTTP-Session-Id",this.G),Aa(this,z),Pe&&(this.R?R="headers="+fr(ns(Pe))+"&"+R:this.u&&qo(z,this.u,Pe)),Uo(this.h,_e),this.Ra&&Rn(z,"TYPE","init"),this.S?(Rn(z,"$req",R),Rn(z,"SID","null"),_e.U=!0,ts(_e,z,null)):ts(_e,z,R),this.I=2}}else this.I==3&&(x?_l(this,x):this.i.length==0||oa(this.h)||_l(this))};function _l(x,R){var z;R?z=R.l:z=x.V++;const Z=Mr(x.J);Rn(Z,"SID",x.M),Rn(Z,"RID",z),Rn(Z,"AID",x.K),Aa(x,Z),x.u&&x.o&&qo(Z,x.u,x.o),z=new zs(x,x.j,z,x.D+1),x.u===null&&(z.J=x.o),R&&(x.i=R.G.concat(x.i)),R=wi(x,z,1e3),z.H=Math.round(x.va*.5)+Math.round(x.va*.5*Math.random()),Uo(x.h,z),ts(z,Z,R)}function Aa(x,R){x.H&&Se(x.H,function(z,Z){Rn(R,Z,z)}),x.l&&Se({},function(z,Z){Rn(R,Z,z)})}function wi(x,R,z){z=Math.min(x.i.length,z);const Z=x.l?f(x.l.Ka,x.l,x):null;e:{var _e=x.i;let Jt=-1;for(;;){const gr=["count="+z];Jt==-1?z>0?(Jt=_e[0].g,gr.push("ofs="+Jt)):Jt=0:gr.push("ofs="+Jt);let bn=!0;for(let Kn=0;Kn<z;Kn++){var Pe=_e[Kn].g;const Rs=_e[Kn].map;if(Pe-=Jt,Pe<0)Jt=Math.max(0,_e[Kn].g-100),bn=!1;else try{Pe="req"+Pe+"_"||"";try{var et=Rs instanceof Map?Rs:Object.entries(Rs);for(const[Gs,ar]of et){let $s=ar;u(ar)&&($s=on(ar)),gr.push(Pe+Gs+"="+encodeURIComponent($s))}}catch(Gs){throw gr.push(Pe+"type="+encodeURIComponent("_badmap")),Gs}}catch{Z&&Z(Rs)}}if(bn){et=gr.join("&");break e}}et=void 0}return x=x.i.splice(0,z),R.G=x,et}function fc(x){if(!x.g&&!x.v){x.Y=1;var R=x.Da;te||V(),ae||(te(),ae=!0),H.add(R,x),x.A=0}}function si(x){return x.g||x.v||x.A>=3?!1:(x.Y++,x.v=xn(f(x.Da,x),ge(x,x.A)),x.A++,!0)}n.Da=function(){if(this.v=null,A(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var x=4*this.T;this.j.info("BP detection timer enabled: "+x),this.B=xn(f(this.Wa,this),x)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),bi(this),A(this))};function Sl(x){x.B!=null&&(c.clearTimeout(x.B),x.B=null)}function A(x){x.g=new zs(x,x.j,"rpc",x.Y),x.u===null&&(x.g.J=x.o),x.g.P=0;var R=Mr(x.na);Rn(R,"RID","rpc"),Rn(R,"SID",x.M),Rn(R,"AID",x.K),Rn(R,"CI",x.F?"0":"1"),!x.F&&x.ia&&Rn(R,"TO",x.ia),Rn(R,"TYPE","xmlhttp"),Aa(x,R),x.u&&x.o&&qo(R,x.u,x.o),x.O&&(x.g.H=x.O);var z=x.g;x=x.ba,z.M=1,z.A=mo(Mr(R)),z.u=null,z.R=!0,aa(z,x)}n.Va=function(){this.C!=null&&(this.C=null,bi(this),si(this),Et(19))};function G(x){x.C!=null&&(c.clearTimeout(x.C),x.C=null)}function oe(x,R){var z=null;if(x.g==R){G(x),Sl(x),x.g=null;var Z=2}else if(ti(x.h,R))z=R.G,bl(x.h,R),Z=1;else return;if(x.I!=0){if(R.o)if(Z==1){z=R.u?R.u.length:0,R=Date.now()-R.F;var _e=x.D;Z=zn(),ct(Z,new jt(Z,z)),Ba(x)}else fc(x);else if(_e=R.m,_e==3||_e==0&&R.X>0||!(Z==1&&Go(x,R)||Z==2&&si(x)))switch(z&&z.length>0&&(R=x.h,R.i=R.i.concat(z)),_e){case 1:we(x,5);break;case 4:we(x,10);break;case 3:we(x,6);break;default:we(x,2)}}}function ge(x,R){let z=x.Qa+Math.floor(Math.random()*x.Za);return x.isActive()||(z*=2),z*R}function we(x,R){if(x.j.info("Error code "+R),R==2){var z=f(x.bb,x),Z=x.Ua;const _e=!Z;Z=new Cs(Z||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||wn(Z,"https"),mo(Z),_e?ni(Z.toString(),z):Ki(Z.toString(),z)}else Et(2);x.I=0,x.l&&x.l.pa(R),Ue(x),vi(x)}n.bb=function(x){x?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function Ue(x){if(x.I=0,x.ja=[],x.l){const R=vl(x.h);(R.length!=0||x.i.length!=0)&&(T(x.ja,R),T(x.ja,x.i),x.h.i.length=0,b(x.i),x.i.length=0),x.l.oa()}}function Ye(x,R,z){var Z=z instanceof Cs?Mr(z):new Cs(z);if(Z.g!="")R&&(Z.g=R+"."+Z.g),Gi(Z,Z.u);else{var _e=c.location;Z=_e.protocol,R=R?R+"."+_e.hostname:_e.hostname,_e=+_e.port;const Pe=new Cs(null);Z&&wn(Pe,Z),R&&(Pe.g=R),_e&&Gi(Pe,_e),z&&(Pe.h=z),Z=Pe}return z=x.G,R=x.wa,z&&R&&Rn(Z,z,R),Rn(Z,"VER",x.ka),Aa(x,Z),Z}function ht(x,R,z){if(R&&!x.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=x.Aa&&!x.ma?new Wn(new Mt({ab:z})):new Wn(x.ma),R.Fa(x.L),R}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function pt(){}n=pt.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ft(){}Ft.prototype.g=function(x,R){return new It(x,R)};function It(x,R){Ge.call(this),this.g=new yi(R),this.l=x,this.h=R&&R.messageUrlParams||null,x=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(x?x["X-WebChannel-Content-Type"]=R.messageContentType:x={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(x?x["X-WebChannel-Client-Profile"]=R.sa:x={"X-WebChannel-Client-Profile":R.sa}),this.g.U=x,(x=R&&R.Qb)&&!B(x)&&(this.g.u=x),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!B(R)&&(this.g.G=R,x=this.h,x!==null&&R in x&&(x=this.h,R in x&&delete x[R])),this.j=new rr(this)}y(It,Ge),It.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){yo(this.g)},It.prototype.o=function(x){var R=this.g;if(typeof x=="string"){var z={};z.__data__=x,x=z}else this.v&&(z={},z.__data__=on(x),x=z);R.i.push(new Tr(R.Ya++,x)),R.I==3&&Ba(R)},It.prototype.N=function(){this.g.l=null,delete this.j,yo(this.g),delete this.g,It.Z.N.call(this)};function En(x){Lt.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var R=x.__sm__;if(R){e:{for(const z in R){x=z;break e}x=void 0}(this.i=x)&&(x=this.i,R=R!==null&&x in R?R[x]:void 0),this.data=R}else this.data=x}y(En,Lt);function mr(){$t.call(this),this.status=1}y(mr,$t);function rr(x){this.g=x}y(rr,pt),rr.prototype.ra=function(){ct(this.g,"a")},rr.prototype.qa=function(x){ct(this.g,new En(x))},rr.prototype.pa=function(x){ct(this.g,new mr)},rr.prototype.oa=function(){ct(this.g,"b")},Ft.prototype.createWebChannel=Ft.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,iS=function(){return new Ft},aS=function(){return zn()},sS=an,z1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},va.NO_ERROR=0,va.TIMEOUT=8,va.HTTP_ERROR=6,R0=va,ra.COMPLETE="complete",rS=ra,Er.EventType=ln,ln.OPEN="a",ln.CLOSE="b",ln.ERROR="c",ln.MESSAGE="d",Ge.prototype.listen=Ge.prototype.J,Zm=Er,Wn.prototype.listenOnce=Wn.prototype.K,Wn.prototype.getLastError=Wn.prototype.Ha,Wn.prototype.getLastErrorCode=Wn.prototype.ya,Wn.prototype.getStatus=Wn.prototype.ca,Wn.prototype.getResponseJson=Wn.prototype.La,Wn.prototype.getResponseText=Wn.prototype.la,Wn.prototype.send=Wn.prototype.ea,Wn.prototype.setWithCredentials=Wn.prototype.Fa,nS=Wn}).apply(typeof i0<"u"?i0:typeof self<"u"?self:typeof window<"u"?window:{});const Sj="@firebase/firestore",Ej="4.9.2";let La=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};La.UNAUTHENTICATED=new La(null),La.GOOGLE_CREDENTIALS=new La("google-credentials-uid"),La.FIRST_PARTY=new La("first-party-uid"),La.MOCK_USER=new La("mock-user");let Qf="12.3.0";const Zd=new G2("@firebase/firestore");function cf(){return Zd.logLevel}function Ze(n,...e){if(Zd.logLevel<=Ln.DEBUG){const t=e.map(nv);Zd.debug(`Firestore (${Qf}): ${n}`,...t)}}function hi(n,...e){if(Zd.logLevel<=Ln.ERROR){const t=e.map(nv);Zd.error(`Firestore (${Qf}): ${n}`,...t)}}function eh(n,...e){if(Zd.logLevel<=Ln.WARN){const t=e.map(nv);Zd.warn(`Firestore (${Qf}): ${n}`,...t)}}function nv(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function bt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,oS(n,r,t)}function oS(n,e,t){let r=`FIRESTORE (${Qf}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw hi(r),new Error(r)}function kt(n,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,n||oS(e,a,r)}function un(n,e){return n}const Ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tt extends rc{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ql{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class lS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(La.UNAUTHENTICATED)))}shutdown(){}}class GL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $L{constructor(e){this.t=e,this.currentUser=La.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){kt(this.o===void 0,42304);let r=this.i;const a=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new Ql;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ql,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await a(this.currentUser)}))},u=h=>{Ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((h=>u(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(Ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ql)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(kt(typeof r.accessToken=="string",31837,{l:r}),new lS(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return kt(e===null||typeof e=="string",2055,{h:e}),new La(e)}}class WL{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=La.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KL{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new WL(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(La.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Aj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YL{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ao(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){kt(this.o===void 0,3512);const r=o=>{o.error!=null&&Ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,Ze("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const a=o=>{Ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>a(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?a(o):Ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Aj(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(kt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Aj(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function XL(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class rv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=XL(40);for(let o=0;o<a.length;++o)r.length<20&&a[o]<t&&(r+=e.charAt(a[o]%62))}return r}}function cn(n,e){return n<e?-1:n>e?1:0}function q1(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const a=n.charAt(r),o=e.charAt(r);if(a!==o)return Wb(a)===Wb(o)?cn(a,o):Wb(a)?1:-1}return cn(n.length,e.length)}const QL=55296,JL=57343;function Wb(n){const e=n.charCodeAt(0);return e>=QL&&e<=JL}function If(n,e,t){return n.length===e.length&&n.every(((r,a)=>t(r,e[a])))}function cS(n){return n+"\0"}const Tj="__name__";class zl{constructor(e,t,r){t===void 0?t=0:t>e.length&&bt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&bt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return zl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zl?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const o=zl.compareSegments(e.get(a),t.get(a));if(o!==0)return o}return cn(e.length,t.length)}static compareSegments(e,t){const r=zl.isNumericId(e),a=zl.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?zl.extractNumericId(e).compare(zl.extractNumericId(t)):q1(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yu.fromString(e.substring(4,e.length-2))}}class tr extends zl{construct(e,t,r){return new tr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new tt(Ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new tr(t)}static emptyPath(){return new tr([])}}const ZL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qr extends zl{construct(e,t,r){return new Qr(e,t,r)}static isValidIdentifier(e){return ZL.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Tj}static keyField(){return new Qr([Tj])}static fromServerFormat(e){const t=[];let r="",a=0;const o=()=>{if(r.length===0)throw new tt(Ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const u=e[a];if(u==="\\"){if(a+1===e.length)throw new tt(Ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[a+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new tt(Ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,a+=2}else u==="`"?(c=!c,a++):u!=="."||c?(r+=u,a++):(o(),a++)}if(o(),c)throw new tt(Ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qr(t)}static emptyPath(){return new Qr([])}}class ot{constructor(e){this.path=e}static fromPath(e){return new ot(tr.fromString(e))}static fromName(e){return new ot(tr.fromString(e).popFirst(5))}static empty(){return new ot(tr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ot(new tr(e.slice()))}}function uS(n,e,t){if(!t)throw new tt(Ve.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function e7(n,e,t,r){if(e===!0&&r===!0)throw new tt(Ve.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Cj(n){if(!ot.isDocumentKey(n))throw new tt(Ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ij(n){if(ot.isDocumentKey(n))throw new tt(Ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function dS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Vx(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":bt(12329,{type:typeof n})}function gi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new tt(Ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Vx(n);throw new tt(Ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Fs(n,e){const t={typeString:n};return e&&(t.value=e),t}function Yg(n,e){if(!dS(n))throw new tt(Ve.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new tt(Ve.INVALID_ARGUMENT,t);return!0}const Rj=-62135596800,kj=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*kj);return new vt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new tt(Ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new tt(Ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Rj)throw new tt(Ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new tt(Ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kj}_compareTo(e){return this.seconds===e.seconds?cn(this.nanoseconds,e.nanoseconds):cn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yg(e,vt._jsonSchema))return new vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Rj;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vt._jsonSchemaVersion="firestore/timestamp/1.0",vt._jsonSchema={type:Fs("string",vt._jsonSchemaVersion),seconds:Fs("number"),nanoseconds:Fs("number")};class Ht{static fromTimestamp(e){return new Ht(e)}static min(){return new Ht(new vt(0,0))}static max(){return new Ht(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Sg=-1;class ax{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function H1(n){return n.fields.find((e=>e.kind===2))}function kd(n){return n.fields.filter((e=>e.kind!==2))}ax.UNKNOWN_ID=-1;class k0{constructor(e,t){this.fieldPath=e,this.kind=t}}class Eg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Eg(0,uo.min())}}function t7(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=Ht.fromTimestamp(r===1e9?new vt(t+1,0):new vt(t,r));return new uo(a,ot.empty(),e)}function hS(n){return new uo(n.readTime,n.key,Sg)}class uo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new uo(Ht.min(),ot.empty(),Sg)}static max(){return new uo(Ht.max(),ot.empty(),Sg)}}function sv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ot.comparator(n.documentKey,e.documentKey),t!==0?t:cn(n.largestBatchId,e.largestBatchId))}const fS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function hh(n){if(n.code!==Ve.FAILED_PRECONDITION||n.message!==fS)throw n;Ze("LocalStore","Unexpectedly lost primary lease")}class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&bt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Te(((r,a)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,a)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Te?t:Te.resolve(t)}catch(t){return Te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Te.reject(t)}static resolve(e){return new Te(((t,r)=>{t(e)}))}static reject(e){return new Te(((t,r)=>{r(e)}))}static waitFor(e){return new Te(((t,r)=>{let a=0,o=0,c=!1;e.forEach((u=>{++a,u.next((()=>{++o,c&&o===a&&t()}),(h=>r(h)))})),c=!0,o===a&&t()}))}static or(e){let t=Te.resolve(!1);for(const r of e)t=t.next((a=>a?Te.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,o)=>{r.push(t.call(this,a,o))})),this.waitFor(r)}static mapArray(e,t){return new Te(((r,a)=>{const o=e.length,c=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;t(e[f]).next((g=>{c[f]=g,++u,u===o&&r(c)}),(g=>a(g)))}}))}static doWhile(e,t){return new Te(((r,a)=>{const o=()=>{e()===!0?t().next((()=>{o()}),a):r()};o()}))}}const so="SimpleDb";class Ux{static open(e,t,r,a){try{return new Ux(t,e.transaction(a,r))}catch(o){throw new ig(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Ql,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ig(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=av(r.target.error);this.S.reject(new ig(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ze(so,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new r7(t)}}class Xu{static delete(e){return Ze(so,"Removing database:",e),Dd(n3().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!d3())return!1;if(Xu.F())return!0;const e=ta(),t=Xu.M(e),r=0<t&&t<10,a=gS(e),o=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Xu.M(ta())===12.2&&hi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Ze(so,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=o=>{const c=o.target.result;t(c)},a.onblocked=()=>{r(new ig(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=o=>{const c=o.target.error;c.name==="VersionError"?r(new tt(Ve.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new tt(Ve.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new ig(e,c))},a.onupgradeneeded=o=>{Ze(so,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.N.k(c,a.transaction,o.oldVersion,this.version).next((()=>{Ze(so,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const o=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const u=Ux.open(this.db,e,o?"readonly":"readwrite",r),h=a(u).next((f=>(u.C(),f))).catch((f=>(u.abort(f),Te.reject(f)))).toPromise();return h.catch((()=>{})),await u.D,h}catch(u){const h=u,f=h.name!=="FirebaseError"&&c<3;if(Ze(so,"Transaction failed with error:",h.message,"Retrying:",f),this.close(),!f)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function gS(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class n7{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Dd(this.U.delete())}}class ig extends tt{constructor(e,t){super(Ve.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ud(n){return n.name==="IndexedDbTransactionError"}class r7{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Ze(so,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ze(so,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Dd(r)}add(e){return Ze(so,"ADD",this.store.name,e,e),Dd(this.store.add(e))}get(e){return Dd(this.store.get(e)).next((t=>(t===void 0&&(t=null),Ze(so,"GET",this.store.name,e,t),t)))}delete(e){return Ze(so,"DELETE",this.store.name,e),Dd(this.store.delete(e))}count(){return Ze(so,"COUNT",this.store.name),Dd(this.store.count())}J(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const o=a.getAll(r.range);return new Te(((c,u)=>{o.onerror=h=>{u(h.target.error)},o.onsuccess=h=>{c(h.target.result)}}))}{const o=this.cursor(r),c=[];return this.H(o,((u,h)=>{c.push(h)})).next((()=>c))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new Te(((a,o)=>{r.onerror=c=>{o(c.target.error)},r.onsuccess=c=>{a(c.target.result)}}))}Z(e,t){Ze(so,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const a=this.cursor(r);return this.H(a,((o,c,u)=>u.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.H(a,t)}te(e){const t=this.cursor({});return new Te(((r,a)=>{t.onerror=o=>{const c=av(o.target.error);a(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next((u=>{u?c.continue():r()})):r()}}))}H(e,t){const r=[];return new Te(((a,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const u=c.target.result;if(!u)return void a();const h=new n7(u),f=t(u.primaryKey,u.value,h);if(f instanceof Te){const g=f.catch((y=>(h.done(),Te.reject(y))));r.push(g)}h.isDone?a():h.G===null?u.continue():u.continue(h.G)}})).next((()=>Te.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Dd(n){return new Te(((e,t)=>{n.onsuccess=r=>{const a=r.target.result;e(a)},n.onerror=r=>{const a=av(r.target.error);t(a)}}))}let Pj=!1;function av(n){const e=Xu.M(ta());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new tt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Pj||(Pj=!0,setTimeout((()=>{throw r}),0)),r}}return n}const og="IndexBackfiller";class s7{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Ze(og,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();Ze(og,`Documents written: ${t}`)}catch(t){ud(t)?Ze(og,"Ignoring IndexedDB error during index backfill: ",t):await hh(t)}await this.re(6e4)}))}}class a7{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let a=t,o=!0;return Te.doWhile((()=>o===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return Ze(og,`Processing collection: ${c}`),this.oe(e,c,a).next((u=>{a-=u,r.add(c)}));o=!1})))).next((()=>t-a))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,o))).next((u=>(Ze(og,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>c.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((a,o)=>{const c=hS(o);sv(c,r)>0&&(r=c)})),new uo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Po{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Po.ce=-1;const Bd=-1;function Bx(n){return n==null}function Ag(n){return n===0&&1/n==-1/0}function i7(n){return typeof n=="number"&&Number.isInteger(n)&&!Ag(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const ix="";function Ja(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Lj(e)),e=o7(n.get(t),e);return Lj(e)}function o7(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const o=n.charAt(a);switch(o){case"\0":t+="";break;case ix:t+="";break;default:t+=o}}return t}function Lj(n){return n+ix+""}function ql(n){const e=n.length;if(kt(e>=2,64408,{path:n}),e===2)return kt(n.charAt(0)===ix&&n.charAt(1)==="",56145,{path:n}),tr.emptyPath();const t=e-2,r=[];let a="";for(let o=0;o<e;){const c=n.indexOf(ix,o);switch((c<0||c>t)&&bt(50515,{path:n}),n.charAt(c+1)){case"":const u=n.substring(o,c);let h;a.length===0?h=u:(a+=u,h=a,a=""),r.push(h);break;case"":a+=n.substring(o,c),a+="\0";break;case"":a+=n.substring(o,c+1);break;default:bt(61167,{path:n})}o=c+2}return new tr(r)}const Pd="remoteDocuments",Xg="owner",Qh="owner",Tg="mutationQueues",l7="userId",ll="mutations",Dj="batchId",Ud="userMutationsIndex",Mj=["userId","batchId"];function P0(n,e){return[n,Ja(e)]}function pS(n,e,t){return[n,Ja(e),t]}const c7={},Rf="documentMutations",ox="remoteDocumentsV14",u7=["prefixPath","collectionGroup","readTime","documentId"],L0="documentKeyIndex",d7=["prefixPath","collectionGroup","documentId"],xS="collectionGroupIndex",h7=["collectionGroup","readTime","prefixPath","documentId"],Cg="remoteDocumentGlobal",G1="remoteDocumentGlobalKey",kf="targets",yS="queryTargetsIndex",f7=["canonicalId","targetId"],Pf="targetDocuments",m7=["targetId","path"],iv="documentTargetsIndex",g7=["path","targetId"],lx="targetGlobalKey",zd="targetGlobal",Ig="collectionParents",p7=["collectionId","parent"],Lf="clientMetadata",x7="clientId",zx="bundles",y7="bundleId",qx="namedQueries",b7="name",ov="indexConfiguration",v7="indexId",$1="collectionGroupIndex",w7="collectionGroup",lg="indexState",N7=["indexId","uid"],bS="sequenceNumberIndex",j7=["uid","sequenceNumber"],cg="indexEntries",_7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],vS="documentKeyIndex",S7=["indexId","uid","orderedDocumentKey"],Hx="documentOverlays",E7=["userId","collectionPath","documentId"],W1="collectionPathOverlayIndex",A7=["userId","collectionPath","largestBatchId"],wS="collectionGroupOverlayIndex",T7=["userId","collectionGroup","largestBatchId"],lv="globals",C7="name",NS=[Tg,ll,Rf,Pd,kf,Xg,zd,Pf,Lf,Cg,Ig,zx,qx],I7=[...NS,Hx],jS=[Tg,ll,Rf,ox,kf,Xg,zd,Pf,Lf,Cg,Ig,zx,qx,Hx],_S=jS,cv=[..._S,ov,lg,cg],R7=cv,SS=[...cv,lv],k7=SS;class K1 extends mS{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function na(n,e){const t=un(n);return Xu.O(t.le,e)}function Oj(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function dd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ES(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Hr{constructor(e,t){this.comparator=e,this.root=t||Da.EMPTY}insert(e,t){return new Hr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Da.BLACK,null,null))}remove(e){return new Hr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Da.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new o0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new o0(this.root,e,this.comparator,!1)}getReverseIterator(){return new o0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new o0(this.root,e,this.comparator,!0)}}class o0{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&a&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Da{constructor(e,t,r,a,o){this.key=e,this.value=t,this.color=r??Da.RED,this.left=a??Da.EMPTY,this.right=o??Da.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,o){return new Da(e??this.key,t??this.value,r??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const o=r(e,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(e,t,r),null):o===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Da.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Da.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Da.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Da.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw bt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw bt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw bt(27949);return e+(this.isRed()?0:1)}}Da.EMPTY=null,Da.RED=!0,Da.BLACK=!1;Da.EMPTY=new class{constructor(){this.size=0}get key(){throw bt(57766)}get value(){throw bt(16141)}get color(){throw bt(16727)}get left(){throw bt(29726)}get right(){throw bt(36894)}copy(e,t,r,a,o){return this}insert(e,t,r){return new Da(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dr{constructor(e){this.comparator=e,this.data=new Hr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fj(this.data.getIterator())}getIteratorFrom(e){return new Fj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof dr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=r.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new dr(this.comparator);return t.data=e,t}}class Fj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Jh(n){return n.hasNext()?n.getNext():void 0}class Fi{constructor(e){this.fields=e,e.sort(Qr.comparator)}static empty(){return new Fi([])}unionWith(e){let t=new dr(Qr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Fi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return If(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class AS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new AS("Invalid base64 string: "+o):o}})(e);return new Vs(t)}static fromUint8Array(e){const t=(function(a){let o="";for(let c=0;c<a.length;++c)o+=String.fromCharCode(a[c]);return o})(e);return new Vs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return cn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vs.EMPTY_BYTE_STRING=new Vs("");const P7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wc(n){if(kt(!!n,39018),typeof n=="string"){let e=0;const t=P7.exec(n);if(kt(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qr(n.seconds),nanos:qr(n.nanos)}}function qr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Kc(n){return typeof n=="string"?Vs.fromBase64String(n):Vs.fromUint8Array(n)}const TS="server_timestamp",CS="__type__",IS="__previous_value__",RS="__local_write_time__";function uv(n){return(n?.mapValue?.fields||{})[CS]?.stringValue===TS}function Gx(n){const e=n.mapValue.fields[IS];return uv(e)?Gx(e):e}function Rg(n){const e=Wc(n.mapValue.fields[RS].timestampValue);return new vt(e.seconds,e.nanos)}class L7{constructor(e,t,r,a,o,c,u,h,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=g}}const cx="(default)";class th{constructor(e,t){this.projectId=e,this.database=t||cx}static empty(){return new th("","")}get isDefaultDatabase(){return this.database===cx}isEqual(e){return e instanceof th&&e.projectId===this.projectId&&e.database===this.database}}const dv="__type__",kS="__max__",Hu={mapValue:{fields:{__type__:{stringValue:kS}}}},hv="__vector__",Df="value",D0={nullValue:"NULL_VALUE"};function ed(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?uv(n)?4:PS(n)?9007199254740991:$x(n)?10:11:bt(28295,{value:n})}function ec(n,e){if(n===e)return!0;const t=ed(n);if(t!==ed(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Rg(n).isEqual(Rg(e));case 3:return(function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const c=Wc(a.timestampValue),u=Wc(o.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,o){return Kc(a.bytesValue).isEqual(Kc(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,o){return qr(a.geoPointValue.latitude)===qr(o.geoPointValue.latitude)&&qr(a.geoPointValue.longitude)===qr(o.geoPointValue.longitude)})(n,e);case 2:return(function(a,o){if("integerValue"in a&&"integerValue"in o)return qr(a.integerValue)===qr(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const c=qr(a.doubleValue),u=qr(o.doubleValue);return c===u?Ag(c)===Ag(u):isNaN(c)&&isNaN(u)}return!1})(n,e);case 9:return If(n.arrayValue.values||[],e.arrayValue.values||[],ec);case 10:case 11:return(function(a,o){const c=a.mapValue.fields||{},u=o.mapValue.fields||{};if(Oj(c)!==Oj(u))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(u[h]===void 0||!ec(c[h],u[h])))return!1;return!0})(n,e);default:return bt(52216,{left:n})}}function kg(n,e){return(n.values||[]).find((t=>ec(t,e)))!==void 0}function td(n,e){if(n===e)return 0;const t=ed(n),r=ed(e);if(t!==r)return cn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return cn(n.booleanValue,e.booleanValue);case 2:return(function(o,c){const u=qr(o.integerValue||o.doubleValue),h=qr(c.integerValue||c.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1})(n,e);case 3:return Vj(n.timestampValue,e.timestampValue);case 4:return Vj(Rg(n),Rg(e));case 5:return q1(n.stringValue,e.stringValue);case 6:return(function(o,c){const u=Kc(o),h=Kc(c);return u.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(o,c){const u=o.split("/"),h=c.split("/");for(let f=0;f<u.length&&f<h.length;f++){const g=cn(u[f],h[f]);if(g!==0)return g}return cn(u.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,c){const u=cn(qr(o.latitude),qr(c.latitude));return u!==0?u:cn(qr(o.longitude),qr(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Uj(n.arrayValue,e.arrayValue);case 10:return(function(o,c){const u=o.fields||{},h=c.fields||{},f=u[Df]?.arrayValue,g=h[Df]?.arrayValue,y=cn(f?.values?.length||0,g?.values?.length||0);return y!==0?y:Uj(f,g)})(n.mapValue,e.mapValue);case 11:return(function(o,c){if(o===Hu.mapValue&&c===Hu.mapValue)return 0;if(o===Hu.mapValue)return 1;if(c===Hu.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=c.fields||{},g=Object.keys(f);h.sort(),g.sort();for(let y=0;y<h.length&&y<g.length;++y){const w=q1(h[y],g[y]);if(w!==0)return w;const b=td(u[h[y]],f[g[y]]);if(b!==0)return b}return cn(h.length,g.length)})(n.mapValue,e.mapValue);default:throw bt(23264,{he:t})}}function Vj(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return cn(n,e);const t=Wc(n),r=Wc(e),a=cn(t.seconds,r.seconds);return a!==0?a:cn(t.nanos,r.nanos)}function Uj(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const o=td(t[a],r[a]);if(o)return o}return cn(t.length,r.length)}function Mf(n){return Y1(n)}function Y1(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Wc(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Kc(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ot.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",a=!0;for(const o of t.values||[])a?a=!1:r+=",",r+=Y1(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",o=!0;for(const c of r)o?o=!1:a+=",",a+=`${c}:${Y1(t.fields[c])}`;return a+"}"})(n.mapValue):bt(61005,{value:n})}function M0(n){switch(ed(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gx(n);return e?16+M0(e):16;case 5:return 2*n.stringValue.length;case 6:return Kc(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,o)=>a+M0(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let a=0;return dd(r.fields,((o,c)=>{a+=o.length+M0(c)})),a})(n.mapValue);default:throw bt(13486,{value:n})}}function Pg(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function X1(n){return!!n&&"integerValue"in n}function Lg(n){return!!n&&"arrayValue"in n}function Bj(n){return!!n&&"nullValue"in n}function zj(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function O0(n){return!!n&&"mapValue"in n}function $x(n){return(n?.mapValue?.fields||{})[dv]?.stringValue===hv}function ug(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return dd(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=ug(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ug(n.arrayValue.values[t]);return e}return{...n}}function PS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===kS}const LS={mapValue:{fields:{[dv]:{stringValue:hv},[Df]:{arrayValue:{}}}}};function D7(n){return"nullValue"in n?D0:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Pg(th.empty(),ot.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?$x(n)?LS:{mapValue:{}}:bt(35942,{value:n})}function M7(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Pg(th.empty(),ot.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?LS:"mapValue"in n?$x(n)?{mapValue:{}}:Hu:bt(61959,{value:n})}function qj(n,e){const t=td(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Hj(n,e){const t=td(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Qa{constructor(e){this.value=e}static empty(){return new Qa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!O0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ug(t)}setAll(e){let t=Qr.emptyPath(),r={},a=[];e.forEach(((c,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,r,a),r={},a=[],t=u.popLast()}c?r[u.lastSegment()]=ug(c):a.push(u.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,a)}delete(e){const t=this.field(e.popLast());O0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ec(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];O0(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){dd(t,((a,o)=>e[a]=o));for(const a of r)delete e[a]}clone(){return new Qa(ug(this.value))}}function DS(n){const e=[];return dd(n.fields,((t,r)=>{const a=new Qr([t]);if(O0(r)){const o=DS(r.mapValue).fields;if(o.length===0)e.push(a);else for(const c of o)e.push(a.child(c))}else e.push(a)})),new Fi(e)}class us{constructor(e,t,r,a,o,c,u){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=o,this.data=c,this.documentState=u}static newInvalidDocument(e){return new us(e,0,Ht.min(),Ht.min(),Ht.min(),Qa.empty(),0)}static newFoundDocument(e,t,r,a){return new us(e,1,t,Ht.min(),r,a,0)}static newNoDocument(e,t){return new us(e,2,t,Ht.min(),Ht.min(),Qa.empty(),0)}static newUnknownDocument(e,t){return new us(e,3,t,Ht.min(),Ht.min(),Qa.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ht.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof us&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new us(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Of{constructor(e,t){this.position=e,this.inclusive=t}}function Gj(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const o=e[a],c=n.position[a];if(o.field.isKeyField()?r=ot.comparator(ot.fromName(c.referenceValue),t.key):r=td(c,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function $j(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ec(n.position[t],e.position[t]))return!1;return!0}class Dg{constructor(e,t="asc"){this.field=e,this.dir=t}}function O7(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class MS{}class Dn extends MS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new F7(e,t,r):t==="array-contains"?new B7(e,r):t==="in"?new zS(e,r):t==="not-in"?new z7(e,r):t==="array-contains-any"?new q7(e,r):new Dn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new V7(e,r):new U7(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(td(t,this.value)):t!==null&&ed(this.value)===ed(t)&&this.matchesComparison(td(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return bt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ur extends MS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ur(e,t)}matches(e){return Ff(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ff(n){return n.op==="and"}function Q1(n){return n.op==="or"}function fv(n){return OS(n)&&Ff(n)}function OS(n){for(const e of n.filters)if(e instanceof ur)return!1;return!0}function J1(n){if(n instanceof Dn)return n.field.canonicalString()+n.op.toString()+Mf(n.value);if(fv(n))return n.filters.map((e=>J1(e))).join(",");{const e=n.filters.map((t=>J1(t))).join(",");return`${n.op}(${e})`}}function FS(n,e){return n instanceof Dn?(function(r,a){return a instanceof Dn&&r.op===a.op&&r.field.isEqual(a.field)&&ec(r.value,a.value)})(n,e):n instanceof ur?(function(r,a){return a instanceof ur&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((o,c,u)=>o&&FS(c,a.filters[u])),!0):!1})(n,e):void bt(19439)}function VS(n,e){const t=n.filters.concat(e);return ur.create(t,n.op)}function US(n){return n instanceof Dn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Mf(t.value)}`})(n):n instanceof ur?(function(t){return t.op.toString()+" {"+t.getFilters().map(US).join(" ,")+"}"})(n):"Filter"}class F7 extends Dn{constructor(e,t,r){super(e,t,r),this.key=ot.fromName(r.referenceValue)}matches(e){const t=ot.comparator(e.key,this.key);return this.matchesComparison(t)}}class V7 extends Dn{constructor(e,t){super(e,"in",t),this.keys=BS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class U7 extends Dn{constructor(e,t){super(e,"not-in",t),this.keys=BS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function BS(n,e){return(e.arrayValue?.values||[]).map((t=>ot.fromName(t.referenceValue)))}class B7 extends Dn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Lg(t)&&kg(t.arrayValue,this.value)}}class zS extends Dn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&kg(this.value.arrayValue,t)}}class z7 extends Dn{constructor(e,t){super(e,"not-in",t)}matches(e){if(kg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!kg(this.value.arrayValue,t)}}class q7 extends Dn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Lg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>kg(this.value.arrayValue,r)))}}class H7{constructor(e,t=null,r=[],a=[],o=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=o,this.startAt=c,this.endAt=u,this.Te=null}}function Z1(n,e=null,t=[],r=[],a=null,o=null,c=null){return new H7(n,e,t,r,a,o,c)}function nh(n){const e=un(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>J1(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Bx(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Mf(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Mf(r))).join(",")),e.Te=t}return e.Te}function Qg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!O7(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!FS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$j(n.startAt,e.startAt)&&$j(n.endAt,e.endAt)}function ux(n){return ot.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function dx(n,e){return n.filters.filter((t=>t instanceof Dn&&t.field.isEqual(e)))}function Wj(n,e,t){let r=D0,a=!0;for(const o of dx(n,e)){let c=D0,u=!0;switch(o.op){case"<":case"<=":c=D7(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,u=!1;break;case"!=":case"not-in":c=D0}qj({value:r,inclusive:a},{value:c,inclusive:u})<0&&(r=c,a=u)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];qj({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function Kj(n,e,t){let r=Hu,a=!0;for(const o of dx(n,e)){let c=Hu,u=!0;switch(o.op){case">=":case">":c=M7(o.value),u=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,u=!1;break;case"!=":case"not-in":c=Hu}Hj({value:r,inclusive:a},{value:c,inclusive:u})>0&&(r=c,a=u)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];Hj({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}class Jf{constructor(e,t=null,r=[],a=[],o=null,c="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function G7(n,e,t,r,a,o,c,u){return new Jf(n,e,t,r,a,o,c,u)}function Wx(n){return new Jf(n)}function Yj(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function qS(n){return n.collectionGroup!==null}function dg(n){const e=un(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new dr(Qr.comparator);return c.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Dg(o,r))})),t.has(Qr.keyField().canonicalString())||e.Ie.push(new Dg(Qr.keyField(),r))}return e.Ie}function Lo(n){const e=un(n);return e.Ee||(e.Ee=$7(e,dg(n))),e.Ee}function $7(n,e){if(n.limitType==="F")return Z1(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const o=a.dir==="desc"?"asc":"desc";return new Dg(a.field,o)}));const t=n.endAt?new Of(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Of(n.startAt.position,n.startAt.inclusive):null;return Z1(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function e2(n,e){const t=n.filters.concat([e]);return new Jf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function t2(n,e,t){return new Jf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kx(n,e){return Qg(Lo(n),Lo(e))&&n.limitType===e.limitType}function HS(n){return`${nh(Lo(n))}|lt:${n.limitType}`}function uf(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>US(a))).join(", ")}]`),Bx(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>Mf(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>Mf(a))).join(",")),`Target(${r})`})(Lo(n))}; limitType=${n.limitType})`}function Jg(n,e){return e.isFoundDocument()&&(function(r,a){const o=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ot.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,a){for(const o of dg(r))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,a){for(const o of r.filters)if(!o.matches(a))return!1;return!0})(n,e)&&(function(r,a){return!(r.startAt&&!(function(c,u,h){const f=Gj(c,u,h);return c.inclusive?f<=0:f<0})(r.startAt,dg(r),a)||r.endAt&&!(function(c,u,h){const f=Gj(c,u,h);return c.inclusive?f>=0:f>0})(r.endAt,dg(r),a))})(n,e)}function W7(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GS(n){return(e,t)=>{let r=!1;for(const a of dg(n)){const o=K7(a,e,t);if(o!==0)return o;r=r||a.field.isKeyField()}return 0}}function K7(n,e,t){const r=n.field.isKeyField()?ot.comparator(e.key,t.key):(function(o,c,u){const h=c.data.field(o),f=u.data.field(o);return h!==null&&f!==null?td(h,f):bt(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return bt(19790,{direction:n.dir})}}class Zc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,o]of r)if(this.equalsFn(a,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return void(a[o]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){dd(this.inner,((t,r)=>{for(const[a,o]of r)e(a,o)}))}isEmpty(){return ES(this.inner)}size(){return this.innerSize}}const Y7=new Hr(ot.comparator);function oo(){return Y7}const $S=new Hr(ot.comparator);function eg(...n){let e=$S;for(const t of n)e=e.insert(t.key,t);return e}function WS(n){let e=$S;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Hl(){return hg()}function KS(){return hg()}function hg(){return new Zc((n=>n.toString()),((n,e)=>n.isEqual(e)))}const X7=new Hr(ot.comparator),Q7=new dr(ot.comparator);function Sn(...n){let e=Q7;for(const t of n)e=e.add(t);return e}const J7=new dr(cn);function Z7(){return J7}function mv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ag(e)?"-0":e}}function YS(n){return{integerValue:""+n}}function eD(n,e){return i7(e)?YS(e):mv(n,e)}class Yx{constructor(){this._=void 0}}function tD(n,e,t){return n instanceof Vf?(function(a,o){const c={fields:{[CS]:{stringValue:TS},[RS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&uv(o)&&(o=Gx(o)),o&&(c.fields[IS]=o),{mapValue:c}})(t,e):n instanceof Uf?QS(n,e):n instanceof Bf?JS(n,e):(function(a,o){const c=XS(a,o),u=Xj(c)+Xj(a.Ae);return X1(c)&&X1(a.Ae)?YS(u):mv(a.serializer,u)})(n,e)}function nD(n,e,t){return n instanceof Uf?QS(n,e):n instanceof Bf?JS(n,e):t}function XS(n,e){return n instanceof Mg?(function(r){return X1(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Vf extends Yx{}class Uf extends Yx{constructor(e){super(),this.elements=e}}function QS(n,e){const t=ZS(e);for(const r of n.elements)t.some((a=>ec(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Bf extends Yx{constructor(e){super(),this.elements=e}}function JS(n,e){let t=ZS(e);for(const r of n.elements)t=t.filter((a=>!ec(a,r)));return{arrayValue:{values:t}}}class Mg extends Yx{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Xj(n){return qr(n.integerValue||n.doubleValue)}function ZS(n){return Lg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class eE{constructor(e,t){this.field=e,this.transform=t}}function rD(n,e){return n.field.isEqual(e.field)&&(function(r,a){return r instanceof Uf&&a instanceof Uf||r instanceof Bf&&a instanceof Bf?If(r.elements,a.elements,ec):r instanceof Mg&&a instanceof Mg?ec(r.Ae,a.Ae):r instanceof Vf&&a instanceof Vf})(n.transform,e.transform)}class sD{constructor(e,t){this.version=e,this.transformResults=t}}class ea{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ea}static exists(e){return new ea(void 0,e)}static updateTime(e){return new ea(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function F0(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Xx{}function tE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Zg(n.key,ea.none()):new Zf(n.key,n.data,ea.none());{const t=n.data,r=Qa.empty();let a=new dr(Qr.comparator);for(let o of e.fields)if(!a.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?r.delete(o):r.set(o,c),a=a.add(o)}return new eu(n.key,r,new Fi(a.toArray()),ea.none())}}function aD(n,e,t){n instanceof Zf?(function(a,o,c){const u=a.value.clone(),h=Jj(a.fieldTransforms,o,c.transformResults);u.setAll(h),o.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(n,e,t):n instanceof eu?(function(a,o,c){if(!F0(a.precondition,o))return void o.convertToUnknownDocument(c.version);const u=Jj(a.fieldTransforms,o,c.transformResults),h=o.data;h.setAll(nE(a)),h.setAll(u),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):(function(a,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function fg(n,e,t,r){return n instanceof Zf?(function(o,c,u,h){if(!F0(o.precondition,c))return u;const f=o.value.clone(),g=Zj(o.fieldTransforms,h,c);return f.setAll(g),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof eu?(function(o,c,u,h){if(!F0(o.precondition,c))return u;const f=Zj(o.fieldTransforms,h,c),g=c.data;return g.setAll(nE(o)),g.setAll(f),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(o,c,u){return F0(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(n,e,t)}function iD(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),o=XS(r.transform,a||null);o!=null&&(t===null&&(t=Qa.empty()),t.set(r.field,o))}return t||null}function Qj(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&If(r,a,((o,c)=>rD(o,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Zf extends Xx{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class eu extends Xx{constructor(e,t,r,a,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function nE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Jj(n,e,t){const r=new Map;kt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const o=n[a],c=o.transform,u=e.data.field(o.field);r.set(o.field,nD(c,u,t[a]))}return r}function Zj(n,e,t){const r=new Map;for(const a of n){const o=a.transform,c=t.data.field(a.field);r.set(a.field,tD(o,c,e))}return r}class Zg extends Xx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rE extends Xx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class gv{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(e.key)&&aD(o,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=fg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=fg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=KS();return this.mutations.forEach((a=>{const o=e.get(a.key),c=o.overlayedDocument;let u=this.applyToLocalView(c,o.mutatedFields);u=t.has(a.key)?null:u;const h=tE(c,u);h!==null&&r.set(a.key,h),c.isValidDocument()||c.convertToNoDocument(Ht.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Sn())}isEqual(e){return this.batchId===e.batchId&&If(this.mutations,e.mutations,((t,r)=>Qj(t,r)))&&If(this.baseMutations,e.baseMutations,((t,r)=>Qj(t,r)))}}class pv{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){kt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return X7})();const o=e.mutations;for(let c=0;c<o.length;c++)a=a.insert(o[c].key,r[c].version);return new pv(e,t,r,a)}}class xv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class oD{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ms,Bn;function lD(n){switch(n){case Ve.OK:return bt(64938);case Ve.CANCELLED:case Ve.UNKNOWN:case Ve.DEADLINE_EXCEEDED:case Ve.RESOURCE_EXHAUSTED:case Ve.INTERNAL:case Ve.UNAVAILABLE:case Ve.UNAUTHENTICATED:return!1;case Ve.INVALID_ARGUMENT:case Ve.NOT_FOUND:case Ve.ALREADY_EXISTS:case Ve.PERMISSION_DENIED:case Ve.FAILED_PRECONDITION:case Ve.ABORTED:case Ve.OUT_OF_RANGE:case Ve.UNIMPLEMENTED:case Ve.DATA_LOSS:return!0;default:return bt(15467,{code:n})}}function sE(n){if(n===void 0)return hi("GRPC error has no .code"),Ve.UNKNOWN;switch(n){case Ms.OK:return Ve.OK;case Ms.CANCELLED:return Ve.CANCELLED;case Ms.UNKNOWN:return Ve.UNKNOWN;case Ms.DEADLINE_EXCEEDED:return Ve.DEADLINE_EXCEEDED;case Ms.RESOURCE_EXHAUSTED:return Ve.RESOURCE_EXHAUSTED;case Ms.INTERNAL:return Ve.INTERNAL;case Ms.UNAVAILABLE:return Ve.UNAVAILABLE;case Ms.UNAUTHENTICATED:return Ve.UNAUTHENTICATED;case Ms.INVALID_ARGUMENT:return Ve.INVALID_ARGUMENT;case Ms.NOT_FOUND:return Ve.NOT_FOUND;case Ms.ALREADY_EXISTS:return Ve.ALREADY_EXISTS;case Ms.PERMISSION_DENIED:return Ve.PERMISSION_DENIED;case Ms.FAILED_PRECONDITION:return Ve.FAILED_PRECONDITION;case Ms.ABORTED:return Ve.ABORTED;case Ms.OUT_OF_RANGE:return Ve.OUT_OF_RANGE;case Ms.UNIMPLEMENTED:return Ve.UNIMPLEMENTED;case Ms.DATA_LOSS:return Ve.DATA_LOSS;default:return bt(39323,{code:n})}}(Bn=Ms||(Ms={}))[Bn.OK=0]="OK",Bn[Bn.CANCELLED=1]="CANCELLED",Bn[Bn.UNKNOWN=2]="UNKNOWN",Bn[Bn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bn[Bn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bn[Bn.NOT_FOUND=5]="NOT_FOUND",Bn[Bn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bn[Bn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bn[Bn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bn[Bn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bn[Bn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bn[Bn.ABORTED=10]="ABORTED",Bn[Bn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bn[Bn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bn[Bn.INTERNAL=13]="INTERNAL",Bn[Bn.UNAVAILABLE=14]="UNAVAILABLE",Bn[Bn.DATA_LOSS=15]="DATA_LOSS";function cD(){return new TextEncoder}const uD=new Yu([4294967295,4294967295],0);function e_(n){const e=cD().encode(n),t=new tS;return t.update(e),new Uint8Array(t.digest())}function t_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Yu([t,r],0),new Yu([a,o],0)]}class yv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new tg(`Invalid padding: ${t}`);if(r<0)throw new tg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new tg(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new tg(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Yu.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(Yu.fromNumber(r)));return a.compare(uD)===1&&(a=new Yu([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=e_(e),[r,a]=t_(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,a,o);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new yv(o,a,t);return r.forEach((u=>c.insert(u))),c}insert(e){if(this.ge===0)return;const t=e_(e),[r,a]=t_(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,a,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class tg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qx{constructor(e,t,r,a,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,ep.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Qx(Ht.min(),a,new Hr(cn),oo(),Sn())}}class ep{constructor(e,t,r,a,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ep(r,t,Sn(),Sn(),Sn())}}class V0{constructor(e,t,r,a){this.be=e,this.removedTargetIds=t,this.key=r,this.De=a}}class aE{constructor(e,t){this.targetId=e,this.Ce=t}}class iE{constructor(e,t,r=Vs.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class n_{constructor(){this.ve=0,this.Fe=r_(),this.Me=Vs.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Sn(),t=Sn(),r=Sn();return this.Fe.forEach(((a,o)=>{switch(o){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:bt(38017,{changeType:o})}})),new ep(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=r_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,kt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class dD{constructor(e){this.Ge=e,this.ze=new Map,this.je=oo(),this.Je=l0(),this.He=l0(),this.Ye=new Hr(cn)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:bt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const o=a.target;if(ux(o))if(r===0){const c=new ot(o.path);this.et(t,c,us.newNoDocument(c,Ht.min()))}else kt(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const u=this.ut(e),h=u?this.ct(u,e,c):1;if(h!==0){this.it(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:o=0}=t;let c,u;try{c=Kc(r).toUint8Array()}catch(h){if(h instanceof AS)return eh("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new yv(c,a,o)}catch(h){return eh(h instanceof tg?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((o=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(t,o,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const u=this.ot(c);if(u){if(o.current&&ux(u.target)){const h=new ot(u.target.path);this.It(h).has(c)||this.Et(c,h)||this.et(c,h,us.newNoDocument(h,e))}o.Be&&(t.set(c,o.ke()),o.qe())}}));let r=Sn();this.He.forEach(((o,c)=>{let u=!0;c.forEachWhile((h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const a=new Qx(e,t,this.Ye,this.je,r);return this.je=oo(),this.Je=l0(),this.He=l0(),this.Ye=new Hr(cn),a}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new n_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new dr(cn),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new dr(cn),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ze("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new n_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function l0(){return new Hr(ot.comparator)}function r_(){return new Hr(ot.comparator)}const hD={asc:"ASCENDING",desc:"DESCENDING"},fD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mD={and:"AND",or:"OR"};class gD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function n2(n,e){return n.useProto3Json||Bx(e)?e:{value:e}}function zf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function pD(n,e){return zf(n,e.toTimestamp())}function fi(n){return kt(!!n,49232),Ht.fromTimestamp((function(t){const r=Wc(t);return new vt(r.seconds,r.nanos)})(n))}function bv(n,e){return r2(n,e).canonicalString()}function r2(n,e){const t=(function(a){return new tr(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function lE(n){const e=tr.fromString(n);return kt(xE(e),10190,{key:e.toString()}),e}function hx(n,e){return bv(n.databaseId,e.path)}function qd(n,e){const t=lE(e);if(t.get(1)!==n.databaseId.projectId)throw new tt(Ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new tt(Ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ot(dE(t))}function cE(n,e){return bv(n.databaseId,e)}function uE(n){const e=lE(n);return e.length===4?tr.emptyPath():dE(e)}function s2(n){return new tr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dE(n){return kt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function s_(n,e,t){return{name:hx(n,e),fields:t.value.mapValue.fields}}function xD(n,e,t){const r=qd(n,e.name),a=fi(e.updateTime),o=e.createTime?fi(e.createTime):Ht.min(),c=new Qa({mapValue:{fields:e.fields}}),u=us.newFoundDocument(r,a,o,c);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function yD(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:bt(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(kt(g===void 0||typeof g=="string",58123),Vs.fromBase64String(g||"")):(kt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Vs.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&(function(f){const g=f.code===void 0?Ve.UNKNOWN:sE(f.code);return new tt(g,f.message||"")})(c);t=new iE(r,a,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=qd(n,r.document.name),o=fi(r.document.updateTime),c=r.document.createTime?fi(r.document.createTime):Ht.min(),u=new Qa({mapValue:{fields:r.document.fields}}),h=us.newFoundDocument(a,o,c,u),f=r.targetIds||[],g=r.removedTargetIds||[];t=new V0(f,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=qd(n,r.document),o=r.readTime?fi(r.readTime):Ht.min(),c=us.newNoDocument(a,o),u=r.removedTargetIds||[];t=new V0([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=qd(n,r.document),o=r.removedTargetIds||[];t=new V0([],o,a,null)}else{if(!("filter"in e))return bt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:o}=r,c=new oD(a,o),u=r.targetId;t=new aE(u,c)}}return t}function fx(n,e){let t;if(e instanceof Zf)t={update:s_(n,e.key,e.value)};else if(e instanceof Zg)t={delete:hx(n,e.key)};else if(e instanceof eu)t={update:s_(n,e.key,e.data),updateMask:_D(e.fieldMask)};else{if(!(e instanceof rE))return bt(16599,{Vt:e.type});t={verify:hx(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,c){const u=c.transform;if(u instanceof Vf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Uf)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Bf)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Mg)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw bt(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,o){return o.updateTime!==void 0?{updateTime:pD(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:bt(27497)})(n,e.precondition)),t}function a2(n,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?ea.updateTime(fi(o.updateTime)):o.exists!==void 0?ea.exists(o.exists):ea.none()})(e.currentDocument):ea.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(c,u){let h=null;if("setToServerValue"in u)kt(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),h=new Vf;else if("appendMissingElements"in u){const g=u.appendMissingElements.values||[];h=new Uf(g)}else if("removeAllFromArray"in u){const g=u.removeAllFromArray.values||[];h=new Bf(g)}else"increment"in u?h=new Mg(c,u.increment):bt(16584,{proto:u});const f=Qr.fromServerFormat(u.fieldPath);return new eE(f,h)})(n,a))):[];if(e.update){e.update.name;const a=qd(n,e.update.name),o=new Qa({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(h){const f=h.fieldPaths||[];return new Fi(f.map((g=>Qr.fromServerFormat(g))))})(e.updateMask);return new eu(a,o,c,t,r)}return new Zf(a,o,t,r)}if(e.delete){const a=qd(n,e.delete);return new Zg(a,t)}if(e.verify){const a=qd(n,e.verify);return new rE(a,t)}return bt(1463,{proto:e})}function bD(n,e){return n&&n.length>0?(kt(e!==void 0,14353),n.map((t=>(function(a,o){let c=a.updateTime?fi(a.updateTime):fi(o);return c.isEqual(Ht.min())&&(c=fi(o)),new sD(c,a.transformResults||[])})(t,e)))):[]}function hE(n,e){return{documents:[cE(n,e.path)]}}function fE(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=cE(n,a);const o=(function(f){if(f.length!==0)return pE(ur.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(f){if(f.length!==0)return f.map((g=>(function(w){return{field:df(w.field),direction:wD(w.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=n2(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:a}}function mE(n){let e=uE(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){kt(r===1,65062);const g=t.from[0];g.allDescendants?a=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(y){const w=gE(y);return w instanceof ur&&fv(w)?w.getFilters():[w]})(t.where));let c=[];t.orderBy&&(c=(function(y){return y.map((w=>(function(T){return new Dg(hf(T.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(w)))})(t.orderBy));let u=null;t.limit&&(u=(function(y){let w;return w=typeof y=="object"?y.value:y,Bx(w)?null:w})(t.limit));let h=null;t.startAt&&(h=(function(y){const w=!!y.before,b=y.values||[];return new Of(b,w)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){const w=!y.before,b=y.values||[];return new Of(b,w)})(t.endAt)),G7(e,a,c,o,u,"F",h,f)}function vD(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return bt(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function gE(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=hf(t.unaryFilter.field);return Dn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=hf(t.unaryFilter.field);return Dn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=hf(t.unaryFilter.field);return Dn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=hf(t.unaryFilter.field);return Dn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return bt(61313);default:return bt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Dn.create(hf(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return bt(58110);default:return bt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ur.create(t.compositeFilter.filters.map((r=>gE(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return bt(1026)}})(t.compositeFilter.op))})(n):bt(30097,{filter:n})}function wD(n){return hD[n]}function ND(n){return fD[n]}function jD(n){return mD[n]}function df(n){return{fieldPath:n.canonicalString()}}function hf(n){return Qr.fromServerFormat(n.fieldPath)}function pE(n){return n instanceof Dn?(function(t){if(t.op==="=="){if(zj(t.value))return{unaryFilter:{field:df(t.field),op:"IS_NAN"}};if(Bj(t.value))return{unaryFilter:{field:df(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(zj(t.value))return{unaryFilter:{field:df(t.field),op:"IS_NOT_NAN"}};if(Bj(t.value))return{unaryFilter:{field:df(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:df(t.field),op:ND(t.op),value:t.value}}})(n):n instanceof ur?(function(t){const r=t.getFilters().map((a=>pE(a)));return r.length===1?r[0]:{compositeFilter:{op:jD(t.op),filters:r}}})(n):bt(54877,{filter:n})}function _D(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function xE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Bc{constructor(e,t,r,a,o=Ht.min(),c=Ht.min(),u=Vs.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Bc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Bc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class yE{constructor(e){this.yt=e}}function SD(n,e){let t;if(e.document)t=xD(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ot.fromSegments(e.noDocument.path),a=sh(e.noDocument.readTime);t=us.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return bt(56709);{const r=ot.fromSegments(e.unknownDocument.path),a=sh(e.unknownDocument.version);t=us.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const o=new vt(a[0],a[1]);return Ht.fromTimestamp(o)})(e.readTime)),t}function a_(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:mx(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,c){return{name:hx(o,c.key),fields:c.data.value.mapValue.fields,updateTime:zf(o,c.version.toTimestamp()),createTime:zf(o,c.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:rh(e.version)};else{if(!e.isUnknownDocument())return bt(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:rh(e.version)}}return r}function mx(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function rh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function sh(n){const e=new vt(n.seconds,n.nanoseconds);return Ht.fromTimestamp(e)}function Md(n,e){const t=(e.baseMutations||[]).map((o=>a2(n.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const u=e.mutations[o+1];c.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map((o=>a2(n.yt,o))),a=vt.fromMillis(e.localWriteTimeMs);return new gv(e.batchId,a,t,r)}function ng(n){const e=sh(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?sh(n.lastLimboFreeSnapshotVersion):Ht.min();let r;return r=(function(o){return o.documents!==void 0})(n.query)?(function(o){const c=o.documents.length;return kt(c===1,1966,{count:c}),Lo(Wx(uE(o.documents[0])))})(n.query):(function(o){return Lo(mE(o))})(n.query),new Bc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Vs.fromBase64String(n.resumeToken))}function bE(n,e){const t=rh(e.snapshotVersion),r=rh(e.lastLimboFreeSnapshotVersion);let a;a=ux(e.target)?hE(n.yt,e.target):fE(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:nh(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function vE(n){const e=mE({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?t2(e,e.limit,"L"):e}function Kb(n,e){return new xv(e.largestBatchId,a2(n.yt,e.overlayMutation))}function i_(n,e){const t=e.path.lastSegment();return[n,Ja(e.path.popLast()),t]}function o_(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:rh(r.readTime),documentKey:Ja(r.documentKey.path),largestBatchId:r.largestBatchId}}class ED{getBundleMetadata(e,t){return l_(e).get(t).next((r=>{if(r)return(function(o){return{id:o.bundleId,createTime:sh(o.createTime),version:o.version}})(r)}))}saveBundleMetadata(e,t){return l_(e).put((function(a){return{bundleId:a.id,createTime:rh(fi(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return c_(e).get(t).next((r=>{if(r)return(function(o){return{name:o.name,query:vE(o.bundledQuery),readTime:sh(o.readTime)}})(r)}))}saveNamedQuery(e,t){return c_(e).put((function(a){return{name:a.name,readTime:rh(fi(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function l_(n){return na(n,zx)}function c_(n){return na(n,qx)}class Jx{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Jx(e,r)}getOverlay(e,t){return qm(e).get(i_(this.userId,t)).next((r=>r?Kb(this.serializer,r):null))}getOverlays(e,t){const r=Hl();return Te.forEach(t,(a=>this.getOverlay(e,a).next((o=>{o!==null&&r.set(a,o)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((o,c)=>{const u=new xv(t,c);a.push(this.St(e,u))})),Te.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((c=>a.add(Ja(c.getCollectionPath()))));const o=[];return a.forEach((c=>{const u=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);o.push(qm(e).Z(W1,u))})),Te.waitFor(o)}getOverlaysForCollection(e,t,r){const a=Hl(),o=Ja(t),c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return qm(e).J(W1,c).next((u=>{for(const h of u){const f=Kb(this.serializer,h);a.set(f.getKey(),f)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const o=Hl();let c;const u=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qm(e).ee({index:wS,range:u},((h,f,g)=>{const y=Kb(this.serializer,f);o.size()<a||y.largestBatchId===c?(o.set(y.getKey(),y),c=y.largestBatchId):g.done()})).next((()=>o))}St(e,t){return qm(e).put((function(a,o,c){const[u,h,f]=i_(o,c.mutation.key);return{userId:o,collectionPath:h,documentId:f,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:fx(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function qm(n){return na(n,Hx)}class AD{bt(e){return na(e,lv)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?Vs.fromUint8Array(r):Vs.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Od{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(qr(e.integerValue));else if("doubleValue"in e){const r=qr(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Ag(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Wc(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Kc(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?PS(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):$x(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):bt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const a of Object.keys(r))this.Ot(a,t),this.Ct(r[a],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const a=Df,o=r[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(qr(o)),this.Ot(a,t),this.Ct(r[a],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const a of r)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),ot.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Od.Kt=new Od;const Zh=255;function TD(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function u_(n){const e=64-(function(r){let a=0;for(let o=0;o<8;++o){const c=TD(255&r[o]);if(a+=c,c!==8)break}return a})(n);return Math.ceil(e/8)}class CD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Ht()}Xt(e){const t=this.en(e),r=u_(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),r=u_(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(Zh),this.sn(255)}_n(){this.an(Zh),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Zh?(this.sn(Zh),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Zh?(this.an(Zh),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class ID{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class RD{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Hm{constructor(){this.cn=new CD,this.ln=new ID(this.cn),this.hn=new RD(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class Fd{constructor(e,t,r,a){this.Tn=e,this.In=t,this.En=r,this.dn=a}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new Fd(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:U0(this.En),directionalValue:U0(this.dn),orderedDocumentKey:U0(t),documentKey:r.path.toArray()}}Vn(e,t,r){const a=this.Rn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function ku(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=d_(n.En,e.En),t!==0?t:(t=d_(n.dn,e.dn),t!==0?t:ot.comparator(n.In,e.In)))}function d_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function U0(n){return u3()?(function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r})(n):n}function h_(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(n)}class f_{constructor(e){this.mn=new dr(((t,r)=>Qr.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(kt(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=H1(e);if(t!==void 0&&!this.wn(t))return!1;const r=kd(e);let a=new Set,o=0,c=0;for(;o<r.length&&this.wn(r[o]);++o)a=a.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!a.has(u.field.canonicalString())){const h=r[o];if(!this.Sn(u,h)||!this.bn(this.fn[c++],h))return!1}++o}for(;o<r.length;++o){const u=r[o];if(c>=this.fn.length||!this.bn(this.fn[c++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new dr(Qr.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new k0(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new k0(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new k0(r.field,r.dir==="asc"?0:1)));return new ax(ax.UNKNOWN_ID,this.collectionId,t,Eg.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function wE(n){if(kt(n instanceof Dn||n instanceof ur,20012),n instanceof Dn){if(n instanceof zS){const t=n.value.arrayValue?.values?.map((r=>Dn.create(n.field,"==",r)))||[];return ur.create(t,"or")}return n}const e=n.filters.map((t=>wE(t)));return ur.create(e,n.op)}function kD(n){if(n.getFilters().length===0)return[];const e=l2(wE(n));return kt(NE(e),7391),i2(e)||o2(e)?[e]:e.getFilters()}function i2(n){return n instanceof Dn}function o2(n){return n instanceof ur&&fv(n)}function NE(n){return i2(n)||o2(n)||(function(t){if(t instanceof ur&&Q1(t)){for(const r of t.getFilters())if(!i2(r)&&!o2(r))return!1;return!0}return!1})(n)}function l2(n){if(kt(n instanceof Dn||n instanceof ur,34018),n instanceof Dn)return n;if(n.filters.length===1)return l2(n.filters[0]);const e=n.filters.map((r=>l2(r)));let t=ur.create(e,n.op);return t=gx(t),NE(t)?t:(kt(t instanceof ur,64498),kt(Ff(t),40251),kt(t.filters.length>1,57927),t.filters.reduce(((r,a)=>vv(r,a))))}function vv(n,e){let t;return kt(n instanceof Dn||n instanceof ur,38388),kt(e instanceof Dn||e instanceof ur,25473),t=n instanceof Dn?e instanceof Dn?(function(a,o){return ur.create([a,o],"and")})(n,e):m_(n,e):e instanceof Dn?m_(e,n):(function(a,o){if(kt(a.filters.length>0&&o.filters.length>0,48005),Ff(a)&&Ff(o))return VS(a,o.getFilters());const c=Q1(a)?a:o,u=Q1(a)?o:a,h=c.filters.map((f=>vv(f,u)));return ur.create(h,"or")})(n,e),gx(t)}function m_(n,e){if(Ff(e))return VS(e,n.getFilters());{const t=e.filters.map((r=>vv(n,r)));return ur.create(t,"or")}}function gx(n){if(kt(n instanceof Dn||n instanceof ur,11850),n instanceof Dn)return n;const e=n.getFilters();if(e.length===1)return gx(e[0]);if(OS(n))return n;const t=e.map((a=>gx(a))),r=[];return t.forEach((a=>{a instanceof Dn?r.push(a):a instanceof ur&&(a.op===n.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:ur.create(r,n.op)}class PD{constructor(){this.Cn=new wv}addToCollectionParentIndex(e,t){return this.Cn.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Te.resolve()}deleteFieldIndex(e,t){return Te.resolve()}deleteAllFieldIndexes(e){return Te.resolve()}createTargetIndexes(e,t){return Te.resolve()}getDocumentsMatchingTarget(e,t){return Te.resolve(null)}getIndexType(e,t){return Te.resolve(0)}getFieldIndexes(e,t){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,t){return Te.resolve(uo.min())}getMinOffsetFromCollectionGroup(e,t){return Te.resolve(uo.min())}updateCollectionGroup(e,t,r){return Te.resolve()}updateIndexEntries(e,t){return Te.resolve()}}class wv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new dr(tr.comparator),o=!a.has(r);return this.index[t]=a.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new dr(tr.comparator)).toArray()}}const g_="IndexedDbIndexManager",c0=new Uint8Array(0);class LD{constructor(e,t){this.databaseId=t,this.vn=new wv,this.Fn=new Zc((r=>nh(r)),((r,a)=>Qg(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:r,parent:Ja(a)};return p_(e).put(o)}return Te.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[cS(t),""],!1,!0);return p_(e).J(a).next((o=>{for(const c of o){if(c.collectionId!==t)break;r.push(ql(c.parent))}return r}))}addFieldIndex(e,t){const r=Gm(e),a=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((h=>[h.fieldPath.canonicalString(),h.kind]))}})(t);delete a.indexId;const o=r.add(a);if(t.indexState){const c=tf(e);return o.next((u=>{c.put(o_(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const r=Gm(e),a=tf(e),o=ef(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Gm(e),r=ef(e),a=tf(e);return t.Z().next((()=>r.Z())).next((()=>a.Z()))}createTargetIndexes(e,t){return Te.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const o=new f_(r).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const r=ef(e);let a=!0;const o=new Map;return Te.forEach(this.Mn(t),(c=>this.xn(e,c).next((u=>{a&&(a=!!u),o.set(c,u)})))).next((()=>{if(a){let c=Sn();const u=[];return Te.forEach(o,((h,f)=>{Ze(g_,`Using index ${(function(D){return`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map((O=>`${O.fieldPath}:${O.kind}`)).join(",")}`})(h)} to execute ${nh(t)}`);const g=(function(D,O){const te=H1(O);if(te===void 0)return null;for(const ae of dx(D,te.fieldPath))switch(ae.op){case"array-contains-any":return ae.value.arrayValue.values||[];case"array-contains":return[ae.value]}return null})(f,h),y=(function(D,O){const te=new Map;for(const ae of kd(O))for(const H of dx(D,ae.fieldPath))switch(H.op){case"==":case"in":te.set(ae.fieldPath.canonicalString(),H.value);break;case"not-in":case"!=":return te.set(ae.fieldPath.canonicalString(),H.value),Array.from(te.values())}return null})(f,h),w=(function(D,O){const te=[];let ae=!0;for(const H of kd(O)){const V=H.kind===0?Wj(D,H.fieldPath,D.startAt):Kj(D,H.fieldPath,D.startAt);te.push(V.value),ae&&(ae=V.inclusive)}return new Of(te,ae)})(f,h),b=(function(D,O){const te=[];let ae=!0;for(const H of kd(O)){const V=H.kind===0?Kj(D,H.fieldPath,D.endAt):Wj(D,H.fieldPath,D.endAt);te.push(V.value),ae&&(ae=V.inclusive)}return new Of(te,ae)})(f,h),T=this.On(h,f,w),S=this.On(h,f,b),j=this.Nn(h,f,y),E=this.Bn(h.indexId,g,T,w.inclusive,S,b.inclusive,j);return Te.forEach(E,(L=>r.Y(L,t.limit).next((D=>{D.forEach((O=>{const te=ot.fromSegments(O.documentKey);c.has(te)||(c=c.add(te),u.push(te))}))}))))})).next((()=>u))}return Te.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=kD(ur.create(e.filters,"and")).map((r=>Z1(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,a,o,c,u){const h=(t!=null?t.length:1)*Math.max(r.length,o.length),f=h/(t!=null?t.length:1),g=[];for(let y=0;y<h;++y){const w=t?this.Ln(t[y/f]):c0,b=this.kn(e,w,r[y%f],a),T=this.qn(e,w,o[y%f],c),S=u.map((j=>this.kn(e,w,j,!0)));g.push(...this.createRange(b,T,S))}return g}kn(e,t,r,a){const o=new Fd(e,ot.empty(),t,r);return a?o:o.An()}qn(e,t,r,a){const o=new Fd(e,ot.empty(),t,r);return a?o.An():o}xn(e,t){const r=new f_(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((o=>{let c=null;for(const u of o)r.yn(u)&&(!c||u.fields.length>c.fields.length)&&(c=u);return c}))}getIndexType(e,t){let r=2;const a=this.Mn(t);return Te.forEach(a,(o=>this.xn(e,o).next((c=>{c?r!==0&&c.fields.length<(function(h){let f=new dr(Qr.comparator),g=!1;for(const y of h.filters)for(const w of y.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?g=!0:f=f.add(w.field));for(const y of h.orderBy)y.field.isKeyField()||(f=f.add(y.field));return f.size+(g?1:0)})(o)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&r===2?1:r))}Qn(e,t){const r=new Hm;for(const a of kd(e)){const o=t.data.field(a.fieldPath);if(o==null)return null;const c=r.Pn(a.kind);Od.Kt.Dt(o,c)}return r.un()}Ln(e){const t=new Hm;return Od.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Hm;return Od.Kt.Dt(Pg(this.databaseId,t),r.Pn((function(o){const c=kd(o);return c.length===0?0:c[c.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let a=[];a.push(new Hm);let o=0;for(const c of kd(e)){const u=r[o++];for(const h of a)if(this.Un(t,c.fieldPath)&&Lg(u))a=this.Kn(a,c,u);else{const f=h.Pn(c.kind);Od.Kt.Dt(u,f)}}return this.Wn(a)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const a=[...e],o=[];for(const c of r.arrayValue.values||[])for(const u of a){const h=new Hm;h.seed(u.un()),Od.Kt.Dt(c,h.Pn(t.kind)),o.push(h)}return o}Un(e,t){return!!e.filters.find((r=>r instanceof Dn&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Gm(e),a=tf(e);return(t?r.J($1,IDBKeyRange.bound(t,t)):r.J()).next((o=>{const c=[];return Te.forEach(o,(u=>a.get([u.indexId,this.uid]).next((h=>{c.push((function(g,y){const w=y?new Eg(y.sequenceNumber,new uo(sh(y.readTime),new ot(ql(y.documentKey)),y.largestBatchId)):Eg.empty(),b=g.fields.map((([T,S])=>new k0(Qr.fromServerFormat(T),S)));return new ax(g.indexId,g.collectionGroup,b,w)})(u,h))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const o=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return o!==0?o:cn(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=Gm(e),o=tf(e);return this.Gn(e).next((c=>a.J($1,IDBKeyRange.bound(t,t)).next((u=>Te.forEach(u,(h=>o.put(o_(h.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return Te.forEach(t,((a,o)=>{const c=r.get(a.collectionGroup);return(c?Te.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((u=>(r.set(a.collectionGroup,u),Te.forEach(u,(h=>this.zn(e,a,h).next((f=>{const g=this.jn(o,h);return f.isEqual(g)?Te.resolve():this.Jn(e,o,h,f,g)})))))))}))}Hn(e,t,r,a){return ef(e).put(a.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,a){return ef(e).delete(a.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const a=ef(e);let o=new dr(ku);return a.ee({index:vS,range:IDBKeyRange.only([r.indexId,this.uid,U0(this.$n(r,t))])},((c,u)=>{o=o.add(new Fd(r.indexId,t,h_(u.arrayValue),h_(u.directionalValue)))})).next((()=>o))}jn(e,t){let r=new dr(ku);const a=this.Qn(t,e);if(a==null)return r;const o=H1(t);if(o!=null){const c=e.data.field(o.fieldPath);if(Lg(c))for(const u of c.arrayValue.values||[])r=r.add(new Fd(t.indexId,e.key,this.Ln(u),a))}else r=r.add(new Fd(t.indexId,e.key,c0,a));return r}Jn(e,t,r,a,o){Ze(g_,"Updating index entries for document '%s'",t.key);const c=[];return(function(h,f,g,y,w){const b=h.getIterator(),T=f.getIterator();let S=Jh(b),j=Jh(T);for(;S||j;){let E=!1,L=!1;if(S&&j){const D=g(S,j);D<0?L=!0:D>0&&(E=!0)}else S!=null?L=!0:E=!0;E?(y(j),j=Jh(T)):L?(w(S),S=Jh(b)):(S=Jh(b),j=Jh(T))}})(a,o,ku,(u=>{c.push(this.Hn(e,t,r,u))}),(u=>{c.push(this.Yn(e,t,r,u))})),Te.waitFor(c)}Gn(e){let t=1;return tf(e).ee({index:bS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,o)=>{o.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,u)=>ku(c,u))).filter(((c,u,h)=>!u||ku(c,h[u-1])!==0));const a=[];a.push(e);for(const c of r){const u=ku(c,e),h=ku(c,t);if(u===0)a[0]=e.An();else if(u>0&&h<0)a.push(c),a.push(c.An());else if(h>0)break}a.push(t);const o=[];for(let c=0;c<a.length;c+=2){if(this.Zn(a[c],a[c+1]))return[];const u=a[c].Vn(this.uid,c0,ot.empty()),h=a[c+1].Vn(this.uid,c0,ot.empty());o.push(IDBKeyRange.bound(u,h))}return o}Zn(e,t){return ku(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(x_)}getMinOffset(e,t){return Te.mapArray(this.Mn(t),(r=>this.xn(e,r).next((a=>a||bt(44426))))).next(x_)}}function p_(n){return na(n,Ig)}function ef(n){return na(n,cg)}function Gm(n){return na(n,ov)}function tf(n){return na(n,lg)}function x_(n){kt(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const a=n[r].indexState.offset;sv(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new uo(e.readTime,e.documentKey,t)}const y_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jE=41943040;class Xa{static withCacheSize(e){return new Xa(e,Xa.DEFAULT_COLLECTION_PERCENTILE,Xa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function _E(n,e,t){const r=n.store(ll),a=n.store(Rf),o=[],c=IDBKeyRange.only(t.batchId);let u=0;const h=r.ee({range:c},((g,y,w)=>(u++,w.delete())));o.push(h.next((()=>{kt(u===1,47070,{batchId:t.batchId})})));const f=[];for(const g of t.mutations){const y=pS(e,g.key.path,t.batchId);o.push(a.delete(y)),f.push(g.key)}return Te.waitFor(o).next((()=>f))}function px(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw bt(14731);e=n.noDocument}return JSON.stringify(e).length}Xa.DEFAULT_COLLECTION_PERCENTILE=10,Xa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xa.DEFAULT=new Xa(jE,Xa.DEFAULT_COLLECTION_PERCENTILE,Xa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xa.DISABLED=new Xa(-1,0,0);class Zx{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Xn={}}static wt(e,t,r,a){kt(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new Zx(o,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pu(e).ee({index:Ud,range:r},((a,o,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const o=ff(e),c=Pu(e);return c.add({}).next((u=>{kt(typeof u=="number",49019);const h=new gv(u,t,r,a),f=(function(b,T,S){const j=S.baseMutations.map((L=>fx(b.yt,L))),E=S.mutations.map((L=>fx(b.yt,L)));return{userId:T,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:j,mutations:E}})(this.serializer,this.userId,h),g=[];let y=new dr(((w,b)=>cn(w.canonicalString(),b.canonicalString())));for(const w of a){const b=pS(this.userId,w.key.path,u);y=y.add(w.key.path.popLast()),g.push(c.put(f)),g.push(o.put(b,c7))}return y.forEach((w=>{g.push(this.indexManager.addToCollectionParentIndex(e,w))})),e.addOnCommittedListener((()=>{this.Xn[u]=h.keys()})),Te.waitFor(g).next((()=>h))}))}lookupMutationBatch(e,t){return Pu(e).get(t).next((r=>r?(kt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Md(this.serializer,r)):null))}er(e,t){return this.Xn[t]?Te.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Xn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Pu(e).ee({index:Ud,range:a},((c,u,h)=>{u.userId===this.userId&&(kt(u.batchId>=r,47524,{tr:r}),o=Md(this.serializer,u)),h.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Bd;return Pu(e).ee({index:Ud,range:t,reverse:!0},((a,o,c)=>{r=o.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Bd],[this.userId,Number.POSITIVE_INFINITY]);return Pu(e).J(Ud,t).next((r=>r.map((a=>Md(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=P0(this.userId,t.path),a=IDBKeyRange.lowerBound(r),o=[];return ff(e).ee({range:a},((c,u,h)=>{const[f,g,y]=c,w=ql(g);if(f===this.userId&&t.path.isEqual(w))return Pu(e).get(y).next((b=>{if(!b)throw bt(61480,{nr:c,batchId:y});kt(b.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:b.userId,batchId:y}),o.push(Md(this.serializer,b))}));h.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dr(cn);const a=[];return t.forEach((o=>{const c=P0(this.userId,o.path),u=IDBKeyRange.lowerBound(c),h=ff(e).ee({range:u},((f,g,y)=>{const[w,b,T]=f,S=ql(b);w===this.userId&&o.path.isEqual(S)?r=r.add(T):y.done()}));a.push(h)})),Te.waitFor(a).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,o=P0(this.userId,r),c=IDBKeyRange.lowerBound(o);let u=new dr(cn);return ff(e).ee({range:c},((h,f,g)=>{const[y,w,b]=h,T=ql(w);y===this.userId&&r.isPrefixOf(T)?T.length===a&&(u=u.add(b)):g.done()})).next((()=>this.rr(e,u)))}rr(e,t){const r=[],a=[];return t.forEach((o=>{a.push(Pu(e).get(o).next((c=>{if(c===null)throw bt(35274,{batchId:o});kt(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:o}),r.push(Md(this.serializer,c))})))})),Te.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return _E(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),Te.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Te.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return ff(e).ee({range:r},((o,c,u)=>{if(o[0]===this.userId){const h=ql(o[1]);a.push(h)}else u.done()})).next((()=>{kt(a.length===0,56720,{sr:a.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return SE(e,this.userId,t)}_r(e){return EE(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Bd,lastStreamToken:""}))}}function SE(n,e,t){const r=P0(e,t.path),a=r[1],o=IDBKeyRange.lowerBound(r);let c=!1;return ff(n).ee({range:o,X:!0},((u,h,f)=>{const[g,y,w]=u;g===e&&y===a&&(c=!0),f.done()})).next((()=>c))}function Pu(n){return na(n,ll)}function ff(n){return na(n,Rf)}function EE(n){return na(n,Tg)}class ah{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ah(0)}static cr(){return new ah(-1)}}class DD{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new ah(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ht.fromTimestamp(new vt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.hr(e,a))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>nf(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(kt(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let a=0;const o=[];return nf(e).ee(((c,u)=>{const h=ng(u);h.sequenceNumber<=t&&r.get(h.targetId)===null&&(a++,o.push(this.removeTargetData(e,h)))})).next((()=>Te.waitFor(o))).next((()=>a))}forEachTarget(e,t){return nf(e).ee(((r,a)=>{const o=ng(a);t(o)}))}lr(e){return b_(e).get(lx).next((t=>(kt(t!==null,2888),t)))}hr(e,t){return b_(e).put(lx,t)}Pr(e,t){return nf(e).put(bE(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=nh(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return nf(e).ee({range:a,index:yS},((c,u,h)=>{const f=ng(u);Qg(t,f.target)&&(o=f,h.done())})).next((()=>o))}addMatchingKeys(e,t,r){const a=[],o=Bu(e);return t.forEach((c=>{const u=Ja(c.path);a.push(o.put({targetId:r,path:u})),a.push(this.referenceDelegate.addReference(e,r,c))})),Te.waitFor(a)}removeMatchingKeys(e,t,r){const a=Bu(e);return Te.forEach(t,(o=>{const c=Ja(o.path);return Te.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,o)])}))}removeMatchingKeysForTargetId(e,t){const r=Bu(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Bu(e);let o=Sn();return a.ee({range:r,X:!0},((c,u,h)=>{const f=ql(c[1]),g=new ot(f);o=o.add(g)})).next((()=>o))}containsKey(e,t){const r=Ja(t.path),a=IDBKeyRange.bound([r],[cS(r)],!1,!0);let o=0;return Bu(e).ee({index:iv,X:!0,range:a},(([c,u],h,f)=>{c!==0&&(o++,f.done())})).next((()=>o>0))}At(e,t){return nf(e).get(t).next((r=>r?ng(r):null))}}function nf(n){return na(n,kf)}function b_(n){return na(n,zd)}function Bu(n){return na(n,Pf)}const v_="LruGarbageCollector",MD=1048576;function w_([n,e],[t,r]){const a=cn(n,t);return a===0?cn(e,r):a}class OD{constructor(e){this.Ir=e,this.buffer=new dr(w_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();w_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class AE{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ze(v_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ud(t)?Ze(v_,"Ignoring IndexedDB error during garbage collection: ",t):await hh(t)}await this.Vr(3e5)}))}}class FD{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return Te.resolve(Po.ce);const r=new OD(t);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ze("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(y_)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),y_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,a,o,c,u,h,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(Ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),a=this.params.maximumSequenceNumbersToCollect):a=y,c=Date.now(),this.nthSequenceNumber(e,a)))).next((y=>(r=y,u=Date.now(),this.removeTargets(e,r,t)))).next((y=>(o=y,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(f=Date.now(),cf()<=Ln.DEBUG&&Ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${a} in `+(u-c)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${y} documents in `+(f-h)+`ms
Total Duration: ${f-g}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:y}))))}}function TE(n,e){return new FD(n,e)}class VD{constructor(e,t){this.db=e,this.garbageCollector=TE(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,a)=>t(a)))}addReference(e,t,r){return u0(e,r)}removeReference(e,t,r){return u0(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return u0(e,t)}br(e,t){return(function(a,o){let c=!1;return EE(a).te((u=>SE(a,u,o).next((h=>(h&&(c=!0),Te.resolve(!h)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let o=0;return this.Sr(e,((c,u)=>{if(u<=t){const h=this.br(e,c).next((f=>{if(!f)return o++,r.getEntry(e,c).next((()=>(r.removeEntry(c,Ht.min()),Bu(e).delete((function(y){return[0,Ja(y.path)]})(c)))))}));a.push(h)}})).next((()=>Te.waitFor(a))).next((()=>r.apply(e))).next((()=>o))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return u0(e,t)}Sr(e,t){const r=Bu(e);let a,o=Po.ce;return r.ee({index:iv},(([c,u],{path:h,sequenceNumber:f})=>{c===0?(o!==Po.ce&&t(new ot(ql(a)),o),o=f,a=h):o=Po.ce})).next((()=>{o!==Po.ce&&t(new ot(ql(a)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function u0(n,e){return Bu(n).put((function(r,a){return{targetId:0,path:Ja(r.path),sequenceNumber:a}})(e,n.currentSequenceNumber))}class CE{constructor(){this.changes=new Zc((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,us.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class UD{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Id(e).put(r)}removeEntry(e,t,r){return Id(e).delete((function(o,c){const u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],mx(c),u[u.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=us.newInvalidDocument(t);return Id(e).ee({index:L0,range:IDBKeyRange.only($m(t))},((a,o)=>{r=this.Cr(t,o)})).next((()=>r))}vr(e,t){let r={size:0,document:us.newInvalidDocument(t)};return Id(e).ee({index:L0,range:IDBKeyRange.only($m(t))},((a,o)=>{r={document:this.Cr(t,o),size:px(o)}})).next((()=>r))}getEntries(e,t){let r=oo();return this.Fr(e,t,((a,o)=>{const c=this.Cr(a,o);r=r.insert(a,c)})).next((()=>r))}Mr(e,t){let r=oo(),a=new Hr(ot.comparator);return this.Fr(e,t,((o,c)=>{const u=this.Cr(o,c);r=r.insert(o,u),a=a.insert(o,px(c))})).next((()=>({documents:r,Or:a})))}Fr(e,t,r){if(t.isEmpty())return Te.resolve();let a=new dr(__);t.forEach((h=>a=a.add(h)));const o=IDBKeyRange.bound($m(a.first()),$m(a.last())),c=a.getIterator();let u=c.getNext();return Id(e).ee({index:L0,range:o},((h,f,g)=>{const y=ot.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;u&&__(u,y)<0;)r(u,null),u=c.getNext();u&&u.isEqual(y)&&(r(u,f),u=c.hasNext()?c.getNext():null),u?g.j($m(u)):g.done()})).next((()=>{for(;u;)r(u,null),u=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,o){const c=t.path,u=[c.popLast().toArray(),c.lastSegment(),mx(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Id(e).J(IDBKeyRange.bound(u,h,!0)).next((f=>{o?.incrementDocumentReadCount(f.length);let g=oo();for(const y of f){const w=this.Cr(ot.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);w.isFoundDocument()&&(Jg(t,w)||a.has(w.key))&&(g=g.insert(w.key,w))}return g}))}getAllFromCollectionGroup(e,t,r,a){let o=oo();const c=j_(t,r),u=j_(t,uo.max());return Id(e).ee({index:xS,range:IDBKeyRange.bound(c,u,!0)},((h,f,g)=>{const y=this.Cr(ot.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(y.key,y),o.size===a&&g.done()})).next((()=>o))}newChangeBuffer(e){return new BD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return N_(e).get(G1).next((t=>(kt(!!t,20021),t)))}Dr(e,t){return N_(e).put(G1,t)}Cr(e,t){if(t){const r=SD(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ht.min())))return r}return us.newInvalidDocument(e)}}function IE(n){return new UD(n)}class BD extends CE{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Zc((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new dr(((o,c)=>cn(o.canonicalString(),c.canonicalString())));return this.changes.forEach(((o,c)=>{const u=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,u.readTime)),c.isValidDocument()){const h=a_(this.Nr.serializer,c);a=a.add(o.path.popLast());const f=px(h);r+=f-u.size,t.push(this.Nr.addEntry(e,o,h))}else if(r-=u.size,this.trackRemovals){const h=a_(this.Nr.serializer,c.convertToNoDocument(Ht.min()));t.push(this.Nr.addEntry(e,o,h))}})),a.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,r)),Te.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:a})=>(a.forEach(((o,c)=>{this.Br.set(o,{size:c,readTime:r.get(o).readTime})})),r)))}}function N_(n){return na(n,Cg)}function Id(n){return na(n,ox)}function $m(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function j_(n,e){const t=e.documentKey.path.toArray();return[n,mx(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function __(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(a=cn(t[o],r[o]),a)return a;return a=cn(t.length,r.length),a||(a=cn(t[t.length-2],r[r.length-2]),a||cn(t[t.length-1],r[r.length-1]))}class zD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class RE{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&fg(r.mutation,a,Fi.empty(),vt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Sn()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Sn()){const a=Hl();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((o=>{let c=eg();return o.forEach(((u,h)=>{c=c.insert(u,h.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Hl();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Sn())))}populateOverlays(e,t,r){const a=[];return r.forEach((o=>{t.has(o)||a.push(o)})),this.documentOverlayCache.getOverlays(e,a).next((o=>{o.forEach(((c,u)=>{t.set(c,u)}))}))}computeViews(e,t,r,a){let o=oo();const c=hg(),u=(function(){return hg()})();return t.forEach(((h,f)=>{const g=r.get(f.key);a.has(f.key)&&(g===void 0||g.mutation instanceof eu)?o=o.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),fg(g.mutation,f,g.mutation.getFieldMask(),vt.now())):c.set(f.key,Fi.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((f,g)=>c.set(f,g))),t.forEach(((f,g)=>u.set(f,new zD(g,c.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,t){const r=hg();let a=new Hr(((c,u)=>c-u)),o=Sn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const u of c)u.keys().forEach((h=>{const f=t.get(h);if(f===null)return;let g=r.get(h)||Fi.empty();g=u.applyToLocalView(f,g),r.set(h,g);const y=(a.get(u.batchId)||Sn()).add(h);a=a.insert(u.batchId,y)}))})).next((()=>{const c=[],u=a.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,g=h.value,y=KS();g.forEach((w=>{if(!o.has(w)){const b=tE(t.get(w),r.get(w));b!==null&&y.set(w,b),o=o.add(w)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,y))}return Te.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(c){return ot.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((o=>{const c=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-o.size):Te.resolve(Hl());let u=Sg,h=o;return c.next((f=>Te.forEach(f,((g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(g)?Te.resolve():this.remoteDocumentCache.getEntry(e,g).next((w=>{h=h.insert(g,w)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,h,f,Sn()))).next((g=>({batchId:u,changes:WS(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ot(t)).next((r=>{let a=eg();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const o=t.collectionGroup;let c=eg();return this.indexManager.getCollectionParents(e,o).next((u=>Te.forEach(u,(h=>{const f=(function(y,w){return new Jf(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,a).next((g=>{g.forEach(((y,w)=>{c=c.insert(y,w)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,a)))).next((c=>{o.forEach(((h,f)=>{const g=f.getKey();c.get(g)===null&&(c=c.insert(g,us.newInvalidDocument(g)))}));let u=eg();return c.forEach(((h,f)=>{const g=o.get(h);g!==void 0&&fg(g.mutation,f,Fi.empty(),vt.now()),Jg(t,f)&&(u=u.insert(h,f))})),u}))}}class qD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:fi(a.createTime)}})(t)),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:vE(a.bundledQuery),readTime:fi(a.readTime)}})(t)),Te.resolve()}}class HD{constructor(){this.overlays=new Hr(ot.comparator),this.qr=new Map}getOverlay(e,t){return Te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Hl();return Te.forEach(t,(a=>this.getOverlay(e,a).next((o=>{o!==null&&r.set(a,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,o)=>{this.St(e,t,o)})),Te.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),Te.resolve()}getOverlaysForCollection(e,t,r){const a=Hl(),o=t.length+1,c=new ot(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&a.set(h.getKey(),h)}return Te.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let o=new Hr(((f,g)=>f-g));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let g=o.get(f.largestBatchId);g===null&&(g=Hl(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=Hl(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,g)=>u.set(f,g))),!(u.size()>=a)););return Te.resolve(u)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new xv(t,r));let o=this.qr.get(t);o===void 0&&(o=Sn(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}class GD{constructor(){this.sessionToken=Vs.EMPTY_BYTE_STRING}getSessionToken(e){return Te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Te.resolve()}}class Nv{constructor(){this.Qr=new dr(pa.$r),this.Ur=new dr(pa.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new pa(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new pa(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ot(new tr([])),r=new pa(t,e),a=new pa(t,e+1),o=[];return this.Ur.forEachInRange([r,a],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ot(new tr([])),r=new pa(t,e),a=new pa(t,e+1);let o=Sn();return this.Ur.forEachInRange([r,a],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new pa(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class pa{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ot.comparator(e.key,t.key)||cn(e.Yr,t.Yr)}static Kr(e,t){return cn(e.Yr,t.Yr)||ot.comparator(e.key,t.key)}}class $D{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new dr(pa.$r)}checkEmpty(e){return Te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new gv(o,t,r,a);this.mutationQueue.push(c);for(const u of a)this.Zr=this.Zr.add(new pa(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Te.resolve(c)}lookupMutationBatch(e,t){return Te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.ei(r),o=a<0?0:a;return Te.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(this.mutationQueue.length===0?Bd:this.tr-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new pa(t,0),a=new pa(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,a],(c=>{const u=this.Xr(c.Yr);o.push(u)})),Te.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dr(cn);return t.forEach((a=>{const o=new pa(a,0),c=new pa(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(u=>{r=r.add(u.Yr)}))})),Te.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let o=r;ot.isDocumentKey(o)||(o=o.child(""));const c=new pa(new ot(o),0);let u=new dr(cn);return this.Zr.forEachWhile((h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===a&&(u=u.add(h.Yr)),!0)}),c),Te.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){kt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Te.forEach(t.mutations,(a=>{const o=new pa(a.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new pa(t,0),a=this.Zr.firstAfterOrEqual(r);return Te.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Te.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class WD{constructor(e){this.ri=e,this.docs=(function(){return new Hr(ot.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),o=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Te.resolve(r?r.document.mutableCopy():us.newInvalidDocument(t))}getEntries(e,t){let r=oo();return t.forEach((a=>{const o=this.docs.get(a);r=r.insert(a,o?o.document.mutableCopy():us.newInvalidDocument(a))})),Te.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let o=oo();const c=t.path,u=new ot(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:g}}=h.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||sv(hS(g),r)<=0||(a.has(g.key)||Jg(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return Te.resolve(o)}getAllFromCollectionGroup(e,t,r,a){bt(9500)}ii(e,t){return Te.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new KD(this)}getSize(e){return Te.resolve(this.size)}}class KD extends CE{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),Te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class YD{constructor(e){this.persistence=e,this.si=new Zc((t=>nh(t)),Qg),this.lastRemoteSnapshotVersion=Ht.min(),this.highestTargetId=0,this.oi=0,this._i=new Nv,this.targetCount=0,this.ai=ah.ur()}forEachTarget(e,t){return this.si.forEach(((r,a)=>t(a))),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),Te.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ah(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.Pr(t),Te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,r){let a=0;const o=[];return this.si.forEach(((c,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),a++)})),Te.waitFor(o).next((()=>a))}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return Te.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),Te.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const a=this.persistence.referenceDelegate,o=[];return a&&t.forEach((c=>{o.push(a.markPotentiallyOrphaned(e,c))})),Te.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Te.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return Te.resolve(r)}containsKey(e,t){return Te.resolve(this._i.containsKey(t))}}class jv{constructor(e,t){this.ui={},this.overlays={},this.ci=new Po(0),this.li=!1,this.li=!0,this.hi=new GD,this.referenceDelegate=e(this),this.Pi=new YD(this),this.indexManager=new PD,this.remoteDocumentCache=(function(a){return new WD(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new yE(t),this.Ii=new qD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new $D(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Ze("MemoryPersistence","Starting transaction:",e);const a=new XD(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((o=>this.referenceDelegate.di(a).next((()=>o)))).toPromise().then((o=>(a.raiseOnCommittedEvent(),o)))}Ai(e,t){return Te.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class XD extends mS{constructor(e){super(),this.currentSequenceNumber=e}}class ey{constructor(e){this.persistence=e,this.Ri=new Nv,this.Vi=null}static mi(e){return new ey(e)}get fi(){if(this.Vi)return this.Vi;throw bt(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),Te.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.fi,(r=>{const a=ot.fromPath(r);return this.gi(e,a).next((o=>{o||t.removeEntry(a,Ht.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Te.or([()=>Te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class xx{constructor(e,t){this.persistence=e,this.pi=new Zc((r=>Ja(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=TE(this,t)}static mi(e,t){return new xx(e,t)}Ei(){}di(e){return Te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return Te.forEach(this.pi,((r,a)=>this.br(e,r,a).next((o=>o?Te.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((u=>{u||(r++,o.removeEntry(c,Ht.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Te.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Te.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=M0(e.data.value)),t}br(e,t,r){return Te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return Te.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class QD{constructor(e){this.serializer=e}k(e,t,r,a){const o=new Ux("createOrUpgrade",t);r<1&&a>=1&&((function(h){h.createObjectStore(Xg)})(e),(function(h){h.createObjectStore(Tg,{keyPath:l7}),h.createObjectStore(ll,{keyPath:Dj,autoIncrement:!0}).createIndex(Ud,Mj,{unique:!0}),h.createObjectStore(Rf)})(e),S_(e),(function(h){h.createObjectStore(Pd)})(e));let c=Te.resolve();return r<3&&a>=3&&(r!==0&&((function(h){h.deleteObjectStore(Pf),h.deleteObjectStore(kf),h.deleteObjectStore(zd)})(e),S_(e)),c=c.next((()=>(function(h){const f=h.store(zd),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ht.min().toTimestamp(),targetCount:0};return f.put(lx,g)})(o)))),r<4&&a>=4&&(r!==0&&(c=c.next((()=>(function(h,f){return f.store(ll).J().next((y=>{h.deleteObjectStore(ll),h.createObjectStore(ll,{keyPath:Dj,autoIncrement:!0}).createIndex(Ud,Mj,{unique:!0});const w=f.store(ll),b=y.map((T=>w.put(T)));return Te.waitFor(b)}))})(e,o)))),c=c.next((()=>{(function(h){h.createObjectStore(Lf,{keyPath:x7})})(e)}))),r<5&&a>=5&&(c=c.next((()=>this.yi(o)))),r<6&&a>=6&&(c=c.next((()=>((function(h){h.createObjectStore(Cg)})(e),this.wi(o))))),r<7&&a>=7&&(c=c.next((()=>this.Si(o)))),r<8&&a>=8&&(c=c.next((()=>this.bi(e,o)))),r<9&&a>=9&&(c=c.next((()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(c=c.next((()=>this.Di(o)))),r<11&&a>=11&&(c=c.next((()=>{(function(h){h.createObjectStore(zx,{keyPath:y7})})(e),(function(h){h.createObjectStore(qx,{keyPath:b7})})(e)}))),r<12&&a>=12&&(c=c.next((()=>{(function(h){const f=h.createObjectStore(Hx,{keyPath:E7});f.createIndex(W1,A7,{unique:!1}),f.createIndex(wS,T7,{unique:!1})})(e)}))),r<13&&a>=13&&(c=c.next((()=>(function(h){const f=h.createObjectStore(ox,{keyPath:u7});f.createIndex(L0,d7),f.createIndex(xS,h7)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(Pd)))),r<14&&a>=14&&(c=c.next((()=>this.Fi(e,o)))),r<15&&a>=15&&(c=c.next((()=>(function(h){h.createObjectStore(ov,{keyPath:v7,autoIncrement:!0}).createIndex($1,w7,{unique:!1}),h.createObjectStore(lg,{keyPath:N7}).createIndex(bS,j7,{unique:!1}),h.createObjectStore(cg,{keyPath:_7}).createIndex(vS,S7,{unique:!1})})(e)))),r<16&&a>=16&&(c=c.next((()=>{t.objectStore(lg).clear()})).next((()=>{t.objectStore(cg).clear()}))),r<17&&a>=17&&(c=c.next((()=>{(function(h){h.createObjectStore(lv,{keyPath:C7})})(e)}))),r<18&&a>=18&&u3()&&(c=c.next((()=>{t.objectStore(lg).clear()})).next((()=>{t.objectStore(cg).clear()}))),c}wi(e){let t=0;return e.store(Pd).ee(((r,a)=>{t+=px(a)})).next((()=>{const r={byteSize:t};return e.store(Cg).put(G1,r)}))}yi(e){const t=e.store(Tg),r=e.store(ll);return t.J().next((a=>Te.forEach(a,(o=>{const c=IDBKeyRange.bound([o.userId,Bd],[o.userId,o.lastAcknowledgedBatchId]);return r.J(Ud,c).next((u=>Te.forEach(u,(h=>{kt(h.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:h.batchId});const f=Md(this.serializer,h);return _E(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const t=e.store(Pf),r=e.store(Pd);return e.store(zd).get(lx).next((a=>{const o=[];return r.ee(((c,u)=>{const h=new tr(c),f=(function(y){return[0,Ja(y)]})(h);o.push(t.get(f).next((g=>g?Te.resolve():(y=>t.put({targetId:0,path:Ja(y),sequenceNumber:a.highestListenSequenceNumber}))(h))))})).next((()=>Te.waitFor(o)))}))}bi(e,t){e.createObjectStore(Ig,{keyPath:p7});const r=t.store(Ig),a=new wv,o=c=>{if(a.add(c)){const u=c.lastSegment(),h=c.popLast();return r.put({collectionId:u,parent:Ja(h)})}};return t.store(Pd).ee({X:!0},((c,u)=>{const h=new tr(c);return o(h.popLast())})).next((()=>t.store(Rf).ee({X:!0},(([c,u,h],f)=>{const g=ql(u);return o(g.popLast())}))))}Di(e){const t=e.store(kf);return t.ee(((r,a)=>{const o=ng(a),c=bE(this.serializer,o);return t.put(c)}))}Ci(e,t){const r=t.store(Pd),a=[];return r.ee(((o,c)=>{const u=t.store(ox),h=(function(y){return y.document?new ot(tr.fromString(y.document.name).popFirst(5)):y.noDocument?ot.fromSegments(y.noDocument.path):y.unknownDocument?ot.fromSegments(y.unknownDocument.path):bt(36783)})(c).path.toArray(),f={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(u.put(f))})).next((()=>Te.waitFor(a)))}Fi(e,t){const r=t.store(ll),a=IE(this.serializer),o=new jv(ey.mi,this.serializer.yt);return r.J().next((c=>{const u=new Map;return c.forEach((h=>{let f=u.get(h.userId)??Sn();Md(this.serializer,h).keys().forEach((g=>f=f.add(g))),u.set(h.userId,f)})),Te.forEach(u,((h,f)=>{const g=new La(f),y=Jx.wt(this.serializer,g),w=o.getIndexManager(g),b=Zx.wt(g,this.serializer,w,o.referenceDelegate);return new RE(a,b,y,w).recalculateAndSaveOverlaysForDocumentKeys(new K1(t,Po.ce),h).next()}))}))}}function S_(n){n.createObjectStore(Pf,{keyPath:m7}).createIndex(iv,g7,{unique:!0}),n.createObjectStore(kf,{keyPath:"targetId"}).createIndex(yS,f7,{unique:!0}),n.createObjectStore(zd)}const Lu="IndexedDbPersistence",Yb=18e5,Xb=5e3,Qb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",JD="main";class _v{constructor(e,t,r,a,o,c,u,h,f,g,y=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=o,this.window=c,this.document=u,this.xi=f,this.Oi=g,this.Ni=y,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=w=>Promise.resolve(),!_v.v())throw new tt(Ve.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new VD(this,a),this.$i=t+JD,this.serializer=new yE(h),this.Ui=new Xu(this.$i,this.Ni,new QD(this.serializer)),this.hi=new AD,this.Pi=new DD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=IE(this.serializer),this.Ii=new ED,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&hi(Lu,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new tt(Ve.FAILED_PRECONDITION,Qb);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Po(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>d0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(ud(e))return Ze(Lu,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ze(Lu,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Wm(e).get(Qh).next((t=>Te.resolve(this.es(t))))}ts(e){return d0(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Yb)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=na(t,Lf);return r.J().next((a=>{const o=this.ss(a,Yb),c=a.filter((u=>o.indexOf(u)===-1));return Te.forEach(c,(u=>r.delete(u.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?Te.resolve(!0):Wm(e).get(Qh).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Xb)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new tt(Ve.FAILED_PRECONDITION,Qb);return!1}}return!(!this.networkEnabled||!this.inForeground)||d0(e).J().next((r=>this.ss(r,Xb).find((a=>{if(this.clientId!==a.clientId){const o=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,u=this.networkEnabled===a.networkEnabled;if(o||c&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&Ze(Lu,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Xg,Lf],(e=>{const t=new K1(e,Po.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>d0(e).J().next((t=>this.ss(t,Yb).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Zx.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new LD(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Jx.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){Ze(Lu,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",o=(function(h){return h===18?k7:h===17?SS:h===16?R7:h===15?cv:h===14?_S:h===13?jS:h===12?I7:h===11?NS:void bt(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,a,o,(u=>(c=new K1(u,this.ci?this.ci.next():Po.ce),t==="readwrite-primary"?this.Hi(c).next((h=>!!h||this.Yi(c))).next((h=>{if(!h)throw hi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new tt(Ve.FAILED_PRECONDITION,fS);return r(c)})).next((h=>this.Xi(c).next((()=>h)))):this.Is(c).next((()=>r(c)))))).then((u=>(c.raiseOnCommittedEvent(),u)))}Is(e){return Wm(e).get(Qh).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Xb)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new tt(Ve.FAILED_PRECONDITION,Qb)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wm(e).put(Qh,t)}static v(){return Xu.v()}Zi(e){const t=Wm(e);return t.get(Qh).next((r=>this.es(r)?(Ze(Lu,"Releasing primary lease."),t.delete(Qh)):Te.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(hi(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;c3()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return Ze(Lu,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return hi(Lu,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){hi("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Wm(n){return na(n,Xg)}function d0(n){return na(n,Lf)}function ZD(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Sv{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=a}static As(e,t){let r=Sn(),a=Sn();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new Sv(e,t.fromCache,r,a)}}class eM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class kE{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return c3()?8:gS(ta())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const o={result:null};return this.ys(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,t,a,r).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new eM;return this.Ss(e,t,c).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,c,u.size)}))})).next((()=>o.result))}bs(e,t,r,a){return r.documentReadCount<this.fs?(cf()<=Ln.DEBUG&&Ze("QueryEngine","SDK will not create cache indexes for query:",uf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Te.resolve()):(cf()<=Ln.DEBUG&&Ze("QueryEngine","Query:",uf(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(cf()<=Ln.DEBUG&&Ze("QueryEngine","The SDK decides to create cache indexes for query:",uf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Lo(t))):Te.resolve())}ys(e,t){if(Yj(t))return Te.resolve(null);let r=Lo(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=t2(t,null,"F"),r=Lo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const c=Sn(...o);return this.ps.getDocuments(e,c).next((u=>this.indexManager.getMinOffset(e,r).next((h=>{const f=this.Ds(t,u);return this.Cs(t,f,c,h.readTime)?this.ys(e,t2(t,null,"F")):this.vs(e,f,t,h)}))))})))))}ws(e,t,r,a){return Yj(t)||a.isEqual(Ht.min())?Te.resolve(null):this.ps.getDocuments(e,r).next((o=>{const c=this.Ds(t,o);return this.Cs(t,c,r,a)?Te.resolve(null):(cf()<=Ln.DEBUG&&Ze("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),uf(t)),this.vs(e,c,t,t7(a,Sg)).next((u=>u)))}))}Ds(e,t){let r=new dr(GS(e));return t.forEach(((a,o)=>{Jg(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}Ss(e,t,r){return cf()<=Ln.DEBUG&&Ze("QueryEngine","Using full collection scan to execute query:",uf(t)),this.ps.getDocumentsMatchingQuery(e,t,uo.min(),r)}vs(e,t,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}const Ev="LocalStore",tM=3e8;class nM{constructor(e,t,r,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new Hr(cn),this.xs=new Zc((o=>nh(o)),Qg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RE(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function PE(n,e,t,r){return new nM(n,e,t,r)}async function LE(n,e){const t=un(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((o=>(a=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const c=[],u=[];let h=Sn();for(const f of a){c.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}for(const f of o){u.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(r,h).next((f=>({Ls:f,removedBatchIds:c,addedBatchIds:u})))}))}))}function rM(n,e){const t=un(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,h,f,g){const y=f.batch,w=y.keys();let b=Te.resolve();return w.forEach((T=>{b=b.next((()=>g.getEntry(h,T))).next((S=>{const j=f.docVersions.get(T);kt(j!==null,48541),S.version.compareTo(j)<0&&(y.applyToRemoteDocument(S,f),S.isValidDocument()&&(S.setReadTime(f.commitVersion),g.addEntry(S)))}))})),b.next((()=>u.mutationQueue.removeMutationBatch(h,y)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let h=Sn();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function DE(n){const e=un(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function sM(n,e){const t=un(n),r=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const u=[];e.targetChanges.forEach(((g,y)=>{const w=a.get(y);if(!w)return;u.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,y))));let b=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?b=b.withResumeToken(Vs.EMPTY_BYTE_STRING,Ht.min()).withLastLimboFreeSnapshotVersion(Ht.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,r)),a=a.insert(y,b),(function(S,j,E){return S.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=tM?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0})(w,b,g)&&u.push(t.Pi.updateTargetData(o,b))}));let h=oo(),f=Sn();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),u.push(aM(o,c,e.documentUpdates).next((g=>{h=g.ks,f=g.qs}))),!r.isEqual(Ht.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));u.push(g)}return Te.waitFor(u).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,h,f))).next((()=>h))})).then((o=>(t.Ms=a,o)))}function aM(n,e,t){let r=Sn(),a=Sn();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let c=oo();return t.forEach(((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(a=a.add(u)),h.isNoDocument()&&h.version.isEqual(Ht.min())?(e.removeEntry(u,h.readTime),c=c.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),c=c.insert(u,h)):Ze(Ev,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)})),{ks:c,qs:a}}))}function iM(n,e){const t=un(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Bd),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function oM(n,e){const t=un(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.Pi.getTargetData(r,e).next((o=>o?(a=o,Te.resolve(a)):t.Pi.allocateTargetId(r).next((c=>(a=new Bc(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function c2(n,e,t){const r=un(n),a=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!ud(c))throw c;Ze(Ev,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function E_(n,e,t){const r=un(n);let a=Ht.min(),o=Sn();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(h,f,g){const y=un(h),w=y.xs.get(g);return w!==void 0?Te.resolve(y.Ms.get(w)):y.Pi.getTargetData(f,g)})(r,c,Lo(e)).next((u=>{if(u)return a=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,u.targetId).next((h=>{o=h}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?a:Ht.min(),t?o:Sn()))).next((u=>(lM(r,W7(e),u),{documents:u,Qs:o})))))}function lM(n,e,t){let r=n.Os.get(e)||Ht.min();t.forEach(((a,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(e,r)}class A_{constructor(){this.activeTargetIds=Z7()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ME{constructor(){this.Mo=new A_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new A_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class cM{Oo(e){}shutdown(){}}const T_="ConnectivityMonitor";class C_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ze(T_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ze(T_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let h0=null;function u2(){return h0===null?h0=(function(){return 268435456+Math.round(2147483648*Math.random())})():h0++,"0x"+h0.toString(16)}const Jb="RestConnection",uM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===cx?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,t,r,a,o){const c=u2(),u=this.zo(e,t.toUriEncodedString());Ze(Jb,`Sending RPC '${e}' ${c}:`,u,r);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,a,o);const{host:f}=new URL(u),g=ld(f);return this.Jo(e,u,h,r,g).then((y=>(Ze(Jb,`Received RPC '${e}' ${c}: `,y),y)),(y=>{throw eh(Jb,`RPC '${e}' ${c} failed with error: `,y,"url: ",u,"request:",r),y}))}Ho(e,t,r,a,o,c){return this.Go(e,t,r,a,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qf})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,o)=>e[o]=a)),r&&r.headers.forEach(((a,o)=>e[o]=a))}zo(e,t){const r=uM[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class hM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Ga="WebChannelConnection";class fM extends dM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,a,o){const c=u2();return new Promise(((u,h)=>{const f=new nS;f.setWithCredentials(!0),f.listenOnce(rS.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case R0.NO_ERROR:const y=f.getResponseJson();Ze(Ga,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),u(y);break;case R0.TIMEOUT:Ze(Ga,`RPC '${e}' ${c} timed out`),h(new tt(Ve.DEADLINE_EXCEEDED,"Request time out"));break;case R0.HTTP_ERROR:const w=f.getStatus();if(Ze(Ga,`RPC '${e}' ${c} failed with status:`,w,"response text:",f.getResponseText()),w>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const T=b?.error;if(T&&T.status&&T.message){const S=(function(E){const L=E.toLowerCase().replace(/_/g,"-");return Object.values(Ve).indexOf(L)>=0?L:Ve.UNKNOWN})(T.status);h(new tt(S,T.message))}else h(new tt(Ve.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new tt(Ve.UNAVAILABLE,"Connection failed."));break;default:bt(9055,{l_:e,streamId:c,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Ze(Ga,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(a);Ze(Ga,`RPC '${e}' ${c} sending request:`,a),f.send(t,"POST",g,r,15)}))}T_(e,t,r){const a=u2(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=iS(),u=aS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const g=o.join("");Ze(Ga,`Creating RPC '${e}' stream ${a}: ${g}`,h);const y=c.createWebChannel(g,h);this.I_(y);let w=!1,b=!1;const T=new hM({Yo:j=>{b?Ze(Ga,`Not sending because RPC '${e}' stream ${a} is closed:`,j):(w||(Ze(Ga,`Opening RPC '${e}' stream ${a} transport.`),y.open(),w=!0),Ze(Ga,`RPC '${e}' stream ${a} sending:`,j),y.send(j))},Zo:()=>y.close()}),S=(j,E,L)=>{j.listen(E,(D=>{try{L(D)}catch(O){setTimeout((()=>{throw O}),0)}}))};return S(y,Zm.EventType.OPEN,(()=>{b||(Ze(Ga,`RPC '${e}' stream ${a} transport opened.`),T.o_())})),S(y,Zm.EventType.CLOSE,(()=>{b||(b=!0,Ze(Ga,`RPC '${e}' stream ${a} transport closed`),T.a_(),this.E_(y))})),S(y,Zm.EventType.ERROR,(j=>{b||(b=!0,eh(Ga,`RPC '${e}' stream ${a} transport errored. Name:`,j.name,"Message:",j.message),T.a_(new tt(Ve.UNAVAILABLE,"The operation could not be completed")))})),S(y,Zm.EventType.MESSAGE,(j=>{if(!b){const E=j.data[0];kt(!!E,16349);const L=E,D=L?.error||L[0]?.error;if(D){Ze(Ga,`RPC '${e}' stream ${a} received error:`,D);const O=D.status;let te=(function(V){const k=Ms[V];if(k!==void 0)return sE(k)})(O),ae=D.message;te===void 0&&(te=Ve.INTERNAL,ae="Unknown error status: "+O+" with message "+D.message),b=!0,T.a_(new tt(te,ae)),y.close()}else Ze(Ga,`RPC '${e}' stream ${a} received:`,E),T.u_(E)}})),S(u,sS.STAT_EVENT,(j=>{j.stat===z1.PROXY?Ze(Ga,`RPC '${e}' stream ${a} detected buffering proxy`):j.stat===z1.NOPROXY&&Ze(Ga,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{T.__()}),0),T}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function mM(){return typeof window<"u"?window:null}function B0(){return typeof document<"u"?document:null}function ty(n){return new gD(n,!0)}class OE{constructor(e,t,r=1e3,a=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=a,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&Ze("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const I_="PersistentStream";class FE{constructor(e,t,r,a,o,c,u,h){this.Mi=e,this.S_=r,this.b_=a,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new OE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Ve.RESOURCE_EXHAUSTED?(hi(t.toString()),hi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new tt(Ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ze(I_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ze(I_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class gM extends FE{constructor(e,t,r,a,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=yD(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Ht.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Ht.min():c.readTime?fi(c.readTime):Ht.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=s2(this.serializer),t.addTarget=(function(o,c){let u;const h=c.target;if(u=ux(h)?{documents:hE(o,h)}:{query:fE(o,h).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=oE(o,c.resumeToken);const f=n2(o,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(Ht.min())>0){u.readTime=zf(o,c.snapshotVersion.toTimestamp());const f=n2(o,c.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const r=vD(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=s2(this.serializer),t.removeTarget=e,this.q_(t)}}class pM extends FE{constructor(e,t,r,a,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return kt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,kt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){kt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=bD(e.writeResults,e.commitTime),r=fi(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=s2(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>fx(this.serializer,r)))};this.q_(t)}}class xM{}class yM extends xM{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new tt(Ve.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,r2(t,r),a,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new tt(Ve.UNKNOWN,o.toString())}))}Ho(e,t,r,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Ho(e,r2(t,r),a,c,u,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new tt(Ve.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class bM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hi(t),this.aa=!1):Ze("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ih="RemoteStore";class vM{constructor(e,t,r,a,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{fh(this)&&(Ze(ih,"Restarting streams for network reachability change."),await(async function(h){const f=un(h);f.Ea.add(4),await tp(f),f.Ra.set("Unknown"),f.Ea.delete(4),await ny(f)})(this))}))})),this.Ra=new bM(r,a)}}async function ny(n){if(fh(n))for(const e of n.da)await e(!0)}async function tp(n){for(const e of n.da)await e(!1)}function VE(n,e){const t=un(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Iv(t)?Cv(t):em(t).O_()&&Tv(t,e))}function Av(n,e){const t=un(n),r=em(t);t.Ia.delete(e),r.O_()&&UE(t,e),t.Ia.size===0&&(r.O_()?r.L_():fh(t)&&t.Ra.set("Unknown"))}function Tv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ht.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}em(n).Y_(e)}function UE(n,e){n.Va.Ue(e),em(n).Z_(e)}function Cv(n){n.Va=new dD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),em(n).start(),n.Ra.ua()}function Iv(n){return fh(n)&&!em(n).x_()&&n.Ia.size>0}function fh(n){return un(n).Ea.size===0}function BE(n){n.Va=void 0}async function wM(n){n.Ra.set("Online")}async function NM(n){n.Ia.forEach(((e,t)=>{Tv(n,e)}))}async function jM(n,e){BE(n),Iv(n)?(n.Ra.ha(e),Cv(n)):n.Ra.set("Unknown")}async function _M(n,e,t){if(n.Ra.set("Online"),e instanceof iE&&e.state===2&&e.cause)try{await(async function(a,o){const c=o.cause;for(const u of o.targetIds)a.Ia.has(u)&&(await a.remoteSyncer.rejectListen(u,c),a.Ia.delete(u),a.Va.removeTarget(u))})(n,e)}catch(r){Ze(ih,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yx(n,r)}else if(e instanceof V0?n.Va.Ze(e):e instanceof aE?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ht.min()))try{const r=await DE(n.localStore);t.compareTo(r)>=0&&await(function(o,c){const u=o.Va.Tt(c);return u.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(h.resumeToken,c))}})),u.targetMismatches.forEach(((h,f)=>{const g=o.Ia.get(h);if(!g)return;o.Ia.set(h,g.withResumeToken(Vs.EMPTY_BYTE_STRING,g.snapshotVersion)),UE(o,h);const y=new Bc(g.target,h,f,g.sequenceNumber);Tv(o,y)})),o.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){Ze(ih,"Failed to raise snapshot:",r),await yx(n,r)}}async function yx(n,e,t){if(!ud(e))throw e;n.Ea.add(1),await tp(n),n.Ra.set("Offline"),t||(t=()=>DE(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ze(ih,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ny(n)}))}function zE(n,e){return e().catch((t=>yx(n,t,e)))}async function np(n){const e=un(n),t=nd(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Bd;for(;SM(e);)try{const a=await iM(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,EM(e,a)}catch(a){await yx(e,a)}qE(e)&&HE(e)}function SM(n){return fh(n)&&n.Ta.length<10}function EM(n,e){n.Ta.push(e);const t=nd(n);t.O_()&&t.X_&&t.ea(e.mutations)}function qE(n){return fh(n)&&!nd(n).x_()&&n.Ta.length>0}function HE(n){nd(n).start()}async function AM(n){nd(n).ra()}async function TM(n){const e=nd(n);for(const t of n.Ta)e.ea(t.mutations)}async function CM(n,e,t){const r=n.Ta.shift(),a=pv.from(r,e,t);await zE(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await np(n)}async function IM(n,e){e&&nd(n).X_&&await(async function(r,a){if((function(c){return lD(c)&&c!==Ve.ABORTED})(a.code)){const o=r.Ta.shift();nd(r).B_(),await zE(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,a))),await np(r)}})(n,e),qE(n)&&HE(n)}async function R_(n,e){const t=un(n);t.asyncQueue.verifyOperationInProgress(),Ze(ih,"RemoteStore received new credentials");const r=fh(t);t.Ea.add(3),await tp(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ny(t)}async function RM(n,e){const t=un(n);e?(t.Ea.delete(2),await ny(t)):e||(t.Ea.add(2),await tp(t),t.Ra.set("Unknown"))}function em(n){return n.ma||(n.ma=(function(t,r,a){const o=un(t);return o.sa(),new gM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(n.datastore,n.asyncQueue,{Xo:wM.bind(null,n),t_:NM.bind(null,n),r_:jM.bind(null,n),H_:_M.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Iv(n)?Cv(n):n.Ra.set("Unknown")):(await n.ma.stop(),BE(n))}))),n.ma}function nd(n){return n.fa||(n.fa=(function(t,r,a){const o=un(t);return o.sa(),new pM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:AM.bind(null,n),r_:IM.bind(null,n),ta:TM.bind(null,n),na:CM.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await np(n)):(await n.fa.stop(),n.Ta.length>0&&(Ze(ih,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class Rv{constructor(e,t,r,a,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=o,this.deferred=new Ql,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,o){const c=Date.now()+r,u=new Rv(e,t,c,a,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new tt(Ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kv(n,e){if(hi("AsyncQueue",`${e}: ${n}`),ud(n))return new tt(Ve.UNAVAILABLE,`${e}: ${n}`);throw n}class Nf{static emptySet(e){return new Nf(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ot.comparator(t.key,r.key):(t,r)=>ot.comparator(t.key,r.key),this.keyedMap=eg(),this.sortedSet=new Hr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Nf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=r.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Nf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class k_{constructor(){this.ga=new Hr(ot.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):bt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class qf{constructor(e,t,r,a,o,c,u,h,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,a,o){const c=[];return t.forEach((u=>{c.push({type:0,doc:u})})),new qf(e,t,Nf.emptySet(t),c,r,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class kM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class PM{constructor(){this.queries=P_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=un(t),o=a.queries;a.queries=P_(),o.forEach(((c,u)=>{for(const h of u.Sa)h.onError(r)}))})(this,new tt(Ve.ABORTED,"Firestore shutting down"))}}function P_(){return new Zc((n=>HS(n)),Kx)}async function GE(n,e){const t=un(n);let r=3;const a=e.query;let o=t.queries.get(a);o?!o.ba()&&e.Da()&&(r=2):(o=new kM,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(a,!0);break;case 1:o.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const u=kv(c,`Initialization of query '${uf(e.query)}' failed`);return void e.onError(u)}t.queries.set(a,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Pv(t)}async function $E(n,e){const t=un(n),r=e.query;let a=3;const o=t.queries.get(r);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?a=e.Da()?0:1:!o.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function LM(n,e){const t=un(n);let r=!1;for(const a of e){const o=a.query,c=t.queries.get(o);if(c){for(const u of c.Sa)u.Fa(a)&&(r=!0);c.wa=a}}r&&Pv(t)}function DM(n,e,t){const r=un(n),a=r.queries.get(e);if(a)for(const o of a.Sa)o.onError(t);r.queries.delete(e)}function Pv(n){n.Ca.forEach((e=>{e.next()}))}var d2,L_;(L_=d2||(d2={})).Ma="default",L_.Cache="cache";class WE{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new qf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=qf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==d2.Cache}}class KE{constructor(e){this.key=e}}class YE{constructor(e){this.key=e}}class MM{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Sn(),this.mutatedKeys=Sn(),this.eu=GS(e),this.tu=new Nf(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new k_,a=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=a,u=!1;const h=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,f=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((g,y)=>{const w=a.get(g),b=Jg(this.query,y)?y:null,T=!!w&&this.mutatedKeys.has(w.key),S=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let j=!1;w&&b?w.data.isEqual(b.data)?T!==S&&(r.track({type:3,doc:b}),j=!0):this.su(w,b)||(r.track({type:2,doc:b}),j=!0,(h&&this.eu(b,h)>0||f&&this.eu(b,f)<0)&&(u=!0)):!w&&b?(r.track({type:0,doc:b}),j=!0):w&&!b&&(r.track({type:1,doc:w}),j=!0,(h||f)&&(u=!0)),j&&(b?(c=c.add(b),o=S?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{tu:c,iu:r,Cs:u,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,y)=>(function(b,T){const S=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bt(20277,{Rt:j})}};return S(b)-S(T)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(r),a=a??!1;const u=t&&!a?this._u():[],h=this.Xa.size===0&&this.current&&!a?1:0,f=h!==this.Za;return this.Za=h,c.length!==0||f?{snapshot:new qf(this.query,e.tu,o,c,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new k_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Sn(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new YE(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new KE(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Sn();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return qf.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Lv="SyncEngine";class OM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class FM{constructor(e){this.key=e,this.hu=!1}}class VM{constructor(e,t,r,a,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Zc((u=>HS(u)),Kx),this.Iu=new Map,this.Eu=new Set,this.du=new Hr(ot.comparator),this.Au=new Map,this.Ru=new Nv,this.Vu={},this.mu=new Map,this.fu=ah.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function UM(n,e,t=!0){const r=tA(n);let a;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.lu()):a=await XE(r,e,t,!0),a}async function BM(n,e){const t=tA(n);await XE(t,e,!0,!1)}async function XE(n,e,t,r){const a=await oM(n.localStore,Lo(e)),o=a.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let u;return r&&(u=await zM(n,e,o,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&VE(n.remoteStore,a),u}async function zM(n,e,t,r,a){n.pu=(y,w,b)=>(async function(S,j,E,L){let D=j.view.ru(E);D.Cs&&(D=await E_(S.localStore,j.query,!1).then((({documents:H})=>j.view.ru(H,D))));const O=L&&L.targetChanges.get(j.targetId),te=L&&L.targetMismatches.get(j.targetId)!=null,ae=j.view.applyChanges(D,S.isPrimaryClient,O,te);return M_(S,j.targetId,ae.au),ae.snapshot})(n,y,w,b);const o=await E_(n.localStore,e,!0),c=new MM(e,o.Qs),u=c.ru(o.documents),h=ep.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),f=c.applyChanges(u,n.isPrimaryClient,h);M_(n,t,f.au);const g=new OM(e,t,c);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function qM(n,e,t){const r=un(n),a=r.Tu.get(e),o=r.Iu.get(a.targetId);if(o.length>1)return r.Iu.set(a.targetId,o.filter((c=>!Kx(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await c2(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Av(r.remoteStore,a.targetId),h2(r,a.targetId)})).catch(hh)):(h2(r,a.targetId),await c2(r.localStore,a.targetId,!0))}async function HM(n,e){const t=un(n),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Av(t.remoteStore,r.targetId))}async function GM(n,e,t){const r=nA(n);try{const a=await(function(c,u){const h=un(c),f=vt.now(),g=u.reduce(((b,T)=>b.add(T.key)),Sn());let y,w;return h.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let T=oo(),S=Sn();return h.Ns.getEntries(b,g).next((j=>{T=j,T.forEach(((E,L)=>{L.isValidDocument()||(S=S.add(E))}))})).next((()=>h.localDocuments.getOverlayedDocuments(b,T))).next((j=>{y=j;const E=[];for(const L of u){const D=iD(L,y.get(L.key).overlayedDocument);D!=null&&E.push(new eu(L.key,D,DS(D.value.mapValue),ea.exists(!0)))}return h.mutationQueue.addMutationBatch(b,f,E,u)})).next((j=>{w=j;const E=j.applyToLocalDocumentSet(y,S);return h.documentOverlayCache.saveOverlays(b,j.batchId,E)}))})).then((()=>({batchId:w.batchId,changes:WS(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,u,h){let f=c.Vu[c.currentUser.toKey()];f||(f=new Hr(cn)),f=f.insert(u,h),c.Vu[c.currentUser.toKey()]=f})(r,a.batchId,t),await rp(r,a.changes),await np(r.remoteStore)}catch(a){const o=kv(a,"Failed to persist write");t.reject(o)}}async function QE(n,e){const t=un(n);try{const r=await sM(t.localStore,e);e.targetChanges.forEach(((a,o)=>{const c=t.Au.get(o);c&&(kt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?kt(c.hu,14607):a.removedDocuments.size>0&&(kt(c.hu,42227),c.hu=!1))})),await rp(t,r,e)}catch(r){await hh(r)}}function D_(n,e,t){const r=un(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((o,c)=>{const u=c.view.va(e);u.snapshot&&a.push(u.snapshot)})),(function(c,u){const h=un(c);h.onlineState=u;let f=!1;h.queries.forEach(((g,y)=>{for(const w of y.Sa)w.va(u)&&(f=!0)})),f&&Pv(h)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $M(n,e,t){const r=un(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),o=a&&a.key;if(o){let c=new Hr(ot.comparator);c=c.insert(o,us.newNoDocument(o,Ht.min()));const u=Sn().add(o),h=new Qx(Ht.min(),new Map,new Hr(cn),c,u);await QE(r,h),r.du=r.du.remove(o),r.Au.delete(e),Dv(r)}else await c2(r.localStore,e,!1).then((()=>h2(r,e,t))).catch(hh)}async function WM(n,e){const t=un(n),r=e.batch.batchId;try{const a=await rM(t.localStore,e);ZE(t,r,null),JE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await rp(t,a)}catch(a){await hh(a)}}async function KM(n,e,t){const r=un(n);try{const a=await(function(c,u){const h=un(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return h.mutationQueue.lookupMutationBatch(f,u).next((y=>(kt(y!==null,37113),g=y.keys(),h.mutationQueue.removeMutationBatch(f,y)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,g,u))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>h.localDocuments.getDocuments(f,g)))}))})(r.localStore,e);ZE(r,e,t),JE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await rp(r,a)}catch(a){await hh(a)}}function JE(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function ZE(n,e,t){const r=un(n);let a=r.Vu[r.currentUser.toKey()];if(a){const o=a.get(e);o&&(t?o.reject(t):o.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function h2(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||eA(n,r)}))}function eA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Av(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Dv(n))}function M_(n,e,t){for(const r of t)r instanceof KE?(n.Ru.addReference(r.key,e),YM(n,r)):r instanceof YE?(Ze(Lv,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||eA(n,r.key)):bt(19791,{wu:r})}function YM(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Ze(Lv,"New document in limbo: "+t),n.Eu.add(r),Dv(n))}function Dv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ot(tr.fromString(e)),r=n.fu.next();n.Au.set(r,new FM(t)),n.du=n.du.insert(t,r),VE(n.remoteStore,new Bc(Lo(Wx(t.path)),r,"TargetPurposeLimboResolution",Po.ce))}}async function rp(n,e,t){const r=un(n),a=[],o=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,h)=>{c.push(r.pu(h,e,t).then((f=>{if((f||t)&&r.isPrimaryClient){const g=f?!f.fromCache:t?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){a.push(f);const g=Sv.As(h.targetId,f);o.push(g)}})))})),await Promise.all(c),r.Pu.H_(a),await(async function(h,f){const g=un(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>Te.forEach(f,(w=>Te.forEach(w.Es,(b=>g.persistence.referenceDelegate.addReference(y,w.targetId,b))).next((()=>Te.forEach(w.ds,(b=>g.persistence.referenceDelegate.removeReference(y,w.targetId,b)))))))))}catch(y){if(!ud(y))throw y;Ze(Ev,"Failed to update sequence numbers: "+y)}for(const y of f){const w=y.targetId;if(!y.fromCache){const b=g.Ms.get(w),T=b.snapshotVersion,S=b.withLastLimboFreeSnapshotVersion(T);g.Ms=g.Ms.insert(w,S)}}})(r.localStore,o))}async function XM(n,e){const t=un(n);if(!t.currentUser.isEqual(e)){Ze(Lv,"User change. New user:",e.toKey());const r=await LE(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((u=>{u.forEach((h=>{h.reject(new tt(Ve.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await rp(t,r.Ls)}}function QM(n,e){const t=un(n),r=t.Au.get(e);if(r&&r.hu)return Sn().add(r.key);{let a=Sn();const o=t.Iu.get(e);if(!o)return a;for(const c of o){const u=t.Tu.get(c);a=a.unionWith(u.view.nu)}return a}}function tA(n){const e=un(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=QE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$M.bind(null,e),e.Pu.H_=LM.bind(null,e.eventManager),e.Pu.yu=DM.bind(null,e.eventManager),e}function nA(n){const e=un(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KM.bind(null,e),e}class Og{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ty(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return PE(this.persistence,new kE,e.initialUser,this.serializer)}Cu(e){return new jv(ey.mi,this.serializer)}Du(e){return new ME}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Og.provider={build:()=>new Og};class JM extends Og{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){kt(this.persistence.referenceDelegate instanceof xx,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new AE(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Xa.withCacheSize(this.cacheSizeBytes):Xa.DEFAULT;return new jv((r=>xx.mi(r,t)),this.serializer)}}class ZM extends Og{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await nA(this.xu.syncEngine),await np(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return PE(this.persistence,new kE,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new AE(r,e.asyncQueue,t)}Mu(e,t){const r=new a7(t,this.persistence);return new s7(e.asyncQueue,r)}Cu(e){const t=ZD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Xa.withCacheSize(this.cacheSizeBytes):Xa.DEFAULT;return new _v(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,mM(),B0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new ME}}class bx{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>D_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XM.bind(null,this.syncEngine),await RM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new PM})()}createDatastore(e){const t=ty(e.databaseInfo.databaseId),r=(function(o){return new fM(o)})(e.databaseInfo);return(function(o,c,u,h){return new yM(o,c,u,h)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,o,c,u){return new vM(r,a,o,c,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>D_(this.syncEngine,t,0)),(function(){return C_.v()?new C_:new cM})())}createSyncEngine(e,t){return(function(a,o,c,u,h,f,g){const y=new VM(a,o,c,u,h,f);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=un(t);Ze(ih,"RemoteStore shutting down."),r.Ea.add(5),await tp(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}bx.provider={build:()=>new bx};class rA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const rd="FirestoreClient";class e9{constructor(e,t,r,a,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=La.UNAUTHENTICATED,this.clientId=rv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async c=>{Ze(rd,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(Ze(rd,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ql;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=kv(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Zb(n,e){n.asyncQueue.verifyOperationInProgress(),Ze(rd,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async a=>{r.isEqual(a)||(await LE(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function O_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await t9(n);Ze(rd,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>R_(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,a)=>R_(e.remoteStore,a))),n._onlineComponents=e}async function t9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ze(rd,"Using user provided OfflineComponentProvider");try{await Zb(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Ve.FAILED_PRECONDITION||a.code===Ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;eh("Error using user provided cache. Falling back to memory cache: "+t),await Zb(n,new Og)}}else Ze(rd,"Using default OfflineComponentProvider"),await Zb(n,new JM(void 0));return n._offlineComponents}async function sA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ze(rd,"Using user provided OnlineComponentProvider"),await O_(n,n._uninitializedComponentsProvider._online)):(Ze(rd,"Using default OnlineComponentProvider"),await O_(n,new bx))),n._onlineComponents}function n9(n){return sA(n).then((e=>e.syncEngine))}async function aA(n){const e=await sA(n),t=e.eventManager;return t.onListen=UM.bind(null,e.syncEngine),t.onUnlisten=qM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=BM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=HM.bind(null,e.syncEngine),t}function r9(n,e,t={}){const r=new Ql;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,h,f){const g=new rA({next:w=>{g.Nu(),c.enqueueAndForget((()=>$E(o,y)));const b=w.docs.has(u);!b&&w.fromCache?f.reject(new tt(Ve.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&w.fromCache&&h&&h.source==="server"?f.reject(new tt(Ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(w)},error:w=>f.reject(w)}),y=new WE(Wx(u.path),g,{includeMetadataChanges:!0,qa:!0});return GE(o,y)})(await aA(n),n.asyncQueue,e,t,r))),r.promise}function iA(n,e,t={}){const r=new Ql;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,h,f){const g=new rA({next:w=>{g.Nu(),c.enqueueAndForget((()=>$E(o,y))),w.fromCache&&h.source==="server"?f.reject(new tt(Ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(w)},error:w=>f.reject(w)}),y=new WE(u,g,{includeMetadataChanges:!0,qa:!0});return GE(o,y)})(await aA(n),n.asyncQueue,e,t,r))),r.promise}function oA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const F_=new Map;const lA="firestore.googleapis.com",V_=!0;class U_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new tt(Ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lA,this.ssl=V_}else this.host=e.host,this.ssl=e.ssl??V_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<MD)throw new tt(Ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}e7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new tt(Ve.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new tt(Ve.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new tt(Ve.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ry{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new U_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new tt(Ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new tt(Ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new U_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new HL;switch(r.type){case"firstParty":return new KL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new tt(Ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=F_.get(t);r&&(Ze("ComponentProvider","Removing Datastore"),F_.delete(t),r.terminate())})(this),Promise.resolve()}}function s9(n,e,t,r={}){n=gi(n,ry);const a=ld(e),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;a&&(q2(`https://${u}`),H2("Firestore",!0)),o.host!==lA&&o.host!==u&&eh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:a,emulatorOptions:r};if(!Yd(h,c)&&(n._setSettings(h),r.mockUserToken)){let f,g;if(typeof r.mockUserToken=="string")f=r.mockUserToken,g=La.MOCK_USER;else{f=o3(r.mockUserToken,n._app?.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new tt(Ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new La(y)}n._authCredentials=new GL(new lS(f,g))}}class hd{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hd(this.firestore,e,this._query)}}class js{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new js(this.firestore,e,this._key)}toJSON(){return{type:js._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Yg(t,js._jsonSchema))return new js(e,r||null,new ot(tr.fromString(t.referencePath)))}}js._jsonSchemaVersion="firestore/documentReference/1.0",js._jsonSchema={type:Fs("string",js._jsonSchemaVersion),referencePath:Fs("string")};class Qu extends hd{constructor(e,t,r){super(e,t,Wx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new js(this.firestore,null,new ot(e))}withConverter(e){return new Qu(this.firestore,e,this._path)}}function Zt(n,e,...t){if(n=Ar(n),uS("collection","path",e),n instanceof ry){const r=tr.fromString(e,...t);return Ij(r),new Qu(n,null,r)}{if(!(n instanceof js||n instanceof Qu))throw new tt(Ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tr.fromString(e,...t));return Ij(r),new Qu(n.firestore,null,r)}}function At(n,e,...t){if(n=Ar(n),arguments.length===1&&(e=rv.newId()),uS("doc","path",e),n instanceof ry){const r=tr.fromString(e,...t);return Cj(r),new js(n,null,new ot(r))}{if(!(n instanceof js||n instanceof Qu))throw new tt(Ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tr.fromString(e,...t));return Cj(r),new js(n.firestore,n instanceof Qu?n.converter:null,new ot(r))}}const B_="AsyncQueue";class z_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new OE(this,"async_queue_retry"),this._c=()=>{const r=B0();r&&Ze(B_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=B0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=B0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ql;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ud(e))throw e;Ze(B_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,hi("INTERNAL UNHANDLED ERROR: ",q_(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Rv.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(a),a}uc(){this.nc&&bt(47125,{Pc:q_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function q_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class sc extends ry{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new z_,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new z_(e),this._firestoreClient=void 0,await e}}}function a9(n,e){const t=typeof n=="object"?n:W2(),r=typeof n=="string"?n:cx,a=Dx(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const o=s3("firestore");o&&s9(a,...o)}return a}function sp(n){if(n._terminated)throw new tt(Ve.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||cA(n),n._firestoreClient}function cA(n){const e=n._freezeSettings(),t=(function(a,o,c,u){return new L7(a,o,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,oA(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new e9(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const o=a?._online.build();return{_offline:a?._offline.build(o),_online:o}})(n._componentsProvider))}function i9(n,e){eh("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return o9(n,bx.provider,{build:r=>new ZM(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function o9(n,e,t){if((n=gi(n,sc))._firestoreClient||n._terminated)throw new tt(Ve.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new tt(Ve.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},cA(n)}class ko{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ko(Vs.fromBase64String(e))}catch(t){throw new tt(Ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ko(Vs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ko._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yg(e,ko._jsonSchema))return ko.fromBase64String(e.bytes)}}ko._jsonSchemaVersion="firestore/bytes/1.0",ko._jsonSchema={type:Fs("string",ko._jsonSchemaVersion),bytes:Fs("string")};class ap{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new tt(Ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sy{constructor(e){this._methodName=e}}class Jl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new tt(Ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new tt(Ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return cn(this._lat,e._lat)||cn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Jl._jsonSchemaVersion}}static fromJSON(e){if(Yg(e,Jl._jsonSchema))return new Jl(e.latitude,e.longitude)}}Jl._jsonSchemaVersion="firestore/geoPoint/1.0",Jl._jsonSchema={type:Fs("string",Jl._jsonSchemaVersion),latitude:Fs("number"),longitude:Fs("number")};class Zl{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==a[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yg(e,Zl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Zl(e.vectorValues);throw new tt(Ve.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zl._jsonSchemaVersion="firestore/vectorValue/1.0",Zl._jsonSchema={type:Fs("string",Zl._jsonSchemaVersion),vectorValues:Fs("object")};const l9=/^__.*__$/;class c9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new eu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zf(e,this.data,t,this.fieldTransforms)}}class uA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new eu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bt(40011,{Ac:n})}}class Mv{constructor(e,t,r,a,o,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Mv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vx(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dA(this.Ac)&&l9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class u9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ty(e)}Cc(e,t,r,a=!1){return new Mv({Ac:e,methodName:t,Dc:r,path:Qr.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ip(n){const e=n._freezeSettings(),t=ty(n._databaseId);return new u9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ov(n,e,t,r,a,o={}){const c=n.Cc(o.merge||o.mergeFields?2:0,e,t,a);Vv("Data must be an object, but it was:",c,r);const u=mA(r,c);let h,f;if(o.merge)h=new Fi(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const w=f2(e,y,t);if(!c.contains(w))throw new tt(Ve.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);pA(g,w)||g.push(w)}h=new Fi(g),f=c.fieldTransforms.filter((y=>h.covers(y.field)))}else h=null,f=c.fieldTransforms;return new c9(new Qa(u),h,f)}class ay extends sy{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ay}}class Fv extends sy{_toFieldTransform(e){return new eE(e.path,new Vf)}isEqual(e){return e instanceof Fv}}function hA(n,e,t,r){const a=n.Cc(1,e,t);Vv("Data must be an object, but it was:",a,r);const o=[],c=Qa.empty();dd(r,((h,f)=>{const g=Uv(e,h,t);f=Ar(f);const y=a.yc(g);if(f instanceof ay)o.push(g);else{const w=op(f,y);w!=null&&(o.push(g),c.set(g,w))}}));const u=new Fi(o);return new uA(c,u,a.fieldTransforms)}function fA(n,e,t,r,a,o){const c=n.Cc(1,e,t),u=[f2(e,r,t)],h=[a];if(o.length%2!=0)throw new tt(Ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)u.push(f2(e,o[w])),h.push(o[w+1]);const f=[],g=Qa.empty();for(let w=u.length-1;w>=0;--w)if(!pA(f,u[w])){const b=u[w];let T=h[w];T=Ar(T);const S=c.yc(b);if(T instanceof ay)f.push(b);else{const j=op(T,S);j!=null&&(f.push(b),g.set(b,j))}}const y=new Fi(f);return new uA(g,y,c.fieldTransforms)}function d9(n,e,t,r=!1){return op(t,n.Cc(r?4:3,e))}function op(n,e){if(gA(n=Ar(n)))return Vv("Unsupported field value:",e,n),mA(n,e);if(n instanceof sy)return(function(r,a){if(!dA(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(a);o&&a.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const o=[];let c=0;for(const u of r){let h=op(u,a.wc(c));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),c++}return{arrayValue:{values:o}}})(n,e)}return(function(r,a){if((r=Ar(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return eD(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=vt.fromDate(r);return{timestampValue:zf(a.serializer,o)}}if(r instanceof vt){const o=new vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zf(a.serializer,o)}}if(r instanceof Jl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ko)return{bytesValue:oE(a.serializer,r._byteString)};if(r instanceof js){const o=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:bv(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Zl)return(function(c,u){return{mapValue:{fields:{[dv]:{stringValue:hv},[Df]:{arrayValue:{values:c.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return mv(u.serializer,f)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${Vx(r)}`)})(n,e)}function mA(n,e){const t={};return ES(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):dd(n,((r,a)=>{const o=op(a,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function gA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof vt||n instanceof Jl||n instanceof ko||n instanceof js||n instanceof sy||n instanceof Zl)}function Vv(n,e,t){if(!gA(t)||!dS(t)){const r=Vx(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function f2(n,e,t){if((e=Ar(e))instanceof ap)return e._internalPath;if(typeof e=="string")return Uv(n,e);throw vx("Field path arguments must be of type string or ",n,!1,void 0,t)}const h9=new RegExp("[~\\*/\\[\\]]");function Uv(n,e,t){if(e.search(h9)>=0)throw vx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ap(...e.split("."))._internalPath}catch{throw vx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vx(n,e,t,r,a){const o=r&&!r.isEmpty(),c=a!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||c)&&(h+=" (found",o&&(h+=` in field ${r}`),c&&(h+=` in document ${a}`),h+=")"),new tt(Ve.INVALID_ARGUMENT,u+n+h)}function pA(n,e){return n.some((t=>t.isEqual(e)))}class xA{constructor(e,t,r,a,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new js(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new f9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(iy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class f9 extends xA{data(){return super.data()}}function iy(n,e){return typeof e=="string"?Uv(n,e):e instanceof ap?e._internalPath:e._delegate._internalPath}function m9(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new tt(Ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bv{}class yA extends Bv{}function Es(n,e,...t){let r=[];e instanceof Bv&&r.push(e),r=r.concat(t),(function(o){const c=o.filter((h=>h instanceof zv)).length,u=o.filter((h=>h instanceof oy)).length;if(c>1||c>0&&u>0)throw new tt(Ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)n=a._apply(n);return n}class oy extends yA{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new oy(e,t,r)}_apply(e){const t=this._parse(e);return bA(e._query,t),new hd(e.firestore,e.converter,e2(e._query,t))}_parse(e){const t=ip(e.firestore);return(function(o,c,u,h,f,g,y){let w;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new tt(Ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){G_(y,g);const T=[];for(const S of y)T.push(H_(h,o,S));w={arrayValue:{values:T}}}else w=H_(h,o,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||G_(y,g),w=d9(u,c,y,g==="in"||g==="not-in");return Dn.create(f,g,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Za(n,e,t){const r=e,a=iy("where",n);return oy._create(a,r,t)}class zv extends Bv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zv(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:ur.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,o){let c=a;const u=o.getFlattenedFilters();for(const h of u)bA(c,h),c=e2(c,h)})(e._query,t),new hd(e.firestore,e.converter,e2(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qv extends yA{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new qv(e,t)}_apply(e){const t=(function(a,o,c){if(a.startAt!==null)throw new tt(Ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new tt(Ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dg(o,c)})(e._query,this._field,this._direction);return new hd(e.firestore,e.converter,(function(a,o){const c=a.explicitOrderBy.concat([o]);return new Jf(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function ac(n,e="asc"){const t=e,r=iy("orderBy",n);return qv._create(r,t)}function H_(n,e,t){if(typeof(t=Ar(t))=="string"){if(t==="")throw new tt(Ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qS(e)&&t.indexOf("/")!==-1)throw new tt(Ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tr.fromString(t));if(!ot.isDocumentKey(r))throw new tt(Ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pg(n,new ot(r))}if(t instanceof js)return Pg(n,t._key);throw new tt(Ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vx(t)}.`)}function G_(n,e){if(!Array.isArray(n)||n.length===0)throw new tt(Ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bA(n,e){const t=(function(a,o){for(const c of a)for(const u of c.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new tt(Ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new tt(Ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class g9{convertValue(e,t="none"){switch(ed(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Kc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw bt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return dd(e,((a,o)=>{r[a]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[Df].arrayValue?.values?.map((r=>qr(r.doubleValue)));return new Zl(t)}convertGeoPoint(e){return new Jl(qr(e.latitude),qr(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Gx(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Rg(e));default:return null}}convertTimestamp(e){const t=Wc(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tr.fromString(e);kt(xE(r),9688,{name:e});const a=new th(r.get(1),r.get(3)),o=new ot(r.popFirst(5));return a.isEqual(t)||hi(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function Hv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class rg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hd extends xA{constructor(e,t,r,a,o,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new z0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(iy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new tt(Ve.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Hd._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Hd._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hd._jsonSchema={type:Fs("string",Hd._jsonSchemaVersion),bundleSource:Fs("string","DocumentSnapshot"),bundleName:Fs("string"),bundle:Fs("string")};class z0 extends Hd{data(e={}){return super.data(e)}}class Gd{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new rg(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new z0(this._firestore,this._userDataWriter,r.key,r,new rg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new tt(Ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,o){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((u=>{const h=new z0(a._firestore,a._userDataWriter,u.doc.key,u.doc,new rg(a._snapshot.mutatedKeys.has(u.doc.key),a._snapshot.fromCache),a.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const h=new z0(a._firestore,a._userDataWriter,u.doc.key,u.doc,new rg(a._snapshot.mutatedKeys.has(u.doc.key),a._snapshot.fromCache),a.query.converter);let f=-1,g=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:p9(u.type),doc:h,oldIndex:f,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new tt(Ve.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Gd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),a.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function p9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bt(61501,{type:n})}}function Us(n){n=gi(n,js);const e=gi(n.firestore,sc);return r9(sp(e),n._key).then((t=>y9(e,n,t)))}Gd._jsonSchemaVersion="firestore/querySnapshot/1.0",Gd._jsonSchema={type:Fs("string",Gd._jsonSchemaVersion),bundleSource:Fs("string","QuerySnapshot"),bundleName:Fs("string"),bundle:Fs("string")};class Gv extends g9{constructor(e){super(),this.firestore=e}convertBytes(e){return new ko(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new js(this.firestore,null,t)}}function fs(n){n=gi(n,hd);const e=gi(n.firestore,sc),t=sp(e),r=new Gv(e);return m9(n._query),iA(t,n._query).then((a=>new Gd(e,r,n,a)))}function x9(n){n=gi(n,hd);const e=gi(n.firestore,sc),t=sp(e),r=new Gv(e);return iA(t,n._query,{source:"server"}).then((a=>new Gd(e,r,n,a)))}function oh(n,e,t){n=gi(n,js);const r=gi(n.firestore,sc),a=Hv(n.converter,e,t);return lp(r,[Ov(ip(r),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,ea.none())])}function Vo(n,e,t,...r){n=gi(n,js);const a=gi(n.firestore,sc),o=ip(a);let c;return c=typeof(e=Ar(e))=="string"||e instanceof ap?fA(o,"updateDoc",n._key,e,t,r):hA(o,"updateDoc",n._key,e),lp(a,[c.toMutation(n._key,ea.exists(!0))])}function ml(n){return lp(gi(n.firestore,sc),[new Zg(n._key,ea.none())])}function bs(n,e){const t=gi(n.firestore,sc),r=At(n),a=Hv(n.converter,e);return lp(t,[Ov(ip(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,ea.exists(!1))]).then((()=>r))}function lp(n,e){return(function(r,a){const o=new Ql;return r.asyncQueue.enqueueAndForget((async()=>GM(await n9(r),a,o))),o.promise})(sp(n),e)}function y9(n,e,t){const r=t.docs.get(e._key),a=new Gv(n);return new Hd(n,a,e._key,r,new rg(t.hasPendingWrites,t.fromCache),e.converter)}class b9{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ip(e)}set(e,t,r){this._verifyNotCommitted();const a=e1(e,this._firestore),o=Hv(a.converter,t,r),c=Ov(this._dataReader,"WriteBatch.set",a._key,o,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,ea.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const o=e1(e,this._firestore);let c;return c=typeof(t=Ar(t))=="string"||t instanceof ap?fA(this._dataReader,"WriteBatch.update",o._key,t,r,a):hA(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(c.toMutation(o._key,ea.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=e1(e,this._firestore);return this._mutations=this._mutations.concat(new Zg(t._key,ea.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new tt(Ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function e1(n,e){if((n=Ar(n)).firestore!==e)throw new tt(Ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function Yt(){return new Fv("serverTimestamp")}function ly(n){return sp(n=gi(n,sc)),new b9(n,(e=>lp(n,e)))}(function(e,t=!0){(function(a){Qf=a})(dh),Xd(new Zu("firestore",((r,{instanceIdentifier:a,options:o})=>{const c=r.getProvider("app").getImmediate(),u=new sc(new $L(r.getProvider("auth-internal")),new YL(c,r.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new tt(Ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new th(f.options.projectId,g)})(c,a),c);return o={useFetchStreams:t,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Kl(Sj,Ej,e),Kl(Sj,Ej,"esm2020")})();var v9="firebase",w9="12.6.0";Kl(v9,w9,"app");const vA="firebasestorage.googleapis.com",wA="storageBucket",N9=120*1e3,j9=600*1e3,_9=1e3;class Zr extends rc{constructor(e,t,r=0){super(t1(e),`Firebase Storage: ${t} (${t1(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return t1(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Lr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Lr||(Lr={}));function t1(n){return"storage/"+n}function $v(){const n="An unknown error occurred, please check the error payload for server response.";return new Zr(Lr.UNKNOWN,n)}function S9(n){return new Zr(Lr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function E9(n){return new Zr(Lr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function A9(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Zr(Lr.UNAUTHENTICATED,n)}function T9(){return new Zr(Lr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function C9(n){return new Zr(Lr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function NA(){return new Zr(Lr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function jA(){return new Zr(Lr.CANCELED,"User canceled the upload/download.")}function I9(n){return new Zr(Lr.INVALID_URL,"Invalid URL '"+n+"'.")}function R9(n){return new Zr(Lr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function k9(){return new Zr(Lr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+wA+"' property when initializing the app?")}function _A(){return new Zr(Lr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function P9(){return new Zr(Lr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function L9(){return new Zr(Lr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function D9(n){return new Zr(Lr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function m2(n){return new Zr(Lr.INVALID_ARGUMENT,n)}function SA(){return new Zr(Lr.APP_DELETED,"The Firebase app was deleted.")}function M9(n){return new Zr(Lr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function mg(n,e){return new Zr(Lr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Km(n){throw new Zr(Lr.INTERNAL_ERROR,"Internal error: "+n)}class lo{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=lo.makeFromUrl(e,t)}catch{return new lo(e,"")}if(r.path==="")return r;throw R9(e)}static makeFromUrl(e,t){let r=null;const a="([A-Za-z0-9.\\-_]+)";function o(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+a+c,"i"),h={bucket:1,path:3};function f(O){O.path_=decodeURIComponent(O.path)}const g="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",b=new RegExp(`^https?://${y}/${g}/b/${a}/o${w}`,"i"),T={bucket:1,path:3},S=t===vA?"(?:storage.googleapis.com|storage.cloud.google.com)":t,j="([^?#]*)",E=new RegExp(`^https?://${S}/${a}/${j}`,"i"),D=[{regex:u,indices:h,postModify:o},{regex:b,indices:T,postModify:f},{regex:E,indices:{bucket:1,path:2},postModify:f}];for(let O=0;O<D.length;O++){const te=D[O],ae=te.regex.exec(e);if(ae){const H=ae[te.indices.bucket];let V=ae[te.indices.path];V||(V=""),r=new lo(H,V),te.postModify(r);break}}if(r==null)throw I9(e);return r}}class O9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function F9(n,e,t){let r=1,a=null,o=null,c=!1,u=0;function h(){return u===2}let f=!1;function g(...j){f||(f=!0,e.apply(null,j))}function y(j){a=setTimeout(()=>{a=null,n(b,h())},j)}function w(){o&&clearTimeout(o)}function b(j,...E){if(f){w();return}if(j){w(),g.call(null,j,...E);return}if(h()||c){w(),g.call(null,j,...E);return}r<64&&(r*=2);let D;u===1?(u=2,D=0):D=(r+Math.random())*1e3,y(D)}let T=!1;function S(j){T||(T=!0,w(),!f&&(a!==null?(j||(u=2),clearTimeout(a),y(0)):j||(u=1)))}return y(0),o=setTimeout(()=>{c=!0,S(!0)},t),S}function V9(n){n(!1)}function U9(n){return n!==void 0}function B9(n){return typeof n=="function"}function z9(n){return typeof n=="object"&&!Array.isArray(n)}function cy(n){return typeof n=="string"||n instanceof String}function $_(n){return Wv()&&n instanceof Blob}function Wv(){return typeof Blob<"u"}function W_(n,e,t,r){if(r<e)throw m2(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw m2(`Invalid value for '${n}'. Expected ${t} or less.`)}function tm(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function EA(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const a=e(r)+"="+e(n[r]);t=t+a+"&"}return t=t.slice(0,-1),t}var $d;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})($d||($d={}));function AA(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||a||o}class q9{constructor(e,t,r,a,o,c,u,h,f,g,y,w=!0,b=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=a,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=y,this.retry=w,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,S)=>{this.resolve_=T,this.reject_=S,this.start_()})}start_(){const e=(r,a)=>{if(a){r(!1,new f0(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const u=o.getErrorCode()===$d.NO_ERROR,h=o.getStatus();if(!u||AA(h,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===$d.ABORT;r(!1,new f0(!1,null,g));return}const f=this.successCodes_.indexOf(h)!==-1;r(!0,new f0(f,o))})},t=(r,a)=>{const o=this.resolve_,c=this.reject_,u=a.connection;if(a.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());U9(h)?o(h):o()}catch(h){c(h)}else if(u!==null){const h=$v();h.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,h)):c(h)}else if(a.canceled){const h=this.appDelete_?SA():jA();c(h)}else{const h=NA();c(h)}};this.canceled_?t(!1,new f0(!1,null,!0)):this.backoffId_=F9(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&V9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class f0{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function H9(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function G9(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function $9(n,e){e&&(n["X-Firebase-GMPID"]=e)}function W9(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function K9(n,e,t,r,a,o,c=!0,u=!1){const h=EA(n.urlParams),f=n.url+h,g=Object.assign({},n.headers);return $9(g,e),H9(g,t),G9(g,o),W9(g,r),new q9(f,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,c,u)}function Y9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function X9(...n){const e=Y9();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Wv())return new Blob(n);throw new Zr(Lr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Q9(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function J9(n){if(typeof atob>"u")throw D9("base-64");return atob(n)}const Gl={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class n1{constructor(e,t){this.data=e,this.contentType=t||null}}function Z9(n,e){switch(n){case Gl.RAW:return new n1(TA(e));case Gl.BASE64:case Gl.BASE64URL:return new n1(CA(n,e));case Gl.DATA_URL:return new n1(tO(e),nO(e))}throw $v()}function TA(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,c=n.charCodeAt(++t);r=65536|(o&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function eO(n){let e;try{e=decodeURIComponent(n)}catch{throw mg(Gl.DATA_URL,"Malformed data URL.")}return TA(e)}function CA(n,e){switch(n){case Gl.BASE64:{const a=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(a||o)throw mg(n,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Gl.BASE64URL:{const a=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(a||o)throw mg(n,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=J9(e)}catch(a){throw a.message.includes("polyfill")?a:mg(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r}class IA{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw mg(Gl.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=rO(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function tO(n){const e=new IA(n);return e.base64?CA(Gl.BASE64,e.rest):eO(e.rest)}function nO(n){return new IA(n).contentType}function rO(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}class Fc{constructor(e,t){let r=0,a="";$_(e)?(this.data_=e,r=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if($_(this.data_)){const r=this.data_,a=Q9(r,e,t);return a===null?null:new Fc(a)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Fc(r,!0)}}static getBlob(...e){if(Wv()){const t=e.map(r=>r instanceof Fc?r.data_:r);return new Fc(X9.apply(null,t))}else{const t=e.map(c=>cy(c)?Z9(Gl.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const a=new Uint8Array(r);let o=0;return t.forEach(c=>{for(let u=0;u<c.length;u++)a[o++]=c[u]}),new Fc(a,!0)}}uploadData(){return this.data_}}function RA(n){let e;try{e=JSON.parse(n)}catch{return null}return z9(e)?e:null}function sO(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function aO(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function kA(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function iO(n,e){return e}class ui{constructor(e,t,r,a){this.server=e,this.local=t||e,this.writable=!!r,this.xform=a||iO}}let m0=null;function oO(n){return!cy(n)||n.length<2?n:kA(n)}function Kv(){if(m0)return m0;const n=[];n.push(new ui("bucket")),n.push(new ui("generation")),n.push(new ui("metageneration")),n.push(new ui("name","fullPath",!0));function e(o,c){return oO(c)}const t=new ui("name");t.xform=e,n.push(t);function r(o,c){return c!==void 0?Number(c):c}const a=new ui("size");return a.xform=r,n.push(a),n.push(new ui("timeCreated")),n.push(new ui("updated")),n.push(new ui("md5Hash",null,!0)),n.push(new ui("cacheControl",null,!0)),n.push(new ui("contentDisposition",null,!0)),n.push(new ui("contentEncoding",null,!0)),n.push(new ui("contentLanguage",null,!0)),n.push(new ui("contentType",null,!0)),n.push(new ui("metadata","customMetadata",!0)),m0=n,m0}function lO(n,e){function t(){const r=n.bucket,a=n.fullPath,o=new lo(r,a);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function cO(n,e,t){const r={};r.type="file";const a=t.length;for(let o=0;o<a;o++){const c=t[o];r[c.local]=c.xform(r,e[c.server])}return lO(r,n),r}function PA(n,e,t){const r=RA(e);return r===null?null:cO(n,r,t)}function uO(n,e,t,r){const a=RA(e);if(a===null||!cy(a.downloadTokens))return null;const o=a.downloadTokens;if(o.length===0)return null;const c=encodeURIComponent;return o.split(",").map(f=>{const g=n.bucket,y=n.fullPath,w="/b/"+c(g)+"/o/"+c(y),b=tm(w,t,r),T=EA({alt:"media",token:f});return b+T})[0]}function LA(n,e){const t={},r=e.length;for(let a=0;a<r;a++){const o=e[a];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class mh{constructor(e,t,r,a){this.url=e,this.method=t,this.handler=r,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Hc(n){if(!n)throw $v()}function Yv(n,e){function t(r,a){const o=PA(n,a,e);return Hc(o!==null),o}return t}function dO(n,e){function t(r,a){const o=PA(n,a,e);return Hc(o!==null),uO(o,a,n.host,n._protocol)}return t}function cp(n){function e(t,r){let a;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?a=T9():a=A9():t.getStatus()===402?a=E9(n.bucket):t.getStatus()===403?a=C9(n.path):a=r,a.status=t.getStatus(),a.serverResponse=r.serverResponse,a}return e}function Xv(n){const e=cp(n);function t(r,a){let o=e(r,a);return r.getStatus()===404&&(o=S9(n.path)),o.serverResponse=a.serverResponse,o}return t}function hO(n,e,t){const r=e.fullServerUrl(),a=tm(r,n.host,n._protocol),o="GET",c=n.maxOperationRetryTime,u=new mh(a,o,Yv(n,t),c);return u.errorHandler=Xv(e),u}function fO(n,e,t){const r=e.fullServerUrl(),a=tm(r,n.host,n._protocol),o="GET",c=n.maxOperationRetryTime,u=new mh(a,o,dO(n,t),c);return u.errorHandler=Xv(e),u}function mO(n,e){const t=e.fullServerUrl(),r=tm(t,n.host,n._protocol),a="DELETE",o=n.maxOperationRetryTime;function c(h,f){}const u=new mh(r,a,c,o);return u.successCodes=[200,204],u.errorHandler=Xv(e),u}function gO(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function DA(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=gO(null,e)),r}function MA(n,e,t,r,a){const o=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function u(){let D="";for(let O=0;O<2;O++)D=D+Math.random().toString().slice(2);return D}const h=u();c["Content-Type"]="multipart/related; boundary="+h;const f=DA(e,r,a),g=LA(f,t),y="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+h+`\r
Content-Type: `+f.contentType+`\r
\r
`,w=`\r
--`+h+"--",b=Fc.getBlob(y,r,w);if(b===null)throw _A();const T={name:f.fullPath},S=tm(o,n.host,n._protocol),j="POST",E=n.maxUploadRetryTime,L=new mh(S,j,Yv(n,t),E);return L.urlParams=T,L.headers=c,L.body=b.uploadData(),L.errorHandler=cp(e),L}class wx{constructor(e,t,r,a){this.current=e,this.total=t,this.finalized=!!r,this.metadata=a||null}}function Qv(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Hc(!1)}return Hc(!!t&&(e||["active"]).indexOf(t)!==-1),t}function pO(n,e,t,r,a){const o=e.bucketOnlyServerUrl(),c=DA(e,r,a),u={name:c.fullPath},h=tm(o,n.host,n._protocol),f="POST",g={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},y=LA(c,t),w=n.maxUploadRetryTime;function b(S){Qv(S);let j;try{j=S.getResponseHeader("X-Goog-Upload-URL")}catch{Hc(!1)}return Hc(cy(j)),j}const T=new mh(h,f,b,w);return T.urlParams=u,T.headers=g,T.body=y,T.errorHandler=cp(e),T}function xO(n,e,t,r){const a={"X-Goog-Upload-Command":"query"};function o(f){const g=Qv(f,["active","final"]);let y=null;try{y=f.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Hc(!1)}y||Hc(!1);const w=Number(y);return Hc(!isNaN(w)),new wx(w,r.size(),g==="final")}const c="POST",u=n.maxUploadRetryTime,h=new mh(t,c,o,u);return h.headers=a,h.errorHandler=cp(e),h}const K_=256*1024;function yO(n,e,t,r,a,o,c,u){const h=new wx(0,0);if(c?(h.current=c.current,h.total=c.total):(h.current=0,h.total=r.size()),r.size()!==h.total)throw P9();const f=h.total-h.current;let g=f;a>0&&(g=Math.min(g,a));const y=h.current,w=y+g;let b="";g===0?b="finalize":f===g?b="upload, finalize":b="upload";const T={"X-Goog-Upload-Command":b,"X-Goog-Upload-Offset":`${h.current}`},S=r.slice(y,w);if(S===null)throw _A();function j(O,te){const ae=Qv(O,["active","final"]),H=h.current+g,V=r.size();let k;return ae==="final"?k=Yv(e,o)(O,te):k=null,new wx(H,V,ae==="final",k)}const E="POST",L=e.maxUploadRetryTime,D=new mh(t,E,j,L);return D.headers=T,D.body=S.uploadData(),D.progressCallback=u||null,D.errorHandler=cp(n),D}const Oi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function r1(n){switch(n){case"running":case"pausing":case"canceling":return Oi.RUNNING;case"paused":return Oi.PAUSED;case"success":return Oi.SUCCESS;case"canceled":return Oi.CANCELED;case"error":return Oi.ERROR;default:return Oi.ERROR}}class bO{constructor(e,t,r){if(B9(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function rf(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class vO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$d.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$d.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$d.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,a,o){if(this.sent_)throw Km("cannot .send() more than once");if(ld(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Km("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Km("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Km("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Km("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class wO extends vO{initXhr(){this.xhr_.responseType="text"}}function zu(){return new wO}class NO{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Kv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(Lr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(AA(a.status,[]))if(o)a=NA();else{this.sleepTime=Math.max(this.sleepTime*2,_9),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(Lr.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,o)=>{this._resolve=a,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const r=pO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(r,zu,e,t);this._request=a,a.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const a=xO(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(a,zu,t,r);this._request=o,o.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=K_*this._chunkMultiplier,t=new wx(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((a,o)=>{let c;try{c=yO(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(h){this._error=h,this._transition("error");return}const u=this._ref.storage._makeRequest(c,zu,a,o,!1);this._request=u,u.getPromise().then(h=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(h.current),h.finalized?(this._metadata=h.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){K_*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=hO(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(r,zu,e,t);this._request=a,a.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=MA(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(r,zu,e,t);this._request=a,a.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=jA(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=r1(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,a){const o=new bO(t||void 0,r||void 0,a||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(r1(this._state)){case Oi.SUCCESS:rf(this._resolve.bind(null,this.snapshot))();break;case Oi.CANCELED:case Oi.ERROR:const t=this._reject;rf(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(r1(this._state)){case Oi.RUNNING:case Oi.PAUSED:e.next&&rf(e.next.bind(e,this.snapshot))();break;case Oi.SUCCESS:e.complete&&rf(e.complete.bind(e))();break;case Oi.CANCELED:case Oi.ERROR:e.error&&rf(e.error.bind(e,this._error))();break;default:e.error&&rf(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}class lh{constructor(e,t){this._service=e,t instanceof lo?this._location=t:this._location=lo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new lh(e,t)}get root(){const e=new lo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kA(this._location.path)}get storage(){return this._service}get parent(){const e=sO(this._location.path);if(e===null)return null;const t=new lo(this._location.bucket,e);return new lh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw M9(e)}}function jO(n,e,t){n._throwIfRoot("uploadBytes");const r=MA(n.storage,n._location,Kv(),new Fc(e,!0),t);return n.storage.makeRequestWithTokens(r,zu).then(a=>({metadata:a,ref:n}))}function _O(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new NO(n,new Fc(e),t)}function SO(n){n._throwIfRoot("getDownloadURL");const e=fO(n.storage,n._location,Kv());return n.storage.makeRequestWithTokens(e,zu).then(t=>{if(t===null)throw L9();return t})}function EO(n){n._throwIfRoot("deleteObject");const e=mO(n.storage,n._location);return n.storage.makeRequestWithTokens(e,zu)}function AO(n,e){const t=aO(n._location.path,e),r=new lo(n._location.bucket,t);return new lh(n.storage,r)}function TO(n){return/^[A-Za-z]+:\/\//.test(n)}function CO(n,e){return new lh(n,e)}function OA(n,e){if(n instanceof Jv){const t=n;if(t._bucket==null)throw k9();const r=new lh(t,t._bucket);return e!=null?OA(r,e):r}else return e!==void 0?AO(n,e):n}function IO(n,e){if(e&&TO(e)){if(n instanceof Jv)return CO(n,e);throw m2("To use ref(service, url), the first argument must be a Storage instance.")}else return OA(n,e)}function Y_(n,e){const t=e?.[wA];return t==null?null:lo.makeFromBucketSpec(t,n)}function RO(n,e,t,r={}){n.host=`${e}:${t}`;const a=ld(e);a&&(q2(`https://${n.host}/b`),H2("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:o3(o,n.app.options.projectId))}class Jv{constructor(e,t,r,a,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=a,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=vA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=N9,this._maxUploadRetryTime=j9,this._requests=new Set,a!=null?this._bucket=lo.makeFromBucketSpec(a,this._host):this._bucket=Y_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=lo.makeFromBucketSpec(this._url,e):this._bucket=Y_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){W_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){W_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ao(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new lh(this,e)}_makeRequest(e,t,r,a,o=!0){if(this._deleted)return new O9(SA());{const c=K9(e,this._appId,r,a,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,a).getPromise()}}const X_="@firebase/storage",Q_="0.14.0";const FA="storage";function kO(n,e,t){return n=Ar(n),jO(n,e,t)}function PO(n,e,t){return n=Ar(n),_O(n,e,t)}function VA(n){return n=Ar(n),SO(n)}function UA(n){return n=Ar(n),EO(n)}function uy(n,e){return n=Ar(n),IO(n,e)}function LO(n=W2(),e){n=Ar(n);const r=Dx(n,FA).getImmediate({identifier:e}),a=s3("storage");return a&&DO(r,...a),r}function DO(n,e,t,r={}){RO(n,e,t,r)}function MO(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new Jv(t,r,a,e,dh)}function OO(){Xd(new Zu(FA,MO,"PUBLIC").setMultipleInstances(!0)),Kl(X_,Q_,""),Kl(X_,Q_,"esm2020")}OO();const Dc={apiKey:"AIzaSyB67ZvBQ7DLy3nErDuWSorBtbwgKeoWCw4",authDomain:"grampanchayat-multi-tenant.firebaseapp.com",projectId:"grampanchayat-multi-tenant",storageBucket:"grampanchayat-multi-tenant.firebasestorage.app",messagingSenderId:"595321745876",appId:"1:595321745876:web:3073e006f4a418207e2641",measurementId:void 0};if(!Dc.apiKey||!Dc.projectId)throw console.error(" Firebase environment variables are not loaded!"),console.error("Missing variables:",{apiKey:!Dc.apiKey,authDomain:!Dc.authDomain,projectId:!Dc.projectId,storageBucket:!Dc.storageBucket,messagingSenderId:!Dc.messagingSenderId,appId:!Dc.appId}),new Error("Firebase configuration is incomplete. Please check environment variables.");const Zv=m3(Dc),Xe=a9(Zv);i9(Xe).then(()=>{console.log(" Firestore offline persistence enabled")}).catch(n=>{n.code==="failed-precondition"?console.warn(" Multiple tabs open, persistence can only be enabled in one tab at a time"):n.code==="unimplemented"&&console.warn(" Current browser does not support persistence")});const hl=zL(Zv),dy=LO(Zv),J_={"grampanchayatpindkepaarlodha.in":"pindkepar","www.grampanchayatpindkepaarlodha.in":"pindkepar",localhost:"development","127.0.0.1":"development"},gg=[{id:"pindkepar",name:"Gram Panchayat Pindkepar Lodha",nameHi:"   ",domain:"grampanchayatpindkepaarlodha.in",active:!0},{id:"demo",name:"Demo Gram Panchayat",nameHi:"  ",domain:"demo",active:!0}],FO=()=>{const e=new URLSearchParams(window.location.search).get("tenant");if(e&&gg.find(o=>o.id===e))return console.log(" Tenant from query parameter:",e),e;const t=window.location.hostname;if(J_[t]){const a=J_[t];if(a==="development"){const o=gg.find(c=>c.active);if(o)return console.log(" Development mode - Using default tenant:",o.id),console.log(" Tip: Use ?tenant=TENANT_ID to test other GPs"),o.id}return console.log(" Tenant from domain:",a),a}if(t.includes(".grampanchayats.in")){const a=t.split(".")[0];if(a!=="www")return console.log(" Tenant from subdomain:",a),a}const r=gg.find(a=>a.active);return r?(console.log(" Using default tenant:",r.id),r.id):(console.warn(" No tenant detected, using fallback"),"pindkepar")};let g0=null;const sd=()=>(g0||(g0=FO(),console.log(" Current Tenant:",g0)),g0),VO=()=>{const n=sd(),e=gg.find(t=>t.id===n);return e||(console.warn(` Tenant "${n}" not found in ALL_TENANTS`),{id:n,name:`GP ${n}`,nameHi:`  ${n}`,active:!1})},UO=()=>gg.filter(n=>n.active);async function BO(n,e){try{const r=(await q3(hl,n,e)).user,a=sd(),o=await Us(At(Xe,"gramPanchayats",a,"users",r.uid));if(!o.exists()){console.log("User not found in current tenant, searching all tenants...");const c=await BA(r.uid);if(!c)throw new Error("User data not found");return{uid:r.uid,email:r.email,...c}}return{uid:r.uid,email:r.email,...o.data()}}catch(t){throw console.error("Sign in error:",t),t}}async function BA(n){const e=["pindkepar","demo","warghat"];for(const t of e)try{const r=await Us(At(Xe,"gramPanchayats",t,"users",n));if(r.exists())return console.log(` User found in tenant: ${t}`),r.data()}catch(r){console.error(`Error checking tenant ${t}:`,r)}return null}async function zO(){try{return await RP(hl),!0}catch(n){throw console.error("Sign out error:",n),n}}async function qO(n,e,t,r=null){try{const o=(await z3(hl,n,e)).user,c=r||sd();return await oh(At(Xe,"gramPanchayats",c,"users",o.uid),{email:o.email,role:"admin",tenant:c,...t,createdAt:Yt(),updatedAt:Yt()}),{uid:o.uid,email:o.email,...t}}catch(a){throw console.error("Create admin error:",a),a}}function HO(n){return H3(hl,async e=>{if(e){const t=sd(),r=await Us(At(Xe,"gramPanchayats",t,"users",e.uid));if(r.exists())n({uid:e.uid,email:e.email,...r.data()});else{const a=await BA(e.uid);n(a?{uid:e.uid,email:e.email,...a}:null)}}else n(null)})}const zA=K.createContext(),ew=()=>{const n=K.useContext(zA);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},GO=({children:n})=>{const[e,t]=K.useState(null),[r,a]=K.useState(!0);K.useEffect(()=>{const h=HO(f=>{t(f?{uid:f.uid,email:f.email,name:f.displayName||f.email,role:"ADMIN"}:null),a(!1)});return()=>h()},[]);const u={user:e,login:async h=>{try{const{email:f,password:g}=h,y=await BO(f,g);return{success:!0}}catch(f){console.error("Login error:",f);let g="Login failed. Please try again.";return f.code==="auth/user-not-found"?g="No account found with this email.":f.code==="auth/wrong-password"?g="Incorrect password.":f.code==="auth/invalid-email"?g="Invalid email address.":f.code==="auth/too-many-requests"&&(g="Too many failed attempts. Please try again later."),{success:!1,error:g}}},logout:async()=>{try{await zO()}catch(h){console.error("Logout error:",h)}},loading:r,isAuthenticated:!!e};return s.jsx(zA.Provider,{value:u,children:n})},Ds={panchayatName:{en:"Gram Panchayat Shivpur",mr:" "},tagline:{en:"Working for Village Development",mr:"  "},logo:"/logo.png",contact:{phone:"+91 1234567890",email:"grampanchayat@example.com",address:{en:"Village Shivpur, Taluka Sample, District Example, Maharashtra - 411001",mr:" ,  ,  ,  - "}},officeTimings:{en:"Monday to Friday: 10:00 AM - 5:00 PM",mr:"  :     "},socialMedia:{facebook:"https://facebook.com",twitter:"https://twitter.com",youtube:"https://youtube.com"}},Nn=()=>`gramPanchayats/${sd()}`,Gt={settings:()=>`${Nn()}/settings`,siteSettings:()=>`${Nn()}/settings/siteConfig`,theme:()=>`${Nn()}/theme`,themeConfig:()=>`${Nn()}/theme/config`,features:()=>`${Nn()}/features`,featuresConfig:()=>`${Nn()}/features/config`,members:()=>`${Nn()}/members`,member:n=>`${Nn()}/members/${n}`,staff:()=>`${Nn()}/staff`,staffMember:n=>`${Nn()}/staff/${n}`,notices:()=>`${Nn()}/notices`,notice:n=>`${Nn()}/notices/${n}`,announcements:()=>`${Nn()}/announcements`,announcement:n=>`${Nn()}/announcements/${n}`,services:()=>`${Nn()}/services`,service:n=>`${Nn()}/services/${n}`,schemes:()=>`${Nn()}/schemes`,scheme:n=>`${Nn()}/schemes/${n}`,forms:()=>`${Nn()}/forms`,form:n=>`${Nn()}/forms/${n}`,programs:()=>`${Nn()}/programs`,program:n=>`${Nn()}/programs/${n}`,gallery:()=>`${Nn()}/gallery`,galleryItem:n=>`${Nn()}/gallery/${n}`,villages:()=>`${Nn()}/villages`,village:n=>`${Nn()}/villages/${n}`,demographics:()=>`${Nn()}/demographics`,populationBreakdowns:()=>`${Nn()}/populationBreakdowns`,villageGroups:()=>`${Nn()}/villageGroups`,infrastructure:()=>`${Nn()}/infrastructure`,statisticsYears:()=>`${Nn()}/statisticsYears`,financials:()=>`${Nn()}/financials`,financial:n=>`${Nn()}/financials/${n}`,grievances:()=>`${Nn()}/grievances`,grievance:n=>`${Nn()}/grievances/${n}`,pages:()=>`${Nn()}/pages`,page:n=>`${Nn()}/pages/${n}`,metadata:()=>`${Nn()}/metadata`,metadataConfig:()=>`${Nn()}/metadata/config`},Nx=async()=>{try{const n=At(Xe,Gt.siteSettings()),e=await Us(n);return e.exists()?e.data():null}catch(n){throw console.error("Error fetching settings:",n),n}},qA=async n=>{try{const e=At(Xe,Gt.siteSettings());return await oh(e,n,{merge:!0}),console.log("Settings updated successfully in Firebase"),n}catch(e){throw console.error("Error updating settings:",e),e}},$O=async n=>{try{const e=await Nx();return e||(await qA(n),console.log("Settings initialized with default data"),n)}catch(e){throw console.error("Error initializing settings:",e),e}},HA=K.createContext(),WO=({children:n})=>{const[e,t]=K.useState(null),[r,a]=K.useState(!0);return K.useEffect(()=>{(async()=>{try{a(!0);const c=await Nx();if(c)t(c),console.log("Site settings loaded from Firebase:",c);else{const u=await $O(Ds);t(u),console.log("Site settings initialized in Firebase")}}catch(c){console.error("Error loading site settings:",c),t(Ds)}finally{a(!1)}})()},[]),s.jsx(HA.Provider,{value:{settings:e,loading:r,refresh:async()=>{const o=await Nx();o&&t(o)}},children:n})},tu=()=>{const n=K.useContext(HA);if(n===void 0)throw new Error("useSiteSettings must be used within a SiteSettingsProvider");return n},KO=K.createContext(),di={primaryColor:"#1e40af",secondaryColor:"#059669",accentColor:"#f59e0b",fontFamily:"Inter, sans-serif",headerHeight:"80px",borderRadius:"8px",useCustomHomepage:!1,useCustomNavbar:!1,useCustomFooter:!1};function YO({children:n}){const[e,t]=K.useState(di),[r,a]=K.useState(!0),[o,c]=K.useState(null);K.useEffect(()=>{u()},[]);const u=async()=>{try{a(!0);const w=At(Xe,Gt.themeConfig()),b=await Us(w);if(b.exists()){const T={...di,...b.data()};t(T),h(T),console.log(" Theme loaded for tenant:",sd())}else console.log(" Using default theme for tenant:",sd()),h(di)}catch(w){console.error("Error loading theme:",w),c(w),h(di)}finally{a(!1)}},h=w=>{const b=document.documentElement;b.style.setProperty("--color-primary",w.primaryColor||di.primaryColor),b.style.setProperty("--color-secondary",w.secondaryColor||di.secondaryColor),b.style.setProperty("--color-accent",w.accentColor||di.accentColor),b.style.setProperty("--font-family",w.fontFamily||di.fontFamily),b.style.setProperty("--header-height",w.headerHeight||di.headerHeight),b.style.setProperty("--border-radius",w.borderRadius||di.borderRadius),document.body.style.fontFamily=w.fontFamily||di.fontFamily},y={theme:e,loading:r,error:o,updateTheme:async w=>{try{const b=At(Xe,Gt.themeConfig()),T={...e,...w};return await setDoc(b,T),t(T),h(T),!0}catch(b){throw console.error("Error updating theme:",b),b}},resetTheme:async()=>{try{const w=At(Xe,Gt.themeConfig());return await setDoc(w,di),t(di),h(di),!0}catch(w){throw console.error("Error resetting theme:",w),w}},defaultTheme:di};return s.jsx(KO.Provider,{value:y,children:!r&&n})}const GA=async n=>{try{const e=await Us(At(Xe,"globalConfig","superAdmins","users",n));return e.exists()&&e.data().role==="superadmin"}catch(e){return console.error("Error checking super admin status:",e),!1}},XO=async n=>{try{const e=await Us(At(Xe,"globalConfig","superAdmins","users",n));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Error getting super admin profile:",e),e}},QO=async n=>{try{await Vo(At(Xe,"globalConfig","superAdmins","users",n),{lastLogin:vt.now()})}catch(e){console.error("Error updating last login:",e)}},hy=async()=>{try{const n=Zt(Xe,"globalConfig","metadata","gramPanchayats"),e=await fs(n),t=[];return e.forEach(r=>{t.push({id:r.id,...r.data()})}),t.sort((r,a)=>{const o=r.createdAt?.toDate?.()||new Date(0);return(a.createdAt?.toDate?.()||new Date(0))-o})}catch(n){throw console.error("Error getting all GPs:",n),n}},JO=async n=>{try{const e=await Us(At(Xe,"globalConfig","metadata","gramPanchayats",n));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Error getting GP:",e),e}},ZO=async n=>{try{const{id:e,name:t,nameMarathi:r,domain:a,adminEmail:o,adminPassword:c,...u}=n;if(!e||!t||!a||!o||!c)throw new Error("Missing required fields");if((await Us(At(Xe,"globalConfig","metadata","gramPanchayats",e))).exists())throw new Error(`Gram Panchayat with ID "${e}" already exists`);const f={id:e,name:t,nameMarathi:r||"",domain:a,domainStatus:"pending",active:!0,createdAt:vt.now(),updatedAt:vt.now(),adminEmail:o,...u};await oh(At(Xe,"globalConfig","metadata","gramPanchayats",e),f);let g;try{g=await z3(hl,o,c)}catch(y){if(y.code!=="auth/email-already-in-use")throw await ml(At(Xe,"globalConfig","metadata","gramPanchayats",e)),y}return g&&await oh(At(Xe,`gramPanchayats/${e}/users`,g.user.uid),{email:o,role:"admin",tenantId:e,createdAt:vt.now(),active:!0,createdBy:"superadmin",initialPassword:btoa(c),passwordLastChanged:vt.now()}),await nm({action:"create_gp",gpId:e,gpName:t,adminEmail:o,timestamp:vt.now()}),{success:!0,gpId:e,adminEmail:o,message:`Gram Panchayat "${t}" created successfully`}}catch(e){throw console.error("Error creating GP:",e),e}},eF=async(n,e)=>{try{return await Vo(At(Xe,"globalConfig","metadata","gramPanchayats",n),{active:e,updatedAt:vt.now()}),await nm({action:e?"activate_gp":"deactivate_gp",gpId:n,timestamp:vt.now()}),{success:!0}}catch(t){throw console.error("Error toggling GP status:",t),t}},tF=async n=>{try{const e=await JO(n);return await ml(At(Xe,"globalConfig","metadata","gramPanchayats",n)),await nm({action:"delete_gp",gpId:n,gpData:e,timestamp:vt.now()}),{success:!0,message:"GP deleted successfully"}}catch(e){throw console.error("Error deleting GP:",e),e}},$A=async()=>{try{const n=[],e=await hy();for(const t of e){const r=Zt(Xe,`gramPanchayats/${t.id}/users`);(await fs(Es(r,Za("role","==","admin")))).forEach(o=>{n.push({id:o.id,gpId:t.id,gpName:t.name,...o.data()})})}return n}catch(n){throw console.error("Error getting all admin users:",n),n}},nF=async n=>{try{return await B3(hl,n),await nm({action:"reset_password",email:n,timestamp:vt.now()}),{success:!0,message:"Password reset email sent"}}catch(e){throw console.error("Error resetting password:",e),e}},rF=async(n,e)=>{try{const t=await Us(At(Xe,`gramPanchayats/${n}/users`,e));if(!t.exists())throw new Error("User not found");const r=t.data(),a=r.initialPassword?atob(r.initialPassword):null;return await nm({action:"view_password",userId:e,gpId:n,timestamp:vt.now()}),{password:a,createdAt:r.createdAt,passwordLastChanged:r.passwordLastChanged}}catch(t){throw console.error("Error getting initial password:",t),t}},sF=async(n,e,t,r=null)=>{try{const a=r||WA(12);return await Vo(At(Xe,`gramPanchayats/${n}/users`,e),{initialPassword:btoa(a),passwordLastChanged:vt.now(),passwordChangedBy:"superadmin"}),await B3(hl,t),await nm({action:"generate_new_password",userId:e,gpId:n,email:t,timestamp:vt.now()}),{success:!0,password:a,message:"Password updated. User should use the password reset email to set this password."}}catch(a){throw console.error("Error generating new password:",a),a}},aF=async()=>{try{const n=await hy(),e=await $A(),t=n.filter(u=>u.active).length,r=n.filter(u=>!u.active).length,a=e.filter(u=>u.active).length,o=n.filter(u=>u.domainStatus==="active").length,c=n.filter(u=>u.domainStatus==="pending").length;return{totalGPs:n.length,activeGPs:t,inactiveGPs:r,totalUsers:e.length,activeUsers:a,domainsActive:o,domainsPending:c,lastUpdated:new Date}}catch(n){throw console.error("Error getting system stats:",n),n}},nm=async n=>{try{const e=Zt(Xe,"globalConfig/activityLogs");await oh(At(e),{...n,timestamp:n.timestamp||vt.now()})}catch(e){console.error("Error logging activity:",e)}},WA=(n=16)=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",t="abcdefghijklmnopqrstuvwxyz",r="0123456789",o=e+t+r+"@#";let c="";c+=e[Math.floor(Math.random()*e.length)],c+=t[Math.floor(Math.random()*t.length)],c+=r[Math.floor(Math.random()*r.length)],c+="@#"[Math.floor(Math.random()*2)];for(let u=4;u<n;u++)c+=o[Math.floor(Math.random()*o.length)];return c.split("").sort(()=>Math.random()-.5).join("")},KA=K.createContext(),YA=()=>{const n=K.useContext(KA);if(!n)throw new Error("useSuperAdmin must be used within SuperAdminProvider");return n},iF=({children:n})=>{const[e,t]=K.useState(null),[r,a]=K.useState(!0),[o,c]=K.useState(null);K.useEffect(()=>{const f=H3(hl,async g=>{if(a(!0),c(null),g)try{if(await GA(g.uid)){const w=await XO(g.uid);t({uid:g.uid,email:g.email,...w}),await QO(g.uid)}else t(null),c("You do not have super admin permissions")}catch(y){console.error("Error checking super admin status:",y),c(y.message),t(null)}else t(null);a(!1)});return()=>f()},[]);const h={superAdmin:e,loading:r,error:o,isAuthenticated:!!e,hasPermission:f=>e&&e.permissions?.includes(f)||!1};return s.jsx(KA.Provider,{value:h,children:n})};const oF=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lF=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Z_=n=>{const e=lF(n);return e.charAt(0).toUpperCase()+e.slice(1)},XA=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),cF=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var uF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const dF=K.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:a="",children:o,iconNode:c,...u},h)=>K.createElement("svg",{ref:h,...uF,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:XA("lucide",a),...!o&&!cF(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,g])=>K.createElement(f,g)),...Array.isArray(o)?o:[o]]));const nt=(n,e)=>{const t=K.forwardRef(({className:r,...a},o)=>K.createElement(dF,{ref:o,iconNode:e,className:XA(`lucide-${oF(Z_(n))}`,`lucide-${n}`,r),...a}));return t.displayName=Z_(n),t};const hF=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],gl=nt("arrow-left",hF);const fF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Mc=nt("arrow-right",fF);const mF=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Ju=nt("award",mF);const gF=[["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M19.38 6.813A9 9 0 0 1 20.8 10.2a2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"11xh7x"}],["path",{d:"M9 12h.01",key:"157uk2"}]],g2=nt("baby",gF);const pF=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Vi=nt("bell",pF);const xF=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Fg=nt("book-open",xF);const yF=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Hf=nt("briefcase",yF);const bF=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],ul=nt("building-2",bF);const vF=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ds=nt("calendar",vF);const wF=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],e4=nt("camera",wF);const NF=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],QA=nt("chart-column",NF);const jF=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],_F=nt("chevron-left",jF);const SF=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],fy=nt("chevron-right",SF);const EF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Qn=nt("circle-alert",EF);const AF=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ho=nt("circle-check-big",AF);const TF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],xf=nt("circle-user",TF);const CF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Vg=nt("circle-x",CF);const IF=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Gf=nt("clock",IF);const RF=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],kF=nt("copy",RF);const PF=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],t4=nt("credit-card",PF);const LF=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],DF=nt("dollar-sign",LF);const MF=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Do=nt("download",MF);const OF=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],jx=nt("droplets",OF);const FF=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],JA=nt("external-link",FF);const VF=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],up=nt("eye-off",VF);const UF=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Mo=nt("eye",UF);const BF=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],p2=nt("facebook",BF);const zF=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],qF=nt("file-check",zF);const HF=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],hr=nt("file-text",HF);const GF=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],$F=nt("file",GF);const WF=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],n4=nt("folder-open",WF);const KF=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],my=nt("funnel",KF);const YF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Ug=nt("globe",YF);const XF=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],r4=nt("graduation-cap",XF);const QF=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],JF=nt("hash",QF);const ZF=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],eV=nt("house",ZF);const tV=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],nV=nt("image-plus",tV);const rV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Ma=nt("image",rV);const sV=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],_x=nt("indian-rupee",sV);const aV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],x2=nt("info",aV);const iV=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],oV=nt("instagram",iV);const lV=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],cV=nt("key-round",lV);const uV=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],jf=nt("languages",uV);const dV=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],hV=nt("layout-dashboard",dV);const fV=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],s4=nt("link",fV);const mV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],gV=nt("loader-circle",mV);const pV=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],gy=nt("loader",pV);const xV=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],a4=nt("log-in",xV);const yV=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],y2=nt("lock",yV);const bV=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ZA=nt("log-out",bV);const vV=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Oo=nt("mail",vV);const wV=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],tc=nt("map-pin",wV);const NV=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],Sx=nt("megaphone",NV);const jV=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],eT=nt("menu",jV);const _V=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],_f=nt("message-square",_V);const SV=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],EV=nt("pen-line",SV);const AV=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],dp=nt("pen",AV);const TV=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],io=nt("phone",TV);const CV=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],IV=nt("piggy-bank",CV);const RV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ss=nt("plus",RV);const kV=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],PV=nt("power",kV);const LV=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],tT=nt("refresh-cw",LV);const DV=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ba=nt("save",DV);const MV=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],b2=nt("school",MV);const OV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Bi=nt("search",OV);const FV=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],i4=nt("send",FV);const VV=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nT=nt("settings",VV);const UV=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],$l=nt("shield",UV);const BV=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Os=nt("sparkles",BV);const zV=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],rm=nt("square-pen",zV);const qV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],rT=nt("target",qV);const HV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],mi=nt("trash-2",HV);const GV=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],pg=nt("trending-down",GV);const $V=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Wd=nt("trending-up",$V);const WV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],tw=nt("triangle-alert",WV);const KV=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],sT=nt("twitter",KV);const YV=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],$f=nt("upload",YV);const XV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],QV=nt("user-plus",XV);const JV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Wf=nt("user",JV);const ZV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ya=nt("users",ZV);const eU=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],v2=nt("video",eU);const tU=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],w2=nt("wallet",tU);const nU=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ui=nt("x",nU);const rU=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],sU=nt("youtube",rU),aU=()=>{const[n,e]=K.useState(!1),[t,r]=K.useState(!1),{language:a,toggleLanguage:o,t:c,getContent:u}=hs(),{settings:h,loading:f}=tu(),g=od();K.useEffect(()=>{const b=()=>{r(window.scrollY>20)};return window.addEventListener("scroll",b),()=>window.removeEventListener("scroll",b)},[]);const y=[{path:"/",label:c("nav.home")},{path:"/about",label:c("nav.about")},{path:"/panchayat",label:c("nav.panchayat")},{path:"/services",label:c("nav.services")},{path:"/schemes",label:c("nav.schemes")},{path:"/downloads",label:c("nav.downloads")},{path:"/education",label:c("nav.education")},{path:"/gallery",label:c("nav.gallery")},{path:"/financials",label:c("nav.financials")},{path:"/village-statistics",label:a==="en"?"Statistics":""},{path:"/notices",label:c("nav.notices")},{path:"/contact",label:c("nav.contact")}],w=b=>g.pathname===b;return f||!h?s.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-md",children:s.jsx("div",{className:"h-20 flex items-center justify-center",children:s.jsx("div",{className:"w-8 h-8 border-2 border-orange-600 border-t-transparent rounded-full animate-spin"})})}):s.jsxs("header",{className:`sticky top-0 z-50 transition-all duration-300 ${t?"shadow-xl":"shadow-md"}`,children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 via-blue-900 to-green-600 text-white py-1.5",children:s.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex flex-wrap justify-between items-center text-xs",children:[s.jsxs("div",{className:"flex flex-wrap gap-2 md:gap-4 items-center",children:[h?.contact?.phone&&s.jsxs("a",{href:`tel:${h.contact.phone}`,className:"flex items-center gap-1 hover:text-orange-200 transition-colors",children:[s.jsx(io,{size:12}),s.jsx("span",{className:"font-medium",children:h.contact.phone})]}),h?.contact?.email&&s.jsxs("a",{href:`mailto:${h.contact.email}`,className:"hidden sm:flex items-center gap-1 hover:text-orange-200 transition-colors",children:[s.jsx(Oo,{size:12}),s.jsx("span",{className:"font-medium truncate max-w-[160px]",children:h.contact.email})]}),s.jsxs("div",{className:"hidden lg:flex items-center gap-1 text-white/90",children:[s.jsx(Gf,{size:12}),s.jsx("span",{className:"font-medium",children:u(h.officeTimings)})]})]}),s.jsxs("button",{onClick:o,className:"flex items-center gap-1.5 px-2.5 py-1 bg-white/20 hover:bg-white/30 rounded-md transition-all font-semibold text-xs",children:[s.jsx(Ug,{size:12}),s.jsx("span",{children:a==="en"?"EN":""})]})]})})}),s.jsx("div",{className:`bg-white border-b border-gray-100 transition-all duration-300 ${t?"py-2":"py-3"}`,children:s.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center lg:justify-center lg:relative",children:[s.jsxs(_n,{to:"/",className:"group text-center",children:[s.jsx("h1",{className:"text-base sm:text-lg md:text-xl lg:text-2xl font-bold bg-gradient-to-r from-gray-900 via-blue-900 to-gray-900 bg-clip-text text-transparent leading-tight group-hover:from-orange-600 group-hover:via-orange-700 group-hover:to-orange-600 transition-all duration-300",children:u(h.panchayatName)}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-600 leading-tight font-medium hidden sm:block mt-0.5",children:u(h.tagline)}),s.jsxs("div",{className:"w-20 h-0.5 mx-auto mt-1 flex rounded-full overflow-hidden",children:[s.jsx("div",{className:"flex-1 bg-orange-600"}),s.jsx("div",{className:"flex-1 bg-white"}),s.jsx("div",{className:"flex-1 bg-green-600"})]})]}),s.jsx("button",{onClick:()=>e(!n),className:"lg:hidden p-2 text-gray-700 hover:bg-orange-50 rounded-lg transition-colors",children:n?s.jsx(Ui,{size:22}):s.jsx(eT,{size:22})})]})})}),s.jsx("nav",{className:`bg-gradient-to-r from-blue-900 via-gray-800 to-blue-900 ${n?"block":"hidden"} lg:block`,children:s.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("ul",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-center lg:gap-0.5",children:y.map(b=>s.jsx("li",{className:"relative group",children:s.jsxs(_n,{to:b.path,onClick:()=>e(!1),className:`block px-3 lg:px-4 py-2.5 lg:py-2.5 text-white font-medium transition-all relative overflow-hidden text-sm ${w(b.path)?"bg-orange-600 lg:bg-transparent":"hover:bg-white/10"}`,children:[w(b.path)&&s.jsx("span",{className:"hidden lg:block absolute bottom-0 left-0 right-0 h-0.5 bg-orange-500"}),s.jsx("span",{className:"hidden lg:block absolute inset-0 bg-gradient-to-r from-transparent via-orange-500/20 to-transparent transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300"}),s.jsx("span",{className:"relative z-10",children:b.label})]})},b.path))})})})]})},iU=()=>{const{t:n,getContent:e}=hs(),{settings:t,loading:r}=tu();if(r||!t)return null;const a=[{path:"/",label:n("nav.home")},{path:"/services",label:n("nav.services")},{path:"/schemes",label:n("nav.schemes")},{path:"/downloads",label:n("nav.downloads")},{path:"/notices",label:n("nav.notices")}],o=[{label:"Ministry of Panchayati Raj",url:"https://panchayat.gov.in"},{label:"Digital India",url:"https://digitalindia.gov.in"},{label:"MyGov",url:"https://mygov.in"}];return s.jsxs("footer",{className:"bg-gray-900 text-gray-300",children:[s.jsx("div",{className:"container-custom py-12",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-bold text-lg mb-4",children:e(t.panchayatName)}),s.jsx("p",{className:"text-sm mb-4",children:e(t.tagline)}),t.socialMedia&&s.jsxs("div",{className:"flex gap-3",children:[t.socialMedia.facebook&&s.jsx("a",{href:t.socialMedia.facebook,target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 bg-gray-700 hover:bg-primary-600 rounded-full flex items-center justify-center transition-colors",children:s.jsx(p2,{size:16})}),t.socialMedia.twitter&&s.jsx("a",{href:t.socialMedia.twitter,target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 bg-gray-700 hover:bg-primary-600 rounded-full flex items-center justify-center transition-colors",children:s.jsx(sT,{size:16})}),t.socialMedia.youtube&&s.jsx("a",{href:t.socialMedia.youtube,target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 bg-gray-700 hover:bg-primary-600 rounded-full flex items-center justify-center transition-colors",children:s.jsx(sU,{size:16})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-bold text-lg mb-4",children:n("footer.quickLinks")}),s.jsxs("ul",{className:"space-y-2",children:[a.map(c=>s.jsx("li",{children:s.jsx(_n,{to:c.path,className:"text-sm hover:text-primary-400 transition-colors",children:c.label})},c.path)),s.jsx("li",{children:s.jsx(_n,{to:"/admin/login",className:"text-sm hover:text-primary-400 transition-colors font-semibold",children:" Admin Login"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-bold text-lg mb-4",children:n("footer.importantLinks")}),s.jsx("ul",{className:"space-y-2",children:o.map(c=>s.jsx("li",{children:s.jsx("a",{href:c.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm hover:text-primary-400 transition-colors",children:c.label})},c.url))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-bold text-lg mb-4",children:n("footer.contactUs")}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:"flex gap-2 text-sm",children:[s.jsx(tc,{size:16,className:"flex-shrink-0 mt-1"}),s.jsx("span",{children:e(t.contact.address)})]}),s.jsxs("li",{className:"flex gap-2 text-sm",children:[s.jsx(io,{size:16,className:"flex-shrink-0"}),s.jsx("a",{href:`tel:${t.contact.phone}`,className:"hover:text-primary-400 transition-colors",children:t.contact.phone})]}),s.jsxs("li",{className:"flex gap-2 text-sm",children:[s.jsx(Oo,{size:16,className:"flex-shrink-0"}),s.jsx("a",{href:`mailto:${t.contact.email}`,className:"hover:text-primary-400 transition-colors",children:t.contact.email})]})]})]})]})}),s.jsx("div",{className:"border-t border-gray-800",children:s.jsx("div",{className:"container-custom py-4",children:s.jsx("div",{className:"text-center text-sm",children:s.jsxs("p",{children:[" ",new Date().getFullYear()," ",e(t.panchayatName),". ",n("footer.copyright"),"."]})})})})]})};async function oU(){try{const n=Zt(Xe,Gt.announcements()),e=Es(n,ac("createdAt","desc")),r=(await fs(e)).docs.map(o=>({id:o.id,...o.data(),createdAt:o.data().createdAt?.toDate?.()||new Date,updatedAt:o.data().updatedAt?.toDate?.()||new Date})),a={high:3,medium:2,low:1};return r.sort((o,c)=>{const u=(a[c.priority]||0)-(a[o.priority]||0);return u!==0?u:c.createdAt-o.createdAt})}catch(n){throw console.error("Error getting announcements:",n),n}}async function lU(){try{const n=Zt(Xe,Gt.announcements()),e=Es(n,Za("isActive","==",!0)),r=(await fs(e)).docs.map(o=>({id:o.id,...o.data(),createdAt:o.data().createdAt?.toDate?.()||new Date})),a={high:3,medium:2,low:1};return r.sort((o,c)=>{const u=(a[c.priority]||0)-(a[o.priority]||0);return u!==0?u:c.createdAt-o.createdAt})}catch(n){throw console.error("Error getting active announcements:",n),n}}async function cU(n){try{const e=At(Xe,Gt.announcement(n)),t=await Us(e);if(t.exists()){const r=t.data();return{id:t.id,...r,createdAt:r.createdAt?.toDate?.()||new Date,updatedAt:r.updatedAt?.toDate?.()||new Date}}return null}catch(e){throw console.error("Error getting announcement:",e),e}}async function uU(n){try{const e=Zt(Xe,Gt.announcements());return(await bs(e,{...n,createdAt:Yt(),updatedAt:Yt()})).id}catch(e){throw console.error("Error creating announcement:",e),e}}async function aT(n,e){try{const t=At(Xe,Gt.announcement(n));await Vo(t,{...e,updatedAt:Yt()})}catch(t){throw console.error("Error updating announcement:",t),t}}async function dU(n){try{const e=At(Xe,Gt.announcement(n));await ml(e)}catch(e){throw console.error("Error deleting announcement:",e),e}}async function hU(n,e){try{await aT(n,{isActive:e})}catch(t){throw console.error("Error toggling announcement status:",t),t}}function fU(){const[n,e]=K.useState([]),[t,r]=K.useState(0),[a,o]=K.useState(!0),{getContent:c}=hs();K.useEffect(()=>{u()},[]),K.useEffect(()=>{if(n.length>1){const b=setInterval(()=>{r(T=>(T+1)%n.length)},5e3);return()=>clearInterval(b)}},[n.length]);const u=async()=>{try{const b=await lU();e(b)}catch(b){console.error("Error loading announcements:",b)}},h=()=>{o(!1)};if(!a||n.length===0)return null;const f=n[t],g={info:{bg:"bg-blue-500",icon:x2},warning:{bg:"bg-yellow-500",icon:tw},alert:{bg:"bg-red-500",icon:Qn},success:{bg:"bg-green-500",icon:ho}},y=g[f?.type]||g.info,w=y.icon;return s.jsxs("div",{className:`${y.bg} text-white shadow-lg relative overflow-hidden`,children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')]"})}),s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-3 relative z-10",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(w,{className:"flex-shrink-0 animate-pulse",size:24}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("p",{className:"font-bold text-sm sm:text-base",children:c(f.title)}),s.jsx("span",{className:"text-white/80 text-sm hidden sm:inline",children:""}),s.jsx("p",{className:"text-white/90 text-sm",children:c(f.message)})]})})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[f.link&&s.jsxs("a",{href:f.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-semibold transition-colors backdrop-blur-sm",children:[s.jsx("span",{className:"hidden sm:inline",children:"Read More"}),s.jsx(JA,{size:14})]}),s.jsx("button",{onClick:h,className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors",title:"Close",children:s.jsx(Ui,{size:18})})]})]}),n.length>1&&s.jsx("div",{className:"flex justify-center gap-1.5 mt-2",children:n.map((b,T)=>s.jsx("button",{onClick:()=>r(T),className:`h-1.5 rounded-full transition-all ${T===t?"w-6 bg-white":"w-1.5 bg-white/40 hover:bg-white/60"}`,title:`Announcement ${T+1}`},T))})]})]})}const mU=()=>s.jsxs("div",{className:"min-h-screen flex flex-col",children:[s.jsx(aU,{}),s.jsx(fU,{}),s.jsx("main",{className:"flex-1",children:s.jsx(Q6,{})}),s.jsx(iU,{})]}),gU=({children:n})=>{const{isAuthenticated:e,loading:t}=ew();return t?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):e?n:s.jsx(z2,{to:"/admin/login",replace:!0})};function p0({children:n,requiredPermission:e=null}){const{superAdmin:t,loading:r,isAuthenticated:a,hasPermission:o}=YA(),c=od();return r?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-800 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white/10 backdrop-blur-md rounded-full mb-4 border border-white/20",children:s.jsx($l,{className:"w-10 h-10 text-white animate-pulse"})}),s.jsxs("div",{className:"flex items-center justify-center gap-3 text-white",children:[s.jsx(gy,{className:"w-6 h-6 animate-spin"}),s.jsx("p",{className:"text-lg",children:"Verifying super admin access..."})]})]})}):!a||!t?s.jsx(z2,{to:"/superadmin/login",state:{from:c},replace:!0}):e&&!o(e)?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-800 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 max-w-md text-center border border-white/20",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-500/20 rounded-full mb-4",children:s.jsx($l,{className:"w-8 h-8 text-red-200"})}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-indigo-200 mb-6",children:"You do not have permission to access this feature."}),s.jsxs("p",{className:"text-sm text-indigo-300 mb-6",children:["Required permission: ",s.jsx("span",{className:"font-mono bg-white/10 px-2 py-1 rounded",children:e})]}),s.jsx("button",{onClick:()=>window.history.back(),className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-6 py-2 rounded-lg hover:from-indigo-600 hover:to-purple-700 transition",children:"Go Back"})]})}):n}const pU=()=>{const[n,e]=K.useState(!1),{user:t,logout:r}=ew(),{language:a,toggleLanguage:o}=hs(),c=od(),u=Dr(),h=()=>{r(),u("/admin/login")},f=[{path:"/admin/dashboard",label:"Dashboard",icon:hV},{path:"/admin/members",label:"Members & Staff",icon:ya},{path:"/admin/services",label:"Services",icon:Hf},{path:"/admin/schemes",label:"Schemes",icon:hr},{path:"/admin/forms",label:"Forms & Downloads",icon:Do},{path:"/admin/gallery",label:"Gallery",icon:Ma},{path:"/admin/financials",label:"Financials",icon:DF},{path:"/admin/notices",label:"Notices & Tenders",icon:Vi},{path:"/admin/announcements",label:"Announcements",icon:Sx},{path:"/admin/grievances",label:"Grievances",icon:_f},{path:"/admin/village-statistics",label:"Village Statistics",icon:hr},{path:"/admin/settings",label:"Settings",icon:nT}],g=y=>c.pathname===y;return s.jsxs("div",{className:"min-h-screen bg-gray-100",children:[s.jsx("header",{className:"bg-white shadow-md fixed top-0 left-0 right-0 z-40",children:s.jsxs("div",{className:"flex justify-between items-center px-4 py-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>e(!n),className:"lg:hidden p-2 hover:bg-gray-100 rounded",children:n?s.jsx(Ui,{size:24}):s.jsx(eT,{size:24})}),s.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Admin Panel"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right hidden sm:block",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-800",children:t?.name}),s.jsx("p",{className:"text-xs text-gray-500",children:t?.role})]}),s.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",title:a==="en"?"Switch to Marathi":"Switch to English",children:[s.jsx(jf,{size:18}),s.jsx("span",{className:"hidden sm:inline text-sm",children:a==="en"?"EN":""})]}),s.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:[s.jsx(ZA,{size:18}),s.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})}),s.jsx("aside",{className:`fixed top-16 left-0 bottom-0 w-64 bg-white shadow-lg transform transition-transform duration-200 z-30 ${n?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:s.jsx("nav",{className:"p-4 space-y-2 overflow-y-auto h-full",children:f.map(y=>{const w=y.icon;return s.jsxs(_n,{to:y.path,onClick:()=>e(!1),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${g(y.path)?"bg-primary-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[s.jsx(w,{size:20}),s.jsx("span",{className:"font-medium",children:y.label})]},y.path)})})}),s.jsx("main",{className:"pt-16 lg:pl-64 min-h-screen",children:s.jsx("div",{className:"p-6",children:s.jsx(Q6,{})})}),n&&s.jsx("div",{onClick:()=>e(!1),className:"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden"})]})};function xU(){const[n,e]=K.useState(!1);return VO(),UO(),null}const yU=()=>{const{t:n,getContent:e}=hs(),{settings:t,loading:r}=tu();return r||!t?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 via-blue-50 to-green-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-orange-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"Loading..."})]})}):s.jsxs("div",{className:"overflow-hidden",children:[s.jsxs("section",{className:"relative overflow-hidden min-h-[650px] md:min-h-[700px] lg:min-h-[750px] flex items-center",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-600 via-white to-green-600",children:s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')] opacity-20"})})}),s.jsx("div",{className:"absolute top-10 right-10 w-32 h-32 md:w-48 md:h-48 opacity-5 animate-spin-slow",children:s.jsxs("svg",{viewBox:"0 0 200 200",className:"w-full h-full",children:[s.jsx("circle",{cx:"100",cy:"100",r:"80",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-blue-900"}),[...Array(24)].map((a,o)=>s.jsx("line",{x1:"100",y1:"100",x2:"100",y2:"20",stroke:"currentColor",strokeWidth:"2",className:"text-blue-900",transform:`rotate(${o*15} 100 100)`},o))]})}),s.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10 py-16 md:py-20",children:s.jsx("div",{className:"max-w-5xl mx-auto",children:s.jsxs("div",{className:"text-center mb-8 md:mb-12 animate-fade-in-up",children:[s.jsx("div",{className:"inline-block mb-6 p-4 bg-white rounded-full shadow-2xl",children:s.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-orange-600 via-blue-900 to-green-600 rounded-full flex items-center justify-center",children:s.jsx(Ju,{className:"text-white w-8 h-8 md:w-10 md:h-10"})})}),s.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-4 text-gray-900 leading-tight",children:[s.jsx("span",{className:"block text-orange-600",children:n("home.welcomeTitle")}),s.jsx("span",{className:"block mt-2 bg-gradient-to-r from-blue-900 via-gray-800 to-blue-900 bg-clip-text text-transparent",children:e(t.panchayatName)})]}),s.jsx("p",{className:"text-lg sm:text-xl md:text-2xl text-gray-700 font-medium max-w-3xl mx-auto mb-8 px-4",children:e(t.tagline)}),s.jsxs("div",{className:"w-32 h-1 mx-auto mb-8 flex rounded-full overflow-hidden shadow-lg",children:[s.jsx("div",{className:"flex-1 bg-orange-600"}),s.jsx("div",{className:"flex-1 bg-white"}),s.jsx("div",{className:"flex-1 bg-green-600"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[s.jsxs(_n,{to:"/about",className:"group inline-flex items-center gap-2 bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white px-8 py-4 rounded-lg text-base md:text-lg font-semibold shadow-xl hover:shadow-2xl transition-all transform hover:scale-105",children:[n("home.knowMore"),s.jsx(Mc,{size:20,className:"group-hover:translate-x-1 transition-transform"})]}),s.jsxs(_n,{to:"/services",className:"group inline-flex items-center gap-2 bg-white hover:bg-gray-50 text-gray-900 px-8 py-4 rounded-lg text-base md:text-lg font-semibold shadow-xl hover:shadow-2xl transition-all transform hover:scale-105 border-2 border-gray-200",children:[n("home.importantServices"),s.jsx(JA,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})]})]})})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:s.jsx("svg",{viewBox:"0 0 1440 120",className:"w-full h-16 md:h-24 fill-current text-white",children:s.jsx("path",{d:"M0,64L48,69.3C96,75,192,85,288,80C384,75,480,53,576,48C672,43,768,53,864,58.7C960,64,1056,64,1152,58.7C1248,53,1344,43,1392,37.3L1440,32L1440,120L1392,120C1344,120,1248,120,1152,120C1056,120,960,120,864,120C768,120,672,120,576,120C480,120,384,120,288,120C192,120,96,120,48,120L0,120Z"})})})]}),s.jsx("section",{className:"py-12 md:py-16 lg:py-20 bg-gradient-to-br from-gray-50 via-blue-50/30 to-orange-50/30",children:s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-10 md:mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-3",children:n("home.quickInfo")}),s.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-orange-600 to-green-600 mx-auto rounded-full"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 max-w-7xl mx-auto",children:[s.jsx("div",{className:"group bg-white p-6 md:p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border-l-4 border-orange-600 transform hover:-translate-y-2",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl flex items-center justify-center shadow-md group-hover:scale-110 transition-transform",children:s.jsx(io,{className:"text-white",size:24})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:n("home.phone")}),s.jsx("a",{href:`tel:${t.contact.phone}`,className:"text-gray-700 hover:text-orange-600 font-medium transition-colors block truncate",children:t.contact.phone})]})]})}),s.jsx("div",{className:"group bg-white p-6 md:p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border-l-4 border-green-600 transform hover:-translate-y-2",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-gradient-to-br from-green-600 to-green-700 rounded-xl flex items-center justify-center shadow-md group-hover:scale-110 transition-transform",children:s.jsx(Oo,{className:"text-white",size:24})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:n("home.email")}),s.jsx("a",{href:`mailto:${t.contact.email}`,className:"text-gray-700 hover:text-green-600 font-medium transition-colors block break-all text-sm md:text-base",children:t.contact.email})]})]})}),s.jsx("div",{className:"group bg-white p-6 md:p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border-l-4 border-blue-600 transform hover:-translate-y-2",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md group-hover:scale-110 transition-transform",children:s.jsx(tc,{className:"text-white",size:24})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:n("home.address")}),s.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:e(t.contact.address)})]})]})}),s.jsx("div",{className:"group bg-white p-6 md:p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border-l-4 border-orange-600 transform hover:-translate-y-2",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl flex items-center justify-center shadow-md group-hover:scale-110 transition-transform",children:s.jsx(Gf,{className:"text-white",size:24})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:n("home.timings")}),s.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:e(t.officeTimings)})]})]})})]})]})}),s.jsx("section",{className:"py-12 md:py-16 lg:py-20 bg-white",children:s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-10 md:mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-3",children:n("home.quickLinks")}),s.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-orange-600 to-green-600 mx-auto rounded-full"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 max-w-7xl mx-auto",children:[s.jsxs(_n,{to:"/financials#property-tax",className:"group relative bg-gradient-to-br from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white p-6 md:p-8 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-500"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx(_x,{size:40,className:"mb-4 group-hover:scale-110 transition-transform"}),s.jsx("h3",{className:"text-xl md:text-2xl font-bold mb-2",children:n("home.payPropertyTax")}),s.jsx("p",{className:"text-white/90 text-sm mb-4",children:"Pay your property tax online"}),s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[s.jsx("span",{children:"Pay Now"}),s.jsx(Mc,{size:18,className:"group-hover:translate-x-2 transition-transform"})]})]})]}),s.jsxs(_n,{to:"/financials#water-tax",className:"group relative bg-gradient-to-br from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white p-6 md:p-8 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-500"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx(_x,{size:40,className:"mb-4 group-hover:scale-110 transition-transform"}),s.jsx("h3",{className:"text-xl md:text-2xl font-bold mb-2",children:n("home.payWaterTax")}),s.jsx("p",{className:"text-white/90 text-sm mb-4",children:"Pay your water bill online"}),s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[s.jsx("span",{children:"Pay Now"}),s.jsx(Mc,{size:18,className:"group-hover:translate-x-2 transition-transform"})]})]})]}),s.jsxs(_n,{to:"/schemes",className:"group relative bg-gradient-to-br from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white p-6 md:p-8 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-500"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx(Hf,{size:40,className:"mb-4 group-hover:scale-110 transition-transform"}),s.jsx("h3",{className:"text-xl md:text-2xl font-bold mb-2",children:n("home.viewSchemes")}),s.jsx("p",{className:"text-white/90 text-sm mb-4",children:"Browse government schemes"}),s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[s.jsx("span",{children:"View All"}),s.jsx(Mc,{size:18,className:"group-hover:translate-x-2 transition-transform"})]})]})]}),s.jsxs(_n,{to:"/downloads",className:"group relative bg-gradient-to-br from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white p-6 md:p-8 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-500"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx(Do,{size:40,className:"mb-4 group-hover:scale-110 transition-transform"}),s.jsx("h3",{className:"text-xl md:text-2xl font-bold mb-2",children:n("home.downloadForms")}),s.jsx("p",{className:"text-white/90 text-sm mb-4",children:"Download application forms"}),s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[s.jsx("span",{children:"Download"}),s.jsx(Mc,{size:18,className:"group-hover:translate-x-2 transition-transform"})]})]})]})]})]})}),s.jsxs("section",{className:"py-12 md:py-16 lg:py-20 bg-gradient-to-br from-blue-900 via-blue-800 to-blue-900 text-white relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')]"})}),s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[s.jsxs("div",{className:"text-center mb-10 md:mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-3",children:n("home.highlights")}),s.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-orange-400 to-green-400 mx-auto rounded-full"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8 max-w-6xl mx-auto",children:[s.jsxs(_n,{to:"/panchayat",className:"group bg-white/10 backdrop-blur-sm p-8 md:p-10 rounded-2xl text-center hover:bg-white/20 transition-all duration-300 transform hover:-translate-y-2 hover:shadow-2xl border border-white/20",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-400 to-orange-500 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform shadow-xl",children:s.jsx(ya,{className:"text-white",size:40})}),s.jsx("p",{className:"text-xl font-semibold mb-2 text-orange-300",children:n("home.members")}),s.jsx("p",{className:"text-white/80 text-sm",children:"Panchayat Representatives"}),s.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-orange-300 text-sm font-semibold opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("span",{children:"View Details"}),s.jsx(Mc,{size:16})]})]}),s.jsxs(_n,{to:"/schemes",className:"group bg-white/10 backdrop-blur-sm p-8 md:p-10 rounded-2xl text-center hover:bg-white/20 transition-all duration-300 transform hover:-translate-y-2 hover:shadow-2xl border border-white/20",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-400 to-green-500 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform shadow-xl",children:s.jsx(Hf,{className:"text-white",size:40})}),s.jsx("p",{className:"text-xl font-semibold mb-2 text-green-300",children:n("home.popularSchemes")}),s.jsx("p",{className:"text-white/80 text-sm",children:"Government Schemes"}),s.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-green-300 text-sm font-semibold opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("span",{children:"View Details"}),s.jsx(Mc,{size:16})]})]}),s.jsxs(_n,{to:"/services",className:"group bg-white/10 backdrop-blur-sm p-8 md:p-10 rounded-2xl text-center hover:bg-white/20 transition-all duration-300 transform hover:-translate-y-2 hover:shadow-2xl border border-white/20",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-400 to-blue-500 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform shadow-xl",children:s.jsx(hr,{className:"text-white",size:40})}),s.jsx("p",{className:"text-xl font-semibold mb-2 text-blue-300",children:n("home.importantServices")}),s.jsx("p",{className:"text-white/80 text-sm",children:"Panchayat Services"}),s.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-blue-300 text-sm font-semibold opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("span",{children:"View Details"}),s.jsx(Mc,{size:16})]})]})]})]})]})]})},py={ABOUT:"about",EDUCATION:"education"},iT=async n=>{try{const e=At(Xe,Gt.pages(),n),t=await Us(e);if(t.exists()){const r=t.data();return{id:t.id,...r,updatedAt:r.updatedAt?.toDate?.()?.toISOString?.()||r.updatedAt,createdAt:r.createdAt?.toDate?.()?.toISOString?.()||r.createdAt}}else return console.log(`No ${n} page content found`),null}catch(e){throw console.error(`Error fetching ${n} page content:`,e),new Error(`Failed to fetch ${n} page content`)}},oT=async(n,e)=>{try{const t=At(Xe,Gt.pages(),n),a=!(await Us(t)).exists(),o={...e,updatedAt:vt.now(),...a&&{createdAt:vt.now()}};await oh(t,o,{merge:!0}),console.log(`${n} page content ${a?"created":"updated"}`)}catch(t){throw console.error(`Error updating ${n} page content:`,t),new Error(`Failed to update ${n} page content`)}},lT=async()=>await iT(py.ABOUT),o4=async n=>await oT(py.ABOUT,n),cT=async()=>await iT(py.EDUCATION),l4=async n=>await oT(py.EDUCATION,n),bU=()=>{const{t:n,language:e,getContent:t}=hs(),{settings:r,loading:a}=tu(),[o,c]=K.useState(null),[u,h]=K.useState(!0);return K.useEffect(()=>{(async()=>{try{h(!0);const g=await lT();c(g)}catch(g){console.error("Error loading about content:",g),c(null)}finally{h(!1)}})()},[]),u||a?s.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gradient-to-br from-orange-50 via-blue-50 to-green-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-orange-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"Loading..."})]})}):r?o?s.jsxs("div",{className:"overflow-hidden",children:[s.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-orange-600 via-white to-green-600 py-16 md:py-24",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')]"})}),s.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:s.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[s.jsx("div",{className:"inline-block mb-6 p-4 bg-white rounded-full shadow-2xl",children:s.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-orange-600 via-blue-900 to-green-600 rounded-full flex items-center justify-center",children:s.jsx(Ju,{className:"text-white w-8 h-8 md:w-10 md:h-10"})})}),s.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-6 text-gray-900",children:[e==="en"?"About":"",s.jsx("span",{className:"block mt-2 bg-gradient-to-r from-orange-600 via-blue-900 to-green-600 bg-clip-text text-transparent",children:t(r.panchayatName)})]}),s.jsxs("div",{className:"w-32 h-1 mx-auto mb-6 flex rounded-full overflow-hidden shadow-lg",children:[s.jsx("div",{className:"flex-1 bg-orange-600"}),s.jsx("div",{className:"flex-1 bg-white"}),s.jsx("div",{className:"flex-1 bg-green-600"})]}),s.jsx("p",{className:"text-lg md:text-xl text-gray-700 leading-relaxed",children:t(o.description)})]})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:s.jsx("svg",{viewBox:"0 0 1440 120",className:"w-full h-12 md:h-16 fill-current text-white",children:s.jsx("path",{d:"M0,64L48,69.3C96,75,192,85,288,80C384,75,480,53,576,48C672,43,768,53,864,58.7C960,64,1056,64,1152,58.7C1248,53,1344,43,1392,37.3L1440,32L1440,120L1392,120C1344,120,1248,120,1152,120C1056,120,960,120,864,120C768,120,672,120,576,120C480,120,384,120,288,120C192,120,96,120,48,120L0,120Z"})})})]}),s.jsx("section",{className:"py-12 md:py-16 bg-white",children:s.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"max-w-6xl mx-auto",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8",children:[s.jsxs("div",{className:"group relative bg-gradient-to-br from-orange-500 to-orange-600 text-white p-8 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-500"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx(ya,{size:40,className:"mb-4 group-hover:scale-110 transition-transform"}),s.jsx("div",{className:"text-4xl md:text-5xl font-bold mb-2",children:o.population}),s.jsx("div",{className:"text-white/90 text-lg",children:e==="en"?"Population":""})]})]}),s.jsxs("div",{className:"group relative bg-gradient-to-br from-green-600 to-green-700 text-white p-8 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-500"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx(tc,{size:40,className:"mb-4 group-hover:scale-110 transition-transform"}),s.jsx("div",{className:"text-4xl md:text-5xl font-bold mb-2",children:o.area}),s.jsx("div",{className:"text-white/90 text-lg",children:e==="en"?"Area":""})]})]}),s.jsxs("div",{className:"group relative bg-gradient-to-br from-blue-600 to-blue-700 text-white p-8 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-500"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx(eV,{size:40,className:"mb-4 group-hover:scale-110 transition-transform"}),s.jsx("div",{className:"text-4xl md:text-5xl font-bold mb-2",children:o.households}),s.jsx("div",{className:"text-white/90 text-lg",children:e==="en"?"Households":""})]})]})]})})})}),(o.history||o.vision||o.mission)&&s.jsx("section",{className:"py-12 md:py-16 lg:py-20 bg-gradient-to-br from-gray-50 via-blue-50/30 to-orange-50/30",children:s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-10 md:mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-3",children:e==="en"?"Our Journey":" "}),s.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-orange-600 to-green-600 mx-auto rounded-full"})]}),s.jsxs("div",{className:"max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8",children:[o.history&&s.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border-t-4 border-orange-600",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center",children:s.jsx(ds,{className:"text-orange-600",size:24})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:e==="en"?"History":""})]}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:t(o.history)})]}),o.vision&&s.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border-t-4 border-green-600",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:s.jsx(Mo,{className:"text-green-600",size:24})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:e==="en"?"Vision":""})]}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:t(o.vision)})]}),o.mission&&s.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border-t-4 border-blue-600",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:s.jsx(rT,{className:"text-blue-600",size:24})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:e==="en"?"Mission":""})]}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:t(o.mission)})]})]})]})}),o.importantPlaces&&o.importantPlaces.length>0&&s.jsxs("section",{className:"py-12 md:py-16 lg:py-20 bg-gradient-to-br from-blue-900 via-blue-800 to-blue-900 text-white relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')]"})}),s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[s.jsxs("div",{className:"text-center mb-10 md:mb-12",children:[s.jsx(Os,{className:"w-12 h-12 mx-auto mb-4 text-orange-400"}),s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-3",children:e==="en"?"Important Places":" "}),s.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-orange-400 to-green-400 mx-auto rounded-full"})]}),s.jsx("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:o.importantPlaces.map((f,g)=>s.jsxs("div",{className:"group bg-white/10 backdrop-blur-sm rounded-2xl overflow-hidden hover:bg-white/20 transition-all duration-300 transform hover:-translate-y-2 hover:shadow-2xl border border-white/20",children:[f.photoUrl&&s.jsx("div",{className:"h-48 overflow-hidden",children:s.jsx("img",{src:f.photoUrl,alt:t(f.name),className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"})}),!f.photoUrl&&s.jsx("div",{className:"h-48 bg-gradient-to-br from-orange-400 to-green-400 flex items-center justify-center",children:s.jsx(tc,{size:64,className:"text-white opacity-50"})}),s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-xl font-bold mb-3 text-white",children:t(f.name)}),s.jsx("p",{className:"text-white/80 leading-relaxed",children:t(f.description)})]})]},f.id))})]})]})]}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-16",children:s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[s.jsx(Ju,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:e==="en"?"No About Information Available":"   "}),s.jsx("p",{className:"text-gray-600",children:e==="en"?"About page content has not been added yet.":"     ."})]})}):null},c4=()=>sd(),vU=(n,e,t=null)=>t?`${c4()}/${n}/${t}/${e}`:`${c4()}/${n}/${e}`;async function xy(n,e,t=null,r=null){try{const a=t||`${Date.now()}_${n.name}`,o=vU(e,a,r),c=uy(dy,o),u=await kO(c,n);return await VA(u.ref)}catch(a){throw console.error("Error uploading image:",a),a}}async function yy(n){try{const e=wU(n);if(!e)throw new Error("Invalid file URL");const t=uy(dy,e);return await UA(t),!0}catch(e){throw console.error("Error deleting image:",e),e}}function wU(n){try{if(!n.startsWith("https://firebasestorage.googleapis.com/v0/b/"))return null;const t=n.split("/o/")[1]?.split("?")[0];return t?decodeURIComponent(t):null}catch(e){return console.error("Error extracting path:",e),null}}async function uT(n,e){try{const t=Array.from(n).map(r=>xy(r,e));return await Promise.all(t)}catch(t){throw console.error("Error uploading multiple images:",t),t}}const nw=async()=>{try{const n=Zt(Xe,Gt.members()),e=Es(n,ac("position","asc")),t=await fs(e),r=[];return t.forEach(a=>{r.push({id:a.id,...a.data()})}),r}catch(n){throw console.error("Error fetching members:",n),n}},rw=async n=>{try{const e=At(Xe,Gt.members(),n),t=await Us(e);return t.exists()?{id:t.id,...t.data()}:null}catch(e){throw console.error("Error fetching member:",e),e}},NU=async(n,e=null)=>{try{let t=n.photo||"";e&&(t=await xy(e,"members"));const r=Zt(Xe,Gt.members()),a=await bs(r,{...n,photo:t,createdAt:vt.now(),updatedAt:vt.now()});return console.log("Member created successfully with ID:",a.id),a.id}catch(t){throw console.error("Error creating member:",t),t}},jU=async(n,e,t=null)=>{try{let r=e.photo||"";if(t){const o=await rw(n);if(o&&o.photo)try{await yy(o.photo)}catch(c){console.warn("Failed to delete old photo:",c)}r=await xy(t,"members")}const a=At(Xe,Gt.members(),n);return await Vo(a,{...e,photo:r,updatedAt:vt.now()}),console.log("Member updated successfully:",n),n}catch(r){throw console.error("Error updating member:",r),r}},_U=async n=>{try{const e=await rw(n);if(e&&e.photo)try{await yy(e.photo)}catch(r){console.warn("Failed to delete member photo:",r)}const t=At(Xe,Gt.members(),n);return await ml(t),console.log("Member deleted successfully:",n),!0}catch(e){throw console.error("Error deleting member:",e),e}},SU=()=>{const{t:n,getContent:e}=hs(),{settings:t,loading:r}=tu(),[a,o]=K.useState([]),[c,u]=K.useState(!0);K.useEffect(()=>{(async()=>{try{u(!0);const b=await nw();o(Array.isArray(b)?b:[])}catch(b){console.error("Error loading members:",b),o([])}finally{u(!1)}})()},[]);const h=a.filter(w=>w.type==="SARPANCH"),f=a.filter(w=>w.type==="UPSARPANCH"),g=a.filter(w=>w.type==="MEMBER"),y=a.filter(w=>w.type==="STAFF");return c||r?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary-600"})}):t?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsxs("section",{className:"relative bg-gradient-to-br from-orange-600 via-white to-green-600 py-20",children:[s.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm"}),s.jsx("div",{className:"container-custom relative z-10",children:s.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[s.jsxs("div",{className:"inline-flex items-center gap-3 mb-6 px-6 py-3 bg-gradient-to-r from-orange-600 to-green-600 rounded-full shadow-lg",children:[s.jsx(ul,{className:"text-white",size:28}),s.jsx("span",{className:"text-white font-bold text-xl",children:"Gram Panchayat"})]}),s.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-orange-600 to-green-600 bg-clip-text text-transparent",children:n("nav.panchayat")}),s.jsx("p",{className:"text-xl text-gray-700 leading-relaxed",children:"Meet our elected representatives and dedicated office staff committed to serving our community"}),s.jsxs("div",{className:"mt-8 flex items-center justify-center gap-8 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-orange-600 rounded-full"}),s.jsx("span",{children:"Saffron - Courage & Sacrifice"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-600 rounded-full"}),s.jsx("span",{children:"Green - Growth & Prosperity"})]})]})]})})]}),s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(ul,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:"Office Information"}),s.jsx("p",{className:"text-gray-600",children:"Your gateway to local governance and public services"})]}),s.jsx("div",{className:"max-w-6xl mx-auto",children:s.jsx("div",{className:"bg-gradient-to-br from-orange-50 via-white to-green-50 rounded-2xl shadow-xl overflow-hidden border border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-0",children:[s.jsxs("div",{className:"relative h-80 lg:h-auto",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-600/20 to-green-600/20"}),s.jsx("img",{src:t.officePhoto||"https://via.placeholder.com/600x400",alt:"Gram Panchayat Office",className:"w-full h-full object-cover"}),s.jsxs("div",{className:"absolute bottom-6 left-6 right-6 bg-white/90 backdrop-blur-sm rounded-lg p-4",children:[s.jsx("p",{className:"text-sm font-semibold text-blue-900",children:"Government of India"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Serving the community since establishment"})]})]}),s.jsxs("div",{className:"p-8 lg:p-12 space-y-6",children:[s.jsxs("div",{className:"flex gap-4 group",children:[s.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-orange-600 to-orange-700 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform",children:s.jsx(tc,{className:"text-white",size:24})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-lg mb-2 text-blue-900",children:"Office Address"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:e(t.contact.address)})]})]}),s.jsxs("div",{className:"flex gap-4 group",children:[s.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-blue-900 to-blue-800 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform",children:s.jsx(Gf,{className:"text-white",size:24})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-lg mb-2 text-blue-900",children:"Working Hours"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:e(t.officeTimings)})]})]}),s.jsxs("div",{className:"flex gap-4 group",children:[s.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-green-600 to-green-700 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform",children:s.jsx(io,{className:"text-white",size:24})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-lg mb-2 text-blue-900",children:"Contact Details"}),s.jsx("p",{className:"text-gray-700 mb-1",children:s.jsx("a",{href:`tel:${t.contact.phone}`,className:"hover:text-orange-600 transition-colors",children:t.contact.phone})}),s.jsx("p",{className:"text-gray-700",children:s.jsxs("a",{href:`mailto:${t.contact.email}`,className:"hover:text-orange-600 transition-colors flex items-center gap-2",children:[s.jsx(Oo,{size:16}),t.contact.email]})})]})]})]})]})})})]})}),h.length>0&&s.jsx("section",{className:"py-16 bg-gradient-to-br from-orange-50 via-white to-green-50",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(Ju,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:e(h[0].designation)}),s.jsx("p",{className:"text-gray-600",children:"Head of the Gram Panchayat"})]}),s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden border-t-4 border-orange-600",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-green-600 h-2"}),s.jsx("div",{className:"p-8 md:p-12",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center md:items-start",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-orange-600 to-green-600 rounded-full opacity-20 blur-xl"}),s.jsx("div",{className:"relative w-56 h-56 rounded-full border-8 border-white shadow-2xl overflow-hidden bg-gradient-to-br from-orange-100 to-green-100 flex items-center justify-center",children:h[0].photo?s.jsx("img",{src:h[0].photo,alt:e(h[0].name),className:"w-full h-full object-cover"}):s.jsx(xf,{size:140,className:"text-gray-400"})}),s.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 bg-gradient-to-r from-orange-600 to-green-600 text-white px-6 py-2 rounded-full shadow-lg text-sm font-bold",children:"SARPANCH"})]}),s.jsxs("div",{className:"flex-1 text-center md:text-left space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-3xl font-bold text-blue-900 mb-2",children:e(h[0].name)}),s.jsx("p",{className:"text-xl text-orange-600 font-semibold mb-1",children:e(h[0].designation)})]}),s.jsxs("div",{className:"inline-flex items-center gap-3 bg-gradient-to-r from-orange-50 to-green-50 px-6 py-3 rounded-xl border border-orange-200",children:[s.jsx(io,{size:20,className:"text-orange-600"}),s.jsx("a",{href:`tel:${h[0].phone}`,className:"text-blue-900 hover:text-orange-600 transition-colors font-semibold",children:h[0].phone})]}),h[0].termStart&&s.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:[s.jsx("p",{className:"text-sm text-blue-900 font-semibold mb-1",children:"Current Term"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[new Date(h[0].termStart).getFullYear()," - ",new Date(h[0].termEnd).getFullYear()]})]}),s.jsx("div",{className:"pt-4 border-t border-gray-200",children:s.jsx("p",{className:"text-sm text-gray-600 italic leading-relaxed",children:'"Committed to the development and welfare of our village community"'})})]})]})})]})})]})}),f.length>0&&s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(Ju,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:e(f[0].designation)}),s.jsx("p",{className:"text-gray-600",children:"Vice-Head of the Gram Panchayat"})]}),s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"bg-gradient-to-br from-orange-50 via-white to-green-50 rounded-2xl shadow-2xl overflow-hidden border-t-4 border-green-600",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-600 to-orange-600 h-2"}),s.jsx("div",{className:"p-8 md:p-12",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center md:items-start",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-green-600 to-orange-600 rounded-full opacity-20 blur-xl"}),s.jsx("div",{className:"relative w-56 h-56 rounded-full border-8 border-white shadow-2xl overflow-hidden bg-gradient-to-br from-green-100 to-orange-100 flex items-center justify-center",children:f[0].photo?s.jsx("img",{src:f[0].photo,alt:e(f[0].name),className:"w-full h-full object-cover"}):s.jsx(xf,{size:140,className:"text-gray-400"})}),s.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 bg-gradient-to-r from-green-600 to-orange-600 text-white px-6 py-2 rounded-full shadow-lg text-sm font-bold",children:"UP-SARPANCH"})]}),s.jsxs("div",{className:"flex-1 text-center md:text-left space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-3xl font-bold text-blue-900 mb-2",children:e(f[0].name)}),s.jsx("p",{className:"text-xl text-green-600 font-semibold mb-1",children:e(f[0].designation)})]}),s.jsxs("div",{className:"inline-flex items-center gap-3 bg-gradient-to-r from-green-50 to-orange-50 px-6 py-3 rounded-xl border border-green-200",children:[s.jsx(io,{size:20,className:"text-green-600"}),s.jsx("a",{href:`tel:${f[0].phone}`,className:"text-blue-900 hover:text-green-600 transition-colors font-semibold",children:f[0].phone})]}),f[0].termStart&&s.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200",children:[s.jsx("p",{className:"text-sm text-blue-900 font-semibold mb-1",children:"Current Term"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[new Date(f[0].termStart).getFullYear()," - ",new Date(f[0].termEnd).getFullYear()]})]}),s.jsx("div",{className:"pt-4 border-t border-gray-200",children:s.jsx("p",{className:"text-sm text-gray-600 italic leading-relaxed",children:'"Supporting the vision of progress and prosperity for our community"'})})]})]})})]})})]})}),g.length>0&&s.jsx("section",{className:"py-16 bg-gradient-to-br from-orange-50 via-white to-green-50",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(ya,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:"Gram Panchayat Members"}),s.jsx("p",{className:"text-gray-600",children:"Elected representatives serving our community"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:g.map((w,b)=>s.jsxs("div",{className:"group bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border-t-4 border-orange-600 hover:scale-105",children:[s.jsx("div",{className:"h-1 bg-gradient-to-r from-orange-600 to-green-600"}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"relative mb-6",children:[s.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-orange-600 to-green-600 rounded-full opacity-0 group-hover:opacity-20 blur-lg transition-opacity"}),s.jsx("div",{className:"relative w-32 h-32 mx-auto rounded-full border-4 border-white shadow-xl overflow-hidden bg-gradient-to-br from-orange-100 to-green-100 flex items-center justify-center",children:w.photo?s.jsx("img",{src:w.photo,alt:e(w.name),className:"w-full h-full object-cover"}):s.jsx(xf,{size:80,className:"text-gray-400"})}),s.jsx("div",{className:"absolute -top-2 -right-2 w-10 h-10 bg-gradient-to-r from-orange-600 to-green-600 rounded-full flex items-center justify-center text-white font-bold shadow-lg",children:b+1})]}),s.jsxs("div",{className:"text-center space-y-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-1 group-hover:text-orange-600 transition-colors",children:e(w.name)}),s.jsx("p",{className:"text-orange-600 font-semibold text-sm",children:e(w.designation)})]}),s.jsx("div",{className:"pt-3 border-t border-gray-200",children:s.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-orange-50 to-green-50 px-4 py-2 rounded-lg border border-orange-200",children:[s.jsx(io,{size:16,className:"text-orange-600"}),s.jsx("a",{href:`tel:${w.phone}`,className:"text-blue-900 hover:text-orange-600 transition-colors text-sm font-medium",children:w.phone})]})})]})]})]},w.id))})]})}),y.length>0&&s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(ul,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:"Office Staff"}),s.jsx("p",{className:"text-gray-600",children:"Dedicated professionals serving the public"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:y.map((w,b)=>s.jsxs("div",{className:"group bg-gradient-to-br from-green-50 via-white to-orange-50 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border-t-4 border-green-600 hover:scale-105",children:[s.jsx("div",{className:"h-1 bg-gradient-to-r from-green-600 to-orange-600"}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"relative mb-6",children:[s.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-green-600 to-orange-600 rounded-full opacity-0 group-hover:opacity-20 blur-lg transition-opacity"}),s.jsx("div",{className:"relative w-32 h-32 mx-auto rounded-full border-4 border-white shadow-xl overflow-hidden bg-gradient-to-br from-green-100 to-orange-100 flex items-center justify-center",children:w.photo?s.jsx("img",{src:w.photo,alt:e(w.name),className:"w-full h-full object-cover"}):s.jsx(xf,{size:80,className:"text-gray-400"})}),s.jsx("div",{className:"absolute -top-2 -right-2 w-10 h-10 bg-gradient-to-r from-green-600 to-orange-600 rounded-full flex items-center justify-center text-white font-bold shadow-lg",children:b+1})]}),s.jsxs("div",{className:"text-center space-y-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-1 group-hover:text-green-600 transition-colors",children:e(w.name)}),s.jsx("p",{className:"text-green-600 font-semibold text-sm",children:e(w.designation)})]}),s.jsx("div",{className:"pt-3 border-t border-gray-200",children:s.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-green-50 to-orange-50 px-4 py-2 rounded-lg border border-green-200",children:[s.jsx(io,{size:16,className:"text-green-600"}),s.jsx("a",{href:`tel:${w.phone}`,className:"text-blue-900 hover:text-green-600 transition-colors text-sm font-medium",children:w.phone})]})})]})]})]},w.id))})]})})]}):null},sw=async()=>{try{const n=Zt(Xe,Gt.services()),e=Es(n,ac("name.en","asc")),t=await fs(e),r=[];return t.forEach(a=>{r.push({id:a.id,...a.data()})}),r}catch(n){throw console.error("Error fetching services:",n),n}},EU=async n=>{try{const e=At(Xe,Gt.services(),n),t=await Us(e);return t.exists()?{id:t.id,...t.data()}:null}catch(e){throw console.error("Error fetching service:",e),e}},AU=async n=>{try{const e=Zt(Xe,Gt.services()),t=await bs(e,{...n,createdAt:vt.now(),updatedAt:vt.now()});return console.log("Service created successfully with ID:",t.id),t.id}catch(e){throw console.error("Error creating service:",e),e}},TU=async(n,e)=>{try{const t=At(Xe,Gt.services(),n);return await Vo(t,{...e,updatedAt:vt.now()}),console.log("Service updated successfully:",n),n}catch(t){throw console.error("Error updating service:",t),t}},CU=async n=>{try{const e=At(Xe,Gt.services(),n);return await ml(e),console.log("Service deleted successfully:",n),!0}catch(e){throw console.error("Error deleting service:",e),e}},IU=()=>{const{t:n,getContent:e}=hs(),[t,r]=K.useState(""),[a,o]=K.useState("All"),[c,u]=K.useState([]),[h,f]=K.useState(!0);K.useEffect(()=>{(async()=>{try{f(!0);const b=await sw();u(Array.isArray(b)?b:[])}catch(b){console.error("Error loading services:",b),u([])}finally{f(!1)}})()},[]);const g=["All","Certificate","Tax","NOC","Other"],y=c.filter(w=>{const b=e(w.name).toLowerCase().includes(t.toLowerCase()),T=a==="All"||w.category===a;return b&&T});return h?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary-600"})}):s.jsxs("div",{children:[s.jsx("section",{className:"bg-gradient-to-r from-primary-600 to-primary-800 text-white py-16",children:s.jsxs("div",{className:"container-custom",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:n("nav.services")}),s.jsx("p",{className:"text-xl text-primary-100",children:"Explore various services provided by Gram Panchayat"})]})}),s.jsx("section",{className:"py-12",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"mb-8 flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(Bi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:n("common.search"),value:t,onChange:w=>r(w.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:g.map(w=>s.jsx("button",{onClick:()=>o(w),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a===w?"bg-primary-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:w},w))})]}),c.length===0?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-500 text-lg",children:n("common.language")==="en"?"No services have been added yet.":"     ."})}):y.length===0?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-500 text-lg",children:n("common.noResults")})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:y.map(w=>s.jsxs("div",{className:"card p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:e(w.name)}),s.jsx("span",{className:"px-3 py-1 bg-primary-100 text-primary-700 text-sm font-medium rounded-full",children:w.category})]}),s.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:e(w.description)}),s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Fees: "}),s.jsx("span",{className:"font-semibold text-gray-700",children:w.fees})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Time: "}),s.jsx("span",{className:"font-semibold text-gray-700",children:w.processingTime})]})]}),s.jsxs(_n,{to:`/services/${w.id}`,className:"mt-4 inline-flex items-center gap-1 text-primary-600 hover:text-primary-700 font-medium",children:[n("common.viewDetails"),s.jsx(fy,{size:16})]})]},w.id))})]})})]})},aw=async()=>{try{const n=Zt(Xe,Gt.schemes()),e=Es(n,ac("name.en","asc")),t=await fs(e),r=[];return t.forEach(a=>{r.push({id:a.id,...a.data()})}),r}catch(n){throw console.error("Error fetching schemes:",n),n}},RU=async n=>{try{const e=At(Xe,Gt.schemes(),n),t=await Us(e);return t.exists()?{id:t.id,...t.data()}:null}catch(e){throw console.error("Error fetching scheme:",e),e}},kU=async n=>{try{const e=Zt(Xe,Gt.schemes()),t=await bs(e,{...n,createdAt:vt.now(),updatedAt:vt.now()});return console.log("Scheme created successfully with ID:",t.id),t.id}catch(e){throw console.error("Error creating scheme:",e),e}},PU=async(n,e)=>{try{const t=At(Xe,Gt.schemes(),n);return await Vo(t,{...e,updatedAt:vt.now()}),console.log("Scheme updated successfully:",n),n}catch(t){throw console.error("Error updating scheme:",t),t}},LU=async n=>{try{const e=At(Xe,Gt.schemes(),n);return await ml(e),console.log("Scheme deleted successfully:",n),!0}catch(e){throw console.error("Error deleting scheme:",e),e}},DU=()=>{const{t:n,getContent:e}=hs(),[t,r]=K.useState(""),[a,o]=K.useState("All"),[c,u]=K.useState("All"),[h,f]=K.useState([]),[g,y]=K.useState(!0);K.useEffect(()=>{(async()=>{try{y(!0);const j=await aw();f(Array.isArray(j)?j:[])}catch(j){console.error("Error loading schemes:",j),f([])}finally{y(!1)}})()},[]);const w=["All","CENTRAL","STATE","LOCAL","OTHER"],b=["All","ACTIVE","CLOSED","UPCOMING"],T=h.filter(S=>{const j=e(S.name).toLowerCase().includes(t.toLowerCase()),E=a==="All"||S.category===a,L=c==="All"||S.status===c;return j&&E&&L});return g?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary-600"})}):s.jsxs("div",{children:[s.jsx("section",{className:"bg-gradient-to-r from-primary-600 to-primary-800 text-white py-16",children:s.jsxs("div",{className:"container-custom",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:n("nav.schemes")}),s.jsx("p",{className:"text-xl text-primary-100",children:"Government schemes and welfare programs for villagers"})]})}),s.jsx("section",{className:"py-12",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"mb-8 space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Bi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:n("common.search"),value:t,onChange:S=>r(S.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex gap-2 flex-wrap",children:w.map(S=>s.jsx("button",{onClick:()=>o(S),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a===S?"bg-primary-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:S},S))}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:b.map(S=>s.jsx("button",{onClick:()=>u(S),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c===S?"bg-secondary-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:S},S))})]})]}),h.length===0?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-500 text-lg",children:n("common.language")==="en"?"No schemes have been added yet.":"     ."})}):T.length===0?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-500 text-lg",children:n("common.noResults")})}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:T.map(S=>s.jsxs("div",{className:"card p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-800 flex-1",children:e(S.name)}),s.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[s.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm font-medium rounded-full",children:S.category}),s.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${S.status==="ACTIVE"?"bg-green-100 text-green-700":S.status==="CLOSED"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:S.status})]})]}),s.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3",children:e(S.description)}),s.jsxs(_n,{to:`/schemes/${S.id}`,className:"inline-flex items-center gap-1 text-primary-600 hover:text-primary-700 font-medium",children:[n("common.viewDetails"),s.jsx(fy,{size:16})]})]},S.id))})]})})]})},MU="forms",iw=async()=>{try{const n=Zt(Xe,Gt.forms()),e=Es(n,ac("createdAt","desc")),t=await fs(e),r=[];return t.forEach(a=>{r.push({id:a.id,...a.data()})}),console.log(`Loaded ${r.length} forms from Firebase`),r}catch(n){throw console.error("Error loading forms:",n),n}},OU=async n=>{try{const e=At(Xe,Gt.forms(),n),t=await Us(e);if(t.exists())return{id:t.id,...t.data()};throw new Error("Form not found")}catch(e){throw console.error("Error loading form:",e),e}},dT=async(n,e,t=null)=>{try{if(n.type!=="application/pdf")throw new Error("Only PDF files are allowed");const r=10*1024*1024;if(n.size>r)throw new Error("File size must be less than 10MB");const a=`${Date.now()}_${n.name}`,o=uy(dy,`${MU}/${e}/${a}`),c=PO(o,n);return new Promise((u,h)=>{c.on("state_changed",f=>{const g=f.bytesTransferred/f.totalBytes*100;console.log(`Upload progress: ${g}%`),t&&t(g)},f=>{console.error("Error uploading PDF:",f),h(f)},async()=>{const f=await VA(c.snapshot.ref);console.log("PDF uploaded successfully:",f),u(f)})})}catch(r){throw console.error("Error in uploadPDF:",r),r}},hT=async n=>{try{if(!n){console.log("No file URL provided, skipping deletion");return}const e=n.split("/o/");if(e.length<2){console.warn("Invalid file URL format");return}const t=e[1],r=decodeURIComponent(t.split("?")[0]),a=uy(dy,r);await UA(a),console.log("PDF deleted from storage:",r)}catch(e){if(e.code==="storage/object-not-found")console.log("File already deleted or does not exist");else throw console.error("Error deleting PDF:",e),e}},FU=async(n,e,t=null)=>{try{const r=Zt(Xe,Gt.forms()),a={titleEn:n.titleEn||"",titleMr:n.titleMr||"",descriptionEn:n.descriptionEn||"",descriptionMr:n.descriptionMr||"",category:n.category||"General",language:n.language||"BOTH",fileUrl:"",fileName:e.name,fileSize:e.size,createdAt:Yt(),updatedAt:Yt()},o=await bs(r,a);console.log("Form document created with ID:",o.id);const c=await dT(e,o.id,t);return await Vo(o,{fileUrl:c}),console.log("Form updated with file URL"),o.id}catch(r){throw console.error("Error creating form:",r),r}},VU=async(n,e,t=null,r=null,a=null)=>{try{const o=At(Xe,Gt.forms(),n),c={titleEn:e.titleEn||"",titleMr:e.titleMr||"",descriptionEn:e.descriptionEn||"",descriptionMr:e.descriptionMr||"",category:e.category||"General",language:e.language||"BOTH",updatedAt:Yt()};if(t){r&&await hT(r);const u=await dT(t,n,a);c.fileUrl=u,c.fileName=t.name,c.fileSize=t.size}await Vo(o,c),console.log("Form updated:",n)}catch(o){throw console.error("Error updating form:",o),o}},UU=async(n,e)=>{try{e&&await hT(e);const t=At(Xe,Gt.forms(),n);await ml(t),console.log("Form deleted:",n)}catch(t){throw console.error("Error deleting form:",t),t}},BU=()=>{const{language:n}=hs(),[e,t]=K.useState([]),[r,a]=K.useState(""),[o,c]=K.useState("ALL"),[u,h]=K.useState(!0);K.useEffect(()=>{(async()=>{try{h(!0);const S=await iw();console.log("Fetched forms:",S),console.log("First form data:",S[0]),t(S)}catch(S){console.error("Error loading forms:",S),t([])}finally{h(!1)}})()},[]);const f=["ALL",...new Set(e.map(T=>T.category))],g=e.filter(T=>{const S=T.titleEn&&T.titleEn.toLowerCase().includes(r.toLowerCase())||T.titleMr&&T.titleMr.toLowerCase().includes(r.toLowerCase()),j=o==="ALL"||T.category===o;return S&&j}),y=T=>({Certificate:"from-blue-500 to-blue-600 border-blue-400",APPLICATION:"from-green-500 to-green-600 border-green-400",Tax:"from-orange-500 to-orange-600 border-orange-400",LICENSE:"from-purple-500 to-purple-600 border-purple-400",OTHER:"from-gray-500 to-gray-600 border-gray-400"})[T]||"from-gray-500 to-gray-600 border-gray-400",w=T=>({Certificate:"",APPLICATION:"",Tax:"",LICENSE:"",OTHER:""})[T]||"",b=T=>{console.log("Download clicked for form:",T),console.log("File URL:",T.fileUrl),T.fileUrl&&T.fileUrl.trim()!==""?window.open(T.fileUrl,"_blank"):(console.error("File URL is missing or empty for form:",T.id),alert(n==="en"?"Download link not available. Please contact administrator.":"   .    ."))};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[s.jsxs("section",{className:"relative bg-gradient-to-br from-orange-600 via-white to-green-600 py-20 overflow-hidden",children:[s.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:[s.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-white rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-10 right-10 w-40 h-40 bg-blue-900 rounded-full blur-3xl"})]}),s.jsx("div",{className:"container-custom relative z-10",children:s.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/20 backdrop-blur-md px-6 py-3 rounded-full mb-6 border border-white/30 shadow-lg",children:[s.jsx(n4,{className:"text-blue-900",size:24}),s.jsx("span",{className:"text-blue-900 font-bold text-lg",children:n==="en"?"Document Center":" "})]}),s.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-6 text-blue-900 leading-tight",children:n==="en"?"Forms & Downloads":"  "}),s.jsx("p",{className:"text-xl md:text-2xl text-gray-700 mb-8 leading-relaxed",children:n==="en"?"Download application forms, certificates, and important documents with ease":" ,       "}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 max-w-2xl mx-auto",children:[s.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-4 shadow-lg border border-orange-200",children:[s.jsx("div",{className:"text-3xl font-bold text-orange-600",children:e.length}),s.jsx("div",{className:"text-sm text-gray-600 font-medium",children:n==="en"?"Total Forms":" "})]}),s.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-4 shadow-lg border border-green-200",children:[s.jsx("div",{className:"text-3xl font-bold text-green-600",children:f.length-1}),s.jsx("div",{className:"text-sm text-gray-600 font-medium",children:n==="en"?"Categories":""})]}),s.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-4 shadow-lg border border-blue-200 col-span-2 md:col-span-1",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:"24/7"}),s.jsx("div",{className:"text-sm text-gray-600 font-medium",children:n==="en"?"Available":""})]})]})]})}),s.jsx("div",{className:"absolute bottom-0 left-0 w-full",children:s.jsx("svg",{viewBox:"0 0 1440 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z",fill:"white"})})})]}),s.jsx("section",{className:"py-8 -mt-12 relative z-20",children:s.jsx("div",{className:"container-custom",children:s.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl border-t-4 border-orange-600",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"relative group",children:[s.jsx(Bi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-orange-500 group-focus-within:text-orange-600 transition-colors",size:22}),s.jsx("input",{type:"text",placeholder:n==="en"?"Search forms by name...":"  ...",value:r,onChange:T=>a(T.target.value),className:"w-full pl-12 pr-4 py-4 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-all text-gray-700 font-medium"})]}),s.jsxs("div",{className:"relative group",children:[s.jsx(my,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-green-600 group-focus-within:text-green-700 transition-colors z-10",size:22}),s.jsx("select",{value:o,onChange:T=>c(T.target.value),className:"w-full pl-12 pr-4 py-4 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-green-600 focus:ring-2 focus:ring-green-200 appearance-none bg-white transition-all text-gray-700 font-medium cursor-pointer",children:f.map(T=>s.jsx("option",{value:T,children:T==="ALL"?n==="en"?" All Categories":"  ":`${w(T)} ${T}`},T))}),s.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:s.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),r||o!=="ALL"?s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[s.jsx(Os,{size:16,className:"text-orange-500"}),s.jsx("span",{children:n==="en"?`Found ${g.length} form${g.length!==1?"s":""}`:`${g.length}  `})]})}):null]})})}),s.jsx("section",{className:"py-12",children:s.jsxs("div",{className:"container-custom",children:[u?s.jsxs("div",{className:"flex flex-col justify-center items-center py-20",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-20 w-20 border-b-4 border-t-4 border-orange-600"}),s.jsx(hr,{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-orange-600",size:32})]}),s.jsx("p",{className:"text-gray-600 font-semibold mt-6 text-lg",children:n==="en"?"Loading forms...":"   ..."})]}):g.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:g.map((T,S)=>s.jsxs("div",{className:"group relative bg-white rounded-2xl shadow-lg border-t-4 border-orange-600 overflow-hidden hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2",style:{animationDelay:`${S*50}ms`},children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-orange-100 to-green-100 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),s.jsx("div",{className:"relative bg-gradient-to-r from-blue-900 to-blue-800 p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-4 bg-white/20 backdrop-blur-sm rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:s.jsx(hr,{className:"text-white",size:32})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-bold text-white text-lg leading-tight mb-2 line-clamp-2",children:n==="en"?T.titleEn:T.titleMr||T.titleEn}),s.jsx("div",{className:"inline-flex items-center gap-2",children:s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold bg-gradient-to-r ${y(T.category)} text-white shadow-md border-2`,children:[w(T.category)," ",T.category]})})]})]})}),s.jsxs("div",{className:"relative p-6 space-y-4",children:[s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed line-clamp-3 min-h-[60px]",children:n==="en"?T.descriptionEn:T.descriptionMr||T.descriptionEn}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[T.language&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-semibold bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-md",children:[s.jsx(jf,{size:14}),T.language]}),T.createdAt&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-semibold bg-gray-100 text-gray-700 border border-gray-300",children:[s.jsx(ds,{size:14}),(()=>{try{return(T.createdAt?.toDate?T.createdAt.toDate():new Date(T.createdAt)).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Recent"}})()]})]}),s.jsxs("button",{onClick:()=>b(T),className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-orange-600 to-orange-500 text-white rounded-xl hover:from-orange-700 hover:to-orange-600 transition-all shadow-lg hover:shadow-xl font-bold text-sm group-hover:scale-105 transform duration-300",children:[s.jsx(Do,{size:20,className:"animate-bounce"}),s.jsx("span",{children:n==="en"?"Download Form":"  "}),s.jsx(Mc,{size:18,className:"group-hover:translate-x-1 transition-transform"})]})]}),T.fileName&&s.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-gray-100 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-600 flex-1 min-w-0",children:[s.jsx($F,{size:14,className:"flex-shrink-0 text-blue-600"}),s.jsx("span",{className:"truncate font-medium",children:T.fileName})]}),T.fileSize&&s.jsxs("span",{className:"ml-3 text-gray-500 font-semibold bg-white px-2 py-1 rounded-md border border-gray-300",children:[(T.fileSize/1024).toFixed(1)," KB"]})]})}),s.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:s.jsx(Os,{className:"text-yellow-400",size:24})})]},T.id))}):s.jsxs("div",{className:"text-center py-20",children:[s.jsx("div",{className:"inline-block p-8 bg-gradient-to-br from-orange-50 to-green-50 rounded-full mb-6 border-4 border-orange-200",children:s.jsx(n4,{size:80,className:"text-orange-600"})}),s.jsx("h3",{className:"text-3xl font-bold text-gray-800 mb-3",children:n==="en"?"No Forms Available":"   "}),s.jsx("p",{className:"text-gray-600 text-lg max-w-md mx-auto",children:n==="en"?"Forms and documents will be displayed here once they are uploaded by the admin.":"         ."})]}),g.length>0&&s.jsxs("div",{className:"mt-16 bg-gradient-to-br from-blue-50 via-white to-green-50 border-2 border-blue-300 rounded-2xl p-8 shadow-xl",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[s.jsx("div",{className:"p-4 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl shadow-lg",children:s.jsx(x2,{className:"text-white",size:28})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-2",children:n==="en"?"How to Download & Submit Forms":"     "}),s.jsx("p",{className:"text-gray-600",children:n==="en"?"Follow these simple steps to complete your application":"        "})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"relative bg-white rounded-xl p-6 shadow-md border-t-4 border-orange-600 hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"absolute -top-4 left-6 w-12 h-12 bg-gradient-to-br from-orange-600 to-orange-700 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-lg",children:"1"}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(Do,{className:"text-orange-600",size:24}),s.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:n==="en"?"Download":""})]}),s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:n==="en"?'Click the "Download Form" button to get the PDF file on your device':'  PDF   "  "   '})]})]}),s.jsxs("div",{className:"relative bg-white rounded-xl p-6 shadow-md border-t-4 border-green-600 hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"absolute -top-4 left-6 w-12 h-12 bg-gradient-to-br from-green-600 to-green-700 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-lg",children:"2"}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(qF,{className:"text-green-600",size:24}),s.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:n==="en"?"Fill Form":" "})]}),s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:n==="en"?"Complete all required fields accurately and attach necessary documents":"         "})]})]}),s.jsxs("div",{className:"relative bg-white rounded-xl p-6 shadow-md border-t-4 border-blue-600 hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"absolute -top-4 left-6 w-12 h-12 bg-gradient-to-br from-blue-600 to-blue-700 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-lg",children:"3"}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(ho,{className:"text-blue-600",size:24}),s.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:n==="en"?"Submit":" "})]}),s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:n==="en"?"Submit the completed form at the Gram Panchayat office during working hours":"        "})]})]})]}),s.jsx("div",{className:"mt-6 p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg",children:s.jsxs("p",{className:"text-sm text-yellow-800 flex items-start gap-2",children:[s.jsx(x2,{size:18,className:"flex-shrink-0 mt-0.5"}),s.jsx("span",{children:n==="en"?"For any assistance, please contact the Gram Panchayat office during working hours or call our helpline.":" ,            ."})]})})]})]})})]})},zU=()=>{const{t:n,language:e}=hs(),[t,r]=K.useState(null),[a,o]=K.useState(!0);return K.useEffect(()=>{(async()=>{try{o(!0);const u=await cT();r(u)}catch(u){console.error("Error loading education content:",u),r(null)}finally{o(!1)}})()},[]),a?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-[#ff6b00]"})}):t?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsxs("section",{className:"relative bg-gradient-to-br from-orange-600 via-white to-green-600 py-20",children:[s.jsx("div",{className:"absolute inset-0 bg-white/85 backdrop-blur-sm"}),s.jsx("div",{className:"container-custom relative z-10",children:s.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[s.jsxs("div",{className:"inline-flex items-center gap-3 mb-6 px-6 py-3 bg-gradient-to-r from-orange-600 to-green-600 rounded-full shadow-lg",children:[s.jsx(r4,{className:"text-white",size:32}),s.jsx("span",{className:"text-white font-bold text-xl",children:e==="en"?"Education":""})]}),s.jsx("h1",{className:"text-5xl font-bold mb-6 bg-gradient-to-r from-orange-600 to-green-600 bg-clip-text text-transparent",children:n("nav.education")}),s.jsx("p",{className:"text-xl text-gray-700 leading-relaxed",children:e==="en"?t.description.en:t.description.mr}),s.jsxs("div",{className:"mt-8 flex items-center justify-center gap-8 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-orange-600 rounded-full"}),s.jsx("span",{children:e==="en"?"Knowledge & Wisdom":"  "})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-600 rounded-full"}),s.jsx("span",{children:e==="en"?"Growth & Progress":"  "})]})]})]})})]}),s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(Wd,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:e==="en"?"Education at a Glance":"  "}),s.jsx("p",{className:"text-gray-600",children:"Key metrics and achievements in education"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"group bg-gradient-to-br from-blue-50 to-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all border-t-4 border-blue-600 hover:scale-105",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform",children:s.jsx(Ju,{className:"text-white",size:32})}),s.jsx(Os,{className:"text-blue-300",size:24})]}),s.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:t.stats.literacyRate}),s.jsx("div",{className:"text-gray-700 font-semibold",children:e==="en"?"Literacy Rate":" "})]}),s.jsxs("div",{className:"group bg-gradient-to-br from-green-50 to-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all border-t-4 border-green-600 hover:scale-105",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-600 to-green-700 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform",children:s.jsx(ya,{className:"text-white",size:32})}),s.jsx(Os,{className:"text-green-300",size:24})]}),s.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:t.stats.totalStudents}),s.jsx("div",{className:"text-gray-700 font-semibold",children:e==="en"?"Total Students":" "})]}),s.jsxs("div",{className:"group bg-gradient-to-br from-orange-50 to-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all border-t-4 border-orange-600 hover:scale-105",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-600 to-orange-700 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform",children:s.jsx(r4,{className:"text-white",size:32})}),s.jsx(Os,{className:"text-orange-300",size:24})]}),s.jsx("div",{className:"text-4xl font-bold text-orange-600 mb-2",children:t.stats.totalTeachers}),s.jsx("div",{className:"text-gray-700 font-semibold",children:e==="en"?"Total Teachers":" "})]}),s.jsxs("div",{className:"group bg-gradient-to-br from-purple-50 to-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all border-t-4 border-purple-600 hover:scale-105",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-600 to-purple-700 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform",children:s.jsx(rT,{className:"text-white",size:32})}),s.jsx(Os,{className:"text-purple-300",size:24})]}),s.jsx("div",{className:"text-4xl font-bold text-purple-600 mb-2",children:t.stats.schoolDropoutRate}),s.jsx("div",{className:"text-gray-700 font-semibold",children:e==="en"?"Dropout Rate":"  "})]})]})]})}),t.schools.length>0&&s.jsx("section",{className:"py-16 bg-gradient-to-br from-orange-50 via-white to-green-50",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(b2,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:e==="en"?"Our Schools":" "}),s.jsx("p",{className:"text-gray-600",children:"Centers of excellence nurturing young minds"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:t.schools.map((c,u)=>s.jsxs("div",{className:"group bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-all overflow-hidden border-t-4 border-orange-600 hover:scale-105",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-green-600 h-2"}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex items-start justify-between mb-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-2 group-hover:text-orange-600 transition-colors",children:e==="en"?c.name.en:c.name.mr}),s.jsx("span",{className:"inline-block px-4 py-1 bg-gradient-to-r from-orange-100 to-green-100 text-orange-700 rounded-full text-sm font-semibold",children:e==="en"?c.type.en:c.type.mr})]}),s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-lg",children:u+1})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-xl text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:c.students}),s.jsx("div",{className:"text-xs text-gray-600 font-semibold",children:e==="en"?"Students":""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-xl text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:c.teachers}),s.jsx("div",{className:"text-xs text-gray-600 font-semibold",children:e==="en"?"Teachers":""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-4 rounded-xl text-center",children:[s.jsx("div",{className:"text-lg font-bold text-orange-600 mb-1",children:c.classes}),s.jsx("div",{className:"text-xs text-gray-600 font-semibold",children:e==="en"?"Classes":""})]})]}),s.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:e==="en"?c.description.en:c.description.mr}),s.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-green-50 p-6 rounded-xl border border-orange-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(Ju,{className:"text-orange-600",size:20}),s.jsx("div",{className:"text-sm font-bold text-blue-900",children:e==="en"?"Facilities & Amenities":"  "})]}),s.jsx("div",{className:"text-sm text-gray-700 leading-relaxed",children:e==="en"?c.facilities.en:c.facilities.mr})]})]})]},c.id))})]})}),t.anganwadis.length>0&&s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(g2,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:e==="en"?"Anganwadi Centers":""}),s.jsx("p",{className:"text-gray-600",children:"Early childhood care and development"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:t.anganwadis.map((c,u)=>s.jsxs("div",{className:"group bg-gradient-to-br from-green-50 via-white to-orange-50 rounded-2xl shadow-xl hover:shadow-2xl transition-all overflow-hidden border-t-4 border-green-600 hover:scale-105",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-600 to-orange-600 h-2"}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex items-start justify-between mb-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-2 group-hover:text-green-600 transition-colors",children:e==="en"?c.name.en:c.name.mr}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full"}),s.jsx("span",{className:"font-semibold",children:e==="en"?c.location.en:c.location.mr})]})]}),s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-600 to-orange-600 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-lg",children:u+1})]}),s.jsx("div",{className:"bg-gradient-to-br from-green-100 to-orange-100 p-6 rounded-xl mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-green-600 mb-1",children:c.children}),s.jsx("div",{className:"text-xs text-gray-600 font-semibold",children:e==="en"?"Children":""})]}),s.jsx("div",{className:"w-px h-12 bg-gray-300"}),s.jsxs("div",{className:"text-center px-4",children:[s.jsx(g2,{className:"mx-auto text-orange-600 mb-1",size:28}),s.jsx("div",{className:"text-xs text-gray-600 font-semibold",children:e==="en"?"Age 0-6":" -"})]})]})}),s.jsxs("div",{className:"space-y-3 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3 bg-white p-3 rounded-lg border border-green-200",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-600 to-green-700 rounded-full flex items-center justify-center",children:s.jsx(ya,{className:"text-white",size:20})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 font-semibold",children:e==="en"?"Worker":""}),s.jsx("div",{className:"text-sm font-bold text-gray-800",children:e==="en"?c.worker.en:c.worker.mr})]})]}),s.jsxs("div",{className:"flex items-center gap-3 bg-white p-3 rounded-lg border border-orange-200",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-600 to-orange-700 rounded-full flex items-center justify-center",children:s.jsx(ya,{className:"text-white",size:20})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 font-semibold",children:e==="en"?"Helper":""}),s.jsx("div",{className:"text-sm font-bold text-gray-800",children:e==="en"?c.helper.en:c.helper.mr})]})]})]}),s.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:e==="en"?c.description.en:c.description.mr}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-orange-50 p-6 rounded-xl border border-green-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(Ju,{className:"text-green-600",size:20}),s.jsx("div",{className:"text-sm font-bold text-blue-900",children:e==="en"?"Services Provided":"  "})]}),s.jsx("div",{className:"text-sm text-gray-700 leading-relaxed",children:e==="en"?c.services.en:c.services.mr})]})]})]},c.id))})]})}),t.programs.length>0&&s.jsx("section",{className:"py-16 bg-gradient-to-br from-orange-50 via-white to-green-50",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(Fg,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:e==="en"?"Educational Programs":" "}),s.jsx("p",{className:"text-gray-600",children:"Empowering communities through learning initiatives"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.programs.map((c,u)=>s.jsxs("div",{className:"group bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-all overflow-hidden border-t-4 border-blue-600 hover:scale-105",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-2"}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex items-start justify-between mb-6",children:[s.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:s.jsx(Fg,{className:"text-white",size:24})}),s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center text-white font-bold shadow-lg",children:u+1})]}),s.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-4 group-hover:text-blue-600 transition-colors leading-snug",children:e==="en"?c.name.en:c.name.mr}),s.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:e==="en"?c.description.en:c.description.mr}),s.jsxs("div",{className:"space-y-3",children:[c.timing&&s.jsxs("div",{className:"flex items-start gap-3 bg-gradient-to-r from-blue-50 to-purple-50 p-3 rounded-lg border border-blue-200",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 font-semibold mb-1",children:e==="en"?"Timing":""}),s.jsx("div",{className:"text-sm text-gray-800 font-medium",children:e==="en"?c.timing.en:c.timing.mr})]})]}),c.participants&&s.jsxs("div",{className:"flex items-start gap-3 bg-gradient-to-r from-green-50 to-orange-50 p-3 rounded-lg border border-green-200",children:[s.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mt-2"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 font-semibold mb-1",children:e==="en"?"Participants":""}),s.jsx("div",{className:"text-sm text-gray-800 font-medium",children:c.participants})]})]}),c.beneficiaries&&s.jsxs("div",{className:"flex items-start gap-3 bg-gradient-to-r from-green-50 to-orange-50 p-3 rounded-lg border border-green-200",children:[s.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mt-2"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 font-semibold mb-1",children:e==="en"?"Beneficiaries":""}),s.jsx("div",{className:"text-sm text-gray-800 font-medium",children:c.beneficiaries})]})]}),c.coordinator&&s.jsxs("div",{className:"flex items-start gap-3 bg-gradient-to-r from-orange-50 to-purple-50 p-3 rounded-lg border border-orange-200",children:[s.jsx("div",{className:"w-2 h-2 bg-orange-600 rounded-full mt-2"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-500 font-semibold mb-1",children:e==="en"?"Coordinator":""}),s.jsx("div",{className:"text-sm text-gray-800 font-medium",children:e==="en"?c.coordinator.en:c.coordinator.mr})]})]})]})]})]},c.id))})]})})]}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-16",children:s.jsxs("div",{className:"container-custom text-center",children:[s.jsx(b2,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:e==="en"?"No Education Data Available":"   "}),s.jsx("p",{className:"text-gray-600",children:e==="en"?"Education information has not been added yet.":"     ."})]})})},ow=async()=>{try{const n=Es(Zt(Xe,Gt.gallery()),ac("date","desc"));return(await fs(n)).docs.map(t=>({id:t.id,...t.data(),date:t.data().date?.toDate?.()||new Date(t.data().date),createdAt:t.data().createdAt?.toDate?.()||new Date,updatedAt:t.data().updatedAt?.toDate?.()||new Date}))}catch(n){throw console.error("Error getting gallery programs:",n),new Error("Failed to fetch gallery programs")}},fT=async n=>{try{const e=At(Xe,Gt.gallery(),n),t=await Us(e);if(!t.exists())throw new Error("Program not found");return{id:t.id,...t.data(),date:t.data().date?.toDate?.()||new Date(t.data().date),createdAt:t.data().createdAt?.toDate?.()||new Date,updatedAt:t.data().updatedAt?.toDate?.()||new Date}}catch(e){throw console.error("Error getting program:",e),new Error("Failed to fetch program")}},qU=async(n,e=[])=>{try{let t=[];if(e&&e.length>0){const o=`gallery/${Date.now()}`;t=await uT(e,o)}const r={titleEn:n.titleEn||"",titleMr:n.titleMr||"",descriptionEn:n.descriptionEn||"",descriptionMr:n.descriptionMr||"",date:vt.fromDate(new Date(n.date)),images:t,youtubeLink:n.youtubeLink||"",createdAt:Yt(),updatedAt:Yt()};return{id:(await bs(Zt(Xe,Gt.gallery()),r)).id,...r,date:new Date(n.date),createdAt:new Date,updatedAt:new Date}}catch(t){throw console.error("Error creating program:",t),new Error("Failed to create gallery program")}},HU=async(n,e,t=[],r=[])=>{try{const a=At(Xe,Gt.gallery(),n);let o=[];if(t&&t.length>0){const h=`gallery/${n}`;o=await uT(t,h)}const c=[...r,...o],u={titleEn:e.titleEn||"",titleMr:e.titleMr||"",descriptionEn:e.descriptionEn||"",descriptionMr:e.descriptionMr||"",date:vt.fromDate(new Date(e.date)),images:c,youtubeLink:e.youtubeLink||"",updatedAt:Yt()};return await Vo(a,u),{id:n,...u,date:new Date(e.date),updatedAt:new Date}}catch(a){throw console.error("Error updating program:",a),new Error("Failed to update gallery program")}},GU=async n=>{try{const e=await fT(n);e.images&&e.images.length>0&&await Promise.all(e.images.map(t=>yy(t).catch(r=>{console.warn("Failed to delete image:",t,r)}))),await ml(At(Xe,Gt.gallery(),n))}catch(e){throw console.error("Error deleting program:",e),new Error("Failed to delete gallery program")}},s1=n=>{if(!n)return null;n=n.trim();const e=[/(?:youtube\.com\/watch\?v=)([^&\s]+)/,/(?:youtube\.com\/embed\/)([^?&\s]+)/,/(?:youtube\.com\/v\/)([^?&\s]+)/,/(?:youtu\.be\/)([^?&\s]+)/,/(?:youtube\.com\/watch\?.*&v=)([^&\s]+)/];for(const t of e){const r=n.match(t);if(r&&r[1])return r[1]}return null},$U=n=>`https://www.youtube.com/embed/${n}?rel=0&modestbranding=1`,WU=(n,e="hqdefault")=>`https://img.youtube.com/vi/${n}/${e}.jpg`,KU=()=>{const{language:n}=hs(),[e,t]=K.useState([]),[r,a]=K.useState(!0),[o,c]=K.useState(null),[u,h]=K.useState(0),[f,g]=K.useState(0);K.useEffect(()=>{y()},[]);const y=async()=>{try{a(!0);const O=(await ow()).sort((te,ae)=>new Date(ae.date)-new Date(te.date));t(O)}catch(D){console.error("Error loading gallery programs:",D),t([])}finally{a(!1)}},w=D=>new Date(D).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),b=(D,O)=>{c(D),h(O),g(0)},T=()=>{c(null),g(0)},S=()=>{if(!o)return;const D=E(o),O=f===0?D-1:f-1;g(O)},j=()=>{if(!o)return;const D=E(o),O=f===D-1?0:f+1;g(O)},E=D=>{const O=D.images&&D.images.length>0?D.images.length:0,te=D.youtubeLink&&s1(D.youtubeLink)?1:0;return O+te},L=(D,O)=>{if(!D)return!1;const te=D.images&&D.images.length>0?D.images.length:0;return O>=te};return K.useEffect(()=>{const D=O=>{if(!o)return;const te=E(o);O.key==="ArrowLeft"&&te>1&&S(),O.key==="ArrowRight"&&te>1&&j(),O.key==="Escape"&&T()};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[o,u,f]),s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsxs("section",{className:"relative bg-gradient-to-br from-orange-600 via-white to-green-600 py-20",children:[s.jsx("div",{className:"absolute inset-0 bg-white/85 backdrop-blur-sm"}),s.jsx("div",{className:"container-custom relative z-10",children:s.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[s.jsxs("div",{className:"inline-flex items-center gap-3 mb-6 px-6 py-3 bg-gradient-to-r from-orange-600 to-green-600 rounded-full shadow-lg",children:[s.jsx(e4,{className:"text-white",size:32}),s.jsx("span",{className:"text-white font-bold text-xl",children:n==="en"?"Photo Gallery":" "})]}),s.jsx("h1",{className:"text-5xl font-bold mb-6 bg-gradient-to-r from-orange-600 to-green-600 bg-clip-text text-transparent",children:n==="en"?"Visual Chronicles":" "}),s.jsx("p",{className:"text-xl text-gray-700 leading-relaxed",children:n==="en"?"Capturing moments of progress, celebration, and community spirit in our village":"  ,      "}),s.jsxs("div",{className:"mt-8 flex items-center justify-center gap-8 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-orange-600 rounded-full"}),s.jsx("span",{children:n==="en"?"Events & Programs":"  "})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-600 rounded-full"}),s.jsx("span",{children:n==="en"?"Development Activities":" "})]})]})]})})]}),s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(Ma,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:n==="en"?"Programs & Events":"  "}),s.jsx("p",{className:"text-gray-600",children:n==="en"?"Browse through our collection of memorable moments":"    "})]}),r?s.jsxs("div",{className:"flex flex-col justify-center items-center py-16",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-600 mb-4"}),s.jsx("p",{className:"text-gray-600 font-semibold",children:n==="en"?"Loading gallery...":"   ..."})]}):e.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map((D,O)=>{const te=D.youtubeLink?s1(D.youtubeLink):null,ae=te!==null,H=D.images&&D.images.length>0,V=ae?WU(te,"hqdefault"):H?D.images[0]:"https://via.placeholder.com/400x300?text=No+Media",k=(H?D.images.length:0)+(ae?1:0);return s.jsxs("div",{className:"group relative bg-white rounded-2xl shadow-xl overflow-hidden cursor-pointer transform transition-all duration-300 hover:scale-105 hover:shadow-2xl border-t-4 border-orange-600",onClick:()=>b(D,O),children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-green-600 h-2"}),s.jsxs("div",{className:"relative h-64 overflow-hidden bg-gradient-to-br from-orange-100 to-green-100",children:[s.jsx("img",{src:V,alt:n==="en"?D.titleEn:D.titleMr,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onError:F=>{F.target.src="https://via.placeholder.com/400x300?text=No+Media"}}),ae&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:s.jsx("div",{className:"w-20 h-20 bg-red-600/90 backdrop-blur-sm rounded-full flex items-center justify-center shadow-2xl transform transition-transform group-hover:scale-110",children:s.jsx("div",{className:"w-0 h-0 border-t-8 border-t-transparent border-l-12 border-l-white border-b-8 border-b-transparent ml-1"})})}),k>1&&s.jsx("div",{className:"absolute top-4 right-4 bg-gradient-to-r from-orange-600 to-green-600 text-white px-4 py-2 rounded-full text-sm font-bold flex items-center gap-2 shadow-lg",children:H&&ae?s.jsxs(s.Fragment,{children:[s.jsx(Ma,{size:16}),s.jsx("span",{children:D.images.length}),s.jsx(v2,{size:16}),s.jsx("span",{children:"1"})]}):H?s.jsxs(s.Fragment,{children:[s.jsx(Ma,{size:16}),s.jsxs("span",{children:[D.images.length," ",n==="en"?"Photos":""]})]}):null}),s.jsx("div",{className:"absolute top-4 left-4 w-12 h-12 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center text-blue-900 font-bold text-lg shadow-lg",children:O+1}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300 flex items-center justify-center",children:s.jsxs("div",{className:"text-white text-center p-6 transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300",children:[s.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(Mo,{size:32})}),s.jsx("p",{className:"font-bold text-lg",children:n==="en"?"View Gallery":" "}),k>0&&s.jsxs("p",{className:"text-sm text-white/80 mt-1",children:[H&&`${D.images.length} ${n==="en"?"photos":""}`,H&&ae&&" + ",ae&&`1 ${n==="en"?"video":""}`]})]})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsx("h3",{className:"font-bold text-xl text-blue-900 mb-2 line-clamp-2 flex-1 group-hover:text-orange-600 transition-colors",children:n==="en"?D.titleEn:D.titleMr||D.titleEn}),s.jsx(Os,{className:"text-orange-500 flex-shrink-0 ml-2",size:20})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2 leading-relaxed",children:n==="en"?D.descriptionEn:D.descriptionMr||D.descriptionEn}),s.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-orange-50 to-green-50 px-4 py-2 rounded-lg border border-orange-200",children:[s.jsx(ds,{size:16,className:"text-orange-600"}),s.jsx("span",{className:"text-sm font-semibold text-gray-700",children:w(D.date)})]})]})]},D.id)})}):s.jsxs("div",{className:"text-center py-16 bg-gradient-to-br from-orange-50 to-green-50 rounded-2xl border-2 border-dashed border-orange-300",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-orange-100 to-green-100 rounded-full mb-6",children:s.jsx(Ma,{size:48,className:"text-orange-600"})}),s.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-3",children:n==="en"?"No Photos Available":"   "}),s.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:n==="en"?"Photos and programs will be displayed here once they are uploaded by the admin.":"         ."})]})]})}),o&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-hidden",onClick:T,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/95 via-blue-900/80 to-black/95 backdrop-blur-sm"}),s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-orange-600/10 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-green-600/10 rounded-full blur-3xl"}),s.jsxs("div",{className:"relative max-w-7xl w-full max-h-[95vh] flex flex-col z-10",onClick:D=>D.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 bg-white/10 backdrop-blur-md rounded-2xl px-6 py-4 border border-white/20",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center shadow-lg",children:s.jsx(e4,{size:24,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-white font-bold text-xl",children:n==="en"?"Photo Gallery":" "}),s.jsx("p",{className:"text-white/70 text-sm",children:n==="en"?o.titleEn:o.titleMr||o.titleEn})]})]}),s.jsx("button",{onClick:T,className:"w-12 h-12 bg-white/10 hover:bg-red-600 backdrop-blur-sm text-white rounded-full flex items-center justify-center transition-all shadow-lg hover:shadow-red-500/50 hover:scale-110","aria-label":"Close",children:s.jsx(Ui,{size:24})})]}),E(o)>1&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:D=>{D.stopPropagation(),S()},className:"absolute left-4 top-1/2 -translate-y-1/2 w-14 h-14 bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 backdrop-blur-sm text-white rounded-full flex items-center justify-center transition-all z-20 shadow-xl hover:scale-110","aria-label":"Previous Media",children:s.jsx(_F,{size:32})}),s.jsx("button",{onClick:D=>{D.stopPropagation(),j()},className:"absolute right-4 top-1/2 -translate-y-1/2 w-14 h-14 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 backdrop-blur-sm text-white rounded-full flex items-center justify-center transition-all z-20 shadow-xl hover:scale-110","aria-label":"Next Media",children:s.jsx(fy,{size:32})})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center bg-gradient-to-br from-black/50 to-blue-900/30 backdrop-blur-md rounded-2xl mb-4 p-8 border border-white/20 shadow-2xl overflow-hidden",children:s.jsx("div",{className:"relative w-full",children:L(o,f)?s.jsxs("div",{className:"w-full max-w-5xl mx-auto",children:[s.jsxs("div",{className:"relative pb-[56.25%]",children:[" ",s.jsx("iframe",{src:$U(s1(o.youtubeLink)),title:`${n==="en"?o.titleEn:o.titleMr} - YouTube Video`,className:"absolute top-0 left-0 w-full h-full rounded-xl shadow-2xl",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})]}),s.jsxs("div",{className:"absolute top-4 right-4 bg-gradient-to-r from-red-600 to-red-700 text-white px-5 py-2 rounded-full font-bold text-lg shadow-xl flex items-center gap-2",children:[s.jsx(v2,{size:20}),s.jsx("span",{children:n==="en"?"YouTube Video":"YouTube "})]})]}):s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("img",{src:o.images[f],alt:`${n==="en"?o.titleEn:o.titleMr} - Image ${f+1}`,className:"max-w-full max-h-[60vh] object-contain rounded-xl shadow-2xl",onError:D=>{D.target.src="https://via.placeholder.com/800x600?text=No+Image"}}),o.images&&o.images.length>0&&s.jsxs("div",{className:"absolute top-4 right-4 bg-gradient-to-r from-orange-600 to-green-600 text-white px-5 py-2 rounded-full font-bold text-lg shadow-xl flex items-center gap-2",children:[s.jsx(Ma,{size:20}),s.jsxs("span",{children:[f+1," / ",o.images.length]})]})]})})}),s.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 text-white border border-white/20 shadow-2xl",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600/20 to-green-600/20 h-1 rounded-full mb-6"}),s.jsx("div",{className:"flex justify-between items-start mb-6",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center shadow-lg",children:s.jsx(Os,{size:20,className:"text-white"})}),s.jsx("h3",{className:"text-2xl font-bold text-white",children:n==="en"?o.titleEn:o.titleMr||o.titleEn})]}),s.jsx("p",{className:"text-white/80 mb-4 leading-relaxed pl-13",children:n==="en"?o.descriptionEn:o.descriptionMr||o.descriptionEn}),s.jsxs("div",{className:"flex items-center gap-3 bg-white/10 backdrop-blur-sm px-4 py-3 rounded-xl border border-white/20 w-fit",children:[s.jsx(ds,{size:20,className:"text-orange-400"}),s.jsx("span",{className:"font-semibold",children:w(o.date)})]})]})}),o.images.length>1&&s.jsxs("div",{className:"border-t border-white/20 pt-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center",children:s.jsx(Ma,{size:16,className:"text-white"})}),s.jsx("h4",{className:"font-bold text-white",children:n==="en"?"All Photos":" "}),s.jsxs("span",{className:"text-white/60 text-sm",children:["(",o.images.length,")"]})]}),s.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-orange-600 scrollbar-track-white/10",children:o.images.map((D,O)=>s.jsxs("button",{onClick:te=>{te.stopPropagation(),g(O)},className:`relative flex-shrink-0 w-24 h-24 rounded-xl overflow-hidden transition-all group ${O===f?"ring-4 ring-orange-500 scale-110 shadow-xl shadow-orange-500/50":"ring-2 ring-white/30 hover:ring-white/60 hover:scale-105"}`,children:[s.jsx("img",{src:D,alt:`Thumbnail ${O+1}`,className:"w-full h-full object-cover",onError:te=>{te.target.src="https://via.placeholder.com/80x80?text=No+Image"}}),O===f&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-orange-600/50 to-transparent flex items-end justify-center pb-1",children:s.jsx("div",{className:"w-6 h-6 bg-white rounded-full flex items-center justify-center shadow-lg",children:s.jsx(Mo,{size:14,className:"text-orange-600"})})}),s.jsx("div",{className:"absolute top-1 right-1 w-6 h-6 bg-black/70 backdrop-blur-sm rounded-full flex items-center justify-center text-white text-xs font-bold",children:O+1})]},O))})]})]}),s.jsxs("div",{className:"mt-3 flex items-center justify-center gap-6 text-white/50 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded border border-white/20",children:""}),s.jsx("span",{children:n==="en"?"Previous":""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded border border-white/20",children:""}),s.jsx("span",{children:n==="en"?"Next":""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("kbd",{className:"px-2 py-1 bg-white/10 rounded border border-white/20",children:"ESC"}),s.jsx("span",{children:n==="en"?"Close":" "})]})]})]})]})]})},mT=Zt(Xe,Gt.financials()),gT=async()=>{try{const n=Es(mT,ac("transactionDate","desc")),e=await fs(n),t=[];return e.forEach(r=>{const a=r.data();t.push({id:r.id,...a,transactionDate:a.transactionDate?.toDate?.()?.toISOString?.()||a.transactionDate,createdAt:a.createdAt?.toDate?.()?.toISOString?.()||a.createdAt,updatedAt:a.updatedAt?.toDate?.()?.toISOString?.()||a.updatedAt})}),t}catch(n){throw console.error("Error fetching financial records:",n),new Error("Failed to fetch financial records")}},YU=async n=>{try{const e=At(Xe,Gt.financials(),n),t=await Us(e);if(t.exists()){const r=t.data();return{id:t.id,...r,transactionDate:r.transactionDate?.toDate?.()?.toISOString?.()||r.transactionDate,createdAt:r.createdAt?.toDate?.()?.toISOString?.()||r.createdAt,updatedAt:r.updatedAt?.toDate?.()?.toISOString?.()||r.updatedAt}}else throw new Error("Record not found")}catch(e){throw console.error("Error fetching record:",e),new Error("Failed to fetch record")}},XU=async n=>{try{if(!n.type||!n.category||!n.amount||!n.transactionDate)throw new Error("Missing required fields");const e=n.transactionDate instanceof Date?vt.fromDate(n.transactionDate):vt.fromDate(new Date(n.transactionDate)),t={type:n.type,category:n.category,subcategory:n.subcategory||"",subcategoryMr:n.subcategoryMr||"",amount:parseFloat(n.amount),description:n.description||"",descriptionMr:n.descriptionMr||"",transactionDate:e,paymentMode:n.paymentMode||"CASH",referenceNumber:n.referenceNumber||"",receivedFrom:n.receivedFrom||"",receivedFromMr:n.receivedFromMr||"",paidTo:n.paidTo||"",paidToMr:n.paidToMr||"",attachment:n.attachment||null,createdAt:vt.now(),updatedAt:vt.now()},r=await bs(mT,t);return console.log("Financial record created with ID:",r.id),r.id}catch(e){throw console.error("Error creating financial record:",e),new Error("Failed to create financial record")}},QU=async(n,e)=>{try{const t=At(Xe,Gt.financials(),n);let r=e.transactionDate;r&&!(r instanceof vt)&&(r=r instanceof Date?vt.fromDate(r):vt.fromDate(new Date(r)));const a={...e,...r&&{transactionDate:r},...e.amount&&{amount:parseFloat(e.amount)},updatedAt:vt.now()};Object.keys(a).forEach(o=>a[o]===void 0&&delete a[o]),await Vo(t,a),console.log("Financial record updated:",n)}catch(t){throw console.error("Error updating financial record:",t),new Error("Failed to update financial record")}},JU=async n=>{try{const e=At(Xe,Gt.financials(),n);await ml(e),console.log("Financial record deleted:",n)}catch(e){throw console.error("Error deleting financial record:",e),new Error("Failed to delete financial record")}},ZU=()=>{const{t:n,language:e}=hs(),[t,r]=K.useState([]),[a,o]=K.useState("ALL"),[c,u]=K.useState("ALL"),[h,f]=K.useState(!0);K.useEffect(()=>{(async()=>{try{f(!0);const j=await gT();r(j)}catch(j){console.error("Error loading transactions:",j),r([])}finally{f(!1)}})()},[]);const g={totalIncome:t.filter(S=>S.type==="INCOME").reduce((S,j)=>S+j.amount,0),totalExpense:t.filter(S=>S.type==="EXPENSE").reduce((S,j)=>S+j.amount,0),balance:0,transactionCount:t.length};g.balance=g.totalIncome-g.totalExpense;const y=["ALL",...new Set(t.map(S=>new Date(S.transactionDate).getFullYear()))],w=t.filter(S=>{const j=a==="ALL"||S.type===a,E=c==="ALL"||new Date(S.transactionDate).getFullYear().toString()===c;return j&&E}),b=S=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(S),T=S=>new Date(S).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"});return h?s.jsxs("div",{children:[s.jsx("section",{className:"bg-gradient-to-r from-[#ff6b00] to-[#ff8533] text-white py-16",children:s.jsxs("div",{className:"container-custom",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:e==="en"?"Financial Transparency":" "}),s.jsx("p",{className:"text-xl text-white/90",children:e==="en"?"Complete transparency of Gram Panchayat income and expenditure":"     "})]})}),s.jsx("div",{className:"flex justify-center items-center py-16",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-[#ff6b00]"})})]}):s.jsxs("div",{children:[s.jsx("section",{className:"bg-gradient-to-r from-[#ff6b00] to-[#ff8533] text-white py-16",children:s.jsxs("div",{className:"container-custom",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:e==="en"?"Financial Transparency":" "}),s.jsx("p",{className:"text-xl text-white/90",children:e==="en"?"Complete transparency of Gram Panchayat income and expenditure":"     "})]})}),s.jsx("section",{className:"py-12 bg-gray-50",children:s.jsxs("div",{className:"container-custom",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white p-6 rounded-xl border-2 border-green-300 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:s.jsx(Wd,{className:"text-green-600",size:24})}),s.jsx("span",{className:"text-green-700 font-semibold text-sm",children:e==="en"?"Total Income":" "})]}),s.jsx("div",{className:"text-3xl font-bold text-green-800",children:b(g.totalIncome)}),s.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[t.filter(S=>S.type==="INCOME").length," ",e==="en"?"transactions":""]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl border-2 border-red-300 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:s.jsx(pg,{className:"text-red-600",size:24})}),s.jsx("span",{className:"text-red-700 font-semibold text-sm",children:e==="en"?"Total Expense":" "})]}),s.jsx("div",{className:"text-3xl font-bold text-red-800",children:b(g.totalExpense)}),s.jsxs("div",{className:"text-sm text-red-600 mt-1",children:[t.filter(S=>S.type==="EXPENSE").length," ",e==="en"?"transactions":""]})]}),s.jsxs("div",{className:`bg-white p-6 rounded-xl border-2 ${g.balance>=0?"border-blue-300":"border-orange-300"} shadow-lg`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:`p-3 ${g.balance>=0?"bg-blue-100":"bg-orange-100"} rounded-lg`,children:s.jsx(w2,{className:`${g.balance>=0?"text-blue-600":"text-orange-600"}`,size:24})}),s.jsx("span",{className:`${g.balance>=0?"text-blue-700":"text-orange-700"} font-semibold text-sm`,children:e==="en"?"Balance":""})]}),s.jsx("div",{className:`text-3xl font-bold ${g.balance>=0?"text-blue-800":"text-orange-800"}`,children:b(g.balance)}),s.jsx("div",{className:`text-sm ${g.balance>=0?"text-blue-600":"text-orange-600"} mt-1`,children:g.balance>=0?e==="en"?"Surplus":"":e==="en"?"Deficit":""})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl border-2 border-purple-300 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:s.jsx(hr,{className:"text-purple-600",size:24})}),s.jsx("span",{className:"text-purple-700 font-semibold text-sm",children:e==="en"?"Total":""})]}),s.jsx("div",{className:"text-3xl font-bold text-purple-800",children:g.transactionCount}),s.jsx("div",{className:"text-sm text-purple-600 mt-1",children:e==="en"?"Transactions":""})]})]}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6 border-2 border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(my,{size:20,className:"text-gray-500"}),s.jsxs("select",{value:a,onChange:S=>o(S.target.value),className:"px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]",children:[s.jsx("option",{value:"ALL",children:e==="en"?"All Types":" "}),s.jsx("option",{value:"INCOME",children:e==="en"?"Income":""}),s.jsx("option",{value:"EXPENSE",children:e==="en"?"Expense":""})]}),s.jsx("select",{value:c,onChange:S=>u(S.target.value),className:"px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]",children:y.map(S=>s.jsx("option",{value:S,children:S==="ALL"?e==="en"?"All Years":" ":S},S))})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg border-2 border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#138808] to-[#1aa910] text-white px-6 py-4",children:s.jsx("h2",{className:"text-2xl font-bold",children:e==="en"?"Recent Transactions":" "})}),w.length>0?s.jsx("div",{className:"divide-y divide-gray-200",children:w.map(S=>s.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:`p-2 rounded-lg ${S.type==="INCOME"?"bg-green-100":"bg-red-100"}`,children:S.type==="INCOME"?s.jsx(Wd,{className:`${S.type==="INCOME"?"text-green-600":"text-red-600"}`,size:20}):s.jsx(pg,{className:"text-red-600",size:20})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg text-gray-800",children:e==="en"?S.subcategory:S.subcategoryMr}),s.jsx("p",{className:"text-sm text-gray-600",children:e==="en"?S.description:S.descriptionMr})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 text-sm",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"text-gray-500",children:[e==="en"?"Date":"",":"]}),s.jsxs("div",{className:"flex items-center gap-1 text-gray-700 font-semibold",children:[s.jsx(ds,{size:14}),T(S.transactionDate)]})]}),s.jsxs("div",{children:[s.jsxs("span",{className:"text-gray-500",children:[S.type==="INCOME"?e==="en"?"Received From":" ":e==="en"?"Paid To":" ",":"]}),s.jsx("div",{className:"text-gray-700 font-semibold",children:S.type==="INCOME"?e==="en"?S.receivedFrom:S.receivedFromMr:e==="en"?S.paidTo:S.paidToMr})]}),s.jsxs("div",{children:[s.jsxs("span",{className:"text-gray-500",children:[e==="en"?"Payment Mode":" ",":"]}),s.jsx("div",{className:"text-gray-700 font-semibold",children:S.paymentMode.replace("_"," ")})]})]}),S.referenceNumber&&s.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[e==="en"?"Ref":"",": ",S.referenceNumber]})]}),s.jsxs("div",{className:"ml-6 text-right",children:[s.jsxs("div",{className:`text-2xl font-bold ${S.type==="INCOME"?"text-green-600":"text-red-600"}`,children:[S.type==="INCOME"?"+":"-"," ",b(S.amount)]}),s.jsx("span",{className:`inline-block mt-2 px-3 py-1 rounded-full text-xs font-semibold ${S.type==="INCOME"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:S.type==="INCOME"?e==="en"?"Income":"":e==="en"?"Expense":""})]})]})},S.id))}):s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(hr,{size:64,className:"mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 text-lg",children:e==="en"?"No transactions available yet":"    "}),s.jsx("p",{className:"text-gray-500 text-sm mt-2",children:e==="en"?"Financial data will be displayed here once transactions are added by the admin":"        "})]})]})]})})]})},lw=async()=>{try{const n=Zt(Xe,Gt.notices()),e=Es(n,ac("startDate","desc")),t=await fs(e),r=[];return t.forEach(a=>{r.push({id:a.id,...a.data()})}),console.log(`Loaded ${r.length} notices from Firebase`),r}catch(n){throw console.error("Error loading notices:",n),n}},eB=async()=>{try{const n=await lw(),e=new Date;e.setHours(0,0,0,0);const t=n.filter(r=>{const a=new Date(r.startDate),o=new Date(r.endDate);return a<=e&&o>=e});return console.log(`Found ${t.length} active notices`),t}catch(n){throw console.error("Error loading active notices:",n),n}},tB=async n=>{try{const e=At(Xe,Gt.notices(),n),t=await Us(e);if(t.exists())return{id:t.id,...t.data()};throw new Error("Notice not found")}catch(e){throw console.error("Error loading notice:",e),e}},nB=async n=>{try{const e=Zt(Xe,Gt.notices()),t={titleEn:n.titleEn||"",titleMr:n.titleMr||"",type:n.type||"ANNOUNCEMENT",descriptionEn:n.descriptionEn||"",descriptionMr:n.descriptionMr||"",startDate:n.startDate,endDate:n.endDate,showOnHome:n.showOnHome||!1,createdAt:Yt(),updatedAt:Yt()},r=await bs(e,t);return console.log("Notice created with ID:",r.id),r.id}catch(e){throw console.error("Error creating notice:",e),e}},rB=async(n,e)=>{try{const t=At(Xe,Gt.notices(),n),r={titleEn:e.titleEn||"",titleMr:e.titleMr||"",type:e.type||"ANNOUNCEMENT",descriptionEn:e.descriptionEn||"",descriptionMr:e.descriptionMr||"",startDate:e.startDate,endDate:e.endDate,showOnHome:e.showOnHome||!1,updatedAt:Yt()};await Vo(t,r),console.log("Notice updated:",n)}catch(t){throw console.error("Error updating notice:",t),t}},sB=async n=>{try{const e=At(Xe,Gt.notices(),n);await ml(e),console.log("Notice deleted:",n)}catch(e){throw console.error("Error deleting notice:",e),e}},aB=()=>{const{language:n}=hs(),[e,t]=K.useState([]),[r,a]=K.useState(!0),[o,c]=K.useState("ALL");K.useEffect(()=>{u()},[]);const u=async()=>{try{a(!0);const S=(await eB()).sort((j,E)=>new Date(E.startDate)-new Date(j.startDate));t(S)}catch(T){console.error("Error loading notices:",T),t([])}finally{a(!1)}},h=e.filter(T=>o==="ALL"||T.type===o),f=T=>new Date(T).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),g=T=>{switch(T){case"MEETING":return s.jsx(Vi,{className:"w-5 h-5"});case"TENDER":return s.jsx(hr,{className:"w-5 h-5"});case"ANNOUNCEMENT":return s.jsx(Sx,{className:"w-5 h-5"});default:return s.jsx(hr,{className:"w-5 h-5"})}},y=T=>{switch(T){case"MEETING":return"from-blue-500 to-blue-600";case"TENDER":return"from-green-500 to-green-600";case"ANNOUNCEMENT":return"from-orange-500 to-orange-600";case"EVENT":return"from-purple-500 to-purple-600";case"URGENT":return"from-red-500 to-red-600";default:return"from-gray-500 to-gray-600"}},w=T=>{switch(T){case"MEETING":return"text-blue-700";case"TENDER":return"text-green-700";case"ANNOUNCEMENT":return"text-orange-700";case"EVENT":return"text-purple-700";case"URGENT":return"text-red-700";default:return"text-gray-700"}},b=T=>{const S=new Date(T),E=Math.ceil((S-new Date)/(1e3*60*60*24));return E<=7&&E>=0};return s.jsxs("div",{children:[s.jsxs("section",{className:"relative py-20 overflow-hidden bg-gradient-to-br from-blue-900 via-blue-800 to-blue-900",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-orange-600/20 rounded-full blur-3xl animate-pulse"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-green-600/20 rounded-full blur-3xl animate-pulse delay-700"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-white/5 rounded-full blur-2xl"})]}),s.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 bg-gradient-to-r from-orange-600 via-white to-green-600"}),s.jsx("div",{className:"container-custom relative z-10",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-orange-600 to-green-600 rounded-full mb-6 shadow-2xl shadow-orange-500/50 animate-bounce-slow",children:s.jsx(Vi,{size:40,className:"text-white"})}),s.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-4 tracking-tight",children:n==="en"?"Notices & Announcements":"  "}),s.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[s.jsx("div",{className:"h-1 w-20 bg-gradient-to-r from-transparent via-orange-500 to-orange-600 rounded-full"}),s.jsx(Os,{className:"text-orange-400",size:24}),s.jsx("div",{className:"h-1 w-20 bg-gradient-to-r from-green-600 via-green-500 to-transparent rounded-full"})]}),s.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto leading-relaxed",children:n==="en"?"Stay updated with important notices, meetings, tenders, and announcements":" , ,     "}),s.jsxs("div",{className:"flex items-center justify-center gap-8 mt-8 text-white/60",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-sm",children:n==="en"?"Official":""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse delay-300"}),s.jsx("span",{className:"text-sm",children:n==="en"?"Verified":""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse delay-700"}),s.jsx("span",{className:"text-sm",children:n==="en"?"Updated":""})]})]})]})})]}),s.jsx("section",{className:"py-8 bg-gradient-to-br from-orange-50 via-white to-green-50",children:s.jsx("div",{className:"container-custom",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border-t-4 border-orange-600 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-green-600 h-2"}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center shadow-lg",children:s.jsx(my,{size:20,className:"text-white"})}),s.jsx("label",{className:"font-bold text-blue-900 text-lg",children:n==="en"?"Filter by Type":"  "})]}),s.jsxs("select",{value:o,onChange:T=>c(T.target.value),className:"flex-1 min-w-[200px] px-5 py-3 border-2 border-orange-300 rounded-xl focus:outline-none focus:border-orange-600 focus:ring-2 focus:ring-orange-200 bg-gradient-to-r from-orange-50 to-green-50 font-semibold text-gray-700 transition-all hover:border-orange-500",children:[s.jsx("option",{value:"ALL",children:n==="en"?" All Types":"  "}),s.jsx("option",{value:"MEETING",children:" Meeting"}),s.jsx("option",{value:"TENDER",children:" Tender"}),s.jsx("option",{value:"ANNOUNCEMENT",children:" Announcement"}),s.jsx("option",{value:"EVENT",children:" Event"}),s.jsx("option",{value:"URGENT",children:" Urgent"}),s.jsx("option",{value:"OTHER",children:" Other"})]}),o!=="ALL"&&s.jsx("button",{onClick:()=>c("ALL"),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg text-gray-700 font-semibold transition-all",children:n==="en"?"Clear Filter":"  "})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"font-semibold text-orange-600",children:h.length})," ",n==="en"?o==="ALL"?"active notices found":`${o.toLowerCase()} notices found`:o==="ALL"?"  ":`${o.toLowerCase()}  `]})})]})]})})}),s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"container-custom",children:[r?s.jsxs("div",{className:"flex flex-col justify-center items-center py-16",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-orange-600 mb-4"}),s.jsx("p",{className:"text-gray-600 font-semibold",children:n==="en"?"Loading notices...":"   ..."})]}):h.length>0?s.jsx("div",{className:"space-y-6",children:h.map((T,S)=>s.jsxs("div",{className:"group bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden border-t-4 border-orange-600 transform hover:scale-[1.02]",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-green-600 h-2"}),s.jsx("div",{className:`bg-gradient-to-r ${y(T.type)} p-6`,children:s.jsx("div",{className:"flex items-start justify-between gap-4",children:s.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[s.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-white font-bold text-xl shadow-lg",children:S+1}),s.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-white/90 rounded-full flex items-center justify-center shadow-lg",children:s.jsx("div",{className:`${w(T.type)}`,children:g(T.type)})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[s.jsx("span",{className:`px-4 py-1.5 rounded-full text-sm font-bold bg-white/95 ${w(T.type)} shadow-md`,children:T.type}),b(T.endDate)&&s.jsxs("span",{className:"px-4 py-1.5 rounded-full text-sm font-bold bg-red-100 text-red-700 flex items-center gap-2 shadow-md animate-pulse",children:[s.jsx(tw,{size:16}),n==="en"?"Expiring Soon":"   "]})]}),s.jsx("h2",{className:"font-bold text-white text-2xl mb-2 leading-tight",children:n==="en"?T.titleEn:T.titleMr||T.titleEn}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full text-white text-sm font-semibold",children:[s.jsx(ds,{size:16}),s.jsx("span",{children:f(T.startDate)})]}),s.jsx(fy,{size:16,className:"text-white/60"}),s.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full text-white text-sm font-semibold",children:[s.jsx(ds,{size:16}),s.jsx("span",{children:f(T.endDate)})]})]})]})]})})}),s.jsxs("div",{className:"p-8 bg-gradient-to-br from-gray-50 to-white",children:[s.jsxs("div",{className:"flex items-start gap-3 mb-6",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center mt-1",children:s.jsx(hr,{size:16,className:"text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-blue-900 text-lg mb-3",children:n==="en"?"Description":""}),s.jsx("p",{className:"text-gray-700 text-base leading-relaxed",children:n==="en"?T.descriptionEn:T.descriptionMr||T.descriptionEn})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-4 border-l-4 border-green-600 shadow-md hover:shadow-lg transition-all",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(ds,{size:20,className:"text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 font-semibold",children:n==="en"?"Start Date":" "}),s.jsx("p",{className:"font-bold text-gray-800",children:f(T.startDate)})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 border-l-4 border-red-600 shadow-md hover:shadow-lg transition-all",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx(ds,{size:20,className:"text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 font-semibold",children:n==="en"?"End Date":" "}),s.jsx("p",{className:"font-bold text-gray-800",children:f(T.endDate)})]})]})})]})]})]},T.id))}):s.jsxs("div",{className:"text-center py-16 bg-gradient-to-br from-orange-50 to-green-50 rounded-2xl border-2 border-dashed border-orange-300",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-orange-100 to-green-100 rounded-full mb-6",children:s.jsx(Vi,{size:48,className:"text-orange-600"})}),s.jsx("h3",{className:"text-2xl font-bold text-blue-900 mb-3",children:n==="en"?"No Active Notices":"   "}),s.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:n==="en"?"There are currently no active notices. Check back later for updates.":"    .   ."})]}),h.length>0&&s.jsxs("div",{className:"mt-12 bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl shadow-xl border-t-4 border-blue-600 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 h-2"}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-blue-700 rounded-full flex items-center justify-center shadow-lg flex-shrink-0",children:s.jsx(Qn,{size:24,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-blue-900 text-2xl mb-2",children:n==="en"?"Important Information":" "}),s.jsx("p",{className:"text-blue-700 text-sm",children:n==="en"?"Please read the following guidelines carefully":"     "})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-3 bg-white/50 backdrop-blur-sm rounded-xl p-4",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"1"})}),s.jsx("p",{className:"text-blue-900 font-medium",children:n==="en"?"Please check the start and end dates for each notice carefully":"        "})]}),s.jsxs("div",{className:"flex items-start gap-3 bg-white/50 backdrop-blur-sm rounded-xl p-4",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"2"})}),s.jsx("p",{className:"text-blue-900 font-medium",children:n==="en"?"For tender submissions, contact the Gram Panchayat office before the deadline":" ,      "})]}),s.jsxs("div",{className:"flex items-start gap-3 bg-white/50 backdrop-blur-sm rounded-xl p-4",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"3"})}),s.jsx("p",{className:"text-blue-900 font-medium",children:n==="en"?"Meeting attendance is mandatory for all members and important for village development":"          "})]})]})]})]})]})})]})},iB=()=>{const{t:n,getContent:e}=hs(),{settings:t}=tu(),[r,a]=K.useState({name:"",phone:"",email:"",category:"QUERY",subject:"",message:""}),[o,c]=K.useState(!1),u=f=>{a({...r,[f.target.name]:f.target.value})},h=f=>{f.preventDefault(),console.log("Form submitted:",r),c(!0),setTimeout(()=>{c(!1),a({name:"",phone:"",email:"",category:"QUERY",subject:"",message:""})},3e3)};return s.jsxs("div",{children:[s.jsxs("section",{className:"relative py-20 overflow-hidden bg-gradient-to-br from-blue-900 via-blue-800 to-blue-900",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-orange-600/20 rounded-full blur-3xl animate-pulse"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-green-600/20 rounded-full blur-3xl animate-pulse delay-700"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-white/5 rounded-full blur-2xl"})]}),s.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 bg-gradient-to-r from-orange-600 via-white to-green-600"}),s.jsx("div",{className:"container-custom relative z-10",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-orange-600 to-green-600 rounded-full mb-6 shadow-2xl shadow-orange-500/50 animate-bounce-slow",children:s.jsx(_f,{size:40,className:"text-white"})}),s.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-4 tracking-tight",children:n("nav.contact")}),s.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[s.jsx("div",{className:"h-1 w-20 bg-gradient-to-r from-transparent via-orange-500 to-orange-600 rounded-full"}),s.jsx(Os,{className:"text-orange-400",size:24}),s.jsx("div",{className:"h-1 w-20 bg-gradient-to-r from-green-600 via-green-500 to-transparent rounded-full"})]}),s.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto leading-relaxed",children:"Get in touch with us or submit your grievances"}),s.jsxs("div",{className:"flex items-center justify-center gap-8 mt-8 text-white/60",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-sm",children:"24/7 Available"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse delay-300"}),s.jsx("span",{className:"text-sm",children:"Quick Response"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse delay-700"}),s.jsx("span",{className:"text-sm",children:"Verified"})]})]})]})})]}),s.jsx("section",{className:"py-16 bg-gradient-to-br from-orange-50 via-white to-green-50",children:s.jsx("div",{className:"container-custom",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(io,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:"Contact Information"}),s.jsx("p",{className:"text-gray-600",children:"Reach out to us through any of the following channels"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"group bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden border-t-4 border-orange-600 transform hover:scale-105",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-green-600 h-2"}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-gradient-to-br from-orange-600 to-green-600 rounded-full flex items-center justify-center shadow-lg",children:s.jsx(io,{className:"text-white",size:28})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-xl text-blue-900 mb-2",children:"Phone"}),s.jsxs("a",{href:`tel:${t?.contact?.phone||""}`,className:"text-orange-600 hover:text-orange-700 text-lg font-semibold flex items-center gap-2 group-hover:gap-3 transition-all",children:[t?.contact?.phone||"Not available",s.jsx(Os,{size:18,className:"group-hover:animate-spin"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Available during office hours"})]})]})})]}),s.jsxs("div",{className:"group bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden border-t-4 border-green-600 transform hover:scale-105",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-600 to-orange-600 h-2"}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-gradient-to-br from-green-600 to-orange-600 rounded-full flex items-center justify-center shadow-lg",children:s.jsx(Oo,{className:"text-white",size:28})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-xl text-blue-900 mb-2",children:"Email"}),s.jsxs("a",{href:`mailto:${t?.contact?.email||""}`,className:"text-green-600 hover:text-green-700 text-lg font-semibold flex items-center gap-2 group-hover:gap-3 transition-all break-all",children:[t?.contact?.email||"Not available",s.jsx(Os,{size:18,className:"group-hover:animate-spin flex-shrink-0"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"We respond within 24 hours"})]})]})})]}),s.jsxs("div",{className:"group bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden border-t-4 border-blue-600 transform hover:scale-105",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 h-2"}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-gradient-to-br from-blue-600 to-blue-700 rounded-full flex items-center justify-center shadow-lg",children:s.jsx(tc,{className:"text-white",size:28})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-xl text-blue-900 mb-2",children:"Address"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:e(t?.contact?.address)||"Not available"}),s.jsxs("p",{className:"text-sm text-gray-600 mt-2 flex items-center gap-2",children:[s.jsx(Gf,{size:16}),e(t?.officeTimings)||"Mon - Fri: 10:00 AM - 5:00 PM"]})]})]})})]})]}),s.jsx("div",{className:"mt-8",children:t?.googleMapsLink?s.jsx("div",{className:"h-80 bg-white rounded-2xl shadow-xl overflow-hidden border-2 border-orange-300",children:s.jsx("iframe",{src:t.googleMapsLink,width:"100%",height:"100%",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Gram Panchayat Location"})}):s.jsx("div",{className:"h-64 bg-gradient-to-br from-orange-100 to-green-100 rounded-2xl shadow-xl overflow-hidden border-2 border-dashed border-orange-300 flex items-center justify-center group hover:border-solid transition-all",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-full mb-3 shadow-lg",children:s.jsx(tc,{size:32,className:"text-orange-600"})}),s.jsx("p",{className:"text-gray-600 font-semibold",children:"Map will be embedded here"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Interactive location map"})]})})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"h-1 w-12 bg-orange-600 rounded"}),s.jsx(i4,{className:"text-blue-900",size:32}),s.jsx("div",{className:"h-1 w-12 bg-green-600 rounded"})]}),s.jsx("h2",{className:"text-4xl font-bold text-blue-900 mb-3",children:"Send us a Message"}),s.jsx("p",{className:"text-gray-600",children:"Fill out the form below and we'll get back to you soon"})]}),o?s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden border-t-4 border-green-600 animate-fade-in",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 h-2"}),s.jsxs("div",{className:"p-12 text-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-green-600 to-green-700 rounded-full mb-6 shadow-2xl shadow-green-500/50 animate-bounce",children:s.jsx(ho,{className:"text-white",size:48})}),s.jsx("h3",{className:"text-3xl font-bold text-blue-900 mb-3",children:"Message Sent Successfully!"}),s.jsx("p",{className:"text-gray-600 text-lg mb-6",children:"We will get back to you soon."}),s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("div",{className:"h-1 w-16 bg-gradient-to-r from-orange-600 to-green-600 rounded-full"}),s.jsx(Os,{className:"text-green-600",size:20}),s.jsx("div",{className:"h-1 w-16 bg-gradient-to-r from-green-600 to-orange-600 rounded-full"})]})]})]}):s.jsxs("form",{onSubmit:h,className:"bg-white rounded-2xl shadow-2xl overflow-hidden border-t-4 border-orange-600",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-green-600 h-2"}),s.jsxs("div",{className:"p-8 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-blue-900 mb-2",children:[s.jsx(Wf,{size:18,className:"text-orange-600"}),"Name *"]}),s.jsx("input",{type:"text",name:"name",required:!0,value:r.name,onChange:u,placeholder:"Enter your full name",className:"w-full px-5 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-600 focus:ring-2 focus:ring-orange-200 transition-all bg-gradient-to-r from-orange-50/50 to-green-50/50 hover:border-orange-400"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-blue-900 mb-2",children:[s.jsx(io,{size:18,className:"text-green-600"}),"Phone *"]}),s.jsx("input",{type:"tel",name:"phone",required:!0,value:r.phone,onChange:u,placeholder:"Enter your phone number",className:"w-full px-5 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-green-600 focus:ring-2 focus:ring-green-200 transition-all bg-gradient-to-r from-green-50/50 to-orange-50/50 hover:border-green-400"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-blue-900 mb-2",children:[s.jsx(Oo,{size:18,className:"text-blue-600"}),"Email"]}),s.jsx("input",{type:"email",name:"email",value:r.email,onChange:u,placeholder:"Enter your email address",className:"w-full px-5 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-blue-600 focus:ring-2 focus:ring-blue-200 transition-all bg-gradient-to-r from-blue-50/50 to-white hover:border-blue-400"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-blue-900 mb-2",children:[s.jsx(_f,{size:18,className:"text-orange-600"}),"Category *"]}),s.jsxs("select",{name:"category",required:!0,value:r.category,onChange:u,className:"w-full px-5 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-600 focus:ring-2 focus:ring-orange-200 transition-all bg-gradient-to-r from-orange-50/50 to-green-50/50 hover:border-orange-400 font-semibold text-gray-700",children:[s.jsx("option",{value:"QUERY",children:" Query"}),s.jsx("option",{value:"COMPLAINT",children:" Complaint"}),s.jsx("option",{value:"SUGGESTION",children:" Suggestion"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-blue-900 mb-2",children:[s.jsx(Os,{size:18,className:"text-green-600"}),"Subject *"]}),s.jsx("input",{type:"text",name:"subject",required:!0,value:r.subject,onChange:u,placeholder:"Enter the subject of your message",className:"w-full px-5 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-green-600 focus:ring-2 focus:ring-green-200 transition-all bg-gradient-to-r from-green-50/50 to-orange-50/50 hover:border-green-400"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-blue-900 mb-2",children:[s.jsx(_f,{size:18,className:"text-blue-600"}),"Message *"]}),s.jsx("textarea",{name:"message",required:!0,rows:"5",value:r.message,onChange:u,placeholder:"Type your message here...",className:"w-full px-5 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-blue-600 focus:ring-2 focus:ring-blue-200 transition-all bg-gradient-to-br from-blue-50/50 to-white hover:border-blue-400 resize-none"})]}),s.jsxs("button",{type:"submit",className:"w-full bg-gradient-to-r from-orange-600 to-green-600 hover:from-orange-700 hover:to-green-700 text-white font-bold py-4 px-6 rounded-xl flex items-center justify-center gap-3 transition-all transform hover:scale-105 shadow-xl hover:shadow-2xl",children:[s.jsx(i4,{size:24}),s.jsx("span",{className:"text-lg",children:n("common.submit")}),s.jsx(Os,{size:20,className:"animate-pulse"})]}),s.jsxs("div",{className:"pt-6 border-t border-gray-200",children:[s.jsxs("p",{className:"text-sm text-gray-600 text-center",children:[s.jsx("span",{className:"font-semibold text-orange-600",children:"*"})," Required fields"]}),s.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3 text-xs text-gray-500",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),s.jsx("span",{children:"Your information is secure with us"})]})]})]})]})]})]})})})]})},oB=()=>{const n=Dr(),{login:e}=ew(),[t,r]=K.useState({email:"",password:""}),[a,o]=K.useState(""),[c,u]=K.useState(!1),h=g=>{r({...t,[g.target.name]:g.target.value}),o("")},f=async g=>{g.preventDefault(),u(!0),o("");const y=await e(t);y.success?n("/admin/dashboard"):o(y.error||"Invalid credentials"),u(!1)};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-blue-900 flex items-center justify-center px-3 sm:px-4 py-6 sm:py-12 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-64 sm:w-96 h-64 sm:h-96 bg-orange-600/20 rounded-full blur-3xl animate-pulse"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-64 sm:w-96 h-64 sm:h-96 bg-green-600/20 rounded-full blur-3xl animate-pulse delay-700"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 sm:w-96 h-64 sm:h-96 bg-white/5 rounded-full blur-2xl"})]}),s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1.5 sm:h-2 bg-gradient-to-r from-orange-600 via-white to-green-600"}),s.jsxs("div",{className:"max-w-md w-full relative z-10",children:[s.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-2xl overflow-hidden border-t-4 border-orange-600",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-green-600 h-1.5 sm:h-2"}),s.jsxs("div",{className:"text-center pt-8 sm:pt-12 pb-6 sm:pb-8 px-4 sm:px-8 bg-gradient-to-br from-blue-50 to-white",children:[s.jsxs("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-24 sm:h-24 bg-gradient-to-br from-orange-600 to-green-600 rounded-full mb-4 sm:mb-6 shadow-2xl shadow-orange-500/50 animate-bounce-slow",children:[s.jsx($l,{className:"text-white",size:32}),s.jsx($l,{className:"text-white hidden sm:block",size:48})]}),s.jsx("h1",{className:"text-2xl sm:text-4xl font-bold text-blue-900 mb-2 sm:mb-3",children:"Admin Login"}),s.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[s.jsx("div",{className:"h-0.5 sm:h-1 w-12 sm:w-16 bg-gradient-to-r from-transparent via-orange-500 to-orange-600 rounded-full"}),s.jsx(Os,{className:"text-orange-400",size:16}),s.jsx(Os,{className:"text-orange-400 hidden sm:block",size:20}),s.jsx("div",{className:"h-0.5 sm:h-1 w-12 sm:w-16 bg-gradient-to-r from-green-600 via-green-500 to-transparent rounded-full"})]}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600 font-semibold",children:"Gram Panchayat Management System"}),s.jsxs("div",{className:"inline-flex items-center gap-2 mt-3 sm:mt-4 px-3 sm:px-4 py-1.5 sm:py-2 bg-white/80 backdrop-blur-sm rounded-full border border-orange-200 shadow-md",children:[s.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-green-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-xs sm:text-sm text-gray-700 font-semibold",children:"Secure Access"})]})]}),a&&s.jsx("div",{className:"mx-4 sm:mx-8 mt-6 sm:mt-8",children:s.jsxs("div",{className:"bg-red-50 border-l-4 border-red-600 rounded-lg p-3 sm:p-4 flex items-start gap-2 sm:gap-3 shadow-lg",children:[s.jsx(Qn,{className:"text-red-600 flex-shrink-0 mt-0.5",size:18}),s.jsx(Qn,{className:"text-red-600 flex-shrink-0 mt-0.5 hidden sm:block",size:20}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-red-900 mb-1 text-sm sm:text-base",children:"Login Failed"}),s.jsx("p",{className:"text-red-700 text-xs sm:text-sm",children:a})]})]})}),s.jsxs("form",{onSubmit:f,className:"p-4 sm:p-8 space-y-4 sm:space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-xs sm:text-sm font-bold text-blue-900 mb-2",children:[s.jsx(Oo,{size:16,className:"text-orange-600"}),s.jsx(Oo,{size:18,className:"text-orange-600 hidden sm:block"}),"Email Address"]}),s.jsx("input",{type:"email",name:"email",required:!0,value:t.email,onChange:h,className:"w-full px-4 sm:px-5 py-2.5 sm:py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-600 focus:ring-2 focus:ring-orange-200 transition-all bg-gradient-to-r from-orange-50/50 to-green-50/50 hover:border-orange-400 text-gray-900 font-medium text-sm sm:text-base",placeholder:"admin@example.com"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2 text-xs sm:text-sm font-bold text-blue-900 mb-2",children:[s.jsx(y2,{size:16,className:"text-green-600"}),s.jsx(y2,{size:18,className:"text-green-600 hidden sm:block"}),"Password"]}),s.jsx("input",{type:"password",name:"password",required:!0,value:t.password,onChange:h,className:"w-full px-4 sm:px-5 py-2.5 sm:py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-green-600 focus:ring-2 focus:ring-green-200 transition-all bg-gradient-to-r from-green-50/50 to-orange-50/50 hover:border-green-400 text-gray-900 font-medium text-sm sm:text-base",placeholder:"Enter your password"})]}),s.jsxs("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-orange-600 to-green-600 hover:from-orange-700 hover:to-green-700 text-white font-bold py-3 sm:py-4 px-4 sm:px-6 rounded-xl flex items-center justify-center gap-2 sm:gap-3 transition-all transform hover:scale-105 shadow-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[s.jsx(a4,{size:20}),s.jsx(a4,{size:24,className:"hidden sm:block"}),s.jsx("span",{className:"text-base sm:text-lg",children:c?"Logging in...":"Login to Admin Panel"}),!c&&s.jsx(Os,{size:18,className:"animate-pulse sm:hidden"}),!c&&s.jsx(Os,{size:20,className:"animate-pulse hidden sm:block"})]}),c&&s.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-600",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b-2 border-orange-600"}),s.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:"Authenticating..."})]})]}),s.jsx("div",{className:"px-4 sm:px-8 pb-4 sm:pb-8",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 rounded-xl p-3 sm:p-4 border border-blue-200",children:s.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[s.jsx($l,{size:18,className:"text-blue-600 flex-shrink-0 mt-0.5 sm:hidden"}),s.jsx($l,{size:20,className:"text-blue-600 flex-shrink-0 mt-0.5 hidden sm:block"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-blue-900 text-xs sm:text-sm mb-1",children:"Authorized Personnel Only"}),s.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600 leading-relaxed",children:"This portal is restricted to authorized Gram Panchayat administrators. Unauthorized access is prohibited and may be subject to legal action."})]})]})})})]}),s.jsx("div",{className:"mt-4 sm:mt-6 text-center px-4",children:s.jsxs("div",{className:"inline-flex items-center gap-2 text-white/80 text-xs sm:text-sm",children:[s.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-green-500 rounded-full animate-pulse"}),s.jsx("span",{children:"Government of India Initiative"})]})})]})]})},lB=()=>{const{t:n}=hs(),[e,t]=K.useState(!0),[r,a]=K.useState({members:0,services:0,schemes:0,activeNotices:0,programs:0,forms:0}),[o,c]=K.useState([]),[u,h]=K.useState([]);K.useEffect(()=>{f()},[]);const f=async()=>{try{t(!0);const[y,w,b,T,S,j]=await Promise.all([nw(),sw(),aw(),lw(),ow(),iw()]);a({members:y?.length||0,services:w?.length||0,schemes:b?.length||0,activeNotices:T?.filter(E=>E.status==="ACTIVE")?.length||0,programs:S?.length||0,forms:j?.length||0}),c(T?.slice(0,3)||[]),h(S?.slice(0,3)||[])}catch(y){console.error("Error loading dashboard data:",y)}finally{t(!1)}},g=[{title:"Total Members",count:r.members,icon:ya,color:"from-orange-500 to-orange-600",link:"/admin/members"},{title:"Services",count:r.services,icon:hr,color:"from-green-600 to-green-700",link:"/admin/services"},{title:"Schemes",count:r.schemes,icon:Hf,color:"from-blue-800 to-blue-900",link:"/admin/schemes"},{title:"Active Notices",count:r.activeNotices,icon:Vi,color:"from-purple-500 to-purple-600",link:"/admin/notices"},{title:"Programs",count:r.programs,icon:Ma,color:"from-pink-500 to-pink-600",link:"/admin/gallery"},{title:"Forms",count:r.forms,icon:Do,color:"from-indigo-500 to-indigo-600",link:"/admin/forms"}];return e?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary-600"})}):s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Admin Dashboard"}),s.jsx("p",{className:"text-gray-600",children:"Welcome back! Here's what's happening with your Gram Panchayat."})]}),s.jsxs(_n,{to:"/admin/settings",className:"flex items-center gap-2 bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white px-6 py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all",children:[s.jsx(nT,{size:20}),"Site Settings"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map((y,w)=>s.jsxs(_n,{to:y.link,className:"bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all transform hover:scale-105 overflow-hidden group",children:[s.jsx("div",{className:`bg-gradient-to-br ${y.color} p-6 text-white`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white/80 text-sm font-medium mb-1",children:y.title}),s.jsx("p",{className:"text-4xl font-bold",children:y.count})]}),s.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center group-hover:bg-white/30 transition-colors",children:s.jsx(y.icon,{size:32})})]})}),s.jsx("div",{className:"p-4 bg-gray-50",children:s.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:["Manage ",y.title,s.jsx(Wd,{size:16,className:"group-hover:translate-x-1 transition-transform"})]})})]},w))}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx(QV,{size:24,className:"text-orange-600"}),"Quick Actions"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(_n,{to:"/admin/members/new",className:"flex items-center gap-3 p-4 border-2 border-orange-200 rounded-lg hover:border-orange-500 hover:bg-orange-50 transition-all group",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center group-hover:bg-orange-200 transition-colors",children:s.jsx(ya,{size:20,className:"text-orange-600"})}),s.jsx("span",{className:"font-semibold text-gray-700",children:"Add Member"})]}),s.jsxs(_n,{to:"/admin/services/new",className:"flex items-center gap-3 p-4 border-2 border-green-200 rounded-lg hover:border-green-500 hover:bg-green-50 transition-all group",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center group-hover:bg-green-200 transition-colors",children:s.jsx(hr,{size:20,className:"text-green-600"})}),s.jsx("span",{className:"font-semibold text-gray-700",children:"Add Service"})]}),s.jsxs(_n,{to:"/admin/notices/new",className:"flex items-center gap-3 p-4 border-2 border-purple-200 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-all group",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center group-hover:bg-purple-200 transition-colors",children:s.jsx(Vi,{size:20,className:"text-purple-600"})}),s.jsx("span",{className:"font-semibold text-gray-700",children:"Add Notice"})]}),s.jsxs(_n,{to:"/admin/gallery/new",className:"flex items-center gap-3 p-4 border-2 border-pink-200 rounded-lg hover:border-pink-500 hover:bg-pink-50 transition-all group",children:[s.jsx("div",{className:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center group-hover:bg-pink-200 transition-colors",children:s.jsx(Ma,{size:20,className:"text-pink-600"})}),s.jsx("span",{className:"font-semibold text-gray-700",children:"Add Program"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx(EV,{size:24,className:"text-blue-600"}),"Content Management"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs(_n,{to:"/admin/content/about",className:"flex items-center gap-3 p-4 border-2 border-blue-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all group",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center group-hover:bg-blue-200 transition-colors",children:s.jsx(hr,{size:20,className:"text-blue-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-700",children:"Edit About Page"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Village info, history, vision & mission"})]})]}),s.jsxs(_n,{to:"/admin/content/education",className:"flex items-center gap-3 p-4 border-2 border-indigo-200 rounded-lg hover:border-indigo-500 hover:bg-indigo-50 transition-all group",children:[s.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center group-hover:bg-indigo-200 transition-colors",children:s.jsx(Fg,{size:20,className:"text-indigo-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-700",children:"Edit Education Page"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Schools, anganwadis & programs"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[s.jsx(Vi,{size:24,className:"text-purple-600"}),"Recent Notices"]}),s.jsx(_n,{to:"/admin/notices",className:"text-orange-600 hover:text-orange-700 font-semibold text-sm",children:"View All "})]}),s.jsx("div",{className:"space-y-3",children:o.length>0?o.map(y=>s.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-orange-300 hover:bg-orange-50/50 transition-all",children:s.jsx("div",{className:"flex items-start justify-between gap-3",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:y.title.en}),s.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:y.description.en}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ds,{size:12}),new Date(y.startDate).toLocaleDateString()]}),s.jsx("span",{className:`px-2 py-1 rounded-full ${y.status==="ACTIVE"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:y.status})]})]})})},y.id)):s.jsx("p",{className:"text-gray-500 text-center py-8",children:"No notices yet"})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[s.jsx(Ma,{size:24,className:"text-pink-600"}),"Recent Programs"]}),s.jsx(_n,{to:"/admin/gallery",className:"text-orange-600 hover:text-orange-700 font-semibold text-sm",children:"View All "})]}),s.jsx("div",{className:"space-y-3",children:u.length>0?u.map(y=>s.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-orange-300 hover:bg-orange-50/50 transition-all",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("img",{src:y.images?.[0]||"/placeholder.jpg",alt:y.titleEn||"Program",className:"w-16 h-16 object-cover rounded-lg"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:y.titleEn}),s.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:y.descriptionEn}),s.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[s.jsx(ds,{size:12}),new Date(y.date).toLocaleDateString()]})]})]})},y.id)):s.jsx("p",{className:"text-gray-500 text-center py-8",children:"No programs yet"})})]})]})]})},cB=()=>{const[n,e]=K.useState([]),[t,r]=K.useState(""),[a,o]=K.useState("ALL"),[c,u]=K.useState(!0);K.useEffect(()=>{(async()=>{try{u(!0);const w=await nw();e(w)}catch(w){console.error("Error loading members:",w)}finally{u(!1)}})()},[]);const h=n.filter(y=>{const w=y.name.en.toLowerCase().includes(t.toLowerCase())||y.name.mr.includes(t),b=a==="ALL"||y.type===a;return w&&b}),f=async y=>{if(window.confirm("Are you sure you want to delete this member?"))try{await _U(y),e(n.filter(w=>w.id!==y)),console.log("Member deleted successfully")}catch(w){console.error("Error deleting member:",w),alert("Failed to delete member. Please try again.")}},g=y=>({SARPANCH:"bg-orange-100 text-orange-700",UPSARPANCH:"bg-green-100 text-green-700",MEMBER:"bg-blue-100 text-blue-700",STAFF:"bg-purple-100 text-purple-700"})[y]||"bg-gray-100 text-gray-700";return c?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Members Management"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage Sarpanch, Upsarpanch, Members and Staff"})]}),s.jsxs(_n,{to:"/admin/members/new",className:"flex items-center gap-2 bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white px-6 py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all",children:[s.jsx(Ss,{size:20}),"Add Member"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Bi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search members...",value:t,onChange:y=>r(y.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),s.jsxs("select",{value:a,onChange:y=>o(y.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"ALL",children:"All Members"}),s.jsx("option",{value:"SARPANCH",children:"Sarpanch"}),s.jsx("option",{value:"UPSARPANCH",children:"Upsarpanch"}),s.jsx("option",{value:"MEMBER",children:"Members"}),s.jsx("option",{value:"STAFF",children:"Staff"})]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.length>0?h.map(y=>s.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition-all",children:[s.jsx("div",{className:"h-48 bg-gradient-to-br from-orange-100 to-green-100 flex items-center justify-center",children:y.photo?s.jsx("img",{src:y.photo,alt:y.name.en,className:"w-full h-full object-cover"}):s.jsx(xf,{size:80,className:"text-gray-400"})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:y.name.en}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:y.name.mr})]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${g(y.type)}`,children:y.type})]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("span",{className:"font-semibold",children:"Designation:"})," ",y.designation.en]}),s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("span",{className:"font-semibold",children:"Phone:"})," ",y.phone]}),y.termStart&&s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("span",{className:"font-semibold",children:"Term:"})," ",new Date(y.termStart).getFullYear()," - ",new Date(y.termEnd).getFullYear()]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(_n,{to:`/admin/members/edit/${y.id}`,className:"flex-1 flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold transition-all",children:[s.jsx(rm,{size:16}),"Edit"]}),s.jsxs("button",{onClick:()=>f(y.id),className:"flex items-center justify-center gap-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold transition-all",children:[s.jsx(mi,{size:16}),"Delete"]})]})]})]},y.id)):s.jsxs("div",{className:"col-span-full text-center py-12",children:[s.jsx(xf,{size:64,className:"mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"No members found"}),s.jsxs(_n,{to:"/admin/members/new",className:"inline-flex items-center gap-2 mt-4 text-orange-600 hover:text-orange-700 font-semibold",children:[s.jsx(Ss,{size:20}),"Add your first member"]})]})})]})},uB=async n=>{if(!n||n.trim()==="")return"";try{const e=`https://api.mymemory.translated.net/get?q=${encodeURIComponent(n)}&langpair=en|mr`,r=await(await fetch(e)).json();return r.responseStatus===200&&r.responseData?r.responseData.translatedText:(console.error("Translation API error:",r),n)}catch(e){return console.error("Translation error:",e),n}},jn=({label:n,name:e,value:t={en:"",mr:""},onChange:r,required:a=!1,type:o="text",placeholder:c="",rows:u=3,disabled:h=!1})=>{const[f,g]=K.useState(!1),[y,w]=K.useState(!0),[b,T]=K.useState(null),S=o==="textarea",j=D=>{const O=D.target.value;if(r({...t,en:O}),y&&O.trim()){b&&clearTimeout(b);const te=setTimeout(async()=>{g(!0);try{const ae=await uB(O);r({en:O,mr:ae})}catch(ae){console.error("Translation failed:",ae)}finally{g(!1)}},1500);T(te)}},E=D=>{const O=D.target.value;r({...t,mr:O})};K.useEffect(()=>()=>{b&&clearTimeout(b)},[b]);const L=S?"textarea":"input";return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[n," ",a&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("input",{type:"checkbox",id:`auto-translate-${e}`,checked:y,onChange:D=>w(D.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),s.jsxs("label",{htmlFor:`auto-translate-${e}`,className:"text-gray-600 flex items-center gap-1",children:[s.jsx(jf,{size:14}),"Auto-translate to Marathi",f&&s.jsx(gV,{size:14,className:"animate-spin text-primary-600 ml-1"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"English"}),s.jsx(L,{type:S?void 0:o,rows:S?u:void 0,value:t.en||"",onChange:j,placeholder:c||`Enter ${n} in English`,required:a,disabled:h,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:[" (Marathi)",f&&s.jsx("span",{className:"ml-2 text-primary-600 text-xs",children:"Translating..."})]}),s.jsx(L,{type:S?void 0:o,rows:S?u:void 0,value:t.mr||"",onChange:E,placeholder:`${n}  `,disabled:h,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none"}),y&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" Auto-translated. You can edit manually."})]})]})]})},u4=()=>{const n=Dr(),{id:e}=Xc(),t=!!e,[r,a]=K.useState({name:{en:"",mr:""},designation:{en:"",mr:""},phone:"",type:"MEMBER",position:0,termStart:"",termEnd:"",photo:""}),[o,c]=K.useState(null),[u,h]=K.useState({}),[f,g]=K.useState(!1),[y,w]=K.useState(!1);K.useEffect(()=>{(async()=>{if(t&&e)try{g(!0);const D=await rw(e);D&&a({name:D.name||{en:"",mr:""},designation:D.designation||{en:"",mr:""},phone:D.phone||"",type:D.type||"MEMBER",position:D.position||0,termStart:D.termStart||"",termEnd:D.termEnd||"",photo:D.photo||""})}catch(D){console.error("Error loading member:",D),alert("Failed to load member. Please try again.")}finally{g(!1)}})()},[t,e]);const b=(L,D)=>{a(O=>({...O,[L]:D})),u[L]&&h(O=>({...O,[L]:""}))},T=L=>{const{name:D,value:O}=L.target;a(te=>({...te,[D]:O})),u[D]&&h(te=>({...te,[D]:""}))},S=()=>{const L={};return r.name.en.trim()||(L.name="Member name is required"),r.designation.en.trim()||(L.designation="Designation is required"),r.phone.trim()?/^[\+]?[0-9]{10,13}$/.test(r.phone.replace(/\s/g,""))||(L.phone="Invalid phone number"):L.phone="Phone number is required",r.type||(L.type="Member type is required"),r.termStart&&r.termEnd&&r.termEnd<r.termStart&&(L.termEnd="End date must be after start date"),L},j=async L=>{L.preventDefault();const D=S();if(Object.keys(D).length>0){h(D);return}w(!0);try{const O={name:r.name,designation:r.designation,phone:r.phone,type:r.type,position:parseInt(r.position)||0,photo:r.photo,...r.termStart&&{termStart:r.termStart},...r.termEnd&&{termEnd:r.termEnd}};t?(await jU(e,O,o),console.log("Member updated successfully")):(await NU(O,o),console.log("Member created successfully")),n("/admin/members")}catch(O){console.error("Error saving member:",O),alert("Failed to save member. Please try again.")}finally{w(!1)}},E=L=>{const D=L.target.files[0];if(D){c(D);const O=new FileReader;O.onloadend=()=>{a(te=>({...te,photo:O.result}))},O.readAsDataURL(D)}};return f?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>n("/admin/members"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(gl,{size:24})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:t?"Edit Member":"Add New Member"}),s.jsx("p",{className:"text-gray-600 mt-1",children:t?"Update member information":"Fill in the details to add a new member"})]})]}),s.jsx("form",{onSubmit:j,className:"bg-white rounded-xl shadow-lg p-8",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Photo"}),s.jsxs("div",{className:"flex items-center gap-6",children:[r.photo?s.jsx("img",{src:r.photo,alt:"Member photo",className:"w-32 h-32 object-cover rounded-lg border-2 border-gray-200"}):s.jsx("div",{className:"w-32 h-32 bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center",children:s.jsx($f,{size:32,className:"text-gray-400"})}),s.jsxs("div",{children:[s.jsx("input",{type:"file",id:"photo",accept:"image/*",onChange:E,className:"hidden"}),s.jsxs("label",{htmlFor:"photo",className:"inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold cursor-pointer transition-all",children:[s.jsx($f,{size:16}),"Choose Photo"]}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Recommended: 400x400px, Max 2MB"})]})]})]}),s.jsxs("div",{children:[s.jsx(jn,{label:"Member Name",name:"name",value:r.name,onChange:L=>b("name",L),required:!0,placeholder:"Enter member name"}),u.name&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.name})]}),s.jsxs("div",{children:[s.jsx(jn,{label:"Designation",name:"designation",value:r.designation,onChange:L=>b("designation",L),required:!0,placeholder:"Enter designation"}),u.designation&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.designation})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"phone",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Phone Number ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"tel",id:"phone",name:"phone",value:r.phone,onChange:T,className:`w-full px-4 py-3 border ${u.phone?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent`,placeholder:"+91 1234567890"}),u.phone&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.phone})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"type",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Member Type ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{id:"type",name:"type",value:r.type,onChange:T,className:`w-full px-4 py-3 border ${u.type?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent`,children:[s.jsx("option",{value:"SARPANCH",children:"Sarpanch"}),s.jsx("option",{value:"UPSARPANCH",children:"Upsarpanch"}),s.jsx("option",{value:"MEMBER",children:"Member"}),s.jsx("option",{value:"STAFF",children:"Staff"})]}),u.type&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.type})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"position",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Display Order"}),s.jsx("input",{type:"number",id:"position",name:"position",value:r.position,onChange:T,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"1"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Lower numbers appear first"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"termStart",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Term Start Date",s.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Optional)"})]}),s.jsx("input",{type:"date",id:"termStart",name:"termStart",value:r.termStart,onChange:T,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"YYYY-MM-DD"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"termEnd",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Term End Date",s.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Optional)"})]}),s.jsx("input",{type:"date",id:"termEnd",name:"termEnd",value:r.termEnd,onChange:T,min:r.termStart,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"YYYY-MM-DD"}),r.termStart&&r.termEnd&&r.termEnd<r.termStart&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:"End date must be after start date"})]})]}),s.jsxs("div",{className:"flex gap-4 pt-6 border-t",children:[s.jsx("button",{type:"button",onClick:()=>n("/admin/members"),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-all",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:y,className:"flex items-center gap-2 bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white px-8 py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all disabled:opacity-50",children:[s.jsx(ba,{size:20}),y?"Saving...":t?"Update Member":"Add Member"]})]})]})})]})},dB=()=>{const[n,e]=K.useState([]),[t,r]=K.useState(""),[a,o]=K.useState("ALL"),[c,u]=K.useState(!0),h=["ALL","Certificate","Tax","License","Registration","Other"];K.useEffect(()=>{(async()=>{try{u(!0);const b=await sw();e(b)}catch(b){console.error("Error loading services:",b)}finally{u(!1)}})()},[]);const f=n.filter(w=>{const b=w.name.en.toLowerCase().includes(t.toLowerCase())||w.name.mr.includes(t),T=a==="ALL"||w.category===a;return b&&T}),g=async w=>{if(window.confirm("Are you sure you want to delete this service?"))try{await CU(w),e(n.filter(b=>b.id!==w)),console.log("Service deleted successfully")}catch(b){console.error("Error deleting service:",b),alert("Failed to delete service. Please try again.")}},y=w=>({Certificate:"bg-blue-100 text-blue-700",Tax:"bg-green-100 text-green-700",License:"bg-purple-100 text-purple-700",Registration:"bg-orange-100 text-orange-700",Other:"bg-gray-100 text-gray-700"})[w]||"bg-gray-100 text-gray-700";return c?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Services Management"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage all services provided by Gram Panchayat"})]}),s.jsxs(_n,{to:"/admin/services/new",className:"flex items-center gap-2 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white px-6 py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all",children:[s.jsx(Ss,{size:20}),"Add Service"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Bi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search services...",value:t,onChange:w=>r(w.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),s.jsx("select",{value:a,onChange:w=>o(w.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:h.map(w=>s.jsx("option",{value:w,children:w==="ALL"?"All Categories":w},w))})]})}),s.jsx("div",{className:"grid grid-cols-1 gap-6",children:f.length>0?f.map(w=>s.jsx("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center",children:s.jsx(hr,{size:24,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:w.name.en}),s.jsx("p",{className:"text-gray-600",children:w.name.mr})]})]})}),s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${y(w.category)}`,children:w.category})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-600 text-sm",children:w.description.en})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("span",{className:"font-semibold text-gray-700",children:"Fees:"}),s.jsx("span",{className:"text-green-600 font-bold",children:w.fees})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("span",{className:"font-semibold text-gray-700",children:"Processing Time:"}),s.jsx("span",{className:"text-blue-600 font-semibold",children:w.processingTime})]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Required Documents"}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:s.jsx("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap font-sans",children:w.requiredDocuments.en})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"How to Apply"}),s.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:s.jsx("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap font-sans",children:w.howToApply.en})})]}),s.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[s.jsxs(_n,{to:`/admin/services/edit/${w.id}`,className:"flex-1 flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg font-semibold transition-all",children:[s.jsx(rm,{size:18}),"Edit Service"]}),s.jsxs("button",{onClick:()=>g(w.id),className:"flex items-center justify-center gap-2 bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-semibold transition-all",children:[s.jsx(mi,{size:18}),"Delete"]})]})]})},w.id)):s.jsxs("div",{className:"col-span-full text-center py-12 bg-white rounded-xl shadow-lg",children:[s.jsx(hr,{size:64,className:"mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"No services found"}),s.jsxs(_n,{to:"/admin/services/new",className:"inline-flex items-center gap-2 mt-4 text-green-600 hover:text-green-700 font-semibold",children:[s.jsx(Ss,{size:20}),"Add your first service"]})]})})]})},d4=()=>{const n=Dr(),{id:e}=Xc(),t=!!e,[r,a]=K.useState({name:{en:"",mr:""},category:"Certificate",description:{en:"",mr:""},requiredDocuments:{en:"",mr:""},fees:"",processingTime:"",howToApply:{en:"",mr:""}}),[o,c]=K.useState({}),[u,h]=K.useState(!1),[f,g]=K.useState(!1),y=["Certificate","Tax","License","Registration","Other"];K.useEffect(()=>{(async()=>{if(t&&e)try{h(!0);const E=await EU(e);E&&a({name:E.name||{en:"",mr:""},category:E.category||"Certificate",description:E.description||{en:"",mr:""},requiredDocuments:E.requiredDocuments||{en:"",mr:""},fees:E.fees||"",processingTime:E.processingTime||"",howToApply:E.howToApply||{en:"",mr:""}})}catch(E){console.error("Error loading service:",E),alert("Failed to load service. Please try again.")}finally{h(!1)}})()},[t,e]);const w=(j,E)=>{a(L=>({...L,[j]:E})),o[j]&&c(L=>({...L,[j]:""}))},b=j=>{const{name:E,value:L}=j.target;a(D=>({...D,[E]:L})),o[E]&&c(D=>({...D,[E]:""}))},T=()=>{const j={};return r.name.en.trim()||(j.name="Service name is required"),r.description.en.trim()||(j.description="Description is required"),r.requiredDocuments.en.trim()||(j.requiredDocuments="Required documents is required"),r.fees.trim()||(j.fees="Fees is required"),r.processingTime.trim()||(j.processingTime="Processing time is required"),r.howToApply.en.trim()||(j.howToApply="How to apply is required"),j},S=async j=>{j.preventDefault();const E=T();if(Object.keys(E).length>0){c(E);return}g(!0);try{const L={name:r.name,category:r.category,description:r.description,requiredDocuments:r.requiredDocuments,fees:r.fees,processingTime:r.processingTime,howToApply:r.howToApply};t?(await TU(e,L),console.log("Service updated successfully")):(await AU(L),console.log("Service created successfully")),n("/admin/services")}catch(L){console.error("Error saving service:",L),alert("Failed to save service. Please try again.")}finally{g(!1)}};return u?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>n("/admin/services"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(gl,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:t?"Edit Service":"Add New Service"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t?"Update service information":"Add a new service offered by the Panchayat"})]})]})}),s.jsxs("form",{onSubmit:S,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(jn,{label:"Service Name",name:"name",value:r.name,onChange:j=>w("name",j),required:!0,placeholder:"Enter service name"}),o.name&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.name})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Category ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("select",{name:"category",value:r.category,onChange:b,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:y.map(j=>s.jsx("option",{value:j,children:j},j))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Fees ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"fees",value:r.fees,onChange:b,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${o.fees?"border-red-500":"border-gray-300"}`,placeholder:"e.g., 100 or Free"}),o.fees&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.fees})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Processing Time ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"processingTime",value:r.processingTime,onChange:b,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${o.processingTime?"border-red-500":"border-gray-300"}`,placeholder:"e.g., 7 days or 1-2 weeks"}),o.processingTime&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.processingTime})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Description"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(jn,{label:"Service Description",name:"description",type:"textarea",rows:5,value:r.description,onChange:j=>w("description",j),required:!0,placeholder:"Describe the service in detail..."}),o.description&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.description})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Required Documents"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(jn,{label:"Documents Required",name:"requiredDocuments",type:"textarea",rows:5,value:r.requiredDocuments,onChange:j=>w("requiredDocuments",j),required:!0,placeholder:"List required documents..."}),o.requiredDocuments&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.requiredDocuments})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"How to Apply"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(jn,{label:"Application Process",name:"howToApply",type:"textarea",rows:5,value:r.howToApply,onChange:j=>w("howToApply",j),required:!0,placeholder:"Explain how to apply for this service..."}),o.howToApply&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.howToApply})]})]}),s.jsxs("div",{className:"flex gap-4 justify-end",children:[s.jsx("button",{type:"button",onClick:()=>n("/admin/services"),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:f,className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all flex items-center gap-2 disabled:opacity-50",children:[s.jsx(ba,{className:"w-4 h-4"}),f?"Saving...":t?"Update Service":"Save Service"]})]})]})]})},hB=()=>{const[n,e]=K.useState([]),[t,r]=K.useState(""),[a,o]=K.useState("ALL"),[c,u]=K.useState(!0),h=["ALL","CENTRAL","STATE","DISTRICT"];K.useEffect(()=>{(async()=>{try{u(!0);const T=await aw();e(T)}catch(T){console.error("Error loading schemes:",T)}finally{u(!1)}})()},[]);const f=n.filter(b=>{const T=b.name.en.toLowerCase().includes(t.toLowerCase())||b.name.mr.includes(t),S=a==="ALL"||b.category===a;return T&&S}),g=async b=>{if(window.confirm("Are you sure you want to delete this scheme?"))try{await LU(b),e(n.filter(T=>T.id!==b)),console.log("Scheme deleted successfully")}catch(T){console.error("Error deleting scheme:",T),alert("Failed to delete scheme. Please try again.")}},y=b=>({CENTRAL:"bg-orange-100 text-orange-700",STATE:"bg-green-100 text-green-700",DISTRICT:"bg-blue-100 text-blue-700"})[b]||"bg-gray-100 text-gray-700",w=b=>b==="ACTIVE"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700";return c?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Schemes Management"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage government schemes and programs"})]}),s.jsxs(_n,{to:"/admin/schemes/new",className:"flex items-center gap-2 bg-gradient-to-r from-blue-800 to-blue-900 hover:from-blue-900 hover:to-blue-950 text-white px-6 py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all",children:[s.jsx(Ss,{size:20}),"Add Scheme"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Bi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search schemes...",value:t,onChange:b=>r(b.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsx("select",{value:a,onChange:b=>o(b.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:h.map(b=>s.jsx("option",{value:b,children:b==="ALL"?"All Categories":b},b))})]})}),s.jsx("div",{className:"grid grid-cols-1 gap-6",children:f.length>0?f.map(b=>s.jsx("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-800 to-blue-900 rounded-full flex items-center justify-center",children:s.jsx(Hf,{size:24,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:b.name.en}),s.jsx("p",{className:"text-gray-600",children:b.name.mr})]})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${y(b.category)}`,children:b.category}),s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${w(b.status)}`,children:b.status})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-600 text-sm",children:b.description.en})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Eligibility Criteria"}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:s.jsx("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap font-sans",children:b.eligibility.en})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Required Documents"}),s.jsx("div",{className:"bg-orange-50 p-4 rounded-lg",children:s.jsx("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap font-sans",children:b.documentsRequired.en})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Application Process"}),s.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:s.jsx("p",{className:"text-sm text-gray-700",children:b.applicationProcess.en})})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[s.jsxs(_n,{to:`/admin/schemes/edit/${b.id}`,className:"flex-1 flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg font-semibold transition-all",children:[s.jsx(rm,{size:18}),"Edit Scheme"]}),s.jsxs("button",{onClick:()=>g(b.id),className:"flex items-center justify-center gap-2 bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-semibold transition-all",children:[s.jsx(mi,{size:18}),"Delete"]})]})]})},b.id)):s.jsxs("div",{className:"col-span-full text-center py-12 bg-white rounded-xl shadow-lg",children:[s.jsx(Hf,{size:64,className:"mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"No schemes found"}),s.jsxs(_n,{to:"/admin/schemes/new",className:"inline-flex items-center gap-2 mt-4 text-blue-600 hover:text-blue-700 font-semibold",children:[s.jsx(Ss,{size:20}),"Add your first scheme"]})]})})]})};function h4(){const n=Dr(),{id:e}=Xc(),t=!!e,[r,a]=K.useState(!1),[o,c]=K.useState(!1),[u,h]=K.useState({name:{en:"",mr:""},category:"CENTRAL",description:{en:"",mr:""},eligibility:{en:"",mr:""},documentsRequired:{en:"",mr:""},applicationProcess:{en:"",mr:""},status:"ACTIVE"}),[f,g]=K.useState({});K.useEffect(()=>{(async()=>{if(t)try{a(!0);const j=await RU(e);j&&h({name:j.name,category:j.category,description:j.description,eligibility:j.eligibility,documentsRequired:{en:j.documentsRequired.en.join(`
`),mr:j.documentsRequired.mr.join(`
`)},applicationProcess:j.applicationProcess,status:j.status})}catch(j){console.error("Error loading scheme:",j)}finally{a(!1)}})()},[e,t]);const y=(S,j)=>{h(E=>({...E,[S]:j})),f[S]&&g(E=>({...E,[S]:""}))},w=S=>{const{name:j,value:E}=S.target;h(L=>({...L,[j]:E})),f[j]&&g(L=>({...L,[j]:""}))},b=()=>{const S={};return u.name.en.trim()||(S.name="Scheme name is required"),u.description.en.trim()||(S.description="Description is required"),u.eligibility.en.trim()||(S.eligibility="Eligibility criteria is required"),u.documentsRequired.en.trim()||(S.documentsRequired="Required documents are required"),u.applicationProcess.en.trim()||(S.applicationProcess="Application process is required"),g(S),Object.keys(S).length===0},T=async S=>{if(S.preventDefault(),!!b())try{c(!0);const j={name:u.name,category:u.category,description:u.description,eligibility:u.eligibility,documentsRequired:{en:u.documentsRequired.en.split(`
`).filter(E=>E.trim()),mr:u.documentsRequired.mr.split(`
`).filter(E=>E.trim())},applicationProcess:u.applicationProcess,status:u.status};t?await PU(e,j):await kU(j),n("/admin/schemes")}catch(j){console.error("Error saving scheme:",j),alert("Failed to save scheme. Please try again.")}finally{c(!1)}};return s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>n("/admin/schemes"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(gl,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:t?"Edit Scheme":"Add New Scheme"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t?"Update scheme information":"Add a new government scheme"})]})]})}),r?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s.jsx(s.Fragment,{children:s.jsxs("form",{onSubmit:T,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(jn,{label:"Scheme Name",name:"name",value:u.name,onChange:S=>y("name",S),required:!0,placeholder:"Enter scheme name"}),f.name&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.name})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Category ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"category",value:u.category,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"CENTRAL",children:"Central Government"}),s.jsx("option",{value:"STATE",children:"State Government"}),s.jsx("option",{value:"DISTRICT",children:"District Level"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Status ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"status",value:u.status,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"ACTIVE",children:"Active"}),s.jsx("option",{value:"INACTIVE",children:"Inactive"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Description"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(jn,{label:"Scheme Description",name:"description",type:"textarea",rows:5,value:u.description,onChange:S=>y("description",S),required:!0,placeholder:"Describe the scheme in detail..."}),f.description&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.description})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Eligibility Criteria"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(jn,{label:"Eligibility Criteria",name:"eligibility",type:"textarea",rows:5,value:u.eligibility,onChange:S=>y("eligibility",S),required:!0,placeholder:"Who can apply for this scheme..."}),f.eligibility&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.eligibility})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Required Documents"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(jn,{label:"Documents Required",name:"documentsRequired",type:"textarea",rows:6,value:u.documentsRequired,onChange:S=>y("documentsRequired",S),required:!0,placeholder:"List required documents (one per line)..."}),f.documentsRequired&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.documentsRequired}),s.jsx("p",{className:"text-xs text-gray-500",children:"Enter one document per line"})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Application Process"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(jn,{label:"Application Process",name:"applicationProcess",type:"textarea",rows:6,value:u.applicationProcess,onChange:S=>y("applicationProcess",S),required:!0,placeholder:"Explain how to apply for this scheme..."}),f.applicationProcess&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.applicationProcess})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Status"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scheme Status"}),s.jsxs("select",{name:"status",value:u.status,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"ACTIVE",children:"Active"}),s.jsx("option",{value:"INACTIVE",children:"Inactive"}),s.jsx("option",{value:"UPCOMING",children:"Upcoming"})]})]})]}),s.jsxs("div",{className:"flex gap-4 justify-end",children:[s.jsx("button",{type:"button",onClick:()=>n("/admin/schemes"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:o,children:"Cancel"}),s.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:o,children:[s.jsx(ba,{className:"w-4 h-4"}),o?"Saving...":t?"Update Scheme":"Save Scheme"]})]})]})})]})}function fB(){const n=Dr(),[e,t]=K.useState([]),[r,a]=K.useState(!0),[o,c]=K.useState(""),[u,h]=K.useState("ALL");K.useEffect(()=>{f()},[]);const f=async()=>{try{a(!0);const j=await lw();t(j)}catch(j){console.error("Error loading notices:",j),alert("Failed to load notices. Please try again.")}finally{a(!1)}},g=e.filter(j=>{const E=j.titleEn.toLowerCase().includes(o.toLowerCase())||j.titleMr&&j.titleMr.toLowerCase().includes(o.toLowerCase()),L=u==="ALL"||j.type===u;return E&&L}),y=async j=>{if(window.confirm("Are you sure you want to delete this notice?"))try{await sB(j),t(e.filter(E=>E.id!==j))}catch(E){console.error("Error deleting notice:",E),alert("Failed to delete notice. Please try again.")}},w=j=>{switch(j){case"MEETING":return s.jsx(Vi,{className:"w-4 h-4"});case"TENDER":return s.jsx(hr,{className:"w-4 h-4"});case"ANNOUNCEMENT":return s.jsx(Sx,{className:"w-4 h-4"});default:return s.jsx(hr,{className:"w-4 h-4"})}},b=j=>{const E={MEETING:"bg-blue-100 text-blue-700",TENDER:"bg-green-100 text-green-700",ANNOUNCEMENT:"bg-orange-100 text-orange-700"};return s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1 ${E[j]}`,children:[w(j),j]})},T=j=>new Date(j).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),S=j=>{const E=new Date,L=new Date(j.startDate),D=new Date(j.endDate);return E>=L&&E<=D};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Notices Management"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage meetings, tenders, and announcements"})]}),s.jsxs("button",{onClick:()=>n("/admin/notices/new"),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all shadow-md hover:shadow-lg",children:[s.jsx(Ss,{className:"w-5 h-5"}),"Add Notice"]})]}),r?s.jsx("div",{className:"flex justify-center items-center py-16",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-orange-600"})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg",children:s.jsx(Vi,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Meetings"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.filter(j=>j.type==="MEETING").length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-600 to-green-700 rounded-lg",children:s.jsx(hr,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Tenders"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.filter(j=>j.type==="TENDER").length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg",children:s.jsx(Sx,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Announcements"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.filter(j=>j.type==="ANNOUNCEMENT").length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg",children:s.jsx(ds,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.filter(j=>S(j)).length})]})]})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6 border border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Bi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search notices...",value:o,onChange:j=>c(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),s.jsx("div",{children:s.jsxs("select",{value:u,onChange:j=>h(j.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"ALL",children:"All Types"}),s.jsx("option",{value:"MEETING",children:"Meetings"}),s.jsx("option",{value:"TENDER",children:"Tenders"}),s.jsx("option",{value:"ANNOUNCEMENT",children:"Announcements"})]})})]})}),s.jsx("div",{className:"space-y-4",children:g.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center border border-gray-200",children:[s.jsx(Vi,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No Notices Found"}),s.jsx("p",{className:"text-gray-500 mb-4",children:o||u!=="ALL"?"Try adjusting your filters":"Get started by adding your first notice"}),!o&&u==="ALL"&&s.jsx("button",{onClick:()=>n("/admin/notices/new"),className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all",children:"Add Notice"})]}):g.map(j=>s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[b(j.type),S(j)?s.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700 flex items-center gap-1",children:[s.jsx(Mo,{className:"w-3 h-3"}),"ACTIVE"]}):s.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600 flex items-center gap-1",children:[s.jsx(up,{className:"w-3 h-3"}),"INACTIVE"]}),j.showOnHome&&s.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:"ON HOMEPAGE"})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-1",children:j.titleEn}),j.titleMr&&s.jsx("p",{className:"text-base text-gray-600 mb-3",children:j.titleMr}),s.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ds,{className:"w-4 h-4"}),s.jsxs("span",{children:["From: ",T(j.startDate)]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ds,{className:"w-4 h-4"}),s.jsxs("span",{children:["To: ",T(j.endDate)]})]})]}),s.jsx("p",{className:"text-gray-700 mb-2",children:j.descriptionEn}),j.descriptionMr&&s.jsx("p",{className:"text-gray-600 text-sm",children:j.descriptionMr})]}),s.jsxs("div",{className:"flex gap-2 ml-4",children:[s.jsx("button",{onClick:()=>n(`/admin/notices/edit/${j.id}`),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:s.jsx(dp,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>y(j.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:s.jsx(mi,{className:"w-5 h-5"})})]})]})},j.id))})]})]})}function f4(){const n=Dr(),{id:e}=Xc(),t=!!e,[r,a]=K.useState({titleEn:"",titleMr:"",type:"ANNOUNCEMENT",descriptionEn:"",descriptionMr:"",startDate:"",endDate:"",showOnHome:!1}),[o,c]=K.useState({}),[u,h]=K.useState(!1),[f,g]=K.useState(!1);K.useEffect(()=>{t&&y()},[e,t]);const y=async()=>{try{g(!0);const j=await tB(e);a({titleEn:j.titleEn||"",titleMr:j.titleMr||"",type:j.type||"ANNOUNCEMENT",descriptionEn:j.descriptionEn||"",descriptionMr:j.descriptionMr||"",startDate:j.startDate||"",endDate:j.endDate||"",showOnHome:j.showOnHome||!1})}catch(j){console.error("Error loading notice:",j),alert("Failed to load notice. Redirecting to notices list."),n("/admin/notices")}finally{g(!1)}},w=(j,E,L)=>{const D=E?`${j}${E.charAt(0).toUpperCase()+E.slice(1)}`:j;a(O=>({...O,[D]:L})),o[D]&&c(O=>({...O,[D]:""}))},b=j=>{const{name:E,value:L,type:D,checked:O}=j.target;a(te=>({...te,[E]:D==="checkbox"?O:L})),o[E]&&c(te=>({...te,[E]:""}))},T=()=>{const j={};if(r.titleEn.trim()||(j.titleEn="Title is required"),r.descriptionEn.trim()||(j.descriptionEn="Description is required"),r.startDate||(j.startDate="Start date is required"),r.endDate||(j.endDate="End date is required"),r.startDate&&r.endDate){const E=new Date(r.startDate);new Date(r.endDate)<E&&(j.endDate="End date must be after start date")}return c(j),Object.keys(j).length===0},S=async j=>{if(j.preventDefault(),!!T())try{h(!0);const E={titleEn:r.titleEn,titleMr:r.titleMr,type:r.type,descriptionEn:r.descriptionEn,descriptionMr:r.descriptionMr,startDate:r.startDate,endDate:r.endDate,showOnHome:r.showOnHome};t?(await rB(e,E),alert("Notice updated successfully!")):(await nB(E),alert("Notice created successfully!")),n("/admin/notices")}catch(E){console.error("Error saving notice:",E),alert("Failed to save notice. Please try again.")}finally{h(!1)}};return f?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}):s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>n("/admin/notices"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",disabled:u,children:s.jsx(gl,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:t?"Edit Notice":"Add New Notice"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t?"Update notice information":"Create a new notice, meeting, or tender"})]})]})}),s.jsxs("form",{onSubmit:S,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Title (English) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:r.titleEn,onChange:j=>w("title","en",j.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${o.titleEn?"border-red-500":"border-gray-300"}`,placeholder:"Enter notice title in English",disabled:u}),o.titleEn&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.titleEn})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title (Marathi)"}),s.jsx("input",{type:"text",value:r.titleMr,onChange:j=>w("title","mr",j.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"    ",disabled:u})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Type ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"type",value:r.type,onChange:b,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",disabled:u,children:[s.jsx("option",{value:"ANNOUNCEMENT",children:"Announcement"}),s.jsx("option",{value:"MEETING",children:"Meeting"}),s.jsx("option",{value:"TENDER",children:"Tender"}),s.jsx("option",{value:"EVENT",children:"Event"}),s.jsx("option",{value:"HOLIDAY",children:"Holiday"}),s.jsx("option",{value:"URGENT",children:"Urgent"}),s.jsx("option",{value:"OTHER",children:"Other"})]})]}),s.jsx("div",{className:"flex items-center",children:s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",name:"showOnHome",checked:r.showOnHome,onChange:b,className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500",disabled:u}),s.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Show on Homepage"})]})})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Description"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description (English) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{rows:6,value:r.descriptionEn,onChange:j=>w("description","en",j.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${o.descriptionEn?"border-red-500":"border-gray-300"}`,placeholder:"Enter detailed description in English",disabled:u}),o.descriptionEn&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.descriptionEn})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Marathi)"}),s.jsx("textarea",{rows:6,value:r.descriptionMr,onChange:j=>w("description","mr",j.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"    ",disabled:u})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Validity Period"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Start Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",name:"startDate",value:r.startDate,onChange:b,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${o.startDate?"border-red-500":"border-gray-300"}`,disabled:u}),o.startDate&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.startDate}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"When this notice becomes active"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["End Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",name:"endDate",value:r.endDate,onChange:b,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${o.endDate?"border-red-500":"border-gray-300"}`,disabled:u}),o.endDate&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.endDate}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"When this notice expires"})]})]}),s.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Note:"})," The notice will automatically be marked as active during the specified date range. After the end date, it will be marked as inactive."]})})]}),s.jsxs("div",{className:"flex gap-4 justify-end",children:[s.jsx("button",{type:"button",onClick:()=>n("/admin/notices"),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",disabled:u,children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:u,children:u?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),t?"Updating...":"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ba,{className:"w-4 h-4"}),t?"Update Notice":"Save Notice"]})})]})]})]})}function mB(){const n=Dr(),[e,t]=K.useState([]),[r,a]=K.useState(!0),[o,c]=K.useState("");K.useEffect(()=>{u()},[]);const u=async()=>{try{a(!0);const y=await ow();console.log("Loaded gallery programs from Firebase:",y.length),t(y)}catch(y){console.error("Error loading gallery programs:",y),alert("Failed to load gallery programs")}finally{a(!1)}},h=e.filter(y=>y.titleEn?.toLowerCase().includes(o.toLowerCase())||y.titleMr?.toLowerCase().includes(o.toLowerCase())),f=async y=>{if(window.confirm("Are you sure you want to delete this program/photo? All images will be permanently deleted."))try{await GU(y),t(e.filter(w=>w.id!==y)),alert("Program deleted successfully!")}catch(w){console.error("Error deleting program:",w),alert("Failed to delete program")}},g=y=>new Date(y).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"});return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Gallery Management"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage photos and programs"})]}),s.jsxs("button",{onClick:()=>n("/admin/gallery/new"),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all shadow-md hover:shadow-lg",children:[s.jsx(Ss,{className:"w-5 h-5"}),"Add Photo/Program"]})]}),r?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg",children:s.jsx(Ma,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Programs"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-600 to-green-700 rounded-lg",children:s.jsx(Ma,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Images"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.reduce((y,w)=>y+(w.images?.length||0),0)})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-800 to-blue-900 rounded-lg",children:s.jsx(ds,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"This Month"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.filter(y=>{const w=new Date(y.date),b=new Date;return w.getMonth()===b.getMonth()&&w.getFullYear()===b.getFullYear()}).length})]})]})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6 border border-gray-200",children:s.jsxs("div",{className:"relative",children:[s.jsx(Bi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search programs...",value:o,onChange:y=>c(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.length===0?s.jsxs("div",{className:"col-span-full bg-white rounded-xl shadow-sm p-12 text-center border border-gray-200",children:[s.jsx(Ma,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No Photos Found"}),s.jsx("p",{className:"text-gray-500 mb-4",children:o?"Try adjusting your search":"Get started by adding your first photo or program"}),!o&&s.jsx("button",{onClick:()=>n("/admin/gallery/new"),className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all",children:"Add Photo/Program"})]}):h.map(y=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200 hover:shadow-lg transition-shadow group",children:[s.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-gray-100 to-gray-200 overflow-hidden",children:[y.images&&y.images.length>0?s.jsx("img",{src:y.images[0],alt:y.titleEn,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(Ma,{className:"w-16 h-16 text-gray-400"})}),y.images&&y.images.length>1&&s.jsx("div",{className:"absolute top-3 left-3",children:s.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-black/70 text-white shadow-lg flex items-center gap-1",children:[s.jsx(Ma,{className:"w-3 h-3"}),y.images.length," photos"]})}),s.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3",children:[s.jsx("button",{onClick:()=>n(`/admin/gallery/edit/${y.id}`),className:"p-3 bg-white/90 hover:bg-white rounded-lg transition-colors",title:"Edit",children:s.jsx(dp,{className:"w-5 h-5 text-blue-600"})}),s.jsx("button",{onClick:()=>f(y.id),className:"p-3 bg-white/90 hover:bg-white rounded-lg transition-colors",title:"Delete",children:s.jsx(mi,{className:"w-5 h-5 text-red-600"})})]})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-2",children:[s.jsx(ds,{className:"w-4 h-4"}),s.jsx("span",{children:g(y.date)})]}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:y.titleEn}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:y.titleMr}),s.jsx("p",{className:"text-gray-700 text-sm line-clamp-2 mb-2",children:y.descriptionEn}),s.jsx("p",{className:"text-gray-600 text-xs line-clamp-2",children:y.descriptionMr})]})]},y.id))})]})]})}const gB=async(n,e=350,t=1920,r=1080)=>new Promise((a,o)=>{const c=n.size/1024;if(c<=e){console.log(`Image ${n.name} is already small enough (${c.toFixed(2)}KB)`),a(n);return}const u=new FileReader;u.onload=h=>{const f=new Image;f.onload=()=>{let g=f.width,y=f.height;if(g>t||y>r){const E=g/y;g>y?(g=t,y=g/E):(y=r,g=y*E)}const w=document.createElement("canvas");w.width=g,w.height=y,w.getContext("2d").drawImage(f,0,0,g,y);let T=.9;const S=e*1024,j=E=>{w.toBlob(L=>{if(!L){o(new Error("Failed to compress image"));return}if(console.log(`Compressed ${n.name}: ${(L.size/1024).toFixed(2)}KB at quality ${E}`),L.size<=S||E<=.5){const D=new File([L],n.name,{type:"image/jpeg",lastModified:Date.now()});console.log(`Final size: ${(D.size/1024).toFixed(2)}KB`),a(D)}else j(E-.1)},"image/jpeg",E)};j(T)},f.onerror=()=>{o(new Error("Failed to load image"))},f.src=h.target.result},u.onerror=()=>{o(new Error("Failed to read file"))},u.readAsDataURL(n)}),pB=n=>{const e=[];if(!n.type.startsWith("image/"))return e.push("File must be an image"),{valid:!1,errors:e};const t=10;return n.size>t*1024*1024?(e.push(`File size must be less than ${t}MB`),{valid:!1,errors:e}):["image/jpeg","image/jpg","image/png","image/webp"].includes(n.type)?{valid:!0,errors:[]}:(e.push("Only JPEG, PNG, and WebP images are allowed"),{valid:!1,errors:e})};function m4(){const n=Dr(),{id:e}=Xc(),t=!!e,[r,a]=K.useState({titleEn:"",titleMr:"",descriptionEn:"",descriptionMr:"",date:"",youtubeLink:""}),[o,c]=K.useState([]),[u,h]=K.useState([]),[f,g]=K.useState([]),[y,w]=K.useState(!1),[b,T]=K.useState({}),[S,j]=K.useState(!1),[E,L]=K.useState(!1);K.useEffect(()=>{t&&D()},[e,t]);const D=async()=>{try{L(!0);const P=await fT(e);a({titleEn:P.titleEn||"",titleMr:P.titleMr||"",descriptionEn:P.descriptionEn||"",descriptionMr:P.descriptionMr||"",date:P.date?.toISOString?.().split("T")[0]||"",youtubeLink:P.youtubeLink||""}),c(P.images||[])}catch(P){console.error("Error loading program:",P),alert("Failed to load program"),n("/admin/gallery")}finally{L(!1)}},O=(P,B,ue)=>{const Ne=`${P}${B.charAt(0).toUpperCase()+B.slice(1)}`;a(ce=>({...ce,[Ne]:ue})),b[P]&&T(ce=>({...ce,[P]:""}))},te=P=>{const{name:B,value:ue}=P.target;a(Ne=>({...Ne,[B]:ue})),b[B]&&T(Ne=>({...Ne,[B]:""}))},ae=async P=>{const B=Array.from(P.target.files);if(B.length!==0){w(!0);try{const ue=[],Ne=[];for(const ce of B){const pe=pB(ce);if(!pe.valid){Ne.push(`${ce.name}: ${pe.errors.join(", ")}`);continue}try{const de=ce.size/1024;console.log(`Original size of ${ce.name}: ${de.toFixed(2)}KB`);let Se=ce;if(de>1024){console.log(`Compressing ${ce.name}...`),Se=await gB(ce,350);const ze=Se.size/1024;console.log(`Compressed ${ce.name}: ${de.toFixed(2)}KB  ${ze.toFixed(2)}KB`)}ue.push(Se)}catch(de){console.error(`Error compressing ${ce.name}:`,de),Ne.push(`${ce.name}: Failed to compress`)}}if(Ne.length>0&&alert(`Some files had errors:
`+Ne.join(`
`)),ue.length===0){w(!1);return}h(ce=>[...ce,...ue]);for(const ce of ue){const pe=new FileReader;pe.onloadend=()=>{g(de=>[...de,pe.result])},pe.readAsDataURL(ce)}if(T(ce=>({...ce,images:""})),ue.length>0){const ce=ue.reduce((pe,de)=>pe+de.size,0)/1024;console.log(`Successfully processed ${ue.length} image(s). Total size: ${ce.toFixed(2)}KB`)}}catch(ue){console.error("Error processing images:",ue),alert("Failed to process images. Please try again.")}finally{w(!1)}}},H=P=>{c(B=>B.filter(ue=>ue!==P))},V=P=>{h(B=>B.filter((ue,Ne)=>Ne!==P)),g(B=>B.filter((ue,Ne)=>Ne!==P))},k=()=>{const P={};r.titleEn.trim()||(P.titleEn="English title is required"),r.descriptionEn.trim()||(P.descriptionEn="English description is required"),r.date||(P.date="Date is required");const B=t&&o.length>0||u.length>0,ue=r.youtubeLink&&r.youtubeLink.trim()!=="";return!B&&!ue&&(P.media="Please provide either images or a YouTube video link"),r.youtubeLink&&r.youtubeLink.trim()!==""&&(/^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/.+/.test(r.youtubeLink)||(P.youtubeLink="Please enter a valid YouTube URL")),T(P),Object.keys(P).length===0},F=async P=>{if(P.preventDefault(),!!k())try{j(!0);const B={titleEn:r.titleEn,titleMr:r.titleMr,descriptionEn:r.descriptionEn,descriptionMr:r.descriptionMr,date:r.date,youtubeLink:r.youtubeLink||""};t?(await HU(e,B,u,o),alert("Program updated successfully!")):(await qU(B,u),alert("Program created successfully!")),n("/admin/gallery")}catch(B){console.error("Error saving program:",B),alert("Failed to save program. Please try again.")}finally{j(!1)}};if(E)return s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})});const I=o.length+u.length;return s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>n("/admin/gallery"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",disabled:S,children:s.jsx(gl,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:t?"Edit Photo/Program":"Add New Photo/Program"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t?"Update photo/program information":"Add a new photo or program to the gallery"})]})]})}),s.jsxs("form",{onSubmit:F,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b flex items-center justify-between",children:[s.jsxs("span",{children:["Photos (",I,")"]}),I>0&&s.jsxs("span",{className:"text-sm font-normal text-gray-500",children:[o.length," saved + ",u.length," new"]})]}),s.jsxs("div",{className:"space-y-4",children:[o.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Saved Images"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:o.map((P,B)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:P,alt:`Existing ${B+1}`,className:"w-full h-32 object-cover rounded-lg border border-gray-300"}),s.jsx("button",{type:"button",onClick:()=>H(P),className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors shadow-lg opacity-0 group-hover:opacity-100",disabled:S,children:s.jsx(Ui,{className:"w-4 h-4"})})]},B))})]}),f.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"New Images (will be uploaded)"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:f.map((P,B)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:P,alt:`New ${B+1}`,className:"w-full h-32 object-cover rounded-lg border border-orange-300"}),s.jsx("button",{type:"button",onClick:()=>V(B),className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors shadow-lg opacity-0 group-hover:opacity-100",disabled:S,children:s.jsx(Ui,{className:"w-4 h-4"})})]},B))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block",children:[s.jsx("div",{className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors ${y?"border-orange-500 bg-orange-50":"border-gray-300 hover:border-orange-500"}`,children:y?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-orange-600 mx-auto mb-3"}),s.jsx("p",{className:"text-orange-600 font-medium mb-1",children:"Compressing images..."}),s.jsx("p",{className:"text-sm text-orange-500",children:"Please wait while we optimize your images"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Ma,{className:"w-10 h-10 text-gray-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-600 mb-1",children:"Click to upload images"}),s.jsx("p",{className:"text-sm text-gray-500",children:"PNG, JPG, WebP up to 10MB"}),s.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Images over 1MB will be automatically compressed to ~350KB"})]})}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:ae,className:"hidden",disabled:S||y})]}),b.media&&s.jsx("p",{className:"text-red-500 text-sm mt-2",children:b.media})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b flex items-center gap-2",children:[s.jsx(v2,{className:"w-5 h-5 text-orange-600"}),s.jsx("span",{children:"YouTube Video (Optional)"})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"YouTube Video Link"}),s.jsx("input",{type:"url",value:r.youtubeLink,onChange:P=>a({...r,youtubeLink:P.target.value}),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${b.youtubeLink?"border-red-500":"border-gray-300"}`,placeholder:"https://www.youtube.com/watch?v=...",disabled:S}),b.youtubeLink&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.youtubeLink}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Add a YouTube video link to display alongside or instead of images. Supported formats: youtube.com/watch?v=, youtu.be/"})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Title (English) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:r.titleEn,onChange:P=>O("title","en",P.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${b.titleEn?"border-red-500":"border-gray-300"}`,placeholder:"Enter program title in English",disabled:S}),b.titleEn&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.titleEn})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title (Marathi)"}),s.jsx("input",{type:"text",value:r.titleMr,onChange:P=>O("title","mr",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"    ",disabled:S})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",name:"date",value:r.date,onChange:te,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${b.date?"border-red-500":"border-gray-300"}`,disabled:S}),b.date&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.date})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Description"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description (English) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{rows:4,value:r.descriptionEn,onChange:P=>O("description","en",P.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${b.descriptionEn?"border-red-500":"border-gray-300"}`,placeholder:"Describe the program or event in English",disabled:S}),b.descriptionEn&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.descriptionEn})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Marathi)"}),s.jsx("textarea",{rows:4,value:r.descriptionMr,onChange:P=>O("description","mr",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"     ",disabled:S})]})]})]}),s.jsxs("div",{className:"flex gap-4 justify-end",children:[s.jsx("button",{type:"button",onClick:()=>n("/admin/gallery"),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",disabled:S,children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:S,children:S?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),t?"Updating...":"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ba,{className:"w-4 h-4"}),t?"Update Program":"Save Program"]})})]})]})]})}function xB(){const n=Dr(),[e,t]=K.useState([]),[r,a]=K.useState(!0),[o,c]=K.useState(""),[u,h]=K.useState("ALL"),[f,g]=K.useState("ALL");K.useEffect(()=>{y()},[]);const y=async()=>{try{a(!0);const E=await iw();t(E)}catch(E){console.error("Error loading forms:",E),alert("Failed to load forms. Please try again.")}finally{a(!1)}},w=e.filter(E=>{const L=E.titleEn.toLowerCase().includes(o.toLowerCase())||E.titleMr&&E.titleMr.toLowerCase().includes(o.toLowerCase()),D=u==="ALL"||E.category===u,O=f==="ALL"||E.language===f;return L&&D&&O}),b=async(E,L)=>{if(window.confirm("Are you sure you want to delete this form? The PDF file will also be removed."))try{await UU(E,L),t(e.filter(D=>D.id!==E))}catch(D){console.error("Error deleting form:",D),alert("Failed to delete form. Please try again.")}},T=E=>{const L={CERTIFICATE:"bg-blue-100 text-blue-700",APPLICATION:"bg-green-100 text-green-700",TAX:"bg-orange-100 text-orange-700",LICENSE:"bg-purple-100 text-purple-700",OTHER:"bg-gray-100 text-gray-700"};return s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${L[E]}`,children:E})},S=E=>{const L={ENGLISH:"bg-blue-500 text-white",MARATHI:"bg-orange-500 text-white",BOTH:"bg-gradient-to-r from-blue-500 to-orange-500 text-white"};return s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1 ${L[E]}`,children:[s.jsx(jf,{className:"w-3 h-3"}),E]})},j=E=>{E.fileUrl?window.open(E.fileUrl,"_blank"):alert(" No file URL available for this form. Please edit and re-upload the PDF file.")};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Forms & Downloads"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage downloadable forms and documents"})]}),s.jsxs("button",{onClick:()=>n("/admin/forms/new"),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all shadow-md hover:shadow-lg",children:[s.jsx(Ss,{className:"w-5 h-5"}),"Upload Form"]})]}),r?s.jsx("div",{className:"flex justify-center items-center py-16",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-orange-600"})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg",children:s.jsx(hr,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Forms"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg",children:s.jsx(jf,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"English"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.filter(E=>E.language==="ENGLISH"||E.language==="BOTH").length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-600 to-orange-700 rounded-lg",children:s.jsx(jf,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Marathi"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.filter(E=>E.language==="MARATHI"||E.language==="BOTH").length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-600 to-green-700 rounded-lg",children:s.jsx(Do,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Downloads"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.reduce((E,L)=>E+(L.downloads||0),0)})]})]})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6 border border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Bi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search forms...",value:o,onChange:E=>c(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),s.jsx("div",{children:s.jsxs("select",{value:u,onChange:E=>h(E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"ALL",children:"All Categories"}),s.jsx("option",{value:"CERTIFICATE",children:"Certificate"}),s.jsx("option",{value:"APPLICATION",children:"Application"}),s.jsx("option",{value:"TAX",children:"Tax"}),s.jsx("option",{value:"LICENSE",children:"License"}),s.jsx("option",{value:"OTHER",children:"Other"})]})}),s.jsx("div",{children:s.jsxs("select",{value:f,onChange:E=>g(E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"ALL",children:"All Languages"}),s.jsx("option",{value:"ENGLISH",children:"English Only"}),s.jsx("option",{value:"MARATHI",children:"Marathi Only"}),s.jsx("option",{value:"BOTH",children:"Both Languages"})]})})]})}),s.jsx("div",{className:"space-y-4",children:w.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center border border-gray-200",children:[s.jsx(hr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No Forms Found"}),s.jsx("p",{className:"text-gray-500 mb-4",children:o||u!=="ALL"||f!=="ALL"?"Try adjusting your filters":"Get started by uploading your first form"}),!o&&u==="ALL"&&f==="ALL"&&s.jsx("button",{onClick:()=>n("/admin/forms/new"),className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all",children:"Upload Form"})]}):w.map(E=>s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[T(E.category),S(E.language),!E.fileUrl&&s.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700 flex items-center gap-1 animate-pulse",children:[s.jsx(tw,{className:"w-3 h-3"}),"Missing File"]})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-1",children:E.titleEn}),E.titleMr&&s.jsx("p",{className:"text-base text-gray-600 mb-3",children:E.titleMr}),s.jsx("p",{className:"text-gray-700 mb-2",children:E.descriptionEn}),E.descriptionMr&&s.jsx("p",{className:"text-gray-600 text-sm mb-4",children:E.descriptionMr}),s.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hr,{className:"w-4 h-4"}),s.jsx("span",{children:E.fileName||"PDF Document"})]}),E.fileSize&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Do,{className:"w-4 h-4"}),s.jsxs("span",{children:[(E.fileSize/1024).toFixed(2)," KB"]})]})]})]}),s.jsxs("div",{className:"flex gap-2 ml-4",children:[s.jsx("button",{onClick:()=>j(E),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Download",children:s.jsx(Do,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>n(`/admin/forms/edit/${E.id}`),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:s.jsx(dp,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>b(E.id,E.fileUrl),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:s.jsx(mi,{className:"w-5 h-5"})})]})]})},E.id))})]})]})}function g4(){const n=Dr(),{id:e}=Xc(),t=!!e,[r,a]=K.useState({titleEn:"",titleMr:"",descriptionEn:"",descriptionMr:"",category:"APPLICATION",language:"BOTH",file:null,fileName:"",existingFileUrl:""}),[o,c]=K.useState({}),[u,h]=K.useState(!1),[f,g]=K.useState(0);K.useEffect(()=>{(async()=>{if(t)try{h(!0);const L=await OU(e);L?a({titleEn:L.titleEn||"",titleMr:L.titleMr||"",descriptionEn:L.descriptionEn||"",descriptionMr:L.descriptionMr||"",category:L.category,language:L.language,file:null,fileName:L.fileName||"",existingFileUrl:L.fileUrl||""}):(alert("Form not found"),n("/admin/forms"))}catch(L){console.error("Error loading form:",L),alert("Failed to load form")}finally{h(!1)}})()},[e,t,n]);const y=(E,L)=>{a(D=>({...D,[E]:L})),o[E]&&c(D=>({...D,[E]:""}))},w=E=>{const{name:L,value:D}=E.target;a(O=>({...O,[L]:D})),o[L]&&c(O=>({...O,[L]:""}))},b=E=>{const L=E.target.files[0];if(L){if(L.type!=="application/pdf"){c(D=>({...D,file:"Please select a PDF file"}));return}if(L.size>10*1024*1024){c(D=>({...D,file:"File size should be less than 10MB"}));return}a(D=>({...D,file:L,fileName:L.name})),c(D=>({...D,file:""}))}},T=()=>{a(E=>({...E,file:null,fileName:""}))},S=()=>{const E={};return r.titleEn.trim()||(E.titleEn="English title is required"),r.descriptionEn.trim()||(E.descriptionEn="English description is required"),!r.file&&!t&&(E.file="PDF file is required"),!r.fileName&&!r.file&&(E.file="PDF file is required"),c(E),Object.keys(E).length===0},j=async E=>{if(E.preventDefault(),!!S())try{h(!0),g(0);const L={titleEn:r.titleEn,titleMr:r.titleMr,descriptionEn:r.descriptionEn,descriptionMr:r.descriptionMr,category:r.category,language:r.language};t?(await VU(e,L,r.file,r.existingFileUrl,D=>g(D)),alert("Form updated successfully!")):(await FU(L,r.file,D=>g(D)),alert("Form uploaded successfully!")),n("/admin/forms")}catch(L){console.error("Error saving form:",L),alert(`Failed to ${t?"update":"upload"} form: ${L.message}`)}finally{h(!1),g(0)}};return s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>n("/admin/forms"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(gl,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:t?"Edit Form":"Upload New Form"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t?"Update form information":"Upload a new downloadable form"})]})]})}),s.jsxs("form",{onSubmit:j,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"PDF File Upload"}),s.jsxs("div",{className:"space-y-4",children:[r.fileName?s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 border border-gray-300 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(hr,{className:"w-8 h-8 text-red-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-800",children:r.fileName}),s.jsx("p",{className:"text-sm text-gray-500",children:"PDF Document"})]})]}),s.jsx("button",{type:"button",onClick:T,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:s.jsx(Ui,{className:"w-5 h-5"})})]}):s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[s.jsx($f,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 mb-2",children:"Click to upload or drag and drop"}),s.jsx("p",{className:"text-sm text-gray-500",children:"PDF up to 10MB"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block",children:s.jsx("input",{type:"file",accept:".pdf,application/pdf",onChange:b,className:`block w-full text-sm text-gray-500
                    file:mr-4 file:py-2 file:px-4
                    file:rounded-lg file:border-0
                    file:text-sm file:font-semibold
                    file:bg-gradient-to-r file:from-orange-500 file:to-orange-600
                    file:text-white hover:file:from-orange-600 hover:file:to-orange-700
                    file:cursor-pointer cursor-pointer`})}),o.file&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.file})]}),u&&f>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[s.jsx("span",{children:"Uploading..."}),s.jsxs("span",{children:[f,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 h-2 rounded-full transition-all duration-300",style:{width:`${f}%`}})})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Form Title (English) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:r.titleEn,onChange:E=>y("titleEn",E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter form title in English"}),o.titleEn&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.titleEn})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Form Title (Marathi)"}),s.jsx("input",{type:"text",value:r.titleMr,onChange:E=>y("titleMr",E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"    "})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Category ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"category",value:r.category,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"CERTIFICATE",children:"Certificate"}),s.jsx("option",{value:"APPLICATION",children:"Application"}),s.jsx("option",{value:"TAX",children:"Tax"}),s.jsx("option",{value:"LICENSE",children:"License"}),s.jsx("option",{value:"OTHER",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Language ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"language",value:r.language,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"ENGLISH",children:"English Only"}),s.jsx("option",{value:"MARATHI",children:"Marathi Only"}),s.jsx("option",{value:"BOTH",children:"Both Languages"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Description"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description (English) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{rows:4,value:r.descriptionEn,onChange:E=>y("descriptionEn",E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Describe the form and its purpose in English"}),o.descriptionEn&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.descriptionEn})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Marathi)"}),s.jsx("textarea",{rows:4,value:r.descriptionMr,onChange:E=>y("descriptionMr",E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"      "})]})]})]}),s.jsxs("div",{className:"flex gap-4 justify-end",children:[s.jsx("button",{type:"button",onClick:()=>n("/admin/forms"),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",disabled:u,children:"Cancel"}),s.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:u,children:[s.jsx(ba,{className:"w-4 h-4"}),u?t?"Updating...":"Uploading...":t?"Update Form":"Upload Form"]})]})]})]})}function yB(){const{refresh:n}=tu(),[e,t]=K.useState({panchayatName:{en:"",mr:""},tagline:{en:"",mr:""},phone:"",email:"",address:{en:"",mr:""},officeTimings:{en:"",mr:""},facebook:"",twitter:"",instagram:"",officePhoto:"",googleMapsLink:""}),[r,a]=K.useState({}),[o,c]=K.useState(!1),[u,h]=K.useState(!0),[f,g]=K.useState(!1),[y,w]=K.useState(null),[b,T]=K.useState("");K.useEffect(()=>{(async()=>{try{h(!0);const te=await Nx();te?(t({panchayatName:te.panchayatName||{en:"",mr:""},tagline:te.tagline||{en:"",mr:""},phone:te.contact?.phone||"",email:te.contact?.email||"",address:te.contact?.address||{en:"",mr:""},officeTimings:te.officeTimings||{en:"",mr:""},facebook:te.socialMedia?.facebook||"",twitter:te.socialMedia?.twitter||"",instagram:te.socialMedia?.instagram||"",officePhoto:te.officePhoto||"",googleMapsLink:te.googleMapsLink||""}),T(te.officePhoto||"")):t({panchayatName:Ds.panchayatName,tagline:Ds.tagline,phone:Ds.contact.phone,email:Ds.contact.email,address:Ds.contact.address,officeTimings:Ds.officeTimings,facebook:Ds.socialMedia.facebook,twitter:Ds.socialMedia.twitter,instagram:Ds.socialMedia.instagram,officePhoto:"",googleMapsLink:""})}catch(te){console.error("Error loading settings:",te),t({panchayatName:Ds.panchayatName,tagline:Ds.tagline,phone:Ds.contact.phone,email:Ds.contact.email,address:Ds.contact.address,officeTimings:Ds.officeTimings,facebook:Ds.socialMedia.facebook,twitter:Ds.socialMedia.twitter,instagram:Ds.socialMedia.instagram})}finally{h(!1)}})()},[]);const S=(O,te)=>{t(ae=>({...ae,[O]:te})),r[O]&&a(ae=>{const H={...ae};return delete H[O],H})},j=O=>{const te=O.target.files[0];if(te){w(te);const ae=new FileReader;ae.onloadend=()=>{T(ae.result)},ae.readAsDataURL(te)}},E=()=>{w(null),T(""),t(O=>({...O,officePhoto:""}))},L=()=>{const O={};return e.panchayatName.en.trim()||(O.panchayatName="Panchayat name is required"),e.tagline.en.trim()||(O.tagline="Tagline is required"),e.phone.trim()?/^\+?[\d\s-]{10,}$/.test(e.phone)||(O.phone="Invalid phone number"):O.phone="Phone number is required",e.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(O.email="Invalid email address"):O.email="Email is required",e.address.en.trim()||(O.address="Address is required"),e.officeTimings.en.trim()||(O.officeTimings="Office timings are required"),a(O),Object.keys(O).length===0},D=async O=>{if(O.preventDefault(),!!L()){g(!0);try{let te=e.officePhoto;if(y){if(e.officePhoto)try{await yy(e.officePhoto)}catch(H){console.warn("Failed to delete old office photo:",H)}te=await xy(y,"site")}const ae={panchayatName:e.panchayatName,tagline:e.tagline,contact:{phone:e.phone,email:e.email,address:e.address},officeTimings:e.officeTimings,socialMedia:{facebook:e.facebook,twitter:e.twitter,instagram:e.instagram},officePhoto:te,googleMapsLink:e.googleMapsLink};await qA(ae),await n(),console.log("Settings saved successfully!",ae),c(!0),setTimeout(()=>{c(!1),window.location.reload()},1e3)}catch(te){console.error("Error saving settings:",te),alert("Failed to save settings. Please try again.")}finally{g(!1)}}};return u?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Site Settings"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Configure your Gram Panchayat website settings"})]})}),o&&s.jsx("div",{className:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg",children:" Settings saved successfully! Reloading page..."}),s.jsxs("form",{onSubmit:D,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx(ul,{className:"text-primary-600",size:24}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Basic Information"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(jn,{label:"Panchayat Name",name:"panchayatName",value:e.panchayatName,onChange:O=>S("panchayatName",O),required:!0,placeholder:"e.g., Gram Panchayat Pindkepar Lodha"}),r.panchayatName&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.panchayatName}),s.jsx(jn,{label:"Tagline",name:"tagline",value:e.tagline,onChange:O=>S("tagline",O),required:!0,placeholder:"e.g., Progress with Tradition"}),r.tagline&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.tagline})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx(io,{className:"text-primary-600",size:24}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Contact Information"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"tel",value:e.phone,onChange:O=>S("phone",O.target.value),placeholder:"+91 1234567890",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),r.phone&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.phone})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"email",value:e.email,onChange:O=>S("email",O.target.value),placeholder:"contact@grampanchayat.gov.in",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),r.email&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.email})]}),s.jsx(jn,{label:"Address",name:"address",type:"textarea",rows:3,value:e.address,onChange:O=>S("address",O),required:!0,placeholder:"Village, Taluka, District, State, PIN"}),r.address&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.address}),s.jsx(jn,{label:"Office Timings",name:"officeTimings",value:e.officeTimings,onChange:O=>S("officeTimings",O),required:!0,placeholder:"e.g., Mon-Fri: 10:00 AM - 5:00 PM"}),r.officeTimings&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.officeTimings}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(tc,{size:16,className:"text-primary-600"}),"Google Maps Embed Link"]})}),s.jsx("input",{type:"url",value:e.googleMapsLink,onChange:O=>S("googleMapsLink",O.target.value),placeholder:"https://www.google.com/maps/embed?pb=...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'To get the embed link: Go to Google Maps  Search your location  Click "Share"  Click "Embed a map"  Copy the iframe src URL'})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx(Ma,{className:"text-primary-600",size:24}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Office Photo"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Upload a photo of your Gram Panchayat office. This will be displayed on the Panchayat page."}),b&&s.jsxs("div",{className:"relative inline-block",children:[s.jsx("img",{src:b,alt:"Office",className:"w-full max-w-md h-64 object-cover rounded-lg border-2 border-gray-300"}),s.jsx("button",{type:"button",onClick:E,className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition-colors shadow-lg",children:s.jsx(Ui,{size:20})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:b?"Change Photo":"Upload Photo"}),s.jsx("input",{type:"file",accept:"image/*",onChange:j,className:`block w-full text-sm text-gray-500
                  file:mr-4 file:py-2 file:px-4
                  file:rounded-lg file:border-0
                  file:text-sm file:font-semibold
                  file:bg-primary-50 file:text-primary-700
                  hover:file:bg-primary-100
                  cursor-pointer`}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Recommended: 1200x800px or larger, JPG or PNG format"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx(p2,{className:"text-primary-600",size:24}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Social Media Links"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(p2,{size:16,className:"inline mr-2"}),"Facebook URL"]}),s.jsx("input",{type:"url",value:e.facebook,onChange:O=>S("facebook",O.target.value),placeholder:"https://facebook.com/yourpage",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(sT,{size:16,className:"inline mr-2"}),"Twitter URL"]}),s.jsx("input",{type:"url",value:e.twitter,onChange:O=>S("twitter",O.target.value),placeholder:"https://twitter.com/yourhandle",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(oV,{size:16,className:"inline mr-2"}),"Instagram URL"]}),s.jsx("input",{type:"url",value:e.instagram,onChange:O=>S("instagram",O.target.value),placeholder:"https://instagram.com/yourprofile",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]})]}),s.jsx("div",{className:"flex justify-end gap-4",children:s.jsxs("button",{type:"submit",disabled:f,className:"flex items-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50",children:[s.jsx(ba,{size:20}),f?"Saving...":"Save Settings"]})})]})]})}const bB=async()=>{try{const n=Zt(Xe,Gt.grievances()),e=Es(n,ac("createdAt","desc")),t=await fs(e),r=[];return t.forEach(a=>{r.push({id:a.id,...a.data()})}),r}catch(n){throw console.error("Error fetching grievances:",n),n}};function vB(){const n=Dr(),[e,t]=K.useState([]),[r,a]=K.useState(!0);K.useEffect(()=>{o()},[]);const o=async()=>{try{const O=await bB();t(O)}catch(O){console.error("Error loading grievances:",O)}finally{a(!1)}},[c,u]=K.useState(""),[h,f]=K.useState("ALL"),[g,y]=K.useState("ALL"),[w,b]=K.useState("ALL"),T=e.filter(O=>{const te=O.title.en.toLowerCase().includes(c.toLowerCase())||O.title.mr.toLowerCase().includes(c.toLowerCase())||O.submittedBy.toLowerCase().includes(c.toLowerCase()),ae=h==="ALL"||O.status===h,H=g==="ALL"||O.category===g,V=w==="ALL"||O.priority===w;return te&&ae&&H&&V}),S=O=>{window.confirm("Are you sure you want to delete this grievance?")&&t(e.filter(te=>te.id!==O))},j=O=>{const te={PENDING:"bg-yellow-100 text-yellow-700 border-yellow-300",IN_PROGRESS:"bg-blue-100 text-blue-700 border-blue-300",RESOLVED:"bg-green-100 text-green-700 border-green-300",REJECTED:"bg-red-100 text-red-700 border-red-300"},ae={PENDING:s.jsx(Gf,{className:"w-3 h-3"}),IN_PROGRESS:s.jsx(Qn,{className:"w-3 h-3"}),RESOLVED:s.jsx(ho,{className:"w-3 h-3"}),REJECTED:s.jsx(Vg,{className:"w-3 h-3"})};return s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium border flex items-center gap-1 ${te[O]}`,children:[ae[O],O.replace("_"," ")]})},E=O=>{const te={LOW:"bg-gray-100 text-gray-700",MEDIUM:"bg-orange-100 text-orange-700",HIGH:"bg-red-100 text-red-700"};return s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${te[O]}`,children:O})},L=O=>{const te={WATER:"bg-blue-100 text-blue-700",ROAD:"bg-gray-100 text-gray-700",ELECTRICITY:"bg-yellow-100 text-yellow-700",SANITATION:"bg-green-100 text-green-700",TAX:"bg-purple-100 text-purple-700",OTHER:"bg-pink-100 text-pink-700"};return s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${te[O]}`,children:O})},D=O=>O?new Date(O).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"N/A";return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Grievances Management"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage citizen complaints and feedback"})]}),s.jsxs("button",{onClick:()=>n("/admin/grievances/new"),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all shadow-md hover:shadow-lg",children:[s.jsx(Ss,{className:"w-5 h-5"}),"Add Grievance"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-lg",children:s.jsx(Gf,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.filter(O=>O.status==="PENDING").length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg",children:s.jsx(Qn,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.filter(O=>O.status==="IN_PROGRESS").length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-600 to-green-700 rounded-lg",children:s.jsx(ho,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Resolved"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.filter(O=>O.status==="RESOLVED").length})]})]})}),s.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg",children:s.jsx(_f,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.length})]})]})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6 border border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Bi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search grievances...",value:c,onChange:O=>u(O.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),s.jsx("div",{children:s.jsxs("select",{value:h,onChange:O=>f(O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"ALL",children:"All Status"}),s.jsx("option",{value:"PENDING",children:"Pending"}),s.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),s.jsx("option",{value:"RESOLVED",children:"Resolved"}),s.jsx("option",{value:"REJECTED",children:"Rejected"})]})}),s.jsx("div",{children:s.jsxs("select",{value:g,onChange:O=>y(O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"ALL",children:"All Categories"}),s.jsx("option",{value:"WATER",children:"Water"}),s.jsx("option",{value:"ROAD",children:"Road"}),s.jsx("option",{value:"ELECTRICITY",children:"Electricity"}),s.jsx("option",{value:"SANITATION",children:"Sanitation"}),s.jsx("option",{value:"TAX",children:"Tax"}),s.jsx("option",{value:"OTHER",children:"Other"})]})}),s.jsx("div",{children:s.jsxs("select",{value:w,onChange:O=>b(O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"ALL",children:"All Priorities"}),s.jsx("option",{value:"HIGH",children:"High"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"LOW",children:"Low"})]})})]})}),s.jsx("div",{className:"space-y-4",children:T.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center border border-gray-200",children:[s.jsx(_f,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No Grievances Found"}),s.jsx("p",{className:"text-gray-500 mb-4",children:c||h!=="ALL"||g!=="ALL"||w!=="ALL"?"Try adjusting your filters":"Get started by adding your first grievance"}),!c&&h==="ALL"&&g==="ALL"&&w==="ALL"&&s.jsx("button",{onClick:()=>n("/admin/grievances/new"),className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all",children:"Add Grievance"})]}):T.map(O=>s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:[j(O.status),E(O.priority),L(O.category)]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-1",children:O.title.en}),s.jsx("p",{className:"text-base text-gray-600 mb-3",children:O.title.mr}),s.jsx("p",{className:"text-gray-700 mb-2",children:O.description.en}),s.jsx("p",{className:"text-gray-600 text-sm mb-4",children:O.description.mr}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600 mb-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Submitted By:"})," ",O.submittedBy]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Phone:"})," ",O.phone]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Email:"})," ",O.email]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Address:"})," ",O.address]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Submitted Date:"})," ",D(O.submittedDate)]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Assigned To:"})," ",O.assignedTo]})]}),O.response&&s.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Response:"}),s.jsx("p",{className:"text-blue-800 text-sm",children:O.response.en}),s.jsx("p",{className:"text-blue-700 text-xs mt-1",children:O.response.mr})]}),O.resolvedDate&&s.jsxs("div",{className:"mt-2 text-sm text-green-700",children:[s.jsx("span",{className:"font-medium",children:"Resolved on:"})," ",D(O.resolvedDate)]})]}),s.jsxs("div",{className:"flex gap-2 ml-4",children:[s.jsx("button",{onClick:()=>n(`/admin/grievances/edit/${O.id}`),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:s.jsx(dp,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>S(O.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:s.jsx(mi,{className:"w-5 h-5"})})]})]})},O.id))})]})}function p4(){const n=Dr(),{id:e}=Xc(),t=!!e,[r,a]=K.useState(!1),[o,c]=K.useState(!1),[u,h]=K.useState({title:{en:"",mr:""},description:{en:"",mr:""},category:"OTHER",status:"PENDING",priority:"MEDIUM",submittedBy:"",phone:"",email:"",address:"",submittedDate:new Date().toISOString().split("T")[0],resolvedDate:"",assignedTo:"",response:{en:"",mr:""}}),[f,g]=K.useState({});K.useEffect(()=>{t&&h({title:{en:"Water Supply Issue",mr:" "},description:{en:"No water supply for the last 3 days",mr:"    "},category:"WATER",status:"PENDING",priority:"HIGH",submittedBy:"Ramesh Kumar",phone:"+91 9876543210",email:"ramesh@example.com",address:"Village Road, Area 1",submittedDate:"2024-11-15",resolvedDate:"",assignedTo:"Water Department",response:{en:"",mr:""}})},[e,t]);const y=(S,j)=>{h(E=>({...E,[S]:j})),f[S]&&g(E=>({...E,[S]:""}))},w=S=>{const{name:j,value:E}=S.target;h(L=>({...L,[j]:E})),f[j]&&g(L=>({...L,[j]:""}))},b=()=>{const S={};return u.title.en.trim()||(S.title="Title is required"),u.description.en.trim()||(S.description="Description is required"),u.submittedBy.trim()||(S.submittedBy="Name is required"),u.phone.trim()?/^\+?[\d\s-]{10,}$/.test(u.phone)||(S.phone="Invalid phone number"):S.phone="Phone number is required",u.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u.email)||(S.email="Invalid email address"):S.email="Email is required",u.address.trim()||(S.address="Address is required"),u.submittedDate||(S.submittedDate="Submitted date is required"),u.assignedTo.trim()||(S.assignedTo="Department assignment is required"),u.status==="RESOLVED"&&!u.resolvedDate&&(S.resolvedDate="Resolved date is required when status is Resolved"),g(S),Object.keys(S).length===0},T=S=>{if(S.preventDefault(),!b())return;const j={id:t?parseInt(e):Date.now(),title:u.title,description:u.description,category:u.category,status:u.status,priority:u.priority,submittedBy:u.submittedBy,phone:u.phone,email:u.email,address:u.address,submittedDate:u.submittedDate,resolvedDate:u.resolvedDate||null,assignedTo:u.assignedTo,response:u.response.en&&u.response.mr?u.response:null};console.log(t?"Updating grievance:":"Creating grievance:",j),n("/admin/grievances")};return s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>n("/admin/grievances"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(gl,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:t?"Edit Grievance":"Add New Grievance"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t?"Update grievance information and status":"Record a new citizen grievance"})]})]})}),r?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s.jsx(s.Fragment,{children:s.jsxs("form",{onSubmit:T,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Grievance Details"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(jn,{label:"Grievance Title",name:"title",value:u.title,onChange:S=>y("title",S),required:!0,placeholder:"Enter grievance title"}),f.title&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.title})]}),s.jsxs("div",{children:[s.jsx(jn,{label:"Description",name:"description",type:"textarea",rows:4,value:u.description,onChange:S=>y("description",S),required:!0,placeholder:"Describe the grievance in detail"}),f.description&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.description})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Category ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"category",value:u.category,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"WATER",children:"Water"}),s.jsx("option",{value:"ROAD",children:"Road"}),s.jsx("option",{value:"ELECTRICITY",children:"Electricity"}),s.jsx("option",{value:"SANITATION",children:"Sanitation"}),s.jsx("option",{value:"TAX",children:"Tax"}),s.jsx("option",{value:"OTHER",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Priority ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"priority",value:u.priority,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"LOW",children:"Low"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"HIGH",children:"High"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Status ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"status",value:u.status,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"PENDING",children:"Pending"}),s.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),s.jsx("option",{value:"RESOLVED",children:"Resolved"}),s.jsx("option",{value:"REJECTED",children:"Rejected"})]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Citizen Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Submitted By ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"submittedBy",value:u.submittedBy,onChange:w,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${f.submittedBy?"border-red-500":"border-gray-300"}`,placeholder:"Enter citizen name"}),f.submittedBy&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.submittedBy})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"tel",name:"phone",value:u.phone,onChange:w,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${f.phone?"border-red-500":"border-gray-300"}`,placeholder:"+91 9876543210"}),f.phone&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.phone})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"email",name:"email",value:u.email,onChange:w,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${f.email?"border-red-500":"border-gray-300"}`,placeholder:"citizen@example.com"}),f.email&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.email})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Address ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"address",value:u.address,onChange:w,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${f.address?"border-red-500":"border-gray-300"}`,placeholder:"Enter full address"}),f.address&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.address})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Management Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Assigned To ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"assignedTo",value:u.assignedTo,onChange:w,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${f.assignedTo?"border-red-500":"border-gray-300"}`,placeholder:"Department or Officer name"}),f.assignedTo&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.assignedTo})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Submitted Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",name:"submittedDate",value:u.submittedDate,onChange:w,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${f.submittedDate?"border-red-500":"border-gray-300"}`}),f.submittedDate&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.submittedDate})]}),u.status==="RESOLVED"&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Resolved Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",name:"resolvedDate",value:u.resolvedDate,onChange:w,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${f.resolvedDate?"border-red-500":"border-gray-300"}`}),f.resolvedDate&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.resolvedDate})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 pb-3 border-b",children:"Response (Optional)"}),s.jsx("div",{children:s.jsx(jn,{label:"Response",name:"response",type:"textarea",rows:3,value:u.response,onChange:S=>y("response",S),placeholder:"Enter response or action taken"})})]}),s.jsxs("div",{className:"flex gap-4 justify-end",children:[s.jsx("button",{type:"button",onClick:()=>n("/admin/grievances"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:o,children:"Cancel"}),s.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:o,children:[s.jsx(ba,{className:"w-4 h-4"}),o?"Saving...":t?"Update Grievance":"Submit Grievance"]})]})]})})]})}const wB=()=>{const{language:n}=hs(),e=Dr(),[t,r]=K.useState([]),[a,o]=K.useState(!0),[c,u]=K.useState(""),[h,f]=K.useState("ALL"),[g,y]=K.useState("ALL"),[w,b]=K.useState({start:"",end:""});K.useEffect(()=>{(async()=>{try{o(!0);const H=await gT();r(H)}catch(H){console.error("Error loading transactions:",H),alert("Failed to load transactions")}finally{o(!1)}})()},[]);const T={totalIncome:t.filter(ae=>ae.type==="INCOME").reduce((ae,H)=>ae+H.amount,0),totalExpense:t.filter(ae=>ae.type==="EXPENSE").reduce((ae,H)=>ae+H.amount,0),balance:0,transactionCount:t.length};T.balance=T.totalIncome-T.totalExpense;const S=t.filter(ae=>{const H=ae.description.toLowerCase().includes(c.toLowerCase())||ae.descriptionMr.includes(c)||ae.subcategory.toLowerCase().includes(c.toLowerCase())||ae.referenceNumber.toLowerCase().includes(c.toLowerCase()),V=h==="ALL"||ae.type===h,k=g==="ALL"||ae.category===g,F=(!w.start||ae.transactionDate>=w.start)&&(!w.end||ae.transactionDate<=w.end);return H&&V&&k&&F}),j=async ae=>{if(window.confirm(n==="en"?"Are you sure you want to delete this transaction?":"        ?"))try{await JU(ae),r(t.filter(H=>H.id!==ae))}catch(H){console.error("Error deleting transaction:",H),alert("Failed to delete transaction")}},E=ae=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(ae),L=ae=>new Date(ae).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),D=ae=>{switch(ae){case"INCOME":return"bg-green-100 text-green-800 border-green-300";case"EXPENSE":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},O=ae=>{switch(ae){case"TAX":return s.jsx(_x,{size:16});case"GRANT":return s.jsx(IV,{size:16});case"SALARY":return s.jsx(w2,{size:16});case"INFRASTRUCTURE":return s.jsx(Wd,{size:16});case"UTILITIES":return s.jsx(pg,{size:16});default:return s.jsx(hr,{size:16})}},te=()=>{alert(n==="en"?"Export functionality will be implemented":"    ")};return a?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-[#ff6b00]"})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:n==="en"?"Financial Management":" "}),s.jsx("p",{className:"text-gray-600 mt-1",children:n==="en"?"Track income, expenses, and budgets":",     "})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:te,className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-[#138808] text-[#138808] rounded-lg hover:bg-[#138808] hover:text-white transition-colors",children:[s.jsx(Do,{size:20}),n==="en"?"Export Report":"  "]}),s.jsxs(_n,{to:"/admin/financials/new",className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-[#ff6b00] to-[#ff8533] text-white rounded-lg hover:shadow-lg transition-all",children:[s.jsx(Ss,{size:20}),n==="en"?"Add Transaction":" "]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-xl border-2 border-green-300 shadow-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"p-3 bg-green-500 rounded-lg",children:s.jsx(Wd,{className:"text-white",size:24})}),s.jsx("span",{className:"text-green-700 font-semibold",children:n==="en"?"Income":""})]}),s.jsx("div",{className:"text-3xl font-bold text-green-800",children:E(T.totalIncome)}),s.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[t.filter(ae=>ae.type==="INCOME").length," ",n==="en"?"transactions":""]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 p-6 rounded-xl border-2 border-red-300 shadow-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"p-3 bg-red-500 rounded-lg",children:s.jsx(pg,{className:"text-white",size:24})}),s.jsx("span",{className:"text-red-700 font-semibold",children:n==="en"?"Expense":""})]}),s.jsx("div",{className:"text-3xl font-bold text-red-800",children:E(T.totalExpense)}),s.jsxs("div",{className:"text-sm text-red-600 mt-1",children:[t.filter(ae=>ae.type==="EXPENSE").length," ",n==="en"?"transactions":""]})]}),s.jsxs("div",{className:`bg-gradient-to-br ${T.balance>=0?"from-blue-50 to-blue-100 border-blue-300":"from-orange-50 to-orange-100 border-orange-300"} p-6 rounded-xl border-2 shadow-md`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:`p-3 ${T.balance>=0?"bg-blue-500":"bg-orange-500"} rounded-lg`,children:s.jsx(w2,{className:"text-white",size:24})}),s.jsx("span",{className:`${T.balance>=0?"text-blue-700":"text-orange-700"} font-semibold`,children:n==="en"?"Balance":""})]}),s.jsx("div",{className:`text-3xl font-bold ${T.balance>=0?"text-blue-800":"text-orange-800"}`,children:E(T.balance)}),s.jsx("div",{className:`text-sm ${T.balance>=0?"text-blue-600":"text-orange-600"} mt-1`,children:T.balance>=0?n==="en"?"Surplus":"":n==="en"?"Deficit":""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-xl border-2 border-purple-300 shadow-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"p-3 bg-purple-500 rounded-lg",children:s.jsx(hr,{className:"text-white",size:24})}),s.jsx("span",{className:"text-purple-700 font-semibold",children:n==="en"?"Total":""})]}),s.jsx("div",{className:"text-3xl font-bold text-purple-800",children:T.transactionCount}),s.jsx("div",{className:"text-sm text-purple-600 mt-1",children:n==="en"?"Transactions":""})]})]}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6 border-2 border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsx("div",{className:"md:col-span-2",children:s.jsxs("div",{className:"relative",children:[s.jsx(Bi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:n==="en"?"Search transactions...":" ...",value:c,onChange:ae=>u(ae.target.value),className:"w-full pl-10 pr-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]})}),s.jsx("div",{children:s.jsxs("select",{value:h,onChange:ae=>f(ae.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]",children:[s.jsx("option",{value:"ALL",children:n==="en"?"All Types":" "}),s.jsx("option",{value:"INCOME",children:n==="en"?"Income":""}),s.jsx("option",{value:"EXPENSE",children:n==="en"?"Expense":""})]})}),s.jsx("div",{children:s.jsxs("select",{value:g,onChange:ae=>y(ae.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]",children:[s.jsx("option",{value:"ALL",children:n==="en"?"All Categories":" "}),s.jsx("option",{value:"TAX",children:n==="en"?"Tax":""}),s.jsx("option",{value:"GRANT",children:n==="en"?"Grant":""}),s.jsx("option",{value:"SALARY",children:n==="en"?"Salary":""}),s.jsx("option",{value:"INFRASTRUCTURE",children:n==="en"?"Infrastructure":" "}),s.jsx("option",{value:"UTILITIES",children:n==="en"?"Utilities":""}),s.jsx("option",{value:"OTHER",children:n==="en"?"Other":""})]})}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("input",{type:"date",value:w.start,onChange:ae=>b({...w,start:ae.target.value}),className:"flex-1 px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00] text-sm"}),s.jsx("span",{className:"text-gray-500",children:"-"}),s.jsx("input",{type:"date",value:w.end,onChange:ae=>b({...w,end:ae.target.value}),className:"flex-1 px-3 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00] text-sm"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md border-2 border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gradient-to-r from-[#ff6b00] to-[#ff8533] text-white",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:n==="en"?"Date":""}),s.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:n==="en"?"Type":""}),s.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:n==="en"?"Category":""}),s.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:n==="en"?"Description":""}),s.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:n==="en"?"Party":""}),s.jsx("th",{className:"px-6 py-4 text-right font-semibold",children:n==="en"?"Amount":""}),s.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:n==="en"?"Payment Mode":" "}),s.jsx("th",{className:"px-6 py-4 text-center font-semibold",children:n==="en"?"Actions":""})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:S.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"8",className:"px-6 py-12 text-center text-gray-500",children:n==="en"?"No transactions found. Add your first transaction!":"   .    !"})}):S.map(ae=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[s.jsx(ds,{size:16,className:"text-gray-400"}),L(ae.transactionDate)]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold border ${D(ae.type)}`,children:ae.type==="INCOME"?s.jsxs(s.Fragment,{children:[s.jsx(Wd,{size:14}),n==="en"?"Income":""]}):s.jsxs(s.Fragment,{children:[s.jsx(pg,{size:14}),n==="en"?"Expense":""]})})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[O(ae.category),s.jsx("span",{className:"text-gray-700",children:n==="en"?ae.subcategory:ae.subcategoryMr})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"max-w-xs",children:[s.jsx("p",{className:"text-gray-700 line-clamp-2",children:n==="en"?ae.description:ae.descriptionMr}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ae.referenceNumber})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"text-gray-700",children:ae.type==="INCOME"?n==="en"?ae.receivedFrom:ae.receivedFromMr:n==="en"?ae.paidTo:ae.paidToMr})}),s.jsx("td",{className:"px-6 py-4 text-right",children:s.jsxs("span",{className:`font-bold text-lg ${ae.type==="INCOME"?"text-green-600":"text-red-600"}`,children:[ae.type==="INCOME"?"+":"-"," ",E(ae.amount)]})}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("span",{className:"text-sm text-gray-600",children:ae.paymentMode.replace("_"," ")}),ae.attachment&&s.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-600 mt-1",children:[s.jsx(hr,{size:12}),n==="en"?"Attachment":""]})]}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("button",{onClick:()=>e(`/admin/financials/edit/${ae.id}`),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:n==="en"?"Edit":" ",children:s.jsx(rm,{size:18})}),s.jsx("button",{onClick:()=>j(ae.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:n==="en"?"Delete":"",children:s.jsx(mi,{size:18})})]})})]},ae.id))})]})})})]})},x4=()=>{const{language:n}=hs(),e=Dr(),{id:t}=Xc(),r=!!t,[a,o]=K.useState(!1),[c,u]=K.useState({type:"INCOME",category:"TAX",subcategory:"",subcategoryMr:"",amount:"",description:"",descriptionMr:"",transactionDate:new Date().toISOString().split("T")[0],paymentMode:"CASH",referenceNumber:"",receivedFrom:"",receivedFromMr:"",paidTo:"",paidToMr:"",attachment:null,remarks:"",remarksMr:""}),[h,f]=K.useState({}),[g,y]=K.useState(null),w={TAX:{en:"Tax",mr:"",subcategories:[{en:"Property Tax",mr:" "},{en:"Water Tax",mr:" "},{en:"Trade License",mr:" "},{en:"Building Permission",mr:" "}]},GRANT:{en:"Grant",mr:"",subcategories:[{en:"Central Government Grant",mr:"  "},{en:"State Government Grant",mr:"  "},{en:"District Grant",mr:" "},{en:"Special Grant",mr:" "}]},FEES:{en:"Fees & Charges",mr:"  ",subcategories:[{en:"Birth/Death Certificate",mr:"/ "},{en:"Other Certificates",mr:" "},{en:"Rent Income",mr:" "},{en:"Advertisement Fees",mr:" "}]},DONATION:{en:"Donation",mr:"",subcategories:[{en:"CSR Donation",mr:"CSR "},{en:"Individual Donation",mr:" "},{en:"Organization Donation",mr:" "}]},OTHER:{en:"Other Income",mr:" ",subcategories:[{en:"Miscellaneous",mr:""}]}},b={SALARY:{en:"Salary & Wages",mr:"  ",subcategories:[{en:"Staff Salaries",mr:" "},{en:"Daily Wages",mr:" "},{en:"Honorarium",mr:""},{en:"Allowances",mr:""}]},INFRASTRUCTURE:{en:"Infrastructure",mr:" ",subcategories:[{en:"Road Construction",mr:" "},{en:"Road Repair",mr:" "},{en:"Drainage Work",mr:" "},{en:"Street Lights",mr:" "},{en:"Water Supply",mr:" "},{en:"Building Maintenance",mr:" "}]},UTILITIES:{en:"Utilities",mr:"",subcategories:[{en:"Electricity Bill",mr:" "},{en:"Water Bill",mr:" "},{en:"Telephone/Internet",mr:"/"},{en:"Fuel",mr:""}]},SUPPLIES:{en:"Supplies & Materials",mr:"  ",subcategories:[{en:"Stationery",mr:" "},{en:"Office Supplies",mr:" "},{en:"Cleaning Materials",mr:" "},{en:"Equipment",mr:""}]},PROGRAMS:{en:"Programs & Schemes",mr:"  ",subcategories:[{en:"Health Programs",mr:" "},{en:"Education Programs",mr:" "},{en:"Social Welfare",mr:" "},{en:"Agriculture Programs",mr:" "}]},ADMINISTRATIVE:{en:"Administrative",mr:"",subcategories:[{en:"Legal Fees",mr:" "},{en:"Audit Fees",mr:" "},{en:"Insurance",mr:""},{en:"Bank Charges",mr:" "},{en:"Travel Expenses",mr:" "}]},OTHER:{en:"Other Expenses",mr:" ",subcategories:[{en:"Miscellaneous",mr:""}]}},T=[{value:"CASH",en:"Cash",mr:""},{value:"CHEQUE",en:"Cheque",mr:""},{value:"ONLINE",en:"Online Payment",mr:" "},{value:"NEFT",en:"NEFT",mr:"NEFT"},{value:"RTGS",en:"RTGS",mr:"RTGS"},{value:"IMPS",en:"IMPS",mr:"IMPS"},{value:"UPI",en:"UPI",mr:"UPI"},{value:"BANK_TRANSFER",en:"Bank Transfer",mr:" "},{value:"DD",en:"Demand Draft",mr:" "}];K.useEffect(()=>{(async()=>{if(r)try{o(!0);const F=await YU(t);if(F){const I=F.transactionDate?new Date(F.transactionDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0];u({...F,transactionDate:I}),F.attachment&&y(F.attachment)}else alert("Transaction not found"),e("/admin/financials")}catch(F){console.error("Error loading transaction:",F),alert("Failed to load transaction")}finally{o(!1)}})()},[t,r,e]);const S=()=>c.type==="INCOME"?w:b,j=()=>S()[c.category]?.subcategories||[],E=k=>{const{name:F,value:I}=k.target;u(P=>({...P,[F]:I})),h[F]&&f(P=>({...P,[F]:""}))},L=k=>{u(F=>({...F,type:k,category:k==="INCOME"?"TAX":"SALARY",subcategory:"",subcategoryMr:"",receivedFrom:"",receivedFromMr:"",paidTo:"",paidToMr:""}))},D=k=>{const F=k.target.value;u(I=>({...I,category:F,subcategory:"",subcategoryMr:""}))},O=k=>{const F=k.target.value;if(F!==""){const P=j()[parseInt(F)];u(B=>({...B,subcategory:P.en,subcategoryMr:P.mr}))}else u(I=>({...I,subcategory:"",subcategoryMr:""}))},te=k=>{const F=k.target.files[0];if(F){if(F.size>5*1024*1024){f(P=>({...P,attachment:n==="en"?"File size should not exceed 5MB":"  5MB   "}));return}if(!["application/pdf","image/jpeg","image/jpg","image/png"].includes(F.type)){f(P=>({...P,attachment:n==="en"?"Only PDF and image files are allowed":" PDF     "}));return}u(P=>({...P,attachment:F})),y(F.name),f(P=>({...P,attachment:""}))}},ae=()=>{const k={};return c.subcategory||(k.subcategory=n==="en"?"Subcategory is required":"  "),(!c.amount||parseFloat(c.amount)<=0)&&(k.amount=n==="en"?"Valid amount is required":"   "),c.description.trim()||(k.description=n==="en"?"Description is required":"  "),c.descriptionMr.trim()||(k.descriptionMr=n==="en"?"Marathi description is required":"   "),c.transactionDate||(k.transactionDate=n==="en"?"Transaction date is required":"   "),c.referenceNumber.trim()||(k.referenceNumber=n==="en"?"Reference number is required":"   "),c.type==="INCOME"?(c.receivedFrom.trim()||(k.receivedFrom=n==="en"?"Received from is required":"   "),c.receivedFromMr.trim()||(k.receivedFromMr=n==="en"?"Marathi received from is required":"   ")):(c.paidTo.trim()||(k.paidTo=n==="en"?"Paid to is required":"   "),c.paidToMr.trim()||(k.paidToMr=n==="en"?"Marathi paid to is required":"   ")),f(k),Object.keys(k).length===0},H=async k=>{if(k.preventDefault(),ae())try{o(!0),r?(await QU(t,c),alert(n==="en"?"Transaction updated successfully!":"   !")):(await XU(c),alert(n==="en"?"Transaction added successfully!":"  !")),e("/admin/financials")}catch(F){console.error("Error saving transaction:",F),alert(n==="en"?`Failed to ${r?"update":"add"} transaction: ${F.message}`:` ${r?"":""} : ${F.message}`)}finally{o(!1)}},V=k=>k?new Intl.NumberFormat("en-IN").format(k):"";return s.jsxs("div",{className:"p-6 max-w-5xl mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:r?n==="en"?"Edit Transaction":"  ":n==="en"?"Add New Transaction":"  "}),s.jsx("p",{className:"text-gray-600 mt-1",children:n==="en"?"Enter financial transaction details":"    "})]}),s.jsxs("form",{onSubmit:H,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx(t4,{className:"text-[#ff6b00]"}),n==="en"?"Transaction Type":" "]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("button",{type:"button",onClick:()=>L("INCOME"),className:`flex-1 p-4 rounded-lg border-2 transition-all ${c.type==="INCOME"?"bg-green-50 border-green-500 text-green-700":"bg-white border-gray-300 text-gray-600 hover:border-green-300"}`,children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("div",{className:"font-semibold",children:n==="en"?"Income":""}),s.jsx("div",{className:"text-sm",children:n==="en"?"Money Received":" "})]}),s.jsxs("button",{type:"button",onClick:()=>L("EXPENSE"),className:`flex-1 p-4 rounded-lg border-2 transition-all ${c.type==="EXPENSE"?"bg-red-50 border-red-500 text-red-700":"bg-white border-gray-300 text-gray-600 hover:border-red-300"}`,children:[s.jsx("div",{className:"text-2xl mb-2",children:""}),s.jsx("div",{className:"font-semibold",children:n==="en"?"Expense":""}),s.jsx("div",{className:"text-sm",children:n==="en"?"Money Paid":" "})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx(hr,{className:"text-[#ff6b00]"}),n==="en"?"Transaction Details":" "]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Category":""," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("select",{name:"category",value:c.category,onChange:D,className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]",children:Object.entries(S()).map(([k,F])=>s.jsx("option",{value:k,children:n==="en"?F.en:F.mr},k))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Subcategory":""," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{onChange:O,value:j().findIndex(k=>k.en===c.subcategory),className:`w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${h.subcategory?"border-red-500":"border-gray-300"}`,children:[s.jsx("option",{value:"",children:n==="en"?"Select subcategory":" "}),j().map((k,F)=>s.jsx("option",{value:F,children:n==="en"?k.en:k.mr},F))]}),h.subcategory&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[s.jsx(Qn,{size:14})," ",h.subcategory]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Amount ()":" ()"," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(_x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"number",name:"amount",value:c.amount,onChange:E,placeholder:"0",className:`w-full pl-10 pr-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${h.amount?"border-red-500":"border-gray-300"}`})]}),c.amount&&s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:V(c.amount)}),h.amount&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[s.jsx(Qn,{size:14})," ",h.amount]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Transaction Date":" "," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"date",name:"transactionDate",value:c.transactionDate,onChange:E,className:`w-full pl-10 pr-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${h.transactionDate?"border-red-500":"border-gray-300"}`})]}),h.transactionDate&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[s.jsx(Qn,{size:14})," ",h.transactionDate]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Description (English)":" ()"," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{name:"description",value:c.description,onChange:E,rows:"3",placeholder:"Enter transaction description in English...",className:`w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${h.description?"border-red-500":"border-gray-300"}`}),h.description&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[s.jsx(Qn,{size:14})," ",h.description]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Description (Marathi)":" ()"," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{name:"descriptionMr",value:c.descriptionMr,onChange:E,rows:"3",placeholder:"    ...",className:`w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${h.descriptionMr?"border-red-500":"border-gray-300"}`}),h.descriptionMr&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[s.jsx(Qn,{size:14})," ",h.descriptionMr]})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx(t4,{className:"text-[#ff6b00]"}),n==="en"?"Payment Information":" "]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Payment Mode":" "," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("select",{name:"paymentMode",value:c.paymentMode,onChange:E,className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]",children:T.map(k=>s.jsx("option",{value:k.value,children:n==="en"?k.en:k.mr},k.value))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Reference Number":" "," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(JF,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",name:"referenceNumber",value:c.referenceNumber,onChange:E,placeholder:"REF/2025/001",className:`w-full pl-10 pr-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${h.referenceNumber?"border-red-500":"border-gray-300"}`})]}),h.referenceNumber&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[s.jsx(Qn,{size:14})," ",h.referenceNumber]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[c.type==="INCOME"?n==="en"?"Received From (English)":"  ()":n==="en"?"Paid To (English)":"  ()",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Wf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",name:c.type==="INCOME"?"receivedFrom":"paidTo",value:c.type==="INCOME"?c.receivedFrom:c.paidTo,onChange:E,placeholder:c.type==="INCOME"?"Name of payer...":"Name of payee...",className:`w-full pl-10 pr-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${(c.type==="INCOME"?h.receivedFrom:h.paidTo)?"border-red-500":"border-gray-300"}`})]}),(c.type==="INCOME"?h.receivedFrom:h.paidTo)&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[s.jsx(Qn,{size:14})," ",c.type==="INCOME"?h.receivedFrom:h.paidTo]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[c.type==="INCOME"?n==="en"?"Received From (Marathi)":"  ()":n==="en"?"Paid To (Marathi)":"  ()",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Wf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",name:c.type==="INCOME"?"receivedFromMr":"paidToMr",value:c.type==="INCOME"?c.receivedFromMr:c.paidToMr,onChange:E,placeholder:c.type==="INCOME"?" ...":" ...",className:`w-full pl-10 pr-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${(c.type==="INCOME"?h.receivedFromMr:h.paidToMr)?"border-red-500":"border-gray-300"}`})]}),(c.type==="INCOME"?h.receivedFromMr:h.paidToMr)&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[s.jsx(Qn,{size:14})," ",c.type==="INCOME"?h.receivedFromMr:h.paidToMr]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Attachment (Invoice, Receipt, etc.)":" (, , .)"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"flex-1 cursor-pointer",children:[s.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 border-2 rounded-lg hover:border-[#ff6b00] transition-colors ${h.attachment?"border-red-500":"border-gray-300"}`,children:[s.jsx($f,{size:20,className:"text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:g||(n==="en"?"Choose file...":" ...")})]}),s.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:te,className:"hidden"})]}),g&&s.jsx("button",{type:"button",onClick:()=>{u(k=>({...k,attachment:null})),y(null)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:s.jsx(Ui,{size:20})})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:n==="en"?"PDF or Image files only. Max size: 5MB":" PDF   .  : 5MB"}),h.attachment&&s.jsxs("p",{className:"text-red-500 text-sm mt-1 flex items-center gap-1",children:[s.jsx(Qn,{size:14})," ",h.attachment]})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:n==="en"?"Additional Notes (Optional)":"  ()"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Remarks (English)":" ()"}),s.jsx("textarea",{name:"remarks",value:c.remarks,onChange:E,rows:"3",placeholder:"Any additional notes...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Remarks (Marathi)":" ()"}),s.jsx("textarea",{name:"remarksMr",value:c.remarksMr,onChange:E,rows:"3",placeholder:"  ...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsxs("button",{type:"button",onClick:()=>e("/admin/financials"),className:"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",disabled:a,children:[s.jsx(Ui,{size:20}),n==="en"?"Cancel":" "]}),s.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-[#138808] to-[#1aa910] text-white rounded-lg hover:shadow-lg transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:a,children:[s.jsx(ba,{size:20}),a?n==="en"?"Saving...":"  ...":r?n==="en"?"Update Transaction":"  ":n==="en"?"Save Transaction":"  "]})]})]})]})},NB=()=>{const{language:n}=hs(),e=Dr(),[t,r]=K.useState({villageImage:"",description:{en:"Shivpur is a vibrant village located in the heart of Maharashtra. With a rich cultural heritage and a progressive outlook, our village has been at the forefront of rural development. The village is known for its agricultural productivity, community spirit, and commitment to education and social welfare.",mr:"        .             .    ,          ."},population:"5,000+",area:"15 sq km",households:"800+",history:{en:"Our village has a rich history spanning over 500 years. Founded during the Maratha Empire, Shivpur has witnessed significant historical events and has been home to many notable personalities. The village played an important role during the freedom struggle and continues to preserve its historical heritage.",mr:"        .                 .             ."},vision:{en:"To transform Shivpur into a model village that balances traditional values with modern development, ensuring prosperity, education, and well-being for all residents while preserving our cultural heritage and environment.",mr:"            ,          ,     ."},mission:{en:"Our mission is to provide quality infrastructure, promote sustainable agriculture, ensure access to education and healthcare, empower youth and women, and foster community participation in development initiatives.",mr:"      ,    ,       ,            ."},importantPlaces:[{id:1,name:{en:"Village Temple",mr:" "},description:{en:"Ancient temple dedicated to Lord Shiva, the spiritual center of our village",mr:"    ,    "},photoUrl:""},{id:2,name:{en:"Community Hall",mr:" "},description:{en:"Modern community hall for village meetings and cultural programs",mr:"       "},photoUrl:""},{id:3,name:{en:"Village Pond",mr:" "},description:{en:"Historic pond that serves as the main water source during summer",mr:"         "},photoUrl:""}]}),[a,o]=K.useState({}),[c,u]=K.useState(!1),[h,f]=K.useState(!0),[g,y]=K.useState(!1);K.useEffect(()=>{(async()=>{try{f(!0);const k=await lT();k&&r({...k,villageImage:k.villageImage||""})}catch(k){console.error("Error loading about content:",k)}finally{f(!1)}})()},[]);const w=(V,k)=>{r(F=>({...F,[V]:k})),a[V]&&o(F=>({...F,[V]:""}))},b=(V,k)=>{r(F=>({...F,[V]:k})),a[V]&&o(F=>({...F,[V]:""}))},T=(V,k,F)=>{const I=[...t.importantPlaces];I[V]={...I[V],[k]:F},r(P=>({...P,importantPlaces:I}))},S=(V,k)=>{const F=k.target.files[0];if(F){if(!F.type.startsWith("image/")){alert(n==="en"?"Please select an image file":"   ");return}if(F.size>5*1024*1024){alert(n==="en"?"Image size should be less than 5MB":"  5MB   ");return}const I=new FileReader;I.onloadend=()=>{const P=[...t.importantPlaces];P[V]={...P[V],photoUrl:I.result},r(B=>({...B,importantPlaces:P}))},I.readAsDataURL(F)}},j=V=>{const k=V.target.files[0];if(k){if(!k.type.startsWith("image/")){alert(n==="en"?"Please select an image file":"   ");return}if(k.size>5*1024*1024){alert(n==="en"?"Image size should be less than 5MB":"  5MB   ");return}const F=new FileReader;F.onloadend=()=>{r(I=>({...I,villageImage:F.result}))},F.readAsDataURL(k)}},E=()=>{r(V=>({...V,villageImage:""}))},L=V=>{const k=[...t.importantPlaces];k[V]={...k[V],photoUrl:""},r(F=>({...F,importantPlaces:k}))},D=()=>{const V={id:Date.now(),name:{en:"",mr:""},description:{en:"",mr:""},photoUrl:""};r(k=>({...k,importantPlaces:[...k.importantPlaces,V]}))},O=V=>{window.confirm(n==="en"?"Remove this place?":"  ?")&&r(k=>({...k,importantPlaces:k.importantPlaces.filter((F,I)=>I!==V)}))},te=()=>{const V={};return t.description.en.trim()||(V.description_en=n==="en"?"English description is required":"   "),t.description.mr.trim()||(V.description_mr=n==="en"?"Marathi description is required":"   "),t.population.trim()||(V.population=n==="en"?"Population is required":"  "),t.area.trim()||(V.area=n==="en"?"Area is required":"  "),t.households.trim()||(V.households=n==="en"?"Households is required":"  "),o(V),Object.keys(V).length===0},ae=async V=>{if(V.preventDefault(),te())try{y(!0),await o4(t),u(!0),setTimeout(()=>u(!1),3e3),alert(n==="en"?"About page content updated successfully!":"About     !")}catch(k){console.error("Error saving about content:",k),alert(n==="en"?"Failed to save about content":"   ")}finally{y(!1)}},H=async()=>{try{await o4(t),window.open("/about","_blank")}catch(V){console.error("Error saving before preview:",V),alert("Failed to save content before preview")}};return s.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:n==="en"?"About Page Management":"About  "}),s.jsx("p",{className:"text-gray-600 mt-1",children:n==="en"?"Edit village information, history, vision, and important places":" , ,      "})]}),s.jsxs("button",{onClick:H,className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-[#138808] text-[#138808] rounded-lg hover:bg-[#138808] hover:text-white transition-colors",children:[s.jsx(Mo,{size:20}),n==="en"?"Preview Page":" "]})]}),c&&s.jsxs("div",{className:"mb-6 p-4 bg-green-50 border-2 border-green-500 rounded-lg flex items-center gap-2 text-green-700",children:[s.jsx(Qn,{size:20}),n==="en"?"Changes saved successfully!":"   !"]}),s.jsxs("form",{onSubmit:ae,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx(nV,{className:"text-[#ff6b00]"}),n==="en"?"Village Hero Image":"  "]}),t.villageImage&&s.jsxs("div",{className:"mb-4 relative inline-block",children:[s.jsx("img",{src:t.villageImage,alt:"Village",className:"h-48 w-auto rounded-lg border-2 border-gray-300 object-cover",onError:V=>{V.target.src="https://via.placeholder.com/800x400?text=Image+Not+Found"}}),s.jsx("button",{type:"button",onClick:E,className:"absolute -top-2 -right-2 p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:s.jsx(Ui,{size:20})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 px-6 py-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg cursor-pointer hover:from-blue-600 hover:to-blue-700 transition-all shadow-md hover:shadow-lg",children:[s.jsx($f,{size:20}),s.jsx("span",{className:"font-medium",children:n==="en"?"Upload Village Photo":"   "})]}),s.jsx("input",{type:"file",accept:"image/*",onChange:j,className:"hidden"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:n==="en"?"Recommended: 1200x600px, Max 5MB, JPG/PNG":": 1200x600px,  5MB, JPG/PNG"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"relative",children:[s.jsx(s4,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",value:t.villageImage&&t.villageImage.startsWith("data:")?"":t.villageImage||"",onChange:V=>w("villageImage",V.target.value),placeholder:n==="en"?"Or paste image URL":"  URL  ",className:"w-full pl-10 pr-4 py-4 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"https://example.com/village-image.jpg"})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx(hr,{className:"text-[#ff6b00]"}),n==="en"?"Village Description":" "]}),s.jsxs("div",{children:[s.jsx(jn,{label:"Village Description",name:"description",type:"textarea",rows:4,value:t.description,onChange:V=>b("description",V),required:!0,placeholder:"Enter village description"}),a.description&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.description})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx(ya,{className:"text-[#ff6b00]"}),n==="en"?"Village Statistics":" "]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Population":""," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:t.population,onChange:V=>w("population",V.target.value),placeholder:"5,000+",className:`w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${a.population?"border-red-500":"border-gray-300"}`}),a.population&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.population})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Area":""," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:t.area,onChange:V=>w("area",V.target.value),placeholder:"15 sq km",className:`w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${a.area?"border-red-500":"border-gray-300"}`}),a.area&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.area})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[n==="en"?"Households":""," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:t.households,onChange:V=>w("households",V.target.value),placeholder:"800+",className:`w-full px-4 py-2 border-2 rounded-lg focus:outline-none focus:border-[#ff6b00] ${a.households?"border-red-500":"border-gray-300"}`}),a.households&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.households})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx(hr,{className:"text-[#ff6b00]"}),n==="en"?"History, Vision & Mission":",   "]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{children:s.jsx(jn,{label:"History",name:"history",type:"textarea",rows:3,value:t.history,onChange:V=>b("history",V),placeholder:"Enter village history"})}),s.jsx("div",{children:s.jsx(jn,{label:"Vision",name:"vision",type:"textarea",rows:3,value:t.vision,onChange:V=>b("vision",V),placeholder:"Enter village vision"})}),s.jsx("div",{children:s.jsx(jn,{label:"Mission",name:"mission",type:"textarea",rows:3,value:t.mission,onChange:V=>b("mission",V),placeholder:"Enter village mission"})})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[s.jsx(tc,{className:"text-[#ff6b00]"}),n==="en"?"Important Places":" "]}),s.jsxs("button",{type:"button",onClick:D,className:"flex items-center gap-2 px-4 py-2 bg-[#138808] text-white rounded-lg hover:bg-[#0f6906] transition-colors",children:[s.jsx(Ss,{size:18}),n==="en"?"Add Place":" "]})]}),s.jsx("div",{className:"space-y-6",children:t.importantPlaces.map((V,k)=>s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border-2 border-gray-200 relative",children:[s.jsx("button",{type:"button",onClick:()=>O(k),className:"absolute top-2 right-2 p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:s.jsx(mi,{size:18})}),s.jsxs("div",{className:"space-y-4 pr-10",children:[s.jsx("div",{children:s.jsx(jn,{label:"Place Name",name:`place-name-${k}`,value:V.name,onChange:F=>T(k,"name",F),placeholder:"Enter place name"})}),s.jsx("div",{children:s.jsx(jn,{label:"Description",name:`place-description-${k}`,type:"textarea",rows:2,value:V.description,onChange:F=>T(k,"description",F),placeholder:"Enter place description"})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n==="en"?"Photo":""}),V.photoUrl&&s.jsxs("div",{className:"mb-3 relative inline-block",children:[s.jsx("img",{src:V.photoUrl,alt:V.name.en,className:"h-32 w-auto rounded-lg border-2 border-gray-300 object-cover",onError:F=>{F.target.src="https://via.placeholder.com/400x300?text=Image+Not+Found"}}),s.jsx("button",{type:"button",onClick:()=>L(k),className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:s.jsx(Ui,{size:16})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg cursor-pointer hover:from-blue-600 hover:to-blue-700 transition-all shadow-md hover:shadow-lg",children:[s.jsx($f,{size:18}),s.jsx("span",{className:"text-sm font-medium",children:n==="en"?"Upload Image":"  "})]}),s.jsx("input",{type:"file",accept:"image/*",onChange:F=>S(k,F),className:"hidden"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n==="en"?"Max 5MB, JPG/PNG":" 5MB, JPG/PNG"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"relative",children:[s.jsx(s4,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),s.jsx("input",{type:"text",value:V.photoUrl&&V.photoUrl.startsWith("data:")?"":V.photoUrl||"",onChange:F=>T(k,"photoUrl",F.target.value),placeholder:n==="en"?"Or paste image URL":"  URL  ",className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"https://example.com/image.jpg"})]})]})]})]})]},V.id))})]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx("button",{type:"button",onClick:()=>e("/admin/dashboard"),className:"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:g,children:n==="en"?"Cancel":" "}),s.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-[#138808] to-[#1aa910] text-white rounded-lg hover:shadow-lg transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:g,children:[s.jsx(ba,{size:20}),g?n==="en"?"Saving...":"  ...":n==="en"?"Save Changes":"  "]})]})]})]})},jB=()=>{const{language:n}=hs(),e=Dr(),[t,r]=K.useState({description:{en:"Education is the foundation of our village development. We are committed to providing quality education to all children and promoting literacy among adults. Our village has well-equipped schools and anganwadis that ensure holistic development of children.",mr:"      .            .             ."},schools:[{id:1,name:{en:"Government Primary School",mr:"  "},type:{en:"Primary",mr:""},classes:"1st to 7th",students:"250+",teachers:"12",facilities:{en:"Computer Lab, Library, Playground, Mid-day Meal",mr:" , ,  ,  "},description:{en:"Well-established primary school with modern facilities and dedicated teachers",mr:"       "}},{id:2,name:{en:"Zilla Parishad High School",mr:"  "},type:{en:"Secondary",mr:""},classes:"8th to 10th",students:"180+",teachers:"15",facilities:{en:"Science Lab, Computer Lab, Sports Room, Library",mr:" ,  ,  , "},description:{en:"Quality secondary education with focus on science and mathematics",mr:"        "}}],anganwadis:[{id:1,name:{en:"Anganwadi Center 1",mr:"  "},location:{en:"Main Village",mr:" "},children:"35",worker:{en:"Smt. Anita Patil",mr:"  "},helper:{en:"Smt. Sunita Bhosale",mr:"  "},services:{en:"Nutrition, Pre-school Education, Health Check-ups, Immunization",mr:", - ,  , "},description:{en:"Comprehensive child development center for children aged 0-6 years",mr:"-       "}},{id:2,name:{en:"Anganwadi Center 2",mr:"  "},location:{en:"East Hamlet",mr:" "},children:"30",worker:{en:"Smt. Rekha Kamble",mr:"  "},helper:{en:"Smt. Meera Jadhav",mr:"  "},services:{en:"Nutrition, Pre-school Education, Health Check-ups, Immunization",mr:", - ,  , "},description:{en:"Well-equipped anganwadi serving children from eastern part of village",mr:"       "}}],programs:[{id:1,name:{en:"Adult Literacy Program",mr:"  "},description:{en:"Evening classes for adults who missed formal education, focusing on basic reading, writing and numeracy skills",mr:"     ,  ,      "},timing:{en:"6 PM - 8 PM (Mon-Fri)",mr:"  -  (-)"},participants:"40+",coordinator:{en:"Mr. Suresh Deshmukh",mr:"  "}},{id:2,name:{en:"Computer Training for Youth",mr:"  "},description:{en:"Free computer training program for village youth covering basic computer skills, MS Office, and internet usage",mr:"  , MS Office           "},timing:{en:"4 PM - 6 PM (Tue-Sat)",mr:"  -  (-)"},participants:"25",coordinator:{en:"Mr. Rahul Patil",mr:"  "}},{id:3,name:{en:"Girl Child Education Support",mr:"  "},description:{en:"Scholarship and support program to encourage girl child education and reduce dropout rates",mr:"            "},beneficiaries:"50+ girls",coordinator:{en:"Mrs. Savita Shinde",mr:"  "}}],stats:{literacyRate:"78%",totalStudents:"500+",totalTeachers:"30+",schoolDropoutRate:"5%"}}),[a,o]=K.useState({}),[c,u]=K.useState(!1),[h,f]=K.useState(!0),[g,y]=K.useState(!1);K.useEffect(()=>{(async()=>{try{f(!0);const I=await cT();I&&r(I)}catch(I){console.error("Error loading education content:",I)}finally{f(!1)}})()},[]);const w=(F,I)=>{r(P=>({...P,[F]:I}))},b=(F,I)=>{r(P=>({...P,stats:{...P.stats,[F]:I}}))},T=(F,I,P)=>{const B=[...t.schools];B[F]={...B[F],[I]:P},r(ue=>({...ue,schools:B}))},S=()=>{const F={id:Date.now(),name:{en:"",mr:""},type:{en:"",mr:""},classes:"",students:"",teachers:"",facilities:{en:"",mr:""},description:{en:"",mr:""}};r(I=>({...I,schools:[...I.schools,F]}))},j=F=>{window.confirm(n==="en"?"Remove this school?":"  ?")&&r(I=>({...I,schools:I.schools.filter((P,B)=>B!==F)}))},E=(F,I,P)=>{const B=[...t.anganwadis];B[F]={...B[F],[I]:P},r(ue=>({...ue,anganwadis:B}))},L=()=>{const F={id:Date.now(),name:{en:"",mr:""},location:{en:"",mr:""},children:"",worker:{en:"",mr:""},helper:{en:"",mr:""},services:{en:"",mr:""},description:{en:"",mr:""}};r(I=>({...I,anganwadis:[...I.anganwadis,F]}))},D=F=>{window.confirm(n==="en"?"Remove this anganwadi?":"  ?")&&r(I=>({...I,anganwadis:I.anganwadis.filter((P,B)=>B!==F)}))},O=(F,I,P)=>{const B=[...t.programs];B[F]={...B[F],[I]:P},r(ue=>({...ue,programs:B}))},te=()=>{const F={id:Date.now(),name:{en:"",mr:""},description:{en:"",mr:""},timing:{en:"",mr:""},participants:"",coordinator:{en:"",mr:""}};r(I=>({...I,programs:[...I.programs,F]}))},ae=F=>{window.confirm(n==="en"?"Remove this program?":"  ?")&&r(I=>({...I,programs:I.programs.filter((P,B)=>B!==F)}))},H=()=>{const F={};return t.description.en.trim()||(F.description_en=n==="en"?"English description is required":"   "),t.description.mr.trim()||(F.description_mr=n==="en"?"Marathi description is required":"   "),o(F),Object.keys(F).length===0},V=async F=>{if(F.preventDefault(),H())try{y(!0),await l4(t),u(!0),setTimeout(()=>u(!1),3e3),alert(n==="en"?"Education page content updated successfully!":"Education     !")}catch(I){console.error("Error saving education content:",I),alert(n==="en"?"Failed to save education content":"   ")}finally{y(!1)}},k=async()=>{try{await l4(t),window.open("/education","_blank")}catch(F){console.error("Error saving before preview:",F),alert("Failed to save content before preview")}};return s.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:n==="en"?"Education Page Management":"  "}),s.jsx("p",{className:"text-gray-600 mt-1",children:n==="en"?"Edit schools, anganwadis, and educational programs":",      "})]}),s.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-[#138808] text-[#138808] rounded-lg hover:bg-[#138808] hover:text-white transition-colors",children:[s.jsx(Mo,{size:20}),n==="en"?"Preview Page":" "]})]}),c&&s.jsxs("div",{className:"mb-6 p-4 bg-green-50 border-2 border-green-500 rounded-lg flex items-center gap-2 text-green-700",children:[s.jsx(Qn,{size:20}),n==="en"?"Changes saved successfully!":"   !"]}),s.jsxs("form",{onSubmit:V,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx(Fg,{className:"text-[#ff6b00]"}),n==="en"?"Page Description":" "]}),s.jsxs("div",{children:[s.jsx(jn,{label:"Education Page Description",name:"description",type:"textarea",rows:4,value:t.description,onChange:F=>w("description",F),required:!0,placeholder:"Enter education page description"}),a.description&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.description})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[s.jsx(ya,{className:"text-[#ff6b00]"}),n==="en"?"Education Statistics":" "]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Literacy Rate":" "}),s.jsx("input",{type:"text",value:t.stats.literacyRate,onChange:F=>b("literacyRate",F.target.value),placeholder:"78%",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Total Students":" "}),s.jsx("input",{type:"text",value:t.stats.totalStudents,onChange:F=>b("totalStudents",F.target.value),placeholder:"500+",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Total Teachers":" "}),s.jsx("input",{type:"text",value:t.stats.totalTeachers,onChange:F=>b("totalTeachers",F.target.value),placeholder:"30+",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Dropout Rate":"  "}),s.jsx("input",{type:"text",value:t.stats.schoolDropoutRate,onChange:F=>b("schoolDropoutRate",F.target.value),placeholder:"5%",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[s.jsx(b2,{className:"text-[#ff6b00]"}),n==="en"?"Schools":""]}),s.jsxs("button",{type:"button",onClick:S,className:"flex items-center gap-2 px-4 py-2 bg-[#138808] text-white rounded-lg hover:bg-[#0f6906] transition-colors",children:[s.jsx(Ss,{size:18}),n==="en"?"Add School":" "]})]}),s.jsx("div",{className:"space-y-6",children:t.schools.map((F,I)=>s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border-2 border-gray-200 relative",children:[s.jsx("button",{type:"button",onClick:()=>j(I),className:"absolute top-2 right-2 p-2 text-red-600 hover:bg-red-50 rounded-lg",children:s.jsx(mi,{size:18})}),s.jsxs("div",{className:"space-y-4 pr-10",children:[s.jsx("div",{children:s.jsx(jn,{label:"School Name",name:`school-name-${I}`,value:F.name,onChange:P=>T(I,"name",P),placeholder:"Enter school name"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Classes":""}),s.jsx("input",{type:"text",value:F.classes,onChange:P=>T(I,"classes",P.target.value),placeholder:"1st to 7th",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Students":""}),s.jsx("input",{type:"text",value:F.students,onChange:P=>T(I,"students",P.target.value),placeholder:"250+",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Teachers":""}),s.jsx("input",{type:"text",value:F.teachers,onChange:P=>T(I,"teachers",P.target.value),placeholder:"12",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]}),s.jsx("div",{children:s.jsx(jn,{label:"School Type",name:`school-type-${I}`,value:F.type,onChange:P=>T(I,"type",P),placeholder:"Primary / Secondary"})})]}),s.jsx("div",{children:s.jsx(jn,{label:"Facilities",name:`school-facilities-${I}`,value:F.facilities,onChange:P=>T(I,"facilities",P),placeholder:"Enter school facilities"})}),s.jsx("div",{children:s.jsx(jn,{label:"Description",name:`school-description-${I}`,type:"textarea",rows:2,value:F.description,onChange:P=>T(I,"description",P),placeholder:"Enter school description"})})]})]},F.id))})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[s.jsx(g2,{className:"text-[#ff6b00]"}),n==="en"?"Anganwadis":""]}),s.jsxs("button",{type:"button",onClick:L,className:"flex items-center gap-2 px-4 py-2 bg-[#138808] text-white rounded-lg hover:bg-[#0f6906] transition-colors",children:[s.jsx(Ss,{size:18}),n==="en"?"Add Anganwadi":" "]})]}),s.jsx("div",{className:"space-y-6",children:t.anganwadis.map((F,I)=>s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border-2 border-gray-200 relative",children:[s.jsx("button",{type:"button",onClick:()=>D(I),className:"absolute top-2 right-2 p-2 text-red-600 hover:bg-red-50 rounded-lg",children:s.jsx(mi,{size:18})}),s.jsxs("div",{className:"space-y-4 pr-10",children:[s.jsx("div",{children:s.jsx(jn,{label:"Anganwadi Name",name:`anganwadi-name-${I}`,value:F.name,onChange:P=>E(I,"name",P),placeholder:"Enter anganwadi name"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{children:s.jsx(jn,{label:"Location",name:`anganwadi-location-${I}`,value:F.location,onChange:P=>E(I,"location",P),placeholder:"Enter location"})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n==="en"?"Children":""}),s.jsx("input",{type:"text",value:F.children,onChange:P=>E(I,"children",P.target.value),placeholder:"35",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-[#ff6b00]"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("div",{children:s.jsx(jn,{label:"Worker",name:`anganwadi-worker-${I}`,value:F.worker,onChange:P=>E(I,"worker",P),placeholder:"Enter worker name"})}),s.jsx("div",{children:s.jsx(jn,{label:"Helper",name:`anganwadi-helper-${I}`,value:F.helper,onChange:P=>E(I,"helper",P),placeholder:"Enter helper name"})})]}),s.jsx("div",{children:s.jsx(jn,{label:"Services",name:`anganwadi-services-${I}`,value:F.services,onChange:P=>E(I,"services",P),placeholder:"Enter services provided"})}),s.jsx("div",{children:s.jsx(jn,{label:"Description",name:`anganwadi-description-${I}`,type:"textarea",rows:2,value:F.description,onChange:P=>E(I,"description",P),placeholder:"Enter anganwadi description"})})]})]},F.id))})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[s.jsx(Fg,{className:"text-[#ff6b00]"}),n==="en"?"Educational Programs":" "]}),s.jsxs("button",{type:"button",onClick:te,className:"flex items-center gap-2 px-4 py-2 bg-[#138808] text-white rounded-lg hover:bg-[#0f6906] transition-colors",children:[s.jsx(Ss,{size:18}),n==="en"?"Add Program":" "]})]}),s.jsx("div",{className:"space-y-6",children:t.programs.map((F,I)=>s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border-2 border-gray-200 relative",children:[s.jsx("button",{type:"button",onClick:()=>ae(I),className:"absolute top-2 right-2 p-2 text-red-600 hover:bg-red-50 rounded-lg",children:s.jsx(mi,{size:18})}),s.jsxs("div",{className:"space-y-4 pr-10",children:[s.jsx("div",{children:s.jsx(jn,{label:"Program Name",name:`program-name-${I}`,value:F.name,onChange:P=>O(I,"name",P),placeholder:"Enter program name"})}),s.jsx("div",{children:s.jsx(jn,{label:"Description",name:`program-description-${I}`,type:"textarea",rows:2,value:F.description,onChange:P=>O(I,"description",P),placeholder:"Enter program description"})})]})]},F.id))})]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx("button",{type:"button",onClick:()=>e("/admin/dashboard"),className:"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:g,children:n==="en"?"Cancel":" "}),s.jsxs("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-[#138808] to-[#1aa910] text-white rounded-lg hover:shadow-lg transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:g,children:[s.jsx(ba,{size:20}),g?n==="en"?"Saving...":"  ...":n==="en"?"Save Changes":"  "]})]})]})]})},Jr={VILLAGES:Gt.villages(),DEMOGRAPHICS:Gt.demographics(),POPULATION_BREAKDOWNS:Gt.populationBreakdowns(),VILLAGE_GROUPS:Gt.villageGroups(),INFRASTRUCTURE:Gt.infrastructure(),STATISTICS_YEARS:Gt.statisticsYears()};async function sm(){try{console.log("Fetching villages from Firebase server (bypassing cache)...");const e=(await x9(Zt(Xe,Jr.VILLAGES))).docs.map(t=>{const r=t.data(),{id:a,...o}=r;return{id:t.id,...o}});return e.sort((t,r)=>{const a=t.createdAt?.toMillis?.()||0,o=r.createdAt?.toMillis?.()||0;return a-o}),console.log("Fetched from server:",e.length,"villages"),console.log("Village IDs:",e.map(t=>({docId:t.id,name:t.nameEn,createdAt:t.createdAt}))),e}catch(n){throw console.error("Error getting villages:",n),n}}async function _B(n){try{return{id:(await bs(Zt(Xe,Jr.VILLAGES),{...n,gramPanchayatId:n.gramPanchayatId||"default",createdAt:Yt(),updatedAt:Yt()})).id,...n}}catch(e){throw console.error("Error creating village:",e),e}}async function SB(n,e){try{return await oh(At(Xe,Jr.VILLAGES,n),{...e,updatedAt:Yt()},{merge:!0}),{id:n,...e}}catch(t){throw console.error("Error updating village:",t),t}}async function EB(n){try{console.log("Attempting to delete village from Firebase, ID:",n);const e=At(Xe,Jr.VILLAGES,n);return console.log("Village reference created:",e.path),await ml(e),console.log("Firebase deleteDoc completed successfully for:",n),!0}catch(e){throw console.error("Error deleting village from Firebase:",e),console.error("Error code:",e.code),console.error("Error message:",e.message),e}}async function AB(n,e){try{const t=Es(Zt(Xe,Jr.DEMOGRAPHICS),Za("villageId","==",n),Za("year","==",e)),r=await fs(t);if(r.empty)return null;const a=r.docs[0];return{id:a.id,...a.data()}}catch(t){throw console.error("Error getting demographics:",t),t}}async function pT(n){try{const e=Es(Zt(Xe,Jr.DEMOGRAPHICS),Za("year","==",n));return(await fs(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error getting demographics by year:",e),e}}async function xT(n){try{console.log("bulkUpsertDemographics: Starting batch operation for",n.length,"records");const e=ly(Xe);let t=0,r=0;for(const a of n){const o=await AB(a.villageId,a.year);if(o){console.log(`Updating demographics for village ${a.villageId}, year ${a.year}`);const c=At(Xe,Jr.DEMOGRAPHICS,o.id);e.update(c,{...a,updatedAt:Yt()}),t++}else{console.log(`Creating new demographics for village ${a.villageId}, year ${a.year}`);const c=At(Zt(Xe,Jr.DEMOGRAPHICS));e.set(c,{...a,createdAt:Yt(),updatedAt:Yt()}),r++}}return console.log(`Committing batch: ${r} creates, ${t} updates`),await e.commit(),console.log("Batch committed successfully to Firebase"),!0}catch(e){throw console.error("Error bulk upserting demographics:",e),e}}async function yT(n){try{const e=Es(Zt(Xe,Jr.POPULATION_BREAKDOWNS),Za("year","==",n));return(await fs(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error getting breakdowns by year:",e),e}}async function TB(n){try{console.log("bulkUpsertPopulationBreakdowns: Starting batch operation for",n.length,"records");const e=ly(Xe);let t=0,r=0;for(const a of n){const o=Es(Zt(Xe,Jr.POPULATION_BREAKDOWNS),Za("villageId","==",a.villageId),Za("year","==",a.year),Za("category","==",a.category)),c=await fs(o),u=(a.maleCount||0)+(a.femaleCount||0);if(c.empty){const h=At(Zt(Xe,Jr.POPULATION_BREAKDOWNS));e.set(h,{...a,totalCount:u,createdAt:Yt(),updatedAt:Yt()}),r++}else{const h=c.docs[0],f=At(Xe,Jr.POPULATION_BREAKDOWNS,h.id);e.update(f,{...a,totalCount:u,updatedAt:Yt()}),t++}}return console.log(`Committing batch: ${r} creates, ${t} updates`),await e.commit(),console.log("Population breakdowns batch committed successfully"),!0}catch(e){throw console.error("Error bulk upserting breakdowns:",e),e}}async function CB(n,e){try{const t=Es(Zt(Xe,Jr.VILLAGE_GROUPS),Za("villageId","==",n),Za("year","==",e)),r=await fs(t);if(r.empty)return null;const a=r.docs[0];return{id:a.id,...a.data()}}catch(t){throw console.error("Error getting groups:",t),t}}async function bT(n){try{const e=Es(Zt(Xe,Jr.VILLAGE_GROUPS),Za("year","==",n));return(await fs(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error getting groups by year:",e),e}}async function IB(n){try{const e=ly(Xe);for(const t of n){const r=await CB(t.villageId,t.year);if(r){const a=At(Xe,Jr.VILLAGE_GROUPS,r.id);e.update(a,{...t,updatedAt:Yt()})}else{const a=At(Zt(Xe,Jr.VILLAGE_GROUPS));e.set(a,{...t,createdAt:Yt(),updatedAt:Yt()})}}return await e.commit(),!0}catch(e){throw console.error("Error bulk upserting groups:",e),e}}async function RB(n,e){try{const t=Es(Zt(Xe,Jr.INFRASTRUCTURE),Za("villageId","==",n),Za("year","==",e)),r=await fs(t);if(r.empty)return null;const a=r.docs[0];return{id:a.id,...a.data()}}catch(t){throw console.error("Error getting infrastructure:",t),t}}async function vT(n){try{const e=Es(Zt(Xe,Jr.INFRASTRUCTURE),Za("year","==",n));return(await fs(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error getting infrastructure by year:",e),e}}async function kB(n){try{const e=ly(Xe);for(const t of n){const r=await RB(t.villageId,t.year);if(r){const a=At(Xe,Jr.INFRASTRUCTURE,r.id);e.update(a,{...t,updatedAt:Yt()})}else{const a=At(Zt(Xe,Jr.INFRASTRUCTURE));e.set(a,{...t,createdAt:Yt(),updatedAt:Yt()})}}return await e.commit(),!0}catch(e){throw console.error("Error bulk upserting infrastructure:",e),e}}async function Ex(){try{const n=Es(Zt(Xe,Jr.STATISTICS_YEARS),ac("year","desc"));return(await fs(n)).docs.map(t=>t.data().year)}catch(n){throw console.error("Error getting years:",n),n}}async function PB(n){try{const e=Es(Zt(Xe,Jr.STATISTICS_YEARS),Za("year","==",n));if(!(await fs(e)).empty)throw new Error("Year already exists");return await bs(Zt(Xe,Jr.STATISTICS_YEARS),{year:n,createdAt:Yt()}),n}catch(e){throw console.error("Error adding year:",e),e}}async function wT(){try{const n=await Ex();return n.length>0?n[0]:new Date().getFullYear()}catch(n){return console.error("Error getting latest year:",n),new Date().getFullYear()}}async function NT(n){try{const[e,t,r,a,o]=await Promise.all([sm(),pT(n),yT(n),bT(n),vT(n)]);return{year:n,villages:e,demographics:t,breakdowns:r,groups:a,infrastructure:o}}catch(e){throw console.error("Error getting summary:",e),e}}const LB=()=>{const[n,e]=K.useState([]),[t,r]=K.useState(!1),[a,o]=K.useState(null),[c,u]=K.useState({type:"",text:""}),[h,f]=K.useState({nameEn:"",nameMr:"",code:""});K.useEffect(()=>{g()},[]),K.useEffect(()=>{if(c.type==="success"&&c.text){const L=setTimeout(()=>{u({type:"",text:""})},5e3);return()=>clearTimeout(L)}},[c]);const g=async()=>{try{console.log("Loading villages from Firebase...");const L=await sm();console.log("Loaded villages count:",L.length),console.log("Villages data:",JSON.stringify(L,null,2)),e(L)}catch(L){console.error("Error loading villages:",L),u({type:"error",text:"Failed to load villages"})}},y=()=>{f({nameEn:"",nameMr:"",code:""}),r(!1),o(null)},w=(L,D)=>{f(O=>({...O,[L]:D}))},b=async()=>{if(u({type:"",text:""}),!h.nameEn.trim()||!h.nameMr.trim()){u({type:"error",text:"Village name in both English and Marathi is required"});return}try{await _B(h),await g(),y(),u({type:"success",text:`Village "${h.nameEn}" added successfully!`})}catch(L){console.error("Error adding village:",L),u({type:"error",text:"Failed to add village. Please try again."})}},T=L=>{o(L.id),f({nameEn:L.nameEn,nameMr:L.nameMr,code:L.code||""}),u({type:"",text:""})},S=async()=>{if(u({type:"",text:""}),!h.nameEn.trim()||!h.nameMr.trim()){u({type:"error",text:"Village name in both English and Marathi is required"});return}try{await SB(a,h),await g(),y(),u({type:"success",text:`Village "${h.nameEn}" updated successfully!`})}catch(L){console.error("Error updating village:",L);const D=L.message||"Failed to update village. Please try again.";u({type:"error",text:`Error: ${D}. The village may not exist in the database.`})}},j=async L=>{if(confirm(`Are you sure you want to delete "${L.nameEn}"?

Warning: This will NOT delete associated statistics data. The data will remain but won't be visible unless you recreate the village.`))try{console.log("Deleting village with ID:",L.id),await EB(L.id),console.log("Delete successful, reloading villages..."),await g(),console.log("Villages reloaded, current count:",n.length-1),u({type:"success",text:`Village "${L.nameEn}" deleted successfully!`})}catch(D){console.error("Error deleting village:",D),u({type:"error",text:`Failed to delete village: ${D.message}`})}},E=()=>{y(),u({type:"",text:""})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Village Management"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Add, edit, or delete villages in your Gram Panchayat"})]}),!t&&!a&&s.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors shadow-md",children:[s.jsx(Ss,{className:"w-4 h-4"}),"Add Village"]})]}),c.text&&s.jsxs("div",{className:`flex items-center justify-between gap-2 p-4 rounded-lg ${c.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[c.type==="success"?s.jsx(ho,{className:"w-5 h-5"}):s.jsx(Qn,{className:"w-5 h-5"}),s.jsx("span",{children:c.text})]}),s.jsx("button",{onClick:()=>u({type:"",text:""}),className:"text-gray-500 hover:text-gray-700 transition-colors",title:"Dismiss",children:s.jsx(Ui,{className:"w-4 h-4"})})]}),(t||a)&&s.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-green-50 border border-orange-200 rounded-lg p-6",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:t?"Add New Village":"Edit Village"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Village Name (English) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:h.nameEn,onChange:L=>w("nameEn",L.target.value),placeholder:"e.g., Kothrud",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Village Name (Marathi) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:h.nameMr,onChange:L=>w("nameMr",L.target.value),placeholder:"e.g., ",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Village Code (Optional)"}),s.jsx("input",{type:"text",value:h.code,onChange:L=>w("code",L.target.value),placeholder:"e.g., V001",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:t?b:S,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(ba,{className:"w-4 h-4"}),t?"Add Village":"Update Village"]}),s.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:[s.jsx(Ui,{className:"w-4 h-4"}),"Cancel"]})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Qn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"No villages found"}),s.jsx("button",{onClick:()=>r(!0),className:"px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:"Add Your First Village"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-green-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"#"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Village Name (English)"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Village Name (Marathi)"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Code"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((L,D)=>s.jsxs("tr",{className:D%2===0?"bg-white":"bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:D+1}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.nameEn})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:L.nameMr})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-700",children:L.code||"-"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("button",{onClick:()=>T(L),disabled:t||a,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Edit",children:s.jsx(dp,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>j(L),disabled:t||a,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete",children:s.jsx(mi,{className:"w-4 h-4"})})]})})]},L.id))})]})})}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Qn,{className:"w-5 h-5 text-blue-600 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-semibold mb-2",children:"Important Notes:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:"Add all your villages here before entering statistics data"}),s.jsx("li",{children:"Deleting a village won't delete its statistics data (data remains orphaned)"}),s.jsx("li",{children:"Village names should be unique to avoid confusion"}),s.jsx("li",{children:"After adding villages, go to other tabs to enter their statistics"})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-4 rounded-lg border border-orange-200",children:[s.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Total Villages"}),s.jsx("div",{className:"text-2xl font-bold text-orange-900 mt-1",children:n.length})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border border-green-200",children:[s.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Villages with Code"}),s.jsx("div",{className:"text-2xl font-bold text-green-900 mt-1",children:n.filter(L=>L.code).length})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200",children:[s.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Last Added"}),s.jsx("div",{className:"text-sm font-semibold text-blue-900 mt-1",children:n.length>0?n[n.length-1].nameEn:"None"})]})]})]})},DB=({selectedYear:n})=>{const[e,t]=K.useState([]),[r,a]=K.useState({}),[o,c]=K.useState(!0),[u,h]=K.useState(!1),[f,g]=K.useState({type:"",text:""});K.useEffect(()=>{y()},[n]);const y=async()=>{c(!0);try{const T=await sm(),S=await pT(n),j={};T.forEach(E=>{const L=S.find(te=>te.villageId===E.id),D=L?.malePopulation||0,O=L?.femalePopulation||0;j[E.id]={villageId:E.id,year:n,totalPopulation:D+O,malePopulation:D,femalePopulation:O,source:L?.source||""}}),t(T),a(j)}catch(T){console.error("Error loading demographics:",T),g({type:"error",text:"Failed to load demographics data"})}finally{c(!1)}},w=(T,S,j)=>{a(E=>{const L={...E,[T]:{...E[T],[S]:S==="source"?j:parseInt(j)||0}};if(S==="malePopulation"||S==="femalePopulation"){const D=S==="malePopulation"?parseInt(j)||0:L[T].malePopulation,O=S==="femalePopulation"?parseInt(j)||0:L[T].femalePopulation;L[T].totalPopulation=D+O}return L})},b=async()=>{h(!0),g({type:"",text:""});try{const T=Object.values(r);console.log("Saving demographics data:",T);for(const S of T)if(S.totalPopulation<0||S.malePopulation<0||S.femalePopulation<0){g({type:"error",text:"Population counts cannot be negative"}),h(!1);return}console.log("Calling bulkUpsertDemographics with",T.length,"records"),await xT(T),console.log("Demographics saved successfully to Firebase"),g({type:"success",text:`Demographics for year ${n} saved successfully!`})}catch(T){console.error("Error saving demographics:",T),g({type:"error",text:`Failed to save demographics: ${T.message}`})}finally{h(!1)}};return o?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Population Demographics - ",n]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage total, male, and female population for each village"})]}),s.jsxs("button",{onClick:b,disabled:u,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(ba,{className:"w-4 h-4"}),u?"Saving...":"Save All"]})]}),f.text&&s.jsxs("div",{className:`flex items-center gap-2 p-4 rounded-lg ${f.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[s.jsx(Qn,{className:"w-5 h-5"}),s.jsx("span",{children:f.text})]}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-green-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Village Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:s.jsxs("div",{className:"flex items-center gap-1",children:["Total Population",s.jsx("span",{className:"text-xs normal-case text-gray-500",children:"(Auto)"})]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Male Population"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Female Population"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Data Source"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((T,S)=>s.jsxs("tr",{className:S%2===0?"bg-white":"bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:T.nameEn}),s.jsx("div",{className:"text-sm text-gray-500",children:T.nameMr})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"number",min:"0",value:r[T.id]?.totalPopulation||0,readOnly:!0,className:"w-32 px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-700 font-semibold cursor-not-allowed",title:"Auto-calculated: Male + Female"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"number",min:"0",value:r[T.id]?.malePopulation||0,onChange:j=>w(T.id,"malePopulation",j.target.value),className:"w-32 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"number",min:"0",value:r[T.id]?.femalePopulation||0,onChange:j=>w(T.id,"femalePopulation",j.target.value),className:"w-32 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"text",value:r[T.id]?.source||"",onChange:j=>w(T.id,"source",j.target.value),placeholder:"e.g., Census 2011",className:"w-48 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent"})})]},T.id))})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200",children:[s.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Population"}),s.jsx("div",{className:"text-2xl font-bold text-blue-900 mt-1",children:Object.values(r).reduce((T,S)=>T+(S.totalPopulation||0),0).toLocaleString()})]}),s.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 p-4 rounded-lg border border-indigo-200",children:[s.jsx("div",{className:"text-sm text-indigo-600 font-medium",children:"Male Population"}),s.jsx("div",{className:"text-2xl font-bold text-indigo-900 mt-1",children:Object.values(r).reduce((T,S)=>T+(S.malePopulation||0),0).toLocaleString()})]}),s.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 p-4 rounded-lg border border-pink-200",children:[s.jsx("div",{className:"text-sm text-pink-600 font-medium",children:"Female Population"}),s.jsx("div",{className:"text-2xl font-bold text-pink-900 mt-1",children:Object.values(r).reduce((T,S)=>T+(S.femalePopulation||0),0).toLocaleString()})]})]})]})},sf=["ST","SC","OBC","OTHER"],MB=({selectedYear:n})=>{const[e,t]=K.useState([]),[r,a]=K.useState({}),[o,c]=K.useState(!0),[u,h]=K.useState(!1),[f,g]=K.useState({type:"",text:""});K.useEffect(()=>{y()},[n]);const y=async()=>{c(!0);try{const j=await sm(),E=await yT(n),L={};j.forEach(D=>{L[D.id]={},sf.forEach(O=>{const te=E.find(ae=>ae.villageId===D.id&&ae.category===O);L[D.id][O]={maleCount:te?.maleCount||0,femaleCount:te?.femaleCount||0}})}),t(j),a(L)}catch(j){console.error("Error loading category data:",j),g({type:"error",text:"Failed to load category data"})}finally{c(!1)}},w=(j,E,L,D)=>{a(O=>({...O,[j]:{...O[j],[E]:{...O[j][E],[L]:parseInt(D)||0}}}))},b=async()=>{h(!0),g({type:"",text:""});try{const j=[];Object.entries(r).forEach(([L,D])=>{Object.entries(D).forEach(([O,te])=>{if(te.maleCount<0||te.femaleCount<0)throw new Error("Population counts cannot be negative");j.push({villageId:L,year:n,category:O,maleCount:te.maleCount,femaleCount:te.femaleCount})})}),console.log("Saving category-wise data:",j.length,"records"),await TB(j),console.log("Category-wise data saved successfully");const E=[];Object.entries(r).forEach(([L,D])=>{let O=0,te=0;Object.values(D).forEach(ae=>{O+=ae.maleCount||0,te+=ae.femaleCount||0}),E.push({villageId:L,year:n,totalPopulation:O+te,malePopulation:O,femalePopulation:te,source:"Auto-calculated from Category-wise data"})}),console.log("Auto-updating demographics from category data:",E.length,"villages"),await xT(E),console.log("Demographics auto-updated successfully"),g({type:"success",text:` Category-wise data saved! Demographics auto-updated for ${n}.`})}catch(j){console.error("Error saving category-wise data:",j),g({type:"error",text:j.message||"Failed to save data. Please try again."})}finally{h(!1)}},T=(j,E)=>{const L=r[j]?.[E];return(L?.maleCount||0)+(L?.femaleCount||0)},S=j=>e.reduce((E,L)=>E+T(L.id,j),0);return o?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Category-wise Population - ",n]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage ST/SC/OBC/Other population breakdown for each village"})]}),s.jsxs("button",{onClick:b,disabled:u,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(ba,{className:"w-4 h-4"}),u?"Saving...":"Save All"]})]}),f.text&&s.jsxs("div",{className:`flex items-center gap-2 p-4 rounded-lg ${f.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[s.jsx(Qn,{className:"w-5 h-5"}),s.jsx("span",{children:f.text})]}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsxs("thead",{className:"bg-gradient-to-r from-orange-50 to-green-50",children:[s.jsxs("tr",{children:[s.jsx("th",{rowSpan:"2",className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider border-r",children:"Village Name"}),sf.map(j=>s.jsx("th",{colSpan:"3",className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider border-r",children:j},j))]}),s.jsx("tr",{children:sf.map(j=>s.jsxs(E0.Fragment,{children:[s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-600",children:"Male"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-600",children:"Female"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-600 border-r",children:"Total"})]},j))})]}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((j,E)=>s.jsxs("tr",{className:E%2===0?"bg-white":"bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap border-r",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.nameEn}),s.jsx("div",{className:"text-sm text-gray-500",children:j.nameMr})]})}),sf.map(L=>s.jsxs(E0.Fragment,{children:[s.jsx("td",{className:"px-2 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[j.id]?.[L]?.maleCount||0,onChange:D=>w(j.id,L,"maleCount",D.target.value),className:"w-20 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),s.jsx("td",{className:"px-2 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[j.id]?.[L]?.femaleCount||0,onChange:D=>w(j.id,L,"femaleCount",D.target.value),className:"w-20 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),s.jsx("td",{className:"px-2 py-4 text-center border-r",children:s.jsx("span",{className:"font-semibold text-gray-700",children:T(j.id,L)})})]},L))]},j.id))}),s.jsx("tfoot",{className:"bg-gray-100",children:s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 font-bold text-gray-900 border-r",children:"Grand Total"}),sf.map(j=>s.jsxs(E0.Fragment,{children:[s.jsx("td",{className:"px-2 py-4 text-center font-semibold text-gray-700",children:e.reduce((E,L)=>E+(r[L.id]?.[j]?.maleCount||0),0)}),s.jsx("td",{className:"px-2 py-4 text-center font-semibold text-gray-700",children:e.reduce((E,L)=>E+(r[L.id]?.[j]?.femaleCount||0),0)}),s.jsx("td",{className:"px-2 py-4 text-center font-bold text-gray-900 border-r",children:S(j)})]},j))]})})]})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:sf.map((j,E)=>{const L=[{from:"purple-50",to:"purple-100",border:"purple-200",text:"purple-600",value:"purple-900"},{from:"blue-50",to:"blue-100",border:"blue-200",text:"blue-600",value:"blue-900"},{from:"green-50",to:"green-100",border:"green-200",text:"green-600",value:"green-900"},{from:"amber-50",to:"amber-100",border:"amber-200",text:"amber-600",value:"amber-900"}][E];return s.jsxs("div",{className:`bg-gradient-to-br from-${L.from} to-${L.to} p-4 rounded-lg border border-${L.border}`,children:[s.jsxs("div",{className:`text-sm text-${L.text} font-medium`,children:[j," Population"]}),s.jsx("div",{className:`text-2xl font-bold text-${L.value} mt-1`,children:S(j).toLocaleString()})]},j)})})]})},OB=({selectedYear:n})=>{const[e,t]=K.useState([]),[r,a]=K.useState({}),[o,c]=K.useState(!0),[u,h]=K.useState(!1),[f,g]=K.useState({type:"",text:""});K.useEffect(()=>{y()},[n]);const y=async()=>{c(!0);try{const j=await sm(),E=await bT(n),L={};j.forEach(D=>{const O=E.find(te=>te.villageId===D.id);L[D.id]={villageId:D.id,year:n,mahilaBachatGatCount:O?.mahilaBachatGatCount||0,yuvakMandalCount:O?.yuvakMandalCount||0,kisanGatCount:O?.kisanGatCount||0,otherGroupCount:O?.otherGroupCount||0}}),t(j),a(L)}catch(j){console.error("Error loading groups data:",j),g({type:"error",text:"Failed to load groups data"})}finally{c(!1)}},w=(j,E,L)=>{a(D=>({...D,[j]:{...D[j],[E]:parseInt(L)||0}}))},b=async()=>{h(!0),g({type:"",text:""});try{const j=Object.values(r);for(const E of j)if(E.mahilaBachatGatCount<0||E.yuvakMandalCount<0||E.kisanGatCount<0||E.otherGroupCount<0)throw new Error("Group counts cannot be negative");console.log("Saving groups & committees data:",j.length,"records"),await IB(j),console.log("Groups & committees data saved successfully"),g({type:"success",text:`Groups & Committees data for ${n} saved successfully!`})}catch(j){console.error("Error saving groups data:",j),g({type:"error",text:j.message||"Failed to save data. Please try again."})}finally{h(!1)}},T=j=>{const E=r[j];return E?(E.mahilaBachatGatCount||0)+(E.yuvakMandalCount||0)+(E.kisanGatCount||0)+(E.otherGroupCount||0):0},S=j=>Object.values(r).reduce((E,L)=>E+(L[j]||0),0);return o?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Groups & Committees - ",n]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage community groups count for each village"})]}),s.jsxs("button",{onClick:b,disabled:u,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(ba,{className:"w-4 h-4"}),u?"Saving...":"Save All"]})]}),f.text&&s.jsxs("div",{className:`flex items-center gap-2 p-4 rounded-lg ${f.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[s.jsx(Qn,{className:"w-5 h-5"}),s.jsx("span",{children:f.text})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 p-4 rounded-lg border border-pink-200",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ya,{className:"w-5 h-5 text-pink-600"}),s.jsx("div",{className:"text-sm text-pink-600 font-medium",children:"Mahila Bachat Gat"})]}),s.jsx("div",{className:"text-sm text-pink-500 mt-1",children:"Women's Self-Help Groups"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ya,{className:"w-5 h-5 text-blue-600"}),s.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Yuvak Mandal"})]}),s.jsx("div",{className:"text-sm text-blue-500 mt-1",children:"Youth Organizations"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border border-green-200",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ya,{className:"w-5 h-5 text-green-600"}),s.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Kisan Gat"})]}),s.jsx("div",{className:"text-sm text-green-500 mt-1",children:"Farmers' Groups"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg border border-purple-200",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ya,{className:"w-5 h-5 text-purple-600"}),s.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Other Groups"})]}),s.jsx("div",{className:"text-sm text-purple-500 mt-1",children:"Other Community Groups"})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-green-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Village Name"}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Mahila Bachat Gat",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:"(  )"})]}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Yuvak Mandal",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:"( )"})]}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Kisan Gat",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:"( )"})]}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Other Groups",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:"( )"})]}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Total"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((j,E)=>s.jsxs("tr",{className:E%2===0?"bg-white":"bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.nameEn}),s.jsx("div",{className:"text-sm text-gray-500",children:j.nameMr})]})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[j.id]?.mahilaBachatGatCount||0,onChange:L=>w(j.id,"mahilaBachatGatCount",L.target.value),className:"w-24 px-3 py-2 text-center border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[j.id]?.yuvakMandalCount||0,onChange:L=>w(j.id,"yuvakMandalCount",L.target.value),className:"w-24 px-3 py-2 text-center border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[j.id]?.kisanGatCount||0,onChange:L=>w(j.id,"kisanGatCount",L.target.value),className:"w-24 px-3 py-2 text-center border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[j.id]?.otherGroupCount||0,onChange:L=>w(j.id,"otherGroupCount",L.target.value),className:"w-24 px-3 py-2 text-center border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("span",{className:"font-semibold text-gray-700",children:T(j.id)})})]},j.id))}),s.jsx("tfoot",{className:"bg-gray-100",children:s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 font-bold text-gray-900",children:"Grand Total"}),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-gray-900",children:S("mahilaBachatGatCount")}),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-gray-900",children:S("yuvakMandalCount")}),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-gray-900",children:S("kisanGatCount")}),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-gray-900",children:S("otherGroupCount")}),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-gray-900",children:S("mahilaBachatGatCount")+S("yuvakMandalCount")+S("kisanGatCount")+S("otherGroupCount")})]})})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 p-4 rounded-lg border border-pink-200",children:[s.jsx("div",{className:"text-sm text-pink-600 font-medium",children:"Mahila Bachat Gat"}),s.jsx("div",{className:"text-2xl font-bold text-pink-900 mt-1",children:S("mahilaBachatGatCount")})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200",children:[s.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Yuvak Mandal"}),s.jsx("div",{className:"text-2xl font-bold text-blue-900 mt-1",children:S("yuvakMandalCount")})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border border-green-200",children:[s.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Kisan Gat"}),s.jsx("div",{className:"text-2xl font-bold text-green-900 mt-1",children:S("kisanGatCount")})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg border border-purple-200",children:[s.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Other Groups"}),s.jsx("div",{className:"text-2xl font-bold text-purple-900 mt-1",children:S("otherGroupCount")})]}),s.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-4 rounded-lg border border-orange-200",children:[s.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Total Groups"}),s.jsx("div",{className:"text-2xl font-bold text-orange-900 mt-1",children:S("mahilaBachatGatCount")+S("yuvakMandalCount")+S("kisanGatCount")+S("otherGroupCount")})]})]})]})},FB=({selectedYear:n})=>{const[e,t]=K.useState([]),[r,a]=K.useState({}),[o,c]=K.useState(!0),[u,h]=K.useState(!1),[f,g]=K.useState({type:"",text:""});K.useEffect(()=>{y()},[n]);const y=async()=>{c(!0);try{const S=await sm(),j=await vT(n),E={};S.forEach(L=>{const D=j.find(O=>O.villageId===L.id);E[L.id]={villageId:L.id,year:n,privateWells:D?.privateWells||0,publicWells:D?.publicWells||0,nitScheme:D?.nitScheme||0,handpumps:D?.handpumps||0,waterTankCapacity:D?.waterTankCapacity||"",waterFilterPlant:D?.waterFilterPlant||0,privatePonds:D?.privatePonds||0,families:D?.families||0,oldTapConnections:D?.oldTapConnections||0,newTapConnections:D?.newTapConnections||0,totalTapConnections:D?.totalTapConnections||0,privateWellsForTap:D?.privateWellsForTap||0,pendingTapConnections:D?.pendingTapConnections||0,notes:D?.notes||""}}),t(S),a(E)}catch(S){console.error("Error loading infrastructure:",S),g({type:"error",text:"Failed to load infrastructure data"})}finally{c(!1)}},w=(S,j,E)=>{a(L=>{const D={...L,[S]:{...L[S],[j]:j==="notes"||j==="waterTankCapacity"?E:parseInt(E)||0}};if(j==="oldTapConnections"||j==="newTapConnections"){const O=j==="oldTapConnections"?parseInt(E)||0:D[S].oldTapConnections,te=j==="newTapConnections"?parseInt(E)||0:D[S].newTapConnections;D[S].totalTapConnections=O+te}return D})},b=async()=>{h(!0),g({type:"",text:""});try{const S=Object.values(r);console.log("Saving water & infrastructure data:",S.length,"records"),await kB(S),console.log("Water & infrastructure data saved successfully"),g({type:"success",text:`Water & Infrastructure data for ${n} saved successfully!`})}catch(S){console.error("Error saving infrastructure data:",S),g({type:"error",text:S.message||"Failed to save data. Please try again."})}finally{h(!1)}},T=S=>Object.values(r).reduce((j,E)=>j+(E[S]||0),0);return o?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}):s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Water Supply Information - ",n]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"  | Manage water resources and infrastructure"})]}),s.jsxs("button",{onClick:b,disabled:u,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(ba,{className:"w-4 h-4"}),u?"Saving...":"Save All"]})]}),f.text&&s.jsxs("div",{className:`flex items-center gap-2 p-4 rounded-lg ${f.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[s.jsx(Qn,{className:"w-5 h-5"}),s.jsx("span",{children:f.text})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 px-6 py-4",children:s.jsxs("h4",{className:"text-white font-semibold flex items-center gap-2",children:[s.jsx(jx,{className:"w-5 h-5"}),"Table 1: Water Supply Sources |   "]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-green-50",children:s.jsxs("tr",{children:[s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Sr. No.",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:".."})]}),s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Water Source",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:" "})]}),e.map(S=>s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:[S.nameEn,s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:S.nameMr})]},S.id)),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider bg-blue-50",children:["Total",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:""})]})]})}),s.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"1"}),s.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["Private Wells",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-gray-500",children:" "})]}),e.map(S=>s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[S.id]?.privateWells||0,onChange:j=>w(S.id,"privateWells",j.target.value),className:"w-20 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})},S.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:T("privateWells")})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"2"}),s.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["Public Wells",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-gray-500",children:" "})]}),e.map(S=>s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[S.id]?.publicWells||0,onChange:j=>w(S.id,"publicWells",j.target.value),className:"w-20 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})},S.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:T("publicWells")})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"3"}),s.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["NIT Scheme",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-gray-500",children:" "})]}),e.map(S=>s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[S.id]?.nitScheme||0,onChange:j=>w(S.id,"nitScheme",j.target.value),className:"w-20 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})},S.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:T("nitScheme")})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"4"}),s.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["Handpumps",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-gray-500",children:""})]}),e.map(S=>s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[S.id]?.handpumps||0,onChange:j=>w(S.id,"handpumps",j.target.value),className:"w-20 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})},S.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:T("handpumps")})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"5"}),s.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["Water Tank Capacity",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-gray-500",children:"  "})]}),e.map(S=>s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"text",value:r[S.id]?.waterTankCapacity||"",onChange:j=>w(S.id,"waterTankCapacity",j.target.value),placeholder:"e.g., 8 lakh liters",className:"w-32 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})},S.id)),s.jsx("td",{className:"px-6 py-4 text-center text-gray-500 bg-blue-50",children:""})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"6"}),s.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["Water Filter Plant",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-gray-500",children:"  "})]}),e.map(S=>s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[S.id]?.waterFilterPlant||0,onChange:j=>w(S.id,"waterFilterPlant",j.target.value),className:"w-20 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})},S.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:T("waterFilterPlant")})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"7"}),s.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:["Private Ponds",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-gray-500",children:" "})]}),e.map(S=>s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[S.id]?.privatePonds||0,onChange:j=>w(S.id,"privatePonds",j.target.value),className:"w-20 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})},S.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:T("privatePonds")})]})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4",children:s.jsxs("h4",{className:"text-white font-semibold flex items-center gap-2",children:[s.jsx(jx,{className:"w-5 h-5"}),"Table 2: Tap Connection Details |   "]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-green-50",children:s.jsxs("tr",{children:[s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Sr. No.",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:".."})]}),s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Village",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:""})]}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Families",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:""})]}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Old Tap Connections",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:" "})]}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:["New Tap Connections",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:" "})]}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider bg-indigo-50",children:["Total Tap Connections",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:"(Auto)"})]}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Private Wells",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:" "})]}),s.jsxs("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:["Pending",s.jsx("br",{}),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:""})]})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((S,j)=>s.jsxs("tr",{className:j%2===0?"bg-white":"bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:j+1}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:S.nameEn}),s.jsx("div",{className:"text-xs text-gray-500",children:S.nameMr})]}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[S.id]?.families||0,onChange:E=>w(S.id,"families",E.target.value),className:"w-24 px-3 py-2 text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[S.id]?.oldTapConnections||0,onChange:E=>w(S.id,"oldTapConnections",E.target.value),className:"w-24 px-3 py-2 text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[S.id]?.newTapConnections||0,onChange:E=>w(S.id,"newTapConnections",E.target.value),className:"w-24 px-3 py-2 text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})}),s.jsx("td",{className:"px-6 py-4 text-center bg-indigo-50",children:s.jsx("input",{type:"number",value:r[S.id]?.totalTapConnections||0,readOnly:!0,className:"w-24 px-3 py-2 text-center border border-gray-300 rounded bg-gray-100 font-semibold cursor-not-allowed",title:"Auto-calculated: Old + New"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[S.id]?.privateWellsForTap||0,onChange:E=>w(S.id,"privateWellsForTap",E.target.value),className:"w-24 px-3 py-2 text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"number",min:"0",value:r[S.id]?.pendingTapConnections||0,onChange:E=>w(S.id,"pendingTapConnections",E.target.value),className:"w-24 px-3 py-2 text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})})]},S.id))}),s.jsx("tfoot",{className:"bg-indigo-50",children:s.jsxs("tr",{className:"font-bold",children:[s.jsx("td",{className:"px-6 py-4",colSpan:"2",children:"Total | "}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900",children:T("families")}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900",children:T("oldTapConnections")}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900",children:T("newTapConnections")}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900 bg-indigo-100",children:T("totalTapConnections")}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900",children:T("privateWellsForTap")}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900",children:T("pendingTapConnections")})]})})]})})]})]})},VB="modulepreload",UB=function(n){return"/"+n},y4={},a1=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){let h=function(f){return Promise.all(f.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");a=h(t.map(f=>{if(f=UB(f),f in y4)return;y4[f]=!0;const g=f.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const w=document.createElement("link");if(w.rel=g?"stylesheet":VB,g||(w.as="script"),w.crossOrigin="",w.href=f,u&&w.setAttribute("nonce",u),document.head.appendChild(w),g)return new Promise((b,T)=>{w.addEventListener("load",b),w.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return a.then(c=>{for(const u of c||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})};function cr(n){"@babel/helpers - typeof";return cr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cr(n)}var fl=Uint8Array,co=Uint16Array,cw=Int32Array,uw=new fl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),dw=new fl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),b4=new fl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jT=function(n,e){for(var t=new co(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var a=new cw(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)a[o]=o-t[r]<<5|r;return{b:t,r:a}},_T=jT(uw,2),BB=_T.b,N2=_T.r;BB[28]=258,N2[258]=28;var zB=jT(dw,0),v4=zB.r,j2=new co(32768);for(var Pr=0;Pr<32768;++Pr){var Du=(Pr&43690)>>1|(Pr&21845)<<1;Du=(Du&52428)>>2|(Du&13107)<<2,Du=(Du&61680)>>4|(Du&3855)<<4,j2[Pr]=((Du&65280)>>8|(Du&255)<<8)>>1}var xg=(function(n,e,t){for(var r=n.length,a=0,o=new co(e);a<r;++a)n[a]&&++o[n[a]-1];var c=new co(e);for(a=1;a<e;++a)c[a]=c[a-1]+o[a-1]<<1;var u;if(t){u=new co(1<<e);var h=15-e;for(a=0;a<r;++a)if(n[a])for(var f=a<<4|n[a],g=e-n[a],y=c[n[a]-1]++<<g,w=y|(1<<g)-1;y<=w;++y)u[j2[y]>>h]=f}else for(u=new co(r),a=0;a<r;++a)n[a]&&(u[a]=j2[c[n[a]-1]++]>>15-n[a]);return u}),ch=new fl(288);for(var Pr=0;Pr<144;++Pr)ch[Pr]=8;for(var Pr=144;Pr<256;++Pr)ch[Pr]=9;for(var Pr=256;Pr<280;++Pr)ch[Pr]=7;for(var Pr=280;Pr<288;++Pr)ch[Pr]=8;var Ax=new fl(32);for(var Pr=0;Pr<32;++Pr)Ax[Pr]=5;var qB=xg(ch,9,0),HB=xg(Ax,5,0),ST=function(n){return(n+7)/8|0},GB=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new fl(n.subarray(e,t))},Pc=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},Ym=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},i1=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var a=t.length,o=t.slice();if(!a)return{t:AT,l:0};if(a==1){var c=new fl(t[0].s+1);return c[t[0].s]=1,{t:c,l:1}}t.sort(function(te,ae){return te.f-ae.f}),t.push({s:-1,f:25001});var u=t[0],h=t[1],f=0,g=1,y=2;for(t[0]={s:-1,f:u.f+h.f,l:u,r:h};g!=a-1;)u=t[t[f].f<t[y].f?f++:y++],h=t[f!=g&&t[f].f<t[y].f?f++:y++],t[g++]={s:-1,f:u.f+h.f,l:u,r:h};for(var w=o[0].s,r=1;r<a;++r)o[r].s>w&&(w=o[r].s);var b=new co(w+1),T=_2(t[g-1],b,0);if(T>e){var r=0,S=0,j=T-e,E=1<<j;for(o.sort(function(ae,H){return b[H.s]-b[ae.s]||ae.f-H.f});r<a;++r){var L=o[r].s;if(b[L]>e)S+=E-(1<<T-b[L]),b[L]=e;else break}for(S>>=j;S>0;){var D=o[r].s;b[D]<e?S-=1<<e-b[D]++-1:++r}for(;r>=0&&S;--r){var O=o[r].s;b[O]==e&&(--b[O],++S)}T=e}return{t:new fl(b),l:T}},_2=function(n,e,t){return n.s==-1?Math.max(_2(n.l,e,t+1),_2(n.r,e,t+1)):e[n.s]=t},w4=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new co(++e),r=0,a=n[0],o=1,c=function(h){t[r++]=h},u=1;u<=e;++u)if(n[u]==a&&u!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)c(32754);o>2&&(c(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(c(a),--o;o>6;o-=6)c(8304);o>2&&(c(o-3<<5|8208),o=0)}for(;o--;)c(a);o=1,a=n[u]}return{c:t.subarray(0,r),n:e}},Xm=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},ET=function(n,e,t){var r=t.length,a=ST(e+2);n[a]=r&255,n[a+1]=r>>8,n[a+2]=n[a]^255,n[a+3]=n[a+1]^255;for(var o=0;o<r;++o)n[a+o+4]=t[o];return(a+4+r)*8},N4=function(n,e,t,r,a,o,c,u,h,f,g){Pc(e,g++,t),++a[256];for(var y=i1(a,15),w=y.t,b=y.l,T=i1(o,15),S=T.t,j=T.l,E=w4(w),L=E.c,D=E.n,O=w4(S),te=O.c,ae=O.n,H=new co(19),V=0;V<L.length;++V)++H[L[V]&31];for(var V=0;V<te.length;++V)++H[te[V]&31];for(var k=i1(H,7),F=k.t,I=k.l,P=19;P>4&&!F[b4[P-1]];--P);var B=f+5<<3,ue=Xm(a,ch)+Xm(o,Ax)+c,Ne=Xm(a,w)+Xm(o,S)+c+14+3*P+Xm(H,F)+2*H[16]+3*H[17]+7*H[18];if(h>=0&&B<=ue&&B<=Ne)return ET(e,g,n.subarray(h,h+f));var ce,pe,de,Se;if(Pc(e,g,1+(Ne<ue)),g+=2,Ne<ue){ce=xg(w,b,0),pe=w,de=xg(S,j,0),Se=S;var ze=xg(F,I,0);Pc(e,g,D-257),Pc(e,g+5,ae-1),Pc(e,g+10,P-4),g+=14;for(var V=0;V<P;++V)Pc(e,g+3*V,F[b4[V]]);g+=3*P;for(var ne=[L,te],q=0;q<2;++q)for(var Q=ne[q],V=0;V<Q.length;++V){var re=Q[V]&31;Pc(e,g,ze[re]),g+=F[re],re>15&&(Pc(e,g,Q[V]>>5&127),g+=Q[V]>>12)}}else ce=qB,pe=ch,de=HB,Se=Ax;for(var V=0;V<u;++V){var he=r[V];if(he>255){var re=he>>18&31;Ym(e,g,ce[re+257]),g+=pe[re+257],re>7&&(Pc(e,g,he>>23&31),g+=uw[re]);var me=he&31;Ym(e,g,de[me]),g+=Se[me],me>3&&(Ym(e,g,he>>5&8191),g+=dw[me])}else Ym(e,g,ce[he]),g+=pe[he]}return Ym(e,g,ce[256]),g+pe[256]},$B=new cw([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),AT=new fl(0),WB=function(n,e,t,r,a,o){var c=o.z||n.length,u=new fl(r+c+5*(1+Math.ceil(c/7e3))+a),h=u.subarray(r,u.length-a),f=o.l,g=(o.r||0)&7;if(e){g&&(h[0]=o.r>>3);for(var y=$B[e-1],w=y>>13,b=y&8191,T=(1<<t)-1,S=o.p||new co(32768),j=o.h||new co(T+1),E=Math.ceil(t/3),L=2*E,D=function(ft){return(n[ft]^n[ft+1]<<E^n[ft+2]<<L)&T},O=new cw(25e3),te=new co(288),ae=new co(32),H=0,V=0,k=o.i||0,F=0,I=o.w||0,P=0;k+2<c;++k){var B=D(k),ue=k&32767,Ne=j[B];if(S[ue]=Ne,j[B]=ue,I<=k){var ce=c-k;if((H>7e3||F>24576)&&(ce>423||!f)){g=N4(n,h,0,O,te,ae,V,F,P,k-P,g),F=H=V=0,P=k;for(var pe=0;pe<286;++pe)te[pe]=0;for(var pe=0;pe<30;++pe)ae[pe]=0}var de=2,Se=0,ze=b,ne=ue-Ne&32767;if(ce>2&&B==D(k-ne))for(var q=Math.min(w,ce)-1,Q=Math.min(32767,k),re=Math.min(258,ce);ne<=Q&&--ze&&ue!=Ne;){if(n[k+de]==n[k+de-ne]){for(var he=0;he<re&&n[k+he]==n[k+he-ne];++he);if(he>de){if(de=he,Se=ne,he>q)break;for(var me=Math.min(ne,he-2),be=0,pe=0;pe<me;++pe){var Le=k-ne+pe&32767,ke=S[Le],qe=Le-ke&32767;qe>be&&(be=qe,Ne=Le)}}}ue=Ne,Ne=S[ue],ne+=ue-Ne&32767}if(Se){O[F++]=268435456|N2[de]<<18|v4[Se];var Je=N2[de]&31,it=v4[Se]&31;V+=uw[Je]+dw[it],++te[257+Je],++ae[it],I=k+de,++H}else O[F++]=n[k],++te[n[k]]}}for(k=Math.max(k,I);k<c;++k)O[F++]=n[k],++te[n[k]];g=N4(n,h,f,O,te,ae,V,F,P,k-P,g),f||(o.r=g&7|h[g/8|0]<<3,g-=7,o.h=j,o.p=S,o.i=k,o.w=I)}else{for(var k=o.w||0;k<c+f;k+=65535){var at=k+65535;at>=c&&(h[g/8|0]=f,at=c),g=ET(h,g+1,n.subarray(k,at))}o.i=c}return GB(u,0,r+ST(g)+a)},TT=function(){var n=1,e=0;return{p:function(t){for(var r=n,a=e,o=t.length|0,c=0;c!=o;){for(var u=Math.min(c+2655,o);c<u;++c)a+=r+=t[c];r=(r&65535)+15*(r>>16),a=(a&65535)+15*(a>>16)}n=r,e=a},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},KB=function(n,e,t,r,a){if(!a&&(a={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),c=new fl(o.length+n.length);c.set(o),c.set(n,o.length),n=c,a.w=o.length}return WB(n,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,a)},CT=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},YB=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var a=TT();a.p(e.dictionary),CT(n,2,a.d())}};function S2(n,e){e||(e={});var t=TT();t.p(n);var r=KB(n,e,e.dictionary?6:2,4);return YB(r,e),CT(r,r.length-4,t.d()),r}var XB=typeof TextDecoder<"u"&&new TextDecoder,QB=0;try{XB.decode(AT,{stream:!0}),QB=1}catch{}function JB(n){if(Array.isArray(n))return n}function ZB(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,a,o,c,u=[],h=!0,f=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(h=(r=o.call(t)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(g){f=!0,a=g}finally{try{if(!h&&t.return!=null&&(c=t.return(),Object(c)!==c))return}finally{if(f)throw a}}return u}}function j4(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function ez(n,e){if(n){if(typeof n=="string")return j4(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?j4(n,e):void 0}}function tz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _4(n,e){return JB(n)||ZB(n,e)||ez(n,e)||tz()}function S4(n,e="utf8"){return new TextDecoder(e).decode(n)}const nz=new TextEncoder;function rz(n){return nz.encode(n)}const sz=1024*8,az=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),o1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class hw{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=sz,t={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const a=t.offset?t.offset>>>0:0,o=e.byteLength-a;let c=a;(ArrayBuffer.isView(e)||e instanceof hw)&&(e.byteLength!==e.buffer.byteLength&&(c=e.byteOffset+a),e=e.buffer),r?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=c,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,c,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,a=new Uint8Array(r);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const r=o1[t].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,o=this.buffer.slice(a,a+r);if(this.littleEndian===az&&t!=="uint8"&&t!=="int8"){const u=new Uint8Array(this.buffer.slice(a,a+r));u.reverse();const h=new o1[t](u.buffer);return this.offset+=r,h.reverse(),h}const c=new o1[t](o);return this.offset+=r,c}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return S4(this.readBytes(e))}decodeText(e=1,t="utf8"){return S4(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(rz(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function am(n){let e=n.length;for(;--e>=0;)n[e]=0}const iz=3,oz=258,IT=29,lz=256,cz=lz+1+IT,RT=30,uz=512,dz=new Array((cz+2)*2);am(dz);const hz=new Array(RT*2);am(hz);const fz=new Array(uz);am(fz);const mz=new Array(oz-iz+1);am(mz);const gz=new Array(IT);am(gz);const pz=new Array(RT);am(pz);const xz=(n,e,t,r)=>{let a=n&65535|0,o=n>>>16&65535|0,c=0;for(;t!==0;){c=t>2e3?2e3:t,t-=c;do a=a+e[r++]|0,o=o+a|0;while(--c);a%=65521,o%=65521}return a|o<<16|0};var E2=xz;const yz=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},bz=new Uint32Array(yz()),vz=(n,e,t,r)=>{const a=bz,o=r+t;n^=-1;for(let c=r;c<o;c++)n=n>>>8^a[(n^e[c])&255];return n^-1};var Ul=vz,A2={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},kT={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const wz=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var Nz=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const r in t)wz(t,r)&&(n[r]=t[r])}}return n},jz=n=>{let e=0;for(let r=0,a=n.length;r<a;r++)e+=n[r].length;const t=new Uint8Array(e);for(let r=0,a=0,o=n.length;r<o;r++){let c=n[r];t.set(c,a),a+=c.length}return t},PT={assign:Nz,flattenChunks:jz};let LT=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{LT=!1}const Bg=new Uint8Array(256);for(let n=0;n<256;n++)Bg[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Bg[254]=Bg[254]=1;var _z=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,a,o,c=n.length,u=0;for(a=0;a<c;a++)t=n.charCodeAt(a),(t&64512)===55296&&a+1<c&&(r=n.charCodeAt(a+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),a++)),u+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(u),o=0,a=0;o<u;a++)t=n.charCodeAt(a),(t&64512)===55296&&a+1<c&&(r=n.charCodeAt(a+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),a++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const Sz=(n,e)=>{if(e<65534&&n.subarray&&LT)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t};var Ez=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,a;const o=new Array(t*2);for(a=0,r=0;r<t;){let c=n[r++];if(c<128){o[a++]=c;continue}let u=Bg[c];if(u>4){o[a++]=65533,r+=u-1;continue}for(c&=u===2?31:u===3?15:7;u>1&&r<t;)c=c<<6|n[r++]&63,u--;if(u>1){o[a++]=65533;continue}c<65536?o[a++]=c:(c-=65536,o[a++]=55296|c>>10&1023,o[a++]=56320|c&1023)}return Sz(o,a)},Az=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+Bg[n[t]]>e?t:e},T2={string2buf:_z,buf2string:Ez,utf8border:Az};function Tz(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Cz=Tz;const x0=16209,Iz=16191;var Rz=function(e,t){let r,a,o,c,u,h,f,g,y,w,b,T,S,j,E,L,D,O,te,ae,H,V,k,F;const I=e.state;r=e.next_in,k=e.input,a=r+(e.avail_in-5),o=e.next_out,F=e.output,c=o-(t-e.avail_out),u=o+(e.avail_out-257),h=I.dmax,f=I.wsize,g=I.whave,y=I.wnext,w=I.window,b=I.hold,T=I.bits,S=I.lencode,j=I.distcode,E=(1<<I.lenbits)-1,L=(1<<I.distbits)-1;e:do{T<15&&(b+=k[r++]<<T,T+=8,b+=k[r++]<<T,T+=8),D=S[b&E];t:for(;;){if(O=D>>>24,b>>>=O,T-=O,O=D>>>16&255,O===0)F[o++]=D&65535;else if(O&16){te=D&65535,O&=15,O&&(T<O&&(b+=k[r++]<<T,T+=8),te+=b&(1<<O)-1,b>>>=O,T-=O),T<15&&(b+=k[r++]<<T,T+=8,b+=k[r++]<<T,T+=8),D=j[b&L];n:for(;;){if(O=D>>>24,b>>>=O,T-=O,O=D>>>16&255,O&16){if(ae=D&65535,O&=15,T<O&&(b+=k[r++]<<T,T+=8,T<O&&(b+=k[r++]<<T,T+=8)),ae+=b&(1<<O)-1,ae>h){e.msg="invalid distance too far back",I.mode=x0;break e}if(b>>>=O,T-=O,O=o-c,ae>O){if(O=ae-O,O>g&&I.sane){e.msg="invalid distance too far back",I.mode=x0;break e}if(H=0,V=w,y===0){if(H+=f-O,O<te){te-=O;do F[o++]=w[H++];while(--O);H=o-ae,V=F}}else if(y<O){if(H+=f+y-O,O-=y,O<te){te-=O;do F[o++]=w[H++];while(--O);if(H=0,y<te){O=y,te-=O;do F[o++]=w[H++];while(--O);H=o-ae,V=F}}}else if(H+=y-O,O<te){te-=O;do F[o++]=w[H++];while(--O);H=o-ae,V=F}for(;te>2;)F[o++]=V[H++],F[o++]=V[H++],F[o++]=V[H++],te-=3;te&&(F[o++]=V[H++],te>1&&(F[o++]=V[H++]))}else{H=o-ae;do F[o++]=F[H++],F[o++]=F[H++],F[o++]=F[H++],te-=3;while(te>2);te&&(F[o++]=F[H++],te>1&&(F[o++]=F[H++]))}}else if((O&64)===0){D=j[(D&65535)+(b&(1<<O)-1)];continue n}else{e.msg="invalid distance code",I.mode=x0;break e}break}}else if((O&64)===0){D=S[(D&65535)+(b&(1<<O)-1)];continue t}else if(O&32){I.mode=Iz;break e}else{e.msg="invalid literal/length code",I.mode=x0;break e}break}}while(r<a&&o<u);te=T>>3,r-=te,T-=te<<3,b&=(1<<T)-1,e.next_in=r,e.next_out=o,e.avail_in=r<a?5+(a-r):5-(r-a),e.avail_out=o<u?257+(u-o):257-(o-u),I.hold=b,I.bits=T};const af=15,E4=852,A4=592,T4=0,l1=1,C4=2,kz=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Pz=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Lz=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Dz=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Mz=(n,e,t,r,a,o,c,u)=>{const h=u.bits;let f=0,g=0,y=0,w=0,b=0,T=0,S=0,j=0,E=0,L=0,D,O,te,ae,H,V=null,k;const F=new Uint16Array(af+1),I=new Uint16Array(af+1);let P=null,B,ue,Ne;for(f=0;f<=af;f++)F[f]=0;for(g=0;g<r;g++)F[e[t+g]]++;for(b=h,w=af;w>=1&&F[w]===0;w--);if(b>w&&(b=w),w===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,u.bits=1,0;for(y=1;y<w&&F[y]===0;y++);for(b<y&&(b=y),j=1,f=1;f<=af;f++)if(j<<=1,j-=F[f],j<0)return-1;if(j>0&&(n===T4||w!==1))return-1;for(I[1]=0,f=1;f<af;f++)I[f+1]=I[f]+F[f];for(g=0;g<r;g++)e[t+g]!==0&&(c[I[e[t+g]]++]=g);if(n===T4?(V=P=c,k=20):n===l1?(V=kz,P=Pz,k=257):(V=Lz,P=Dz,k=0),L=0,g=0,f=y,H=o,T=b,S=0,te=-1,E=1<<b,ae=E-1,n===l1&&E>E4||n===C4&&E>A4)return 1;for(;;){B=f-S,c[g]+1<k?(ue=0,Ne=c[g]):c[g]>=k?(ue=P[c[g]-k],Ne=V[c[g]-k]):(ue=96,Ne=0),D=1<<f-S,O=1<<T,y=O;do O-=D,a[H+(L>>S)+O]=B<<24|ue<<16|Ne|0;while(O!==0);for(D=1<<f-1;L&D;)D>>=1;if(D!==0?(L&=D-1,L+=D):L=0,g++,--F[f]===0){if(f===w)break;f=e[t+c[g]]}if(f>b&&(L&ae)!==te){for(S===0&&(S=b),H+=y,T=f-S,j=1<<T;T+S<w&&(j-=F[T+S],!(j<=0));)T++,j<<=1;if(E+=1<<T,n===l1&&E>E4||n===C4&&E>A4)return 1;te=L&ae,a[te]=b<<24|T<<16|H-o|0}}return L!==0&&(a[H+L]=f-S<<24|64<<16|0),u.bits=b,0};var yg=Mz;const Oz=0,DT=1,MT=2,{Z_FINISH:I4,Z_BLOCK:Fz,Z_TREES:y0,Z_OK:uh,Z_STREAM_END:Vz,Z_NEED_DICT:Uz,Z_STREAM_ERROR:Fo,Z_DATA_ERROR:OT,Z_MEM_ERROR:FT,Z_BUF_ERROR:Bz,Z_DEFLATED:R4}=kT,by=16180,k4=16181,P4=16182,L4=16183,D4=16184,M4=16185,O4=16186,F4=16187,V4=16188,U4=16189,Tx=16190,Lc=16191,c1=16192,B4=16193,u1=16194,z4=16195,q4=16196,H4=16197,G4=16198,b0=16199,v0=16200,$4=16201,W4=16202,K4=16203,Y4=16204,X4=16205,d1=16206,Q4=16207,J4=16208,zr=16209,VT=16210,UT=16211,zz=852,qz=592,Hz=15,Gz=Hz,Z4=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function $z(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const gh=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<by||e.mode>UT?1:0},BT=n=>{if(gh(n))return Fo;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=by,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(zz),e.distcode=e.distdyn=new Int32Array(qz),e.sane=1,e.back=-1,uh},zT=n=>{if(gh(n))return Fo;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,BT(n)},qT=(n,e)=>{let t;if(gh(n))return Fo;const r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Fo:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,zT(n))},HT=(n,e)=>{if(!n)return Fo;const t=new $z;n.state=t,t.strm=n,t.window=null,t.mode=by;const r=qT(n,e);return r!==uh&&(n.state=null),r},Wz=n=>HT(n,Gz);let e6=!0,h1,f1;const Kz=n=>{if(e6){h1=new Int32Array(512),f1=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(yg(DT,n.lens,0,288,h1,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;yg(MT,n.lens,0,32,f1,0,n.work,{bits:5}),e6=!1}n.lencode=h1,n.lenbits=9,n.distcode=f1,n.distbits=5},GT=(n,e,t,r)=>{let a;const o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>r&&(a=r),o.window.set(e.subarray(t-r,t-r+a),o.wnext),r-=a,r?(o.window.set(e.subarray(t-r,t),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},Yz=(n,e)=>{let t,r,a,o,c,u,h,f,g,y,w,b,T,S,j=0,E,L,D,O,te,ae,H,V;const k=new Uint8Array(4);let F,I;const P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(gh(n)||!n.output||!n.input&&n.avail_in!==0)return Fo;t=n.state,t.mode===Lc&&(t.mode=c1),c=n.next_out,a=n.output,h=n.avail_out,o=n.next_in,r=n.input,u=n.avail_in,f=t.hold,g=t.bits,y=u,w=h,V=uh;e:for(;;)switch(t.mode){case by:if(t.wrap===0){t.mode=c1;break}for(;g<16;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}if(t.wrap&2&&f===35615){t.wbits===0&&(t.wbits=15),t.check=0,k[0]=f&255,k[1]=f>>>8&255,t.check=Ul(t.check,k,2,0),f=0,g=0,t.mode=k4;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((f&255)<<8)+(f>>8))%31){n.msg="incorrect header check",t.mode=zr;break}if((f&15)!==R4){n.msg="unknown compression method",t.mode=zr;break}if(f>>>=4,g-=4,H=(f&15)+8,t.wbits===0&&(t.wbits=H),H>15||H>t.wbits){n.msg="invalid window size",t.mode=zr;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=f&512?U4:Lc,f=0,g=0;break;case k4:for(;g<16;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}if(t.flags=f,(t.flags&255)!==R4){n.msg="unknown compression method",t.mode=zr;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=zr;break}t.head&&(t.head.text=f>>8&1),t.flags&512&&t.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,t.check=Ul(t.check,k,2,0)),f=0,g=0,t.mode=P4;case P4:for(;g<32;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}t.head&&(t.head.time=f),t.flags&512&&t.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,k[2]=f>>>16&255,k[3]=f>>>24&255,t.check=Ul(t.check,k,4,0)),f=0,g=0,t.mode=L4;case L4:for(;g<16;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}t.head&&(t.head.xflags=f&255,t.head.os=f>>8),t.flags&512&&t.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,t.check=Ul(t.check,k,2,0)),f=0,g=0,t.mode=D4;case D4:if(t.flags&1024){for(;g<16;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}t.length=f,t.head&&(t.head.extra_len=f),t.flags&512&&t.wrap&4&&(k[0]=f&255,k[1]=f>>>8&255,t.check=Ul(t.check,k,2,0)),f=0,g=0}else t.head&&(t.head.extra=null);t.mode=M4;case M4:if(t.flags&1024&&(b=t.length,b>u&&(b=u),b&&(t.head&&(H=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(o,o+b),H)),t.flags&512&&t.wrap&4&&(t.check=Ul(t.check,r,b,o)),u-=b,o+=b,t.length-=b),t.length))break e;t.length=0,t.mode=O4;case O4:if(t.flags&2048){if(u===0)break e;b=0;do H=r[o+b++],t.head&&H&&t.length<65536&&(t.head.name+=String.fromCharCode(H));while(H&&b<u);if(t.flags&512&&t.wrap&4&&(t.check=Ul(t.check,r,b,o)),u-=b,o+=b,H)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=F4;case F4:if(t.flags&4096){if(u===0)break e;b=0;do H=r[o+b++],t.head&&H&&t.length<65536&&(t.head.comment+=String.fromCharCode(H));while(H&&b<u);if(t.flags&512&&t.wrap&4&&(t.check=Ul(t.check,r,b,o)),u-=b,o+=b,H)break e}else t.head&&(t.head.comment=null);t.mode=V4;case V4:if(t.flags&512){for(;g<16;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}if(t.wrap&4&&f!==(t.check&65535)){n.msg="header crc mismatch",t.mode=zr;break}f=0,g=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=Lc;break;case U4:for(;g<32;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}n.adler=t.check=Z4(f),f=0,g=0,t.mode=Tx;case Tx:if(t.havedict===0)return n.next_out=c,n.avail_out=h,n.next_in=o,n.avail_in=u,t.hold=f,t.bits=g,Uz;n.adler=t.check=1,t.mode=Lc;case Lc:if(e===Fz||e===y0)break e;case c1:if(t.last){f>>>=g&7,g-=g&7,t.mode=d1;break}for(;g<3;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}switch(t.last=f&1,f>>>=1,g-=1,f&3){case 0:t.mode=B4;break;case 1:if(Kz(t),t.mode=b0,e===y0){f>>>=2,g-=2;break e}break;case 2:t.mode=q4;break;case 3:n.msg="invalid block type",t.mode=zr}f>>>=2,g-=2;break;case B4:for(f>>>=g&7,g-=g&7;g<32;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}if((f&65535)!==(f>>>16^65535)){n.msg="invalid stored block lengths",t.mode=zr;break}if(t.length=f&65535,f=0,g=0,t.mode=u1,e===y0)break e;case u1:t.mode=z4;case z4:if(b=t.length,b){if(b>u&&(b=u),b>h&&(b=h),b===0)break e;a.set(r.subarray(o,o+b),c),u-=b,o+=b,h-=b,c+=b,t.length-=b;break}t.mode=Lc;break;case q4:for(;g<14;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}if(t.nlen=(f&31)+257,f>>>=5,g-=5,t.ndist=(f&31)+1,f>>>=5,g-=5,t.ncode=(f&15)+4,f>>>=4,g-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=zr;break}t.have=0,t.mode=H4;case H4:for(;t.have<t.ncode;){for(;g<3;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}t.lens[P[t.have++]]=f&7,f>>>=3,g-=3}for(;t.have<19;)t.lens[P[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,F={bits:t.lenbits},V=yg(Oz,t.lens,0,19,t.lencode,0,t.work,F),t.lenbits=F.bits,V){n.msg="invalid code lengths set",t.mode=zr;break}t.have=0,t.mode=G4;case G4:for(;t.have<t.nlen+t.ndist;){for(;j=t.lencode[f&(1<<t.lenbits)-1],E=j>>>24,L=j>>>16&255,D=j&65535,!(E<=g);){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}if(D<16)f>>>=E,g-=E,t.lens[t.have++]=D;else{if(D===16){for(I=E+2;g<I;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}if(f>>>=E,g-=E,t.have===0){n.msg="invalid bit length repeat",t.mode=zr;break}H=t.lens[t.have-1],b=3+(f&3),f>>>=2,g-=2}else if(D===17){for(I=E+3;g<I;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}f>>>=E,g-=E,H=0,b=3+(f&7),f>>>=3,g-=3}else{for(I=E+7;g<I;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}f>>>=E,g-=E,H=0,b=11+(f&127),f>>>=7,g-=7}if(t.have+b>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=zr;break}for(;b--;)t.lens[t.have++]=H}}if(t.mode===zr)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=zr;break}if(t.lenbits=9,F={bits:t.lenbits},V=yg(DT,t.lens,0,t.nlen,t.lencode,0,t.work,F),t.lenbits=F.bits,V){n.msg="invalid literal/lengths set",t.mode=zr;break}if(t.distbits=6,t.distcode=t.distdyn,F={bits:t.distbits},V=yg(MT,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,F),t.distbits=F.bits,V){n.msg="invalid distances set",t.mode=zr;break}if(t.mode=b0,e===y0)break e;case b0:t.mode=v0;case v0:if(u>=6&&h>=258){n.next_out=c,n.avail_out=h,n.next_in=o,n.avail_in=u,t.hold=f,t.bits=g,Rz(n,w),c=n.next_out,a=n.output,h=n.avail_out,o=n.next_in,r=n.input,u=n.avail_in,f=t.hold,g=t.bits,t.mode===Lc&&(t.back=-1);break}for(t.back=0;j=t.lencode[f&(1<<t.lenbits)-1],E=j>>>24,L=j>>>16&255,D=j&65535,!(E<=g);){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}if(L&&(L&240)===0){for(O=E,te=L,ae=D;j=t.lencode[ae+((f&(1<<O+te)-1)>>O)],E=j>>>24,L=j>>>16&255,D=j&65535,!(O+E<=g);){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}f>>>=O,g-=O,t.back+=O}if(f>>>=E,g-=E,t.back+=E,t.length=D,L===0){t.mode=X4;break}if(L&32){t.back=-1,t.mode=Lc;break}if(L&64){n.msg="invalid literal/length code",t.mode=zr;break}t.extra=L&15,t.mode=$4;case $4:if(t.extra){for(I=t.extra;g<I;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}t.length+=f&(1<<t.extra)-1,f>>>=t.extra,g-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=W4;case W4:for(;j=t.distcode[f&(1<<t.distbits)-1],E=j>>>24,L=j>>>16&255,D=j&65535,!(E<=g);){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}if((L&240)===0){for(O=E,te=L,ae=D;j=t.distcode[ae+((f&(1<<O+te)-1)>>O)],E=j>>>24,L=j>>>16&255,D=j&65535,!(O+E<=g);){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}f>>>=O,g-=O,t.back+=O}if(f>>>=E,g-=E,t.back+=E,L&64){n.msg="invalid distance code",t.mode=zr;break}t.offset=D,t.extra=L&15,t.mode=K4;case K4:if(t.extra){for(I=t.extra;g<I;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}t.offset+=f&(1<<t.extra)-1,f>>>=t.extra,g-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=zr;break}t.mode=Y4;case Y4:if(h===0)break e;if(b=w-h,t.offset>b){if(b=t.offset-b,b>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=zr;break}b>t.wnext?(b-=t.wnext,T=t.wsize-b):T=t.wnext-b,b>t.length&&(b=t.length),S=t.window}else S=a,T=c-t.offset,b=t.length;b>h&&(b=h),h-=b,t.length-=b;do a[c++]=S[T++];while(--b);t.length===0&&(t.mode=v0);break;case X4:if(h===0)break e;a[c++]=t.length,h--,t.mode=v0;break;case d1:if(t.wrap){for(;g<32;){if(u===0)break e;u--,f|=r[o++]<<g,g+=8}if(w-=h,n.total_out+=w,t.total+=w,t.wrap&4&&w&&(n.adler=t.check=t.flags?Ul(t.check,a,w,c-w):E2(t.check,a,w,c-w)),w=h,t.wrap&4&&(t.flags?f:Z4(f))!==t.check){n.msg="incorrect data check",t.mode=zr;break}f=0,g=0}t.mode=Q4;case Q4:if(t.wrap&&t.flags){for(;g<32;){if(u===0)break e;u--,f+=r[o++]<<g,g+=8}if(t.wrap&4&&f!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=zr;break}f=0,g=0}t.mode=J4;case J4:V=Vz;break e;case zr:V=OT;break e;case VT:return FT;case UT:default:return Fo}return n.next_out=c,n.avail_out=h,n.next_in=o,n.avail_in=u,t.hold=f,t.bits=g,(t.wsize||w!==n.avail_out&&t.mode<zr&&(t.mode<d1||e!==I4))&&GT(n,n.output,n.next_out,w-n.avail_out),y-=n.avail_in,w-=n.avail_out,n.total_in+=y,n.total_out+=w,t.total+=w,t.wrap&4&&w&&(n.adler=t.check=t.flags?Ul(t.check,a,w,n.next_out-w):E2(t.check,a,w,n.next_out-w)),n.data_type=t.bits+(t.last?64:0)+(t.mode===Lc?128:0)+(t.mode===b0||t.mode===u1?256:0),(y===0&&w===0||e===I4)&&V===uh&&(V=Bz),V},Xz=n=>{if(gh(n))return Fo;let e=n.state;return e.window&&(e.window=null),n.state=null,uh},Qz=(n,e)=>{if(gh(n))return Fo;const t=n.state;return(t.wrap&2)===0?Fo:(t.head=e,e.done=!1,uh)},Jz=(n,e)=>{const t=e.length;let r,a,o;return gh(n)||(r=n.state,r.wrap!==0&&r.mode!==Tx)?Fo:r.mode===Tx&&(a=1,a=E2(a,e,t,0),a!==r.check)?OT:(o=GT(n,e,t,t),o?(r.mode=VT,FT):(r.havedict=1,uh))};var Zz=zT,eq=qT,tq=BT,nq=Wz,rq=HT,sq=Yz,aq=Xz,iq=Qz,oq=Jz,lq="pako inflate (from Nodeca project)",Oc={inflateReset:Zz,inflateReset2:eq,inflateResetKeep:tq,inflateInit:nq,inflateInit2:rq,inflate:sq,inflateEnd:aq,inflateGetHeader:iq,inflateSetDictionary:oq,inflateInfo:lq};function cq(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var uq=cq;const $T=Object.prototype.toString,{Z_NO_FLUSH:dq,Z_FINISH:hq,Z_OK:zg,Z_STREAM_END:m1,Z_NEED_DICT:g1,Z_STREAM_ERROR:fq,Z_DATA_ERROR:t6,Z_MEM_ERROR:mq}=kT;function hp(n){this.options=PT.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Cz,this.strm.avail_out=0;let t=Oc.inflateInit2(this.strm,e.windowBits);if(t!==zg)throw new Error(A2[t]);if(this.header=new uq,Oc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=T2.string2buf(e.dictionary):$T.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Oc.inflateSetDictionary(this.strm,e.dictionary),t!==zg)))throw new Error(A2[t])}hp.prototype.push=function(n,e){const t=this.strm,r=this.options.chunkSize,a=this.options.dictionary;let o,c,u;if(this.ended)return!1;for(e===~~e?c=e:c=e===!0?hq:dq,$T.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),o=Oc.inflate(t,c),o===g1&&a&&(o=Oc.inflateSetDictionary(t,a),o===zg?o=Oc.inflate(t,c):o===t6&&(o=g1));t.avail_in>0&&o===m1&&t.state.wrap>0&&n[t.next_in]!==0;)Oc.inflateReset(t),o=Oc.inflate(t,c);switch(o){case fq:case t6:case g1:case mq:return this.onEnd(o),this.ended=!0,!1}if(u=t.avail_out,t.next_out&&(t.avail_out===0||o===m1))if(this.options.to==="string"){let h=T2.utf8border(t.output,t.next_out),f=t.next_out-h,g=T2.buf2string(t.output,h);t.next_out=f,t.avail_out=r-f,f&&t.output.set(t.output.subarray(h,h+f),0),this.onData(g)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===zg&&u===0)){if(o===m1)return o=Oc.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};hp.prototype.onData=function(n){this.chunks.push(n)};hp.prototype.onEnd=function(n){n===zg&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=PT.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function gq(n,e){const t=new hp(e);if(t.push(n),t.err)throw t.msg||A2[t.err];return t.result}var pq=hp,xq=gq,yq={Inflate:pq,inflate:xq};const{Inflate:bq,inflate:vq}=yq;var n6=bq,wq=vq;const WT=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;WT[n]=e}const r6=4294967295;function Nq(n,e,t){let r=n;for(let a=0;a<t;a++)r=WT[(r^e[a])&255]^r>>>8;return r}function jq(n,e){return(Nq(r6,n,e)^r6)>>>0}function s6(n,e,t){const r=n.readUint32(),a=jq(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(a!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${a}`)}function KT(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function YT(n,e,t,r){let a=0;for(;a<r;a++)e[a]=n[a];for(;a<t;a++)e[a]=n[a]+e[a-r]&255}function XT(n,e,t,r){let a=0;if(t.length===0)for(;a<r;a++)e[a]=n[a];else for(;a<r;a++)e[a]=n[a]+t[a]&255}function QT(n,e,t,r,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+(e[o-a]>>1)&255}else{for(;o<a;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<r;o++)e[o]=n[o]+(e[o-a]+t[o]>>1)&255}}function JT(n,e,t,r,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+e[o-a]&255}else{for(;o<a;o++)e[o]=n[o]+t[o]&255;for(;o<r;o++)e[o]=n[o]+_q(e[o-a],t[o],t[o-a])&255}}function _q(n,e,t){const r=n+e-t,a=Math.abs(r-n),o=Math.abs(r-e),c=Math.abs(r-t);return a<=o&&a<=c?n:o<=c?e:t}function Sq(n,e,t,r,a,o){switch(n){case 0:KT(e,t,a);break;case 1:YT(e,t,a,o);break;case 2:XT(e,t,r,a);break;case 3:QT(e,t,r,a,o);break;case 4:JT(e,t,r,a,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}const Eq=new Uint16Array([255]),Aq=new Uint8Array(Eq.buffer),Tq=Aq[0]===255;function Cq(n){const{data:e,width:t,height:r,channels:a,depth:o}=n,c=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],u=Math.ceil(o/8)*a,h=new Uint8Array(r*t*u);let f=0;for(let g=0;g<7;g++){const y=c[g],w=Math.ceil((t-y.x)/y.xStep),b=Math.ceil((r-y.y)/y.yStep);if(w<=0||b<=0)continue;const T=w*u,S=new Uint8Array(T);for(let j=0;j<b;j++){const E=e[f++],L=e.subarray(f,f+T);f+=T;const D=new Uint8Array(T);Sq(E,L,D,S,T,u),S.set(D);for(let O=0;O<w;O++){const te=y.x+O*y.xStep,ae=y.y+j*y.yStep;if(!(te>=t||ae>=r))for(let H=0;H<u;H++)h[(ae*t+te)*u+H]=D[O*u+H]}}}if(o===16){const g=new Uint16Array(h.buffer);if(Tq)for(let y=0;y<g.length;y++)g[y]=Iq(g[y]);return g}else return h}function Iq(n){return(n&255)<<8|n>>8&255}const Rq=new Uint16Array([255]),kq=new Uint8Array(Rq.buffer),Pq=kq[0]===255,Lq=new Uint8Array(0);function a6(n){const{data:e,width:t,height:r,channels:a,depth:o}=n,c=Math.ceil(o/8)*a,u=Math.ceil(o/8*a*t),h=new Uint8Array(r*u);let f=Lq,g=0,y,w;for(let b=0;b<r;b++){switch(y=e.subarray(g+1,g+1+u),w=h.subarray(b*u,(b+1)*u),e[g]){case 0:KT(y,w,u);break;case 1:YT(y,w,u,c);break;case 2:XT(y,w,f,u);break;case 3:QT(y,w,f,u,c);break;case 4:JT(y,w,f,u,c);break;default:throw new Error(`Unsupported filter: ${e[g]}`)}f=w,g+=u+1}if(o===16){const b=new Uint16Array(h.buffer);if(Pq)for(let T=0;T<b.length;T++)b[T]=Dq(b[T]);return b}else return h}function Dq(n){return(n&255)<<8|n>>8&255}const q0=Uint8Array.of(137,80,78,71,13,10,26,10);function i6(n){if(!Mq(n.readBytes(q0.length)))throw new Error("wrong PNG signature")}function Mq(n){if(n.length<q0.length)return!1;for(let e=0;e<q0.length;e++)if(n[e]!==q0[e])return!1;return!0}const Oq="tEXt",Fq=0,ZT=new TextDecoder("latin1");function Vq(n){if(Bq(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const Uq=/^[\u0000-\u00FF]*$/;function Bq(n){if(!Uq.test(n))throw new Error("invalid latin1 text")}function zq(n,e,t){const r=eC(e);n[r]=qq(e,t-r.length-1)}function eC(n){for(n.mark();n.readByte()!==Fq;);const e=n.offset;n.reset();const t=ZT.decode(n.readBytes(e-n.offset-1));return n.skip(1),Vq(t),t}function qq(n,e){return ZT.decode(n.readBytes(e))}const ro={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},p1={UNKNOWN:-1,DEFLATE:0},o6={UNKNOWN:-1,ADAPTIVE:0},x1={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},w0={NONE:0,BACKGROUND:1,PREVIOUS:2},y1={SOURCE:0,OVER:1};class Hq extends hw{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new n6,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=p1.UNKNOWN,this._filterMethod=o6.UNKNOWN,this._interlaceMethod=x1.UNKNOWN,this._colorType=ro.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(i6(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(i6(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case Oq:zq(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?s6(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const r=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?s6(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=Gq(this.readUint8());const t=this.readUint8();this._colorType=t;let r;switch(t){case ro.GREYSCALE:r=1;break;case ro.TRUECOLOUR:r=3;break;case ro.INDEXED_COLOUR:r=1;break;case ro.GREYSCALE_ALPHA:r=2;break;case ro.TRUECOLOUR_ALPHA:r=4;break;case ro.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==p1.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const r=[];this._palette=r;for(let a=0;a<t;a++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(r+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case ro.GREYSCALE:case ro.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case ro.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const r=this.readByte();this._palette[t].push(r)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case ro.UNKNOWN:case ro.GREYSCALE_ALPHA:case ro.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=eC(this),r=this.readUint8();if(r!==p1.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const a=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:wq(a)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=a6({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(r,a,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case w0.NONE:break;case w0.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const c=(a*e.width+o)*this._png.channels;for(let u=0;u<this._png.channels;u++)r.data[c+u]=0}break;case w0.PREVIOUS:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const r=1<<this._png.depth,a=(o,c)=>{const u=((o+t.yOffset)*this._png.width+t.xOffset+c)*this._png.channels,h=(o*t.width+c)*this._png.channels;return{index:u,frameIndex:h}};switch(t.blendOp){case y1.SOURCE:for(let o=0;o<t.height;o++)for(let c=0;c<t.width;c++){const{index:u,frameIndex:h}=a(o,c);for(let f=0;f<this._png.channels;f++)e.data[u+f]=t.data[h+f]}break;case y1.OVER:for(let o=0;o<t.height;o++)for(let c=0;c<t.width;c++){const{index:u,frameIndex:h}=a(o,c);for(let f=0;f<this._png.channels;f++){const g=t.data[h+this._png.channels-1]/r,y=f%(this._png.channels-1)===0?1:t.data[h+f],w=Math.floor(g*y+(1-g)*e.data[u+f]);e.data[u+f]+=w}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==o6.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===x1.NO_INTERLACE)this._png.data=a6({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===x1.ADAM7)this._png.data=Cq({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:w0.NONE,blendOp:y1.SOURCE,data:e}),this._inflator=new n6,this._writingDataChunks=!1}}function Gq(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var l6;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(l6||(l6={}));function $q(n,e){return new Hq(n,e).decode()}var nn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function b1(){nn.console&&typeof nn.console.log=="function"&&nn.console.log.apply(nn.console,arguments)}var Sr={log:b1,warn:function(n){nn.console&&(typeof nn.console.warn=="function"?nn.console.warn.apply(nn.console,arguments):b1.call(null,arguments))},error:function(n){nn.console&&(typeof nn.console.error=="function"?nn.console.error.apply(nn.console,arguments):b1(n))}};function v1(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Ld(r.response,e,t)},r.onerror=function(){Sr.error("could not download file")},r.send()}function c6(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function N0(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Ld=nn.saveAs||((typeof window>"u"?"undefined":cr(window))!=="object"||window!==nn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=nn.URL||nn.webkitURL,a=document.createElement("a");e=e||n.name||"download",a.download=e,a.rel="noopener",typeof n=="string"?(a.href=n,a.origin!==location.origin?c6(a.href)?v1(n,e,t):N0(a,a.target="_blank"):N0(a)):(a.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(a.href)},4e4),setTimeout(function(){N0(a)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(c6(n))v1(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){N0(r)})}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:cr(o)!=="object"&&(Sr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return v1(n,e,t);var a=n.type==="application/octet-stream",o=/constructor/i.test(nn.HTMLElement)||nn.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&o)&&(typeof FileReader>"u"?"undefined":cr(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var g=u.result;g=c?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=g:location=g,r=null},u.readAsDataURL(n)}else{var h=nn.URL||nn.webkitURL,f=h.createObjectURL(n);r?r.location=f:location.href=f,r=null,setTimeout(function(){h.revokeObjectURL(f)},4e4)}});function tC(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],r=0;r<t.length;r++){var a=t[r].re,o=t[r].process,c=a.exec(n);c&&(e=o(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),h=this.g.toString(16),f=this.b.toString(16);return u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),f.length==1&&(f="0"+f),"#"+u+h+f}}var H0=nn.atob.bind(nn),u6=nn.btoa.bind(nn);function w1(n,e){var t=n[0],r=n[1],a=n[2],o=n[3];t=$a(t,r,a,o,e[0],7,-680876936),o=$a(o,t,r,a,e[1],12,-389564586),a=$a(a,o,t,r,e[2],17,606105819),r=$a(r,a,o,t,e[3],22,-1044525330),t=$a(t,r,a,o,e[4],7,-176418897),o=$a(o,t,r,a,e[5],12,1200080426),a=$a(a,o,t,r,e[6],17,-1473231341),r=$a(r,a,o,t,e[7],22,-45705983),t=$a(t,r,a,o,e[8],7,1770035416),o=$a(o,t,r,a,e[9],12,-1958414417),a=$a(a,o,t,r,e[10],17,-42063),r=$a(r,a,o,t,e[11],22,-1990404162),t=$a(t,r,a,o,e[12],7,1804603682),o=$a(o,t,r,a,e[13],12,-40341101),a=$a(a,o,t,r,e[14],17,-1502002290),t=Wa(t,r=$a(r,a,o,t,e[15],22,1236535329),a,o,e[1],5,-165796510),o=Wa(o,t,r,a,e[6],9,-1069501632),a=Wa(a,o,t,r,e[11],14,643717713),r=Wa(r,a,o,t,e[0],20,-373897302),t=Wa(t,r,a,o,e[5],5,-701558691),o=Wa(o,t,r,a,e[10],9,38016083),a=Wa(a,o,t,r,e[15],14,-660478335),r=Wa(r,a,o,t,e[4],20,-405537848),t=Wa(t,r,a,o,e[9],5,568446438),o=Wa(o,t,r,a,e[14],9,-1019803690),a=Wa(a,o,t,r,e[3],14,-187363961),r=Wa(r,a,o,t,e[8],20,1163531501),t=Wa(t,r,a,o,e[13],5,-1444681467),o=Wa(o,t,r,a,e[2],9,-51403784),a=Wa(a,o,t,r,e[7],14,1735328473),t=Ka(t,r=Wa(r,a,o,t,e[12],20,-1926607734),a,o,e[5],4,-378558),o=Ka(o,t,r,a,e[8],11,-2022574463),a=Ka(a,o,t,r,e[11],16,1839030562),r=Ka(r,a,o,t,e[14],23,-35309556),t=Ka(t,r,a,o,e[1],4,-1530992060),o=Ka(o,t,r,a,e[4],11,1272893353),a=Ka(a,o,t,r,e[7],16,-155497632),r=Ka(r,a,o,t,e[10],23,-1094730640),t=Ka(t,r,a,o,e[13],4,681279174),o=Ka(o,t,r,a,e[0],11,-358537222),a=Ka(a,o,t,r,e[3],16,-722521979),r=Ka(r,a,o,t,e[6],23,76029189),t=Ka(t,r,a,o,e[9],4,-640364487),o=Ka(o,t,r,a,e[12],11,-421815835),a=Ka(a,o,t,r,e[15],16,530742520),t=Ya(t,r=Ka(r,a,o,t,e[2],23,-995338651),a,o,e[0],6,-198630844),o=Ya(o,t,r,a,e[7],10,1126891415),a=Ya(a,o,t,r,e[14],15,-1416354905),r=Ya(r,a,o,t,e[5],21,-57434055),t=Ya(t,r,a,o,e[12],6,1700485571),o=Ya(o,t,r,a,e[3],10,-1894986606),a=Ya(a,o,t,r,e[10],15,-1051523),r=Ya(r,a,o,t,e[1],21,-2054922799),t=Ya(t,r,a,o,e[8],6,1873313359),o=Ya(o,t,r,a,e[15],10,-30611744),a=Ya(a,o,t,r,e[6],15,-1560198380),r=Ya(r,a,o,t,e[13],21,1309151649),t=Ya(t,r,a,o,e[4],6,-145523070),o=Ya(o,t,r,a,e[11],10,-1120210379),a=Ya(a,o,t,r,e[2],15,718787259),r=Ya(r,a,o,t,e[9],21,-343485551),n[0]=Gu(t,n[0]),n[1]=Gu(r,n[1]),n[2]=Gu(a,n[2]),n[3]=Gu(o,n[3])}function vy(n,e,t,r,a,o){return e=Gu(Gu(e,n),Gu(r,o)),Gu(e<<a|e>>>32-a,t)}function $a(n,e,t,r,a,o,c){return vy(e&t|~e&r,n,e,a,o,c)}function Wa(n,e,t,r,a,o,c){return vy(e&r|t&~r,n,e,a,o,c)}function Ka(n,e,t,r,a,o,c){return vy(e^t^r,n,e,a,o,c)}function Ya(n,e,t,r,a,o,c){return vy(t^(e|~r),n,e,a,o,c)}function nC(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)w1(r,Wq(n.substring(e-64,e)));n=n.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)a[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(w1(r,a),e=0;e<16;e++)a[e]=0;return a[14]=8*t,w1(r,a),r}function Wq(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var d6="0123456789abcdef".split("");function Kq(n){for(var e="",t=0;t<4;t++)e+=d6[n>>8*t+4&15]+d6[n>>8*t&15];return e}function Yq(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function C2(n){return nC(n).map(Yq).join("")}var Xq=(function(n){for(var e=0;e<n.length;e++)n[e]=Kq(n[e]);return n.join("")})(nC("hello"))!="5d41402abc4b2a76b9719d911017c592";function Gu(n,e){if(Xq){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function I2(n,e){var t,r,a,o;if(n!==t){for(var c=(a=n,o=1+(256/n.length|0),new Array(o+1).join(a)),u=[],h=0;h<256;h++)u[h]=h;var f=0;for(h=0;h<256;h++){var g=u[h];f=(f+g+c.charCodeAt(h))%256,u[h]=u[f],u[f]=g}t=n,r=u}else u=r;var y=e.length,w=0,b=0,T="";for(h=0;h<y;h++)b=(b+(g=u[w=(w+1)%256]))%256,u[w]=u[b],u[b]=g,c=u[(u[w]+u[b])%256],T+=String.fromCharCode(e.charCodeAt(h)^c);return T}var h6={print:4,modify:8,copy:16,"annot-forms":32};function mf(n,e,t,r){this.v=1,this.r=2;var a=192;n.forEach(function(u){if(h6.perm!==void 0)throw new Error("Invalid permission: "+u);a+=h6[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),c=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,c),this.P=-(1+(255^a)),this.encryptionKey=C2(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=I2(this.encryptionKey,this.padding)}function gf(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var a=n.charCodeAt(r);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):n[r]}return e}function f6(n){if(cr(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,a){if(a=a||!1,typeof t!="string"||typeof r!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[r,!!a],o},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),a=[];for(var o in e[t]){var c=e[t][o];try{c[0].apply(n,r)}catch(u){nn.console&&Sr.error("jsPDF PubSub Error",u.message,u)}c[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Cx(n){if(!(this instanceof Cx))return new Cx(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function rC(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Vd(n,e,t,r,a){if(!(this instanceof Vd))return new Vd(n,e,t,r,a);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,rC.call(this,r,a)}function yf(n,e,t,r,a){if(!(this instanceof yf))return new yf(n,e,t,r,a);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,rC.call(this,r,a)}function Rt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],a=arguments[2],o=arguments[3],c=[],u=1,h=16,f="S",g=null;cr(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,a=n.format||a,o=n.compress||n.compressPdf||o,(g=n.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),u=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(h=n.floatPrecision),f=n.defaultPathOperation||"S"),c=n.filters||(o===!0?["FlateEncode"]:c),r=r||"mm",t=(""+(t||"P")).toLowerCase();var y=n.putOnlyUsedFonts||!1,w={},b={internal:{},__private__:{}};b.__private__.PubSub=f6;var T="1.3",S=b.__private__.getPdfVersion=function(){return T};b.__private__.setPdfVersion=function(A){T=A};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return j};var E=b.__private__.getPageFormat=function(A){return j[A]};a=a||"a4";var L="compat",D="advanced",O=L;function te(){this.saveGraphicsState(),se(new Ct(en,0,0,-en,0,si()*en).toString()+" cm"),this.setFontSize(this.getFontSize()/en),f="n",O=D}function ae(){this.restoreGraphicsState(),f="S",O=L}var H=b.__private__.combineFontStyleAndFontWeight=function(A,G){if(A=="bold"&&G=="normal"||A=="bold"&&G==400||A=="normal"&&G=="italic"||A=="bold"&&G=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return G&&(A=G==400||G==="normal"?A==="italic"?"italic":"normal":G!=700&&G!=="bold"||A!=="normal"?(G==700?"bold":G)+""+A:"bold"),A};b.advancedAPI=function(A){var G=O===L;return G&&te.call(this),typeof A!="function"||(A(this),G&&ae.call(this)),this},b.compatAPI=function(A){var G=O===D;return G&&ae.call(this),typeof A!="function"||(A(this),G&&te.call(this)),this},b.isAdvancedAPI=function(){return O===D};var V,k=function(A){if(O!==D)throw new Error(A+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=b.roundToPrecision=b.__private__.roundToPrecision=function(A,G){var oe=e||G;if(isNaN(A)||isNaN(oe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return A.toFixed(oe).replace(/0+$/,"")};V=b.hpf=b.__private__.hpf=typeof h=="number"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return F(A,h)}:h==="smart"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return F(A,A>-1&&A<1?16:5)}:function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return F(A,16)};var I=b.f2=b.__private__.f2=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f2");return F(A,2)},P=b.__private__.f3=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f3");return F(A,3)},B=b.scale=b.__private__.scale=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.scale");return O===L?A*en:O===D?A:void 0},ue=function(A){return B((function(G){return O===L?si()-G:O===D?G:void 0})(A))};b.__private__.setPrecision=b.setPrecision=function(A){typeof parseInt(A,10)=="number"&&(e=parseInt(A,10))};var Ne,ce="00000000000000000000000000000000",pe=b.__private__.getFileId=function(){return ce},de=b.__private__.setFileId=function(A){return ce=A!==void 0&&/^[a-fA-F0-9]{32}$/.test(A)?A.toUpperCase():ce.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(wr=new mf(g.userPermissions,g.userPassword,g.ownerPassword,ce)),ce};b.setFileId=function(A){return de(A),this},b.getFileId=function(){return pe()};var Se=b.__private__.convertDateToPDFDate=function(A){var G=A.getTimezoneOffset(),oe=G<0?"+":"-",ge=Math.floor(Math.abs(G/60)),we=Math.abs(G%60),Ue=[oe,re(ge),"'",re(we),"'"].join("");return["D:",A.getFullYear(),re(A.getMonth()+1),re(A.getDate()),re(A.getHours()),re(A.getMinutes()),re(A.getSeconds()),Ue].join("")},ze=b.__private__.convertPDFDateToDate=function(A){var G=parseInt(A.substr(2,4),10),oe=parseInt(A.substr(6,2),10)-1,ge=parseInt(A.substr(8,2),10),we=parseInt(A.substr(10,2),10),Ue=parseInt(A.substr(12,2),10),Ye=parseInt(A.substr(14,2),10);return new Date(G,oe,ge,we,Ue,Ye,0)},ne=b.__private__.setCreationDate=function(A){var G;if(A===void 0&&(A=new Date),A instanceof Date)G=Se(A);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(A))throw new Error("Invalid argument passed to jsPDF.setCreationDate");G=A}return Ne=G},q=b.__private__.getCreationDate=function(A){var G=Ne;return A==="jsDate"&&(G=ze(Ne)),G};b.setCreationDate=function(A){return ne(A),this},b.getCreationDate=function(A){return q(A)};var Q,re=b.__private__.padd2=function(A){return("0"+parseInt(A)).slice(-2)},he=b.__private__.padd2Hex=function(A){return("00"+(A=A.toString())).substr(A.length)},me=0,be=[],Le=[],ke=0,qe=[],Je=[],it=!1,at=Le;b.__private__.setCustomOutputDestination=function(A){it=!0,at=A};var ft=function(A){it||(at=A)};b.__private__.resetCustomOutputDestination=function(){it=!1,at=Le};var se=b.__private__.out=function(A){return A=A.toString(),ke+=A.length+1,at.push(A),at},st=b.__private__.write=function(A){return se(arguments.length===1?A.toString():Array.prototype.join.call(arguments," "))},rn=b.__private__.getArrayBuffer=function(A){for(var G=A.length,oe=new ArrayBuffer(G),ge=new Uint8Array(oe);G--;)ge[G]=A.charCodeAt(G);return oe},Pt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return Pt};var Ge=n.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(A){return Ge=O===D?A/en:A,this};var ct,lt=b.__private__.getFontSize=b.getFontSize=function(){return O===L?Ge:Ge*en},Dt=n.R2L||!1;b.__private__.setR2L=b.setR2L=function(A){return Dt=A,this},b.__private__.getR2L=b.getR2L=function(){return Dt};var St,sn=b.__private__.setZoomMode=function(A){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(A))ct=A;else if(isNaN(A)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(A)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+A+'" is not recognized.');ct=A}else ct=parseInt(A,10)};b.__private__.getZoomMode=function(){return ct};var dn,Xt=b.__private__.setPageMode=function(A){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(A)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+A+'" is not recognized.');St=A};b.__private__.getPageMode=function(){return St};var pn=b.__private__.setLayoutMode=function(A){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(A)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+A+'" is not recognized.');dn=A};b.__private__.getLayoutMode=function(){return dn},b.__private__.setDisplayMode=b.setDisplayMode=function(A,G,oe){return sn(A),pn(G),Xt(oe),this};var on={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(A){if(Object.keys(on).indexOf(A)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return on[A]},b.__private__.getDocumentProperties=function(){return on},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(A){for(var G in on)on.hasOwnProperty(G)&&A[G]&&(on[G]=A[G]);return this},b.__private__.setDocumentProperty=function(A,G){if(Object.keys(on).indexOf(A)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return on[A]=G};var wt,en,Nt,Er,ln,Lt={},$t={},an=[],Tt={},zn={},zt={},qt={},Gn=null,Et=0,jt=[],xn=new f6(b),Bs=n.hotfixes||[],As={},pi={},ms=[],Ct=function A(G,oe,ge,we,Ue,Ye){if(!(this instanceof A))return new A(G,oe,ge,we,Ue,Ye);isNaN(G)&&(G=1),isNaN(oe)&&(oe=0),isNaN(ge)&&(ge=0),isNaN(we)&&(we=1),isNaN(Ue)&&(Ue=0),isNaN(Ye)&&(Ye=0),this._matrix=[G,oe,ge,we,Ue,Ye]};Object.defineProperty(Ct.prototype,"sx",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(Ct.prototype,"shy",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(Ct.prototype,"shx",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(Ct.prototype,"sy",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(Ct.prototype,"tx",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(Ct.prototype,"ty",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(Ct.prototype,"a",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(Ct.prototype,"b",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(Ct.prototype,"c",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(Ct.prototype,"d",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(Ct.prototype,"e",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(Ct.prototype,"f",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(Ct.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ct.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ct.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ct.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ct.prototype.join=function(A){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(V).join(A)},Ct.prototype.multiply=function(A){var G=A.sx*this.sx+A.shy*this.shx,oe=A.sx*this.shy+A.shy*this.sy,ge=A.shx*this.sx+A.sy*this.shx,we=A.shx*this.shy+A.sy*this.sy,Ue=A.tx*this.sx+A.ty*this.shx+this.tx,Ye=A.tx*this.shy+A.ty*this.sy+this.ty;return new Ct(G,oe,ge,we,Ue,Ye)},Ct.prototype.decompose=function(){var A=this.sx,G=this.shy,oe=this.shx,ge=this.sy,we=this.tx,Ue=this.ty,Ye=Math.sqrt(A*A+G*G),ht=(A/=Ye)*oe+(G/=Ye)*ge;oe-=A*ht,ge-=G*ht;var pt=Math.sqrt(oe*oe+ge*ge);return ht/=pt,A*(ge/=pt)<G*(oe/=pt)&&(A=-A,G=-G,ht=-ht,Ye=-Ye),{scale:new Ct(Ye,0,0,pt,0,0),translate:new Ct(1,0,0,1,we,Ue),rotate:new Ct(A,G,-G,A,0,0),skew:new Ct(1,0,ht,1,0,0)}},Ct.prototype.toString=function(A){return this.join(" ")},Ct.prototype.inversed=function(){var A=this.sx,G=this.shy,oe=this.shx,ge=this.sy,we=this.tx,Ue=this.ty,Ye=1/(A*ge-G*oe),ht=ge*Ye,pt=-G*Ye,Ft=-oe*Ye,It=A*Ye;return new Ct(ht,pt,Ft,It,-ht*we-Ft*Ue,-pt*we-It*Ue)},Ct.prototype.applyToPoint=function(A){var G=A.x*this.sx+A.y*this.shx+this.tx,oe=A.x*this.shy+A.y*this.sy+this.ty;return new Is(G,oe)},Ct.prototype.applyToRectangle=function(A){var G=this.applyToPoint(A),oe=this.applyToPoint(new Is(A.x+A.w,A.y+A.h));return new yi(G.x,G.y,oe.x-G.x,oe.y-G.y)},Ct.prototype.clone=function(){var A=this.sx,G=this.shy,oe=this.shx,ge=this.sy,we=this.tx,Ue=this.ty;return new Ct(A,G,oe,ge,we,Ue)},b.Matrix=Ct;var qi=b.matrixMult=function(A,G){return G.multiply(A)},va=new Ct(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=va;var ra=function(A,G){if(!zn[A]){var oe=(G instanceof Vd?"Sh":"P")+(Object.keys(Tt).length+1).toString(10);G.id=oe,zn[A]=oe,Tt[oe]=G,xn.publish("addPattern",G)}};b.ShadingPattern=Vd,b.TilingPattern=yf,b.addShadingPattern=function(A,G){return k("addShadingPattern()"),ra(A,G),this},b.beginTilingPattern=function(A){k("beginTilingPattern()"),bi(A.boundingBox[0],A.boundingBox[1],A.boundingBox[2]-A.boundingBox[0],A.boundingBox[3]-A.boundingBox[1],A.matrix)},b.endTilingPattern=function(A,G){k("endTilingPattern()"),G.stream=Je[Q].join(`
`),ra(A,G),xn.publish("endTilingPattern",G),ms.pop().restore()};var sa,nr=b.__private__.newObject=function(){var A=fr();return es(A,!0),A},fr=b.__private__.newObjectDeferred=function(){return me++,be[me]=function(){return ke},me},es=function(A,G){return G=typeof G=="boolean"&&G,be[A]=ke,G&&se(A+" 0 obj"),A},zs=b.__private__.newAdditionalObject=function(){var A={objId:fr(),content:""};return qe.push(A),A},Ts=fr(),$n=fr(),sr=b.__private__.decodeColorString=function(A){var G=A.split(" ");if(G.length!==2||G[1]!=="g"&&G[1]!=="G")G.length!==5||G[4]!=="k"&&G[4]!=="K"||(G=[(1-G[0])*(1-G[3]),(1-G[1])*(1-G[3]),(1-G[2])*(1-G[3]),"r"]);else{var oe=parseFloat(G[0]);G=[oe,oe,oe,"r"]}for(var ge="#",we=0;we<3;we++)ge+=("0"+Math.floor(255*parseFloat(G[we])).toString(16)).slice(-2);return ge},ts=b.__private__.encodeColorString=function(A){var G;typeof A=="string"&&(A={ch1:A});var oe=A.ch1,ge=A.ch2,we=A.ch3,Ue=A.ch4,Ye=A.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof oe=="string"&&oe.charAt(0)!=="#"){var ht=new tC(oe);if(ht.ok)oe=ht.toHex();else if(!/^\d*\.?\d*$/.test(oe))throw new Error('Invalid color "'+oe+'" passed to jsPDF.encodeColorString.')}if(typeof oe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(oe)&&(oe="#"+oe[1]+oe[1]+oe[2]+oe[2]+oe[3]+oe[3]),typeof oe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(oe)){var pt=parseInt(oe.substr(1),16);oe=pt>>16&255,ge=pt>>8&255,we=255&pt}if(ge===void 0||Ue===void 0&&oe===ge&&ge===we)G=typeof oe=="string"?oe+" "+Ye[0]:A.precision===2?I(oe/255)+" "+Ye[0]:P(oe/255)+" "+Ye[0];else if(Ue===void 0||cr(Ue)==="object"){if(Ue&&!isNaN(Ue.a)&&Ue.a===0)return["1.","1.","1.",Ye[1]].join(" ");G=typeof oe=="string"?[oe,ge,we,Ye[1]].join(" "):A.precision===2?[I(oe/255),I(ge/255),I(we/255),Ye[1]].join(" "):[P(oe/255),P(ge/255),P(we/255),Ye[1]].join(" ")}else G=typeof oe=="string"?[oe,ge,we,Ue,Ye[2]].join(" "):A.precision===2?[I(oe),I(ge),I(we),I(Ue),Ye[2]].join(" "):[P(oe),P(ge),P(we),P(Ue),Ye[2]].join(" ");return G},aa=b.__private__.getFilters=function(){return c},Oa=b.__private__.putStream=function(A){var G=(A=A||{}).data||"",oe=A.filters||aa(),ge=A.alreadyAppliedFilters||[],we=A.addLength1||!1,Ue=G.length,Ye=A.objectId,ht=function(R){return R};if(g!==null&&Ye===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&(ht=wr.encryptor(Ye,0));var pt={};oe===!0&&(oe=["FlateEncode"]);var Ft=A.additionalKeyValues||[],It=(pt=Rt.API.processDataByFilters!==void 0?Rt.API.processDataByFilters(G,oe):{data:G,reverseChain:[]}).reverseChain+(Array.isArray(ge)?ge.join(" "):ge.toString());if(pt.data.length!==0&&(Ft.push({key:"Length",value:pt.data.length}),we===!0&&Ft.push({key:"Length1",value:Ue})),It.length!=0)if(It.split("/").length-1==1)Ft.push({key:"Filter",value:It});else{Ft.push({key:"Filter",value:"["+It+"]"});for(var En=0;En<Ft.length;En+=1)if(Ft[En].key==="DecodeParms"){for(var mr=[],rr=0;rr<pt.reverseChain.split("/").length-1;rr+=1)mr.push("null");mr.push(Ft[En].value),Ft[En].value="["+mr.join(" ")+"]"}}se("<<");for(var x=0;x<Ft.length;x++)se("/"+Ft[x].key+" "+Ft[x].value);se(">>"),pt.data.length!==0&&(se("stream"),se(ht(pt.data)),se("endstream"))},fo=b.__private__.putPage=function(A){var G=A.number,oe=A.data,ge=A.objId,we=A.contentsObjId;es(ge,!0),se("<</Type /Page"),se("/Parent "+A.rootDictionaryObjId+" 0 R"),se("/Resources "+A.resourceDictionaryObjId+" 0 R"),se("/MediaBox ["+parseFloat(V(A.mediaBox.bottomLeftX))+" "+parseFloat(V(A.mediaBox.bottomLeftY))+" "+V(A.mediaBox.topRightX)+" "+V(A.mediaBox.topRightY)+"]"),A.cropBox!==null&&se("/CropBox ["+V(A.cropBox.bottomLeftX)+" "+V(A.cropBox.bottomLeftY)+" "+V(A.cropBox.topRightX)+" "+V(A.cropBox.topRightY)+"]"),A.bleedBox!==null&&se("/BleedBox ["+V(A.bleedBox.bottomLeftX)+" "+V(A.bleedBox.bottomLeftY)+" "+V(A.bleedBox.topRightX)+" "+V(A.bleedBox.topRightY)+"]"),A.trimBox!==null&&se("/TrimBox ["+V(A.trimBox.bottomLeftX)+" "+V(A.trimBox.bottomLeftY)+" "+V(A.trimBox.topRightX)+" "+V(A.trimBox.topRightY)+"]"),A.artBox!==null&&se("/ArtBox ["+V(A.artBox.bottomLeftX)+" "+V(A.artBox.bottomLeftY)+" "+V(A.artBox.topRightX)+" "+V(A.artBox.topRightY)+"]"),typeof A.userUnit=="number"&&A.userUnit!==1&&se("/UserUnit "+A.userUnit),xn.publish("putPage",{objId:ge,pageContext:jt[G],pageNumber:G,page:oe}),se("/Contents "+we+" 0 R"),se(">>"),se("endobj");var Ue=oe.join(`
`);return O===D&&(Ue+=`
Q`),es(we,!0),Oa({data:Ue,filters:aa(),objectId:we}),se("endobj"),ge},ei=b.__private__.putPages=function(){var A,G,oe=[];for(A=1;A<=Et;A++)jt[A].objId=fr(),jt[A].contentsObjId=fr();for(A=1;A<=Et;A++)oe.push(fo({number:A,data:Je[A],objId:jt[A].objId,contentsObjId:jt[A].contentsObjId,mediaBox:jt[A].mediaBox,cropBox:jt[A].cropBox,bleedBox:jt[A].bleedBox,trimBox:jt[A].trimBox,artBox:jt[A].artBox,userUnit:jt[A].userUnit,rootDictionaryObjId:Ts,resourceDictionaryObjId:$n}));es(Ts,!0),se("<</Type /Pages");var ge="/Kids [";for(G=0;G<Et;G++)ge+=oe[G]+" 0 R ";se(ge+"]"),se("/Count "+Et),se(">>"),se("endobj"),xn.publish("postPutPages")},ia=function(A){xn.publish("putFont",{font:A,out:se,newObject:nr,putStream:Oa}),A.isAlreadyPutted!==!0&&(A.objectNumber=nr(),se("<<"),se("/Type /Font"),se("/BaseFont /"+gf(A.postScriptName)),se("/Subtype /Type1"),typeof A.encoding=="string"&&se("/Encoding /"+A.encoding),se("/FirstChar 32"),se("/LastChar 255"),se(">>"),se("endobj"))},Hi=function(A){A.objectNumber=nr();var G=[];G.push({key:"Type",value:"/XObject"}),G.push({key:"Subtype",value:"/Form"}),G.push({key:"BBox",value:"["+[V(A.x),V(A.y),V(A.x+A.width),V(A.y+A.height)].join(" ")+"]"}),G.push({key:"Matrix",value:"["+A.matrix.toString()+"]"});var oe=A.pages[1].join(`
`);Oa({data:oe,additionalKeyValues:G,objectId:A.objectNumber}),se("endobj")},wa=function(A,G){G||(G=21);var oe=nr(),ge=(function(Ye,ht){var pt,Ft=[],It=1/(ht-1);for(pt=0;pt<1;pt+=It)Ft.push(pt);if(Ft.push(1),Ye[0].offset!=0){var En={offset:0,color:Ye[0].color};Ye.unshift(En)}if(Ye[Ye.length-1].offset!=1){var mr={offset:1,color:Ye[Ye.length-1].color};Ye.push(mr)}for(var rr="",x=0,R=0;R<Ft.length;R++){for(pt=Ft[R];pt>Ye[x+1].offset;)x++;var z=Ye[x].offset,Z=(pt-z)/(Ye[x+1].offset-z),_e=Ye[x].color,Pe=Ye[x+1].color;rr+=he(Math.round((1-Z)*_e[0]+Z*Pe[0]).toString(16))+he(Math.round((1-Z)*_e[1]+Z*Pe[1]).toString(16))+he(Math.round((1-Z)*_e[2]+Z*Pe[2]).toString(16))}return rr.trim()})(A.colors,G),we=[];we.push({key:"FunctionType",value:"0"}),we.push({key:"Domain",value:"[0.0 1.0]"}),we.push({key:"Size",value:"["+G+"]"}),we.push({key:"BitsPerSample",value:"8"}),we.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),we.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Oa({data:ge,additionalKeyValues:we,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:oe}),se("endobj"),A.objectNumber=nr(),se("<< /ShadingType "+A.type),se("/ColorSpace /DeviceRGB");var Ue="/Coords ["+V(parseFloat(A.coords[0]))+" "+V(parseFloat(A.coords[1]))+" ";A.type===2?Ue+=V(parseFloat(A.coords[2]))+" "+V(parseFloat(A.coords[3])):Ue+=V(parseFloat(A.coords[2]))+" "+V(parseFloat(A.coords[3]))+" "+V(parseFloat(A.coords[4]))+" "+V(parseFloat(A.coords[5])),se(Ue+="]"),A.matrix&&se("/Matrix ["+A.matrix.toString()+"]"),se("/Function "+oe+" 0 R"),se("/Extend [true true]"),se(">>"),se("endobj")},qs=function(A,G){var oe=fr(),ge=nr();G.push({resourcesOid:oe,objectOid:ge}),A.objectNumber=ge;var we=[];we.push({key:"Type",value:"/Pattern"}),we.push({key:"PatternType",value:"1"}),we.push({key:"PaintType",value:"1"}),we.push({key:"TilingType",value:"1"}),we.push({key:"BBox",value:"["+A.boundingBox.map(V).join(" ")+"]"}),we.push({key:"XStep",value:V(A.xStep)}),we.push({key:"YStep",value:V(A.yStep)}),we.push({key:"Resources",value:oe+" 0 R"}),A.matrix&&we.push({key:"Matrix",value:"["+A.matrix.toString()+"]"}),Oa({data:A.stream,additionalKeyValues:we,objectId:A.objectNumber}),se("endobj")},Na=function(A){for(var G in A.objectNumber=nr(),se("<<"),A)switch(G){case"opacity":se("/ca "+I(A[G]));break;case"stroke-opacity":se("/CA "+I(A[G]))}se(">>"),se("endobj")},Fa=function(A){es(A.resourcesOid,!0),se("<<"),se("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var G in se("/Font <<"),Lt)Lt.hasOwnProperty(G)&&(y===!1||y===!0&&w.hasOwnProperty(G))&&se("/"+G+" "+Lt[G].objectNumber+" 0 R");se(">>")})(),(function(){if(Object.keys(Tt).length>0){for(var G in se("/Shading <<"),Tt)Tt.hasOwnProperty(G)&&Tt[G]instanceof Vd&&Tt[G].objectNumber>=0&&se("/"+G+" "+Tt[G].objectNumber+" 0 R");xn.publish("putShadingPatternDict"),se(">>")}})(),(function(G){if(Object.keys(Tt).length>0){for(var oe in se("/Pattern <<"),Tt)Tt.hasOwnProperty(oe)&&Tt[oe]instanceof b.TilingPattern&&Tt[oe].objectNumber>=0&&Tt[oe].objectNumber<G&&se("/"+oe+" "+Tt[oe].objectNumber+" 0 R");xn.publish("putTilingPatternDict"),se(">>")}})(A.objectOid),(function(){if(Object.keys(zt).length>0){var G;for(G in se("/ExtGState <<"),zt)zt.hasOwnProperty(G)&&zt[G].objectNumber>=0&&se("/"+G+" "+zt[G].objectNumber+" 0 R");xn.publish("putGStateDict"),se(">>")}})(),(function(){for(var G in se("/XObject <<"),As)As.hasOwnProperty(G)&&As[G].objectNumber>=0&&se("/"+G+" "+As[G].objectNumber+" 0 R");xn.publish("putXobjectDict"),se(">>")})(),se(">>"),se("endobj")},Tr=function(A){$t[A.fontName]=$t[A.fontName]||{},$t[A.fontName][A.fontStyle]=A.id},yl=function(A,G,oe,ge,we){var Ue={id:"F"+(Object.keys(Lt).length+1).toString(10),postScriptName:A,fontName:G,fontStyle:oe,encoding:ge,isStandardFont:we||!1,metadata:{}};return xn.publish("addFont",{font:Ue,instance:this}),Lt[Ue.id]=Ue,Tr(Ue),Ue.id},oa=b.__private__.pdfEscape=b.pdfEscape=function(A,G){return(function(oe,ge){var we,Ue,Ye,ht,pt,Ft,It,En,mr;if(Ye=(ge=ge||{}).sourceEncoding||"Unicode",pt=ge.outputEncoding,(ge.autoencode||pt)&&Lt[wt].metadata&&Lt[wt].metadata[Ye]&&Lt[wt].metadata[Ye].encoding&&(ht=Lt[wt].metadata[Ye].encoding,!pt&&Lt[wt].encoding&&(pt=Lt[wt].encoding),!pt&&ht.codePages&&(pt=ht.codePages[0]),typeof pt=="string"&&(pt=ht[pt]),pt)){for(It=!1,Ft=[],we=0,Ue=oe.length;we<Ue;we++)(En=pt[oe.charCodeAt(we)])?Ft.push(String.fromCharCode(En)):Ft.push(oe[we]),Ft[we].charCodeAt(0)>>8&&(It=!0);oe=Ft.join("")}for(we=oe.length;It===void 0&&we!==0;)oe.charCodeAt(we-1)>>8&&(It=!0),we--;if(!It)return oe;for(Ft=ge.noBOM?[]:[254,255],we=0,Ue=oe.length;we<Ue;we++){if((mr=(En=oe.charCodeAt(we))>>8)>>8)throw new Error("Character at position "+we+" of string '"+oe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ft.push(mr),Ft.push(En-(mr<<8))}return String.fromCharCode.apply(void 0,Ft)})(A,G).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Va=b.__private__.beginPage=function(A){Je[++Et]=[],jt[Et]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(A[0]),topRightY:Number(A[1])}},bl(Et),ft(Je[Q])},ti=function(A,G){var oe,ge,we;switch(t=G||t,typeof A=="string"&&(oe=E(A.toLowerCase()),Array.isArray(oe)&&(ge=oe[0],we=oe[1])),Array.isArray(A)&&(ge=A[0]*en,we=A[1]*en),isNaN(ge)&&(ge=a[0],we=a[1]),(ge>14400||we>14400)&&(Sr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ge=Math.min(14400,ge),we=Math.min(14400,we)),a=[ge,we],t.substr(0,1)){case"l":we>ge&&(a=[we,ge]);break;case"p":ge>we&&(a=[we,ge])}Va(a),Mt(ca),se(_a),Ea!==0&&se(Ea+" J"),$r!==0&&se($r+" j"),xn.publish("addPage",{pageNumber:Et})},Uo=function(A){A>0&&A<=Et&&(Je.splice(A,1),jt.splice(A,1),Et--,Q>Et&&(Q=Et),this.setPage(Q))},bl=function(A){A>0&&A<=Et&&(Q=A)},vl=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return Je.length-1},oc=function(A,G,oe){var ge,we=void 0;return oe=oe||{},A=A!==void 0?A:Lt[wt].fontName,G=G!==void 0?G:Lt[wt].fontStyle,ge=A.toLowerCase(),$t[ge]!==void 0&&$t[ge][G]!==void 0?we=$t[ge][G]:$t[A]!==void 0&&$t[A][G]!==void 0?we=$t[A][G]:oe.disableWarning===!1&&Sr.warn("Unable to look up font label for font '"+A+"', '"+G+"'. Refer to getFontList() for available fonts."),we||oe.noFallback||(we=$t.times[G])==null&&(we=$t.times.normal),we},ja=b.__private__.putInfo=function(){var A=nr(),G=function(ge){return ge};for(var oe in g!==null&&(G=wr.encryptor(A,0)),se("<<"),se("/Producer ("+oa(G("jsPDF "+Rt.version))+")"),on)on.hasOwnProperty(oe)&&on[oe]&&se("/"+oe.substr(0,1).toUpperCase()+oe.substr(1)+" ("+oa(G(on[oe]))+")");se("/CreationDate ("+oa(G(Ne))+")"),se(">>"),se("endobj")},Cs=b.__private__.putCatalog=function(A){var G=(A=A||{}).rootDictionaryObjId||Ts;switch(nr(),se("<<"),se("/Type /Catalog"),se("/Pages "+G+" 0 R"),ct||(ct="fullwidth"),ct){case"fullwidth":se("/OpenAction [3 0 R /FitH null]");break;case"fullheight":se("/OpenAction [3 0 R /FitV null]");break;case"fullpage":se("/OpenAction [3 0 R /Fit]");break;case"original":se("/OpenAction [3 0 R /XYZ null null 1]");break;default:var oe=""+ct;oe.substr(oe.length-1)==="%"&&(ct=parseInt(ct)/100),typeof ct=="number"&&se("/OpenAction [3 0 R /XYZ null null "+I(ct)+"]")}switch(dn||(dn="continuous"),dn){case"continuous":se("/PageLayout /OneColumn");break;case"single":se("/PageLayout /SinglePage");break;case"two":case"twoleft":se("/PageLayout /TwoColumnLeft");break;case"tworight":se("/PageLayout /TwoColumnRight")}St&&se("/PageMode /"+St),xn.publish("putCatalog"),se(">>"),se("endobj")},Mr=b.__private__.putTrailer=function(){se("trailer"),se("<<"),se("/Size "+(me+1)),se("/Root "+me+" 0 R"),se("/Info "+(me-1)+" 0 R"),g!==null&&se("/Encrypt "+wr.oid+" 0 R"),se("/ID [ <"+ce+"> <"+ce+"> ]"),se(">>")},wn=b.__private__.putHeader=function(){se("%PDF-"+T),se("%")},Gi=b.__private__.putXRef=function(){var A="0000000000";se("xref"),se("0 "+(me+1)),se("0000000000 65535 f ");for(var G=1;G<=me;G++)typeof be[G]=="function"?se((A+be[G]()).slice(-10)+" 00000 n "):be[G]!==void 0?se((A+be[G]).slice(-10)+" 00000 n "):se("0000000000 00000 n ")},Ua=b.__private__.buildDocument=function(){var A;me=0,ke=0,Le=[],be=[],qe=[],Ts=fr(),$n=fr(),ft(Le),xn.publish("buildDocument"),wn(),ei(),(function(){xn.publish("putAdditionalObjects");for(var oe=0;oe<qe.length;oe++){var ge=qe[oe];es(ge.objId,!0),se(ge.content),se("endobj")}xn.publish("postPutAdditionalObjects")})(),A=[],(function(){for(var oe in Lt)Lt.hasOwnProperty(oe)&&(y===!1||y===!0&&w.hasOwnProperty(oe))&&ia(Lt[oe])})(),(function(){var oe;for(oe in zt)zt.hasOwnProperty(oe)&&Na(zt[oe])})(),(function(){for(var oe in As)As.hasOwnProperty(oe)&&Hi(As[oe])})(),(function(oe){var ge;for(ge in Tt)Tt.hasOwnProperty(ge)&&(Tt[ge]instanceof Vd?wa(Tt[ge]):Tt[ge]instanceof yf&&qs(Tt[ge],oe))})(A),xn.publish("putResources"),A.forEach(Fa),Fa({resourcesOid:$n,objectOid:Number.MAX_SAFE_INTEGER}),xn.publish("postPutResources"),g!==null&&(wr.oid=nr(),se("<<"),se("/Filter /Standard"),se("/V "+wr.v),se("/R "+wr.r),se("/U <"+wr.toHexString(wr.U)+">"),se("/O <"+wr.toHexString(wr.O)+">"),se("/P "+wr.P),se(">>"),se("endobj")),ja(),Cs();var G=ke;return Gi(),Mr(),se("startxref"),se(""+G),se("%%EOF"),ft(Je[Q]),Le.join(`
`)},Rn=b.__private__.getBlob=function(A){return new Blob([rn(A)],{type:"application/pdf"})},mo=b.output=b.__private__.output=(sa=function(A,G){switch(typeof(G=G||{})=="string"?G={filename:G}:G.filename=G.filename||"generated.pdf",A){case void 0:return Ua();case"save":b.save(G.filename);break;case"arraybuffer":return rn(Ua());case"blob":return Rn(Ua());case"bloburi":case"bloburl":if(nn.URL!==void 0&&typeof nn.URL.createObjectURL=="function")return nn.URL&&nn.URL.createObjectURL(Rn(Ua()))||void 0;Sr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var oe="",ge=Ua();try{oe=u6(ge)}catch{oe=u6(unescape(encodeURIComponent(ge)))}return"data:application/pdf;filename="+G.filename+";base64,"+oe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(nn)==="[object Window]"){var we="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ue=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';G.pdfObjectUrl&&(we=G.pdfObjectUrl,Ue="");var Ye='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+we+'"'+Ue+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(G)+");<\/script></body></html>",ht=nn.open();return ht!==null&&ht.document.write(Ye),ht}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(nn)==="[object Window]"){var pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(G.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+G.filename+'" width="500px" height="400px" /></body></html>',Ft=nn.open();if(Ft!==null){Ft.document.write(pt);var It=this;Ft.document.documentElement.querySelector("#pdfViewer").onload=function(){Ft.document.title=G.filename,Ft.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(It.output("bloburl"))}}return Ft}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(nn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var En='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",G)+'"></iframe></body></html>',mr=nn.open();if(mr!==null&&(mr.document.write(En),mr.document.title=G.filename),mr||typeof safari>"u")return mr;break;case"datauri":case"dataurl":return nn.document.location.href=this.output("datauristring",G);default:return null}},sa.foo=function(){try{return sa.apply(this,arguments)}catch(oe){var A=oe.stack||"";~A.indexOf(" at ")&&(A=A.split(" at ")[1]);var G="Error in function "+A.split(`
`)[0].split("<")[0]+": "+oe.message;if(!nn.console)throw new Error(G);nn.console.error(G,oe),nn.alert&&alert(G)}},sa.foo.bar=sa,sa.foo),Gr=function(A){return Array.isArray(Bs)===!0&&Bs.indexOf(A)>-1};switch(r){case"pt":en=1;break;case"mm":en=72/25.4;break;case"cm":en=72/2.54;break;case"in":en=72;break;case"px":en=Gr("px_scaling")==1?.75:96/72;break;case"pc":case"em":en=12;break;case"ex":en=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);en=r}var wr=null;ne(),de();var Or=b.__private__.getPageInfo=b.getPageInfo=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:jt[A].objId,pageNumber:A,pageContext:jt[A]}},Bo=b.__private__.getPageInfoByObjId=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var G in jt)if(jt[G].objId===A)break;return Or(G)},nu=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:jt[Q].objId,pageNumber:Q,pageContext:jt[Q]}};b.addPage=function(){return ti.apply(this,arguments),this},b.setPage=function(){return bl.apply(this,arguments),ft.call(this,Je[Q]),this},b.insertPage=function(A){return this.addPage(),this.movePage(Q,A),this},b.movePage=function(A,G){var oe,ge;if(A>G){oe=Je[A],ge=jt[A];for(var we=A;we>G;we--)Je[we]=Je[we-1],jt[we]=jt[we-1];Je[G]=oe,jt[G]=ge,this.setPage(G)}else if(A<G){oe=Je[A],ge=jt[A];for(var Ue=A;Ue<G;Ue++)Je[Ue]=Je[Ue+1],jt[Ue]=jt[Ue+1];Je[G]=oe,jt[G]=ge,this.setPage(G)}return this},b.deletePage=function(){return Uo.apply(this,arguments),this},b.__private__.text=b.text=function(A,G,oe,ge,we){var Ue,Ye,ht,pt,Ft,It,En,mr,rr,x=(ge=ge||{}).scope||this;if(typeof A=="number"&&typeof G=="number"&&(typeof oe=="string"||Array.isArray(oe))){var R=oe;oe=G,G=A,A=R}if(arguments[3]instanceof Ct==0?(ht=arguments[4],pt=arguments[5],cr(En=arguments[3])==="object"&&En!==null||(typeof ht=="string"&&(pt=ht,ht=null),typeof En=="string"&&(pt=En,En=null),typeof En=="number"&&(ht=En,En=null),ge={flags:En,angle:ht,align:pt})):(k("The transform parameter of text() with a Matrix value"),rr=we),isNaN(G)||isNaN(oe)||A==null)throw new Error("Invalid arguments passed to jsPDF.text");if(A.length===0)return x;var z,Z="",_e=typeof ge.lineHeightFactor=="number"?ge.lineHeightFactor:Ki,Pe=x.internal.scaleFactor;function et(qn){return qn=qn.split("	").join(Array(ge.TabLen||9).join(" ")),oa(qn,En)}function Jt(qn){for(var Mn,pr=qn.concat(),Kr=[],Eo=pr.length;Eo--;)typeof(Mn=pr.shift())=="string"?Kr.push(Mn):Array.isArray(qn)&&(Mn.length===1||Mn[1]===void 0&&Mn[2]===void 0)?Kr.push(Mn[0]):Kr.push([Mn[0],Mn[1],Mn[2]]);return Kr}function gr(qn,Mn){var pr;if(typeof qn=="string")pr=Mn(qn)[0];else if(Array.isArray(qn)){for(var Kr,Eo,Ji=qn.concat(),gc=[],gd=Ji.length;gd--;)typeof(Kr=Ji.shift())=="string"?gc.push(Mn(Kr)[0]):Array.isArray(Kr)&&typeof Kr[0]=="string"&&(Eo=Mn(Kr[0],Kr[1],Kr[2]),gc.push([Eo[0],Eo[1],Eo[2]]));pr=gc}return pr}var bn=!1,Kn=!0;if(typeof A=="string")bn=!0;else if(Array.isArray(A)){var Rs=A.concat();Ye=[];for(var Gs,ar=Rs.length;ar--;)(typeof(Gs=Rs.shift())!="string"||Array.isArray(Gs)&&typeof Gs[0]!="string")&&(Kn=!1);bn=Kn}if(bn===!1)throw new Error('Type of text must be string or Array. "'+A+'" is not recognized.');typeof A=="string"&&(A=A.match(/[\r?\n]/)?A.split(/\r\n|\r|\n/g):[A]);var $s=Ge/x.internal.scaleFactor,ai=$s*(_e-1);switch(ge.baseline){case"bottom":oe-=ai;break;case"top":oe+=$s-ai;break;case"hanging":oe+=$s-2*ai;break;case"middle":oe+=$s/2-ai}if((It=ge.maxWidth||0)>0&&(typeof A=="string"?A=x.splitTextToSize(A,It):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(qn,Mn){return qn.concat(x.splitTextToSize(Mn,It))},[]))),Ue={text:A,x:G,y:oe,options:ge,mutex:{pdfEscape:oa,activeFontKey:wt,fonts:Lt,activeFontSize:Ge}},xn.publish("preProcessText",Ue),A=Ue.text,ht=(ge=Ue.options).angle,rr instanceof Ct==0&&ht&&typeof ht=="number"){ht*=Math.PI/180,ge.rotationDirection===0&&(ht=-ht),O===D&&(ht=-ht);var bo=Math.cos(ht),vo=Math.sin(ht);rr=new Ct(bo,vo,-vo,bo,0,0)}else ht&&ht instanceof Ct&&(rr=ht);O!==D||rr||(rr=va),(Ft=ge.charSpace||Sa)!==void 0&&(Z+=V(B(Ft))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(mr=ge.horizontalScale)!==void 0&&(Z+=V(100*mr)+` Tz
`),ge.lang;var Ta=-1,$o=ge.renderingMode!==void 0?ge.renderingMode:ge.stroke,ru=x.internal.getCurrentPageInfo().pageContext;switch($o){case 0:case!1:case"fill":Ta=0;break;case 1:case!0:case"stroke":Ta=1;break;case 2:case"fillThenStroke":Ta=2;break;case 3:case"invisible":Ta=3;break;case 4:case"fillAndAddForClipping":Ta=4;break;case 5:case"strokeAndAddPathForClipping":Ta=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ta=6;break;case 7:case"addToPathForClipping":Ta=7}var fd=ru.usedRenderingMode!==void 0?ru.usedRenderingMode:-1;Ta!==-1?Z+=Ta+` Tr
`:fd!==-1&&(Z+=`0 Tr
`),Ta!==-1&&(ru.usedRenderingMode=Ta),pt=ge.align||"left";var ii,Xi=Ge*_e,Wo=x.internal.pageSize.getWidth(),md=Lt[wt];Ft=ge.charSpace||Sa,It=ge.maxWidth||0,En=Object.assign({autoencode:!0,noBOM:!0},ge.flags);var Qi=[],El=function(qn){return x.getStringUnitWidth(qn,{font:md,charSpace:Ft,fontSize:Ge,doKerning:!1})*Ge/Pe};if(Object.prototype.toString.call(A)==="[object Array]"){var za;Ye=Jt(A),pt!=="left"&&(ii=Ye.map(El));var Ca,wo=0;if(pt==="right"){G-=ii[0],A=[],ar=Ye.length;for(var No=0;No<ar;No++)No===0?(Ca=ps(G),za=ns(oe)):(Ca=B(wo-ii[No]),za=-Xi),A.push([Ye[No],Ca,za]),wo=ii[No]}else if(pt==="center"){G-=ii[0]/2,A=[],ar=Ye.length;for(var Ko=0;Ko<ar;Ko++)Ko===0?(Ca=ps(G),za=ns(oe)):(Ca=B((wo-ii[Ko])/2),za=-Xi),A.push([Ye[Ko],Ca,za]),wo=ii[Ko]}else if(pt==="left"){A=[],ar=Ye.length;for(var su=0;su<ar;su++)A.push(Ye[su])}else if(pt==="justify"&&md.encoding==="Identity-H"){A=[],ar=Ye.length,It=It!==0?It:Wo;for(var au=0,Wr=0;Wr<ar;Wr++)if(za=Wr===0?ns(oe):-Xi,Ca=Wr===0?ps(G):au,Wr<ar-1){var xh=B((It-ii[Wr])/(Ye[Wr].split(" ").length-1)),jo=Ye[Wr].split(" ");A.push([jo[0]+" ",Ca,za]),au=0;for(var _o=1;_o<jo.length;_o++){var Ws=(El(jo[_o-1]+" "+jo[_o])-El(jo[_o]))*Pe+xh;_o==jo.length-1?A.push([jo[_o],Ws,0]):A.push([jo[_o]+" ",Ws,0]),au-=Ws}}else A.push([Ye[Wr],Ca,za]);A.push(["",au,0])}else{if(pt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(A=[],ar=Ye.length,It=It!==0?It:Wo,Wr=0;Wr<ar;Wr++){za=Wr===0?ns(oe):-Xi,Ca=Wr===0?ps(G):0;var Yo=Ye[Wr].split(" ").length-1,iu=Yo>0?(It-ii[Wr])/Yo:0;Wr<ar-1?Qi.push(V(B(iu))):Qi.push(0),A.push([Ye[Wr],Ca,za])}}}(typeof ge.R2L=="boolean"?ge.R2L:Dt)===!0&&(A=gr(A,function(qn,Mn,pr){return[qn.split("").reverse().join(""),Mn,pr]})),Ue={text:A,x:G,y:oe,options:ge,mutex:{pdfEscape:oa,activeFontKey:wt,fonts:Lt,activeFontSize:Ge}},xn.publish("postProcessText",Ue),A=Ue.text,z=Ue.mutex.isHex||!1;var ou=Lt[wt].encoding;ou!=="WinAnsiEncoding"&&ou!=="StandardEncoding"||(A=gr(A,function(qn,Mn,pr){return[et(qn),Mn,pr]})),Ye=Jt(A),A=[];for(var Xo,Qo,So,mc=Array.isArray(Ye[0])?1:0,oi="",Jo=function(qn,Mn,pr){var Kr="";return pr instanceof Ct?(pr=typeof ge.angle=="number"?qi(pr,new Ct(1,0,0,1,qn,Mn)):qi(new Ct(1,0,0,1,qn,Mn),pr),O===D&&(pr=qi(new Ct(1,0,0,-1,0,0),pr)),Kr=pr.join(" ")+` Tm
`):Kr=V(qn)+" "+V(Mn)+` Td
`,Kr},ua=0;ua<Ye.length;ua++){switch(oi="",mc){case 1:So=(z?"<":"(")+Ye[ua][0]+(z?">":")"),Xo=parseFloat(Ye[ua][1]),Qo=parseFloat(Ye[ua][2]);break;case 0:So=(z?"<":"(")+Ye[ua]+(z?">":")"),Xo=ps(G),Qo=ns(oe)}Qi!==void 0&&Qi[ua]!==void 0&&(oi=Qi[ua]+` Tw
`),ua===0?A.push(oi+Jo(Xo,Qo,rr)+So):mc===0?A.push(oi+So):mc===1&&A.push(oi+Jo(Xo,Qo,rr)+So)}A=mc===0?A.join(` Tj
T* `):A.join(` Tj
`),A+=` Tj
`;var Ni=`BT
/`;return Ni+=wt+" "+Ge+` Tf
`,Ni+=V(Ge*_e)+` TL
`,Ni+=ri+`
`,Ni+=Z,Ni+=A,se(Ni+="ET"),w[wt]=!0,x};var lc=b.__private__.clip=b.clip=function(A){return se(A==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return lc("evenodd")},b.__private__.discardPath=b.discardPath=function(){return se("n"),this};var Hs=b.__private__.isValidStyle=function(A){var G=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(A)!==-1&&(G=!0),G};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(A){return Hs(A)&&(f=A),this};var cc=b.__private__.getStyle=b.getStyle=function(A){var G=f;switch(A){case"D":case"S":G="S";break;case"F":G="f";break;case"FD":case"DF":G="B";break;case"f":case"f*":case"B":case"B*":G=A}return G},$i=b.close=function(){return se("h"),this};b.stroke=function(){return se("S"),this},b.fill=function(A){return gs("f",A),this},b.fillEvenOdd=function(A){return gs("f*",A),this},b.fillStroke=function(A){return gs("B",A),this},b.fillStrokeEvenOdd=function(A){return gs("B*",A),this};var gs=function(A,G){cr(G)==="object"?dc(G,A):se(A)},go=function(A){A===null||O===D&&A===void 0||(A=cc(A),se(A))};function uc(A,G,oe,ge,we){var Ue=new yf(G||this.boundingBox,oe||this.xStep,ge||this.yStep,this.gState,we||this.matrix);Ue.stream=this.stream;var Ye=A+"$$"+this.cloneIndex+++"$$";return ra(Ye,Ue),Ue}var dc=function(A,G){var oe=zn[A.key],ge=Tt[oe];if(ge instanceof Vd)se("q"),se(wl(G)),ge.gState&&b.setGState(ge.gState),se(A.matrix.toString()+" cm"),se("/"+oe+" sh"),se("Q");else if(ge instanceof yf){var we=new Ct(1,0,0,-1,0,si());A.matrix&&(we=we.multiply(A.matrix||va),oe=uc.call(ge,A.key,A.boundingBox,A.xStep,A.yStep,we).id),se("q"),se("/Pattern cs"),se("/"+oe+" scn"),ge.gState&&b.setGState(ge.gState),se(G),se("Q")}},wl=function(A){switch(A){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Nl=b.moveTo=function(A,G){return se(V(B(A))+" "+V(ue(G))+" m"),this},Wi=b.lineTo=function(A,G){return se(V(B(A))+" "+V(ue(G))+" l"),this},la=b.curveTo=function(A,G,oe,ge,we,Ue){return se([V(B(A)),V(ue(G)),V(B(oe)),V(ue(ge)),V(B(we)),V(ue(Ue)),"c"].join(" ")),this};b.__private__.line=b.line=function(A,G,oe,ge,we){if(isNaN(A)||isNaN(G)||isNaN(oe)||isNaN(ge)||!Hs(we))throw new Error("Invalid arguments passed to jsPDF.line");return O===L?this.lines([[oe-A,ge-G]],A,G,[1,1],we||"S"):this.lines([[oe-A,ge-G]],A,G,[1,1]).stroke()},b.__private__.lines=b.lines=function(A,G,oe,ge,we,Ue){var Ye,ht,pt,Ft,It,En,mr,rr,x,R,z,Z;if(typeof A=="number"&&(Z=oe,oe=G,G=A,A=Z),ge=ge||[1,1],Ue=Ue||!1,isNaN(G)||isNaN(oe)||!Array.isArray(A)||!Array.isArray(ge)||!Hs(we)||typeof Ue!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Nl(G,oe),Ye=ge[0],ht=ge[1],Ft=A.length,R=G,z=oe,pt=0;pt<Ft;pt++)(It=A[pt]).length===2?(R=It[0]*Ye+R,z=It[1]*ht+z,Wi(R,z)):(En=It[0]*Ye+R,mr=It[1]*ht+z,rr=It[2]*Ye+R,x=It[3]*ht+z,R=It[4]*Ye+R,z=It[5]*ht+z,la(En,mr,rr,x,R,z));return Ue&&$i(),go(we),this},b.path=function(A){for(var G=0;G<A.length;G++){var oe=A[G],ge=oe.c;switch(oe.op){case"m":Nl(ge[0],ge[1]);break;case"l":Wi(ge[0],ge[1]);break;case"c":la.apply(this,ge);break;case"h":$i()}}return this},b.__private__.rect=b.rect=function(A,G,oe,ge,we){if(isNaN(A)||isNaN(G)||isNaN(oe)||isNaN(ge)||!Hs(we))throw new Error("Invalid arguments passed to jsPDF.rect");return O===L&&(ge=-ge),se([V(B(A)),V(ue(G)),V(B(oe)),V(B(ge)),"re"].join(" ")),go(we),this},b.__private__.triangle=b.triangle=function(A,G,oe,ge,we,Ue,Ye){if(isNaN(A)||isNaN(G)||isNaN(oe)||isNaN(ge)||isNaN(we)||isNaN(Ue)||!Hs(Ye))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[oe-A,ge-G],[we-oe,Ue-ge],[A-we,G-Ue]],A,G,[1,1],Ye,!0),this},b.__private__.roundedRect=b.roundedRect=function(A,G,oe,ge,we,Ue,Ye){if(isNaN(A)||isNaN(G)||isNaN(oe)||isNaN(ge)||isNaN(we)||isNaN(Ue)||!Hs(Ye))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ht=4/3*(Math.SQRT2-1);return we=Math.min(we,.5*oe),Ue=Math.min(Ue,.5*ge),this.lines([[oe-2*we,0],[we*ht,0,we,Ue-Ue*ht,we,Ue],[0,ge-2*Ue],[0,Ue*ht,-we*ht,Ue,-we,Ue],[2*we-oe,0],[-we*ht,0,-we,-Ue*ht,-we,-Ue],[0,2*Ue-ge],[0,-Ue*ht,we*ht,-Ue,we,-Ue]],A+we,G,[1,1],Ye,!0),this},b.__private__.ellipse=b.ellipse=function(A,G,oe,ge,we){if(isNaN(A)||isNaN(G)||isNaN(oe)||isNaN(ge)||!Hs(we))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ue=4/3*(Math.SQRT2-1)*oe,Ye=4/3*(Math.SQRT2-1)*ge;return Nl(A+oe,G),la(A+oe,G-Ye,A+Ue,G-ge,A,G-ge),la(A-Ue,G-ge,A-oe,G-Ye,A-oe,G),la(A-oe,G+Ye,A-Ue,G+ge,A,G+ge),la(A+Ue,G+ge,A+oe,G+Ye,A+oe,G),go(we),this},b.__private__.circle=b.circle=function(A,G,oe,ge){if(isNaN(A)||isNaN(G)||isNaN(oe)||!Hs(ge))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(A,G,oe,oe,ge)},b.setFont=function(A,G,oe){return oe&&(G=H(G,oe)),wt=oc(A,G,{disableWarning:!1}),this};var ni=b.__private__.getFont=b.getFont=function(){return Lt[oc.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var A,G,oe={};for(A in $t)if($t.hasOwnProperty(A))for(G in oe[A]=[],$t[A])$t[A].hasOwnProperty(G)&&oe[A].push(G);return oe},b.addFont=function(A,G,oe,ge,we){var Ue=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ue.indexOf(arguments[3])!==-1?we=arguments[3]:arguments[3]&&Ue.indexOf(arguments[3])==-1&&(oe=H(oe,ge)),yl.call(this,A,G,oe,we=we||"Identity-H")};var Ki,ca=n.lineWidth||.200025,po=b.__private__.getLineWidth=b.getLineWidth=function(){return ca},Mt=b.__private__.setLineWidth=b.setLineWidth=function(A){return ca=A,se(V(B(A))+" w"),this};b.__private__.setLineDash=Rt.API.setLineDash=Rt.API.setLineDashPattern=function(A,G){if(A=A||[],G=G||0,isNaN(G)||!Array.isArray(A))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return A=A.map(function(oe){return V(B(oe))}).join(" "),G=V(B(G)),se("["+A+"] "+G+" d"),this};var zo=b.__private__.getLineHeight=b.getLineHeight=function(){return Ge*Ki};b.__private__.getLineHeight=b.getLineHeight=function(){return Ge*Ki};var jl=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(A){return typeof(A=A||1.15)=="number"&&(Ki=A),this},xo=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return Ki};jl(n.lineHeight);var ps=b.__private__.getHorizontalCoordinate=function(A){return B(A)},ns=b.__private__.getVerticalCoordinate=function(A){return O===D?A:jt[Q].mediaBox.topRightY-jt[Q].mediaBox.bottomLeftY-B(A)},qo=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(A){return V(ps(A))},Wn=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(A){return V(ns(A))},_a=n.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return sr(_a)},b.__private__.setStrokeColor=b.setDrawColor=function(A,G,oe,ge){return _a=ts({ch1:A,ch2:G,ch3:oe,ch4:ge,pdfColorType:"draw",precision:2}),se(_a),this};var Ho=n.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return sr(Ho)},b.__private__.setFillColor=b.setFillColor=function(A,G,oe,ge){return Ho=ts({ch1:A,ch2:G,ch3:oe,ch4:ge,pdfColorType:"fill",precision:2}),se(Ho),this};var ri=n.textColor||"0 g",hc=b.__private__.getTextColor=b.getTextColor=function(){return sr(ri)};b.__private__.setTextColor=b.setTextColor=function(A,G,oe,ge){return ri=ts({ch1:A,ch2:G,ch3:oe,ch4:ge,pdfColorType:"text",precision:3}),this};var Sa=n.charSpace,Yi=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(Sa||0)};b.__private__.setCharSpace=b.setCharSpace=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Sa=A,this};var Ea=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(A){var G=b.CapJoinStyles[A];if(G===void 0)throw new Error("Line cap style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ea=G,se(G+" J"),this};var $r=0;b.__private__.setLineJoin=b.setLineJoin=function(A){var G=b.CapJoinStyles[A];if(G===void 0)throw new Error("Line join style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $r=G,se(G+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(A){if(A=A||0,isNaN(A))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return se(V(B(A))+" M"),this},b.GState=Cx,b.setGState=function(A){(A=typeof A=="string"?zt[qt[A]]:xi(null,A)).equals(Gn)||(se("/"+A.id+" gs"),Gn=A)};var xi=function(A,G){if(!A||!qt[A]){var oe=!1;for(var ge in zt)if(zt.hasOwnProperty(ge)&&zt[ge].equals(G)){oe=!0;break}if(oe)G=zt[ge];else{var we="GS"+(Object.keys(zt).length+1).toString(10);zt[we]=G,G.id=we}return A&&(qt[A]=G.id),xn.publish("addGState",G),G}};b.addGState=function(A,G){return xi(A,G),this},b.saveGraphicsState=function(){return se("q"),an.push({key:wt,size:Ge,color:ri}),this},b.restoreGraphicsState=function(){se("Q");var A=an.pop();return wt=A.key,Ge=A.size,ri=A.color,Gn=null,this},b.setCurrentTransformationMatrix=function(A){return se(A.toString()+" cm"),this},b.comment=function(A){return se("#"+A),this};var Is=function(A,G){var oe=A||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return oe},set:function(Ue){isNaN(Ue)||(oe=parseFloat(Ue))}});var ge=G||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ge},set:function(Ue){isNaN(Ue)||(ge=parseFloat(Ue))}});var we="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return we},set:function(Ue){we=Ue.toString()}}),this},yi=function(A,G,oe,ge){Is.call(this,A,G),this.type="rect";var we=oe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return we},set:function(Ye){isNaN(Ye)||(we=parseFloat(Ye))}});var Ue=ge||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ue},set:function(Ye){isNaN(Ye)||(Ue=parseFloat(Ye))}}),this},yo=function(){this.page=Et,this.currentPage=Q,this.pages=Je.slice(0),this.pagesContext=jt.slice(0),this.x=Nt,this.y=Er,this.matrix=ln,this.width=Ba(Q),this.height=_l(Q),this.outputDestination=at,this.id="",this.objectNumber=-1};yo.prototype.restore=function(){Et=this.page,Q=this.currentPage,jt=this.pagesContext,Je=this.pages,Nt=this.x,Er=this.y,ln=this.matrix,Go(Q,this.width),Aa(Q,this.height),at=this.outputDestination};var bi=function(A,G,oe,ge,we){ms.push(new yo),Et=Q=0,Je=[],Nt=A,Er=G,ln=we,Va([oe,ge])};for(var vi in b.beginFormObject=function(A,G,oe,ge,we){return bi(A,G,oe,ge,we),this},b.endFormObject=function(A){return(function(G){if(pi[G])ms.pop().restore();else{var oe=new yo,ge="Xo"+(Object.keys(As).length+1).toString(10);oe.id=ge,pi[G]=ge,As[ge]=oe,xn.publish("addFormObject",oe),ms.pop().restore()}})(A),this},b.doFormObject=function(A,G){var oe=As[pi[A]];return se("q"),se(G.toString()+" cm"),se("/"+oe.id+" Do"),se("Q"),this},b.getFormObject=function(A){var G=As[pi[A]];return{x:G.x,y:G.y,width:G.width,height:G.height,matrix:G.matrix}},b.save=function(A,G){return A=A||"generated.pdf",(G=G||{}).returnPromise=G.returnPromise||!1,G.returnPromise===!1?(Ld(Rn(Ua()),A),typeof Ld.unload=="function"&&nn.setTimeout&&setTimeout(Ld.unload,911),this):new Promise(function(oe,ge){try{var we=Ld(Rn(Ua()),A);typeof Ld.unload=="function"&&nn.setTimeout&&setTimeout(Ld.unload,911),oe(we)}catch(Ue){ge(Ue.message)}})},Rt.API)Rt.API.hasOwnProperty(vi)&&(vi==="events"&&Rt.API.events.length?(function(A,G){var oe,ge,we;for(we=G.length-1;we!==-1;we--)oe=G[we][0],ge=G[we][1],A.subscribe.apply(A,[oe].concat(typeof ge=="function"?[ge]:ge))})(xn,Rt.API.events):b[vi]=Rt.API[vi]);function Ba(A){return jt[A].mediaBox.topRightX-jt[A].mediaBox.bottomLeftX}function Go(A,G){jt[A].mediaBox.topRightX=G+jt[A].mediaBox.bottomLeftX}function _l(A){return jt[A].mediaBox.topRightY-jt[A].mediaBox.bottomLeftY}function Aa(A,G){jt[A].mediaBox.topRightY=G+jt[A].mediaBox.bottomLeftY}var wi=b.getPageWidth=function(A){return Ba(A=A||Q)/en},fc=b.setPageWidth=function(A,G){Go(A,G*en)},si=b.getPageHeight=function(A){return _l(A=A||Q)/en},Sl=b.setPageHeight=function(A,G){Aa(A,G*en)};return b.internal={pdfEscape:oa,getStyle:cc,getFont:ni,getFontSize:lt,getCharSpace:Yi,getTextColor:hc,getLineHeight:zo,getLineHeightFactor:xo,getLineWidth:po,write:st,getHorizontalCoordinate:ps,getVerticalCoordinate:ns,getCoordinateString:qo,getVerticalCoordinateString:Wn,collections:{},newObject:nr,newAdditionalObject:zs,newObjectDeferred:fr,newObjectDeferredBegin:es,getFilters:aa,putStream:Oa,events:xn,scaleFactor:en,pageSize:{getWidth:function(){return wi(Q)},setWidth:function(A){fc(Q,A)},getHeight:function(){return si(Q)},setHeight:function(A){Sl(Q,A)}},encryptionOptions:g,encryption:wr,getEncryptor:function(A){return g!==null?wr.encryptor(A,0):function(G){return G}},output:mo,getNumberOfPages:vl,get pages(){return Je},out:se,f2:I,f3:P,getPageInfo:Or,getPageInfoByObjId:Bo,getCurrentPageInfo:nu,getPDFVersion:S,Point:Is,Rectangle:yi,Matrix:Ct,hasHotfix:Gr},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return wi(Q)},set:function(A){fc(Q,A)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return si(Q)},set:function(A){Sl(Q,A)},enumerable:!0,configurable:!0}),(function(A){for(var G=0,oe=Pt.length;G<oe;G++){var ge=yl.call(this,A[G][0],A[G][1],A[G][2],Pt[G][3],!0);y===!1&&(w[ge]=!0);var we=A[G][0].split("-");Tr({id:ge,fontName:we[0],fontStyle:we[1]||""})}xn.publish("addFonts",{fonts:Lt,dictionary:$t})}).call(b,Pt),wt="F1",ti(a,t),xn.publish("initialized"),b}mf.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},mf.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},mf.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},mf.prototype.processOwnerPassword=function(n,e){return I2(C2(e).substr(0,5),n)},mf.prototype.encryptor=function(n,e){var t=C2(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return I2(t,r)}},Cx.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||cr(n)!==cr(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Rt.API={events:[]},Rt.version="3.0.4";var cs=Rt.API,fw=1,ph=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},of=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},mn=function(n){return n.toFixed(2)},Mu=function(n){return n.toFixed(5)};cs.__acroform__={};var zi=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},m6=function(n){return n*fw},Bl=function(n){var e=new aC,t=yt.internal.getHeight(n)||0,r=yt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(mn(r)),Number(mn(t))],e},Qq=cs.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},Jq=cs.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},Zq=cs.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},vs=cs.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Zq(n,e-1)},ws=cs.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Qq(n,e-1)},Ns=cs.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Jq(n,e-1)},eH=cs.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,a=n[0],o=n[1],c=n[2],u=n[3],h={};return h.lowerLeft_X=t(a)||0,h.lowerLeft_Y=r(o+u)||0,h.upperRight_X=t(a+c)||0,h.upperRight_Y=r(o)||0,[Number(mn(h.lowerLeft_X)),Number(mn(h.lowerLeft_Y)),Number(mn(h.upperRight_X)),Number(mn(h.upperRight_Y))]},tH=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=R2(n,t),a=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+a+" "+mn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Bl(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},R2=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=n.multiline?a.map(function(I){return I.split(`
`)}):a.map(function(I){return[I]});var o=t,c=yt.internal.getHeight(n)||0;c=c<0?-c:c;var u=yt.internal.getWidth(n)||0;u=u<0?-u:u;var h=function(I,P,B){if(I+1<a.length){var ue=P+" "+a[I+1][0];return j0(ue,n,B).width<=u-4}return!1};o++;e:for(;o>0;){e="",o--;var f,g,y=j0("3",n,o).height,w=n.multiline?c-o:(c-y)/2,b=w+=2,T=0,S=0,j=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+j0(e,n,o=12).width+", FieldWidth:"+u+`
`;break}for(var E="",L=0,D=0;D<a.length;D++)if(a.hasOwnProperty(D)){var O=!1;if(a[D].length!==1&&j!==a[D].length-1){if((y+2)*(L+2)+2>c)continue e;E+=a[D][j],O=!0,S=D,D--}else{E=(E+=a[D][j]+" ").substr(E.length-1)==" "?E.substr(0,E.length-1):E;var te=parseInt(D),ae=h(te,E,o),H=D>=a.length-1;if(ae&&!H){E+=" ",j=0;continue}if(ae||H){if(H)S=te;else if(n.multiline&&(y+2)*(L+2)+2>c)continue e}else{if(!n.multiline||(y+2)*(L+2)+2>c)continue e;S=te}}for(var V="",k=T;k<=S;k++){var F=a[k];if(n.multiline){if(k===S){V+=F[j]+" ",j=(j+1)%F.length;continue}if(k===T){V+=F[F.length-1]+" ";continue}}V+=F[0]+" "}switch(V=V.substr(V.length-1)==" "?V.substr(0,V.length-1):V,g=j0(V,n,o).width,n.textAlign){case"right":f=u-g-2;break;case"center":f=(u-g)/2;break;default:f=2}e+=mn(f)+" "+mn(b)+` Td
`,e+="("+ph(V)+`) Tj
`,e+=-mn(f)+` 0 Td
`,b=-(o+2),g=0,T=O?S:S+1,L++,E=""}break}return r.text=e,r.fontSize=o,r},j0=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},nH={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},rH=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},sH=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(pl.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(nH)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");fw=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new iC,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];o.objId=void 0,o.hasAnnotation&&rH(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,a){var o=!r;for(var c in r||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(c)){var u=r[c],h=[],f=u.Rect;if(u.Rect&&(u.Rect=eH(u.Rect,a)),a.internal.newObjectDeferredBegin(u.objId,!0),u.DA=yt.createDefaultAppearanceStream(u),cr(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(h=u.getKeyValueListForStream()),u.Rect=f,u.hasAppearanceStream&&!u.appearanceStreamContent){var g=tH(u);h.push({key:"AP",value:"<</N "+g+">>"}),a.internal.acroformPlugin.xForms.push(g)}if(u.appearanceStreamContent){var y="";for(var w in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(w)){var b=u.appearanceStreamContent[w];if(y+="/"+w+" ",y+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var c in b)if(b.hasOwnProperty(c)){var T=b[c];typeof T=="function"&&(T=T.call(a,u)),y+="/"+c+" "+T+" ",a.internal.acroformPlugin.xForms.indexOf(T)>=0||a.internal.acroformPlugin.xForms.push(T)}}else typeof(T=b)=="function"&&(T=T.call(a,u)),y+="/"+c+" "+T,a.internal.acroformPlugin.xForms.indexOf(T)>=0||a.internal.acroformPlugin.xForms.push(T);y+=">>"}h.push({key:"AP",value:`<<
`+y+">>"})}a.internal.putStream({additionalKeyValues:h,objectId:u.objId}),a.internal.out("endobj")}o&&(function(S,j){for(var E in S)if(S.hasOwnProperty(E)){var L=E,D=S[E];j.internal.newObjectDeferredBegin(D.objId,!0),cr(D)==="object"&&typeof D.putStream=="function"&&D.putStream(),delete S[L]}})(a.internal.acroformPlugin.xForms,a)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},sC=cs.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(c){return c};if(Array.isArray(n)){for(var a="[",o=0;o<n.length;o++)switch(o!==0&&(a+=" "),cr(n[o])){case"boolean":case"number":case"object":a+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),a+="("+ph(r(n[o].toString()))+")"):a+=n[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},N1=function(n,e,t){var r=function(a){return a};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+ph(r(n))+")"},Wl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Wl.prototype.toString=function(){return this.objId+" 0 R"},Wl.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Wl.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],a=this[r];a&&(Array.isArray(a)?n.push({key:r,value:sC(a,this.objId,this.scope)}):a instanceof Wl?(a.scope=this.scope,n.push({key:r,value:a.objId+" 0 R"})):typeof a!="function"&&n.push({key:r,value:a}))}return n};var aC=function(){Wl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};zi(aC,Wl);var iC=function(){Wl.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+ph(t(n))+")"}},set:function(t){n=t}})};zi(iC,Wl);var pl=function n(){Wl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(E){if(isNaN(E))throw new Error('Invalid value "'+E+'" for attribute F supplied.');e=E}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!vs(e,3)},set:function(E){E?this.F=ws(e,3):this.F=Ns(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(E){if(isNaN(E))throw new Error('Invalid value "'+E+'" for attribute Ff supplied.');t=E}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(E){r=E!==void 0?E:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(E){r[0]=E}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(E){r[1]=E}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(E){r[2]=E}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(E){r[3]=E}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(E){switch(E){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=E;break;default:throw new Error('Invalid value "'+E+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Ix)return;o="FieldObject"+n.FieldNum++}var E=function(L){return L};return this.scope&&(E=this.scope.internal.getEncryptor(this.objId)),"("+ph(E(o))+")"},set:function(E){o=E.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(E){o=E}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(E){c=E}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(E){u=E}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(E){h=E}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/fw:f},set:function(E){f=E}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(E){g=E}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof Ix||this instanceof Kd))return N1(y,this.objId,this.scope)},set:function(E){E=E.toString(),y=E}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof xa==0?N1(w,this.objId,this.scope):w},set:function(E){E=E.toString(),w=this instanceof xa==0?E.substr(0,1)==="("?of(E.substr(1,E.length-2)):of(E):E}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof xa==1?of(w.substr(1,w.length-1)):w},set:function(E){E=E.toString(),w=this instanceof xa==1?"/"+E:E}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(E){this.V=E}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof xa==0?N1(b,this.objId,this.scope):b},set:function(E){E=E.toString(),b=this instanceof xa==0?E.substr(0,1)==="("?of(E.substr(1,E.length-2)):of(E):E}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof xa==1?of(b.substr(1,b.length-1)):b},set:function(E){E=E.toString(),b=this instanceof xa==1?"/"+E:E}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var T,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(E){E=!!E,S=E}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(T)return T},set:function(E){T=E}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!vs(this.Ff,1)},set:function(E){E?this.Ff=ws(this.Ff,1):this.Ff=Ns(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!vs(this.Ff,2)},set:function(E){E?this.Ff=ws(this.Ff,2):this.Ff=Ns(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!vs(this.Ff,3)},set:function(E){E?this.Ff=ws(this.Ff,3):this.Ff=Ns(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(E){if([0,1,2].indexOf(E)===-1)throw new Error('Invalid value "'+E+'" for attribute Q supplied.');j=E}}),Object.defineProperty(this,"textAlign",{get:function(){var E;switch(j){case 0:default:E="left";break;case 1:E="center";break;case 2:E="right"}return E},configurable:!0,enumerable:!0,set:function(E){switch(E){case"right":case 2:j=2;break;case"center":case 1:j=1;break;default:j=0}}})};zi(pl,Wl);var Sf=function(){pl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return sC(e,this.objId,this.scope)},set:function(t){var r,a;a=[],typeof(r=t)=="string"&&(a=(function(o,c,u){u||(u=1);for(var h,f=[];h=c.exec(o);)f.push(h[u]);return f})(r,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!vs(this.Ff,18)},set:function(t){t?this.Ff=ws(this.Ff,18):this.Ff=Ns(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!vs(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=ws(this.Ff,19):this.Ff=Ns(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!vs(this.Ff,20)},set:function(t){t?(this.Ff=ws(this.Ff,20),e.sort()):this.Ff=Ns(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!vs(this.Ff,22)},set:function(t){t?this.Ff=ws(this.Ff,22):this.Ff=Ns(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!vs(this.Ff,23)},set:function(t){t?this.Ff=ws(this.Ff,23):this.Ff=Ns(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!vs(this.Ff,27)},set:function(t){t?this.Ff=ws(this.Ff,27):this.Ff=Ns(this.Ff,27)}}),this.hasAppearanceStream=!1};zi(Sf,pl);var Ef=function(){Sf.call(this),this.fontName="helvetica",this.combo=!1};zi(Ef,Sf);var Af=function(){Ef.call(this),this.combo=!0};zi(Af,Ef);var G0=function(){Af.call(this),this.edit=!0};zi(G0,Af);var xa=function(){pl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!vs(this.Ff,15)},set:function(t){t?this.Ff=ws(this.Ff,15):this.Ff=Ns(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!vs(this.Ff,16)},set:function(t){t?this.Ff=ws(this.Ff,16):this.Ff=Ns(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!vs(this.Ff,17)},set:function(t){t?this.Ff=ws(this.Ff,17):this.Ff=Ns(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!vs(this.Ff,26)},set:function(t){t?this.Ff=ws(this.Ff,26):this.Ff=Ns(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,a=[];for(r in a.push("<<"),e)a.push("/"+r+" ("+ph(t(e[r]))+")");return a.push(">>"),a.join(`
`)}},set:function(t){cr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};zi(xa,pl);var $0=function(){xa.call(this),this.pushButton=!0};zi($0,xa);var Tf=function(){xa.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};zi(Tf,xa);var Ix=function(){var n,e;pl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(u){return u};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,c=[];for(o in c.push("<<"),r)c.push("/"+o+" ("+ph(a(r[o]))+")");return c.push(">>"),c.join(`
`)},set:function(a){cr(a)==="object"&&(r=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(a){typeof a=="string"&&(r.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=yt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};zi(Ix,pl),Tf.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Tf.prototype.createOption=function(n){var e=new Ix;return e.Parent=this,e.optionName=n,this.Kids.push(e),aH.call(this.scope,e),e};var W0=function(){xa.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=yt.CheckBox.createAppearanceStream()};zi(W0,xa);var Kd=function(){pl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!vs(this.Ff,13)},set:function(e){e?this.Ff=ws(this.Ff,13):this.Ff=Ns(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!vs(this.Ff,21)},set:function(e){e?this.Ff=ws(this.Ff,21):this.Ff=Ns(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!vs(this.Ff,23)},set:function(e){e?this.Ff=ws(this.Ff,23):this.Ff=Ns(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!vs(this.Ff,24)},set:function(e){e?this.Ff=ws(this.Ff,24):this.Ff=Ns(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!vs(this.Ff,25)},set:function(e){e?this.Ff=ws(this.Ff,25):this.Ff=Ns(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!vs(this.Ff,26)},set:function(e){e?this.Ff=ws(this.Ff,26):this.Ff=Ns(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};zi(Kd,pl);var K0=function(){Kd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!vs(this.Ff,14)},set:function(n){n?this.Ff=ws(this.Ff,14):this.Ff=Ns(this.Ff,14)}}),this.password=!0};zi(K0,Kd);var yt={CheckBox:{createAppearanceStream:function(){return{N:{On:yt.CheckBox.YesNormal},D:{On:yt.CheckBox.YesPushDown,Off:yt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Bl(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,a=n.scope.__private__.encodeColorString(n.color),o=R2(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+mn(yt.internal.getWidth(n))+" "+mn(yt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+mn(o.fontSize)+" Tf "+a),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Bl(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),a=[],o=yt.internal.getHeight(n),c=yt.internal.getWidth(n),u=R2(n,n.caption);return a.push("1 g"),a.push("0 0 "+mn(c)+" "+mn(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+mn(c-1)+" "+mn(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+mn(u.fontSize)+" Tf "+r),a.push(u.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(n){var e=Bl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+mn(yt.internal.getWidth(n))+" "+mn(yt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:yt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=yt.RadioButton.Circle.YesNormal,e.D[n]=yt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Bl(n);e.scope=n.scope;var t=[],r=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var a=yt.internal.Bezier_C,o=Number((r*a).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Mu(yt.internal.getWidth(n)/2)+" "+Mu(yt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Bl(n);e.scope=n.scope;var t=[],r=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),o=Number((a*yt.internal.Bezier_C).toFixed(5)),c=Number((r*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Mu(yt.internal.getWidth(n)/2)+" "+Mu(yt.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Mu(yt.internal.getWidth(n)/2)+" "+Mu(yt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+c+" "+c+" "+r+" 0 "+r+" c"),t.push("-"+c+" "+r+" -"+r+" "+c+" -"+r+" 0 c"),t.push("-"+r+" -"+c+" -"+c+" -"+r+" 0 -"+r+" c"),t.push(c+" -"+r+" "+r+" -"+c+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Bl(n);e.scope=n.scope;var t=[],r=yt.internal.getWidth(n)<=yt.internal.getHeight(n)?yt.internal.getWidth(n)/4:yt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),o=Number((a*yt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Mu(yt.internal.getWidth(n)/2)+" "+Mu(yt.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:yt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=yt.RadioButton.Cross.YesNormal,e.D[n]=yt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Bl(n);e.scope=n.scope;var t=[],r=yt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+mn(yt.internal.getWidth(n)-2)+" "+mn(yt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(mn(r.x1.x)+" "+mn(r.x1.y)+" m"),t.push(mn(r.x2.x)+" "+mn(r.x2.y)+" l"),t.push(mn(r.x4.x)+" "+mn(r.x4.y)+" m"),t.push(mn(r.x3.x)+" "+mn(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Bl(n);e.scope=n.scope;var t=yt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+mn(yt.internal.getWidth(n))+" "+mn(yt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+mn(yt.internal.getWidth(n)-2)+" "+mn(yt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(mn(t.x1.x)+" "+mn(t.x1.y)+" m"),r.push(mn(t.x2.x)+" "+mn(t.x2.y)+" l"),r.push(mn(t.x4.x)+" "+mn(t.x4.y)+" m"),r.push(mn(t.x3.x)+" "+mn(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Bl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+mn(yt.internal.getWidth(n))+" "+mn(yt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};yt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=yt.internal.getWidth(n),t=yt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},yt.internal.getWidth=function(n){var e=0;return cr(n)==="object"&&(e=m6(n.Rect[2])),e},yt.internal.getHeight=function(n){var e=0;return cr(n)==="object"&&(e=m6(n.Rect[3])),e};var aH=cs.addField=function(n){if(sH(this,n),!(n instanceof pl))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};cs.AcroFormChoiceField=Sf,cs.AcroFormListBox=Ef,cs.AcroFormComboBox=Af,cs.AcroFormEditBox=G0,cs.AcroFormButton=xa,cs.AcroFormPushButton=$0,cs.AcroFormRadioButton=Tf,cs.AcroFormCheckBox=W0,cs.AcroFormTextField=Kd,cs.AcroFormPasswordField=K0,cs.AcroFormAppearance=yt,cs.AcroForm={ChoiceField:Sf,ListBox:Ef,ComboBox:Af,EditBox:G0,Button:xa,PushButton:$0,RadioButton:Tf,CheckBox:W0,TextField:Kd,PasswordField:K0,Appearance:yt},Rt.AcroForm={ChoiceField:Sf,ListBox:Ef,ComboBox:Af,EditBox:G0,Button:xa,PushButton:$0,RadioButton:Tf,CheckBox:W0,TextField:Kd,PasswordField:K0,Appearance:yt};Rt.AcroForm;function oC(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=n.__addimage__.getImageFileTypeByImageData=function(I,P){var B,ue,Ne,ce,pe,de=t;if((P=P||t)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(ae(I))for(pe in r)for(Ne=r[pe],B=0;B<Ne.length;B+=1){for(ce=!0,ue=0;ue<Ne[B].length;ue+=1)if(Ne[B][ue]!==void 0&&Ne[B][ue]!==I[ue]){ce=!1;break}if(ce===!0){de=pe;break}}else for(pe in r)for(Ne=r[pe],B=0;B<Ne.length;B+=1){for(ce=!0,ue=0;ue<Ne[B].length;ue+=1)if(Ne[B][ue]!==void 0&&Ne[B][ue]!==I.charCodeAt(ue)){ce=!1;break}if(ce===!0){de=pe;break}}return de===t&&P!==t&&(de=P),de},o=function I(P){for(var B=this.internal.write,ue=this.internal.putStream,Ne=(0,this.internal.getFilters)();Ne.indexOf("FlateEncode")!==-1;)Ne.splice(Ne.indexOf("FlateEncode"),1);P.objectId=this.internal.newObject();var ce=[];if(ce.push({key:"Type",value:"/XObject"}),ce.push({key:"Subtype",value:"/Image"}),ce.push({key:"Width",value:P.width}),ce.push({key:"Height",value:P.height}),P.colorSpace===E.INDEXED?ce.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(P.palette.length/3-1)+" "+("sMask"in P&&P.sMask!==void 0?P.objectId+2:P.objectId+1)+" 0 R]"}):(ce.push({key:"ColorSpace",value:"/"+P.colorSpace}),P.colorSpace===E.DEVICE_CMYK&&ce.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ce.push({key:"BitsPerComponent",value:P.bitsPerComponent}),"decodeParameters"in P&&P.decodeParameters!==void 0&&ce.push({key:"DecodeParms",value:"<<"+P.decodeParameters+">>"}),"transparency"in P&&Array.isArray(P.transparency)&&P.transparency.length>0){for(var pe="",de=0,Se=P.transparency.length;de<Se;de++)pe+=P.transparency[de]+" "+P.transparency[de]+" ";ce.push({key:"Mask",value:"["+pe+"]"})}P.sMask!==void 0&&ce.push({key:"SMask",value:P.objectId+1+" 0 R"});var ze=P.filter!==void 0?["/"+P.filter]:void 0;if(ue({data:P.data,additionalKeyValues:ce,alreadyAppliedFilters:ze,objectId:P.objectId}),B("endobj"),"sMask"in P&&P.sMask!==void 0){var ne,q=(ne=P.sMaskBitsPerComponent)!==null&&ne!==void 0?ne:P.bitsPerComponent,Q={width:P.width,height:P.height,colorSpace:"DeviceGray",bitsPerComponent:q,data:P.sMask};"filter"in P&&(Q.decodeParameters="/Predictor ".concat(P.predictor," /Colors 1 /BitsPerComponent ").concat(q," /Columns ").concat(P.width),Q.filter=P.filter),I.call(this,Q)}if(P.colorSpace===E.INDEXED){var re=this.internal.newObject();ue({data:V(new Uint8Array(P.palette)),objectId:re}),B("endobj")}},c=function(){var I=this.internal.collections[e+"images"];for(var P in I)o.call(this,I[P])},u=function(){var I,P=this.internal.collections[e+"images"],B=this.internal.write;for(var ue in P)B("/I"+(I=P[ue]).index,I.objectId,"0","R")},h=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",c),this.internal.events.subscribe("putXobjectDict",u))},f=function(){var I=this.internal.collections[e+"images"];return h.call(this),I},g=function(){return Object.keys(this.internal.collections[e+"images"]).length},y=function(I){return typeof n["process"+I.toUpperCase()]=="function"},w=function(I){return cr(I)==="object"&&I.nodeType===1},b=function(I,P){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var B=""+I.getAttribute("src");if(B.indexOf("data:image/")===0)return H0(unescape(B).split("base64,").pop());var ue=n.loadFile(B,!0);if(ue!==void 0)return ue}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var Ne;switch(P){case"PNG":Ne="image/png";break;case"WEBP":Ne="image/webp";break;default:Ne="image/jpeg"}return H0(I.toDataURL(Ne,1).split("base64,").pop())}},T=function(I){var P=this.internal.collections[e+"images"];if(P){for(var B in P)if(I===P[B].alias)return P[B]}},S=function(I,P,B){return I||P||(I=-96,P=-96),I<0&&(I=-1*B.width*72/I/this.internal.scaleFactor),P<0&&(P=-1*B.height*72/P/this.internal.scaleFactor),I===0&&(I=P*B.width/B.height),P===0&&(P=I*B.height/B.width),[I,P]},j=function(I,P,B,ue,Ne,ce){var pe=S.call(this,B,ue,Ne),de=this.internal.getCoordinateString,Se=this.internal.getVerticalCoordinateString,ze=f.call(this);if(B=pe[0],ue=pe[1],ze[Ne.index]=Ne,ce){ce*=Math.PI/180;var ne=Math.cos(ce),q=Math.sin(ce),Q=function(he){return he.toFixed(4)},re=[Q(ne),Q(q),Q(-1*q),Q(ne),0,0,"cm"]}this.internal.write("q"),ce?(this.internal.write([1,"0","0",1,de(I),Se(P+ue),"cm"].join(" ")),this.internal.write(re.join(" ")),this.internal.write([de(B),"0","0",de(ue),"0","0","cm"].join(" "))):this.internal.write([de(B),"0","0",de(ue),de(I),Se(P+ue),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ne.index+" Do"),this.internal.write("Q")},E=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var L=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=n.__addimage__.sHashCode=function(I){var P,B,ue=0;if(typeof I=="string")for(B=I.length,P=0;P<B;P++)ue=(ue<<5)-ue+I.charCodeAt(P),ue|=0;else if(ae(I))for(B=I.byteLength/2,P=0;P<B;P++)ue=(ue<<5)-ue+I[P],ue|=0;return ue},O=n.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var P=!0;return I.length===0&&(P=!1),I.length%4!=0&&(P=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(P=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(P=!1),P},te=n.__addimage__.extractImageFromDataUrl=function(I){if(I==null||!(I=I.trim()).startsWith("data:"))return null;var P=I.indexOf(",");return P<0?null:I.substring(0,P).trim().endsWith("base64")?I.substring(P+1):null};n.__addimage__.isArrayBuffer=function(I){return I instanceof ArrayBuffer};var ae=n.__addimage__.isArrayBufferView=function(I){return I instanceof Int8Array||I instanceof Uint8Array||I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array},H=n.__addimage__.binaryStringToUint8Array=function(I){for(var P=I.length,B=new Uint8Array(P),ue=0;ue<P;ue++)B[ue]=I.charCodeAt(ue);return B},V=n.__addimage__.arrayBufferToBinaryString=function(I){for(var P="",B=ae(I)?I:new Uint8Array(I),ue=0;ue<B.length;ue+=8192)P+=String.fromCharCode.apply(null,B.subarray(ue,ue+8192));return P};n.addImage=function(){var I,P,B,ue,Ne,ce,pe,de,Se;if(typeof arguments[1]=="number"?(P=t,B=arguments[1],ue=arguments[2],Ne=arguments[3],ce=arguments[4],pe=arguments[5],de=arguments[6],Se=arguments[7]):(P=arguments[1],B=arguments[2],ue=arguments[3],Ne=arguments[4],ce=arguments[5],pe=arguments[6],de=arguments[7],Se=arguments[8]),cr(I=arguments[0])==="object"&&!w(I)&&"imageData"in I){var ze=I;I=ze.imageData,P=ze.format||P||t,B=ze.x||B||0,ue=ze.y||ue||0,Ne=ze.w||ze.width||Ne,ce=ze.h||ze.height||ce,pe=ze.alias||pe,de=ze.compression||de,Se=ze.rotation||ze.angle||Se}var ne=this.internal.getFilters();if(de===void 0&&ne.indexOf("FlateEncode")!==-1&&(de="SLOW"),isNaN(B)||isNaN(ue))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var q=k.call(this,I,P,pe,de);return j.call(this,B,ue,Ne,ce,q,Se),this};var k=function(I,P,B,ue){var Ne,ce,pe;if(typeof I=="string"&&a(I)===t){I=unescape(I);var de=F(I,!1);(de!==""||(de=n.loadFile(I,!0))!==void 0)&&(I=de)}if(w(I)&&(I=b(I,P)),P=a(I,P),!y(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(((pe=B)==null||pe.length===0)&&(B=(function(Se){return typeof Se=="string"||ae(Se)?D(Se):ae(Se.data)?D(Se.data):null})(I)),(Ne=T.call(this,B))||(I instanceof Uint8Array||P==="RGBA"||(ce=I,I=H(I)),Ne=this["process"+P.toUpperCase()](I,g.call(this),B,(function(Se){return Se&&typeof Se=="string"&&(Se=Se.toUpperCase()),Se in n.image_compression?Se:L.NONE})(ue),ce)),!Ne)throw new Error("An unknown error occurred whilst processing the image.");return Ne},F=n.__addimage__.convertBase64ToBinaryString=function(I,P){P=typeof P!="boolean"||P;var B,ue="";if(typeof I=="string"){var Ne;B=(Ne=te(I))!==null&&Ne!==void 0?Ne:I;try{ue=H0(B)}catch(ce){if(P)throw O(B)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ce.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ue};n.getImageProperties=function(I){var P,B,ue="";if(w(I)&&(I=b(I)),typeof I=="string"&&a(I)===t&&((ue=F(I,!1))===""&&(ue=n.loadFile(I)||""),I=ue),B=a(I),!y(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(I instanceof Uint8Array||(I=H(I)),!(P=this["process"+B.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return P.fileType=B,P}})(Rt.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Rt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,a,o,c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,g=!1,y=0;y<f.length&&!g;y++)switch((r=f[y]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var w=0;w<f.length;w++){r=f[w];var b=this.internal.pdfEscape,T=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),E=this.internal.getEncryptor(S.objId),L=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+c(r.bounds.x)+" "+u(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y)+"] ")+"/Contents ("+b(E(r.contents))+")",o+=" /Popup "+j.objId+" 0 R",o+=" /P "+h.objId+" 0 R",o+=" /T ("+b(E(L))+") >>",S.content=o;var D=S.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+c(r.bounds.x+30)+" "+u(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w+30)+" "+u(r.bounds.y)+"] ")+" /Parent "+D,r.open&&(o+=" /Open true"),o+=" >>",j.content=o,this.internal.write(S.objId,"0 R",j.objId,"0 R");break;case"freetext":a="/Rect ["+c(r.bounds.x)+" "+u(r.bounds.y)+" "+c(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y+r.bounds.h)+"] ";var O=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+b(T(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+O+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var te=this.annotations._nameMap[r.options.name];r.options.pageNumber=te.page,r.options.top=te.y}else r.options.top||(r.options.top=0);if(a="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+b(T(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;default:var ae=u(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+ae+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,a,o,c){var u=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:h(t),y:f(r),w:h(t+a),h:f(r+o)},options:c,type:"link"})},n.textWithLink=function(t,r,a,o){var c,u,h=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){u=o.maxWidth;var g=this.splitTextToSize(t,u).length;c=Math.ceil(f*g)}else u=h,c=f;return this.text(t,r,a,o),a+=.2*f,o.align==="center"&&(r-=h/2),o.align==="right"&&(r-=h),this.link(r,a-f,u,c,o),h},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(Rt.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(S){return e[S.charCodeAt(0)]!==void 0},c=n.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},u=n.__arabicParser__.isArabicEndLetter=function(S){return c(S)&&o(S)&&e[S.charCodeAt(0)].length<=2},h=n.__arabicParser__.isArabicAlfLetter=function(S){return c(S)&&a.indexOf(S.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return c(S)&&o(S)&&e[S.charCodeAt(0)].length>=1};var f=n.__arabicParser__.arabicLetterHasFinalForm=function(S){return c(S)&&o(S)&&e[S.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(S){return c(S)&&o(S)&&e[S.charCodeAt(0)].length>=3};var g=n.__arabicParser__.arabicLetterHasMedialForm=function(S){return c(S)&&o(S)&&e[S.charCodeAt(0)].length==4},y=n.__arabicParser__.resolveLigatures=function(S){var j=0,E=t,L="",D=0;for(j=0;j<S.length;j+=1)E[S.charCodeAt(j)]!==void 0?(D++,typeof(E=E[S.charCodeAt(j)])=="number"&&(L+=String.fromCharCode(E),E=t,D=0),j===S.length-1&&(E=t,L+=S.charAt(j-(D-1)),j-=D-1,D=0)):(E=t,L+=S.charAt(j-D),j-=D,D=0);return L};n.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&r[S.charCodeAt(0)]!==void 0};var w=n.__arabicParser__.getCorrectForm=function(S,j,E){return c(S)?o(S)===!1?-1:!f(S)||!c(j)&&!c(E)||!c(E)&&u(j)||u(S)&&!c(j)||u(S)&&h(j)||u(S)&&u(j)?0:g(S)&&c(j)&&!u(j)&&c(E)&&f(E)?3:u(S)||!c(E)?1:2:-1},b=function(S){var j=0,E=0,L=0,D="",O="",te="",ae=(S=S||"").split("\\s+"),H=[];for(j=0;j<ae.length;j+=1){for(H.push(""),E=0;E<ae[j].length;E+=1)D=ae[j][E],O=ae[j][E-1],te=ae[j][E+1],c(D)?(L=w(D,O,te),H[j]+=L!==-1?String.fromCharCode(e[D.charCodeAt(0)][L]):D):H[j]+=D;H[j]=y(H[j])}return H.join(" ")},T=n.__arabicParser__.processArabic=n.processArabic=function(){var S,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,E=[];if(Array.isArray(j)){var L=0;for(E=[],L=0;L<j.length;L+=1)Array.isArray(j[L])?E.push([b(j[L][0]),j[L][1],j[L][2]]):E.push([b(j[L])]);S=E}else S=b(j);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};n.events.push(["preProcessText",T])})(Rt.API),Rt.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(u){t=u}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(u){r=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(u){a=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(u){o=u}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(u){c=u}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var a;if((t=t||"2d")!=="2d")return null;for(a in r)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=r[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Rt.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(S){h=S}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(S){f=S}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(S){g=S}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(S){y=S}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(S){w=S}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(S){b=S}});var T=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return T},set:function(S){T=S}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(h){return r.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},n.getTextDimensions=function(h,f){r.call(this);var g=(f=f||{}).fontSize||this.getFontSize(),y=f.font||this.getFont(),w=f.scaleFactor||this.internal.scaleFactor,b=0,T=0,S=0,j=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var E=f.maxWidth;E>0?typeof h=="string"?h=this.splitTextToSize(h,E):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(D,O){return D.concat(j.splitTextToSize(O,E))},[])):h=Array.isArray(h)?h:[h];for(var L=0;L<h.length;L++)b<(S=this.getStringUnitWidth(h[L],{font:y})*g)&&(b=S);return b!==0&&(T=h.length),{w:b/=w,h:Math.max((T*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/w,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=n.cell=function(){var h;h=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var f=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,y=this.internal.__cell__.margins||e,w=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===h.lineNumber?(h.x=(f.x||0)+(f.width||0),h.y=f.y||0):f.y+f.height+h.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=y.top,b&&w&&(this.printHeaderRow(h.lineNumber,!0),h.y+=w[0].height)):h.y=f.y+f.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,t===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-g,h.y+g,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+g,{align:"center",baseline:"top",maxWidth:h.width-g-g}):this.text(h.text,h.x+g,h.y+g,{align:"left",baseline:"top",maxWidth:h.width-g-g})),this.internal.__cell__.lastCell=h,this};n.table=function(h,f,g,y,w){if(r.call(this),!g)throw new Error("No data for PDF table.");var b,T,S,j,E=[],L=[],D=[],O={},te={},ae=[],H=[],V=(w=w||{}).autoSize||!1,k=w.printHeaders!==!1,F=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,I=w.margins||Object.assign({width:this.getPageWidth()},e),P=typeof w.padding=="number"?w.padding:3,B=w.headerBackgroundColor||"#c8c8c8",ue=w.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=F,this.internal.__cell__.padding=P,this.internal.__cell__.headerBackgroundColor=B,this.internal.__cell__.headerTextColor=ue,this.setFontSize(F),y==null)L=E=Object.keys(g[0]),D=E.map(function(){return"left"});else if(Array.isArray(y)&&cr(y[0])==="object")for(E=y.map(function(ze){return ze.name}),L=y.map(function(ze){return ze.prompt||ze.name||""}),D=y.map(function(ze){return ze.align||"left"}),b=0;b<y.length;b+=1)te[y[b].name]=.7499990551181103*y[b].width;else Array.isArray(y)&&typeof y[0]=="string"&&(L=E=y,D=E.map(function(){return"left"}));if(V||Array.isArray(y)&&typeof y[0]=="string")for(b=0;b<E.length;b+=1){for(O[j=E[b]]=g.map(function(ze){return ze[j]}),this.setFont(void 0,"bold"),ae.push(this.getTextDimensions(L[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),T=O[j],this.setFont(void 0,"normal"),S=0;S<T.length;S+=1)ae.push(this.getTextDimensions(T[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);te[j]=Math.max.apply(null,ae)+P+P,ae=[]}if(k){var Ne={};for(b=0;b<E.length;b+=1)Ne[E[b]]={},Ne[E[b]].text=L[b],Ne[E[b]].align=D[b];var ce=u.call(this,Ne,te);H=E.map(function(ze){return new o(h,f,te[ze],ce,Ne[ze].text,void 0,Ne[ze].align)}),this.setTableHeaderRow(H),this.printHeaderRow(1,!1)}var pe=y.reduce(function(ze,ne){return ze[ne.name]=ne.align,ze},{});for(b=0;b<g.length;b+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:b,data:g[b]},this);var de=u.call(this,g[b],te);for(S=0;S<E.length;S+=1){var Se=g[b][E[S]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:b,col:S,data:Se},this),c.call(this,new o(h,f,te[E[S]],de,Se,b+2,pe[E[S]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=f,this};var u=function(h,f){var g=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(h).map(function(b){var T=h[b];return this.splitTextToSize(T.hasOwnProperty("text")?T.text:T,f[b]-g-g)},this).map(function(b){return this.getLineHeightFactor()*b.length*y/w+g+g},this).reduce(function(b,T){return Math.max(b,T)},0)};n.setTableHeaderRow=function(h){r.call(this),this.internal.__cell__.tableHeaderRow=h},n.printHeaderRow=function(h,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){g=this.internal.__cell__.tableHeaderRow[b].clone(),f&&(g.y=this.internal.__cell__.margins.top||0,w.push(g)),g.lineNumber=h;var T=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,g),this.setTextColor(T)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),t=!1}})(Rt.API);var lC={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},cC=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],k2=oC(cC),uC=[100,200,300,400,500,600,700,800,900],iH=oC(uC);function j1(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return lC[o=o||"normal"]?o:"normal"})(n.style),r=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),a=(function(o){return typeof k2[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:a,src:n.src||[],ref:n.ref||{name:e,style:[a,t,r].join(" ")}}}function g6(n,e,t,r){var a;for(a=t;a>=0&&a<e.length;a+=r)if(n[e[a]])return n[e[a]];for(a=t;a>=0&&a<e.length;a-=r)if(n[e[a]])return n[e[a]]}var oH={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},p6={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function x6(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function y6(n){return n.trimLeft()}function lH(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function cH(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var _0,b6,v6,lf,S0,w6,N6,j6,_1=["times"];function _6(n,e,t,r,a){var o=4,c=E6;switch(a){case Rt.API.image_compression.FAST:o=1,c=S6;break;case Rt.API.image_compression.MEDIUM:o=6,c=A6;break;case Rt.API.image_compression.SLOW:o=9,c=T6}n=(function(h,f,g,y){for(var w,b=h.length/f,T=new Uint8Array(h.length+b),S=[uH,S6,E6,A6,T6],j=0;j<b;j+=1){var E=j*f,L=h.subarray(E,E+f);if(y)T.set(y(L,g,w),E+j);else{for(var D=S.length,O=[],te=0;te<D;te+=1)O[te]=S[te](L,g,w);var ae=hH(O.concat());T.set(O[ae],E+j)}w=L}return T})(n,e,Math.ceil(t*r/8),c);var u=S2(n,{level:o});return Rt.API.__addimage__.arrayBufferToBinaryString(u)}function uH(n){var e=Array.apply([],n);return e.unshift(0),e}function S6(n,e){var t=n.length,r=[];r[0]=1;for(var a=0;a<t;a+=1){var o=n[a-e]||0;r[a+1]=n[a]-o+256&255}return r}function E6(n,e,t){var r=n.length,a=[];a[0]=2;for(var o=0;o<r;o+=1){var c=t&&t[o]||0;a[o+1]=n[o]-c+256&255}return a}function A6(n,e,t){var r=n.length,a=[];a[0]=3;for(var o=0;o<r;o+=1){var c=n[o-e]||0,u=t&&t[o]||0;a[o+1]=n[o]+256-(c+u>>>1)&255}return a}function T6(n,e,t){var r=n.length,a=[];a[0]=4;for(var o=0;o<r;o+=1){var c=dH(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);a[o+1]=n[o]-c+256&255}return a}function dH(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),a=Math.abs(n-t),o=Math.abs(n+e-t-t);return r<=a&&r<=o?n:a<=o?e:t}function hH(n){var e=n.map(function(t){return t.reduce(function(r,a){return r+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function S1(n,e,t){var r=e*t,a=Math.floor(r/8),o=16-(r-8*a+t),c=(1<<t)-1;return dC(n,a)>>o&c}function C6(n,e,t,r){var a=t*r,o=Math.floor(a/8),c=16-(a-8*o+r),u=(1<<r)-1,h=(e&u)<<c;(function(f,g,y){if(g+1<f.byteLength)f.setUint16(g,y,!1);else{var w=y>>8&255;f.setUint8(g,w)}})(n,o,dC(n,o)&~(u<<c)&65535|h)}function dC(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function fH(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,a=n[e++],o=a>>7,c=1<<1+(7&a);n[e++],n[e++];var u=null,h=null;o&&(u=e,h=c,e+=3*c);var f=!0,g=[],y=0,w=null,b=0,T=null;for(this.width=t,this.height=r;f&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,T=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((I=n[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var S=n[e++];y=n[e++]|n[e++]<<8,w=n[e++],1&S||(w=null),b=S>>2&7,e++;break;case 254:for(;;){if(!((I=n[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var j=n[e++]|n[e++]<<8,E=n[e++]|n[e++]<<8,L=n[e++]|n[e++]<<8,D=n[e++]|n[e++]<<8,O=n[e++],te=O>>6&1,ae=1<<1+(7&O),H=u,V=h,k=!1;O>>7&&(k=!0,H=e,V=ae,e+=3*ae);var F=e;for(e++;;){var I;if(!((I=n[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}g.push({x:j,y:E,width:L,height:D,has_local_palette:k,palette_offset:H,palette_size:V,data_offset:F,data_length:e-F,transparent_index:w,interlaced:!!te,delay:y,disposal:b});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return T},this.frameInfo=function(P){if(P<0||P>=g.length)throw new Error("Frame index out of range.");return g[P]},this.decodeAndBlitFrameBGRA=function(P,B){var ue=this.frameInfo(P),Ne=ue.width*ue.height,ce=new Uint8Array(Ne);I6(n,ue.data_offset,ce,Ne);var pe=ue.palette_offset,de=ue.transparent_index;de===null&&(de=256);var Se=ue.width,ze=t-Se,ne=Se,q=4*(ue.y*t+ue.x),Q=4*((ue.y+ue.height)*t+ue.x),re=q,he=4*ze;ue.interlaced===!0&&(he+=4*t*7);for(var me=8,be=0,Le=ce.length;be<Le;++be){var ke=ce[be];if(ne===0&&(ne=Se,(re+=he)>=Q&&(he=4*ze+4*t*(me-1),re=q+(Se+ze)*(me<<1),me>>=1)),ke===de)re+=4;else{var qe=n[pe+3*ke],Je=n[pe+3*ke+1],it=n[pe+3*ke+2];B[re++]=it,B[re++]=Je,B[re++]=qe,B[re++]=255}--ne}},this.decodeAndBlitFrameRGBA=function(P,B){var ue=this.frameInfo(P),Ne=ue.width*ue.height,ce=new Uint8Array(Ne);I6(n,ue.data_offset,ce,Ne);var pe=ue.palette_offset,de=ue.transparent_index;de===null&&(de=256);var Se=ue.width,ze=t-Se,ne=Se,q=4*(ue.y*t+ue.x),Q=4*((ue.y+ue.height)*t+ue.x),re=q,he=4*ze;ue.interlaced===!0&&(he+=4*t*7);for(var me=8,be=0,Le=ce.length;be<Le;++be){var ke=ce[be];if(ne===0&&(ne=Se,(re+=he)>=Q&&(he=4*ze+4*t*(me-1),re=q+(Se+ze)*(me<<1),me>>=1)),ke===de)re+=4;else{var qe=n[pe+3*ke],Je=n[pe+3*ke+1],it=n[pe+3*ke+2];B[re++]=qe,B[re++]=Je,B[re++]=it,B[re++]=255}--ne}}}function I6(n,e,t,r){for(var a=n[e++],o=1<<a,c=o+1,u=c+1,h=a+1,f=(1<<h)-1,g=0,y=0,w=0,b=n[e++],T=new Int32Array(4096),S=null;;){for(;g<16&&b!==0;)y|=n[e++]<<g,g+=8,b===1?b=n[e++]:--b;if(g<h)break;var j=y&f;if(y>>=h,g-=h,j!==o){if(j===c)break;for(var E=j<u?j:S,L=0,D=E;D>o;)D=T[D]>>8,++L;var O=D;if(w+L+(E!==j?1:0)>r)return void Sr.log("Warning, gif stream longer than expected.");t[w++]=O;var te=w+=L;for(E!==j&&(t[w++]=O),D=E;L--;)D=T[D],t[--te]=255&D,D>>=8;S!==null&&u<4096&&(T[u++]=S<<8|O,u>=f+1&&h<12&&(++h,f=f<<1|1)),S=j}else u=c+1,f=(1<<(h=a+1))-1,S=null}return w!==r&&Sr.log("Warning, gif stream shorter than expected."),t}function E1(n){var e,t,r,a,o,c=Math.floor,u=new Array(64),h=new Array(64),f=new Array(64),g=new Array(64),y=new Array(65535),w=new Array(65535),b=new Array(64),T=new Array(64),S=[],j=0,E=7,L=new Array(64),D=new Array(64),O=new Array(64),te=new Array(256),ae=new Array(2048),H=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],V=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],ue=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ne=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ce(q,Q){for(var re=0,he=0,me=new Array,be=1;be<=16;be++){for(var Le=1;Le<=q[be];Le++)me[Q[he]]=[],me[Q[he]][0]=re,me[Q[he]][1]=be,he++,re++;re*=2}return me}function pe(q){for(var Q=q[0],re=q[1]-1;re>=0;)Q&1<<re&&(j|=1<<E),re--,--E<0&&(j==255?(de(255),de(0)):de(j),E=7,j=0)}function de(q){S.push(q)}function Se(q){de(q>>8&255),de(255&q)}function ze(q,Q,re,he,me){for(var be,Le=me[0],ke=me[240],qe=(function(Ge,ct){var lt,Dt,St,sn,dn,Xt,pn,on,wt,en,Nt=0;for(wt=0;wt<8;++wt){lt=Ge[Nt],Dt=Ge[Nt+1],St=Ge[Nt+2],sn=Ge[Nt+3],dn=Ge[Nt+4],Xt=Ge[Nt+5],pn=Ge[Nt+6];var Er=lt+(on=Ge[Nt+7]),ln=lt-on,Lt=Dt+pn,$t=Dt-pn,an=St+Xt,Tt=St-Xt,zn=sn+dn,zt=sn-dn,qt=Er+zn,Gn=Er-zn,Et=Lt+an,jt=Lt-an;Ge[Nt]=qt+Et,Ge[Nt+4]=qt-Et;var xn=.707106781*(jt+Gn);Ge[Nt+2]=Gn+xn,Ge[Nt+6]=Gn-xn;var Bs=.382683433*((qt=zt+Tt)-(jt=$t+ln)),As=.5411961*qt+Bs,pi=1.306562965*jt+Bs,ms=.707106781*(Et=Tt+$t),Ct=ln+ms,qi=ln-ms;Ge[Nt+5]=qi+As,Ge[Nt+3]=qi-As,Ge[Nt+1]=Ct+pi,Ge[Nt+7]=Ct-pi,Nt+=8}for(Nt=0,wt=0;wt<8;++wt){lt=Ge[Nt],Dt=Ge[Nt+8],St=Ge[Nt+16],sn=Ge[Nt+24],dn=Ge[Nt+32],Xt=Ge[Nt+40],pn=Ge[Nt+48];var va=lt+(on=Ge[Nt+56]),ra=lt-on,sa=Dt+pn,nr=Dt-pn,fr=St+Xt,es=St-Xt,zs=sn+dn,Ts=sn-dn,$n=va+zs,sr=va-zs,ts=sa+fr,aa=sa-fr;Ge[Nt]=$n+ts,Ge[Nt+32]=$n-ts;var Oa=.707106781*(aa+sr);Ge[Nt+16]=sr+Oa,Ge[Nt+48]=sr-Oa;var fo=.382683433*(($n=Ts+es)-(aa=nr+ra)),ei=.5411961*$n+fo,ia=1.306562965*aa+fo,Hi=.707106781*(ts=es+nr),wa=ra+Hi,qs=ra-Hi;Ge[Nt+40]=qs+ei,Ge[Nt+24]=qs-ei,Ge[Nt+8]=wa+ia,Ge[Nt+56]=wa-ia,Nt++}for(wt=0;wt<64;++wt)en=Ge[wt]*ct[wt],b[wt]=en>0?en+.5|0:en-.5|0;return b})(q,Q),Je=0;Je<64;++Je)T[H[Je]]=qe[Je];var it=T[0]-re;re=T[0],it==0?pe(he[0]):(pe(he[w[be=32767+it]]),pe(y[be]));for(var at=63;at>0&&T[at]==0;)at--;if(at==0)return pe(Le),re;for(var ft,se=1;se<=at;){for(var st=se;T[se]==0&&se<=at;)++se;var rn=se-st;if(rn>=16){ft=rn>>4;for(var Pt=1;Pt<=ft;++Pt)pe(ke);rn&=15}be=32767+T[se],pe(me[(rn<<4)+w[be]]),pe(y[be]),se++}return at!=63&&pe(Le),re}function ne(q){q=Math.min(Math.max(q,1),100),o!=q&&((function(Q){for(var re=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],he=0;he<64;he++){var me=c((re[he]*Q+50)/100);me=Math.min(Math.max(me,1),255),u[H[he]]=me}for(var be=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Le=0;Le<64;Le++){var ke=c((be[Le]*Q+50)/100);ke=Math.min(Math.max(ke,1),255),h[H[Le]]=ke}for(var qe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Je=0,it=0;it<8;it++)for(var at=0;at<8;at++)f[Je]=1/(u[H[Je]]*qe[it]*qe[at]*8),g[Je]=1/(h[H[Je]]*qe[it]*qe[at]*8),Je++})(q<50?Math.floor(5e3/q):Math.floor(200-2*q)),o=q)}this.encode=function(q,Q){Q&&ne(Q),S=new Array,j=0,E=7,Se(65496),Se(65504),Se(16),de(74),de(70),de(73),de(70),de(0),de(1),de(1),de(0),Se(1),Se(1),de(0),de(0),(function(){Se(65499),Se(132),de(0);for(var Dt=0;Dt<64;Dt++)de(u[Dt]);de(1);for(var St=0;St<64;St++)de(h[St])})(),(function(Dt,St){Se(65472),Se(17),de(8),Se(St),Se(Dt),de(3),de(1),de(17),de(0),de(2),de(17),de(1),de(3),de(17),de(1)})(q.width,q.height),(function(){Se(65476),Se(418),de(0);for(var Dt=0;Dt<16;Dt++)de(V[Dt+1]);for(var St=0;St<=11;St++)de(k[St]);de(16);for(var sn=0;sn<16;sn++)de(F[sn+1]);for(var dn=0;dn<=161;dn++)de(I[dn]);de(1);for(var Xt=0;Xt<16;Xt++)de(P[Xt+1]);for(var pn=0;pn<=11;pn++)de(B[pn]);de(17);for(var on=0;on<16;on++)de(ue[on+1]);for(var wt=0;wt<=161;wt++)de(Ne[wt])})(),Se(65498),Se(12),de(3),de(1),de(0),de(2),de(17),de(3),de(17),de(0),de(63),de(0);var re=0,he=0,me=0;j=0,E=7,this.encode.displayName="_encode_";for(var be,Le,ke,qe,Je,it,at,ft,se,st=q.data,rn=q.width,Pt=q.height,Ge=4*rn,ct=0;ct<Pt;){for(be=0;be<Ge;){for(Je=Ge*ct+be,at=-1,ft=0,se=0;se<64;se++)it=Je+(ft=se>>3)*Ge+(at=4*(7&se)),ct+ft>=Pt&&(it-=Ge*(ct+1+ft-Pt)),be+at>=Ge&&(it-=be+at-Ge+4),Le=st[it++],ke=st[it++],qe=st[it++],L[se]=(ae[Le]+ae[ke+256|0]+ae[qe+512|0]>>16)-128,D[se]=(ae[Le+768|0]+ae[ke+1024|0]+ae[qe+1280|0]>>16)-128,O[se]=(ae[Le+1280|0]+ae[ke+1536|0]+ae[qe+1792|0]>>16)-128;re=ze(L,f,re,e,r),he=ze(D,g,he,t,a),me=ze(O,g,me,t,a),be+=32}ct+=8}if(E>=0){var lt=[];lt[1]=E+1,lt[0]=(1<<E+1)-1,pe(lt)}return Se(65497),new Uint8Array(S)},n=n||50,(function(){for(var q=String.fromCharCode,Q=0;Q<256;Q++)te[Q]=q(Q)})(),e=ce(V,k),t=ce(P,B),r=ce(F,I),a=ce(ue,Ne),(function(){for(var q=1,Q=2,re=1;re<=15;re++){for(var he=q;he<Q;he++)w[32767+he]=re,y[32767+he]=[],y[32767+he][1]=re,y[32767+he][0]=he;for(var me=-(Q-1);me<=-q;me++)w[32767+me]=re,y[32767+me]=[],y[32767+me][1]=re,y[32767+me][0]=Q-1+me;q<<=1,Q<<=1}})(),(function(){for(var q=0;q<256;q++)ae[q]=19595*q,ae[q+256|0]=38470*q,ae[q+512|0]=7471*q+32768,ae[q+768|0]=-11059*q,ae[q+1024|0]=-21709*q,ae[q+1280|0]=32768*q+8421375,ae[q+1536|0]=-27439*q,ae[q+1792|0]=-5329*q})(),ne(n)}function ol(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function R6(n){function e(k){if(!k)throw Error("assert :P")}function t(k,F,I){for(var P=0;4>P;P++)if(k[F+P]!=I.charCodeAt(P))return!0;return!1}function r(k,F,I,P,B){for(var ue=0;ue<B;ue++)k[F+ue]=I[P+ue]}function a(k,F,I,P){for(var B=0;B<P;B++)k[F+B]=I}function o(k){return new Int32Array(k)}function c(k,F){for(var I=[],P=0;P<k;P++)I.push(new F);return I}function u(k,F){var I=[];return(function P(B,ue,Ne){for(var ce=Ne[ue],pe=0;pe<ce&&(B.push(Ne.length>ue+1?[]:new F),!(Ne.length<ue+1));pe++)P(B[pe],ue+1,Ne)})(I,0,k),I}var h=function(){var k=this;function F(p,N){for(var C=1<<N-1>>>0;p&C;)C>>>=1;return C?(p&C-1)+C:p}function I(p,N,C,M,$){e(!(M%C));do p[N+(M-=C)]=$;while(0<M)}function P(p,N,C,M,$){if(e(2328>=$),512>=$)var W=o(512);else if((W=o($))==null)return 0;return(function(Y,J,ee,le,xe,Ce){var ie,ve,Ee=J,Fe=1<<ee,Ae=o(16),Oe=o(16);for(e(xe!=0),e(le!=null),e(Y!=null),e(0<ee),ve=0;ve<xe;++ve){if(15<le[ve])return 0;++Ae[le[ve]]}if(Ae[0]==xe)return 0;for(Oe[1]=0,ie=1;15>ie;++ie){if(Ae[ie]>1<<ie)return 0;Oe[ie+1]=Oe[ie]+Ae[ie]}for(ve=0;ve<xe;++ve)ie=le[ve],0<le[ve]&&(Ce[Oe[ie]++]=ve);if(Oe[15]==1)return(le=new B).g=0,le.value=Ce[0],I(Y,Ee,1,Fe,le),Fe;var He,Qe=-1,Ke=Fe-1,xt=0,ut=1,tn=1,mt=1<<ee;for(ve=0,ie=1,xe=2;ie<=ee;++ie,xe<<=1){if(ut+=tn<<=1,0>(tn-=Ae[ie]))return 0;for(;0<Ae[ie];--Ae[ie])(le=new B).g=ie,le.value=Ce[ve++],I(Y,Ee+xt,xe,mt,le),xt=F(xt,ie)}for(ie=ee+1,xe=2;15>=ie;++ie,xe<<=1){if(ut+=tn<<=1,0>(tn-=Ae[ie]))return 0;for(;0<Ae[ie];--Ae[ie]){if(le=new B,(xt&Ke)!=Qe){for(Ee+=mt,He=1<<(Qe=ie)-ee;15>Qe&&!(0>=(He-=Ae[Qe]));)++Qe,He<<=1;Fe+=mt=1<<(He=Qe-ee),Y[J+(Qe=xt&Ke)].g=He+ee,Y[J+Qe].value=Ee-J-Qe}le.g=ie-ee,le.value=Ce[ve++],I(Y,Ee+(xt>>ee),xe,mt,le),xt=F(xt,ie)}}return ut!=2*Oe[15]-1?0:Fe})(p,N,C,M,$,W)}function B(){this.value=this.g=0}function ue(){this.value=this.g=0}function Ne(){this.G=c(5,B),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(El,ue)}function ce(p,N,C,M){e(p!=null),e(N!=null),e(2147483648>M),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=N,p.pa=C,p.Jd=N,p.Yc=C+M,p.Zc=4<=M?C+M-4+1:C,Le(p)}function pe(p,N){for(var C=0;0<N--;)C|=qe(p,128)<<N;return C}function de(p,N){var C=pe(p,N);return ke(p)?-C:C}function Se(p,N,C,M){var $,W=0;for(e(p!=null),e(N!=null),e(4294967288>M),p.Sb=M,p.Ra=0,p.u=0,p.h=0,4<M&&(M=4),$=0;$<M;++$)W+=N[C+$]<<8*$;p.Ra=W,p.bb=M,p.oa=N,p.pa=C}function ze(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<wo-8>>>0,++p.bb,p.u-=8;he(p)&&(p.h=1,p.u=0)}function ne(p,N){if(e(0<=N),!p.h&&N<=Ca){var C=re(p)&za[N];return p.u+=N,ze(p),C}return p.h=1,p.u=0}function q(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function re(p){return p.Ra>>>(p.u&wo-1)>>>0}function he(p){return e(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>wo}function me(p,N){p.u=N,p.h=he(p)}function be(p){p.u>=No&&(e(p.u>=No),ze(p))}function Le(p){e(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(e(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function ke(p){return pe(p,1)}function qe(p,N){var C=p.Ca;0>p.b&&Le(p);var M=p.b,$=C*N>>>8,W=(p.I>>>M>$)+0;for(W?(C-=$,p.I-=$+1<<M>>>0):C=$+1,M=C,$=0;256<=M;)$+=8,M>>=8;return M=7^$+Ko[M],p.b-=M,p.Ca=(C<<M)-1,W}function Je(p,N,C){p[N+0]=C>>24&255,p[N+1]=C>>16&255,p[N+2]=C>>8&255,p[N+3]=255&C}function it(p,N){return p[N+0]|p[N+1]<<8}function at(p,N){return it(p,N)|p[N+2]<<16}function ft(p,N){return it(p,N)|it(p,N+2)<<16}function se(p,N){var C=1<<N;return e(p!=null),e(0<N),p.X=o(C),p.X==null?0:(p.Mb=32-N,p.Xa=N,1)}function st(p,N){e(p!=null),e(N!=null),e(p.Xa==N.Xa),r(N.X,0,p.X,0,1<<N.Xa)}function rn(){this.X=[],this.Xa=this.Mb=0}function Pt(p,N,C,M){e(C!=null),e(M!=null);var $=C[0],W=M[0];return $==0&&($=(p*W+N/2)/N),W==0&&(W=(N*$+p/2)/p),0>=$||0>=W?0:(C[0]=$,M[0]=W,1)}function Ge(p,N){return p+(1<<N)-1>>>N}function ct(p,N){return((4278255360&p)+(4278255360&N)>>>0&4278255360)+((16711935&p)+(16711935&N)>>>0&16711935)>>>0}function lt(p,N){k[N]=function(C,M,$,W,Y,J,ee){var le;for(le=0;le<Y;++le){var xe=k[p](J[ee+le-1],$,W+le);J[ee+le]=ct(C[M+le],xe)}}}function Dt(){this.ud=this.hd=this.jd=0}function St(p,N){return((4278124286&(p^N))>>>1)+(p&N)>>>0}function sn(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function dn(p,N){return sn(p+(p-N+.5>>1))}function Xt(p,N,C){return Math.abs(N-C)-Math.abs(p-C)}function pn(p,N,C,M,$,W,Y){for(M=W[Y-1],C=0;C<$;++C)W[Y+C]=M=ct(p[N+C],M)}function on(p,N,C,M,$){var W;for(W=0;W<C;++W){var Y=p[N+W],J=Y>>8&255,ee=16711935&(ee=(ee=16711935&Y)+((J<<16)+J));M[$+W]=(4278255360&Y)+ee>>>0}}function wt(p,N){N.jd=255&p,N.hd=p>>8&255,N.ud=p>>16&255}function en(p,N,C,M,$,W){var Y;for(Y=0;Y<M;++Y){var J=N[C+Y],ee=J>>>8,le=J,xe=255&(xe=(xe=J>>>16)+((p.jd<<24>>24)*(ee<<24>>24)>>>5));le=255&(le=(le+=(p.hd<<24>>24)*(ee<<24>>24)>>>5)+((p.ud<<24>>24)*(xe<<24>>24)>>>5)),$[W+Y]=(4278255360&J)+(xe<<16)+le}}function Nt(p,N,C,M,$){k[N]=function(W,Y,J,ee,le,xe,Ce,ie,ve){for(ee=Ce;ee<ie;++ee)for(Ce=0;Ce<ve;++Ce)le[xe++]=$(J[M(W[Y++])])},k[p]=function(W,Y,J,ee,le,xe,Ce){var ie=8>>W.b,ve=W.Ea,Ee=W.K[0],Fe=W.w;if(8>ie)for(W=(1<<W.b)-1,Fe=(1<<ie)-1;Y<J;++Y){var Ae,Oe=0;for(Ae=0;Ae<ve;++Ae)Ae&W||(Oe=M(ee[le++])),xe[Ce++]=$(Ee[Oe&Fe]),Oe>>=ie}else k["VP8LMapColor"+C](ee,le,Ee,Fe,xe,Ce,Y,J,ve)}}function Er(p,N,C,M,$){for(C=N+C;N<C;){var W=p[N++];M[$++]=W>>16&255,M[$++]=W>>8&255,M[$++]=255&W}}function ln(p,N,C,M,$){for(C=N+C;N<C;){var W=p[N++];M[$++]=W>>16&255,M[$++]=W>>8&255,M[$++]=255&W,M[$++]=W>>24&255}}function Lt(p,N,C,M,$){for(C=N+C;N<C;){var W=(Y=p[N++])>>16&240|Y>>12&15,Y=240&Y|Y>>28&15;M[$++]=W,M[$++]=Y}}function $t(p,N,C,M,$){for(C=N+C;N<C;){var W=(Y=p[N++])>>16&248|Y>>13&7,Y=Y>>5&224|Y>>3&31;M[$++]=W,M[$++]=Y}}function an(p,N,C,M,$){for(C=N+C;N<C;){var W=p[N++];M[$++]=255&W,M[$++]=W>>8&255,M[$++]=W>>16&255}}function Tt(p,N,C,M,$,W){if(W==0)for(C=N+C;N<C;)Je(M,((W=p[N++])[0]>>24|W[1]>>8&65280|W[2]<<8&16711680|W[3]<<24)>>>0),$+=32;else r(M,$,p,N,C)}function zn(p,N){k[N][0]=k[p+"0"],k[N][1]=k[p+"1"],k[N][2]=k[p+"2"],k[N][3]=k[p+"3"],k[N][4]=k[p+"4"],k[N][5]=k[p+"5"],k[N][6]=k[p+"6"],k[N][7]=k[p+"7"],k[N][8]=k[p+"8"],k[N][9]=k[p+"9"],k[N][10]=k[p+"10"],k[N][11]=k[p+"11"],k[N][12]=k[p+"12"],k[N][13]=k[p+"13"],k[N][14]=k[p+"0"],k[N][15]=k[p+"0"]}function zt(p){return p==wd||p==Nh||p==cu||p==jh}function qt(){this.eb=[],this.size=this.A=this.fb=0}function Gn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Et(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new qt,this.f.kb=new Gn,this.sd=null}function jt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function xn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Bs(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function As(p,N){var C=p.T,M=N.ba.f.RGBA,$=M.eb,W=M.fb+p.ka*M.A,Y=Xs[N.ba.S],J=p.y,ee=p.O,le=p.f,xe=p.N,Ce=p.ea,ie=p.W,ve=N.cc,Ee=N.dc,Fe=N.Mc,Ae=N.Nc,Oe=p.ka,He=p.ka+p.T,Qe=p.U,Ke=Qe+1>>1;for(Oe==0?Y(J,ee,null,null,le,xe,Ce,ie,le,xe,Ce,ie,$,W,null,null,Qe):(Y(N.ec,N.fc,J,ee,ve,Ee,Fe,Ae,le,xe,Ce,ie,$,W-M.A,$,W,Qe),++C);Oe+2<He;Oe+=2)ve=le,Ee=xe,Fe=Ce,Ae=ie,xe+=p.Rc,ie+=p.Rc,W+=2*M.A,Y(J,(ee+=2*p.fa)-p.fa,J,ee,ve,Ee,Fe,Ae,le,xe,Ce,ie,$,W-M.A,$,W,Qe);return ee+=p.fa,p.j+He<p.o?(r(N.ec,N.fc,J,ee,Qe),r(N.cc,N.dc,le,xe,Ke),r(N.Mc,N.Nc,Ce,ie,Ke),C--):1&He||Y(J,ee,null,null,le,xe,Ce,ie,le,xe,Ce,ie,$,W+M.A,null,null,Qe),C}function pi(p,N,C){var M=p.F,$=[p.J];if(M!=null){var W=p.U,Y=N.ba.S,J=Y==vd||Y==cu;N=N.ba.f.RGBA;var ee=[0],le=p.ka;ee[0]=p.T,p.Kb&&(le==0?--ee[0]:(--le,$[0]-=p.width),p.j+p.ka+p.T==p.o&&(ee[0]=p.o-p.j-le));var xe=N.eb;le=N.fb+le*N.A,p=pd(M,$[0],p.width,W,ee,xe,le+(J?0:3),N.A),e(C==ee),p&&zt(Y)&&pc(xe,le,J,W,ee,N.A)}return 0}function ms(p){var N=p.ma,C=N.ba.S,M=11>C,$=C==ha||C==_i||C==vd||C==lu||C==12||zt(C);if(N.memory=null,N.Ib=null,N.Jb=null,N.Nd=null,!Wo(N.Oa,p,$?11:12))return 0;if($&&zt(C)&&Jt(),p.da)alert("todo:use_scaling");else{if(M){if(N.Ib=Bs,p.Kb){if(C=p.U+1>>1,N.memory=o(p.U+2*C),N.memory==null)return 0;N.ec=N.memory,N.fc=0,N.cc=N.ec,N.dc=N.fc+p.U,N.Mc=N.cc,N.Nc=N.dc+C,N.Ib=As,Jt()}}else alert("todo:EmitYUV");$&&(N.Jb=pi,M&&Pe())}if(M&&!Pl){for(p=0;256>p;++p)Qs[p]=89858*(p-128)+hu>>Ii,Ny[p]=-22014*(p-128)+hu,yp[p]=-45773*(p-128),Th[p]=113618*(p-128)+hu>>Ii;for(p=vc;p<kl;++p)N=76283*(p-16)+hu>>Ii,jy[p-vc]=ja(N,255),_y[p-vc]=ja(N+8>>4,15);Pl=1}return 1}function Ct(p){var N=p.ma,C=p.U,M=p.T;return e(!(1&p.ka)),0>=C||0>=M?0:(C=N.Ib(p,N),N.Jb!=null&&N.Jb(p,N,C),N.Dc+=C,1)}function qi(p){p.ma.memory=null}function va(p,N,C,M){return ne(p,8)!=47?0:(N[0]=ne(p,14)+1,C[0]=ne(p,14)+1,M[0]=ne(p,1),ne(p,3)!=0?0:!p.h)}function ra(p,N){if(4>p)return p+1;var C=p-2>>1;return(2+(1&p)<<C)+ne(N,C)+1}function sa(p,N){return 120<N?N-120:1<=(C=((C=Ei[N-1])>>4)*p+(8-(15&C)))?C:1;var C}function nr(p,N,C){var M=re(C),$=p[N+=255&M].g-8;return 0<$&&(me(C,C.u+8),M=re(C),N+=p[N].value,N+=M&(1<<$)-1),me(C,C.u+p[N].g),p[N].value}function fr(p,N,C){return C.g+=p.g,C.value+=p.value<<N>>>0,e(8>=C.g),p.g}function es(p,N,C){var M=p.xc;return e((N=M==0?0:p.vc[p.md*(C>>M)+(N>>M)])<p.Wb),p.Ya[N]}function zs(p,N,C,M){var $=p.ab,W=p.c*N,Y=p.C;N=Y+N;var J=C,ee=M;for(M=p.Ta,C=p.Ua;0<$--;){var le=p.gc[$],xe=Y,Ce=N,ie=J,ve=ee,Ee=(ee=M,J=C,le.Ea);switch(e(xe<Ce),e(Ce<=le.nc),le.hc){case 2:Wr(ie,ve,(Ce-xe)*Ee,ee,J);break;case 0:var Fe=xe,Ae=Ce,Oe=ee,He=J,Qe=(mt=le).Ea;Fe==0&&(su(ie,ve,null,null,1,Oe,He),pn(ie,ve+1,0,0,Qe-1,Oe,He+1),ve+=Qe,He+=Qe,++Fe);for(var Ke=1<<mt.b,xt=Ke-1,ut=Ge(Qe,mt.b),tn=mt.K,mt=mt.w+(Fe>>mt.b)*ut;Fe<Ae;){var An=tn,jr=mt,hn=1;for(au(ie,ve,Oe,He-Qe,1,Oe,He);hn<Qe;){var dt=(hn&~xt)+Ke;dt>Qe&&(dt=Qe),(0,Yo[An[jr++]>>8&15])(ie,ve+ +hn,Oe,He+hn-Qe,dt-hn,Oe,He+hn),hn=dt}ve+=Qe,He+=Qe,++Fe&xt||(mt+=ut)}Ce!=le.nc&&r(ee,J-Ee,ee,J+(Ce-xe-1)*Ee,Ee);break;case 1:for(Ee=ie,Ae=ve,Qe=(ie=le.Ea)-(He=ie&~(Oe=(ve=1<<le.b)-1)),Fe=Ge(ie,le.b),Ke=le.K,le=le.w+(xe>>le.b)*Fe;xe<Ce;){for(xt=Ke,ut=le,tn=new Dt,mt=Ae+He,An=Ae+ie;Ae<mt;)wt(xt[ut++],tn),iu(tn,Ee,Ae,ve,ee,J),Ae+=ve,J+=ve;Ae<An&&(wt(xt[ut++],tn),iu(tn,Ee,Ae,Qe,ee,J),Ae+=Qe,J+=Qe),++xe&Oe||(le+=Fe)}break;case 3:if(ie==ee&&ve==J&&0<le.b){for(Ae=ee,ie=Ee=J+(Ce-xe)*Ee-(He=(Ce-xe)*Ge(le.Ea,le.b)),ve=ee,Oe=J,Fe=[],He=(Qe=He)-1;0<=He;--He)Fe[He]=ve[Oe+He];for(He=Qe-1;0<=He;--He)Ae[ie+He]=Fe[He];xh(le,xe,Ce,ee,Ee,ee,J)}else xh(le,xe,Ce,ie,ve,ee,J)}J=M,ee=C}ee!=C&&r(M,C,J,ee,W)}function Ts(p,N){var C=p.V,M=p.Ba+p.c*p.C,$=N-p.C;if(e(N<=p.l.o),e(16>=$),0<$){var W=p.l,Y=p.Ta,J=p.Ua,ee=W.width;if(zs(p,$,C,M),$=J=[J],e((C=p.C)<(M=N)),e(W.v<W.va),M>W.o&&(M=W.o),C<W.j){var le=W.j-C;C=W.j,$[0]+=le*ee}if(C>=M?C=0:($[0]+=4*W.v,W.ka=C-W.j,W.U=W.va-W.v,W.T=M-C,C=1),C){if(J=J[0],11>(C=p.ca).S){var xe=C.f.RGBA,Ce=(M=C.S,$=W.U,W=W.T,le=xe.eb,xe.A),ie=W;for(xe=xe.fb+p.Ma*xe.A;0<ie--;){var ve=Y,Ee=J,Fe=$,Ae=le,Oe=xe;switch(M){case vh:ou(ve,Ee,Fe,Ae,Oe);break;case ha:Xo(ve,Ee,Fe,Ae,Oe);break;case wd:Xo(ve,Ee,Fe,Ae,Oe),pc(Ae,Oe,0,Fe,1,0);break;case wh:mc(ve,Ee,Fe,Ae,Oe);break;case _i:Tt(ve,Ee,Fe,Ae,Oe,1);break;case Nh:Tt(ve,Ee,Fe,Ae,Oe,1),pc(Ae,Oe,0,Fe,1,0);break;case vd:Tt(ve,Ee,Fe,Ae,Oe,0);break;case cu:Tt(ve,Ee,Fe,Ae,Oe,0),pc(Ae,Oe,1,Fe,1,0);break;case lu:Qo(ve,Ee,Fe,Ae,Oe);break;case jh:Qo(ve,Ee,Fe,Ae,Oe),ji(Ae,Oe,Fe,1,0);break;case Al:So(ve,Ee,Fe,Ae,Oe);break;default:e(0)}J+=ee,xe+=Ce}p.Ma+=W}else alert("todo:EmitRescaledRowsYUVA");e(p.Ma<=C.height)}}p.C=N,e(p.C<=p.i)}function $n(p){var N;if(0<p.ua)return 0;for(N=0;N<p.Wb;++N){var C=p.Ya[N].G,M=p.Ya[N].H;if(0<C[1][M[1]+0].g||0<C[2][M[2]+0].g||0<C[3][M[3]+0].g)return 0}return 1}function sr(p,N,C,M,$,W){if(p.Z!=0){var Y=p.qd,J=p.rd;for(e(el[p.Z]!=null);N<C;++N)el[p.Z](Y,J,M,$,M,$,W),Y=M,J=$,$+=W;p.qd=Y,p.rd=J}}function ts(p,N){var C=p.l.ma,M=C.Z==0||C.Z==1?p.l.j:p.C;if(M=p.C<M?M:p.C,e(N<=p.l.o),N>M){var $=p.l.width,W=C.ca,Y=C.tb+$*M,J=p.V,ee=p.Ba+p.c*M,le=p.gc;e(p.ab==1),e(le[0].hc==3),_o(le[0],M,N,J,ee,W,Y),sr(C,M,N,W,Y,$)}p.C=p.Ma=N}function aa(p,N,C,M,$,W,Y){var J=p.$/M,ee=p.$%M,le=p.m,xe=p.s,Ce=C+p.$,ie=Ce;$=C+M*$;var ve=C+M*W,Ee=280+xe.ua,Fe=p.Pb?J:16777216,Ae=0<xe.ua?xe.Wa:null,Oe=xe.wc,He=Ce<ve?es(xe,ee,J):null;e(p.C<W),e(ve<=$);var Qe=!1;e:for(;;){for(;Qe||Ce<ve;){var Ke=0;if(J>=Fe){var xt=Ce-C;e((Fe=p).Pb),Fe.wd=Fe.m,Fe.xd=xt,0<Fe.s.ua&&st(Fe.s.Wa,Fe.s.vb),Fe=J+Tl}if(ee&Oe||(He=es(xe,ee,J)),e(He!=null),He.Qb&&(N[Ce]=He.qb,Qe=!0),!Qe)if(be(le),He.jc){Ke=le,xt=N;var ut=Ce,tn=He.pd[re(Ke)&El-1];e(He.jc),256>tn.g?(me(Ke,Ke.u+tn.g),xt[ut]=tn.value,Ke=0):(me(Ke,Ke.u+tn.g-256),e(256<=tn.value),Ke=tn.value),Ke==0&&(Qe=!0)}else Ke=nr(He.G[0],He.H[0],le);if(le.h)break;if(Qe||256>Ke){if(!Qe)if(He.nd)N[Ce]=(He.qb|Ke<<8)>>>0;else{if(be(le),Qe=nr(He.G[1],He.H[1],le),be(le),xt=nr(He.G[2],He.H[2],le),ut=nr(He.G[3],He.H[3],le),le.h)break;N[Ce]=(ut<<24|Qe<<16|Ke<<8|xt)>>>0}if(Qe=!1,++Ce,++ee>=M&&(ee=0,++J,Y!=null&&J<=W&&!(J%16)&&Y(p,J),Ae!=null))for(;ie<Ce;)Ke=N[ie++],Ae.X[(506832829*Ke&4294967295)>>>Ae.Mb]=Ke}else if(280>Ke){if(Ke=ra(Ke-256,le),xt=nr(He.G[4],He.H[4],le),be(le),xt=sa(M,xt=ra(xt,le)),le.h)break;if(Ce-C<xt||$-Ce<Ke)break e;for(ut=0;ut<Ke;++ut)N[Ce+ut]=N[Ce+ut-xt];for(Ce+=Ke,ee+=Ke;ee>=M;)ee-=M,++J,Y!=null&&J<=W&&!(J%16)&&Y(p,J);if(e(Ce<=$),ee&Oe&&(He=es(xe,ee,J)),Ae!=null)for(;ie<Ce;)Ke=N[ie++],Ae.X[(506832829*Ke&4294967295)>>>Ae.Mb]=Ke}else{if(!(Ke<Ee))break e;for(Qe=Ke-280,e(Ae!=null);ie<Ce;)Ke=N[ie++],Ae.X[(506832829*Ke&4294967295)>>>Ae.Mb]=Ke;Ke=Ce,e(!(Qe>>>(xt=Ae).Xa)),N[Ke]=xt.X[Qe],Qe=!0}Qe||e(le.h==he(le))}if(p.Pb&&le.h&&Ce<$)e(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&st(p.s.vb,p.s.Wa);else{if(le.h)break e;Y?.(p,J>W?W:J),p.a=0,p.$=Ce-C}return 1}return p.a=3,0}function Oa(p){e(p!=null),p.vc=null,p.yc=null,p.Ya=null;var N=p.Wa;N!=null&&(N.X=null),p.vb=null,e(p!=null)}function fo(){var p=new Ft;return p==null?null:(p.a=0,p.xb=um,zn("Predictor","VP8LPredictors"),zn("Predictor","VP8LPredictors_C"),zn("PredictorAdd","VP8LPredictorsAdd"),zn("PredictorAdd","VP8LPredictorsAdd_C"),Wr=on,iu=en,ou=Er,Xo=ln,Qo=Lt,So=$t,mc=an,k.VP8LMapColor32b=jo,k.VP8LMapColor8b=Ws,p)}function ei(p,N,C,M,$){var W=1,Y=[p],J=[N],ee=M.m,le=M.s,xe=null,Ce=0;e:for(;;){if(C)for(;W&&ne(ee,1);){var ie=Y,ve=J,Ee=M,Fe=1,Ae=Ee.m,Oe=Ee.gc[Ee.ab],He=ne(Ae,2);if(Ee.Oc&1<<He)W=0;else{switch(Ee.Oc|=1<<He,Oe.hc=He,Oe.Ea=ie[0],Oe.nc=ve[0],Oe.K=[null],++Ee.ab,e(4>=Ee.ab),He){case 0:case 1:Oe.b=ne(Ae,3)+2,Fe=ei(Ge(Oe.Ea,Oe.b),Ge(Oe.nc,Oe.b),0,Ee,Oe.K),Oe.K=Oe.K[0];break;case 3:var Qe,Ke=ne(Ae,8)+1,xt=16<Ke?0:4<Ke?1:2<Ke?2:3;if(ie[0]=Ge(Oe.Ea,xt),Oe.b=xt,Qe=Fe=ei(Ke,1,0,Ee,Oe.K)){var ut,tn=Ke,mt=Oe,An=1<<(8>>mt.b),jr=o(An);if(jr==null)Qe=0;else{var hn=mt.K[0],dt=mt.w;for(jr[0]=mt.K[0][0],ut=1;ut<1*tn;++ut)jr[ut]=ct(hn[dt+ut],jr[ut-1]);for(;ut<4*An;++ut)jr[ut]=0;mt.K[0]=null,mt.K[0]=jr,Qe=1}}Fe=Qe;break;case 2:break;default:e(0)}W=Fe}}if(Y=Y[0],J=J[0],W&&ne(ee,1)&&!(W=1<=(Ce=ne(ee,4))&&11>=Ce)){M.a=3;break e}var rt;if(rt=W)t:{var Cr,Wt,gn,Jn=M,xs=Y,Js=J,xr=Ce,rs=C,fa=Jn.m,ss=Jn.s,vn=[null],Fn=1,Ir=0,Hn=Ai[xr];n:for(;;){if(rs&&ne(fa,1)){var ys=ne(fa,3)+2,Rr=Ge(xs,ys),Vn=Ge(Js,ys),Xr=Rr*Vn;if(!ei(Rr,Vn,0,Jn,vn))break n;for(vn=vn[0],ss.xc=ys,Cr=0;Cr<Xr;++Cr){var Zn=vn[Cr]>>8&65535;vn[Cr]=Zn,Zn>=Fn&&(Fn=Zn+1)}}if(fa.h)break n;for(Wt=0;5>Wt;++Wt){var as=yc[Wt];!Wt&&0<xr&&(as+=1<<xr),Ir<as&&(Ir=as)}var is=c(Fn*Hn,B),ir=Fn,On=c(ir,Ne);if(On==null)var ma=null;else e(65536>=ir),ma=On;var Vr=o(Ir);if(ma==null||Vr==null||is==null){Jn.a=1;break n}var Ot=is;for(Cr=gn=0;Cr<Fn;++Cr){var Vt=ma[Cr],Un=Vt.G,qa=Vt.H,Ri=0,Ra=1,os=0;for(Wt=0;5>Wt;++Wt){as=yc[Wt],Un[Wt]=Ot,qa[Wt]=gn,!Wt&&0<xr&&(as+=1<<xr);s:{var Ll,Dl=as,Ih=Jn,yr=Vr,hm=Ot,fm=gn,Rh=0,tl=Ih.m,Sy=ne(tl,1);if(a(yr,0,0,Dl),Sy){var mm=ne(tl,1)+1,gm=ne(tl,1),kh=ne(tl,gm==0?1:8);yr[kh]=1,mm==2&&(yr[kh=ne(tl,8)]=1);var ks=1}else{var Ur=o(19),Sd=ne(tl,4)+4;if(19<Sd){Ih.a=3;var Ml=0;break s}for(Ll=0;Ll<Sd;++Ll)Ur[Nd[Ll]]=ne(tl,3);var mu=void 0,wc=void 0,To=Ih,Ph=Ur,gu=Dl,Lh=yr,Dh=0,nl=To.m,pm=8,xm=c(128,B);r:for(;P(xm,0,7,Ph,19);){if(ne(nl,1)){var bp=2+2*ne(nl,3);if((mu=2+ne(nl,bp))>gu)break r}else mu=gu;for(wc=0;wc<gu&&mu--;){be(nl);var ym=xm[0+(127&re(nl))];me(nl,nl.u+ym.g);var Ol=ym.value;if(16>Ol)Lh[wc++]=Ol,Ol!=0&&(pm=Ol);else{var vp=Ol==16,wp=Ol-16,Np=uu[wp],bm=ne(nl,Si[wp])+Np;if(wc+bm>gu)break r;for(var jp=vp?pm:0;0<bm--;)Lh[wc++]=jp}}Dh=1;break r}Dh||(To.a=3),ks=Dh}(ks=ks&&!tl.h)&&(Rh=P(hm,fm,8,yr,Dl)),ks&&Rh!=0?Ml=Rh:(Ih.a=3,Ml=0)}if(Ml==0)break n;if(Ra&&_h[Wt]==1&&(Ra=Ot[gn].g==0),Ri+=Ot[gn].g,gn+=Ml,3>=Wt){var Nc,Mh=Vr[0];for(Nc=1;Nc<as;++Nc)Vr[Nc]>Mh&&(Mh=Vr[Nc]);os+=Mh}}if(Vt.nd=Ra,Vt.Qb=0,Ra&&(Vt.qb=(Un[3][qa[3]+0].value<<24|Un[1][qa[1]+0].value<<16|Un[2][qa[2]+0].value)>>>0,Ri==0&&256>Un[0][qa[0]+0].value&&(Vt.Qb=1,Vt.qb+=Un[0][qa[0]+0].value<<8)),Vt.jc=!Vt.Qb&&6>os,Vt.jc){var Ed,Co=Vt;for(Ed=0;Ed<El;++Ed){var rl=Ed,sl=Co.pd[rl],Oh=Co.G[0][Co.H[0]+rl];256<=Oh.value?(sl.g=Oh.g+256,sl.value=Oh.value):(sl.g=0,sl.value=0,rl>>=fr(Oh,8,sl),rl>>=fr(Co.G[1][Co.H[1]+rl],16,sl),rl>>=fr(Co.G[2][Co.H[2]+rl],0,sl),fr(Co.G[3][Co.H[3]+rl],24,sl))}}}ss.vc=vn,ss.Wb=Fn,ss.Ya=ma,ss.yc=is,rt=1;break t}rt=0}if(!(W=rt)){M.a=3;break e}if(0<Ce){if(le.ua=1<<Ce,!se(le.Wa,Ce)){M.a=1,W=0;break e}}else le.ua=0;var Fh=M,jc=Y,_p=J,pu=Fh.s,xu=pu.xc;if(Fh.c=jc,Fh.i=_p,pu.md=Ge(jc,xu),pu.wc=xu==0?-1:(1<<xu)-1,C){M.xb=Cl;break e}if((xe=o(Y*J))==null){M.a=1,W=0;break e}W=(W=aa(M,xe,0,Y,J,J,null))&&!ee.h;break e}return W?($!=null?$[0]=xe:(e(xe==null),e(C)),M.$=0,C||Oa(le)):Oa(le),W}function ia(p,N){var C=p.c*p.i,M=C+N+16*N;return e(p.c<=N),p.V=o(M),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+C+N,1)}function Hi(p,N){var C=p.C,M=N-C,$=p.V,W=p.Ba+p.c*C;for(e(N<=p.l.o);0<M;){var Y=16<M?16:M,J=p.l.ma,ee=p.l.width,le=ee*Y,xe=J.ca,Ce=J.tb+ee*C,ie=p.Ta,ve=p.Ua;zs(p,Y,$,W),li(ie,ve,xe,Ce,le),sr(J,C,C+Y,xe,Ce,ee),M-=Y,$+=Y*p.c,C+=Y}e(C==N),p.C=p.Ma=N}function wa(){this.ub=this.yd=this.td=this.Rb=0}function qs(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Na(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Fa(){this.Yb=(function(){var p=[];return(function N(C,M,$){for(var W=$[M],Y=0;Y<W&&(C.push($.length>M+1?[]:0),!($.length<M+1));Y++)N(C[Y],M+1,$)})(p,0,[3,11]),p})()}function Tr(){this.jb=o(3),this.Wc=u([4,8],Fa),this.Xc=u([4,17],Fa)}function yl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function oa(){this.ld=this.La=this.dd=this.tc=0}function Va(){this.Na=this.la=0}function ti(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Uo(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function bl(){this.uc=this.M=this.Nb=0,this.wa=Array(new oa),this.Y=0,this.ya=Array(new Uo),this.aa=0,this.l=new Cs}function vl(){this.y=o(16),this.f=o(8),this.ea=o(8)}function oc(){this.cb=this.a=0,this.sc="",this.m=new q,this.Od=new wa,this.Kc=new qs,this.ed=new yl,this.Qa=new Na,this.Ic=this.$c=this.Aa=0,this.D=new bl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,q),this.ia=0,this.pb=c(4,ti),this.Pa=new Tr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new vl),this.Hd=0,this.rb=Array(new Va),this.sb=0,this.wa=Array(new oa),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Uo),this.L=this.aa=0,this.gd=u([4,2],oa),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ja(p,N){return 0>p?0:p>N?N:p}function Cs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Mr(){var p=new oc;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,ci||(ci=Rn)),p}function wn(p,N,C){return p.a==0&&(p.a=N,p.sc=C,p.cb=0),0}function Gi(p,N,C){return 3<=C&&p[N+0]==157&&p[N+1]==1&&p[N+2]==42}function Ua(p,N){if(p==null)return 0;if(p.a=0,p.sc="OK",N==null)return wn(p,2,"null VP8Io passed to VP8GetHeaders()");var C=N.data,M=N.w,$=N.ha;if(4>$)return wn(p,7,"Truncated header.");var W=C[M+0]|C[M+1]<<8|C[M+2]<<16,Y=p.Od;if(Y.Rb=!(1&W),Y.td=W>>1&7,Y.yd=W>>4&1,Y.ub=W>>5,3<Y.td)return wn(p,3,"Incorrect keyframe parameters.");if(!Y.yd)return wn(p,4,"Frame not displayable.");M+=3,$-=3;var J=p.Kc;if(Y.Rb){if(7>$)return wn(p,7,"cannot parse picture header");if(!Gi(C,M,$))return wn(p,3,"Bad code word");J.c=16383&(C[M+4]<<8|C[M+3]),J.Td=C[M+4]>>6,J.i=16383&(C[M+6]<<8|C[M+5]),J.Ud=C[M+6]>>6,M+=7,$-=7,p.za=J.c+15>>4,p.Ub=J.i+15>>4,N.width=J.c,N.height=J.i,N.Da=0,N.j=0,N.v=0,N.va=N.width,N.o=N.height,N.da=0,N.ib=N.width,N.hb=N.height,N.U=N.width,N.T=N.height,a((W=p.Pa).jb,0,255,W.jb.length),e((W=p.Qa)!=null),W.Cb=0,W.Bb=0,W.Fb=1,a(W.Zb,0,0,W.Zb.length),a(W.Lb,0,0,W.Lb)}if(Y.ub>$)return wn(p,7,"bad partition length");ce(W=p.m,C,M,Y.ub),M+=Y.ub,$-=Y.ub,Y.Rb&&(J.Ld=ke(W),J.Kd=ke(W)),J=p.Qa;var ee,le=p.Pa;if(e(W!=null),e(J!=null),J.Cb=ke(W),J.Cb){if(J.Bb=ke(W),ke(W)){for(J.Fb=ke(W),ee=0;4>ee;++ee)J.Zb[ee]=ke(W)?de(W,7):0;for(ee=0;4>ee;++ee)J.Lb[ee]=ke(W)?de(W,6):0}if(J.Bb)for(ee=0;3>ee;++ee)le.jb[ee]=ke(W)?pe(W,8):255}else J.Bb=0;if(W.Ka)return wn(p,3,"cannot parse segment header");if((J=p.ed).zd=ke(W),J.Tb=pe(W,6),J.wb=pe(W,3),J.Pc=ke(W),J.Pc&&ke(W)){for(le=0;4>le;++le)ke(W)&&(J.vd[le]=de(W,6));for(le=0;4>le;++le)ke(W)&&(J.od[le]=de(W,6))}if(p.L=J.Tb==0?0:J.zd?1:2,W.Ka)return wn(p,3,"cannot parse filter header");var xe=$;if($=ee=M,M=ee+xe,J=xe,p.Xb=(1<<pe(p.m,2))-1,xe<3*(le=p.Xb))C=7;else{for(ee+=3*le,J-=3*le,xe=0;xe<le;++xe){var Ce=C[$+0]|C[$+1]<<8|C[$+2]<<16;Ce>J&&(Ce=J),ce(p.Jc[+xe],C,ee,Ce),ee+=Ce,J-=Ce,$+=3}ce(p.Jc[+le],C,ee,J),C=ee<M?0:5}if(C!=0)return wn(p,C,"cannot parse partitions");for(C=pe(ee=p.m,7),$=ke(ee)?de(ee,4):0,M=ke(ee)?de(ee,4):0,J=ke(ee)?de(ee,4):0,le=ke(ee)?de(ee,4):0,ee=ke(ee)?de(ee,4):0,xe=p.Qa,Ce=0;4>Ce;++Ce){if(xe.Cb){var ie=xe.Zb[Ce];xe.Fb||(ie+=C)}else{if(0<Ce){p.pb[Ce]=p.pb[0];continue}ie=C}var ve=p.pb[Ce];ve.Sc[0]=Ti[ja(ie+$,127)],ve.Sc[1]=Ci[ja(ie+0,127)],ve.Eb[0]=2*Ti[ja(ie+M,127)],ve.Eb[1]=101581*Ci[ja(ie+J,127)]>>16,8>ve.Eb[1]&&(ve.Eb[1]=8),ve.Qc[0]=Ti[ja(ie+le,117)],ve.Qc[1]=Ci[ja(ie+ee,127)],ve.lc=ie+ee}if(!Y.Rb)return wn(p,4,"Not a key frame.");for(ke(W),Y=p.Pa,C=0;4>C;++C){for($=0;8>$;++$)for(M=0;3>M;++M)for(J=0;11>J;++J)le=qe(W,Nr[C][$][M][J])?pe(W,8):xp[C][$][M][J],Y.Wc[C][$].Yb[M][J]=le;for($=0;17>$;++$)Y.Xc[C][$]=Y.Wc[C][Tn[$]]}return p.kc=ke(W),p.kc&&(p.Bd=pe(W,8)),p.cb=1}function Rn(p,N,C,M,$,W,Y){var J=N[$].Yb[C];for(C=0;16>$;++$){if(!qe(p,J[C+0]))return $;for(;!qe(p,J[C+1]);)if(J=N[++$].Yb[0],C=0,$==16)return 16;var ee=N[$+1].Yb;if(qe(p,J[C+2])){var le=p,xe=0;if(qe(le,(ie=J)[(Ce=C)+3]))if(qe(le,ie[Ce+6])){for(J=0,Ce=2*(xe=qe(le,ie[Ce+8]))+(ie=qe(le,ie[Ce+9+xe])),xe=0,ie=pp[Ce];ie[J];++J)xe+=xe+qe(le,ie[J]);xe+=3+(8<<Ce)}else qe(le,ie[Ce+7])?(xe=7+2*qe(le,165),xe+=qe(le,145)):xe=5+qe(le,159);else xe=qe(le,ie[Ce+4])?3+qe(le,ie[Ce+5]):2;J=ee[2]}else xe=1,J=ee[1];ee=Y+cm[$],0>(le=p).b&&Le(le);var Ce,ie=le.b,ve=(Ce=le.Ca>>1)-(le.I>>ie)>>31;--le.b,le.Ca+=ve,le.Ca|=1,le.I-=(Ce+1&ve)<<ie,W[ee]=((xe^ve)-ve)*M[(0<$)+0]}return 16}function mo(p){var N=p.rb[p.sb-1];N.la=0,N.Na=0,a(p.zc,0,0,p.zc.length),p.ja=0}function Gr(p,N,C,M,$){$=p[N+C+32*M]+($>>3),p[N+C+32*M]=-256&$?0>$?0:255:$}function wr(p,N,C,M,$,W){Gr(p,N,0,C,M+$),Gr(p,N,1,C,M+W),Gr(p,N,2,C,M-W),Gr(p,N,3,C,M-$)}function Or(p){return(20091*p>>16)+p}function Bo(p,N,C,M){var $,W=0,Y=o(16);for($=0;4>$;++$){var J=p[N+0]+p[N+8],ee=p[N+0]-p[N+8],le=(35468*p[N+4]>>16)-Or(p[N+12]),xe=Or(p[N+4])+(35468*p[N+12]>>16);Y[W+0]=J+xe,Y[W+1]=ee+le,Y[W+2]=ee-le,Y[W+3]=J-xe,W+=4,N++}for($=W=0;4>$;++$)J=(p=Y[W+0]+4)+Y[W+8],ee=p-Y[W+8],le=(35468*Y[W+4]>>16)-Or(Y[W+12]),Gr(C,M,0,0,J+(xe=Or(Y[W+4])+(35468*Y[W+12]>>16))),Gr(C,M,1,0,ee+le),Gr(C,M,2,0,ee-le),Gr(C,M,3,0,J-xe),W++,M+=32}function nu(p,N,C,M){var $=p[N+0]+4,W=35468*p[N+4]>>16,Y=Or(p[N+4]),J=35468*p[N+1]>>16;wr(C,M,0,$+Y,p=Or(p[N+1]),J),wr(C,M,1,$+W,p,J),wr(C,M,2,$-W,p,J),wr(C,M,3,$-Y,p,J)}function lc(p,N,C,M,$){Bo(p,N,C,M),$&&Bo(p,N+16,C,M+4)}function Hs(p,N,C,M){Jo(p,N+0,C,M,1),Jo(p,N+32,C,M+128,1)}function cc(p,N,C,M){var $;for(p=p[N+0]+4,$=0;4>$;++$)for(N=0;4>N;++N)Gr(C,M,N,$,p)}function $i(p,N,C,M){p[N+0]&&qn(p,N+0,C,M),p[N+16]&&qn(p,N+16,C,M+4),p[N+32]&&qn(p,N+32,C,M+128),p[N+48]&&qn(p,N+48,C,M+128+4)}function gs(p,N,C,M){var $,W=o(16);for($=0;4>$;++$){var Y=p[N+0+$]+p[N+12+$],J=p[N+4+$]+p[N+8+$],ee=p[N+4+$]-p[N+8+$],le=p[N+0+$]-p[N+12+$];W[0+$]=Y+J,W[8+$]=Y-J,W[4+$]=le+ee,W[12+$]=le-ee}for($=0;4>$;++$)Y=(p=W[0+4*$]+3)+W[3+4*$],J=W[1+4*$]+W[2+4*$],ee=W[1+4*$]-W[2+4*$],le=p-W[3+4*$],C[M+0]=Y+J>>3,C[M+16]=le+ee>>3,C[M+32]=Y-J>>3,C[M+48]=le-ee>>3,M+=64}function go(p,N,C){var M,$=N-32,W=da,Y=255-p[$-1];for(M=0;M<C;++M){var J,ee=W,le=Y+p[N-1];for(J=0;J<C;++J)p[N+J]=ee[le+p[$+J]];N+=32}}function uc(p,N){go(p,N,4)}function dc(p,N){go(p,N,8)}function wl(p,N){go(p,N,16)}function Nl(p,N){var C;for(C=0;16>C;++C)r(p,N+32*C,p,N-32,16)}function Wi(p,N){var C;for(C=16;0<C;--C)a(p,N,p[N-1],16),N+=32}function la(p,N,C){var M;for(M=0;16>M;++M)a(N,C+32*M,p,16)}function ni(p,N){var C,M=16;for(C=0;16>C;++C)M+=p[N-1+32*C]+p[N+C-32];la(M>>5,p,N)}function Ki(p,N){var C,M=8;for(C=0;16>C;++C)M+=p[N-1+32*C];la(M>>4,p,N)}function ca(p,N){var C,M=8;for(C=0;16>C;++C)M+=p[N+C-32];la(M>>4,p,N)}function po(p,N){la(128,p,N)}function Mt(p,N,C){return p+2*N+C+2>>2}function zo(p,N){var C,M=N-32;for(M=new Uint8Array([Mt(p[M-1],p[M+0],p[M+1]),Mt(p[M+0],p[M+1],p[M+2]),Mt(p[M+1],p[M+2],p[M+3]),Mt(p[M+2],p[M+3],p[M+4])]),C=0;4>C;++C)r(p,N+32*C,M,0,M.length)}function jl(p,N){var C=p[N-1],M=p[N-1+32],$=p[N-1+64],W=p[N-1+96];Je(p,N+0,16843009*Mt(p[N-1-32],C,M)),Je(p,N+32,16843009*Mt(C,M,$)),Je(p,N+64,16843009*Mt(M,$,W)),Je(p,N+96,16843009*Mt($,W,W))}function xo(p,N){var C,M=4;for(C=0;4>C;++C)M+=p[N+C-32]+p[N-1+32*C];for(M>>=3,C=0;4>C;++C)a(p,N+32*C,M,4)}function ps(p,N){var C=p[N-1+0],M=p[N-1+32],$=p[N-1+64],W=p[N-1-32],Y=p[N+0-32],J=p[N+1-32],ee=p[N+2-32],le=p[N+3-32];p[N+0+96]=Mt(M,$,p[N-1+96]),p[N+1+96]=p[N+0+64]=Mt(C,M,$),p[N+2+96]=p[N+1+64]=p[N+0+32]=Mt(W,C,M),p[N+3+96]=p[N+2+64]=p[N+1+32]=p[N+0+0]=Mt(Y,W,C),p[N+3+64]=p[N+2+32]=p[N+1+0]=Mt(J,Y,W),p[N+3+32]=p[N+2+0]=Mt(ee,J,Y),p[N+3+0]=Mt(le,ee,J)}function ns(p,N){var C=p[N+1-32],M=p[N+2-32],$=p[N+3-32],W=p[N+4-32],Y=p[N+5-32],J=p[N+6-32],ee=p[N+7-32];p[N+0+0]=Mt(p[N+0-32],C,M),p[N+1+0]=p[N+0+32]=Mt(C,M,$),p[N+2+0]=p[N+1+32]=p[N+0+64]=Mt(M,$,W),p[N+3+0]=p[N+2+32]=p[N+1+64]=p[N+0+96]=Mt($,W,Y),p[N+3+32]=p[N+2+64]=p[N+1+96]=Mt(W,Y,J),p[N+3+64]=p[N+2+96]=Mt(Y,J,ee),p[N+3+96]=Mt(J,ee,ee)}function qo(p,N){var C=p[N-1+0],M=p[N-1+32],$=p[N-1+64],W=p[N-1-32],Y=p[N+0-32],J=p[N+1-32],ee=p[N+2-32],le=p[N+3-32];p[N+0+0]=p[N+1+64]=W+Y+1>>1,p[N+1+0]=p[N+2+64]=Y+J+1>>1,p[N+2+0]=p[N+3+64]=J+ee+1>>1,p[N+3+0]=ee+le+1>>1,p[N+0+96]=Mt($,M,C),p[N+0+64]=Mt(M,C,W),p[N+0+32]=p[N+1+96]=Mt(C,W,Y),p[N+1+32]=p[N+2+96]=Mt(W,Y,J),p[N+2+32]=p[N+3+96]=Mt(Y,J,ee),p[N+3+32]=Mt(J,ee,le)}function Wn(p,N){var C=p[N+0-32],M=p[N+1-32],$=p[N+2-32],W=p[N+3-32],Y=p[N+4-32],J=p[N+5-32],ee=p[N+6-32],le=p[N+7-32];p[N+0+0]=C+M+1>>1,p[N+1+0]=p[N+0+64]=M+$+1>>1,p[N+2+0]=p[N+1+64]=$+W+1>>1,p[N+3+0]=p[N+2+64]=W+Y+1>>1,p[N+0+32]=Mt(C,M,$),p[N+1+32]=p[N+0+96]=Mt(M,$,W),p[N+2+32]=p[N+1+96]=Mt($,W,Y),p[N+3+32]=p[N+2+96]=Mt(W,Y,J),p[N+3+64]=Mt(Y,J,ee),p[N+3+96]=Mt(J,ee,le)}function _a(p,N){var C=p[N-1+0],M=p[N-1+32],$=p[N-1+64],W=p[N-1+96];p[N+0+0]=C+M+1>>1,p[N+2+0]=p[N+0+32]=M+$+1>>1,p[N+2+32]=p[N+0+64]=$+W+1>>1,p[N+1+0]=Mt(C,M,$),p[N+3+0]=p[N+1+32]=Mt(M,$,W),p[N+3+32]=p[N+1+64]=Mt($,W,W),p[N+3+64]=p[N+2+64]=p[N+0+96]=p[N+1+96]=p[N+2+96]=p[N+3+96]=W}function Ho(p,N){var C=p[N-1+0],M=p[N-1+32],$=p[N-1+64],W=p[N-1+96],Y=p[N-1-32],J=p[N+0-32],ee=p[N+1-32],le=p[N+2-32];p[N+0+0]=p[N+2+32]=C+Y+1>>1,p[N+0+32]=p[N+2+64]=M+C+1>>1,p[N+0+64]=p[N+2+96]=$+M+1>>1,p[N+0+96]=W+$+1>>1,p[N+3+0]=Mt(J,ee,le),p[N+2+0]=Mt(Y,J,ee),p[N+1+0]=p[N+3+32]=Mt(C,Y,J),p[N+1+32]=p[N+3+64]=Mt(M,C,Y),p[N+1+64]=p[N+3+96]=Mt($,M,C),p[N+1+96]=Mt(W,$,M)}function ri(p,N){var C;for(C=0;8>C;++C)r(p,N+32*C,p,N-32,8)}function hc(p,N){var C;for(C=0;8>C;++C)a(p,N,p[N-1],8),N+=32}function Sa(p,N,C){var M;for(M=0;8>M;++M)a(N,C+32*M,p,8)}function Yi(p,N){var C,M=8;for(C=0;8>C;++C)M+=p[N+C-32]+p[N-1+32*C];Sa(M>>4,p,N)}function Ea(p,N){var C,M=4;for(C=0;8>C;++C)M+=p[N+C-32];Sa(M>>3,p,N)}function $r(p,N){var C,M=4;for(C=0;8>C;++C)M+=p[N-1+32*C];Sa(M>>3,p,N)}function xi(p,N){Sa(128,p,N)}function Is(p,N,C){var M=p[N-C],$=p[N+0],W=3*($-M)+Zo[1020+p[N-2*C]-p[N+C]],Y=bd[112+(W+4>>3)];p[N-C]=da[255+M+bd[112+(W+3>>3)]],p[N+0]=da[255+$-Y]}function yi(p,N,C,M){var $=p[N+0],W=p[N+C];return Ks[255+p[N-2*C]-p[N-C]]>M||Ks[255+W-$]>M}function yo(p,N,C,M){return 4*Ks[255+p[N-C]-p[N+0]]+Ks[255+p[N-2*C]-p[N+C]]<=M}function bi(p,N,C,M,$){var W=p[N-3*C],Y=p[N-2*C],J=p[N-C],ee=p[N+0],le=p[N+C],xe=p[N+2*C],Ce=p[N+3*C];return 4*Ks[255+J-ee]+Ks[255+Y-le]>M?0:Ks[255+p[N-4*C]-W]<=$&&Ks[255+W-Y]<=$&&Ks[255+Y-J]<=$&&Ks[255+Ce-xe]<=$&&Ks[255+xe-le]<=$&&Ks[255+le-ee]<=$}function vi(p,N,C,M){var $=2*M+1;for(M=0;16>M;++M)yo(p,N+M,C,$)&&Is(p,N+M,C)}function Ba(p,N,C,M){var $=2*M+1;for(M=0;16>M;++M)yo(p,N+M*C,1,$)&&Is(p,N+M*C,1)}function Go(p,N,C,M){var $;for($=3;0<$;--$)vi(p,N+=4*C,C,M)}function _l(p,N,C,M){var $;for($=3;0<$;--$)Ba(p,N+=4,C,M)}function Aa(p,N,C,M,$,W,Y,J){for(W=2*W+1;0<$--;){if(bi(p,N,C,W,Y))if(yi(p,N,C,J))Is(p,N,C);else{var ee=p,le=N,xe=C,Ce=ee[le-2*xe],ie=ee[le-xe],ve=ee[le+0],Ee=ee[le+xe],Fe=ee[le+2*xe],Ae=27*(He=Zo[1020+3*(ve-ie)+Zo[1020+Ce-Ee]])+63>>7,Oe=18*He+63>>7,He=9*He+63>>7;ee[le-3*xe]=da[255+ee[le-3*xe]+He],ee[le-2*xe]=da[255+Ce+Oe],ee[le-xe]=da[255+ie+Ae],ee[le+0]=da[255+ve-Ae],ee[le+xe]=da[255+Ee-Oe],ee[le+2*xe]=da[255+Fe-He]}N+=M}}function wi(p,N,C,M,$,W,Y,J){for(W=2*W+1;0<$--;){if(bi(p,N,C,W,Y))if(yi(p,N,C,J))Is(p,N,C);else{var ee=p,le=N,xe=C,Ce=ee[le-xe],ie=ee[le+0],ve=ee[le+xe],Ee=bd[112+(4+(Fe=3*(ie-Ce))>>3)],Fe=bd[112+(Fe+3>>3)],Ae=Ee+1>>1;ee[le-2*xe]=da[255+ee[le-2*xe]+Ae],ee[le-xe]=da[255+Ce+Fe],ee[le+0]=da[255+ie-Ee],ee[le+xe]=da[255+ve-Ae]}N+=M}}function fc(p,N,C,M,$,W){Aa(p,N,C,1,16,M,$,W)}function si(p,N,C,M,$,W){Aa(p,N,1,C,16,M,$,W)}function Sl(p,N,C,M,$,W){var Y;for(Y=3;0<Y;--Y)wi(p,N+=4*C,C,1,16,M,$,W)}function A(p,N,C,M,$,W){var Y;for(Y=3;0<Y;--Y)wi(p,N+=4,1,C,16,M,$,W)}function G(p,N,C,M,$,W,Y,J){Aa(p,N,$,1,8,W,Y,J),Aa(C,M,$,1,8,W,Y,J)}function oe(p,N,C,M,$,W,Y,J){Aa(p,N,1,$,8,W,Y,J),Aa(C,M,1,$,8,W,Y,J)}function ge(p,N,C,M,$,W,Y,J){wi(p,N+4*$,$,1,8,W,Y,J),wi(C,M+4*$,$,1,8,W,Y,J)}function we(p,N,C,M,$,W,Y,J){wi(p,N+4,1,$,8,W,Y,J),wi(C,M+4,1,$,8,W,Y,J)}function Ue(){this.ba=new Et,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new xn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ye(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ht(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function pt(){this.ua=0,this.Wa=new rn,this.vb=new rn,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ne,this.yc=new B}function Ft(){this.xb=this.a=0,this.l=new Cs,this.ca=new Et,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Q,this.Pb=0,this.wd=new Q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new pt,this.ab=0,this.gc=c(4,ht),this.Oc=0}function It(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Cs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function En(p,N,C,M,$,W,Y){for(p=p==null?0:p[N+0],N=0;N<Y;++N)$[W+N]=p+C[M+N]&255,p=$[W+N]}function mr(p,N,C,M,$,W,Y){var J;if(p==null)En(null,null,C,M,$,W,Y);else for(J=0;J<Y;++J)$[W+J]=p[N+J]+C[M+J]&255}function rr(p,N,C,M,$,W,Y){if(p==null)En(null,null,C,M,$,W,Y);else{var J,ee=p[N+0],le=ee,xe=ee;for(J=0;J<Y;++J)le=xe+(ee=p[N+J])-le,xe=C[M+J]+(-256&le?0>le?0:255:le)&255,le=ee,$[W+J]=xe}}function x(p,N,C,M){var $=N.width,W=N.o;if(e(p!=null&&N!=null),0>C||0>=M||C+M>W)return null;if(!p.Cc){if(p.ga==null){var Y;if(p.ga=new It,(Y=p.ga==null)||(Y=N.width*N.o,e(p.Gb.length==0),p.Gb=o(Y),p.Uc=0,p.Gb==null?Y=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,Y=1),Y=!Y),!Y){Y=p.ga;var J=p.Fa,ee=p.P,le=p.qc,xe=p.mb,Ce=p.nb,ie=ee+1,ve=le-1,Ee=Y.l;if(e(J!=null&&xe!=null&&N!=null),el[0]=null,el[1]=En,el[2]=mr,el[3]=rr,Y.ca=xe,Y.tb=Ce,Y.c=N.width,Y.i=N.height,e(0<Y.c&&0<Y.i),1>=le)N=0;else if(Y.$a=3&J[ee+0],Y.Z=J[ee+0]>>2&3,Y.Lc=J[ee+0]>>4&3,ee=J[ee+0]>>6&3,0>Y.$a||1<Y.$a||4<=Y.Z||1<Y.Lc||ee)N=0;else if(Ee.put=Ct,Ee.ac=ms,Ee.bc=qi,Ee.ma=Y,Ee.width=N.width,Ee.height=N.height,Ee.Da=N.Da,Ee.v=N.v,Ee.va=N.va,Ee.j=N.j,Ee.o=N.o,Y.$a)e:{e(Y.$a==1),N=fo();t:for(;;){if(N==null){N=0;break e}if(e(Y!=null),Y.mc=N,N.c=Y.c,N.i=Y.i,N.l=Y.l,N.l.ma=Y,N.l.width=Y.c,N.l.height=Y.i,N.a=0,Se(N.m,J,ie,ve),!ei(Y.c,Y.i,1,N,null)||(N.ab==1&&N.gc[0].hc==3&&$n(N.s)?(Y.ic=1,J=N.c*N.i,N.Ta=null,N.Ua=0,N.V=o(J),N.Ba=0,N.V==null?(N.a=1,N=0):N=1):(Y.ic=0,N=ia(N,Y.c)),!N))break t;N=1;break e}Y.mc=null,N=0}else N=ve>=Y.c*Y.i;Y=!N}if(Y)return null;p.ga.Lc!=1?p.Ga=0:M=W-C}e(p.ga!=null),e(C+M<=W);e:{if(N=(J=p.ga).c,W=J.l.o,J.$a==0){if(ie=p.rc,ve=p.Vc,Ee=p.Fa,ee=p.P+1+C*N,le=p.mb,xe=p.nb+C*N,e(ee<=p.P+p.qc),J.Z!=0)for(e(el[J.Z]!=null),Y=0;Y<M;++Y)el[J.Z](ie,ve,Ee,ee,le,xe,N),ie=le,ve=xe,xe+=N,ee+=N;else for(Y=0;Y<M;++Y)r(le,xe,Ee,ee,N),ie=le,ve=xe,xe+=N,ee+=N;p.rc=ie,p.Vc=ve}else{if(e(J.mc!=null),N=C+M,e((Y=J.mc)!=null),e(N<=Y.i),Y.C>=N)N=1;else if(J.ic||Pe(),J.ic){J=Y.V,ie=Y.Ba,ve=Y.c;var Fe=Y.i,Ae=(Ee=1,ee=Y.$/ve,le=Y.$%ve,xe=Y.m,Ce=Y.s,Y.$),Oe=ve*Fe,He=ve*N,Qe=Ce.wc,Ke=Ae<He?es(Ce,le,ee):null;e(Ae<=Oe),e(N<=Fe),e($n(Ce));t:for(;;){for(;!xe.h&&Ae<He;){if(le&Qe||(Ke=es(Ce,le,ee)),e(Ke!=null),be(xe),256>(Fe=nr(Ke.G[0],Ke.H[0],xe)))J[ie+Ae]=Fe,++Ae,++le>=ve&&(le=0,++ee<=N&&!(ee%16)&&ts(Y,ee));else{if(!(280>Fe)){Ee=0;break t}Fe=ra(Fe-256,xe);var xt,ut=nr(Ke.G[4],Ke.H[4],xe);if(be(xe),!(Ae>=(ut=sa(ve,ut=ra(ut,xe)))&&Oe-Ae>=Fe)){Ee=0;break t}for(xt=0;xt<Fe;++xt)J[ie+Ae+xt]=J[ie+Ae+xt-ut];for(Ae+=Fe,le+=Fe;le>=ve;)le-=ve,++ee<=N&&!(ee%16)&&ts(Y,ee);Ae<He&&le&Qe&&(Ke=es(Ce,le,ee))}e(xe.h==he(xe))}ts(Y,ee>N?N:ee);break t}!Ee||xe.h&&Ae<Oe?(Ee=0,Y.a=xe.h?5:3):Y.$=Ae,N=Ee}else N=aa(Y,Y.V,Y.Ba,Y.c,Y.i,N,Hi);if(!N){M=0;break e}}C+M>=W&&(p.Cc=1),M=1}if(!M)return null;if(p.Cc&&((M=p.ga)!=null&&(M.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+C*$}function R(p,N,C,M,$,W){for(;0<$--;){var Y,J=p,ee=N+(C?1:0),le=p,xe=N+(C?0:3);for(Y=0;Y<M;++Y){var Ce=le[xe+4*Y];Ce!=255&&(Ce*=32897,J[ee+4*Y+0]=J[ee+4*Y+0]*Ce>>23,J[ee+4*Y+1]=J[ee+4*Y+1]*Ce>>23,J[ee+4*Y+2]=J[ee+4*Y+2]*Ce>>23)}N+=W}}function z(p,N,C,M,$){for(;0<M--;){var W;for(W=0;W<C;++W){var Y=p[N+2*W+0],J=15&(le=p[N+2*W+1]),ee=4369*J,le=(240&le|le>>4)*ee>>16;p[N+2*W+0]=(240&Y|Y>>4)*ee>>16&240|(15&Y|Y<<4)*ee>>16>>4&15,p[N+2*W+1]=240&le|J}N+=$}}function Z(p,N,C,M,$,W,Y,J){var ee,le,xe=255;for(le=0;le<$;++le){for(ee=0;ee<M;++ee){var Ce=p[N+ee];W[Y+4*ee]=Ce,xe&=Ce}N+=C,Y+=J}return xe!=255}function _e(p,N,C,M,$){var W;for(W=0;W<$;++W)C[M+W]=p[N+W]>>8}function Pe(){pc=R,ji=z,pd=Z,li=_e}function et(p,N,C){k[p]=function(M,$,W,Y,J,ee,le,xe,Ce,ie,ve,Ee,Fe,Ae,Oe,He,Qe){var Ke,xt=Qe-1>>1,ut=J[ee+0]|le[xe+0]<<16,tn=Ce[ie+0]|ve[Ee+0]<<16;e(M!=null);var mt=3*ut+tn+131074>>2;for(N(M[$+0],255&mt,mt>>16,Fe,Ae),W!=null&&(mt=3*tn+ut+131074>>2,N(W[Y+0],255&mt,mt>>16,Oe,He)),Ke=1;Ke<=xt;++Ke){var An=J[ee+Ke]|le[xe+Ke]<<16,jr=Ce[ie+Ke]|ve[Ee+Ke]<<16,hn=ut+An+tn+jr+524296,dt=hn+2*(An+tn)>>3;mt=dt+ut>>1,ut=(hn=hn+2*(ut+jr)>>3)+An>>1,N(M[$+2*Ke-1],255&mt,mt>>16,Fe,Ae+(2*Ke-1)*C),N(M[$+2*Ke-0],255&ut,ut>>16,Fe,Ae+(2*Ke-0)*C),W!=null&&(mt=hn+tn>>1,ut=dt+jr>>1,N(W[Y+2*Ke-1],255&mt,mt>>16,Oe,He+(2*Ke-1)*C),N(W[Y+2*Ke+0],255&ut,ut>>16,Oe,He+(2*Ke+0)*C)),ut=An,tn=jr}1&Qe||(mt=3*ut+tn+131074>>2,N(M[$+Qe-1],255&mt,mt>>16,Fe,Ae+(Qe-1)*C),W!=null&&(mt=3*tn+ut+131074>>2,N(W[Y+Qe-1],255&mt,mt>>16,Oe,He+(Qe-1)*C)))}}function Jt(){Xs[vh]=bc,Xs[ha]=du,Xs[wh]=dm,Xs[_i]=Eh,Xs[vd]=Il,Xs[lu]=Ao,Xs[Al]=Rl,Xs[wd]=du,Xs[Nh]=Eh,Xs[cu]=Il,Xs[jh]=Ao}function gr(p){return p&-16384?0>p?0:255:p>>Ah}function bn(p,N){return gr((19077*p>>8)+(26149*N>>8)-14234)}function Kn(p,N,C){return gr((19077*p>>8)-(6419*N>>8)-(13320*C>>8)+8708)}function Rs(p,N){return gr((19077*p>>8)+(33050*N>>8)-17685)}function Gs(p,N,C,M,$){M[$+0]=bn(p,C),M[$+1]=Kn(p,N,C),M[$+2]=Rs(p,N)}function ar(p,N,C,M,$){M[$+0]=Rs(p,N),M[$+1]=Kn(p,N,C),M[$+2]=bn(p,C)}function $s(p,N,C,M,$){var W=Kn(p,N,C);N=W<<3&224|Rs(p,N)>>3,M[$+0]=248&bn(p,C)|W>>5,M[$+1]=N}function ai(p,N,C,M,$){var W=240&Rs(p,N)|15;M[$+0]=240&bn(p,C)|Kn(p,N,C)>>4,M[$+1]=W}function bo(p,N,C,M,$){M[$+0]=255,Gs(p,N,C,M,$+1)}function vo(p,N,C,M,$){ar(p,N,C,M,$),M[$+3]=255}function Ta(p,N,C,M,$){Gs(p,N,C,M,$),M[$+3]=255}function $o(p,N,C){k[p]=function(M,$,W,Y,J,ee,le,xe,Ce){for(var ie=xe+(-2&Ce)*C;xe!=ie;)N(M[$+0],W[Y+0],J[ee+0],le,xe),N(M[$+1],W[Y+0],J[ee+0],le,xe+C),$+=2,++Y,++ee,xe+=2*C;1&Ce&&N(M[$+0],W[Y+0],J[ee+0],le,xe)}}function ru(p,N,C){return C==0?p==0?N==0?6:5:N==0?4:0:C}function fd(p,N,C,M,$){switch(p>>>30){case 3:Jo(N,C,M,$,0);break;case 2:ua(N,C,M,$);break;case 1:qn(N,C,M,$)}}function ii(p,N){var C,M,$=N.M,W=N.Nb,Y=p.oc,J=p.pc+40,ee=p.oc,le=p.pc+584,xe=p.oc,Ce=p.pc+600;for(C=0;16>C;++C)Y[J+32*C-1]=129;for(C=0;8>C;++C)ee[le+32*C-1]=129,xe[Ce+32*C-1]=129;for(0<$?Y[J-1-32]=ee[le-1-32]=xe[Ce-1-32]=129:(a(Y,J-32-1,127,21),a(ee,le-32-1,127,9),a(xe,Ce-32-1,127,9)),M=0;M<p.za;++M){var ie=N.ya[N.aa+M];if(0<M){for(C=-1;16>C;++C)r(Y,J+32*C-4,Y,J+32*C+12,4);for(C=-1;8>C;++C)r(ee,le+32*C-4,ee,le+32*C+4,4),r(xe,Ce+32*C-4,xe,Ce+32*C+4,4)}var ve=p.Gd,Ee=p.Hd+M,Fe=ie.ad,Ae=ie.Hc;if(0<$&&(r(Y,J-32,ve[Ee].y,0,16),r(ee,le-32,ve[Ee].f,0,8),r(xe,Ce-32,ve[Ee].ea,0,8)),ie.Za){var Oe=Y,He=J-32+16;for(0<$&&(M>=p.za-1?a(Oe,He,ve[Ee].y[15],4):r(Oe,He,ve[Ee+1].y,0,4)),C=0;4>C;C++)Oe[He+128+C]=Oe[He+256+C]=Oe[He+384+C]=Oe[He+0+C];for(C=0;16>C;++C,Ae<<=2)Oe=Y,He=J+Yr[C],Fr[ie.Ob[C]](Oe,He),fd(Ae,Fe,16*+C,Oe,He)}else if(Oe=ru(M,$,ie.Ob[0]),Ia[Oe](Y,J),Ae!=0)for(C=0;16>C;++C,Ae<<=2)fd(Ae,Fe,16*+C,Y,J+Yr[C]);for(C=ie.Gc,Oe=ru(M,$,ie.Dd),Zi[Oe](ee,le),Zi[Oe](xe,Ce),Ae=Fe,Oe=ee,He=le,255&(ie=0|C)&&(170&ie?Ni(Ae,256,Oe,He):Mn(Ae,256,Oe,He)),ie=xe,Ae=Ce,255&(C>>=8)&&(170&C?Ni(Fe,320,ie,Ae):Mn(Fe,320,ie,Ae)),$<p.Ub-1&&(r(ve[Ee].y,0,Y,J+480,16),r(ve[Ee].f,0,ee,le+224,8),r(ve[Ee].ea,0,xe,Ce+224,8)),C=8*W*p.B,ve=p.sa,Ee=p.ta+16*M+16*W*p.R,Fe=p.qa,ie=p.ra+8*M+C,Ae=p.Ha,Oe=p.Ia+8*M+C,C=0;16>C;++C)r(ve,Ee+C*p.R,Y,J+32*C,16);for(C=0;8>C;++C)r(Fe,ie+C*p.B,ee,le+32*C,8),r(Ae,Oe+C*p.B,xe,Ce+32*C,8)}}function Xi(p,N,C,M,$,W,Y,J,ee){var le=[0],xe=[0],Ce=0,ie=ee!=null?ee.kd:0,ve=ee??new Ye;if(p==null||12>C)return 7;ve.data=p,ve.w=N,ve.ha=C,N=[N],C=[C],ve.gb=[ve.gb];e:{var Ee=N,Fe=C,Ae=ve.gb;if(e(p!=null),e(Fe!=null),e(Ae!=null),Ae[0]=0,12<=Fe[0]&&!t(p,Ee[0],"RIFF")){if(t(p,Ee[0]+8,"WEBP")){Ae=3;break e}var Oe=ft(p,Ee[0]+4);if(12>Oe||4294967286<Oe){Ae=3;break e}if(ie&&Oe>Fe[0]-8){Ae=7;break e}Ae[0]=Oe,Ee[0]+=12,Fe[0]-=12}Ae=0}if(Ae!=0)return Ae;for(Oe=0<ve.gb[0],C=C[0];;){e:{var He=p;Fe=N,Ae=C;var Qe=le,Ke=xe,xt=Ee=[0];if((mt=Ce=[Ce])[0]=0,8>Ae[0])Ae=7;else{if(!t(He,Fe[0],"VP8X")){if(ft(He,Fe[0]+4)!=10){Ae=3;break e}if(18>Ae[0]){Ae=7;break e}var ut=ft(He,Fe[0]+8),tn=1+at(He,Fe[0]+12);if(2147483648<=tn*(He=1+at(He,Fe[0]+15))){Ae=3;break e}xt!=null&&(xt[0]=ut),Qe!=null&&(Qe[0]=tn),Ke!=null&&(Ke[0]=He),Fe[0]+=18,Ae[0]-=18,mt[0]=1}Ae=0}}if(Ce=Ce[0],Ee=Ee[0],Ae!=0)return Ae;if(Fe=!!(2&Ee),!Oe&&Ce)return 3;if(W!=null&&(W[0]=!!(16&Ee)),Y!=null&&(Y[0]=Fe),J!=null&&(J[0]=0),Y=le[0],Ee=xe[0],Ce&&Fe&&ee==null){Ae=0;break}if(4>C){Ae=7;break}if(Oe&&Ce||!Oe&&!Ce&&!t(p,N[0],"ALPH")){C=[C],ve.na=[ve.na],ve.P=[ve.P],ve.Sa=[ve.Sa];e:{ut=p,Ae=N,Oe=C;var mt=ve.gb;Qe=ve.na,Ke=ve.P,xt=ve.Sa,tn=22,e(ut!=null),e(Oe!=null),He=Ae[0];var An=Oe[0];for(e(Qe!=null),e(xt!=null),Qe[0]=null,Ke[0]=null,xt[0]=0;;){if(Ae[0]=He,Oe[0]=An,8>An){Ae=7;break e}var jr=ft(ut,He+4);if(4294967286<jr){Ae=3;break e}var hn=8+jr+1&-2;if(tn+=hn,0<mt&&tn>mt){Ae=3;break e}if(!t(ut,He,"VP8 ")||!t(ut,He,"VP8L")){Ae=0;break e}if(An[0]<hn){Ae=7;break e}t(ut,He,"ALPH")||(Qe[0]=ut,Ke[0]=He+8,xt[0]=jr),He+=hn,An-=hn}}if(C=C[0],ve.na=ve.na[0],ve.P=ve.P[0],ve.Sa=ve.Sa[0],Ae!=0)break}C=[C],ve.Ja=[ve.Ja],ve.xa=[ve.xa];e:if(mt=p,Ae=N,Oe=C,Qe=ve.gb[0],Ke=ve.Ja,xt=ve.xa,ut=Ae[0],He=!t(mt,ut,"VP8 "),tn=!t(mt,ut,"VP8L"),e(mt!=null),e(Oe!=null),e(Ke!=null),e(xt!=null),8>Oe[0])Ae=7;else{if(He||tn){if(mt=ft(mt,ut+4),12<=Qe&&mt>Qe-12){Ae=3;break e}if(ie&&mt>Oe[0]-8){Ae=7;break e}Ke[0]=mt,Ae[0]+=8,Oe[0]-=8,xt[0]=tn}else xt[0]=5<=Oe[0]&&mt[ut+0]==47&&!(mt[ut+4]>>5),Ke[0]=Oe[0];Ae=0}if(C=C[0],ve.Ja=ve.Ja[0],ve.xa=ve.xa[0],N=N[0],Ae!=0)break;if(4294967286<ve.Ja)return 3;if(J==null||Fe||(J[0]=ve.xa?2:1),Y=[Y],Ee=[Ee],ve.xa){if(5>C){Ae=7;break}J=Y,ie=Ee,Fe=W,p==null||5>C?p=0:5<=C&&p[N+0]==47&&!(p[N+4]>>5)?(Oe=[0],mt=[0],Qe=[0],Se(Ke=new Q,p,N,C),va(Ke,Oe,mt,Qe)?(J!=null&&(J[0]=Oe[0]),ie!=null&&(ie[0]=mt[0]),Fe!=null&&(Fe[0]=Qe[0]),p=1):p=0):p=0}else{if(10>C){Ae=7;break}J=Ee,p==null||10>C||!Gi(p,N+3,C-3)?p=0:(ie=p[N+0]|p[N+1]<<8|p[N+2]<<16,Fe=16383&(p[N+7]<<8|p[N+6]),p=16383&(p[N+9]<<8|p[N+8]),1&ie||3<(ie>>1&7)||!(ie>>4&1)||ie>>5>=ve.Ja||!Fe||!p?p=0:(Y&&(Y[0]=Fe),J&&(J[0]=p),p=1))}if(!p||(Y=Y[0],Ee=Ee[0],Ce&&(le[0]!=Y||xe[0]!=Ee)))return 3;ee!=null&&(ee[0]=ve,ee.offset=N-ee.w,e(4294967286>N-ee.w),e(ee.offset==ee.ha-C));break}return Ae==0||Ae==7&&Ce&&ee==null?(W!=null&&(W[0]|=ve.na!=null&&0<ve.na.length),M!=null&&(M[0]=Y),$!=null&&($[0]=Ee),0):Ae}function Wo(p,N,C){var M=N.width,$=N.height,W=0,Y=0,J=M,ee=$;if(N.Da=p!=null&&0<p.Da,N.Da&&(J=p.cd,ee=p.bd,W=p.v,Y=p.j,11>C||(W&=-2,Y&=-2),0>W||0>Y||0>=J||0>=ee||W+J>M||Y+ee>$))return 0;if(N.v=W,N.j=Y,N.va=W+J,N.o=Y+ee,N.U=J,N.T=ee,N.da=p!=null&&0<p.da,N.da){if(!Pt(J,ee,C=[p.ib],W=[p.hb]))return 0;N.ib=C[0],N.hb=W[0]}return N.ob=p!=null&&p.ob,N.Kb=p==null||!p.Sd,N.da&&(N.ob=N.ib<3*M/4&&N.hb<3*$/4,N.Kb=0),1}function md(p){if(p==null)return 2;if(11>p.S){var N=p.f.RGBA;N.fb+=(p.height-1)*N.A,N.A=-N.A}else N=p.f.kb,p=p.height,N.O+=(p-1)*N.fa,N.fa=-N.fa,N.N+=(p-1>>1)*N.Ab,N.Ab=-N.Ab,N.W+=(p-1>>1)*N.Db,N.Db=-N.Db,N.F!=null&&(N.J+=(p-1)*N.lb,N.lb=-N.lb);return 0}function Qi(p,N,C,M){if(M==null||0>=p||0>=N)return 2;if(C!=null){if(C.Da){var $=C.cd,W=C.bd,Y=-2&C.v,J=-2&C.j;if(0>Y||0>J||0>=$||0>=W||Y+$>p||J+W>N)return 2;p=$,N=W}if(C.da){if(!Pt(p,N,$=[C.ib],W=[C.hb]))return 2;p=$[0],N=W[0]}}M.width=p,M.height=N;e:{var ee=M.width,le=M.height;if(p=M.S,0>=ee||0>=le||!(p>=vh&&13>p))p=2;else{if(0>=M.Rd&&M.sd==null){Y=W=$=N=0;var xe=(J=ee*Ch[p])*le;if(11>p||(W=(le+1)/2*(N=(ee+1)/2),p==12&&(Y=($=ee)*le)),(le=o(xe+2*W+Y))==null){p=1;break e}M.sd=le,11>p?((ee=M.f.RGBA).eb=le,ee.fb=0,ee.A=J,ee.size=xe):((ee=M.f.kb).y=le,ee.O=0,ee.fa=J,ee.Fd=xe,ee.f=le,ee.N=0+xe,ee.Ab=N,ee.Cd=W,ee.ea=le,ee.W=0+xe+W,ee.Db=N,ee.Ed=W,p==12&&(ee.F=le,ee.J=0+xe+2*W),ee.Tc=Y,ee.lb=$)}if(N=1,$=M.S,W=M.width,Y=M.height,$>=vh&&13>$)if(11>$)p=M.f.RGBA,N&=(J=Math.abs(p.A))*(Y-1)+W<=p.size,N&=J>=W*Ch[$],N&=p.eb!=null;else{p=M.f.kb,J=(W+1)/2,xe=(Y+1)/2,ee=Math.abs(p.fa),le=Math.abs(p.Ab);var Ce=Math.abs(p.Db),ie=Math.abs(p.lb),ve=ie*(Y-1)+W;N&=ee*(Y-1)+W<=p.Fd,N&=le*(xe-1)+J<=p.Cd,N=(N&=Ce*(xe-1)+J<=p.Ed)&ee>=W&le>=J&Ce>=J,N&=p.y!=null,N&=p.f!=null,N&=p.ea!=null,$==12&&(N&=ie>=W,N&=ve<=p.Tc,N&=p.F!=null)}else N=0;p=N?0:2}}return p!=0||C!=null&&C.fd&&(p=md(M)),p}var El=64,za=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ca=24,wo=32,No=8,Ko=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];lt("Predictor0","PredictorAdd0"),k.Predictor0=function(){return 4278190080},k.Predictor1=function(p){return p},k.Predictor2=function(p,N,C){return N[C+0]},k.Predictor3=function(p,N,C){return N[C+1]},k.Predictor4=function(p,N,C){return N[C-1]},k.Predictor5=function(p,N,C){return St(St(p,N[C+1]),N[C+0])},k.Predictor6=function(p,N,C){return St(p,N[C-1])},k.Predictor7=function(p,N,C){return St(p,N[C+0])},k.Predictor8=function(p,N,C){return St(N[C-1],N[C+0])},k.Predictor9=function(p,N,C){return St(N[C+0],N[C+1])},k.Predictor10=function(p,N,C){return St(St(p,N[C-1]),St(N[C+0],N[C+1]))},k.Predictor11=function(p,N,C){var M=N[C+0];return 0>=Xt(M>>24&255,p>>24&255,(N=N[C-1])>>24&255)+Xt(M>>16&255,p>>16&255,N>>16&255)+Xt(M>>8&255,p>>8&255,N>>8&255)+Xt(255&M,255&p,255&N)?M:p},k.Predictor12=function(p,N,C){var M=N[C+0];return(sn((p>>24&255)+(M>>24&255)-((N=N[C-1])>>24&255))<<24|sn((p>>16&255)+(M>>16&255)-(N>>16&255))<<16|sn((p>>8&255)+(M>>8&255)-(N>>8&255))<<8|sn((255&p)+(255&M)-(255&N)))>>>0},k.Predictor13=function(p,N,C){var M=N[C-1];return(dn((p=St(p,N[C+0]))>>24&255,M>>24&255)<<24|dn(p>>16&255,M>>16&255)<<16|dn(p>>8&255,M>>8&255)<<8|dn(255&p,255&M))>>>0};var su=k.PredictorAdd0;k.PredictorAdd1=pn,lt("Predictor2","PredictorAdd2"),lt("Predictor3","PredictorAdd3"),lt("Predictor4","PredictorAdd4"),lt("Predictor5","PredictorAdd5"),lt("Predictor6","PredictorAdd6"),lt("Predictor7","PredictorAdd7"),lt("Predictor8","PredictorAdd8"),lt("Predictor9","PredictorAdd9"),lt("Predictor10","PredictorAdd10"),lt("Predictor11","PredictorAdd11"),lt("Predictor12","PredictorAdd12"),lt("Predictor13","PredictorAdd13");var au=k.PredictorAdd2;Nt("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),Nt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var Wr,xh=k.ColorIndexInverseTransform,jo=k.MapARGB,_o=k.VP8LColorIndexInverseTransformAlpha,Ws=k.MapAlpha,Yo=k.VP8LPredictorsAdd=[];Yo.length=16,(k.VP8LPredictors=[]).length=16,(k.VP8LPredictorsAdd_C=[]).length=16,(k.VP8LPredictors_C=[]).length=16;var iu,ou,Xo,Qo,So,mc,oi,Jo,ua,Ni,qn,Mn,pr,Kr,Eo,Ji,gc,gd,im,fp,mp,gp,om,lm,pc,ji,pd,li,xc=o(511),yh=o(2041),xd=o(225),yd=o(767),bh=0,Zo=yh,bd=xd,da=yd,Ks=xc,vh=0,ha=1,wh=2,_i=3,vd=4,lu=5,Al=6,wd=7,Nh=8,cu=9,jh=10,Si=[2,3,7],uu=[3,3,11],yc=[280,256,256,256,40],_h=[0,1,1,1,0],Nd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ei=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ai=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Tl=8,Ti=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ci=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ci=null,pp=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],cm=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Sh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],xp=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ys=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Nr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Tn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ia=[],Fr=[],Zi=[],Cl=1,um=2,el=[],Xs=[];et("UpsampleRgbLinePair",Gs,3),et("UpsampleBgrLinePair",ar,3),et("UpsampleRgbaLinePair",Ta,4),et("UpsampleBgraLinePair",vo,4),et("UpsampleArgbLinePair",bo,4),et("UpsampleRgba4444LinePair",ai,2),et("UpsampleRgb565LinePair",$s,2);var bc=k.UpsampleRgbLinePair,dm=k.UpsampleBgrLinePair,du=k.UpsampleRgbaLinePair,Eh=k.UpsampleBgraLinePair,Il=k.UpsampleArgbLinePair,Ao=k.UpsampleRgba4444LinePair,Rl=k.UpsampleRgb565LinePair,Ii=16,hu=1<<Ii-1,vc=-227,kl=482,Ah=6,Pl=0,Qs=o(256),Th=o(256),yp=o(256),Ny=o(256),jy=o(kl-vc),_y=o(kl-vc);$o("YuvToRgbRow",Gs,3),$o("YuvToBgrRow",ar,3),$o("YuvToRgbaRow",Ta,4),$o("YuvToBgraRow",vo,4),$o("YuvToArgbRow",bo,4),$o("YuvToRgba4444Row",ai,2),$o("YuvToRgb565Row",$s,2);var Yr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],fu=[0,2,8],jd=[8,7,6,4,4,2,2,2,1,1,1,1],_d=1;this.WebPDecodeRGBA=function(p,N,C,M,$){var W=ha,Y=new Ue,J=new Et;Y.ba=J,J.S=W,J.width=[J.width],J.height=[J.height];var ee=J.width,le=J.height,xe=new jt;if(xe==null||p==null)var Ce=2;else e(xe!=null),Ce=Xi(p,N,C,xe.width,xe.height,xe.Pd,xe.Qd,xe.format,null);if(Ce!=0?ee=0:(ee!=null&&(ee[0]=xe.width[0]),le!=null&&(le[0]=xe.height[0]),ee=1),ee){J.width=J.width[0],J.height=J.height[0],M!=null&&(M[0]=J.width),$!=null&&($[0]=J.height);e:{if(M=new Cs,($=new Ye).data=p,$.w=N,$.ha=C,$.kd=1,N=[0],e($!=null),((p=Xi($.data,$.w,$.ha,null,null,null,N,null,$))==0||p==7)&&N[0]&&(p=4),(N=p)==0){if(e(Y!=null),M.data=$.data,M.w=$.w+$.offset,M.ha=$.ha-$.offset,M.put=Ct,M.ac=ms,M.bc=qi,M.ma=Y,$.xa){if((p=fo())==null){Y=1;break e}if((function(ie,ve){var Ee=[0],Fe=[0],Ae=[0];t:for(;;){if(ie==null)return 0;if(ve==null)return ie.a=2,0;if(ie.l=ve,ie.a=0,Se(ie.m,ve.data,ve.w,ve.ha),!va(ie.m,Ee,Fe,Ae)){ie.a=3;break t}if(ie.xb=um,ve.width=Ee[0],ve.height=Fe[0],!ei(Ee[0],Fe[0],1,ie,null))break t;return 1}return e(ie.a!=0),0})(p,M)){if(M=(N=Qi(M.width,M.height,Y.Oa,Y.ba))==0){t:{M=p;n:for(;;){if(M==null){M=0;break t}if(e(M.s.yc!=null),e(M.s.Ya!=null),e(0<M.s.Wb),e((C=M.l)!=null),e(($=C.ma)!=null),M.xb!=0){if(M.ca=$.ba,M.tb=$.tb,e(M.ca!=null),!Wo($.Oa,C,_i)){M.a=2;break n}if(!ia(M,C.width)||C.da)break n;if((C.da||zt(M.ca.S))&&Pe(),11>M.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),M.ca.f.kb.F!=null&&Pe()),M.Pb&&0<M.s.ua&&M.s.vb.X==null&&!se(M.s.vb,M.s.Wa.Xa)){M.a=1;break n}M.xb=0}if(!aa(M,M.V,M.Ba,M.c,M.i,C.o,Ts))break n;$.Dc=M.Ma,M=1;break t}e(M.a!=0),M=0}M=!M}M&&(N=p.a)}else N=p.a}else{if((p=new Mr)==null){Y=1;break e}if(p.Fa=$.na,p.P=$.P,p.qc=$.Sa,Ua(p,M)){if((N=Qi(M.width,M.height,Y.Oa,Y.ba))==0){if(p.Aa=0,C=Y.Oa,e(($=p)!=null),C!=null){if(0<(ee=0>(ee=C.Md)?0:100<ee?255:255*ee/100)){for(le=xe=0;4>le;++le)12>(Ce=$.pb[le]).lc&&(Ce.ia=ee*jd[0>Ce.lc?0:Ce.lc]>>3),xe|=Ce.ia;xe&&(alert("todo:VP8InitRandom"),$.ia=1)}$.Ga=C.Id,100<$.Ga?$.Ga=100:0>$.Ga&&($.Ga=0)}(function(ie,ve){if(ie==null)return 0;if(ve==null)return wn(ie,2,"NULL VP8Io parameter in VP8Decode().");if(!ie.cb&&!Ua(ie,ve))return 0;if(e(ie.cb),ve.ac==null||ve.ac(ve)){ve.ob&&(ie.L=0);var Ee=fu[ie.L];if(ie.L==2?(ie.yb=0,ie.zb=0):(ie.yb=ve.v-Ee>>4,ie.zb=ve.j-Ee>>4,0>ie.yb&&(ie.yb=0),0>ie.zb&&(ie.zb=0)),ie.Va=ve.o+15+Ee>>4,ie.Hb=ve.va+15+Ee>>4,ie.Hb>ie.za&&(ie.Hb=ie.za),ie.Va>ie.Ub&&(ie.Va=ie.Ub),0<ie.L){var Fe=ie.ed;for(Ee=0;4>Ee;++Ee){var Ae;if(ie.Qa.Cb){var Oe=ie.Qa.Lb[Ee];ie.Qa.Fb||(Oe+=Fe.Tb)}else Oe=Fe.Tb;for(Ae=0;1>=Ae;++Ae){var He=ie.gd[Ee][Ae],Qe=Oe;if(Fe.Pc&&(Qe+=Fe.vd[0],Ae&&(Qe+=Fe.od[0])),0<(Qe=0>Qe?0:63<Qe?63:Qe)){var Ke=Qe;0<Fe.wb&&(Ke=4<Fe.wb?Ke>>2:Ke>>1)>9-Fe.wb&&(Ke=9-Fe.wb),1>Ke&&(Ke=1),He.dd=Ke,He.tc=2*Qe+Ke,He.ld=40<=Qe?2:15<=Qe?1:0}else He.tc=0;He.La=Ae}}}Ee=0}else wn(ie,6,"Frame setup failed"),Ee=ie.a;if(Ee=Ee==0){if(Ee){ie.$c=0,0<ie.Aa||(ie.Ic=_d);t:{Ee=ie.Ic,Fe=4*(Ke=ie.za);var xt=32*Ke,ut=Ke+1,tn=0<ie.L?Ke*(0<ie.Aa?2:1):0,mt=(ie.Aa==2?2:1)*Ke;if((He=Fe+832+(Ae=3*(16*Ee+fu[ie.L])/2*xt)+(Oe=ie.Fa!=null&&0<ie.Fa.length?ie.Kc.c*ie.Kc.i:0))!=He)Ee=0;else{if(He>ie.Vb){if(ie.Vb=0,ie.Ec=o(He),ie.Fc=0,ie.Ec==null){Ee=wn(ie,1,"no memory during frame initialization.");break t}ie.Vb=He}He=ie.Ec,Qe=ie.Fc,ie.Ac=He,ie.Bc=Qe,Qe+=Fe,ie.Gd=c(xt,vl),ie.Hd=0,ie.rb=c(ut+1,Va),ie.sb=1,ie.wa=tn?c(tn,oa):null,ie.Y=0,ie.D.Nb=0,ie.D.wa=ie.wa,ie.D.Y=ie.Y,0<ie.Aa&&(ie.D.Y+=Ke),e(!0),ie.oc=He,ie.pc=Qe,Qe+=832,ie.ya=c(mt,Uo),ie.aa=0,ie.D.ya=ie.ya,ie.D.aa=ie.aa,ie.Aa==2&&(ie.D.aa+=Ke),ie.R=16*Ke,ie.B=8*Ke,Ke=(xt=fu[ie.L])*ie.R,xt=xt/2*ie.B,ie.sa=He,ie.ta=Qe+Ke,ie.qa=ie.sa,ie.ra=ie.ta+16*Ee*ie.R+xt,ie.Ha=ie.qa,ie.Ia=ie.ra+8*Ee*ie.B+xt,ie.$c=0,Qe+=Ae,ie.mb=Oe?He:null,ie.nb=Oe?Qe:null,e(Qe+Oe<=ie.Fc+ie.Vb),mo(ie),a(ie.Ac,ie.Bc,0,Fe),Ee=1}}if(Ee){if(ve.ka=0,ve.y=ie.sa,ve.O=ie.ta,ve.f=ie.qa,ve.N=ie.ra,ve.ea=ie.Ha,ve.Vd=ie.Ia,ve.fa=ie.R,ve.Rc=ie.B,ve.F=null,ve.J=0,!bh){for(Ee=-255;255>=Ee;++Ee)xc[255+Ee]=0>Ee?-Ee:Ee;for(Ee=-1020;1020>=Ee;++Ee)yh[1020+Ee]=-128>Ee?-128:127<Ee?127:Ee;for(Ee=-112;112>=Ee;++Ee)xd[112+Ee]=-16>Ee?-16:15<Ee?15:Ee;for(Ee=-255;510>=Ee;++Ee)yd[255+Ee]=0>Ee?0:255<Ee?255:Ee;bh=1}oi=gs,Jo=lc,Ni=Hs,qn=cc,Mn=$i,ua=nu,pr=fc,Kr=si,Eo=G,Ji=oe,gc=Sl,gd=A,im=ge,fp=we,mp=vi,gp=Ba,om=Go,lm=_l,Fr[0]=xo,Fr[1]=uc,Fr[2]=zo,Fr[3]=jl,Fr[4]=ps,Fr[5]=qo,Fr[6]=ns,Fr[7]=Wn,Fr[8]=Ho,Fr[9]=_a,Ia[0]=ni,Ia[1]=wl,Ia[2]=Nl,Ia[3]=Wi,Ia[4]=Ki,Ia[5]=ca,Ia[6]=po,Zi[0]=Yi,Zi[1]=dc,Zi[2]=ri,Zi[3]=hc,Zi[4]=$r,Zi[5]=Ea,Zi[6]=xi,Ee=1}else Ee=0}Ee&&(Ee=(function(An,jr){for(An.M=0;An.M<An.Va;++An.M){var hn,dt=An.Jc[An.M&An.Xb],rt=An.m,Cr=An;for(hn=0;hn<Cr.za;++hn){var Wt=rt,gn=Cr,Jn=gn.Ac,xs=gn.Bc+4*hn,Js=gn.zc,xr=gn.ya[gn.aa+hn];if(gn.Qa.Bb?xr.$b=qe(Wt,gn.Pa.jb[0])?2+qe(Wt,gn.Pa.jb[2]):qe(Wt,gn.Pa.jb[1]):xr.$b=0,gn.kc&&(xr.Ad=qe(Wt,gn.Bd)),xr.Za=!qe(Wt,145)+0,xr.Za){var rs=xr.Ob,fa=0;for(gn=0;4>gn;++gn){var ss,vn=Js[0+gn];for(ss=0;4>ss;++ss){vn=Ys[Jn[xs+ss]][vn];for(var Fn=Sh[qe(Wt,vn[0])];0<Fn;)Fn=Sh[2*Fn+qe(Wt,vn[Fn])];vn=-Fn,Jn[xs+ss]=vn}r(rs,fa,Jn,xs,4),fa+=4,Js[0+gn]=vn}}else vn=qe(Wt,156)?qe(Wt,128)?1:3:qe(Wt,163)?2:0,xr.Ob[0]=vn,a(Jn,xs,vn,4),a(Js,0,vn,4);xr.Dd=qe(Wt,142)?qe(Wt,114)?qe(Wt,183)?1:3:2:0}if(Cr.m.Ka)return wn(An,7,"Premature end-of-partition0 encountered.");for(;An.ja<An.za;++An.ja){if(Cr=dt,Wt=(rt=An).rb[rt.sb-1],Jn=rt.rb[rt.sb+rt.ja],hn=rt.ya[rt.aa+rt.ja],xs=rt.kc?hn.Ad:0)Wt.la=Jn.la=0,hn.Za||(Wt.Na=Jn.Na=0),hn.Hc=0,hn.Gc=0,hn.ia=0;else{var Ir,Hn;if(Wt=Jn,Jn=Cr,xs=rt.Pa.Xc,Js=rt.ya[rt.aa+rt.ja],xr=rt.pb[Js.$b],gn=Js.ad,rs=0,fa=rt.rb[rt.sb-1],vn=ss=0,a(gn,rs,0,384),Js.Za)var ys=0,Rr=xs[3];else{Fn=o(16);var Vn=Wt.Na+fa.Na;if(Vn=ci(Jn,xs[1],Vn,xr.Eb,0,Fn,0),Wt.Na=fa.Na=(0<Vn)+0,1<Vn)oi(Fn,0,gn,rs);else{var Xr=Fn[0]+3>>3;for(Fn=0;256>Fn;Fn+=16)gn[rs+Fn]=Xr}ys=1,Rr=xs[0]}var Zn=15&Wt.la,as=15&fa.la;for(Fn=0;4>Fn;++Fn){var is=1&as;for(Xr=Hn=0;4>Xr;++Xr)Zn=Zn>>1|(is=(Vn=ci(Jn,Rr,Vn=is+(1&Zn),xr.Sc,ys,gn,rs))>ys)<<7,Hn=Hn<<2|(3<Vn?3:1<Vn?2:gn[rs+0]!=0),rs+=16;Zn>>=4,as=as>>1|is<<7,ss=(ss<<8|Hn)>>>0}for(Rr=Zn,ys=as>>4,Ir=0;4>Ir;Ir+=2){for(Hn=0,Zn=Wt.la>>4+Ir,as=fa.la>>4+Ir,Fn=0;2>Fn;++Fn){for(is=1&as,Xr=0;2>Xr;++Xr)Vn=is+(1&Zn),Zn=Zn>>1|(is=0<(Vn=ci(Jn,xs[2],Vn,xr.Qc,0,gn,rs)))<<3,Hn=Hn<<2|(3<Vn?3:1<Vn?2:gn[rs+0]!=0),rs+=16;Zn>>=2,as=as>>1|is<<5}vn|=Hn<<4*Ir,Rr|=Zn<<4<<Ir,ys|=(240&as)<<Ir}Wt.la=Rr,fa.la=ys,Js.Hc=ss,Js.Gc=vn,Js.ia=43690&vn?0:xr.ia,xs=!(ss|vn)}if(0<rt.L&&(rt.wa[rt.Y+rt.ja]=rt.gd[hn.$b][hn.Za],rt.wa[rt.Y+rt.ja].La|=!xs),Cr.Ka)return wn(An,7,"Premature end-of-file encountered.")}if(mo(An),rt=jr,Cr=1,hn=(dt=An).D,Wt=0<dt.L&&dt.M>=dt.zb&&dt.M<=dt.Va,dt.Aa==0)t:{if(hn.M=dt.M,hn.uc=Wt,ii(dt,hn),Cr=1,hn=(Hn=dt.D).Nb,Wt=(vn=fu[dt.L])*dt.R,Jn=vn/2*dt.B,Fn=16*hn*dt.R,Xr=8*hn*dt.B,xs=dt.sa,Js=dt.ta-Wt+Fn,xr=dt.qa,gn=dt.ra-Jn+Xr,rs=dt.Ha,fa=dt.Ia-Jn+Xr,as=(Zn=Hn.M)==0,ss=Zn>=dt.Va-1,dt.Aa==2&&ii(dt,Hn),Hn.uc)for(is=(Vn=dt).D.M,e(Vn.D.uc),Hn=Vn.yb;Hn<Vn.Hb;++Hn){ys=Hn,Rr=is;var ir=(On=(os=Vn).D).Nb;Ir=os.R;var On=On.wa[On.Y+ys],ma=os.sa,Vr=os.ta+16*ir*Ir+16*ys,Ot=On.dd,Vt=On.tc;if(Vt!=0)if(e(3<=Vt),os.L==1)0<ys&&gp(ma,Vr,Ir,Vt+4),On.La&&lm(ma,Vr,Ir,Vt),0<Rr&&mp(ma,Vr,Ir,Vt+4),On.La&&om(ma,Vr,Ir,Vt);else{var Un=os.B,qa=os.qa,Ri=os.ra+8*ir*Un+8*ys,Ra=os.Ha,os=os.Ia+8*ir*Un+8*ys;ir=On.ld,0<ys&&(Kr(ma,Vr,Ir,Vt+4,Ot,ir),Ji(qa,Ri,Ra,os,Un,Vt+4,Ot,ir)),On.La&&(gd(ma,Vr,Ir,Vt,Ot,ir),fp(qa,Ri,Ra,os,Un,Vt,Ot,ir)),0<Rr&&(pr(ma,Vr,Ir,Vt+4,Ot,ir),Eo(qa,Ri,Ra,os,Un,Vt+4,Ot,ir)),On.La&&(gc(ma,Vr,Ir,Vt,Ot,ir),im(qa,Ri,Ra,os,Un,Vt,Ot,ir))}}if(dt.ia&&alert("todo:DitherRow"),rt.put!=null){if(Hn=16*Zn,Zn=16*(Zn+1),as?(rt.y=dt.sa,rt.O=dt.ta+Fn,rt.f=dt.qa,rt.N=dt.ra+Xr,rt.ea=dt.Ha,rt.W=dt.Ia+Xr):(Hn-=vn,rt.y=xs,rt.O=Js,rt.f=xr,rt.N=gn,rt.ea=rs,rt.W=fa),ss||(Zn-=vn),Zn>rt.o&&(Zn=rt.o),rt.F=null,rt.J=null,dt.Fa!=null&&0<dt.Fa.length&&Hn<Zn&&(rt.J=x(dt,rt,Hn,Zn-Hn),rt.F=dt.mb,rt.F==null&&rt.F.length==0)){Cr=wn(dt,3,"Could not decode alpha data.");break t}Hn<rt.j&&(vn=rt.j-Hn,Hn=rt.j,e(!(1&vn)),rt.O+=dt.R*vn,rt.N+=dt.B*(vn>>1),rt.W+=dt.B*(vn>>1),rt.F!=null&&(rt.J+=rt.width*vn)),Hn<Zn&&(rt.O+=rt.v,rt.N+=rt.v>>1,rt.W+=rt.v>>1,rt.F!=null&&(rt.J+=rt.v),rt.ka=Hn-rt.j,rt.U=rt.va-rt.v,rt.T=Zn-Hn,Cr=rt.put(rt))}hn+1!=dt.Ic||ss||(r(dt.sa,dt.ta-Wt,xs,Js+16*dt.R,Wt),r(dt.qa,dt.ra-Jn,xr,gn+8*dt.B,Jn),r(dt.Ha,dt.Ia-Jn,rs,fa+8*dt.B,Jn))}if(!Cr)return wn(An,6,"Output aborted.")}return 1})(ie,ve)),ve.bc!=null&&ve.bc(ve),Ee&=1}return Ee?(ie.cb=0,Ee):0})(p,M)||(N=p.a)}}else N=p.a}N==0&&Y.Oa!=null&&Y.Oa.fd&&(N=md(Y.ba))}Y=N}W=Y!=0?null:11>W?J.f.RGBA.eb:J.f.kb.y}else W=null;return W};var Ch=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(k,F){for(var I="",P=0;P<4;P++)I+=String.fromCharCode(k[F++]);return I}function g(k,F){return k[F+0]|k[F+1]<<8}function y(k,F){return(k[F+0]|k[F+1]<<8|k[F+2]<<16)>>>0}function w(k,F){return(k[F+0]|k[F+1]<<8|k[F+2]<<16|k[F+3]<<24)>>>0}new h;var b=[0],T=[0],S=[],j=new h,E=n,L=(function(k,F){var I={},P=0,B=!1,ue=0,Ne=0;if(I.frames=[],!(function(q,Q){for(var re=0;re<4;re++)if(q[Q+re]!="RIFF".charCodeAt(re))return!0;return!1})(k,F)){for(w(k,F+=4),F+=8;F<k.length;){var ce=f(k,F),pe=w(k,F+=4);F+=4;var de=pe+(1&pe);switch(ce){case"VP8 ":case"VP8L":I.frames[P]===void 0&&(I.frames[P]={}),(ne=I.frames[P]).src_off=B?Ne:F-8,ne.src_size=ue+pe+8,P++,B&&(B=!1,ue=0,Ne=0);break;case"VP8X":(ne=I.header={}).feature_flags=k[F];var Se=F+4;ne.canvas_width=1+y(k,Se),Se+=3,ne.canvas_height=1+y(k,Se),Se+=3;break;case"ALPH":B=!0,ue=de+8,Ne=F-8;break;case"ANIM":(ne=I.header).bgcolor=w(k,F),Se=F+4,ne.loop_count=g(k,Se),Se+=2;break;case"ANMF":var ze,ne;(ne=I.frames[P]={}).offset_x=2*y(k,F),F+=3,ne.offset_y=2*y(k,F),F+=3,ne.width=1+y(k,F),F+=3,ne.height=1+y(k,F),F+=3,ne.duration=y(k,F),F+=3,ze=k[F++],ne.dispose=1&ze,ne.blend=ze>>1&1}ce!="ANMF"&&(F+=de)}return I}})(E,0);L.response=E,L.rgbaoutput=!0,L.dataurl=!1;var D=L.header?L.header:null,O=L.frames?L.frames:null;if(D){D.loop_counter=D.loop_count,b=[D.canvas_height],T=[D.canvas_width];for(var te=0;te<O.length&&O[te].blend!=0;te++);}var ae=O[0],H=j.WebPDecodeRGBA(E,ae.src_off,ae.src_size,T,b);ae.rgba=H,ae.imgwidth=T[0],ae.imgheight=b[0];for(var V=0;V<T[0]*b[0]*4;V++)S[V]=H[V];return this.width=T,this.height=b,this.data=S,this}(function(n){var e,t,r,a,o,c,u,h,f,g=function(q){return q=q||{},this.isStrokeTransparent=q.isStrokeTransparent||!1,this.strokeOpacity=q.strokeOpacity||1,this.strokeStyle=q.strokeStyle||"#000000",this.fillStyle=q.fillStyle||"#000000",this.isFillTransparent=q.isFillTransparent||!1,this.fillOpacity=q.fillOpacity||1,this.font=q.font||"10px sans-serif",this.textBaseline=q.textBaseline||"alphabetic",this.textAlign=q.textAlign||"left",this.lineWidth=q.lineWidth||1,this.lineJoin=q.lineJoin||"miter",this.lineCap=q.lineCap||"butt",this.path=q.path||[],this.transform=q.transform!==void 0?q.transform.clone():new h,this.globalCompositeOperation=q.globalCompositeOperation||"normal",this.globalAlpha=q.globalAlpha||1,this.clip_path=q.clip_path||[],this.currentPoint=q.currentPoint||new c,this.miterLimit=q.miterLimit||10,this.lastPoint=q.lastPoint||new c,this.lineDashOffset=q.lineDashOffset||0,this.lineDash=q.lineDash||[],this.margin=q.margin||[0,0,0,0],this.prevPageLastElemOffset=q.prevPageLastElemOffset||0,this.ignoreClearRect=typeof q.ignoreClearRect!="boolean"||q.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new y(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,c=this.internal.Point,u=this.internal.Rectangle,h=this.internal.Matrix,f=new g}]);var y=function(q){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Q=q;Object.defineProperty(this,"pdf",{get:function(){return Q}});var re=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return re},set:function(se){re=!!se}});var he=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return he},set:function(se){he=!!se}});var me=0;Object.defineProperty(this,"posX",{get:function(){return me},set:function(se){isNaN(se)||(me=se)}});var be=0;Object.defineProperty(this,"posY",{get:function(){return be},set:function(se){isNaN(se)||(be=se)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(se){var st;typeof se=="number"?st=[se,se,se,se]:((st=new Array(4))[0]=se[0],st[1]=se.length>=2?se[1]:st[0],st[2]=se.length>=3?se[2]:st[0],st[3]=se.length>=4?se[3]:st[1]),f.margin=st}});var Le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Le},set:function(se){Le=se}});var ke=0;Object.defineProperty(this,"lastBreak",{get:function(){return ke},set:function(se){ke=se}});var qe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return qe},set:function(se){qe=se}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(se){se instanceof g&&(f=se)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(se){f.path=se}});var Je=[];Object.defineProperty(this,"ctxStack",{get:function(){return Je},set:function(se){Je=se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(se){var st;st=w(se),this.ctx.fillStyle=st.style,this.ctx.isFillTransparent=st.a===0,this.ctx.fillOpacity=st.a,this.pdf.setFillColor(st.r,st.g,st.b,{a:st.a}),this.pdf.setTextColor(st.r,st.g,st.b,{a:st.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(se){var st=w(se);this.ctx.strokeStyle=st.style,this.ctx.isStrokeTransparent=st.a===0,this.ctx.strokeOpacity=st.a,st.a===0?this.pdf.setDrawColor(255,255,255):(st.a,this.pdf.setDrawColor(st.r,st.g,st.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(se){["butt","round","square"].indexOf(se)!==-1&&(this.ctx.lineCap=se,this.pdf.setLineCap(se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(se){isNaN(se)||(this.ctx.lineWidth=se,this.pdf.setLineWidth(se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(se){["bevel","round","miter"].indexOf(se)!==-1&&(this.ctx.lineJoin=se,this.pdf.setLineJoin(se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(se){isNaN(se)||(this.ctx.miterLimit=se,this.pdf.setMiterLimit(se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(se){this.ctx.textBaseline=se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(se){["right","end","center","left","start"].indexOf(se)!==-1&&(this.ctx.textAlign=se)}});var it=null,at=null,ft=null;Object.defineProperty(this,"fontFaces",{get:function(){return ft},set:function(se){it=null,at=null,ft=se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(se){var st;if(this.ctx.font=se,(st=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(se))!==null){var rn=st[1];st[2];var Pt=st[3],Ge=st[4];st[5];var ct=st[6],lt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ge)[2];Ge=Math.floor(lt==="px"?parseFloat(Ge)*this.pdf.internal.scaleFactor:lt==="em"?parseFloat(Ge)*this.pdf.getFontSize():parseFloat(Ge)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ge);var Dt=(function(Nt){var Er,ln,Lt=[],$t=Nt.trim();if($t==="")return _1;if($t in p6)return[p6[$t]];for(;$t!=="";){switch(ln=null,Er=($t=y6($t)).charAt(0)){case'"':case"'":ln=lH($t.substring(1),Er);break;default:ln=cH($t)}if(ln===null||(Lt.push(ln[0]),($t=y6(ln[1]))!==""&&$t.charAt(0)!==","))return _1;$t=$t.replace(/^,/,"")}return Lt})(ct);if(this.fontFaces){var St=(function(Nt,Er){var ln=Nt.getFontList(),Lt=JSON.stringify(ln);if(it===null||at!==Lt){var $t=(function(an){var Tt=[];return Object.keys(an).forEach(function(zn){an[zn].forEach(function(zt){var qt=null;switch(zt){case"bold":qt={family:zn,weight:"bold"};break;case"italic":qt={family:zn,style:"italic"};break;case"bolditalic":qt={family:zn,weight:"bold",style:"italic"};break;case"":case"normal":qt={family:zn}}qt!==null&&(qt.ref={name:zn,style:zt},Tt.push(qt))})}),Tt})(ln);it=(function(an){for(var Tt={},zn=0;zn<an.length;++zn){var zt=j1(an[zn]),qt=zt.family,Gn=zt.stretch,Et=zt.style,jt=zt.weight;Tt[qt]=Tt[qt]||{},Tt[qt][Gn]=Tt[qt][Gn]||{},Tt[qt][Gn][Et]=Tt[qt][Gn][Et]||{},Tt[qt][Gn][Et][jt]=zt}return Tt})($t.concat(Er)),at=Lt}return it})(this.pdf,this.fontFaces),sn=Dt.map(function(Nt){return{family:Nt,stretch:"normal",weight:Pt,style:rn}}),dn=(function(Nt,Er,ln){for(var Lt=(ln=ln||{}).defaultFontFamily||"times",$t=Object.assign({},oH,ln.genericFontFamilies||{}),an=null,Tt=null,zn=0;zn<Er.length;++zn)if($t[(an=j1(Er[zn])).family]&&(an.family=$t[an.family]),Nt.hasOwnProperty(an.family)){Tt=Nt[an.family];break}if(!(Tt=Tt||Nt[Lt]))throw new Error("Could not find a font-family for the rule '"+x6(an)+"' and default family '"+Lt+"'.");if(Tt=(function(zt,qt){if(qt[zt])return qt[zt];var Gn=k2[zt],Et=Gn<=k2.normal?-1:1,jt=g6(qt,cC,Gn,Et);if(!jt)throw new Error("Could not find a matching font-stretch value for "+zt);return jt})(an.stretch,Tt),Tt=(function(zt,qt){if(qt[zt])return qt[zt];for(var Gn=lC[zt],Et=0;Et<Gn.length;++Et)if(qt[Gn[Et]])return qt[Gn[Et]];throw new Error("Could not find a matching font-style for "+zt)})(an.style,Tt),!(Tt=(function(zt,qt){if(qt[zt])return qt[zt];if(zt===400&&qt[500])return qt[500];if(zt===500&&qt[400])return qt[400];var Gn=iH[zt],Et=g6(qt,uC,Gn,zt<400?-1:1);if(!Et)throw new Error("Could not find a matching font-weight for value "+zt);return Et})(an.weight,Tt)))throw new Error("Failed to resolve a font for the rule '"+x6(an)+"'.");return Tt})(St,sn);this.pdf.setFont(dn.ref.name,dn.ref.style)}else{var Xt="";(Pt==="bold"||parseInt(Pt,10)>=700||rn==="bold")&&(Xt="bold"),rn==="italic"&&(Xt+="italic"),Xt.length===0&&(Xt="normal");for(var pn="",on={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},wt=0;wt<Dt.length;wt++){if(this.pdf.internal.getFont(Dt[wt],Xt,{noFallback:!0,disableWarning:!0})!==void 0){pn=Dt[wt];break}if(Xt==="bolditalic"&&this.pdf.internal.getFont(Dt[wt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)pn=Dt[wt],Xt="bold";else if(this.pdf.internal.getFont(Dt[wt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){pn=Dt[wt],Xt="normal";break}}if(pn===""){for(var en=0;en<Dt.length;en++)if(on[Dt[en]]){pn=on[Dt[en]];break}}pn=pn===""?"Times":pn,this.pdf.setFont(pn,Xt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(se){this.ctx.globalCompositeOperation=se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(se){this.ctx.globalAlpha=se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(se){this.ctx.lineDashOffset=se,ne.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(se){this.ctx.lineDash=se,ne.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(se){this.ctx.ignoreClearRect=!!se}})};y.prototype.setLineDash=function(q){this.lineDash=q},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){O.call(this,"fill",!1)},y.prototype.stroke=function(){O.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(q,Q){if(isNaN(q)||isNaN(Q))throw Sr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var re=this.ctx.transform.applyToPoint(new c(q,Q));this.path.push({type:"mt",x:re.x,y:re.y}),this.ctx.lastPoint=new c(q,Q)},y.prototype.closePath=function(){var q=new c(0,0),Q=0;for(Q=this.path.length-1;Q!==-1;Q--)if(this.path[Q].type==="begin"&&cr(this.path[Q+1])==="object"&&typeof this.path[Q+1].x=="number"){q=new c(this.path[Q+1].x,this.path[Q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(q.x,q.y)},y.prototype.lineTo=function(q,Q){if(isNaN(q)||isNaN(Q))throw Sr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var re=this.ctx.transform.applyToPoint(new c(q,Q));this.path.push({type:"lt",x:re.x,y:re.y}),this.ctx.lastPoint=new c(re.x,re.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),O.call(this,null,!0)},y.prototype.quadraticCurveTo=function(q,Q,re,he){if(isNaN(re)||isNaN(he)||isNaN(q)||isNaN(Q))throw Sr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var me=this.ctx.transform.applyToPoint(new c(re,he)),be=this.ctx.transform.applyToPoint(new c(q,Q));this.path.push({type:"qct",x1:be.x,y1:be.y,x:me.x,y:me.y}),this.ctx.lastPoint=new c(me.x,me.y)},y.prototype.bezierCurveTo=function(q,Q,re,he,me,be){if(isNaN(me)||isNaN(be)||isNaN(q)||isNaN(Q)||isNaN(re)||isNaN(he))throw Sr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Le=this.ctx.transform.applyToPoint(new c(me,be)),ke=this.ctx.transform.applyToPoint(new c(q,Q)),qe=this.ctx.transform.applyToPoint(new c(re,he));this.path.push({type:"bct",x1:ke.x,y1:ke.y,x2:qe.x,y2:qe.y,x:Le.x,y:Le.y}),this.ctx.lastPoint=new c(Le.x,Le.y)},y.prototype.arc=function(q,Q,re,he,me,be){if(isNaN(q)||isNaN(Q)||isNaN(re)||isNaN(he)||isNaN(me))throw Sr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(be=!!be,!this.ctx.transform.isIdentity){var Le=this.ctx.transform.applyToPoint(new c(q,Q));q=Le.x,Q=Le.y;var ke=this.ctx.transform.applyToPoint(new c(0,re)),qe=this.ctx.transform.applyToPoint(new c(0,0));re=Math.sqrt(Math.pow(ke.x-qe.x,2)+Math.pow(ke.y-qe.y,2))}Math.abs(me-he)>=2*Math.PI&&(he=0,me=2*Math.PI),this.path.push({type:"arc",x:q,y:Q,radius:re,startAngle:he,endAngle:me,counterclockwise:be})},y.prototype.arcTo=function(q,Q,re,he,me){throw new Error("arcTo not implemented.")},y.prototype.rect=function(q,Q,re,he){if(isNaN(q)||isNaN(Q)||isNaN(re)||isNaN(he))throw Sr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(q,Q),this.lineTo(q+re,Q),this.lineTo(q+re,Q+he),this.lineTo(q,Q+he),this.lineTo(q,Q),this.lineTo(q+re,Q),this.lineTo(q,Q)},y.prototype.fillRect=function(q,Q,re,he){if(isNaN(q)||isNaN(Q)||isNaN(re)||isNaN(he))throw Sr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var me={};this.lineCap!=="butt"&&(me.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(me.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(q,Q,re,he),this.fill(),me.hasOwnProperty("lineCap")&&(this.lineCap=me.lineCap),me.hasOwnProperty("lineJoin")&&(this.lineJoin=me.lineJoin)}},y.prototype.strokeRect=function(q,Q,re,he){if(isNaN(q)||isNaN(Q)||isNaN(re)||isNaN(he))throw Sr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");T.call(this)||(this.beginPath(),this.rect(q,Q,re,he),this.stroke())},y.prototype.clearRect=function(q,Q,re,he){if(isNaN(q)||isNaN(Q)||isNaN(re)||isNaN(he))throw Sr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(q,Q,re,he))},y.prototype.save=function(q){q=typeof q!="boolean"||q;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("q");if(this.pdf.setPage(Q),q){this.ctx.fontSize=this.pdf.internal.getFontSize();var he=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=he}},y.prototype.restore=function(q){q=typeof q!="boolean"||q;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("Q");this.pdf.setPage(Q),q&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(q){var Q,re,he,me;if(q.isCanvasGradient===!0&&(q=q.getColor()),!q)return{r:0,g:0,b:0,a:0,style:q};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(q))Q=0,re=0,he=0,me=0;else{var be=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(q);if(be!==null)Q=parseInt(be[1]),re=parseInt(be[2]),he=parseInt(be[3]),me=1;else if((be=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(q))!==null)Q=parseInt(be[1]),re=parseInt(be[2]),he=parseInt(be[3]),me=parseFloat(be[4]);else{if(me=1,typeof q=="string"&&q.charAt(0)!=="#"){var Le=new tC(q);q=Le.ok?Le.toHex():"#000000"}q.length===4?(Q=q.substring(1,2),Q+=Q,re=q.substring(2,3),re+=re,he=q.substring(3,4),he+=he):(Q=q.substring(1,3),re=q.substring(3,5),he=q.substring(5,7)),Q=parseInt(Q,16),re=parseInt(re,16),he=parseInt(he,16)}}return{r:Q,g:re,b:he,a:me,style:q}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},T=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(q,Q,re,he){if(isNaN(Q)||isNaN(re)||typeof q!="string")throw Sr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(he=isNaN(he)?void 0:he,!b.call(this)){var me=de(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;P.call(this,{text:q,x:Q,y:re,scale:be,angle:me,align:this.textAlign,maxWidth:he})}},y.prototype.strokeText=function(q,Q,re,he){if(isNaN(Q)||isNaN(re)||typeof q!="string")throw Sr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!T.call(this)){he=isNaN(he)?void 0:he;var me=de(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;P.call(this,{text:q,x:Q,y:re,scale:be,renderingMode:"stroke",angle:me,align:this.textAlign,maxWidth:he})}},y.prototype.measureText=function(q){if(typeof q!="string")throw Sr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Q=this.pdf,re=this.pdf.internal.scaleFactor,he=Q.internal.getFontSize(),me=Q.getStringUnitWidth(q)*he/Q.internal.scaleFactor;return new function(be){var Le=(be=be||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Le}}),this}({width:me*=Math.round(96*re/72*1e4)/1e4})},y.prototype.scale=function(q,Q){if(isNaN(q)||isNaN(Q))throw Sr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var re=new h(q,0,0,Q,0,0);this.ctx.transform=this.ctx.transform.multiply(re)},y.prototype.rotate=function(q){if(isNaN(q))throw Sr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Q=new h(Math.cos(q),Math.sin(q),-Math.sin(q),Math.cos(q),0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},y.prototype.translate=function(q,Q){if(isNaN(q)||isNaN(Q))throw Sr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var re=new h(1,0,0,1,q,Q);this.ctx.transform=this.ctx.transform.multiply(re)},y.prototype.transform=function(q,Q,re,he,me,be){if(isNaN(q)||isNaN(Q)||isNaN(re)||isNaN(he)||isNaN(me)||isNaN(be))throw Sr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Le=new h(q,Q,re,he,me,be);this.ctx.transform=this.ctx.transform.multiply(Le)},y.prototype.setTransform=function(q,Q,re,he,me,be){q=isNaN(q)?1:q,Q=isNaN(Q)?0:Q,re=isNaN(re)?0:re,he=isNaN(he)?1:he,me=isNaN(me)?0:me,be=isNaN(be)?0:be,this.ctx.transform=new h(q,Q,re,he,me,be)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(q,Q,re,he,me,be,Le,ke,qe){var Je=this.pdf.getImageProperties(q),it=1,at=1,ft=1,se=1;he!==void 0&&ke!==void 0&&(ft=ke/he,se=qe/me,it=Je.width/he*ke/he,at=Je.height/me*qe/me),be===void 0&&(be=Q,Le=re,Q=0,re=0),he!==void 0&&ke===void 0&&(ke=he,qe=me),he===void 0&&ke===void 0&&(ke=Je.width,qe=Je.height);var st=this.ctx.transform.decompose(),rn=de(st.rotate.shx),Pt=new h,Ge=(Pt=(Pt=(Pt=Pt.multiply(st.translate)).multiply(st.skew)).multiply(st.scale)).applyToRectangle(new u(be-Q*ft,Le-re*se,he*it,me*at));if(this.autoPaging){for(var ct,lt=j.call(this,Ge),Dt=[],St=0;St<lt.length;St+=1)Dt.indexOf(lt[St])===-1&&Dt.push(lt[St]);D(Dt);for(var sn=Dt[0],dn=Dt[Dt.length-1],Xt=sn;Xt<dn+1;Xt++){this.pdf.setPage(Xt);var pn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],on=Xt===1?this.posY+this.margin[0]:this.margin[0],wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],en=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Nt=Xt===1?0:wt+(Xt-2)*en;if(this.ctx.clip_path.length!==0){var Er=this.path;ct=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(ct,this.posX+this.margin[3],-Nt+on+this.ctx.prevPageLastElemOffset),te.call(this,"fill",!0),this.path=Er}var ln=JSON.parse(JSON.stringify(Ge));ln=L([ln],this.posX+this.margin[3],-Nt+on+this.ctx.prevPageLastElemOffset)[0];var Lt=(Xt>sn||Xt<dn)&&S.call(this);Lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pn,en,null).clip().discardPath()),this.pdf.addImage(q,"JPEG",ln.x,ln.y,ln.w,ln.h,null,null,rn),Lt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(q,"JPEG",Ge.x,Ge.y,Ge.w,Ge.h,null,null,rn)};var j=function(q,Q,re){var he=[];Q=Q||this.pdf.internal.pageSize.width,re=re||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var me=this.posY+this.ctx.prevPageLastElemOffset;switch(q.type){default:case"mt":case"lt":he.push(Math.floor((q.y+me)/re)+1);break;case"arc":he.push(Math.floor((q.y+me-q.radius)/re)+1),he.push(Math.floor((q.y+me+q.radius)/re)+1);break;case"qct":var be=Se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,q.x1,q.y1,q.x,q.y);he.push(Math.floor((be.y+me)/re)+1),he.push(Math.floor((be.y+be.h+me)/re)+1);break;case"bct":var Le=ze(this.ctx.lastPoint.x,this.ctx.lastPoint.y,q.x1,q.y1,q.x2,q.y2,q.x,q.y);he.push(Math.floor((Le.y+me)/re)+1),he.push(Math.floor((Le.y+Le.h+me)/re)+1);break;case"rect":he.push(Math.floor((q.y+me)/re)+1),he.push(Math.floor((q.y+q.h+me)/re)+1)}for(var ke=0;ke<he.length;ke+=1)for(;this.pdf.internal.getNumberOfPages()<he[ke];)E.call(this);return he},E=function(){var q=this.fillStyle,Q=this.strokeStyle,re=this.font,he=this.lineCap,me=this.lineWidth,be=this.lineJoin;this.pdf.addPage(),this.fillStyle=q,this.strokeStyle=Q,this.font=re,this.lineCap=he,this.lineWidth=me,this.lineJoin=be},L=function(q,Q,re){for(var he=0;he<q.length;he++)switch(q[he].type){case"bct":q[he].x2+=Q,q[he].y2+=re;case"qct":q[he].x1+=Q,q[he].y1+=re;default:q[he].x+=Q,q[he].y+=re}return q},D=function(q){return q.sort(function(Q,re){return Q-re})},O=function(q,Q){var re=this.fillStyle,he=this.strokeStyle,me=this.lineCap,be=this.lineWidth,Le=Math.abs(be*this.ctx.transform.scaleX),ke=this.lineJoin;if(this.autoPaging){for(var qe,Je,it=JSON.parse(JSON.stringify(this.path)),at=JSON.parse(JSON.stringify(this.path)),ft=[],se=0;se<at.length;se++)if(at[se].x!==void 0)for(var st=j.call(this,at[se]),rn=0;rn<st.length;rn+=1)ft.indexOf(st[rn])===-1&&ft.push(st[rn]);for(var Pt=0;Pt<ft.length;Pt++)for(;this.pdf.internal.getNumberOfPages()<ft[Pt];)E.call(this);D(ft);for(var Ge=ft[0],ct=ft[ft.length-1],lt=Ge;lt<ct+1;lt++){this.pdf.setPage(lt),this.fillStyle=re,this.strokeStyle=he,this.lineCap=me,this.lineWidth=Le,this.lineJoin=ke;var Dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],St=lt===1?this.posY+this.margin[0]:this.margin[0],sn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],dn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xt=lt===1?0:sn+(lt-2)*dn;if(this.ctx.clip_path.length!==0){var pn=this.path;qe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(qe,this.posX+this.margin[3],-Xt+St+this.ctx.prevPageLastElemOffset),te.call(this,q,!0),this.path=pn}if(Je=JSON.parse(JSON.stringify(it)),this.path=L(Je,this.posX+this.margin[3],-Xt+St+this.ctx.prevPageLastElemOffset),Q===!1||lt===0){var on=(lt>Ge||lt<ct)&&S.call(this);on&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Dt,dn,null).clip().discardPath()),te.call(this,q,Q),on&&this.pdf.restoreGraphicsState()}this.lineWidth=be}this.path=it}else this.lineWidth=Le,te.call(this,q,Q),this.lineWidth=be},te=function(q,Q){if((q!=="stroke"||Q||!T.call(this))&&(q==="stroke"||Q||!b.call(this))){for(var re,he,me=[],be=this.path,Le=0;Le<be.length;Le++){var ke=be[Le];switch(ke.type){case"begin":me.push({begin:!0});break;case"close":me.push({close:!0});break;case"mt":me.push({start:ke,deltas:[],abs:[]});break;case"lt":var qe=me.length;if(be[Le-1]&&!isNaN(be[Le-1].x)&&(re=[ke.x-be[Le-1].x,ke.y-be[Le-1].y],qe>0)){for(;qe>=0;qe--)if(me[qe-1].close!==!0&&me[qe-1].begin!==!0){me[qe-1].deltas.push(re),me[qe-1].abs.push(ke);break}}break;case"bct":re=[ke.x1-be[Le-1].x,ke.y1-be[Le-1].y,ke.x2-be[Le-1].x,ke.y2-be[Le-1].y,ke.x-be[Le-1].x,ke.y-be[Le-1].y],me[me.length-1].deltas.push(re);break;case"qct":var Je=be[Le-1].x+2/3*(ke.x1-be[Le-1].x),it=be[Le-1].y+2/3*(ke.y1-be[Le-1].y),at=ke.x+2/3*(ke.x1-ke.x),ft=ke.y+2/3*(ke.y1-ke.y),se=ke.x,st=ke.y;re=[Je-be[Le-1].x,it-be[Le-1].y,at-be[Le-1].x,ft-be[Le-1].y,se-be[Le-1].x,st-be[Le-1].y],me[me.length-1].deltas.push(re);break;case"arc":me.push({deltas:[],abs:[],arc:!0}),Array.isArray(me[me.length-1].abs)&&me[me.length-1].abs.push(ke)}}he=Q?null:q==="stroke"?"stroke":"fill";for(var rn=!1,Pt=0;Pt<me.length;Pt++)if(me[Pt].arc)for(var Ge=me[Pt].abs,ct=0;ct<Ge.length;ct++){var lt=Ge[ct];lt.type==="arc"?V.call(this,lt.x,lt.y,lt.radius,lt.startAngle,lt.endAngle,lt.counterclockwise,void 0,Q,!rn):B.call(this,lt.x,lt.y),rn=!0}else if(me[Pt].close===!0)this.pdf.internal.out("h"),rn=!1;else if(me[Pt].begin!==!0){var Dt=me[Pt].start.x,St=me[Pt].start.y;ue.call(this,me[Pt].deltas,Dt,St),rn=!0}he&&k.call(this,he),Q&&F.call(this)}},ae=function(q){var Q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,re=Q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return q-re;case"top":return q+Q-re;case"hanging":return q+Q-2*re;case"middle":return q+Q/2-re;default:return q}},H=function(q){return q+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var q=function(){};return q.colorStops=[],q.addColorStop=function(Q,re){this.colorStops.push([Q,re])},q.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},q.isCanvasGradient=!0,q},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var V=function(q,Q,re,he,me,be,Le,ke,qe){for(var Je=ce.call(this,re,he,me,be),it=0;it<Je.length;it++){var at=Je[it];it===0&&(qe?I.call(this,at.x1+q,at.y1+Q):B.call(this,at.x1+q,at.y1+Q)),Ne.call(this,q,Q,at.x2,at.y2,at.x3,at.y3,at.x4,at.y4)}ke?F.call(this):k.call(this,Le)},k=function(q){switch(q){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},F=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(q,Q){this.pdf.internal.out(t(q)+" "+r(Q)+" m")},P=function(q){var Q;switch(q.align){case"right":case"end":Q="right";break;case"center":Q="center";break;default:Q="left"}var re,he,me,be=this.pdf.getTextDimensions(q.text),Le=ae.call(this,q.y),ke=H.call(this,Le)-be.h,qe=this.ctx.transform.applyToPoint(new c(q.x,Le));if(this.autoPaging){var Je=this.ctx.transform.decompose(),it=new h;it=(it=(it=it.multiply(Je.translate)).multiply(Je.skew)).multiply(Je.scale);for(var at=this.ctx.transform.applyToRectangle(new u(q.x,Le,be.w,be.h)),ft=it.applyToRectangle(new u(q.x,ke,be.w,be.h)),se=j.call(this,ft),st=[],rn=0;rn<se.length;rn+=1)st.indexOf(se[rn])===-1&&st.push(se[rn]);D(st);for(var Pt=st[0],Ge=st[st.length-1],ct=Pt;ct<Ge+1;ct++){this.pdf.setPage(ct);var lt=ct===1?this.posY+this.margin[0]:this.margin[0],Dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],St=this.pdf.internal.pageSize.height-this.margin[2],sn=St-this.margin[0],dn=this.pdf.internal.pageSize.width-this.margin[1],Xt=dn-this.margin[3],pn=ct===1?0:Dt+(ct-2)*sn;if(this.ctx.clip_path.length!==0){var on=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(re,this.posX+this.margin[3],-1*pn+lt),te.call(this,"fill",!0),this.path=on}var wt=L([JSON.parse(JSON.stringify(ft))],this.posX+this.margin[3],-pn+lt+this.ctx.prevPageLastElemOffset)[0];q.scale>=.01&&(he=this.pdf.internal.getFontSize(),this.pdf.setFontSize(he*q.scale),me=this.lineWidth,this.lineWidth=me*q.scale);var en=this.autoPaging!=="text";if(en||wt.y+wt.h<=St){if(en||wt.y>=lt&&wt.x<=dn){var Nt=en?q.text:this.pdf.splitTextToSize(q.text,q.maxWidth||dn-wt.x)[0],Er=L([JSON.parse(JSON.stringify(at))],this.posX+this.margin[3],-pn+lt+this.ctx.prevPageLastElemOffset)[0],ln=en&&(ct>Pt||ct<Ge)&&S.call(this);ln&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xt,sn,null).clip().discardPath()),this.pdf.text(Nt,Er.x,Er.y,{angle:q.angle,align:Q,renderingMode:q.renderingMode}),ln&&this.pdf.restoreGraphicsState()}}else wt.y<St&&(this.ctx.prevPageLastElemOffset+=St-wt.y);q.scale>=.01&&(this.pdf.setFontSize(he),this.lineWidth=me)}}else q.scale>=.01&&(he=this.pdf.internal.getFontSize(),this.pdf.setFontSize(he*q.scale),me=this.lineWidth,this.lineWidth=me*q.scale),this.pdf.text(q.text,qe.x+this.posX,qe.y+this.posY,{angle:q.angle,align:Q,renderingMode:q.renderingMode,maxWidth:q.maxWidth}),q.scale>=.01&&(this.pdf.setFontSize(he),this.lineWidth=me)},B=function(q,Q,re,he){re=re||0,he=he||0,this.pdf.internal.out(t(q+re)+" "+r(Q+he)+" l")},ue=function(q,Q,re){return this.pdf.lines(q,Q,re,null,null)},Ne=function(q,Q,re,he,me,be,Le,ke){this.pdf.internal.out([e(a(re+q)),e(o(he+Q)),e(a(me+q)),e(o(be+Q)),e(a(Le+q)),e(o(ke+Q)),"c"].join(" "))},ce=function(q,Q,re,he){for(var me=2*Math.PI,be=Math.PI/2;Q>re;)Q-=me;var Le=Math.abs(re-Q);Le<me&&he&&(Le=me-Le);for(var ke=[],qe=he?-1:1,Je=Q;Le>1e-5;){var it=Je+qe*Math.min(Le,be);ke.push(pe.call(this,q,Je,it)),Le-=Math.abs(it-Je),Je=it}return ke},pe=function(q,Q,re){var he=(re-Q)/2,me=q*Math.cos(he),be=q*Math.sin(he),Le=me,ke=-be,qe=Le*Le+ke*ke,Je=qe+Le*me+ke*be,it=4/3*(Math.sqrt(2*qe*Je)-Je)/(Le*be-ke*me),at=Le-it*ke,ft=ke+it*Le,se=at,st=-ft,rn=he+Q,Pt=Math.cos(rn),Ge=Math.sin(rn);return{x1:q*Math.cos(Q),y1:q*Math.sin(Q),x2:at*Pt-ft*Ge,y2:at*Ge+ft*Pt,x3:se*Pt-st*Ge,y3:se*Ge+st*Pt,x4:q*Math.cos(re),y4:q*Math.sin(re)}},de=function(q){return 180*q/Math.PI},Se=function(q,Q,re,he,me,be){var Le=q+.5*(re-q),ke=Q+.5*(he-Q),qe=me+.5*(re-me),Je=be+.5*(he-be),it=Math.min(q,me,Le,qe),at=Math.max(q,me,Le,qe),ft=Math.min(Q,be,ke,Je),se=Math.max(Q,be,ke,Je);return new u(it,ft,at-it,se-ft)},ze=function(q,Q,re,he,me,be,Le,ke){var qe,Je,it,at,ft,se,st,rn,Pt,Ge,ct,lt,Dt,St,sn=re-q,dn=he-Q,Xt=me-re,pn=be-he,on=Le-me,wt=ke-be;for(Je=0;Je<41;Je++)Pt=(st=(it=q+(qe=Je/40)*sn)+qe*((ft=re+qe*Xt)-it))+qe*(ft+qe*(me+qe*on-ft)-st),Ge=(rn=(at=Q+qe*dn)+qe*((se=he+qe*pn)-at))+qe*(se+qe*(be+qe*wt-se)-rn),Je==0?(ct=Pt,lt=Ge,Dt=Pt,St=Ge):(ct=Math.min(ct,Pt),lt=Math.min(lt,Ge),Dt=Math.max(Dt,Pt),St=Math.max(St,Ge));return new u(Math.round(ct),Math.round(lt),Math.round(Dt-ct),Math.round(St-lt))},ne=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var q,Q,re=(q=this.ctx.lineDash,Q=this.ctx.lineDashOffset,JSON.stringify({lineDash:q,lineDashOffset:Q}));this.prevLineDash!==re&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=re)}}})(Rt.API),(function(n){var e=function(c){var u,h,f,g,y,w,b,T,S,j;for(h=[],f=0,g=(c+=u="\0\0\0\0".slice(c.length%4||4)).length;g>f;f+=4)(y=(c.charCodeAt(f)<<24)+(c.charCodeAt(f+1)<<16)+(c.charCodeAt(f+2)<<8)+c.charCodeAt(f+3))!==0?(w=(y=((y=((y=((y=(y-(j=y%85))/85)-(S=y%85))/85)-(T=y%85))/85)-(b=y%85))/85)%85,h.push(w+33,b+33,T+33,S+33,j+33)):h.push(122);return(function(E,L){for(var D=L;D>0;D--)E.pop()})(h,u.length),String.fromCharCode.apply(String,h)+"~>"},t=function(c){var u,h,f,g,y,w=String,b="length",T=255,S="charCodeAt",j="slice",E="replace";for(c[j](-2),c=c[j](0,-2)[E](/\s/g,"")[E]("z","!!!!!"),f=[],g=0,y=(c+=u="uuuuu"[j](c[b]%5||5))[b];y>g;g+=5)h=52200625*(c[S](g)-33)+614125*(c[S](g+1)-33)+7225*(c[S](g+2)-33)+85*(c[S](g+3)-33)+(c[S](g+4)-33),f.push(T&h>>24,T&h>>16,T&h>>8,T&h);return(function(L,D){for(var O=D;O>0;O--)L.pop()})(f,u[b]),w.fromCharCode.apply(w,f)},r=function(c){return c.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(c){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((c=c.replace(/\s/g,"")).indexOf(">")!==-1&&(c=c.substr(0,c.indexOf(">"))),c.length%2&&(c+="0"),u.test(c)===!1)return"";for(var h="",f=0;f<c.length;f+=2)h+=String.fromCharCode("0x"+(c[f]+c[f+1]));return h},o=function(c){for(var u=new Uint8Array(c.length),h=c.length;h--;)u[h]=c.charCodeAt(h);return(u=S2(u)).reduce(function(f,g){return f+String.fromCharCode(g)},"")};n.processDataByFilters=function(c,u){var h=0,f=c||"",g=[];for(typeof(u=u||[])=="string"&&(u=[u]),h=0;h<u.length;h+=1)switch(u[h]){case"ASCII85Decode":case"/ASCII85Decode":f=t(f),g.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=e(f),g.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=a(f),g.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=r(f),g.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=o(f),g.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[h]+'" is not implemented')}return{data:f,reverseChain:g.reverse().join(" ")}}})(Rt.API),(function(n){n.loadFile=function(e,t,r){return(function(a,o,c){o=o!==!1,c=typeof c=="function"?c:function(){};var u=void 0;try{u=(function(h,f,g){var y=new XMLHttpRequest,w=0,b=function(T){var S=T.length,j=[],E=String.fromCharCode;for(w=0;w<S;w+=1)j.push(E(255&T.charCodeAt(w)));return j.join("")};if(y.open("GET",h,!f),y.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(y.onload=function(){y.status===200?g(b(this.responseText)):g(void 0)}),y.send(null),f&&y.status===200)return b(y.responseText)})(a,o,c)}catch{}return u})(e,t,r)},n.loadImageFile=n.loadFile})(Rt.API),(function(n){function e(){return(nn.html2canvas?Promise.resolve(nn.html2canvas):a1(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function t(){return(nn.DOMPurify?Promise.resolve(nn.DOMPurify):a1(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var r=function(u){var h=cr(u);return h==="undefined"?"undefined":h==="string"||u instanceof String?"string":h==="number"||u instanceof Number?"number":h==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":h==="object"?"object":"unknown"},a=function(u,h){var f=document.createElement(u);for(var g in h.className&&(f.className=h.className),h.innerHTML&&h.dompurify&&(f.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)f.style[g]=h.style[g];return f},o=function u(h,f){for(var g=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),y=h.firstChild;y;y=y.nextSibling)f!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||g.appendChild(u(y,f));return h.nodeType===1&&(h.nodeName==="CANVAS"?(g.width=h.width,g.height=h.height,g.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(g.value=h.value),g.addEventListener("load",function(){g.scrollTop=h.scrollTop,g.scrollLeft=h.scrollLeft},!0)),g},c=function u(h){var f=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),g=u.convert(Promise.resolve(),f);return(g=g.setProgress(1,u,1,[u])).set(h)};(c.prototype=Object.create(Promise.prototype)).constructor=c,c.convert=function(u,h){return u.__proto__=h||c.prototype,u},c.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},c.prototype.from=function(u,h){return this.then(function(){switch(h=h||(function(f){switch(r(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(u),h){case"string":return this.then(t).then(function(f){return this.set({src:a("div",{innerHTML:u,dompurify:f})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},c.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},c.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},c.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(h){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,h(this.prop.container,f)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},c.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then(function(h){var f=this.opt.jsPDF,g=this.opt.fontFaces,y=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,w=Object.assign({async:!0,allowTaint:!0,scale:y,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete w.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=g,g)for(var b=0;b<g.length;++b){var T=g[b],S=T.src.find(function(j){return j.format==="truetype"});S&&f.addFont(S.url,T.ref.name,T.ref.style)}return w.windowHeight=w.windowHeight||0,w.windowHeight=w.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):w.windowHeight,f.context2d.save(!0),h(this.prop.container,w)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},c.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},c.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},c.prototype.output=function(u,h,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(u,h):this.outputPdf(u,h)},c.prototype.outputPdf=function(u,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,h)})},c.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},c.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},c.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},c.prototype.set=function(u){if(r(u)!=="object")return this;var h=Object.keys(u||{}).map(function(f){if(f in c.template.prop)return function(){this.prop[f]=u[f]};switch(f){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[f]=u[f]}}},this);return this.then(function(){return this.thenList(h)})},c.prototype.get=function(u,h){return this.then(function(){var f=u in c.template.prop?this.prop[u]:this.opt[u];return h?h(f):f})},c.prototype.setMargin=function(u){return this.then(function(){switch(r(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},c.prototype.setPageSize=function(u){function h(f,g){return Math.floor(f*g/72*96)}return this.then(function(){(u=u||Rt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:h(u.inner.width,u.k),height:h(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},c.prototype.setProgress=function(u,h,f,g){return u!=null&&(this.progress.val=u),h!=null&&(this.progress.state=h),f!=null&&(this.progress.n=f),g!=null&&(this.progress.stack=g),this.progress.ratio=this.progress.val/this.progress.state,this},c.prototype.updateProgress=function(u,h,f,g){return this.setProgress(u?this.progress.val+u:null,h||null,f?this.progress.n+f:null,g?this.progress.stack.concat(g):null)},c.prototype.then=function(u,h){var f=this;return this.thenCore(u,h,function(g,y){return f.updateProgress(null,null,1,[g]),Promise.prototype.then.call(this,function(w){return f.updateProgress(null,g),w}).then(g,y).then(function(w){return f.updateProgress(1),w})})},c.prototype.thenCore=function(u,h,f){f=f||Promise.prototype.then;var g=this;u&&(u=u.bind(g)),h&&(h=h.bind(g));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?g:c.convert(Object.assign({},g),Promise.prototype),w=f.call(y,u,h);return c.convert(w,g.__proto__)},c.prototype.thenExternal=function(u,h){return Promise.prototype.then.call(this,u,h)},c.prototype.thenList=function(u){var h=this;return u.forEach(function(f){h=h.thenCore(f)}),h},c.prototype.catch=function(u){u&&(u=u.bind(this));var h=Promise.prototype.catch.call(this,u);return c.convert(h,this)},c.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},c.prototype.error=function(u){return this.then(function(){throw new Error(u)})},c.prototype.using=c.prototype.set,c.prototype.saveAs=c.prototype.save,c.prototype.export=c.prototype.output,c.prototype.run=c.prototype.then,Rt.getPageSize=function(u,h,f){if(cr(u)==="object"){var g=u;u=g.orientation,h=g.unit||h,f=g.format||f}h=h||"mm",f=f||"a4",u=(""+(u||"P")).toLowerCase();var y,w=(""+f).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":y=1;break;case"mm":y=72/25.4;break;case"cm":y=72/2.54;break;case"in":y=72;break;case"px":y=.75;break;case"pc":case"em":y=12;break;case"ex":y=6;break;default:throw"Invalid unit: "+h}var T,S=0,j=0;if(b.hasOwnProperty(w))S=b[w][1]/y,j=b[w][0]/y;else try{S=f[1],j=f[0]}catch{throw new Error("Invalid format: "+f)}if(u==="p"||u==="portrait")u="p",j>S&&(T=j,j=S,S=T);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",S>j&&(T=j,j=S,S=T)}return{width:j,height:S,unit:h,k:y,orientation:u}},n.html=function(u,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(j1):null;var f=new c(h);return h.worker?f:f.from(u).doCallback()}})(Rt.API),Rt.API.addJS=function(n){return v6=n,this.internal.events.subscribe("postPutResources",function(){_0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(_0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),b6=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+v6+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){_0!==void 0&&b6!==void 0&&this.internal.out("/Names <</JavaScript "+_0+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),o=0;o<a.length;o++){var c=a[o],u=r.exec(c);if(u!=null){var h=u[1];t.internal.newObjectDeferredBegin(h,!1)}t.internal.write(c)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,g=[];for(o=0;o<f;o++){var y=t.internal.newObject();g.push(y);var w=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var b=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<g.length;o++)t.internal.write("(page_"+(o+1)+")"+g[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+b+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,a,o){var c={title:a,options:o,children:[]};return r==null&&(r=this.root),r.children.push(c),c},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var a=0;a<r.children.length;a++)this.genIds_r(r.children[a])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var c=r.children[o];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var u=this.count=this.count_r({count:0},c);if(u>0&&this.line("/Count "+u),c.options&&c.options.pageNumber){var h=t.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,a){for(var o=0;o<a.children.length;o++)r.count++,this.count_r(r,a.children[o]);return r.count}}])})(Rt.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,a,o,c,u){var h,f=this.decode.DCT_DECODE,g=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=c||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,h=(function(y){for(var w,b=256*y.charCodeAt(4)+y.charCodeAt(5),T=y.length,S={width:0,height:0,numcomponents:1},j=4;j<T;j+=2){if(j+=b,e.indexOf(y.charCodeAt(j+1))!==-1){w=256*y.charCodeAt(j+5)+y.charCodeAt(j+6),S={width:256*y.charCodeAt(j+7)+y.charCodeAt(j+8),height:w,numcomponents:y.charCodeAt(j+9)};break}b=256*y.charCodeAt(j+2)+y.charCodeAt(j+3)}return S})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),h.numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}g={data:t,width:h.width,height:h.height,colorSpace:u,bitsPerComponent:8,filter:f,index:r,alias:a}}return g}})(Rt.API),Rt.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var a,o=$q(n,{checkCrc:!0}),c=o.width,u=o.height,h=o.channels,f=o.palette,g=o.depth;a=f&&h===1?(function(V){for(var k=V.width,F=V.height,I=V.data,P=V.palette,B=V.depth,ue=!1,Ne=[],ce=[],pe=void 0,de=!1,Se=0,ze=0;ze<P.length;ze++){var ne=_4(P[ze],4),q=ne[0],Q=ne[1],re=ne[2],he=ne[3];Ne.push(q,Q,re),he!=null&&(he===0?(Se++,ce.length<1&&ce.push(ze)):he<255&&(de=!0))}if(de||Se>1){ue=!0,ce=void 0;var me=k*F;pe=new Uint8Array(me);for(var be=new DataView(I.buffer),Le=0;Le<me;Le++){var ke=S1(be,Le,B),qe=_4(P[ke],4)[3];pe[Le]=qe}}else Se===0&&(ce=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ue?8:void 0,colorBytes:I,alphaBytes:pe,needSMask:ue,palette:Ne,mask:ce}})(o):h===2||h===4?(function(V){for(var k=V.data,F=V.width,I=V.height,P=V.channels,B=V.depth,ue=P===2?"DeviceGray":"DeviceRGB",Ne=P-1,ce=F*I,pe=Ne,de=ce*pe,Se=1*ce,ze=Math.ceil(de*B/8),ne=Math.ceil(Se*B/8),q=new Uint8Array(ze),Q=new Uint8Array(ne),re=new DataView(k.buffer),he=new DataView(q.buffer),me=new DataView(Q.buffer),be=!1,Le=0;Le<ce;Le++){for(var ke=Le*P,qe=0;qe<pe;qe++)C6(he,S1(re,ke+qe,B),Le*pe+qe,B);var Je=S1(re,ke+pe,B);Je<(1<<B)-1&&(be=!0),C6(me,Je,1*Le,B)}return{colorSpace:ue,colorsPerPixel:Ne,sMaskBitsPerComponent:be?B:void 0,colorBytes:q,alphaBytes:Q,needSMask:be}})(o):(function(V){var k=V.data,F=V.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:F,colorsPerPixel:F==="DeviceGray"?1:3,colorBytes:k instanceof Uint16Array?(function(I){for(var P=I.length,B=new Uint8Array(2*P),ue=new DataView(B.buffer,B.byteOffset,B.byteLength),Ne=0;Ne<P;Ne++)ue.setUint16(2*Ne,I[Ne],!1);return B})(k):k,needSMask:!1}})(o);var y,w,b,T=a,S=T.colorSpace,j=T.colorsPerPixel,E=T.sMaskBitsPerComponent,L=T.colorBytes,D=T.alphaBytes,O=T.needSMask,te=T.palette,ae=T.mask,H=null;return r!==Rt.API.image_compression.NONE&&typeof S2=="function"?(H=(function(V){var k;switch(V){case Rt.API.image_compression.FAST:k=11;break;case Rt.API.image_compression.MEDIUM:k=13;break;case Rt.API.image_compression.SLOW:k=14;break;default:k=12}return k})(r),y=this.decode.FLATE_DECODE,w="/Predictor ".concat(H," /Colors ").concat(j," /BitsPerComponent ").concat(g," /Columns ").concat(c),n=_6(L,Math.ceil(c*j*g/8),j,g,r),O&&(b=_6(D,Math.ceil(c*E/8),1,E,r))):(y=void 0,w=void 0,n=L,O&&(b=D)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(b&&this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),{alias:t,data:n,index:e,filter:y,decodeParameters:w,transparency:ae,palette:te,sMask:b,predictor:H,width:c,height:u,bitsPerComponent:g,sMaskBitsPerComponent:E,colorSpace:S}}},(function(n){n.processGIF89A=function(e,t,r,a){var o=new fH(e),c=o.width,u=o.height,h=[];o.decodeAndBlitFrameRGBA(0,h);var f={data:h,width:c,height:u},g=new E1(100).encode(f,100);return n.processJPEG.call(this,g,t,r,a)},n.processGIF87A=n.processGIF89A})(Rt.API),ol.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:r,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ol.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Sr.log("bit decode error:"+t)}},ol.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<e;a++)for(var o=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+8*a*4,u=0;u<8&&8*a+u<this.width;u++){var h=this.palette[o>>7-u&1];this.data[c+4*u]=h.blue,this.data[c+4*u+1]=h.green,this.data[c+4*u+2]=h.red,this.data[c+4*u+3]=255}t!==0&&(this.pos+=4-t)}},ol.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<n;a++){var o=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+2*a*4,u=o>>4,h=15&o,f=this.palette[u];if(this.data[c]=f.blue,this.data[c+1]=f.green,this.data[c+2]=f.red,this.data[c+3]=255,2*a+1>=this.width)break;f=this.palette[h],this.data[c+4]=f.blue,this.data[c+4+1]=f.green,this.data[c+4+2]=f.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},ol.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;if(a<this.palette.length){var c=this.palette[a];this.data[o]=c.red,this.data[o+1]=c.green,this.data[o+2]=c.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},ol.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(o&e)/e*255|0,u=(o>>5&e)/e*255|0,h=(o>>10&e)/e*255|0,f=o>>15?255:0,g=r*this.width*4+4*a;this.data[g]=h,this.data[g+1]=u,this.data[g+2]=c,this.data[g+3]=f}this.pos+=n}},ol.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(c&e)/e*255|0,h=(c>>5&t)/t*255|0,f=(c>>11)/e*255|0,g=a*this.width*4+4*o;this.data[g]=f,this.data[g+1]=h,this.data[g+2]=u,this.data[g+3]=255}this.pos+=n}},ol.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=o,this.data[c+1]=a,this.data[c+2]=r,this.data[c+3]=255}this.pos+=this.width%4}},ol.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=o,this.data[u+1]=a,this.data[u+2]=r,this.data[u+3]=c}},ol.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,a){var o=new ol(e,!1),c=o.width,u=o.height,h={data:o.getData(),width:c,height:u},f=new E1(100).encode(h,100);return n.processJPEG.call(this,f,t,r,a)}})(Rt.API),R6.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,a){var o=new R6(e),c=o.width,u=o.height,h={data:o.getData(),width:c,height:u},f=new E1(100).encode(h,100);return n.processJPEG.call(this,f,t,r,a)}})(Rt.API),Rt.API.processRGBA=function(n,e,t){for(var r=n.data,a=r.length,o=new Uint8Array(a/4*3),c=new Uint8Array(a/4),u=0,h=0,f=0;f<a;f+=4){var g=r[f],y=r[f+1],w=r[f+2],b=r[f+3];o[u++]=g,o[u++]=y,o[u++]=w,c[h++]=b}var T=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:T,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Rt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},lf=Rt.API,S0=lf.getCharWidthsArray=function(n,e){var t,r,a=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),u=e.widths?e.widths:a.metadata.Unicode.widths,h=u.fof?u.fof:1,f=e.kerning?e.kerning:a.metadata.Unicode.kerning,g=f.fof?f.fof:1,y=e.doKerning!==!1,w=0,b=n.length,T=0,S=u[0]||h,j=[];for(t=0;t<b;t++)r=n.charCodeAt(t),typeof a.metadata.widthOfString=="function"?j.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(r))+c*(1e3/o)||0)/1e3):(w=y&&cr(f[r])==="object"&&!isNaN(parseInt(f[r][T],10))?f[r][T]/g:0,j.push((u[r]||S)/h+w)),T=r;return j},w6=lf.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return lf.processArabic&&(n=lf.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,a)/t:S0.apply(this,arguments).reduce(function(o,c){return o+c},0)},N6=function(n,e,t,r){for(var a=[],o=0,c=n.length,u=0;o!==c&&u+e[o]<t;)u+=e[o],o++;a.push(n.slice(0,o));var h=o;for(u=0;o!==c;)u+e[o]>r&&(a.push(n.slice(h,o)),u=0,h=o),u+=e[o],o++;return h!==o&&a.push(n.slice(h,o)),a},j6=function(n,e,t){t||(t={});var r,a,o,c,u,h,f,g=[],y=[g],w=t.textIndent||0,b=0,T=0,S=n.split(" "),j=S0.apply(this,[" ",t])[0];if(h=t.lineIndent===-1?S[0].length+2:t.lineIndent||0){var E=Array(h).join(" "),L=[];S.map(function(O){(O=O.split(/\s*\n/)).length>1?L=L.concat(O.map(function(te,ae){return(ae&&te.length?`
`:"")+te})):L.push(O[0])}),S=L,h=w6.apply(this,[E,t])}for(o=0,c=S.length;o<c;o++){var D=0;if(r=S[o],h&&r[0]==`
`&&(r=r.substr(1),D=1),w+b+(T=(a=S0.apply(this,[r,t])).reduce(function(O,te){return O+te},0))>e||D){if(T>e){for(u=N6.apply(this,[r,a,e-(w+b),e]),g.push(u.shift()),g=[u.pop()];u.length;)y.push([u.shift()]);T=a.slice(r.length-(g[0]?g[0].length:0)).reduce(function(O,te){return O+te},0)}else g=[r];y.push(g),w=T+h,b=j}else g.push(r),w+=b+T,b=j}return f=h?function(O,te){return(te?E:"")+O.join(" ")}:function(O){return O.join(" ")},y.map(f)},lf.splitTextToSize=function(n,e,t){var r,a=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var y=this.internal.getFont(g.fontName,g.fontStyle),w="Unicode";return y.metadata[w]?{widths:y.metadata[w].widths||{0:1},kerning:y.metadata[w].kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/a;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=t.lineIndent;var u,h,f=[];for(u=0,h=r.length;u<h;u++)f=f.concat(j6.apply(this,[r[u],c,o]));return f},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},a={},o=0;o<16;o++)r[t[o]]=e[o],a[e[o]]=t[o];var c=function(w){return"0x"+parseInt(w,10).toString(16)},u=n.__fontmetrics__.compress=function(w){var b,T,S,j,E=["{"];for(var L in w){if(b=w[L],isNaN(parseInt(L,10))?T="'"+L+"'":(L=parseInt(L,10),T=(T=c(L).slice(2)).slice(0,-1)+a[T.slice(-1)]),typeof b=="number")b<0?(S=c(b).slice(3),j="-"):(S=c(b).slice(2),j=""),S=j+S.slice(0,-1)+a[S.slice(-1)];else{if(cr(b)!=="object")throw new Error("Don't know what to do with value type "+cr(b)+".");S=u(b)}E.push(T+S)}return E.push("}"),E.join("")},h=n.__fontmetrics__.uncompress=function(w){if(typeof w!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,T,S,j,E={},L=1,D=E,O=[],te="",ae="",H=w.length-1,V=1;V<H;V+=1)(j=w[V])=="'"?b?(S=b.join(""),b=void 0):b=[]:b?b.push(j):j=="{"?(O.push([D,S]),D={},S=void 0):j=="}"?((T=O.pop())[0][T[1]]=D,S=void 0,D=T[0]):j=="-"?L=-1:S===void 0?r.hasOwnProperty(j)?(te+=r[j],S=parseInt(te,16)*L,L=1,te=""):te+=j:r.hasOwnProperty(j)?(ae+=r[j],D[S]=parseInt(ae,16)*L,L=1,S=void 0,ae=""):ae+=j;return E},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},g={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},y={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(w){var b=w.font,T=y.Unicode[b.postScriptName];T&&(b.metadata.Unicode={},b.metadata.Unicode.widths=T.widths,b.metadata.Unicode.kerning=T.kerning);var S=g.Unicode[b.postScriptName];S&&(b.metadata.Unicode.encoding=S,b.encoding=S.codePages[0])}])})(Rt.API),(function(n){var e=function(t){for(var r=t.length,a=new Uint8Array(r),o=0;o<r;o++)a[o]=t.charCodeAt(o);return a};n.API.events.push(["addFont",function(t){var r=void 0,a=t.font,o=t.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(r=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(c,u){u=/^\x00\x01\x00\x00/.test(u)?e(u):e(H0(u)),c.metadata=n.API.TTFFont.open(u),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(a,r)}}])})(Rt),Rt.API.addSvgAsImage=function(n,e,t,r,a,o,c,u){if(isNaN(e)||isNaN(t))throw Sr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(a))throw Sr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=r,h.height=a;var f=h.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,h.width,h.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},y=this;return(nn.canvg?Promise.resolve(nn.canvg):a1(()=>import("./index.es-C28PpBeQ.js"),[])).catch(function(w){return Promise.reject(new Error("Could not load canvg: "+w))}).then(function(w){return w.default?w.default:w}).then(function(w){return w.fromString(f,n,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(w){return w.render(g)}).then(function(){y.addImage(h.toDataURL("image/jpeg",1),e,t,r,a,c,u)})},Rt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var a=0;a<this.internal.pages[r].length;a++)this.internal.pages[r][a]=this.internal.pages[r][a].replace(e,t);return this},Rt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,a,o,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(c),h=[],f=0,g=0,y=0;function w(T,S){var j,E=!1;for(j=0;j<T.length;j+=1)T[j]===S&&(E=!0);return E}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var b=u.length;for(y=0;y<b;y+=1)t[u[y]].value=t[u[y]].defaultValue,t[u[y]].explicitSet=!1}if(cr(n)==="object"){for(a in n)if(o=n[a],w(u,a)&&o!==void 0){if(t[a].type==="boolean"&&typeof o=="boolean")t[a].value=o;else if(t[a].type==="name"&&w(t[a].valueSet,o))t[a].value=o;else if(t[a].type==="integer"&&Number.isInteger(o))t[a].value=o;else if(t[a].type==="array"){for(f=0;f<o.length;f+=1)if(r=!0,o[f].length===1&&typeof o[f][0]=="number")h.push(String(o[f]-1));else if(o[f].length>1){for(g=0;g<o[f].length;g+=1)typeof o[f][g]!="number"&&(r=!1);r===!0&&h.push([o[f][0]-1,o[f][1]-1].join(" "))}t[a].value="["+h.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var T,S=[];for(T in t)t[T].explicitSet===!0&&(t[T].type==="name"?S.push("/"+T+" /"+t[T].value):S.push("/"+T+" "+t[T].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),f=o.length+c.length+u.length+a.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(a+o+c+u+h),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Rt.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,c){for(var u,h=c.metadata.Unicode.widths,f=["","0","00","000","0000"],g=[""],y=0,w=o.length;y<w;++y){if(u=c.metadata.characterToGlyph(o.charCodeAt(y)),c.metadata.glyIdsUsed.push(u),c.metadata.toUnicode[u]=o.charCodeAt(y),h.indexOf(u)==-1&&(h.push(u),h.push([parseInt(c.metadata.widthOfGlyph(u),10)])),u=="0")return g.join("");u=u.toString(16),g.push(f[4-u.length],u)}return g.join("")},r=function(o){var c,u,h,f,g,y,w;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],y=0,w=(u=Object.keys(o).sort(function(b,T){return b-T})).length;y<w;y++)c=u[y],h.length>=100&&(g+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),o[c]!==void 0&&o[c]!==null&&typeof o[c].toString=="function"&&(f=("0000"+o[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),h.push("<"+c+"><"+f+">"));return h.length&&(g+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),g+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(c){var u=c.font,h=c.out,f=c.newObject,g=c.putStream;if(u.metadata instanceof n.API.TTFFont&&u.encoding==="Identity-H"){for(var y=u.metadata.Unicode.widths,w=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),b="",T=0;T<w.length;T++)b+=String.fromCharCode(w[T]);var S=f();g({data:b,addLength1:!0,objectId:S}),h("endobj");var j=f();g({data:r(u.metadata.toUnicode),addLength1:!0,objectId:j}),h("endobj");var E=f();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+gf(u.fontName)),h("/FontFile2 "+S+" 0 R"),h("/FontBBox "+n.API.PDFObject.convert(u.metadata.bbox)),h("/Flags "+u.metadata.flags),h("/StemV "+u.metadata.stemV),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h(">>"),h("endobj");var L=f();h("<<"),h("/Type /Font"),h("/BaseFont /"+gf(u.fontName)),h("/FontDescriptor "+E+" 0 R"),h("/W "+n.API.PDFObject.convert(y)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+u.encoding+")"),h(">>"),h(">>"),h("endobj"),u.objectNumber=f(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+j+" 0 R"),h("/BaseFont /"+gf(u.fontName)),h("/Encoding /"+u.encoding),h("/DescendantFonts ["+L+" 0 R]"),h(">>"),h("endobj"),u.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(c){var u=c.font,h=c.out,f=c.newObject,g=c.putStream;if(u.metadata instanceof n.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var y=u.metadata.rawData,w="",b=0;b<y.length;b++)w+=String.fromCharCode(y[b]);var T=f();g({data:w,addLength1:!0,objectId:T}),h("endobj");var S=f();g({data:r(u.metadata.toUnicode),addLength1:!0,objectId:S}),h("endobj");var j=f();h("<<"),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h("/StemV "+u.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+T+" 0 R"),h("/Flags 96"),h("/FontBBox "+n.API.PDFObject.convert(u.metadata.bbox)),h("/FontName /"+gf(u.fontName)),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h(">>"),h("endobj"),u.objectNumber=f();for(var E=0;E<u.metadata.hmtx.widths.length;E++)u.metadata.hmtx.widths[E]=parseInt(u.metadata.hmtx.widths[E]*(1e3/u.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+gf(u.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),h("endobj"),u.isAlreadyPutted=!0}})(o)}]);var a=function(o){var c,u=o.text||"",h=o.x,f=o.y,g=o.options||{},y=o.mutex||{},w=y.pdfEscape,b=y.activeFontKey,T=y.fonts,S=b,j="",E=0,L="",D=T[S].encoding;if(T[S].encoding!=="Identity-H")return{text:u,x:h,y:f,options:g,mutex:y};for(L=u,S=b,Array.isArray(u)&&(L=u[0]),E=0;E<L.length;E+=1)T[S].metadata.hasOwnProperty("cmap")&&(c=T[S].metadata.cmap.unicode.codeMap[L[E].charCodeAt(0)]),c||L[E].charCodeAt(0)<256&&T[S].metadata.hasOwnProperty("Unicode")?j+=L[E]:j+="";var O="";return parseInt(S.slice(1))<14||D==="WinAnsiEncoding"?O=w(j,S).split("").map(function(te){return te.charCodeAt(0).toString(16)}).join(""):D==="Identity-H"&&(O=t(j,T[S])),y.isHex=!0,{text:O,x:h,y:f,options:g,mutex:y}};e.events.push(["postProcessText",function(o){var c=o.text||"",u=[],h={text:c,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(c)){var f=0;for(f=0;f<c.length;f+=1)Array.isArray(c[f])&&c[f].length===3?u.push([a(Object.assign({},h,{text:c[f][0]})).text,c[f][1],c[f][2]]):u.push(a(Object.assign({},h,{text:c[f]})).text);o.text=u}else o.text=a(Object.assign({},h,{text:c})).text}])})(Rt),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Rt.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var a,o,c,u,h,f,g,y=e,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],T={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],E=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),L=!1,D=0;this.__bidiEngine__={};var O=function(I){var P=I.charCodeAt(),B=P>>8,ue=S[B];return ue!==void 0?y[256*ue+(255&P)]:B===252||B===253?"AL":E.test(B)?"L":B===8?"R":"N"},te=function(I){for(var P,B=0;B<I.length;B++){if((P=O(I.charAt(B)))==="L")return!1;if(P==="R")return!0}return!1},ae=function(I,P,B,ue){var Ne,ce,pe,de,Se=P[ue];switch(Se){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":L=!1;break;case"N":case"AN":break;case"EN":L&&(Se="AN");break;case"AL":L=!0,Se="R";break;case"WS":case"BN":Se="N";break;case"CS":ue<1||ue+1>=P.length||(Ne=B[ue-1])!=="EN"&&Ne!=="AN"||(ce=P[ue+1])!=="EN"&&ce!=="AN"?Se="N":L&&(ce="AN"),Se=ce===Ne?ce:"N";break;case"ES":Se=(Ne=ue>0?B[ue-1]:"B")==="EN"&&ue+1<P.length&&P[ue+1]==="EN"?"EN":"N";break;case"ET":if(ue>0&&B[ue-1]==="EN"){Se="EN";break}if(L){Se="N";break}for(pe=ue+1,de=P.length;pe<de&&P[pe]==="ET";)pe++;Se=pe<de&&P[pe]==="EN"?"EN":"N";break;case"NSM":if(c&&!u){for(de=P.length,pe=ue+1;pe<de&&P[pe]==="NSM";)pe++;if(pe<de){var ze=I[ue],ne=ze>=1425&&ze<=2303||ze===64286;if(Ne=P[pe],ne&&(Ne==="R"||Ne==="AL")){Se="R";break}}}Se=ue<1||(Ne=P[ue-1])==="B"?"N":B[ue-1];break;case"B":L=!1,a=!0,Se=D;break;case"S":o=!0,Se="N"}return Se},H=function(I,P,B){var ue=I.split("");return B&&V(ue,B,{hiLevel:D}),ue.reverse(),P&&P.reverse(),ue.join("")},V=function(I,P,B){var ue,Ne,ce,pe,de,Se=-1,ze=I.length,ne=0,q=[],Q=D?b:w,re=[];for(L=!1,a=!1,o=!1,Ne=0;Ne<ze;Ne++)re[Ne]=O(I[Ne]);for(ce=0;ce<ze;ce++){if(de=ne,q[ce]=ae(I,re,q,ce),ue=240&(ne=Q[de][T[q[ce]]]),ne&=15,P[ce]=pe=Q[ne][5],ue>0)if(ue===16){for(Ne=Se;Ne<ce;Ne++)P[Ne]=1;Se=-1}else Se=-1;if(Q[ne][6])Se===-1&&(Se=ce);else if(Se>-1){for(Ne=Se;Ne<ce;Ne++)P[Ne]=pe;Se=-1}re[ce]==="B"&&(P[ce]=0),B.hiLevel|=pe}o&&(function(he,me,be){for(var Le=0;Le<be;Le++)if(he[Le]==="S"){me[Le]=D;for(var ke=Le-1;ke>=0&&he[ke]==="WS";ke--)me[ke]=D}})(re,P,ze)},k=function(I,P,B,ue,Ne){if(!(Ne.hiLevel<I)){if(I===1&&D===1&&!a)return P.reverse(),void(B&&B.reverse());for(var ce,pe,de,Se,ze=P.length,ne=0;ne<ze;){if(ue[ne]>=I){for(de=ne+1;de<ze&&ue[de]>=I;)de++;for(Se=ne,pe=de-1;Se<pe;Se++,pe--)ce=P[Se],P[Se]=P[pe],P[pe]=ce,B&&(ce=B[Se],B[Se]=B[pe],B[pe]=ce);ne=de}ne++}}},F=function(I,P,B){var ue=I.split(""),Ne={hiLevel:D};return B||(B=[]),V(ue,B,Ne),(function(ce,pe,de){if(de.hiLevel!==0&&g)for(var Se,ze=0;ze<ce.length;ze++)pe[ze]===1&&(Se=j.indexOf(ce[ze]))>=0&&(ce[ze]=j[Se+1])})(ue,B,Ne),k(2,ue,P,B,Ne),k(1,ue,P,B,Ne),ue.join("")};return this.__bidiEngine__.doBidiReorder=function(I,P,B){if((function(Ne,ce){if(ce)for(var pe=0;pe<Ne.length;pe++)ce[pe]=pe;u===void 0&&(u=te(Ne)),f===void 0&&(f=te(Ne))})(I,P),c||!h||f)if(c&&h&&u^f)D=u?1:0,I=H(I,P,B);else if(!c&&h&&f)D=u?1:0,I=F(I,P,B),I=H(I,P);else if(!c||u||h||f){if(c&&!h&&u^f)I=H(I,P),u?(D=0,I=F(I,P,B)):(D=1,I=F(I,P,B),I=H(I,P));else if(c&&u&&!h&&f)D=1,I=F(I,P,B),I=H(I,P);else if(!c&&!h&&u^f){var ue=g;u?(D=1,I=F(I,P,B),D=0,g=!1,I=F(I,P,B),g=ue):(D=0,I=F(I,P,B),I=H(I,P),D=1,g=!1,I=F(I,P,B),g=ue,I=H(I,P))}}else D=0,I=F(I,P,B);else D=u?1:0,I=F(I,P,B);return I},this.__bidiEngine__.setOptions=function(I){I&&(c=I.isInputVisual,h=I.isOutputVisual,u=I.isInputRtl,f=I.isOutputRtl,g=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var a=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var c=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var u=0;for(c=[],u=0;u<a.length;u+=1)Object.prototype.toString.call(a[u])==="[object Array]"?c.push([t.doBidiReorder(a[u][0]),a[u][1],a[u][2]]):c.push([t.doBidiReorder(a[u])]);r.text=c}else r.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])})(Rt),Rt.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new ad(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new TH(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new mH(this.contents),this.head=new pH(this),this.name=new wH(this),this.cmap=new hC(this),this.toUnicode={},this.hhea=new xH(this),this.maxp=new NH(this),this.hmtx=new jH(this),this.post=new bH(this),this.os2=new yH(this),this.loca=new AH(this),this.glyf=new _H(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,u,h,f;for(f=[],c=0,u=(h=this.bbox).length;c<u;c++)e=h[c],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var a,o,c,u;for(c=0,o=0,u=(e=""+e).length;0<=u?o<u:o>u;o=0<=u?++o:--o)a=e.charCodeAt(o),c+=this.widthOfGlyph(this.characterToGlyph(a))+r*(1e3/t)||0;return c*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var xl,ad=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,a;for(a=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,a,o,c,u,h;return e=this.readByte(),t=this.readByte(),r=this.readByte(),a=this.readByte(),o=this.readByte(),c=this.readByte(),u=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^a)+16777216*(255^o)+65536*(255^c)+256*(255^u)+(255^h)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*a+16777216*o+65536*c+256*u+h},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,a,o;for(o=[],r=0,a=e.length;r<a;r++)t=e[r],o.push(this.writeByte(t));return o},n})(),mH=(function(){var n;function e(t){var r,a,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,a,o,c,u,h,f,g,y,w,b,T,S;for(S in b=Object.keys(t).length,h=Math.log(2),y=16*Math.floor(Math.log(b)/h),c=Math.floor(y/h),g=16*b-y,(a=new ad).writeInt(this.scalarType),a.writeShort(b),a.writeShort(y),a.writeShort(c),a.writeShort(g),o=16*b,f=a.pos+o,u=null,T=[],t)for(w=t[S],a.writeString(S),a.writeInt(n(w)),a.writeInt(f),a.writeInt(w.length),T=T.concat(w),S==="head"&&(u=f),f+=w.length;f%4;)T.push(0),f++;return a.write(T),r=2981146554-n(a.data),a.pos=u+8,a.writeUInt32(r),a.data},n=function(t){var r,a,o,c;for(t=fC.call(t);t.length%4;)t.push(0);for(o=new ad(t),a=0,r=0,c=t.length;r<c;r=r+=4)a+=o.readUInt32();return 4294967295&a},e})(),gH={}.hasOwnProperty,ic=function(n,e){for(var t in e)gH.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};xl=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var pH=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ic(n,xl),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new ad).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),k6=(function(){function n(e,t){var r,a,o,c,u,h,f,g,y,w,b,T,S,j,E,L,D;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),y=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(b=e.readUInt16(),w=b/2,e.pos+=6,o=(function(){var O,te;for(te=[],h=O=0;0<=w?O<w:O>w;h=0<=w?++O:--O)te.push(e.readUInt16());return te})(),e.pos+=2,S=(function(){var O,te;for(te=[],h=O=0;0<=w?O<w:O>w;h=0<=w?++O:--O)te.push(e.readUInt16());return te})(),f=(function(){var O,te;for(te=[],h=O=0;0<=w?O<w:O>w;h=0<=w?++O:--O)te.push(e.readUInt16());return te})(),g=(function(){var O,te;for(te=[],h=O=0;0<=w?O<w:O>w;h=0<=w?++O:--O)te.push(e.readUInt16());return te})(),a=(this.length-e.pos+this.offset)/2,u=(function(){var O,te;for(te=[],h=O=0;0<=a?O<a:O>a;h=0<=a?++O:--O)te.push(e.readUInt16());return te})(),h=E=0,D=o.length;E<D;h=++E)for(j=o[h],r=L=T=S[h];T<=j?L<=j:L>=j;r=T<=j?++L:--L)g[h]===0?c=r+f[h]:(c=u[g[h]/2+(r-T)-(w-h)]||0)!==0&&(c+=f[h]),this.codeMap[r]=65535&c}e.pos=y}return n.encode=function(e,t){var r,a,o,c,u,h,f,g,y,w,b,T,S,j,E,L,D,O,te,ae,H,V,k,F,I,P,B,ue,Ne,ce,pe,de,Se,ze,ne,q,Q,re,he,me,be,Le,ke,qe,Je,it;switch(ue=new ad,c=Object.keys(e).sort(function(at,ft){return at-ft}),t){case"macroman":for(S=0,j=(function(){var at=[];for(T=0;T<256;++T)at.push(0);return at})(),L={0:0},o={},Ne=0,Se=c.length;Ne<Se;Ne++)L[ke=e[a=c[Ne]]]==null&&(L[ke]=++S),o[a]={old:e[a],new:L[e[a]]},j[a]=L[e[a]];return ue.writeUInt16(1),ue.writeUInt16(0),ue.writeUInt32(12),ue.writeUInt16(0),ue.writeUInt16(262),ue.writeUInt16(0),ue.write(j),{charMap:o,subtable:ue.data,maxGlyphID:S+1};case"unicode":for(P=[],y=[],D=0,L={},r={},E=f=null,ce=0,ze=c.length;ce<ze;ce++)L[te=e[a=c[ce]]]==null&&(L[te]=++D),r[a]={old:te,new:L[te]},u=L[te]-a,E!=null&&u===f||(E&&y.push(E),P.push(a),f=u),E=a;for(E&&y.push(E),y.push(65535),P.push(65535),F=2*(k=P.length),V=2*Math.pow(Math.log(k)/Math.LN2,2),w=Math.log(V/2)/Math.LN2,H=2*k-V,h=[],ae=[],b=[],T=pe=0,ne=P.length;pe<ne;T=++pe){if(I=P[T],g=y[T],I===65535){h.push(0),ae.push(0);break}if(I-(B=r[I].new)>=32768)for(h.push(0),ae.push(2*(b.length+k-T)),a=de=I;I<=g?de<=g:de>=g;a=I<=g?++de:--de)b.push(r[a].new);else h.push(B-I),ae.push(0)}for(ue.writeUInt16(3),ue.writeUInt16(1),ue.writeUInt32(12),ue.writeUInt16(4),ue.writeUInt16(16+8*k+2*b.length),ue.writeUInt16(0),ue.writeUInt16(F),ue.writeUInt16(V),ue.writeUInt16(w),ue.writeUInt16(H),be=0,q=y.length;be<q;be++)a=y[be],ue.writeUInt16(a);for(ue.writeUInt16(0),Le=0,Q=P.length;Le<Q;Le++)a=P[Le],ue.writeUInt16(a);for(qe=0,re=h.length;qe<re;qe++)u=h[qe],ue.writeUInt16(u);for(Je=0,he=ae.length;Je<he;Je++)O=ae[Je],ue.writeUInt16(O);for(it=0,me=b.length;it<me;it++)S=b[it],ue.writeUInt16(S);return{charMap:r,subtable:ue.data,maxGlyphID:D+1}}},n})(),hC=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ic(n,xl),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=a?r<a:r>a;r=0<=a?++r:--r)t=new k6(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,a;return t==null&&(t="macroman"),r=k6.encode(e,t),(a=new ad).writeUInt16(0),a.writeUInt16(1),r.table=a.data.concat(r.subtable),r},n})(),xH=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ic(n,xl),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),yH=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ic(n,xl),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r})(),this.charRange=(function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),bH=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ic(n,xl),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(r=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)t=e.readByte(),a.push(this.names.push(e.readString(t)));return a;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var c,u,h;for(h=[],o=c=0,u=this.file.maxp.numGlyphs;0<=u?c<u:c>u;o=0<=u?++c:--c)h.push(e.readUInt32());return h}).call(this)}},n})(),vH=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},wH=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ic(n,xl),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,a,o,c,u,h,f,g,y,w;for(e.pos=this.offset,e.readShort(),t=e.readShort(),u=e.readShort(),r=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+u+e.readShort()});for(h={},o=g=0,y=r.length;g<y;o=++g)a=r[o],e.pos=a.offset,f=e.readString(a.length),c=new vH(f,a),h[w=a.nameID]==null&&(h[w]=[]),h[a.nameID].push(c);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},n})(),NH=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ic(n,xl),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),jH=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ic(n,xl),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,a,o,c,u,h;for(e.pos=this.offset,this.metrics=[],t=0,u=this.file.hhea.numberOfMetrics;0<=u?t<u:t>u;t=0<=u?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,g;for(g=[],t=f=0;0<=a?f<a:f>a;t=0<=a?++f:--f)g.push(e.readInt16());return g})(),this.widths=(function(){var f,g,y,w;for(w=[],f=0,g=(y=this.metrics).length;f<g;f++)o=y[f],w.push(o.advance);return w}).call(this),r=this.widths[this.widths.length-1],h=[],t=c=0;0<=a?c<a:c>a;t=0<=a?++c:--c)h.push(this.widths.push(r));return h},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),fC=[].slice,_H=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ic(n,xl),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,a,o,c,u,h,f,g,y;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,r=o.indexOf(e),(a=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,c=(u=new ad(t.read(a))).readShort(),f=u.readShort(),y=u.readShort(),h=u.readShort(),g=u.readShort(),this.cache[e]=c===-1?new EH(u,f,y,h,g):new SH(u,c,f,y,h,g),this.cache[e]))},n.prototype.encode=function(e,t,r){var a,o,c,u,h;for(c=[],o=[],u=0,h=t.length;u<h;u++)a=e[t[u]],o.push(c.length),a&&(c=c.concat(a.encode(r)));return o.push(c.length),{table:c,offsets:o}},n})(),SH=(function(){function n(e,t,r,a,o,c){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=a,this.xMax=o,this.yMax=c,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),EH=(function(){function n(e,t,r,a,o){var c,u;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;u=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&u;)c.pos+=1&u?4:2,128&u?c.pos+=8:64&u?c.pos+=4:8&u&&(c.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new ad(fC.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),AH=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ic(n,xl),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var a,o;for(o=[],r=0,a=this.length;r<a;r+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],r=0,a=this.length;r<a;r+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),a=0,o=0,c=0;c<r.length;++c)if(r[c]=a,o<t.length&&t[o]==c){++o,r[c]=a;var u=this.offsets[c],h=this.offsets[c+1]-u;h>0&&(a+=h)}for(var f=new Array(4*r.length),g=0;g<r.length;++g)f[4*g+3]=255&r[g],f[4*g+2]=(65280&r[g])>>8,f[4*g+1]=(16711680&r[g])>>16,f[4*g]=(4278190080&r[g])>>24;return f},n})(),TH=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,a,o;for(t in a=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[t],e[t]=a[r];return e},n.prototype.glyphsFor=function(e){var t,r,a,o,c,u,h;for(a={},c=0,u=e.length;c<u;c++)a[o=e[c]]=this.font.glyf.glyphFor(o);for(o in t=[],a)(r=a[o])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(o in h=this.glyphsFor(t))r=h[o],a[o]=r;return a},n.prototype.encode=function(e,t){var r,a,o,c,u,h,f,g,y,w,b,T,S,j,E;for(a in r=hC.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),b={0:0},E=r.charMap)b[(h=E[a]).old]=h.new;for(T in w=r.maxGlyphID,c)T in b||(b[T]=w++);return g=(function(L){var D,O;for(D in O={},L)O[L[D]]=D;return O})(b),y=Object.keys(g).sort(function(L,D){return L-D}),S=(function(){var L,D,O;for(O=[],L=0,D=y.length;L<D;L++)u=y[L],O.push(g[u]);return O})(),o=this.font.glyf.encode(c,S,b),f=this.font.loca.encode(o.offsets,S),j={cmap:this.font.cmap.raw(),glyf:o.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},n})();Rt.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,a,o,c;if(Array.isArray(t))return"["+(function(){var u,h,f;for(f=[],u=0,h=t.length;u<h;u++)r=t[u],f.push(e.convert(r));return f})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(a in o=["<<"],t)c=t[a],o.push("/"+a+" "+e.convert(c));return o.push(">>"),o.join(`
`)}return""+t},e})();function mC(n,e,t,r,a){r=r||{};var o=1.15,c=a.internal.scaleFactor,u=a.internal.getFontSize()/c,h=a.getLineHeightFactor?a.getLineHeightFactor():o,f=u*h,g=/\r\n|\r|\n/g,y="",w=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(y=typeof n=="string"?n.split(g):n,w=y.length||1),t+=u*(2-o),r.valign==="middle"?t-=w/2*f:r.valign==="bottom"&&(t-=w*f),r.halign==="center"||r.halign==="right"){var b=u;if(r.halign==="center"&&(b*=.5),y&&w>=1){for(var T=0;T<y.length;T++)a.text(y[T],e-a.getStringUnitWidth(y[T])*b,t),t+=f;return a}e-=a.getStringUnitWidth(n)*b}return r.halign==="justify"?a.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):a.text(n,e,t),a}var P6={},Cf=(function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:P6=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,a,o;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var c=this.jsPDFDocument.internal.getFont(),u=c.fontStyle,h=c.fontName;if(e.font&&(h=e.font),e.fontStyle){u=e.fontStyle;var f=this.getFontList()[h];f&&f.indexOf(u)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(f[0]),u=f[0])}if(this.jsPDFDocument.setFont(h,u),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var g=n.unifyColor(e.fillColor);g&&(r=this.jsPDFDocument).setFillColor.apply(r,g),g=n.unifyColor(e.textColor),g&&(a=this.jsPDFDocument).setTextColor.apply(a,g),g=n.unifyColor(e.lineColor),g&&(o=this.jsPDFDocument).setDrawColor.apply(o,g),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,a,o){return this.jsPDFDocument.rect(e,t,r,a,o)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return P6||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n})(),P2=function(n,e){return P2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},P2(n,e)};function gC(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");P2(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var pC=(function(n){gC(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e})(Array);function CH(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function IH(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function Rx(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],a=r.map(function(o){return t.getTextWidth(o)}).reduce(function(o,c){return Math.max(o,c)},0);return a}function xC(n,e,t,r){var a=e.settings.tableLineWidth,o=e.settings.tableLineColor;n.applyStyles({lineWidth:a,lineColor:o});var c=yC(a,!1);c&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,c)}function yC(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function wy(n,e){var t,r,a,o;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(a=n.right)!==null&&a!==void 0?a:e,bottom:(o=n.bottom)!==null&&o!==void 0?o:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function bC(n,e){var t=wy(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function RH(n,e,t,r,a){var o={},c=1.3333333333333333,u=A1(e,function(D){return a.getComputedStyle(D).backgroundColor});u!=null&&(o.fillColor=u);var h=A1(e,function(D){return a.getComputedStyle(D).color});h!=null&&(o.textColor=h);var f=PH(r,t);f&&(o.cellPadding=f);var g="borderTopColor",y=c*t,w=r.borderTopWidth;if(r.borderBottomWidth===w&&r.borderRightWidth===w&&r.borderLeftWidth===w){var b=(parseFloat(w)||0)/y;b&&(o.lineWidth=b)}else o.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/y,right:(parseFloat(r.borderRightWidth)||0)/y,bottom:(parseFloat(r.borderBottomWidth)||0)/y,left:(parseFloat(r.borderLeftWidth)||0)/y},o.lineWidth.top||(o.lineWidth.right?g="borderRightColor":o.lineWidth.bottom?g="borderBottomColor":o.lineWidth.left&&(g="borderLeftColor"));var T=A1(e,function(D){return a.getComputedStyle(D)[g]});T!=null&&(o.lineColor=T);var S=["left","right","center","justify"];S.indexOf(r.textAlign)!==-1&&(o.halign=r.textAlign),S=["middle","bottom","top"],S.indexOf(r.verticalAlign)!==-1&&(o.valign=r.verticalAlign);var j=parseInt(r.fontSize||"");isNaN(j)||(o.fontSize=j/c);var E=kH(r);E&&(o.fontStyle=E);var L=(r.fontFamily||"").toLowerCase();return n.indexOf(L)!==-1&&(o.font=L),o}function kH(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function A1(n,e){var t=vC(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var a=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],o=parseInt(r[4]);return o===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function vC(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:vC(n.parentElement,e):t}function PH(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),a=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,o=t.map(function(u){return parseInt(u||"0")/r}),c=wy(o,0);return a>c.top&&(c.top=a),a>c.bottom&&(c.bottom=a),c}function wC(n,e,t,r,a){var o,c;r===void 0&&(r=!1),a===void 0&&(a=!1);var u;typeof e=="string"?u=t.document.querySelector(e):u=e;var h=Object.keys(n.getFontList()),f=n.scaleFactor(),g=[],y=[],w=[];if(!u)return console.error("Html table could not be found with input: ",e),{head:g,body:y,foot:w};for(var b=0;b<u.rows.length;b++){var T=u.rows[b],S=(c=(o=T?.parentElement)===null||o===void 0?void 0:o.tagName)===null||c===void 0?void 0:c.toLowerCase(),j=LH(h,f,t,T,r,a);j&&(S==="thead"?g.push(j):S==="tfoot"?w.push(j):y.push(j))}return{head:g,body:y,foot:w}}function LH(n,e,t,r,a,o){for(var c=new pC(r),u=0;u<r.cells.length;u++){var h=r.cells[u],f=t.getComputedStyle(h);if(a||f.display!=="none"){var g=void 0;o&&(g=RH(n,h,e,f,t)),c.push({rowSpan:h.rowSpan,colSpan:h.colSpan,styles:g,_element:h,content:DH(h)})}}var y=t.getComputedStyle(r);if(c.length>0&&(a||y.display!=="none"))return c}function DH(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function MH(n,e,t){for(var r=0,a=[n,e,t];r<a.length;r++){var o=a[r];o&&typeof o!="object"&&console.error("The options parameter should be of type object, is: "+typeof o),o.startY&&typeof o.startY!="number"&&(console.error("Invalid value for startY option",o.startY),delete o.startY)}}function zc(n,e,t,r,a){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(n),c=1;c<arguments.length;c++){var u=arguments[c];if(u!=null)for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(o[h]=u[h])}return o}function OH(n,e){var t=new Cf(n),r=t.getDocumentOptions(),a=t.getGlobalOptions();MH(a,r,e);var o=zc({},a,r,e),c;typeof window<"u"&&(c=window);var u=FH(a,r,e),h=VH(a,r,e),f=UH(t,o),g=zH(t,o,c);return{id:e.tableId,content:g,hooks:h,styles:u,settings:f}}function FH(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(h){if(h==="columnStyles"){var f=n[h],g=e[h],y=t[h];r.columnStyles=zc({},f,g,y)}else{var w=[n,e,t],b=w.map(function(T){return T[h]||{}});r[h]=zc({},b[0],b[1],b[2])}},o=0,c=Object.keys(r);o<c.length;o++){var u=c[o];a(u)}return r}function VH(n,e,t){for(var r=[n,e,t],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},o=0,c=r;o<c.length;o++){var u=c[o];u.didParseCell&&a.didParseCell.push(u.didParseCell),u.willDrawCell&&a.willDrawCell.push(u.willDrawCell),u.didDrawCell&&a.didDrawCell.push(u.didDrawCell),u.willDrawPage&&a.willDrawPage.push(u.willDrawPage),u.didDrawPage&&a.didDrawPage.push(u.didDrawPage)}return a}function UH(n,e){var t,r,a,o,c,u,h,f,g,y,w,b,T=wy(e.margin,40/n.scaleFactor()),S=(t=BH(n,e.startY))!==null&&t!==void 0?t:T.top,j;e.showFoot===!0?j="everyPage":e.showFoot===!1?j="never":j=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var E;e.showHead===!0?E="everyPage":e.showHead===!1?E="never":E=(a=e.showHead)!==null&&a!==void 0?a:"everyPage";var L=(o=e.useCss)!==null&&o!==void 0?o:!1,D=e.theme||(L?"plain":"striped"),O=!!e.horizontalPageBreak,te=(c=e.horizontalPageBreakRepeat)!==null&&c!==void 0?c:null;return{includeHiddenHtml:(u=e.includeHiddenHtml)!==null&&u!==void 0?u:!1,useCss:L,theme:D,startY:S,margin:T,pageBreak:(h=e.pageBreak)!==null&&h!==void 0?h:"auto",rowPageBreak:(f=e.rowPageBreak)!==null&&f!==void 0?f:"auto",tableWidth:(g=e.tableWidth)!==null&&g!==void 0?g:"auto",showHead:E,showFoot:j,tableLineWidth:(y=e.tableLineWidth)!==null&&y!==void 0?y:0,tableLineColor:(w=e.tableLineColor)!==null&&w!==void 0?w:200,horizontalPageBreak:O,horizontalPageBreakRepeat:te,horizontalPageBreakBehaviour:(b=e.horizontalPageBreakBehaviour)!==null&&b!==void 0?b:"afterAllRows"}}function BH(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),a=n.pageNumber(),o=!1;if(t&&t.startPageNumber){var c=t.startPageNumber+t.pageNumber-1;o=c===a}return typeof e=="number"?e:(e==null||e===!1)&&o&&t?.finalY!=null?t.finalY+20/r:null}function zH(n,e,t){var r=e.head||[],a=e.body||[],o=e.foot||[];if(e.html){var c=e.includeHiddenHtml;if(t){var u=wC(n,e.html,t,c,e.useCss)||{};r=u.head||r,a=u.body||r,o=u.foot||r}else console.error("Cannot parse html in non browser environment")}var h=e.columns||qH(r,a,o);return{columns:h,head:r,body:a,foot:o}}function qH(n,e,t){var r=n[0]||e[0]||t[0]||[],a=[];return Object.keys(r).filter(function(o){return o!=="_element"}).forEach(function(o){var c=1,u;Array.isArray(r)?u=r[parseInt(o)]:u=r[o],typeof u=="object"&&!Array.isArray(u)&&(c=u?.colSpan||1);for(var h=0;h<c;h++){var f=void 0;Array.isArray(r)?f=a.length:f=o+(h>0?"_".concat(h):"");var g={dataKey:f};a.push(g)}}),a}var L2=(function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n})(),HH=(function(n){gC(e,n);function e(t,r,a,o,c,u){var h=n.call(this,t,r,u)||this;return h.cell=a,h.row=o,h.column=c,h.section=o.section,h}return e})(L2),GH=(function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,a,o,c){for(var u=0,h=t;u<h.length;u++){var f=h[u],g=new HH(e,this,r,a,o,c),y=f(g)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],y)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,a=this.hooks.didDrawPage;r<a.length;r++){var o=a[r];o(new L2(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,a=this.hooks.willDrawPage;r<a.length;r++){var o=a[r];o(new L2(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(a,o){return a+o.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n})(),NC=(function(){function n(e,t,r,a,o){o===void 0&&(o=!1),this.height=0,this.raw=e,e instanceof pC&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=a,this.spansMultiplePages=o}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,a){var o;return Math.max(r,((o=t.cells[a.index])===null||o===void 0?void 0:o.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var a=t.cells[r.index];return a?a.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(a,o){var c=r.cells[o.index];if(!c)return 0;var u=t.getLineHeight(c.styles.fontSize),h=c.padding("vertical"),f=h+u;return f>a?f:a},0)},n})(),jC=(function(){function n(e,t,r){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var o=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,o=(a=e.content)!==null&&a!==void 0?a:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var c=o!=null?""+o:"",u=/\r\n|\r|\n/g;this.text=c.split(u)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");r=this.x+a/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/e*t,o=r*a+this.padding("vertical");return Math.max(o,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=wy(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n})(),$H=(function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,a=e.allRows();r<a.length;r++){var o=a[r],c=o.cells[this.index];c&&typeof c.styles.cellWidth=="number"&&(t=Math.max(t,c.styles.cellWidth))}return t},n})();function WH(n,e){KH(n,e);var t=[],r=0;e.columns.forEach(function(o){var c=o.getMaxCustomCellWidth(e);c?o.width=c:(o.width=o.wrappedWidth,t.push(o)),r+=o.width});var a=e.getWidth(n.pageSize().width)-r;a&&(a=D2(t,a,function(o){return Math.max(o.minReadableWidth,o.minWidth)})),a&&(a=D2(t,a,function(o){return o.minWidth})),a=Math.abs(a),!e.settings.horizontalPageBreak&&a>.1/n.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),XH(e),QH(e,n),YH(e)}function KH(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,a=bC(n,e);e.allRows().forEach(function(o){for(var c=0,u=e.columns;c<u.length;c++){var h=u[c],f=o.cells[h.index];if(f){var g=e.hooks.didParseCell;e.callCellHooks(n,g,f,o,h,null);var y=f.padding("horizontal");f.contentWidth=Rx(f.text,f.styles,n)+y;var w=Rx(f.text.join(" ").split(/[^\S\u00A0]+/),f.styles,n);if(f.minReadableWidth=w+f.padding("horizontal"),typeof f.styles.cellWidth=="number")f.minWidth=f.styles.cellWidth,f.wrappedWidth=f.styles.cellWidth;else if(f.styles.cellWidth==="wrap"||r===!0)f.contentWidth>a?(f.minWidth=a,f.wrappedWidth=a):(f.minWidth=f.contentWidth,f.wrappedWidth=f.contentWidth);else{var b=10/t;f.minWidth=f.styles.minCellWidth||b,f.wrappedWidth=f.contentWidth,f.minWidth>f.wrappedWidth&&(f.wrappedWidth=f.minWidth)}}}}),e.allRows().forEach(function(o){for(var c=0,u=e.columns;c<u.length;c++){var h=u[c],f=o.cells[h.index];if(f&&f.colSpan===1)h.wrappedWidth=Math.max(h.wrappedWidth,f.wrappedWidth),h.minWidth=Math.max(h.minWidth,f.minWidth),h.minReadableWidth=Math.max(h.minReadableWidth,f.minReadableWidth);else{var g=e.styles.columnStyles[h.dataKey]||e.styles.columnStyles[h.index]||{},y=g.cellWidth||g.minCellWidth;y&&typeof y=="number"&&(h.minWidth=y,h.wrappedWidth=y)}f&&(f.colSpan>1&&!h.minWidth&&(h.minWidth=f.minWidth),f.colSpan>1&&!h.wrappedWidth&&(h.wrappedWidth=f.minWidth))}})}function D2(n,e,t){for(var r=e,a=n.reduce(function(b,T){return b+T.wrappedWidth},0),o=0;o<n.length;o++){var c=n[o],u=c.wrappedWidth/a,h=r*u,f=c.width+h,g=t(c),y=f<g?g:f;e-=y-c.width,c.width=y}if(e=Math.round(e*1e10)/1e10,e){var w=n.filter(function(b){return e<0?b.width>t(b):!0});w.length&&(e=D2(w,e,t))}return e}function YH(n){for(var e={},t=1,r=n.allRows(),a=0;a<r.length;a++)for(var o=r[a],c=0,u=n.columns;c<u.length;c++){var h=u[c],f=e[h.index];if(t>1)t--,delete o.cells[h.index];else if(f)f.cell.height+=o.height,t=f.cell.colSpan,delete o.cells[h.index],f.left--,f.left<=1&&delete e[h.index];else{var g=o.cells[h.index];if(!g)continue;if(g.height=o.height,g.rowSpan>1){var y=r.length-a,w=g.rowSpan>y?y:g.rowSpan;e[h.index]={cell:g,left:w,row:o}}}}}function XH(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],a=null,o=0,c=0,u=0;u<n.columns.length;u++){var h=n.columns[u];if(c-=1,c>1&&n.columns[u+1])o+=h.width,delete r.cells[h.index];else if(a){var f=a;delete r.cells[h.index],a=null,f.width=h.width+o}else{var f=r.cells[h.index];if(!f)continue;if(c=f.colSpan,o=0,f.colSpan>1){a=f,o+=h.width;continue}f.width=h.width+o}}}function QH(n,e){for(var t={count:0,height:0},r=0,a=n.allRows();r<a.length;r++){for(var o=a[r],c=0,u=n.columns;c<u.length;c++){var h=u[c],f=o.cells[h.index];if(f){e.applyStyles(f.styles,!0);var g=f.width-f.padding("horizontal");if(f.styles.overflow==="linebreak")f.text=e.splitTextToSize(f.text,g+1/e.scaleFactor(),{fontSize:f.styles.fontSize});else if(f.styles.overflow==="ellipsize")f.text=L6(f.text,g,f.styles,e,"...");else if(f.styles.overflow==="hidden")f.text=L6(f.text,g,f.styles,e,"");else if(typeof f.styles.overflow=="function"){var y=f.styles.overflow(f.text,g);typeof y=="string"?f.text=[y]:f.text=y}f.contentHeight=f.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var w=f.contentHeight/f.rowSpan;f.rowSpan>1&&t.count*t.height<w*f.rowSpan?t={height:w,count:f.rowSpan}:t&&t.count>0&&t.height>w&&(w=t.height),w>o.height&&(o.height=w)}}t.count--}}function L6(n,e,t,r,a){return n.map(function(o){return JH(o,e,t,r,a)})}function JH(n,e,t,r,a){var o=1e4*r.scaleFactor();if(e=Math.ceil(e*o)/o,e>=Rx(n,t,r))return n;for(;e<Rx(n+a,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+a}function ZH(n,e){var t=new Cf(n),r=eG(e,t.scaleFactor()),a=new GH(e,r);return WH(t,a),t.applyStyles(t.userStyles),a}function eG(n,e){var t=n.content,r=nG(t.columns);if(t.head.length===0){var a=D6(r,"head");a&&t.head.push(a)}if(t.foot.length===0){var a=D6(r,"foot");a&&t.foot.push(a)}var o=n.settings.theme,c=n.styles;return{columns:r,head:T1("head",t.head,r,c,o,e),body:T1("body",t.body,r,c,o,e),foot:T1("foot",t.foot,r,c,o,e)}}function T1(n,e,t,r,a,o){var c={},u=e.map(function(h,f){for(var g=0,y={},w=0,b=0,T=0,S=t;T<S.length;T++){var j=S[T];if(c[j.index]==null||c[j.index].left===0)if(b===0){var E=void 0;Array.isArray(h)?E=h[j.index-w-g]:E=h[j.dataKey];var L={};typeof E=="object"&&!Array.isArray(E)&&(L=E?.styles||{});var D=rG(n,j,f,a,r,o,L),O=new jC(E,D,n);y[j.dataKey]=O,y[j.index]=O,b=O.colSpan-1,c[j.index]={left:O.rowSpan-1,times:b}}else b--,w++;else c[j.index].left--,b=c[j.index].times,g++}return new NC(h,f,n,y)});return u}function D6(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var a=tG(e,r.raw);a!=null&&(t[r.dataKey]=a)}}),Object.keys(t).length>0?t:null}function tG(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function nG(n){return n.map(function(e,t){var r,a;return typeof e=="object"?a=(r=e.dataKey)!==null&&r!==void 0?r:t:a=t,new $H(a,e,t)})}function rG(n,e,t,r,a,o,c){var u=IH(r),h;n==="head"?h=a.headStyles:n==="body"?h=a.bodyStyles:n==="foot"&&(h=a.footStyles);var f=zc({},u.table,u[n],a.styles,h),g=a.columnStyles[e.dataKey]||a.columnStyles[e.index]||{},y=n==="body"?g:{},w=n==="body"&&t%2===0?zc({},u.alternateRow,a.alternateRowStyles):{},b=CH(o),T=zc({},b,f,w,y);return zc(T,c)}function sG(n,e,t){var r;t===void 0&&(t={});var a=bC(n,e),o=new Map,c=[],u=[],h=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?h=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(h=[e.settings.horizontalPageBreakRepeat]),h.forEach(function(w){var b=e.columns.find(function(T){return T.dataKey===w||T.index===w});b&&!o.has(b.index)&&(o.set(b.index,!0),c.push(b.index),u.push(e.columns[b.index]),a-=b.wrappedWidth)});for(var f=!0,g=(r=t?.start)!==null&&r!==void 0?r:0;g<e.columns.length;){if(o.has(g)){g++;continue}var y=e.columns[g].wrappedWidth;if(f||a>=y)f=!1,c.push(g),u.push(e.columns[g]),a-=y;else break;g++}return{colIndexes:c,columns:u,lastIndex:g-1}}function aG(n,e){for(var t=[],r=0;r<e.columns.length;r++){var a=sG(n,e,{start:r});a.columns.length&&(t.push(a),r=a.lastIndex)}return t}function iG(n,e){var t=e.settings,r=t.startY,a=t.margin,o={x:a.left,y:r},c=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),u=r+a.bottom+c;if(t.pageBreak==="avoid"){var h=e.body,f=h.reduce(function(w,b){return w+b.height},0);u+=f}var g=new Cf(n);(t.pageBreak==="always"||t.startY!=null&&u>g.pageSize().height)&&(SC(g),o.y=a.top),e.callWillDrawPageHooks(g,o);var y=zc({},o);e.startPageNumber=g.pageNumber(),t.horizontalPageBreak?oG(g,e,y,o):(g.applyStyles(g.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(w){return Yc(g,e,w,o,e.columns)}),g.applyStyles(g.userStyles),e.body.forEach(function(w,b){var T=b===e.body.length-1;kx(g,e,w,T,y,o,e.columns)}),g.applyStyles(g.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(w){return Yc(g,e,w,o,e.columns)})),xC(g,e,y,o),e.callEndPageHooks(g,o),e.finalY=o.y,n.lastAutoTable=e,g.applyStyles(g.userStyles)}function oG(n,e,t,r){var a=aG(n,e),o=e.settings;if(o.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(f,g){n.applyStyles(n.userStyles),g>0?bg(n,e,t,r,f.columns,!0):M6(n,e,r,f.columns),lG(n,e,t,r,f.columns),C1(n,e,r,f.columns)});else for(var c=-1,u=a[0],h=function(){var f=c;if(u){n.applyStyles(n.userStyles);var g=u.columns;c>=0?bg(n,e,t,r,g,!0):M6(n,e,r,g),f=O6(n,e,c+1,r,g),C1(n,e,r,g)}var y=f-c;a.slice(1).forEach(function(w){n.applyStyles(n.userStyles),bg(n,e,t,r,w.columns,!0),O6(n,e,c+1,r,w.columns,y),C1(n,e,r,w.columns)}),c=f};c<e.body.length-1;)h()}function M6(n,e,t,r){var a=e.settings;n.applyStyles(n.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&e.head.forEach(function(o){return Yc(n,e,o,t,r)})}function lG(n,e,t,r,a){n.applyStyles(n.userStyles),e.body.forEach(function(o,c){var u=c===e.body.length-1;kx(n,e,o,u,t,r,a)})}function O6(n,e,t,r,a,o){n.applyStyles(n.userStyles),o=o??e.body.length;var c=Math.min(t+o,e.body.length),u=-1;return e.body.slice(t,c).forEach(function(h,f){var g=t+f===e.body.length-1,y=_C(n,e,g,r);h.canEntireRowFit(y,a)&&(Yc(n,e,h,r,a),u=t+f)}),u}function C1(n,e,t,r){var a=e.settings;n.applyStyles(n.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&e.foot.forEach(function(o){return Yc(n,e,o,t,r)})}function cG(n,e,t){var r=t.getLineHeight(n.styles.fontSize),a=n.padding("vertical"),o=Math.floor((e-a)/r);return Math.max(0,o)}function uG(n,e,t,r){var a={};n.spansMultiplePages=!0,n.height=0;for(var o=0,c=0,u=t.columns;c<u.length;c++){var h=u[c],f=n.cells[h.index];if(f){Array.isArray(f.text)||(f.text=[f.text]);var g=new jC(f.raw,f.styles,f.section);g=zc(g,f),g.text=[];var y=cG(f,e,r);f.text.length>y&&(g.text=f.text.splice(y,f.text.length));var w=r.scaleFactor(),b=r.getLineHeightFactor();f.contentHeight=f.getContentHeight(w,b),f.contentHeight>=e&&(f.contentHeight=e,g.styles.minCellHeight-=e),f.contentHeight>n.height&&(n.height=f.contentHeight),g.contentHeight=g.getContentHeight(w,b),g.contentHeight>o&&(o=g.contentHeight),a[h.index]=g}}var T=new NC(n.raw,-1,n.section,a,!0);T.height=o;for(var S=0,j=t.columns;S<j.length;S++){var h=j[S],g=T.cells[h.index];g&&(g.height=T.height);var f=n.cells[h.index];f&&(f.height=n.height)}return T}function dG(n,e,t,r){var a=n.pageSize().height,o=r.settings.margin,c=o.top+o.bottom,u=a-c;e.section==="body"&&(u-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var h=e.getMinimumRowHeight(r.columns,n),f=h<t;if(h>u)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!f)return!1;var g=e.hasRowSpan(r.columns),y=e.getMaxCellHeight(r.columns)>u;return y?(g&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(g||r.settings.rowPageBreak==="avoid")}function kx(n,e,t,r,a,o,c){var u=_C(n,e,r,o);if(t.canEntireRowFit(u,c))Yc(n,e,t,o,c);else if(dG(n,t,u,e)){var h=uG(t,u,e,n);Yc(n,e,t,o,c),bg(n,e,a,o,c),kx(n,e,h,r,a,o,c)}else bg(n,e,a,o,c),kx(n,e,t,r,a,o,c)}function Yc(n,e,t,r,a){r.x=e.settings.margin.left;for(var o=0,c=a;o<c.length;o++){var u=c[o],h=t.cells[u.index];if(!h){r.x+=u.width;continue}n.applyStyles(h.styles),h.x=r.x,h.y=r.y;var f=e.callCellHooks(n,e.hooks.willDrawCell,h,t,u,r);if(f===!1){r.x+=u.width;continue}hG(n,h,r);var g=h.getTextPos();mC(h.text,g.x,g.y,{halign:h.styles.halign,valign:h.styles.valign,maxWidth:Math.ceil(h.width-h.padding("left")-h.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,h,t,u,r),r.x+=u.width}r.y+=t.height}function hG(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var a=yC(r.lineWidth,r.fillColor);a&&n.rect(e.x,t.y,e.width,e.height,a)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),fG(n,e,t,r.lineWidth))}function fG(n,e,t,r){var a,o,c,u;r.top&&(a=t.x,o=t.y,c=t.x+e.width,u=t.y,r.right&&(c+=.5*r.right),r.left&&(a-=.5*r.left),h(r.top,a,o,c,u)),r.bottom&&(a=t.x,o=t.y+e.height,c=t.x+e.width,u=t.y+e.height,r.right&&(c+=.5*r.right),r.left&&(a-=.5*r.left),h(r.bottom,a,o,c,u)),r.left&&(a=t.x,o=t.y,c=t.x,u=t.y+e.height,r.top&&(o-=.5*r.top),r.bottom&&(u+=.5*r.bottom),h(r.left,a,o,c,u)),r.right&&(a=t.x+e.width,o=t.y,c=t.x+e.width,u=t.y+e.height,r.top&&(o-=.5*r.top),r.bottom&&(u+=.5*r.bottom),h(r.right,a,o,c,u));function h(f,g,y,w,b){n.getDocument().setLineWidth(f),n.getDocument().line(g,y,w,b,"S")}}function _C(n,e,t,r){var a=e.settings.margin.bottom,o=e.settings.showFoot;return(o==="everyPage"||o==="lastPage"&&t)&&(a+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-a}function bg(n,e,t,r,a,o){a===void 0&&(a=[]),o===void 0&&(o=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!o&&e.foot.forEach(function(u){return Yc(n,e,u,r,a)}),e.callEndPageHooks(n,r);var c=e.settings.margin;xC(n,e,t,r),SC(n),e.pageNumber++,r.x=c.left,r.y=c.top,t.y=c.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(u){return Yc(n,e,u,r,a)}),n.applyStyles(n.userStyles))}function SC(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function mG(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],a=OH(this,r),o=ZH(this,a);return iG(this,o),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,a){mC(e,t,r,a,this)},n.API.autoTableSetDefaults=function(e){return Cf.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){Cf.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Cf(this),o=wC(a,e,window,t,!1),c=o.head,u=o.body,h=((r=c[0])===null||r===void 0?void 0:r.map(function(f){return f.content}))||[];return{columns:h,rows:u,data:u}}}var I1;try{if(typeof window<"u"&&window){var F6=window,V6=F6.jsPDF||((I1=F6.jspdf)===null||I1===void 0?void 0:I1.jsPDF);V6&&mG(V6)}}catch(n){console.error("Could not apply autoTable plugin",n)}const EC=async(n,e={})=>{const{orientation:t="landscape",title:r="Village Statistics Report",gramPanchayatName:a="Gram Panchayat"}=e,o=await NT(n);if(o.length===0)throw new Error(`No data available for year ${n}`);const c=new Rt({orientation:t,unit:"mm",format:"a4"}),u=c.internal.pageSize.getWidth(),h=c.internal.pageSize.getHeight();let f=20;const g=()=>(c.setFillColor(255,107,0),c.rect(0,0,u,3,"F"),c.setFillColor(255,255,255),c.rect(0,3,u,3,"F"),c.setFillColor(19,136,8),c.rect(0,6,u,3,"F"),c.setFontSize(18),c.setTextColor(0,0,0),c.setFont("helvetica","bold"),c.text(r,u/2,18,{align:"center"}),c.setFontSize(12),c.setFont("helvetica","normal"),c.text(a,u/2,25,{align:"center"}),c.setFontSize(10),c.text(`Year: ${n}`,u/2,31,{align:"center"}),38);f=g(),c.setFontSize(14),c.setFont("helvetica","bold"),c.setTextColor(255,107,0),c.text("1. Population Demographics",14,f),f+=8;const y=o.map(k=>[k.village.nameEn||"-",(k.demographics.totalPopulation||0).toLocaleString(),(k.demographics.malePopulation||0).toLocaleString(),(k.demographics.femalePopulation||0).toLocaleString(),k.demographics.source||"-"]),w=o.reduce((k,F)=>k+(F.demographics.totalPopulation||0),0),b=o.reduce((k,F)=>k+(F.demographics.malePopulation||0),0),T=o.reduce((k,F)=>k+(F.demographics.femalePopulation||0),0);y.push(["TOTAL",w.toLocaleString(),b.toLocaleString(),T.toLocaleString(),""]),c.autoTable({startY:f,head:[["Village","Total Population","Male","Female","Source"]],body:y,theme:"grid",headStyles:{fillColor:[255,107,0],textColor:255,fontStyle:"bold"},footStyles:{fillColor:[240,240,240],fontStyle:"bold"},alternateRowStyles:{fillColor:[252,248,245]},styles:{fontSize:9,cellPadding:3}}),f=c.lastAutoTable.finalY+10,f>h-60&&(c.addPage(),f=g()),c.setFontSize(14),c.setFont("helvetica","bold"),c.setTextColor(255,107,0),c.text("2. Category-wise Population Breakdown",14,f),f+=8;const S=[];o.forEach(k=>{const F=k.breakdowns.find(ue=>ue.category==="ST")||{},I=k.breakdowns.find(ue=>ue.category==="SC")||{},P=k.breakdowns.find(ue=>ue.category==="OBC")||{},B=k.breakdowns.find(ue=>ue.category==="OTHER")||{};S.push([k.village.nameEn||"-",(F.maleCount||0).toLocaleString(),(F.femaleCount||0).toLocaleString(),((F.maleCount||0)+(F.femaleCount||0)).toLocaleString(),(I.maleCount||0).toLocaleString(),(I.femaleCount||0).toLocaleString(),((I.maleCount||0)+(I.femaleCount||0)).toLocaleString(),(P.maleCount||0).toLocaleString(),(P.femaleCount||0).toLocaleString(),((P.maleCount||0)+(P.femaleCount||0)).toLocaleString(),(B.maleCount||0).toLocaleString(),(B.femaleCount||0).toLocaleString(),((B.maleCount||0)+(B.femaleCount||0)).toLocaleString()])});const j={male:0,female:0},E={male:0,female:0},L={male:0,female:0},D={male:0,female:0};o.forEach(k=>{k.breakdowns.forEach(F=>{F.category==="ST"?(j.male+=F.maleCount||0,j.female+=F.femaleCount||0):F.category==="SC"?(E.male+=F.maleCount||0,E.female+=F.femaleCount||0):F.category==="OBC"?(L.male+=F.maleCount||0,L.female+=F.femaleCount||0):F.category==="OTHER"&&(D.male+=F.maleCount||0,D.female+=F.femaleCount||0)})}),S.push(["TOTAL",j.male.toLocaleString(),j.female.toLocaleString(),(j.male+j.female).toLocaleString(),E.male.toLocaleString(),E.female.toLocaleString(),(E.male+E.female).toLocaleString(),L.male.toLocaleString(),L.female.toLocaleString(),(L.male+L.female).toLocaleString(),D.male.toLocaleString(),D.female.toLocaleString(),(D.male+D.female).toLocaleString()]),c.autoTable({startY:f,head:[["Village",{content:"ST",colSpan:3},{content:"SC",colSpan:3},{content:"OBC",colSpan:3},{content:"OTHER",colSpan:3}],["","M","F","T","M","F","T","M","F","T","M","F","T"]],body:S,theme:"grid",headStyles:{fillColor:[255,107,0],textColor:255,fontStyle:"bold",fontSize:8},footStyles:{fillColor:[240,240,240],fontStyle:"bold"},alternateRowStyles:{fillColor:[252,248,245]},styles:{fontSize:7,cellPadding:2}}),f=c.lastAutoTable.finalY+10,f>h-60&&(c.addPage(),f=g()),c.setFontSize(14),c.setFont("helvetica","bold"),c.setTextColor(255,107,0),c.text("3. Groups & Committees",14,f),f+=8;const O=o.map(k=>[k.village.nameEn||"-",(k.groups.mahilaBachatGatCount||0).toString(),(k.groups.yuvakMandalCount||0).toString(),(k.groups.kisanGatCount||0).toString(),(k.groups.otherGroupCount||0).toString(),((k.groups.mahilaBachatGatCount||0)+(k.groups.yuvakMandalCount||0)+(k.groups.kisanGatCount||0)+(k.groups.otherGroupCount||0)).toString()]),te=o.reduce((k,F)=>({mbg:k.mbg+(F.groups.mahilaBachatGatCount||0),ym:k.ym+(F.groups.yuvakMandalCount||0),kg:k.kg+(F.groups.kisanGatCount||0),og:k.og+(F.groups.otherGroupCount||0)}),{mbg:0,ym:0,kg:0,og:0});O.push(["TOTAL",te.mbg.toString(),te.ym.toString(),te.kg.toString(),te.og.toString(),(te.mbg+te.ym+te.kg+te.og).toString()]),c.autoTable({startY:f,head:[["Village","Mahila Bachat Gat","Yuvak Mandal","Kisan Gat","Other Groups","Total"]],body:O,theme:"grid",headStyles:{fillColor:[255,107,0],textColor:255,fontStyle:"bold"},footStyles:{fillColor:[240,240,240],fontStyle:"bold"},alternateRowStyles:{fillColor:[252,248,245]},styles:{fontSize:9,cellPadding:3}}),f=c.lastAutoTable.finalY+10,f>h-60&&(c.addPage(),f=g()),c.setFontSize(14),c.setFont("helvetica","bold"),c.setTextColor(255,107,0),c.text("4. Water & Infrastructure",14,f),f+=8;const ae=o.map(k=>[k.village.nameEn||"-",(k.infrastructure.wellsCount||0).toString(),(k.infrastructure.borewellsCount||0).toString(),(k.infrastructure.handpumpsCount||0).toString(),(k.infrastructure.tapConnectionsCount||0).toString(),((k.infrastructure.wellsCount||0)+(k.infrastructure.borewellsCount||0)+(k.infrastructure.handpumpsCount||0)+(k.infrastructure.tapConnectionsCount||0)).toString()]),H=o.reduce((k,F)=>({wells:k.wells+(F.infrastructure.wellsCount||0),bore:k.bore+(F.infrastructure.borewellsCount||0),hand:k.hand+(F.infrastructure.handpumpsCount||0),tap:k.tap+(F.infrastructure.tapConnectionsCount||0)}),{wells:0,bore:0,hand:0,tap:0});ae.push(["TOTAL",H.wells.toString(),H.bore.toString(),H.hand.toString(),H.tap.toString(),(H.wells+H.bore+H.hand+H.tap).toString()]),c.autoTable({startY:f,head:[["Village","Wells","Borewells","Handpumps","Tap Connections","Total"]],body:ae,theme:"grid",headStyles:{fillColor:[255,107,0],textColor:255,fontStyle:"bold"},footStyles:{fillColor:[240,240,240],fontStyle:"bold"},alternateRowStyles:{fillColor:[252,248,245]},styles:{fontSize:9,cellPadding:3}});const V=new Date().toLocaleDateString("en-IN");return c.setFontSize(8),c.setTextColor(100,100,100),c.text(`Generated on: ${V}`,14,h-10),c.text(`Page ${c.internal.getNumberOfPages()}`,u-30,h-10),c},gG=async(n,e={})=>{const r=(await EC(n,e)).output("blob"),a=URL.createObjectURL(r);window.open(a,"_blank")},AC=async(n,e={})=>{const t=await EC(n,e),r=`Village_Statistics_${n}_${Date.now()}.pdf`;t.save(r)},pG=({selectedYear:n})=>{const{settings:e}=tu(),[t,r]=K.useState(!1),[a,o]=K.useState({type:"",text:""}),c=async()=>{r(!0),o({type:"",text:""});try{const h={title:"Village Statistics Report",gramPanchayatName:e?.title?.en||"Gram Panchayat",orientation:"landscape"};await gG(n,h),o({type:"success",text:"PDF opened in new tab successfully!"})}catch(h){o({type:"error",text:h.message||"Failed to generate PDF. Please ensure data is available for the selected year."})}finally{r(!1)}},u=async()=>{r(!0),o({type:"",text:""});try{const h={title:"Village Statistics Report",gramPanchayatName:e?.title?.en||"Gram Panchayat",orientation:"landscape"};await AC(n,h),o({type:"success",text:`PDF for year ${n} downloaded successfully!`})}catch(h){o({type:"error",text:h.message||"Failed to generate PDF. Please ensure data is available for the selected year."})}finally{r(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["PDF Reports & Downloads - ",n]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Generate comprehensive PDF reports with all village statistics"})]}),a.text&&s.jsxs("div",{className:`flex items-center gap-2 p-4 rounded-lg ${a.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[a.type==="success"?s.jsx(ho,{className:"w-5 h-5"}):s.jsx(Qn,{className:"w-5 h-5"}),s.jsx("span",{children:a.text})]}),s.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-green-50 border border-orange-200 rounded-lg p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 bg-white rounded-lg shadow-sm",children:s.jsx(hr,{className:"w-8 h-8 text-orange-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Comprehensive Village Statistics Report"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["This PDF report includes all village statistics data for year ",s.jsx("strong",{children:n}),":"]}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Population Demographics:"})," Total, Male, Female population per village"]})]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Category-wise Breakdown:"})," ST, SC, OBC, Other population distribution"]})]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Groups & Committees:"})," Mahila Bachat Gat, Yuvak Mandal, Kisan Gat counts"]})]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Water & Infrastructure:"})," Wells, Borewells, Handpumps, Tap Connections"]})]})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("button",{onClick:c,disabled:t,className:"flex items-center justify-center gap-3 px-6 py-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-md hover:shadow-lg",children:[s.jsx(Mo,{className:"w-5 h-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-semibold",children:"Preview PDF"}),s.jsx("div",{className:"text-xs text-blue-100",children:"Open in new tab"})]})]}),s.jsxs("button",{onClick:u,disabled:t,className:"flex items-center justify-center gap-3 px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-md hover:shadow-lg",children:[s.jsx(Do,{className:"w-5 h-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-semibold",children:"Download PDF"}),s.jsx("div",{className:"text-xs text-green-100",children:"Save to computer"})]})]})]}),t&&s.jsxs("div",{className:"flex items-center justify-center gap-3 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),s.jsx("span",{className:"text-blue-700 font-medium",children:"Generating PDF report..."})]}),s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[s.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[s.jsx(Qn,{className:"w-5 h-5 text-gray-600"}),"Instructions"]}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-orange-600 font-bold",children:"1."}),s.jsxs("span",{children:["Ensure all data tabs (Demographics, Category-wise, Groups, Infrastructure) are filled with accurate data for year ",n,"."]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-orange-600 font-bold",children:"2."}),s.jsxs("span",{children:["Click ",s.jsx("strong",{children:'"Preview PDF"'})," to review the report in a new browser tab before downloading."]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-orange-600 font-bold",children:"3."}),s.jsxs("span",{children:["Click ",s.jsx("strong",{children:'"Download PDF"'})," to save the report to your computer."]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-orange-600 font-bold",children:"4."}),s.jsx("span",{children:"The PDF will include all villages with their complete statistics in a government-standard format."})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-orange-600 font-bold",children:"5."}),s.jsx("span",{children:"If no data is available for the selected year, you'll receive an error message. Please add data first."})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("h5",{className:"font-semibold text-gray-800",children:"Professional Format"})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Government-standard layout with Indian flag colors and proper tables"})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),s.jsx("h5",{className:"font-semibold text-gray-800",children:"Comprehensive Data"})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"All statistics sections included with totals and subtotals"})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),s.jsx("h5",{className:"font-semibold text-gray-800",children:"Easy Sharing"})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Download and share with officials, stakeholders, or publish online"})]})]})]})},xG=[{id:"villages",label:"Manage Villages",labelMr:"  "},{id:"demographics",label:"Demographics",labelMr:""},{id:"categories",label:"Category-wise",labelMr:""},{id:"groups",label:"Groups & Committees",labelMr:"  "},{id:"infrastructure",label:"Water & Infrastructure",labelMr:"   "},{id:"reports",label:"PDF / Reports",labelMr:"PDF / "}],yG=()=>{const[n,e]=K.useState("villages"),[t,r]=K.useState([]),[a,o]=K.useState(null),[c,u]=K.useState(!1),[h,f]=K.useState(""),[g,y]=K.useState(!0);K.useEffect(()=>{w()},[]);const w=async()=>{y(!0);try{const j=await Ex();r(j);const E=await wT();E?o(E):j.length>0&&o(j[0])}catch(j){console.error("Error loading data:",j)}finally{y(!1)}},b=async()=>{const j=parseInt(h);if(!j||j<1900||j>2100){alert("Please enter a valid year between 1900 and 2100");return}try{await PB(j);const E=await Ex();r(E),o(j),f(""),u(!1)}catch(E){alert(E.message||"Failed to add year")}},T=j=>{o(parseInt(j.target.value))},S=()=>{if(n==="villages")return s.jsx(LB,{});if(!a)return s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ds,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"No year selected. Please add a year to get started."})]});switch(n){case"demographics":return s.jsx(DB,{selectedYear:a});case"categories":return s.jsx(MB,{selectedYear:a});case"groups":return s.jsx(OB,{selectedYear:a});case"infrastructure":return s.jsx(FB,{selectedYear:a});case"reports":return s.jsx(pG,{selectedYear:a});default:return null}};return g?s.jsx("div",{className:"flex justify-center items-center h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-orange-600"})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-green-600 text-white",children:s.jsxs("div",{className:"container mx-auto px-4 py-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(QA,{className:"w-8 h-8"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Village Statistics"}),s.jsx("p",{className:"text-sm text-orange-100",children:" "})]})]}),s.jsx("p",{className:"text-sm text-white/90 mt-2",children:"Manage census data, population breakdowns, groups, and infrastructure year-wise"})]})}),s.jsxs("div",{className:"container mx-auto px-4 py-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Year /  "}),s.jsx("select",{value:a||"",onChange:T,className:"w-full md:w-64 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:t.length===0?s.jsx("option",{value:"",children:"No years available"}):t.map(j=>s.jsx("option",{value:j,children:j},j))})]}),s.jsx("div",{children:c?s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"number",value:h,onChange:j=>f(j.target.value),placeholder:"Enter year (e.g., 2025)",className:"w-48 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",onKeyPress:j=>j.key==="Enter"&&b()}),s.jsx("button",{onClick:b,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Add"}),s.jsx("button",{onClick:()=>{u(!1),f("")},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]}):s.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:[s.jsx(Ss,{className:"w-4 h-4"}),"Add Year"]})})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-6",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("div",{className:"flex overflow-x-auto",children:xG.map(j=>s.jsx("button",{onClick:()=>e(j.id),className:`flex-shrink-0 px-6 py-4 text-sm font-medium transition-colors border-b-2 ${n===j.id?"border-orange-600 text-orange-600":"border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300"}`,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{children:j.label}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:j.labelMr})]})},j.id))})}),s.jsx("div",{className:"p-6",children:S()})]})]})]})},bG=()=>{const{language:n}=hs(),{settings:e}=tu(),[t,r]=K.useState([]),[a,o]=K.useState(null),[c,u]=K.useState([]),[h,f]=K.useState(!0),[g,y]=K.useState(!1);K.useEffect(()=>{w()},[]),K.useEffect(()=>{a&&b()},[a]);const w=async()=>{try{const j=await Ex();r(j);const E=await wT();E?o(E):j.length>0&&o(j[0])}catch(j){console.error("Error loading initial data:",j)}finally{f(!1)}},b=async()=>{try{const j=await NT(a);if(console.log("Raw data from Firebase:",j),j&&j.villages&&Array.isArray(j.villages)){const E=j.villages.map(L=>{const D=j.demographics?.find(H=>H.villageId===L.id)||{},O=j.breakdowns?.filter(H=>H.villageId===L.id)||[],te=j.groups?.find(H=>H.villageId===L.id)||{},ae=j.infrastructure?.find(H=>H.villageId===L.id)||{};return{village:L,demographics:D,breakdowns:O,groups:te,infrastructure:ae}});console.log("Transformed summary array:",E),u(E)}else console.log("No villages found in data"),u([])}catch(j){console.error("Error loading statistics:",j),u([])}},T=async()=>{y(!0);try{const j={title:"Village Statistics Report",gramPanchayatName:e?.title?.en||"Gram Panchayat",orientation:"landscape"};await AC(a,j)}catch{alert("Failed to generate PDF. Please try again.")}finally{y(!1)}};if(h)return s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-orange-600"})});if(t.length===0)return s.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ds,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:n==="en"?"No Data Available":"  "}),s.jsx("p",{className:"text-gray-600",children:n==="en"?"Village statistics data has not been added yet.":"      ."})]})})});const S=["ST","SC","OBC","OTHER"];return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-green-600 text-white py-12",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx(QA,{className:"w-12 h-12"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:n==="en"?"Village Statistics":" "}),s.jsx("p",{className:"text-orange-100 mt-1",children:n==="en"?"Census & Infrastructure Data":"    "})]})]})})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n==="en"?"Select Year":" "}),s.jsx("select",{value:a||"",onChange:j=>o(parseInt(j.target.value)),className:"w-full md:w-64 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:t.map(j=>s.jsx("option",{value:j,children:j},j))})]}),s.jsxs("button",{onClick:T,disabled:g,className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-md",children:[s.jsx(Do,{className:"w-5 h-5"}),g?n==="en"?"Generating...":"  ...":n==="en"?"Download Full Report (PDF)":"    (PDF)"]})]})}),c.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[s.jsx(ds,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:n==="en"?`No data available for year ${a}`:`${a}    `})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx(ya,{className:"w-6 h-6 text-orange-600"}),s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:n==="en"?"Population Overview":" "})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-green-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Village":""}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Total Population":" "}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Male":""}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Female":""})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((j,E)=>s.jsxs("tr",{className:E%2===0?"bg-white":"bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:n==="en"?j.village.nameEn:j.village.nameMr})}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-900 font-semibold",children:(j.demographics.totalPopulation||0).toLocaleString()}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:(j.demographics.malePopulation||0).toLocaleString()}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:(j.demographics.femalePopulation||0).toLocaleString()})]},j.village.id))}),s.jsx("tfoot",{className:"bg-gray-100",children:s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 font-bold text-gray-900",children:n==="en"?"TOTAL":""}),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-gray-900",children:c.reduce((j,E)=>j+(E.demographics.totalPopulation||0),0).toLocaleString()}),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-gray-900",children:c.reduce((j,E)=>j+(E.demographics.malePopulation||0),0).toLocaleString()}),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-gray-900",children:c.reduce((j,E)=>j+(E.demographics.femalePopulation||0),0).toLocaleString()})]})})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:n==="en"?"Category-wise Population":" "}),c.map((j,E)=>s.jsxs("div",{className:`mb-6 ${E!==c.length-1?"pb-6 border-b border-gray-200":""}`,children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:n==="en"?j.village.nameEn:j.village.nameMr}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-700 uppercase",children:n==="en"?"Category":""}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-700 uppercase",children:n==="en"?"Male":""}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-700 uppercase",children:n==="en"?"Female":""}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-700 uppercase",children:n==="en"?"Total":""})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(L=>{const D=j.breakdowns.find(O=>O.category===L)||{};return s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:L}),s.jsx("td",{className:"px-4 py-2 text-center text-sm text-gray-700",children:(D.maleCount||0).toLocaleString()}),s.jsx("td",{className:"px-4 py-2 text-center text-sm text-gray-700",children:(D.femaleCount||0).toLocaleString()}),s.jsx("td",{className:"px-4 py-2 text-center text-sm font-semibold text-gray-900",children:((D.maleCount||0)+(D.femaleCount||0)).toLocaleString()})]},L)})})]})})]},j.village.id))]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:n==="en"?"Groups & Committees":"  "}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-green-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Village":""}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Mahila Bachat Gat":"  "}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Yuvak Mandal":" "}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Kisan Gat":" "}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Other Groups":" "})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((j,E)=>s.jsxs("tr",{className:E%2===0?"bg-white":"bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:n==="en"?j.village.nameEn:j.village.nameMr}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.groups.mahilaBachatGatCount||0}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.groups.yuvakMandalCount||0}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.groups.kisanGatCount||0}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.groups.otherGroupCount||0})]},j.village.id))})]})})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 px-6 py-4",children:s.jsxs("h2",{className:"text-white font-semibold flex items-center gap-2",children:[s.jsx(jx,{className:"w-5 h-5"}),n==="en"?"Water Supply Sources":"  "]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-green-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Sr. No.":".."}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Water Source":" "}),c.map(j=>s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?j.village.nameEn:j.village.nameMr},j.village.id)),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider bg-blue-50",children:n==="en"?"Total":""})]})}),s.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"1"}),s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:n==="en"?"Private Wells":" "}),c.map(j=>s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.privateWells||0},j.village.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:c.reduce((j,E)=>j+(E.infrastructure.privateWells||0),0)})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"2"}),s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:n==="en"?"Public Wells":" "}),c.map(j=>s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.publicWells||0},j.village.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:c.reduce((j,E)=>j+(E.infrastructure.publicWells||0),0)})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"3"}),s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:n==="en"?"NIT Scheme":" "}),c.map(j=>s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.nitScheme||0},j.village.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:c.reduce((j,E)=>j+(E.infrastructure.nitScheme||0),0)})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"4"}),s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:n==="en"?"Handpumps":""}),c.map(j=>s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.handpumps||0},j.village.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:c.reduce((j,E)=>j+(E.infrastructure.handpumps||0),0)})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"5"}),s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:n==="en"?"Water Tank Capacity":"  "}),c.map(j=>s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.waterTankCapacity||""},j.village.id)),s.jsx("td",{className:"px-6 py-4 text-center text-gray-500 bg-blue-50",children:""})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"6"}),s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:n==="en"?"Water Filter Plant":"  "}),c.map(j=>s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.waterFilterPlant||0},j.village.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:c.reduce((j,E)=>j+(E.infrastructure.waterFilterPlant||0),0)})]}),s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:"7"}),s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:n==="en"?"Private Ponds":" "}),c.map(j=>s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.privatePonds||0},j.village.id)),s.jsx("td",{className:"px-6 py-4 text-center font-bold text-blue-900 bg-blue-50",children:c.reduce((j,E)=>j+(E.infrastructure.privatePonds||0),0)})]})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4",children:s.jsxs("h2",{className:"text-white font-semibold flex items-center gap-2",children:[s.jsx(jx,{className:"w-5 h-5"}),n==="en"?"Tap Connection Details":"  "]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gradient-to-r from-orange-50 to-green-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Sr. No.":".."}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Village":""}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Families":""}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Old Connections":" "}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"New Connections":" "}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider bg-indigo-50",children:n==="en"?"Total Connections":" "}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Private Wells":" "}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider",children:n==="en"?"Pending":""})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((j,E)=>s.jsxs("tr",{className:E%2===0?"bg-white":"bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:E+1}),s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:n==="en"?j.village.nameEn:j.village.nameMr}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.families||0}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.oldTapConnections||0}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.newTapConnections||0}),s.jsx("td",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-900 bg-indigo-50",children:j.infrastructure.totalTapConnections||0}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.privateWellsForTap||0}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-700",children:j.infrastructure.pendingTapConnections||0})]},j.village.id))}),s.jsx("tfoot",{className:"bg-indigo-50",children:s.jsxs("tr",{className:"font-bold",children:[s.jsx("td",{className:"px-6 py-4",colSpan:"2",children:n==="en"?"Total":""}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900",children:c.reduce((j,E)=>j+(E.infrastructure.families||0),0)}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900",children:c.reduce((j,E)=>j+(E.infrastructure.oldTapConnections||0),0)}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900",children:c.reduce((j,E)=>j+(E.infrastructure.newTapConnections||0),0)}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900 bg-indigo-100",children:c.reduce((j,E)=>j+(E.infrastructure.totalTapConnections||0),0)}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900",children:c.reduce((j,E)=>j+(E.infrastructure.privateWellsForTap||0),0)}),s.jsx("td",{className:"px-6 py-4 text-center text-indigo-900",children:c.reduce((j,E)=>j+(E.infrastructure.pendingTapConnections||0),0)})]})})]})})]})]})]})]})]})};function vG(){const[n,e]=K.useState([]),[t,r]=K.useState(!0),[a,o]=K.useState(""),[c,u]=K.useState("all"),{getContent:h}=hs();K.useEffect(()=>{f()},[]);const f=async()=>{try{r(!0);const S=await oU();e(S)}catch(S){console.error("Error loading announcements:",S),alert("Failed to load announcements")}finally{r(!1)}},g=async S=>{if(window.confirm("Are you sure you want to delete this announcement?"))try{await dU(S),e(n.filter(j=>j.id!==S)),alert("Announcement deleted successfully")}catch(j){console.error("Error deleting announcement:",j),alert("Failed to delete announcement")}},y=async(S,j)=>{try{await hU(S,!j),e(n.map(E=>E.id===S?{...E,isActive:!j}:E))}catch(E){console.error("Error toggling status:",E),alert("Failed to update status")}},w=n.filter(S=>{const j=h(S.title).toLowerCase().includes(a.toLowerCase())||h(S.message).toLowerCase().includes(a.toLowerCase()),E=c==="all"||c==="active"&&S.isActive||c==="inactive"&&!S.isActive||c===S.type;return j&&E}),b={info:"bg-blue-100 text-blue-800",warning:"bg-yellow-100 text-yellow-800",alert:"bg-red-100 text-red-800",success:"bg-green-100 text-green-800"},T={high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-gray-100 text-gray-800"};return t?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[s.jsx(Vi,{className:"text-orange-600"}),"Announcements Management"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage scrolling announcements for homepage"})]}),s.jsxs(_n,{to:"/admin/announcements/new",className:"inline-flex items-center gap-2 bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white px-6 py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all",children:[s.jsx(Ss,{size:20}),"Add Announcement"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white p-6 rounded-xl shadow-lg",children:[s.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total"}),s.jsx("p",{className:"text-3xl font-bold",children:n.length})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white p-6 rounded-xl shadow-lg",children:[s.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Active"}),s.jsx("p",{className:"text-3xl font-bold",children:n.filter(S=>S.isActive).length})]}),s.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white p-6 rounded-xl shadow-lg",children:[s.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Inactive"}),s.jsx("p",{className:"text-3xl font-bold",children:n.filter(S=>!S.isActive).length})]}),s.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white p-6 rounded-xl shadow-lg",children:[s.jsx("p",{className:"text-sm opacity-90 mb-1",children:"High Priority"}),s.jsx("p",{className:"text-3xl font-bold",children:n.filter(S=>S.priority==="high").length})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-md p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Bi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search announcements...",value:a,onChange:S=>o(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),s.jsxs("select",{value:c,onChange:S=>u(S.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"active",children:"Active Only"}),s.jsx("option",{value:"inactive",children:"Inactive Only"}),s.jsx("option",{value:"info",children:"Info"}),s.jsx("option",{value:"warning",children:"Warning"}),s.jsx("option",{value:"alert",children:"Alert"}),s.jsx("option",{value:"success",children:"Success"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:w.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Vi,{className:"mx-auto text-gray-400 mb-4",size:48}),s.jsx("p",{className:"text-gray-500 text-lg",children:"No announcements found"}),s.jsx(_n,{to:"/admin/announcements/new",className:"inline-block mt-4 text-orange-600 hover:text-orange-700 font-semibold",children:"Create your first announcement"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Title & Message"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Priority"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:w.map(S=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-900",children:h(S.title)}),s.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mt-1",children:h(S.message)})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold ${b[S.type]||b.info}`,children:[S.type==="alert"&&s.jsx(Qn,{size:14}),S.type]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${T[S.priority]||T.low}`,children:S.priority})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("button",{onClick:()=>y(S.id,S.isActive),className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold transition-colors ${S.isActive?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:S.isActive?s.jsxs(s.Fragment,{children:[s.jsx(Mo,{size:14}),"Active"]}):s.jsxs(s.Fragment,{children:[s.jsx(up,{size:14}),"Inactive"]})})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_n,{to:`/admin/announcements/edit/${S.id}`,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:s.jsx(rm,{size:18})}),s.jsx("button",{onClick:()=>g(S.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:s.jsx(mi,{size:18})})]})})]},S.id))})]})})})]})}function U6(){const{id:n}=Xc(),e=Dr(),[t,r]=K.useState(!1),[a,o]=K.useState({title:{en:"",mr:""},message:{en:"",mr:""},type:"info",priority:"medium",link:"",isActive:!0});K.useEffect(()=>{n&&c()},[n]);const c=async()=>{try{r(!0);const f=await cU(n);f&&o({title:f.title||{en:"",mr:""},message:f.message||{en:"",mr:""},type:f.type||"info",priority:f.priority||"medium",link:f.link||"",isActive:f.isActive!==void 0?f.isActive:!0})}catch(f){console.error("Error loading announcement:",f),alert("Failed to load announcement")}finally{r(!1)}},u=async f=>{if(f.preventDefault(),!a.title.en.trim()||!a.message.en.trim()){alert("Please fill in required fields (English title and message)");return}try{r(!0),n?(await aT(n,a),alert("Announcement updated successfully!")):(await uU(a),alert("Announcement created successfully!")),e("/admin/announcements")}catch(g){console.error("Error saving announcement:",g),alert("Failed to save announcement")}finally{r(!1)}},h=(f,g)=>{o(y=>({...y,[f]:g}))};return t&&n?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary-600"})}):s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("button",{onClick:()=>e("/admin/announcements"),className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[s.jsx(gl,{size:20}),"Back to Announcements"]}),s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[s.jsx(Vi,{className:"text-orange-600"}),n?"Edit Announcement":"Create New Announcement"]})]}),s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Announcement Title"}),s.jsx(jn,{label:"Title",value:a.title,onChange:f=>h("title",f),placeholder:{en:"Enter title in English",mr:"   "},required:!0})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Announcement Message"}),s.jsx(jn,{label:"Message",value:a.message,onChange:f=>h("message",f),placeholder:{en:"Enter message in English",mr:"   "},rows:4,required:!0})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Settings"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Type *"}),s.jsxs("select",{value:a.type,onChange:f=>h("type",f.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"info",children:"Info"}),s.jsx("option",{value:"warning",children:"Warning"}),s.jsx("option",{value:"alert",children:"Alert"}),s.jsx("option",{value:"success",children:"Success"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Determines the color scheme"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Priority *"}),s.jsxs("select",{value:a.priority,onChange:f=>h("priority",f.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Higher priority shows first"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status"}),s.jsxs("label",{className:"flex items-center gap-3 px-4 py-2.5 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:a.isActive,onChange:f=>h("isActive",f.target.checked),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),s.jsx("span",{className:"text-gray-700 font-medium",children:"Show on Homepage"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enable to display in banner"})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Link (Optional)"}),s.jsx("input",{type:"url",value:a.link,onChange:f=>h("link",f.target.value),placeholder:"https://example.com/details",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Optional: Add a link for "Read More" button'})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-blue-50 rounded-xl shadow-md p-6 border-2 border-dashed border-orange-200",children:[s.jsxs("h2",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center gap-2",children:[s.jsx(Vi,{size:20,className:"text-orange-600"}),"Preview (English)"]}),s.jsxs("div",{className:`p-4 rounded-lg border-l-4 ${a.type==="info"?"bg-blue-50 border-blue-500":a.type==="warning"?"bg-yellow-50 border-yellow-500":a.type==="alert"?"bg-red-50 border-red-500":"bg-green-50 border-green-500"}`,children:[s.jsx("p",{className:"font-bold text-gray-900",children:a.title.en||"Title will appear here"}),s.jsx("p",{className:"text-gray-700 text-sm mt-1",children:a.message.en||"Message will appear here"}),a.link&&s.jsx("a",{href:a.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-sm mt-2 inline-block hover:underline",children:"Read More "})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("button",{type:"submit",disabled:t,className:"flex-1 inline-flex items-center justify-center gap-2 bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white px-8 py-4 rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(ba,{size:20}),t?"Saving...":n?"Update Announcement":"Create Announcement"]}),s.jsx("button",{type:"button",onClick:()=>e("/admin/announcements"),className:"px-8 py-4 border-2 border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]})}async function wG(){console.log(" Starting data migration from localStorage to Firebase..."),console.log("====================================================");const n={villages:0,demographics:0,breakdowns:0,groups:0,infrastructure:0,years:0,news:0,schemes:0,achievements:0,complaints:0,errors:[]};try{console.log(`
 Migrating Villages...`);const e=JSON.parse(localStorage.getItem("VILLAGES")||"[]");for(const y of e)try{await bs(Zt(Xe,"villages"),{...y,createdAt:Yt(),updatedAt:Yt()}),n.villages++}catch(w){n.errors.push({type:"village",data:y,error:w.message})}console.log(` Migrated ${n.villages} villages`),console.log(`
 Migrating Demographics...`);const t=JSON.parse(localStorage.getItem("VILLAGE_DEMOGRAPHICS")||"[]");for(const y of t)try{await bs(Zt(Xe,"demographics"),{...y,createdAt:Yt(),updatedAt:Yt()}),n.demographics++}catch(w){n.errors.push({type:"demographics",data:y,error:w.message})}console.log(` Migrated ${n.demographics} demographics records`),console.log(`
 Migrating Population Breakdowns...`);const r=JSON.parse(localStorage.getItem("VILLAGE_POPULATION_BREAKDOWNS")||"[]");for(const y of r)try{await bs(Zt(Xe,"populationBreakdowns"),{...y,createdAt:Yt(),updatedAt:Yt()}),n.breakdowns++}catch(w){n.errors.push({type:"breakdown",data:y,error:w.message})}console.log(` Migrated ${n.breakdowns} population breakdowns`),console.log(`
 Migrating Village Groups...`);const a=JSON.parse(localStorage.getItem("VILLAGE_GROUPS")||"[]");for(const y of a)try{await bs(Zt(Xe,"villageGroups"),{...y,createdAt:Yt(),updatedAt:Yt()}),n.groups++}catch(w){n.errors.push({type:"groups",data:y,error:w.message})}console.log(` Migrated ${n.groups} village groups`),console.log(`
  Migrating Infrastructure...`);const o=JSON.parse(localStorage.getItem("VILLAGE_INFRASTRUCTURE")||"[]");for(const y of o)try{await bs(Zt(Xe,"infrastructure"),{...y,createdAt:Yt(),updatedAt:Yt()}),n.infrastructure++}catch(w){n.errors.push({type:"infrastructure",data:y,error:w.message})}console.log(` Migrated ${n.infrastructure} infrastructure records`),console.log(`
 Migrating Years...`);const c=JSON.parse(localStorage.getItem("STATISTICS_YEARS")||"[]");for(const y of c)try{await bs(Zt(Xe,"statisticsYears"),{year:y,createdAt:Yt()}),n.years++}catch(w){n.errors.push({type:"year",data:y,error:w.message})}console.log(` Migrated ${n.years} years`),console.log(`
 Migrating News...`);const u=JSON.parse(localStorage.getItem("NEWS")||"[]");for(const y of u)try{await bs(Zt(Xe,"news"),{...y,createdAt:Yt(),updatedAt:Yt()}),n.news++}catch(w){n.errors.push({type:"news",data:y,error:w.message})}console.log(` Migrated ${n.news} news items`),console.log(`
 Migrating Schemes...`);const h=JSON.parse(localStorage.getItem("SCHEMES")||"[]");for(const y of h)try{await bs(Zt(Xe,"schemes"),{...y,createdAt:Yt(),updatedAt:Yt()}),n.schemes++}catch(w){n.errors.push({type:"scheme",data:y,error:w.message})}console.log(` Migrated ${n.schemes} schemes`),console.log(`
 Migrating Achievements...`);const f=JSON.parse(localStorage.getItem("ACHIEVEMENTS")||"[]");for(const y of f)try{await bs(Zt(Xe,"achievements"),{...y,createdAt:Yt(),updatedAt:Yt()}),n.achievements++}catch(w){n.errors.push({type:"achievement",data:y,error:w.message})}console.log(` Migrated ${n.achievements} achievements`),console.log(`
 Migrating Complaints...`);const g=JSON.parse(localStorage.getItem("COMPLAINTS")||"[]");for(const y of g)try{await bs(Zt(Xe,"complaints"),{...y,createdAt:Yt(),updatedAt:Yt()}),n.complaints++}catch(w){n.errors.push({type:"complaint",data:y,error:w.message})}return console.log(` Migrated ${n.complaints} complaints`),console.log(`
====================================================`),console.log(" MIGRATION SUMMARY:"),console.log("===================================================="),console.log(`Villages:            ${n.villages}`),console.log(`Demographics:        ${n.demographics}`),console.log(`Breakdowns:          ${n.breakdowns}`),console.log(`Groups:              ${n.groups}`),console.log(`Infrastructure:      ${n.infrastructure}`),console.log(`Years:               ${n.years}`),console.log(`News:                ${n.news}`),console.log(`Schemes:             ${n.schemes}`),console.log(`Achievements:        ${n.achievements}`),console.log(`Complaints:          ${n.complaints}`),console.log("===================================================="),console.log(`Total migrated:      ${Object.values(n).reduce((y,w)=>typeof w=="number"?y+w:y,0)}`),console.log(`Errors:              ${n.errors.length}`),console.log("===================================================="),n.errors.length>0&&(console.log(`
 Errors encountered:`),n.errors.forEach((y,w)=>{console.log(`${w+1}. ${y.type}:`,y.error)})),console.log(`
 Migration complete!`),console.log("  IMPORTANT: After verifying data in Firebase Console,"),console.log("    you can safely clear localStorage."),n}catch(e){throw console.error(" Migration failed:",e),e}}function NG(){return confirm(" WARNING: This will clear all localStorage data. Have you verified data in Firebase? This cannot be undone!")?(localStorage.removeItem("VILLAGES"),localStorage.removeItem("VILLAGE_DEMOGRAPHICS"),localStorage.removeItem("VILLAGE_POPULATION_BREAKDOWNS"),localStorage.removeItem("VILLAGE_GROUPS"),localStorage.removeItem("VILLAGE_INFRASTRUCTURE"),localStorage.removeItem("STATISTICS_YEARS"),localStorage.removeItem("NEWS"),localStorage.removeItem("SCHEMES"),localStorage.removeItem("ACHIEVEMENTS"),localStorage.removeItem("COMPLAINTS"),localStorage.removeItem("ADMIN_USER"),localStorage.removeItem("SITE_SETTINGS"),console.log(" localStorage cleared"),!0):!1}async function jG(){try{console.log(" Testing Firebase connection...");const n=await bs(Zt(Xe,"test"),{message:"Firebase connection test",timestamp:Yt()});return console.log(" Firebase connected successfully!"),console.log("   Test document ID:",n.id),!0}catch(n){return console.error(" Firebase connection failed:",n),console.error("   Check your .env file and Firebase configuration"),!1}}const _G=()=>{const[n,e]=K.useState(""),[t,r]=K.useState(!1),[a,o]=K.useState("admin@grampanchayat.com"),[c,u]=K.useState(""),h=async()=>{r(!0),e(" Testing Firebase connection...");try{const w=await jG();e(w?" Firebase connected successfully! Check console for details.":" Connection failed. Check console for errors.")}catch(w){e(` Error: ${w.message}`)}finally{r(!1)}},f=async()=>{if(confirm(" This will migrate all localStorage data to Firebase. Continue?")){r(!0),e(" Migrating data to Firebase... Check console for progress.");try{const w=await wG();e(` Migration complete! Migrated ${JSON.stringify(w)} records. Check console for details.`)}catch(w){e(` Migration failed: ${w.message}`)}finally{r(!1)}}},g=async()=>{if(!a||!c){e(" Please enter email and password");return}if(c.length<6){e(" Password must be at least 6 characters");return}r(!0),e(" Creating admin user...");try{await qO(a,c,{name:"Admin",role:"admin"}),e(` Admin user created successfully! Email: ${a}`),u("")}catch(w){w.code==="auth/email-already-in-use"?e(" Email already in use. Admin user already exists."):e(` Error: ${w.message}`)}finally{r(!1)}},y=()=>{NG()&&e(" localStorage cleared successfully!")};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-green-50 p-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:" Firebase Setup & Migration"}),s.jsx("p",{className:"text-gray-600",children:"Configure Firebase and migrate your data from localStorage"})]}),n&&s.jsx("div",{className:"bg-white rounded-lg shadow-lg p-4 mb-6",children:s.jsx("p",{className:"text-sm font-mono whitespace-pre-wrap",children:n})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Step 1: Test Firebase Connection"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Verify that Firebase is configured correctly."}),s.jsx("button",{onClick:h,disabled:t,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Testing...":" Test Connection"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Step 2: Create Admin User"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Create an admin account for Firebase Authentication."}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Email"}),s.jsx("input",{type:"email",value:a,onChange:w=>o(w.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2",placeholder:"admin@grampanchayat.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Password (min 6 characters)"}),s.jsx("input",{type:"password",value:c,onChange:w=>u(w.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2",placeholder:"Enter secure password"})]}),s.jsx("button",{onClick:g,disabled:t,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Creating...":" Create Admin User"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Step 3: Migrate Data from localStorage"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Transfer all existing data from localStorage to Firebase Firestore."}),s.jsx("button",{onClick:f,disabled:t,className:"bg-orange-600 hover:bg-orange-700 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Migrating...":" Migrate Data to Firebase"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Step 4: Clear localStorage (Optional)"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"After verifying data in Firebase Console, you can clear localStorage."}),s.jsx("button",{onClick:y,disabled:t,className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:" Clear localStorage"})]}),s.jsxs("div",{className:"bg-gradient-to-r from-orange-100 to-green-100 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:" Setup Instructions"}),s.jsxs("ol",{className:"space-y-2 text-gray-700",children:[s.jsxs("li",{children:["1. Enable ",s.jsx("b",{children:"Firestore Database"})," in Firebase Console (Test mode)"]}),s.jsxs("li",{children:["2. Enable ",s.jsx("b",{children:"Authentication"}),"  Email/Password"]}),s.jsxs("li",{children:["3. Enable ",s.jsx("b",{children:"Storage"})," (Test mode)"]}),s.jsx("li",{children:'4. Click "Test Connection" above'}),s.jsx("li",{children:"5. Create admin user with email and password"}),s.jsx("li",{children:"6. Migrate your data (if you have existing data)"}),s.jsx("li",{children:"7. Verify data in Firebase Console"}),s.jsxs("li",{children:["8. Deploy security rules from ",s.jsx("code",{children:"firestore.rules"})," and ",s.jsx("code",{children:"storage.rules"})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-300",children:s.jsxs("p",{className:"text-sm text-gray-600",children:[" Firebase Console: ",s.jsx("a",{href:"https://console.firebase.google.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"https://console.firebase.google.com/"})]})})]})]})})};function SG(){const n=Dr(),[e,t]=K.useState({email:"",password:""}),[r,a]=K.useState(!1),[o,c]=K.useState(""),[u,h]=K.useState(!1),f=async y=>{y.preventDefault(),a(!0),c("");try{const w=await q3(hl,e.email,e.password);await GA(w.user.uid)?n("/superadmin/dashboard"):(await hl.signOut(),c("Unauthorized. You do not have super admin access."))}catch(w){console.error("Login error:",w);let b="Login failed. Please try again.";w.code==="auth/user-not-found"?b="No account found with this email.":w.code==="auth/wrong-password"?b="Incorrect password.":w.code==="auth/invalid-email"?b="Invalid email address.":w.code==="auth/too-many-requests"&&(b="Too many failed attempts. Please try again later."),c(b)}finally{a(!1)}},g=y=>{t({...e,[y.target.name]:y.target.value}),c("")};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-800 flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm"}),s.jsxs("div",{className:"relative z-10 w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white/10 backdrop-blur-md rounded-full mb-4 border border-white/20",children:s.jsx($l,{className:"w-10 h-10 text-white"})}),s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Super Admin Panel"}),s.jsx("p",{className:"text-indigo-200",children:"Gram Panchayat Multi-Tenant Management"})]}),s.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 shadow-2xl border border-white/20",children:s.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o&&s.jsxs("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-4 flex items-start gap-3",children:[s.jsx(Qn,{className:"w-5 h-5 text-red-200 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-red-100",children:o})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Oo,{className:"h-5 w-5 text-indigo-300"})}),s.jsx("input",{type:"email",name:"email",value:e.email,onChange:g,required:!0,placeholder:"superadmin@grampanchayat.in",className:"block w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent transition",disabled:r})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(y2,{className:"h-5 w-5 text-indigo-300"})}),s.jsx("input",{type:u?"text":"password",name:"password",value:e.password,onChange:g,required:!0,placeholder:"Enter your password",className:"block w-full pl-10 pr-12 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent transition",disabled:r}),s.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-indigo-300 hover:text-white transition",children:u?s.jsx(up,{className:"h-5 w-5"}):s.jsx(Mo,{className:"h-5 w-5"})})]})]}),s.jsx("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold py-3 px-4 rounded-lg hover:from-indigo-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg",children:r?s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Signing in..."]}):"Sign In"}),s.jsx("p",{className:"text-xs text-center text-indigo-200",children:"Super Admin access only. Unauthorized access is prohibited."})]})}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("button",{onClick:()=>n("/"),className:"text-sm text-indigo-200 hover:text-white transition",children:" Back to Main Site"})}),s.jsx("div",{className:"mt-8 bg-yellow-500/20 border border-yellow-500/50 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx($l,{className:"w-5 h-5 text-yellow-200 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-yellow-100 mb-1",children:"Security Notice"}),s.jsx("p",{className:"text-xs text-yellow-200",children:"All login attempts are logged and monitored. Only authorized personnel should access this panel."})]})]})})]})]})}function EG(){const n=Dr(),{superAdmin:e}=YA(),[t,r]=K.useState(null),[a,o]=K.useState([]),[c,u]=K.useState(!0),[h,f]=K.useState("overview");K.useEffect(()=>{g()},[]);const g=async()=>{try{u(!0);const[w,b]=await Promise.all([aF(),hy()]);r(w),o(b)}catch(w){console.error("Error loading dashboard:",w)}finally{u(!1)}},y=async()=>{confirm("Are you sure you want to logout?")&&(await hl.signOut(),n("/superadmin/login"))};return c?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[s.jsx(gy,{className:"w-6 h-6 animate-spin"}),s.jsx("p",{children:"Loading dashboard..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-indigo-600 rounded-lg",children:s.jsx($l,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Super Admin Panel"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Multi-Tenant Management"})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:e?.displayName||"Super Admin"}),s.jsx("p",{className:"text-xs text-gray-500",children:e?.email})]}),s.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition",children:[s.jsx(ZA,{className:"w-4 h-4"}),"Logout"]})]})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Welcome back, ",e?.displayName?.split(" ")[0]||"Admin","! "]}),s.jsx("p",{className:"text-gray-600",children:"Manage all Gram Panchayats from this central dashboard."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:s.jsx(ul,{className:"w-6 h-6 text-indigo-600"})})}),s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Gram Panchayats"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t?.totalGPs||0})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(ho,{className:"w-6 h-6 text-green-600"})})}),s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Active GPs"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t?.activeGPs||0})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(ya,{className:"w-6 h-6 text-purple-600"})})}),s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Admin Users"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t?.totalUsers||0})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:s.jsx(Ug,{className:"w-6 h-6 text-orange-600"})})}),s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Custom Domains"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t?.customDomains||0})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("button",{onClick:()=>n("/superadmin/gram-panchayats/add"),className:"flex items-center gap-3 p-4 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg hover:from-indigo-600 hover:to-purple-700 transition shadow-md",children:[s.jsx(Ss,{className:"w-5 h-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-semibold",children:"Add New GP"}),s.jsx("p",{className:"text-sm text-indigo-100",children:"Create a new Gram Panchayat"})]})]}),s.jsxs("button",{onClick:()=>n("/superadmin/gram-panchayats"),className:"flex items-center gap-3 p-4 bg-white border-2 border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition",children:[s.jsx(ul,{className:"w-5 h-5 text-gray-600"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-semibold text-gray-900",children:"Manage GPs"}),s.jsx("p",{className:"text-sm text-gray-600",children:"View and edit all GPs"})]})]}),s.jsxs("button",{onClick:()=>n("/superadmin/users"),className:"flex items-center gap-3 p-4 bg-white border-2 border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition",children:[s.jsx(ya,{className:"w-5 h-5 text-gray-600"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-semibold text-gray-900",children:"Manage Users"}),s.jsx("p",{className:"text-sm text-gray-600",children:"View all admin users"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Gram Panchayats"}),s.jsx("button",{onClick:()=>n("/superadmin/gram-panchayats"),className:"text-sm text-indigo-600 hover:text-indigo-700 font-medium",children:"View All "})]}),a.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ul,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"No Gram Panchayats yet"}),s.jsx("button",{onClick:()=>n("/superadmin/gram-panchayats/add"),className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"Add your first Gram Panchayat "})]}):s.jsx("div",{className:"space-y-3",children:a.slice(0,5).map(w=>s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition cursor-pointer",onClick:()=>n(`/superadmin/gram-panchayats/${w.id}`),children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold",children:w.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:w.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:[w.district,", ",w.state]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[w.customDomain&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Ug,{className:"w-4 h-4"}),w.customDomain]}),s.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${w.active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:w.active?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ho,{className:"w-3 h-3"}),"Active"]}):s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Vg,{className:"w-3 h-3"}),"Inactive"]})})]})]},w.id))})]})]})]})}function AG(){const n=Dr(),[e,t]=K.useState(!1),[r,a]=K.useState(!1),[o,c]=K.useState(""),[u,h]=K.useState(!1),[f,g]=K.useState(null),[y,w]=K.useState({name:"",nameMarathi:"",district:"",state:"Maharashtra",email:"",phone:"",address:"",pincode:"",customDomain:"",subdomain:"",adminEmail:"",adminPassword:"",adminName:"",active:!0}),b=D=>{const{name:O,value:te,type:ae,checked:H}=D.target;w({...y,[O]:ae==="checkbox"?H:te}),c("")},T=()=>{const D=WA(12);w({...y,adminPassword:D})},S=()=>{const D=y.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");w({...y,subdomain:D})},j=()=>y.name.trim()?y.district.trim()?!y.customDomain&&!y.subdomain?(c("Either custom domain or subdomain is required"),!1):!y.adminEmail.trim()||!y.adminEmail.includes("@")?(c("Valid admin email is required"),!1):!y.adminPassword||y.adminPassword.length<6?(c("Admin password must be at least 6 characters"),!1):y.adminName.trim()?!0:(c("Admin name is required"),!1):(c("District is required"),!1):(c("GP name is required"),!1),E=async D=>{if(D.preventDefault(),!!j()){t(!0),c("");try{const O=y.name.toLowerCase().replace(/[^a-z0-9]/g,"").substring(0,20),te=y.customDomain||`${y.subdomain||O}.grampanchayat.in`,ae={...y,id:O,domain:te},H=await ZO(ae);g({gpName:y.name,adminEmail:y.adminEmail,adminPassword:y.adminPassword,gpId:H.gpId}),a(!0),window.scrollTo({top:0,behavior:"smooth"})}catch(O){console.error("Error creating GP:",O),c(O.message||"Failed to create Gram Panchayat. Please try again.")}finally{t(!1)}}},L=()=>{a(!1),g(null),w({name:"",nameMarathi:"",district:"",state:"Maharashtra",email:"",phone:"",address:"",pincode:"",customDomain:"",subdomain:"",adminEmail:"",adminPassword:"",adminName:"",active:!0})};return r&&f?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Add Gram Panchayat"}),s.jsx("button",{onClick:()=>n("/superadmin/dashboard"),className:"text-gray-600 hover:text-gray-900",children:"Close"})]})})}),s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:s.jsx(ho,{className:"w-8 h-8 text-green-600"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Gram Panchayat Created Successfully! "}),s.jsxs("p",{className:"text-gray-600",children:[f.gpName," has been added to the system."]})]}),s.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-6 mb-6",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(Qn,{className:"w-5 h-5 text-indigo-600"}),"Admin Credentials (Save These!)"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Admin Email"}),s.jsx("p",{className:"font-mono font-semibold text-gray-900",children:f.adminEmail})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Admin Password"}),s.jsx("p",{className:"font-mono font-semibold text-gray-900",children:f.adminPassword})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"GP ID"}),s.jsx("p",{className:"font-mono font-semibold text-gray-900",children:f.gpId})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",s.jsx("strong",{children:"Important:"})," Save these credentials securely. The admin will need them to login."]})})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Next Steps:"}),s.jsxs("ol",{className:"space-y-2 text-gray-700",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-semibold text-indigo-600",children:"1."}),s.jsx("span",{children:"Share the admin credentials with the GP administrator"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-semibold text-indigo-600",children:"2."}),s.jsx("span",{children:"If you added a custom domain, configure it in Firebase Hosting"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-semibold text-indigo-600",children:"3."}),s.jsx("span",{children:"Ask the admin to login and change their password"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-semibold text-indigo-600",children:"4."}),s.jsx("span",{children:"The admin can start adding content to their GP portal"})]})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:L,className:"flex-1 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition font-semibold",children:"Add Another GP"}),s.jsx("button",{onClick:()=>n("/superadmin/gram-panchayats"),className:"flex-1 bg-white border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition font-semibold",children:"View All GPs"})]})]})})]}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>n("/superadmin/dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:s.jsx(gl,{className:"w-5 h-5 text-gray-600"})}),s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Add New Gram Panchayat"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(ul,{className:"w-4 h-4"}),"Create GP"]})]})})}),s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("form",{onSubmit:E,className:"space-y-6",children:[o&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[s.jsx(Qn,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-red-900 mb-1",children:"Error"}),s.jsx("p",{className:"text-sm text-red-700",children:o})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(ul,{className:"w-5 h-5 text-indigo-600"}),"Basic Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Gram Panchayat Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"name",value:y.name,onChange:b,onBlur:S,placeholder:"e.g., Pindkepar Lodha",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name in Marathi (Optional)"}),s.jsx("input",{type:"text",name:"nameMarathi",value:y.nameMarathi,onChange:b,placeholder:" ",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["District ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"district",value:y.district,onChange:b,placeholder:"e.g., Gondia",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["State ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"state",value:y.state,onChange:b,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"Maharashtra",children:"Maharashtra"}),s.jsx("option",{value:"Andhra Pradesh",children:"Andhra Pradesh"}),s.jsx("option",{value:"Gujarat",children:"Gujarat"}),s.jsx("option",{value:"Karnataka",children:"Karnataka"}),s.jsx("option",{value:"Madhya Pradesh",children:"Madhya Pradesh"}),s.jsx("option",{value:"Rajasthan",children:"Rajasthan"}),s.jsx("option",{value:"Tamil Nadu",children:"Tamil Nadu"}),s.jsx("option",{value:"Uttar Pradesh",children:"Uttar Pradesh"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(Oo,{className:"w-5 h-5 text-indigo-600"}),"Contact Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",name:"email",value:y.email,onChange:b,placeholder:"gp@example.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),s.jsx("input",{type:"tel",name:"phone",value:y.phone,onChange:b,placeholder:"+91 1234567890",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),s.jsx("textarea",{name:"address",value:y.address,onChange:b,placeholder:"Full address",rows:"2",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pincode"}),s.jsx("input",{type:"text",name:"pincode",value:y.pincode,onChange:b,placeholder:"441614",maxLength:"6",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(Ug,{className:"w-5 h-5 text-indigo-600"}),"Domain Configuration"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Domain (Optional)"}),s.jsx("input",{type:"text",name:"customDomain",value:y.customDomain,onChange:b,placeholder:"www.grampanchayat-name.in",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"You'll need to configure this in Firebase Hosting after creation"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subdomain"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",name:"subdomain",value:y.subdomain,onChange:b,placeholder:"pindkepar-lodha",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),s.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition",title:"Auto-generate from GP name",children:s.jsx(tT,{className:"w-5 h-5"})})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Will be accessible at: ",y.subdomain||"subdomain",".grampanchayat-multi-tenant.web.app"]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(Wf,{className:"w-5 h-5 text-indigo-600"}),"Admin User"]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Admin Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"adminName",value:y.adminName,onChange:b,placeholder:"Full name of the administrator",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Admin Email ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"email",name:"adminEmail",value:y.adminEmail,onChange:b,placeholder:"admin@example.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This email will be used to login to the admin panel"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Admin Password ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("input",{type:u?"text":"password",name:"adminPassword",value:y.adminPassword,onChange:b,placeholder:"Minimum 6 characters",className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,minLength:"6"}),s.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?s.jsx(up,{className:"w-5 h-5"}):s.jsx(Mo,{className:"w-5 h-5"})})]}),s.jsx("button",{type:"button",onClick:T,className:"px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition font-semibold",children:"Generate"})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:'Use a strong password. Click "Generate" for a secure random password.'})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",name:"active",id:"active",checked:y.active,onChange:b,className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),s.jsx("label",{htmlFor:"active",className:"text-sm text-gray-700",children:"Activate this Gram Panchayat immediately"})]})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{type:"button",onClick:()=>n("/superadmin/dashboard"),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition font-semibold",disabled:e,children:"Cancel"}),s.jsx("button",{type:"submit",disabled:e,className:"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-3 rounded-lg hover:from-indigo-700 hover:to-purple-700 transition font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:e?s.jsxs(s.Fragment,{children:[s.jsx(gy,{className:"w-5 h-5 animate-spin"}),"Creating Gram Panchayat..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ba,{className:"w-5 h-5"}),"Create Gram Panchayat"]})})]})]})})]})}function TG(){const n=Dr(),[e,t]=K.useState([]),[r,a]=K.useState([]),[o,c]=K.useState(!0),[u,h]=K.useState(""),[f,g]=K.useState("all"),[y,w]=K.useState("");K.useEffect(()=>{b()},[]),K.useEffect(()=>{T()},[u,f,e]);const b=async()=>{try{c(!0);const E=await hy();t(E),a(E)}catch(E){console.error("Error loading GPs:",E),w("Failed to load Gram Panchayats")}finally{c(!1)}},T=()=>{let E=e;u.trim()&&(E=E.filter(L=>L.name.toLowerCase().includes(u.toLowerCase())||L.district.toLowerCase().includes(u.toLowerCase())||L.state.toLowerCase().includes(u.toLowerCase())||L.customDomain&&L.customDomain.toLowerCase().includes(u.toLowerCase()))),f==="active"?E=E.filter(L=>L.active):f==="inactive"&&(E=E.filter(L=>!L.active)),a(E)},S=async(E,L)=>{if(confirm(`Are you sure you want to ${L?"deactivate":"activate"} this Gram Panchayat?`))try{await eF(E,!L),await b()}catch(O){console.error("Error toggling GP status:",O),alert("Failed to update GP status")}},j=async(E,L)=>{if(!confirm(`Are you sure you want to delete "${L}"?

This will remove the GP from the system but preserve its data.`))return;if(prompt(`Type "${L}" to confirm deletion:`)!==L){alert("GP name did not match. Deletion cancelled.");return}try{await tF(E),await b()}catch(O){console.error("Error deleting GP:",O),alert("Failed to delete GP")}};return o?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[s.jsx(gy,{className:"w-6 h-6 animate-spin"}),s.jsx("p",{children:"Loading Gram Panchayats..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>n("/superadmin/dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:s.jsx(gl,{className:"w-5 h-5 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Manage Gram Panchayats"}),s.jsxs("p",{className:"text-sm text-gray-500",children:[e.length," total GPs"]})]})]}),s.jsxs("button",{onClick:()=>n("/superadmin/gram-panchayats/add"),className:"flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition",children:[s.jsx(Ss,{className:"w-5 h-5"}),"Add New GP"]})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Bi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search by name, district, state, or domain...",value:u,onChange:E=>h(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>g("all"),className:`px-4 py-2 rounded-lg font-medium transition ${f==="all"?"bg-indigo-100 text-indigo-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["All (",e.length,")"]}),s.jsxs("button",{onClick:()=>g("active"),className:`px-4 py-2 rounded-lg font-medium transition ${f==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["Active (",e.filter(E=>E.active).length,")"]}),s.jsxs("button",{onClick:()=>g("inactive"),className:`px-4 py-2 rounded-lg font-medium transition ${f==="inactive"?"bg-gray-200 text-gray-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["Inactive (",e.filter(E=>!E.active).length,")"]})]})]})}),y&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center gap-3",children:[s.jsx(Qn,{className:"w-5 h-5 text-red-600"}),s.jsx("p",{className:"text-red-700",children:y})]}),r.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[s.jsx(ul,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:u||f!=="all"?"No GPs Found":"No Gram Panchayats Yet"}),s.jsx("p",{className:"text-gray-600 mb-6",children:u||f!=="all"?"Try adjusting your filters":"Add your first Gram Panchayat to get started"}),!u&&f==="all"&&s.jsxs("button",{onClick:()=>n("/superadmin/gram-panchayats/add"),className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition font-semibold",children:[s.jsx(Ss,{className:"w-5 h-5"}),"Add First GP"]})]}):s.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.map(E=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold text-2xl flex-shrink-0",children:E.name.charAt(0)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:E.name}),E.nameMarathi&&s.jsx("p",{className:"text-sm text-gray-500",children:E.nameMarathi})]}),s.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${E.active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:E.active?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ho,{className:"w-3 h-3"}),"Active"]}):s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Vg,{className:"w-3 h-3"}),"Inactive"]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(tc,{className:"w-4 h-4"}),E.district,", ",E.state]}),E.email&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Oo,{className:"w-4 h-4"}),E.email]}),E.phone&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(io,{className:"w-4 h-4"}),E.phone]}),E.customDomain&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ug,{className:"w-4 h-4"}),E.customDomain]})]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Created: ",new Date(E.createdAt.seconds*1e3).toLocaleDateString("en-IN"),E.updatedAt&&s.jsxs("span",{className:"ml-4",children:["Updated: ",new Date(E.updatedAt.seconds*1e3).toLocaleDateString("en-IN")]})]})]})]})})}),s.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-200",children:[s.jsxs("button",{onClick:()=>n(`/superadmin/gram-panchayats/edit/${E.id}`),className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 text-indigo-700 rounded-lg hover:bg-indigo-100 transition font-medium",children:[s.jsx(rm,{className:"w-4 h-4"}),"Edit"]}),s.jsxs("button",{onClick:()=>S(E.id,E.active),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition ${E.active?"bg-yellow-50 text-yellow-700 hover:bg-yellow-100":"bg-green-50 text-green-700 hover:bg-green-100"}`,children:[s.jsx(PV,{className:"w-4 h-4"}),E.active?"Deactivate":"Activate"]}),s.jsxs("button",{onClick:()=>j(E.id,E.name),className:"flex items-center gap-2 px-4 py-2 bg-red-50 text-red-700 rounded-lg hover:bg-red-100 transition font-medium ml-auto",children:[s.jsx(mi,{className:"w-4 h-4"}),"Delete"]})]})]},E.id))})]})]})}function CG(){const n=Dr(),[e,t]=K.useState([]),[r,a]=K.useState(!0),[o,c]=K.useState(""),[u,h]=K.useState(""),[f,g]=K.useState("all"),[y,w]=K.useState({}),[b,T]=K.useState(""),[S,j]=K.useState(!1),[E,L]=K.useState(null),[D,O]=K.useState(null),[te,ae]=K.useState(!1),[H,V]=K.useState(!1),k=[...new Set(e.map(de=>de.gpName))].sort();K.useEffect(()=>{F()},[]);const F=async()=>{try{a(!0),c("");const de=await $A();t(de)}catch(de){console.error("Error fetching users:",de),c("Failed to load users. Please try again.")}finally{a(!1)}},I=async(de,Se)=>{if(confirm(`Send password reset email to ${de}?`))try{w({...y,[Se]:!0}),await nF(de),T(`Password reset email sent to ${de}`),setTimeout(()=>T(""),5e3)}catch(ze){console.error("Error resetting password:",ze),alert("Failed to send password reset email. Please try again.")}finally{w({...y,[Se]:!1})}},P=async de=>{try{L(de),j(!0),ae(!0),V(!1);const Se=await rF(de.gpId,de.id);O(Se)}catch(Se){console.error("Error fetching password:",Se),alert("Failed to fetch password. It may not be available."),j(!1)}finally{ae(!1)}},B=async()=>{if(confirm("Generate a new password for this user? This will update the stored password."))try{ae(!0);const de=await sF(E.gpId,E.id,E.email);O({password:de.password,passwordLastChanged:new Date,isNew:!0}),T(`New password generated for ${E.email}`),setTimeout(()=>T(""),5e3)}catch(de){console.error("Error generating password:",de),alert("Failed to generate new password. Please try again.")}finally{ae(!1)}},ue=de=>{navigator.clipboard.writeText(de),T("Password copied to clipboard!"),setTimeout(()=>T(""),3e3)},Ne=()=>{j(!1),L(null),O(null),V(!1)},ce=()=>{const de=pe.map(he=>({Name:he.displayName||"N/A",Email:he.email,"Gram Panchayat":he.gpName,Role:he.role,"Created At":new Date(he.createdAt?.toDate()).toLocaleDateString("en-IN"),"Last Login":he.lastLogin?new Date(he.lastLogin.toDate()).toLocaleDateString("en-IN"):"Never"})),Se=Object.keys(de[0]).join(","),ze=de.map(he=>Object.values(he).join(",")),ne=[Se,...ze].join(`
`),q=new Blob([ne],{type:"text/csv"}),Q=window.URL.createObjectURL(q),re=document.createElement("a");re.href=Q,re.download=`admin-users-${new Date().toISOString().split("T")[0]}.csv`,re.click()},pe=e.filter(de=>{const Se=de.displayName?.toLowerCase().includes(u.toLowerCase())||de.email?.toLowerCase().includes(u.toLowerCase())||de.gpName?.toLowerCase().includes(u.toLowerCase()),ze=f==="all"||de.gpName===f;return Se&&ze});return r?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading users..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>n("/superadmin/dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(gl,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Manage Admin Users"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[pe.length," of ",e.length," users"]})]})]}),s.jsxs("button",{onClick:ce,disabled:pe.length===0,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(Do,{className:"w-4 h-4"}),"Export CSV"]})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[b&&s.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4 flex items-center gap-3",children:[s.jsx(ho,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),s.jsx("p",{className:"text-green-800",children:b})]}),o&&s.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-3",children:[s.jsx(Qn,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),s.jsx("p",{className:"text-red-800",children:o})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Bi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search by name, email, or GP...",value:u,onChange:de=>h(de.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(my,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsxs("select",{value:f,onChange:de=>g(de.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent appearance-none bg-white",children:[s.jsx("option",{value:"all",children:"All Gram Panchayats"}),k.map(de=>s.jsx("option",{value:de,children:de},de))]})]})]})}),pe.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[s.jsx(Wf,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No users found"}),s.jsx("p",{className:"text-gray-600",children:u||f!=="all"?"Try adjusting your search or filters":"No admin users have been created yet"})]}):s.jsx("div",{className:"space-y-4",children:pe.map(de=>s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center",children:s.jsx(Wf,{className:"w-6 h-6 text-indigo-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:de.displayName||"No Name"}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Oo,{className:"w-4 h-4"}),de.email]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ul,{className:"w-4 h-4 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Gram Panchayat"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:de.gpName})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($l,{className:"w-4 h-4 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Role"}),s.jsx("p",{className:"text-sm font-medium text-gray-900 capitalize",children:de.role})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ds,{className:"w-4 h-4 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Created"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:de.createdAt?new Date(de.createdAt.toDate()).toLocaleDateString("en-IN"):"N/A"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[de.lastLogin?s.jsx(ho,{className:"w-4 h-4 text-green-500"}):s.jsx(Vg,{className:"w-4 h-4 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Last Login"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:de.lastLogin?new Date(de.lastLogin.toDate()).toLocaleDateString("en-IN"):"Never"})]})]})]})]}),s.jsxs("div",{className:"ml-4 flex flex-col gap-2",children:[s.jsxs("button",{onClick:()=>P(de),className:"flex items-center gap-2 px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(Mo,{className:"w-4 h-4"}),"View Password"]}),s.jsxs("button",{onClick:()=>I(de.email,de.id),disabled:y[de.id],className:"flex items-center gap-2 px-4 py-2 text-sm bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(cV,{className:"w-4 h-4"}),y[de.id]?"Sending...":"Reset Password"]})]})]})},de.id))})]}),S&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"User Password"}),s.jsx("button",{onClick:Ne,className:"text-gray-400 hover:text-gray-600",children:s.jsx(Vg,{className:"w-6 h-6"})})]}),E&&s.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"User"}),s.jsx("p",{className:"font-semibold text-gray-900",children:E.displayName||"No Name"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:E.email}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["GP: ",E.gpName]})]}),te?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Loading password..."})]}):D?s.jsxs("div",{children:[D.isNew&&s.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-yellow-800",children:" New password generated. A password reset email has been sent."})}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:H?"text":"password",value:D.password||"Not available",readOnly:!0,className:"w-full px-4 py-2 pr-20 border border-gray-300 rounded-lg bg-gray-50 font-mono"}),s.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex gap-1",children:[s.jsx("button",{onClick:()=>V(!H),className:"p-1.5 hover:bg-gray-200 rounded transition-colors",title:H?"Hide":"Show",children:H?s.jsx(up,{className:"w-4 h-4 text-gray-600"}):s.jsx(Mo,{className:"w-4 h-4 text-gray-600"})}),D.password&&s.jsx("button",{onClick:()=>ue(D.password),className:"p-1.5 hover:bg-gray-200 rounded transition-colors",title:"Copy",children:s.jsx(kF,{className:"w-4 h-4 text-gray-600"})})]})]})]}),D.passwordLastChanged&&s.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:["Last changed: ",new Date(D.passwordLastChanged.toDate?.()||D.passwordLastChanged).toLocaleString("en-IN")]}),s.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 mb-4",children:s.jsxs("p",{className:"text-xs text-amber-800",children:[" ",s.jsx("strong",{children:"Security Notice:"})," This password is stored in encoded format (not encrypted). Users should change their password after first login for security."]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:B,disabled:te,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors",children:[s.jsx(tT,{className:"w-4 h-4"}),"Generate New"]}),s.jsx("button",{onClick:Ne,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Close"})]})]}):s.jsx("div",{className:"text-center py-4",children:s.jsx("p",{className:"text-gray-600",children:"Password not available"})})]})})]})}function IG(){const n=window.location.hostname.includes("superadmin-grampanchayat");return s.jsx(W8,{children:s.jsx(YO,{children:s.jsx(GO,{children:s.jsx(WO,{children:s.jsx(J8,{children:s.jsxs(iF,{children:[s.jsxs(U8,{children:[n&&s.jsx(Bt,{path:"/",element:s.jsx(z2,{to:"/superadmin/login",replace:!0})}),s.jsx(Bt,{path:"/superadmin/login",element:s.jsx(SG,{})}),s.jsx(Bt,{path:"/superadmin/dashboard",element:s.jsx(p0,{children:s.jsx(EG,{})})}),s.jsx(Bt,{path:"/superadmin/gram-panchayats",element:s.jsx(p0,{children:s.jsx(TG,{})})}),s.jsx(Bt,{path:"/superadmin/gram-panchayats/add",element:s.jsx(p0,{children:s.jsx(AG,{})})}),s.jsx(Bt,{path:"/superadmin/users",element:s.jsx(p0,{children:s.jsx(CG,{})})}),s.jsxs(Bt,{path:"/",element:s.jsx(mU,{}),children:[s.jsx(Bt,{index:!0,element:s.jsx(yU,{})}),s.jsx(Bt,{path:"about",element:s.jsx(bU,{})}),s.jsx(Bt,{path:"panchayat",element:s.jsx(SU,{})}),s.jsx(Bt,{path:"services",element:s.jsx(IU,{})}),s.jsx(Bt,{path:"schemes",element:s.jsx(DU,{})}),s.jsx(Bt,{path:"downloads",element:s.jsx(BU,{})}),s.jsx(Bt,{path:"education",element:s.jsx(zU,{})}),s.jsx(Bt,{path:"gallery",element:s.jsx(KU,{})}),s.jsx(Bt,{path:"financials",element:s.jsx(ZU,{})}),s.jsx(Bt,{path:"notices",element:s.jsx(aB,{})}),s.jsx(Bt,{path:"contact",element:s.jsx(iB,{})}),s.jsx(Bt,{path:"village-statistics",element:s.jsx(bG,{})})]}),s.jsx(Bt,{path:"/firebase-setup",element:s.jsx(_G,{})}),s.jsx(Bt,{path:"/admin/login",element:s.jsx(oB,{})}),s.jsxs(Bt,{path:"/admin",element:s.jsx(gU,{children:s.jsx(pU,{})}),children:[s.jsx(Bt,{path:"dashboard",element:s.jsx(lB,{})}),s.jsx(Bt,{path:"members",element:s.jsx(cB,{})}),s.jsx(Bt,{path:"members/new",element:s.jsx(u4,{})}),s.jsx(Bt,{path:"members/edit/:id",element:s.jsx(u4,{})}),s.jsx(Bt,{path:"services",element:s.jsx(dB,{})}),s.jsx(Bt,{path:"services/new",element:s.jsx(d4,{})}),s.jsx(Bt,{path:"services/edit/:id",element:s.jsx(d4,{})}),s.jsx(Bt,{path:"schemes",element:s.jsx(hB,{})}),s.jsx(Bt,{path:"schemes/new",element:s.jsx(h4,{})}),s.jsx(Bt,{path:"schemes/edit/:id",element:s.jsx(h4,{})}),s.jsx(Bt,{path:"notices",element:s.jsx(fB,{})}),s.jsx(Bt,{path:"notices/new",element:s.jsx(f4,{})}),s.jsx(Bt,{path:"notices/edit/:id",element:s.jsx(f4,{})}),s.jsx(Bt,{path:"announcements",element:s.jsx(vG,{})}),s.jsx(Bt,{path:"announcements/new",element:s.jsx(U6,{})}),s.jsx(Bt,{path:"announcements/edit/:id",element:s.jsx(U6,{})}),s.jsx(Bt,{path:"gallery",element:s.jsx(mB,{})}),s.jsx(Bt,{path:"gallery/new",element:s.jsx(m4,{})}),s.jsx(Bt,{path:"gallery/edit/:id",element:s.jsx(m4,{})}),s.jsx(Bt,{path:"forms",element:s.jsx(xB,{})}),s.jsx(Bt,{path:"forms/new",element:s.jsx(g4,{})}),s.jsx(Bt,{path:"forms/edit/:id",element:s.jsx(g4,{})}),s.jsx(Bt,{path:"settings",element:s.jsx(yB,{})}),s.jsx(Bt,{path:"grievances",element:s.jsx(vB,{})}),s.jsx(Bt,{path:"grievances/new",element:s.jsx(p4,{})}),s.jsx(Bt,{path:"grievances/edit/:id",element:s.jsx(p4,{})}),s.jsx(Bt,{path:"financials",element:s.jsx(wB,{})}),s.jsx(Bt,{path:"financials/new",element:s.jsx(x4,{})}),s.jsx(Bt,{path:"financials/edit/:id",element:s.jsx(x4,{})}),s.jsx(Bt,{path:"content/about",element:s.jsx(NB,{})}),s.jsx(Bt,{path:"content/education",element:s.jsx(jB,{})}),s.jsx(Bt,{path:"village-statistics",element:s.jsx(yG,{})})]})]}),s.jsx(xU,{})]})})})})})})}$I.createRoot(document.getElementById("root")).render(s.jsx(K.StrictMode,{children:s.jsx(IG,{})}));export{cr as _,RG as c,MI as g};
